(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function iE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sE={exports:{}},tf={},oE={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lu=Symbol.for("react.element"),lk=Symbol.for("react.portal"),ck=Symbol.for("react.fragment"),uk=Symbol.for("react.strict_mode"),dk=Symbol.for("react.profiler"),hk=Symbol.for("react.provider"),fk=Symbol.for("react.context"),pk=Symbol.for("react.forward_ref"),mk=Symbol.for("react.suspense"),gk=Symbol.for("react.memo"),yk=Symbol.for("react.lazy"),Zv=Symbol.iterator;function vk(t){return t===null||typeof t!="object"?null:(t=Zv&&t[Zv]||t["@@iterator"],typeof t=="function"?t:null)}var aE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lE=Object.assign,cE={};function Ja(t,e,n){this.props=t,this.context=e,this.refs=cE,this.updater=n||aE}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uE(){}uE.prototype=Ja.prototype;function Qg(t,e,n){this.props=t,this.context=e,this.refs=cE,this.updater=n||aE}var Yg=Qg.prototype=new uE;Yg.constructor=Qg;lE(Yg,Ja.prototype);Yg.isPureReactComponent=!0;var e_=Array.isArray,dE=Object.prototype.hasOwnProperty,Xg={current:null},hE={key:!0,ref:!0,__self:!0,__source:!0};function fE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)dE.call(e,r)&&!hE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:lu,type:t,key:s,ref:o,props:i,_owner:Xg.current}}function _k(t,e){return{$$typeof:lu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jg(t){return typeof t=="object"&&t!==null&&t.$$typeof===lu}function wk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var t_=/\/+/g;function np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wk(""+t.key):e.toString(36)}function Ed(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lu:case lk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+np(o,0):r,e_(i)?(n="",t!=null&&(n=t.replace(t_,"$&/")+"/"),Ed(i,e,n,"",function(c){return c})):i!=null&&(Jg(i)&&(i=_k(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(t_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",e_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+np(s,a);o+=Ed(s,e,n,l,i)}else if(l=vk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+np(s,a++),o+=Ed(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ju(t,e,n){if(t==null)return t;var r=[],i=0;return Ed(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},bd={transition:null},Ek={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:bd,ReactCurrentOwner:Xg};function pE(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:ju,forEach:function(t,e,n){ju(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ju(t,function(){e++}),e},toArray:function(t){return ju(t,function(e){return e})||[]},only:function(t){if(!Jg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Ja;Ce.Fragment=ck;Ce.Profiler=dk;Ce.PureComponent=Qg;Ce.StrictMode=uk;Ce.Suspense=mk;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ek;Ce.act=pE;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Xg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dE.call(e,l)&&!hE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:lu,type:t.type,key:i,ref:s,props:r,_owner:o}};Ce.createContext=function(t){return t={$$typeof:fk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hk,_context:t},t.Consumer=t};Ce.createElement=fE;Ce.createFactory=function(t){var e=fE.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:pk,render:t}};Ce.isValidElement=Jg;Ce.lazy=function(t){return{$$typeof:yk,_payload:{_status:-1,_result:t},_init:xk}};Ce.memo=function(t,e){return{$$typeof:gk,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=bd.transition;bd.transition={};try{t()}finally{bd.transition=e}};Ce.unstable_act=pE;Ce.useCallback=function(t,e){return sn.current.useCallback(t,e)};Ce.useContext=function(t){return sn.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return sn.current.useEffect(t,e)};Ce.useId=function(){return sn.current.useId()};Ce.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return sn.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};Ce.useRef=function(t){return sn.current.useRef(t)};Ce.useState=function(t){return sn.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return sn.current.useTransition()};Ce.version="18.3.1";oE.exports=Ce;var D=oE.exports;const K=iE(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bk=D,Ik=Symbol.for("react.element"),Tk=Symbol.for("react.fragment"),Sk=Object.prototype.hasOwnProperty,Ck=bk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ak={key:!0,ref:!0,__self:!0,__source:!0};function mE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Sk.call(e,r)&&!Ak.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ik,type:t,key:s,ref:o,props:i,_owner:Ck.current}}tf.Fragment=Tk;tf.jsx=mE;tf.jsxs=mE;sE.exports=tf;var p=sE.exports,om={},gE={exports:{}},Ln={},yE={exports:{}},vE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,L){var B=j.length;j.push(L);e:for(;0<B;){var G=B-1>>>1,U=j[G];if(0<i(U,L))j[G]=L,j[B]=U,B=G;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var L=j[0],B=j.pop();if(B!==L){j[0]=B;e:for(var G=0,U=j.length,Y=U>>>1;G<Y;){var X=2*(G+1)-1,ee=j[X],oe=X+1,he=j[oe];if(0>i(ee,B))oe<U&&0>i(he,ee)?(j[G]=he,j[oe]=B,G=oe):(j[G]=ee,j[X]=B,G=X);else if(oe<U&&0>i(he,B))j[G]=he,j[oe]=B,G=oe;else break e}}return L}function i(j,L){var B=j.sortIndex-L.sortIndex;return B!==0?B:j.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,E=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(j){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=j)r(c),L.sortIndex=L.expirationTime,e(l,L);else break;L=n(c)}}function A(j){if(x=!1,T(j),!E)if(n(l)!==null)E=!0,z(O);else{var L=n(c);L!==null&&F(A,L.startTime-j)}}function O(j,L){E=!1,x&&(x=!1,y(b),b=-1),m=!0;var B=f;try{for(T(L),h=n(l);h!==null&&(!(h.expirationTime>L)||j&&!C());){var G=h.callback;if(typeof G=="function"){h.callback=null,f=h.priorityLevel;var U=G(h.expirationTime<=L);L=t.unstable_now(),typeof U=="function"?h.callback=U:h===n(l)&&r(l),T(L)}else r(l);h=n(l)}if(h!==null)var Y=!0;else{var X=n(c);X!==null&&F(A,X.startTime-L),Y=!1}return Y}finally{h=null,f=B,m=!1}}var M=!1,S=null,b=-1,w=5,I=-1;function C(){return!(t.unstable_now()-I<w)}function R(){if(S!==null){var j=t.unstable_now();I=j;var L=!0;try{L=S(!0,j)}finally{L?k():(M=!1,S=null)}}else M=!1}var k;if(typeof v=="function")k=function(){v(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,$=P.port2;P.port1.onmessage=R,k=function(){$.postMessage(null)}}else k=function(){N(R,0)};function z(j){S=j,M||(M=!0,k())}function F(j,L){b=N(function(){j(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,z(O))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var B=f;f=L;try{return j()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,L){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=f;f=j;try{return L()}finally{f=B}},t.unstable_scheduleCallback=function(j,L,B){var G=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?G+B:G):B=G,j){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=B+U,j={id:d++,callback:L,priorityLevel:j,startTime:B,expirationTime:U,sortIndex:-1},B>G?(j.sortIndex=B,e(c,j),n(l)===null&&j===n(c)&&(x?(y(b),b=-1):x=!0,F(A,B-G))):(j.sortIndex=U,e(l,j),E||m||(E=!0,z(O))),j},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(j){var L=f;return function(){var B=f;f=L;try{return j.apply(this,arguments)}finally{f=B}}}})(vE);yE.exports=vE;var kk=yE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk=D,On=kk;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _E=new Set,Ec={};function wo(t,e){Ta(t,e),Ta(t+"Capture",e)}function Ta(t,e){for(Ec[t]=e,t=0;t<e.length;t++)_E.add(e[t])}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=Object.prototype.hasOwnProperty,Nk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n_={},r_={};function Pk(t){return am.call(r_,t)?!0:am.call(n_,t)?!1:Nk.test(t)?r_[t]=!0:(n_[t]=!0,!1)}function Dk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vk(t,e,n,r){if(e===null||typeof e>"u"||Dk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zg=/[\-:]([a-z])/g;function e0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zg,e0);Ut[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zg,e0);Ut[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zg,e0);Ut[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function t0(t,e,n,r){var i=Ut.hasOwnProperty(e)?Ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vk(e,n,i,r)&&(n=null),r||i===null?Pk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gi=Rk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fu=Symbol.for("react.element"),Jo=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),n0=Symbol.for("react.strict_mode"),lm=Symbol.for("react.profiler"),wE=Symbol.for("react.provider"),xE=Symbol.for("react.context"),r0=Symbol.for("react.forward_ref"),cm=Symbol.for("react.suspense"),um=Symbol.for("react.suspense_list"),i0=Symbol.for("react.memo"),Vi=Symbol.for("react.lazy"),EE=Symbol.for("react.offscreen"),i_=Symbol.iterator;function Cl(t){return t===null||typeof t!="object"?null:(t=i_&&t[i_]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,rp;function Hl(t){if(rp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rp=e&&e[1]||""}return`
`+rp+t}var ip=!1;function sp(t,e){if(!t||ip)return"";ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ip=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hl(t):""}function Ok(t){switch(t.tag){case 5:return Hl(t.type);case 16:return Hl("Lazy");case 13:return Hl("Suspense");case 19:return Hl("SuspenseList");case 0:case 2:case 15:return t=sp(t.type,!1),t;case 11:return t=sp(t.type.render,!1),t;case 1:return t=sp(t.type,!0),t;default:return""}}function dm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zo:return"Fragment";case Jo:return"Portal";case lm:return"Profiler";case n0:return"StrictMode";case cm:return"Suspense";case um:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xE:return(t.displayName||"Context")+".Consumer";case wE:return(t._context.displayName||"Context")+".Provider";case r0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case i0:return e=t.displayName||null,e!==null?e:dm(t.type)||"Memo";case Vi:e=t._payload,t=t._init;try{return dm(t(e))}catch{}}return null}function zk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dm(e);case 8:return e===n0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Mk(t){var e=bE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $u(t){t._valueTracker||(t._valueTracker=Mk(t))}function IE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hm(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function s_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TE(t,e){e=e.checked,e!=null&&t0(t,"checked",e,!1)}function fm(t,e){TE(t,e);var n=ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pm(t,e.type,n):e.hasOwnProperty("defaultValue")&&pm(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function o_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pm(t,e,n){(e!=="number"||Xd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kl=Array.isArray;function da(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ls(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function mm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function a_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Kl(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ls(n)}}function SE(t,e){var n=ls(e.value),r=ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function l_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uu,AE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uu=Uu||document.createElement("div"),Uu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lk=["Webkit","ms","Moz","O"];Object.keys(sc).forEach(function(t){Lk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sc[e]=sc[t]})});function kE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sc.hasOwnProperty(t)&&sc[t]?(""+e).trim():e+"px"}function RE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var jk=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(t,e){if(e){if(jk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function vm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=null;function s0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wm=null,ha=null,fa=null;function c_(t){if(t=du(t)){if(typeof wm!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=af(e),wm(t.stateNode,t.type,e))}}function NE(t){ha?fa?fa.push(t):fa=[t]:ha=t}function PE(){if(ha){var t=ha,e=fa;if(fa=ha=null,c_(t),e)for(t=0;t<e.length;t++)c_(e[t])}}function DE(t,e){return t(e)}function VE(){}var op=!1;function OE(t,e,n){if(op)return t(e,n);op=!0;try{return DE(t,e,n)}finally{op=!1,(ha!==null||fa!==null)&&(VE(),PE())}}function Ic(t,e){var n=t.stateNode;if(n===null)return null;var r=af(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var xm=!1;if(ai)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){xm=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{xm=!1}function Fk(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var oc=!1,Jd=null,Zd=!1,Em=null,$k={onError:function(t){oc=!0,Jd=t}};function Uk(t,e,n,r,i,s,o,a,l){oc=!1,Jd=null,Fk.apply($k,arguments)}function Bk(t,e,n,r,i,s,o,a,l){if(Uk.apply(this,arguments),oc){if(oc){var c=Jd;oc=!1,Jd=null}else throw Error(Z(198));Zd||(Zd=!0,Em=c)}}function xo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function u_(t){if(xo(t)!==t)throw Error(Z(188))}function qk(t){var e=t.alternate;if(!e){if(e=xo(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u_(i),t;if(s===r)return u_(i),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function ME(t){return t=qk(t),t!==null?LE(t):null}function LE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LE(t);if(e!==null)return e;t=t.sibling}return null}var jE=On.unstable_scheduleCallback,d_=On.unstable_cancelCallback,Hk=On.unstable_shouldYield,Kk=On.unstable_requestPaint,pt=On.unstable_now,Gk=On.unstable_getCurrentPriorityLevel,o0=On.unstable_ImmediatePriority,FE=On.unstable_UserBlockingPriority,eh=On.unstable_NormalPriority,Wk=On.unstable_LowPriority,$E=On.unstable_IdlePriority,nf=null,Ar=null;function Qk(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(nf,t,void 0,(t.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:Jk,Yk=Math.log,Xk=Math.LN2;function Jk(t){return t>>>=0,t===0?32:31-(Yk(t)/Xk|0)|0}var Bu=64,qu=4194304;function Gl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function th(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Gl(a):(s&=o,s!==0&&(r=Gl(s)))}else o=n&~i,o!==0?r=Gl(o):s!==0&&(r=Gl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dr(e),i=1<<n,r|=t[n],e&=~i;return r}function Zk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-dr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Zk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function bm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UE(){var t=Bu;return Bu<<=1,!(Bu&4194240)&&(Bu=64),t}function ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dr(e),t[e]=n}function tR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-dr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function a0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function BE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qE,l0,HE,KE,GE,Im=!1,Hu=[],Wi=null,Qi=null,Yi=null,Tc=new Map,Sc=new Map,Li=[],nR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h_(t,e){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":Tc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(e.pointerId)}}function kl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=du(e),e!==null&&l0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function rR(t,e,n,r,i){switch(e){case"focusin":return Wi=kl(Wi,t,e,n,r,i),!0;case"dragenter":return Qi=kl(Qi,t,e,n,r,i),!0;case"mouseover":return Yi=kl(Yi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Tc.set(s,kl(Tc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Sc.set(s,kl(Sc.get(s)||null,t,e,n,r,i)),!0}return!1}function WE(t){var e=$s(t.target);if(e!==null){var n=xo(e);if(n!==null){if(e=n.tag,e===13){if(e=zE(n),e!==null){t.blockedOn=e,GE(t.priority,function(){HE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Id(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_m=r,n.target.dispatchEvent(r),_m=null}else return e=du(n),e!==null&&l0(e),t.blockedOn=n,!1;e.shift()}return!0}function f_(t,e,n){Id(t)&&n.delete(e)}function iR(){Im=!1,Wi!==null&&Id(Wi)&&(Wi=null),Qi!==null&&Id(Qi)&&(Qi=null),Yi!==null&&Id(Yi)&&(Yi=null),Tc.forEach(f_),Sc.forEach(f_)}function Rl(t,e){t.blockedOn===e&&(t.blockedOn=null,Im||(Im=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,iR)))}function Cc(t){function e(i){return Rl(i,t)}if(0<Hu.length){Rl(Hu[0],t);for(var n=1;n<Hu.length;n++){var r=Hu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wi!==null&&Rl(Wi,t),Qi!==null&&Rl(Qi,t),Yi!==null&&Rl(Yi,t),Tc.forEach(e),Sc.forEach(e),n=0;n<Li.length;n++)r=Li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Li.length&&(n=Li[0],n.blockedOn===null);)WE(n),n.blockedOn===null&&Li.shift()}var pa=gi.ReactCurrentBatchConfig,nh=!0;function sR(t,e,n,r){var i=Fe,s=pa.transition;pa.transition=null;try{Fe=1,c0(t,e,n,r)}finally{Fe=i,pa.transition=s}}function oR(t,e,n,r){var i=Fe,s=pa.transition;pa.transition=null;try{Fe=4,c0(t,e,n,r)}finally{Fe=i,pa.transition=s}}function c0(t,e,n,r){if(nh){var i=Tm(t,e,n,r);if(i===null)yp(t,e,r,rh,n),h_(t,r);else if(rR(i,t,e,n,r))r.stopPropagation();else if(h_(t,r),e&4&&-1<nR.indexOf(t)){for(;i!==null;){var s=du(i);if(s!==null&&qE(s),s=Tm(t,e,n,r),s===null&&yp(t,e,r,rh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else yp(t,e,r,null,n)}}var rh=null;function Tm(t,e,n,r){if(rh=null,t=s0(r),t=$s(t),t!==null)if(e=xo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rh=t,null}function QE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gk()){case o0:return 1;case FE:return 4;case eh:case Wk:return 16;case $E:return 536870912;default:return 16}default:return 16}}var Hi=null,u0=null,Td=null;function YE(){if(Td)return Td;var t,e=u0,n=e.length,r,i="value"in Hi?Hi.value:Hi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Td=i.slice(t,1<r?1-r:void 0)}function Sd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ku(){return!0}function p_(){return!1}function jn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ku:p_,this.isPropagationStopped=p_,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ku)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ku)},persist:function(){},isPersistent:Ku}),e}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d0=jn(Za),uu=ot({},Za,{view:0,detail:0}),aR=jn(uu),lp,cp,Nl,rf=ot({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:h0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nl&&(Nl&&t.type==="mousemove"?(lp=t.screenX-Nl.screenX,cp=t.screenY-Nl.screenY):cp=lp=0,Nl=t),lp)},movementY:function(t){return"movementY"in t?t.movementY:cp}}),m_=jn(rf),lR=ot({},rf,{dataTransfer:0}),cR=jn(lR),uR=ot({},uu,{relatedTarget:0}),up=jn(uR),dR=ot({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),hR=jn(dR),fR=ot({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pR=jn(fR),mR=ot({},Za,{data:0}),g_=jn(mR),gR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _R(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vR[t])?!!e[t]:!1}function h0(){return _R}var wR=ot({},uu,{key:function(t){if(t.key){var e=gR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:h0,charCode:function(t){return t.type==="keypress"?Sd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xR=jn(wR),ER=ot({},rf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y_=jn(ER),bR=ot({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:h0}),IR=jn(bR),TR=ot({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),SR=jn(TR),CR=ot({},rf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AR=jn(CR),kR=[9,13,27,32],f0=ai&&"CompositionEvent"in window,ac=null;ai&&"documentMode"in document&&(ac=document.documentMode);var RR=ai&&"TextEvent"in window&&!ac,XE=ai&&(!f0||ac&&8<ac&&11>=ac),v_=" ",__=!1;function JE(t,e){switch(t){case"keyup":return kR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ea=!1;function NR(t,e){switch(t){case"compositionend":return ZE(e);case"keypress":return e.which!==32?null:(__=!0,v_);case"textInput":return t=e.data,t===v_&&__?null:t;default:return null}}function PR(t,e){if(ea)return t==="compositionend"||!f0&&JE(t,e)?(t=YE(),Td=u0=Hi=null,ea=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XE&&e.locale!=="ko"?null:e.data;default:return null}}var DR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DR[t.type]:e==="textarea"}function eb(t,e,n,r){NE(r),e=ih(e,"onChange"),0<e.length&&(n=new d0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lc=null,Ac=null;function VR(t){db(t,0)}function sf(t){var e=ra(t);if(IE(e))return t}function OR(t,e){if(t==="change")return e}var tb=!1;if(ai){var dp;if(ai){var hp="oninput"in document;if(!hp){var x_=document.createElement("div");x_.setAttribute("oninput","return;"),hp=typeof x_.oninput=="function"}dp=hp}else dp=!1;tb=dp&&(!document.documentMode||9<document.documentMode)}function E_(){lc&&(lc.detachEvent("onpropertychange",nb),Ac=lc=null)}function nb(t){if(t.propertyName==="value"&&sf(Ac)){var e=[];eb(e,Ac,t,s0(t)),OE(VR,e)}}function zR(t,e,n){t==="focusin"?(E_(),lc=e,Ac=n,lc.attachEvent("onpropertychange",nb)):t==="focusout"&&E_()}function MR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sf(Ac)}function LR(t,e){if(t==="click")return sf(e)}function jR(t,e){if(t==="input"||t==="change")return sf(e)}function FR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:FR;function kc(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!am.call(e,i)||!mr(t[i],e[i]))return!1}return!0}function b_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function I_(t,e){var n=b_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b_(n)}}function rb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ib(){for(var t=window,e=Xd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xd(t.document)}return e}function p0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $R(t){var e=ib(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rb(n.ownerDocument.documentElement,n)){if(r!==null&&p0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=I_(n,s);var o=I_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UR=ai&&"documentMode"in document&&11>=document.documentMode,ta=null,Sm=null,cc=null,Cm=!1;function T_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cm||ta==null||ta!==Xd(r)||(r=ta,"selectionStart"in r&&p0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cc&&kc(cc,r)||(cc=r,r=ih(Sm,"onSelect"),0<r.length&&(e=new d0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ta)))}function Gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var na={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},fp={},sb={};ai&&(sb=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function of(t){if(fp[t])return fp[t];if(!na[t])return t;var e=na[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sb)return fp[t]=e[n];return t}var ob=of("animationend"),ab=of("animationiteration"),lb=of("animationstart"),cb=of("transitionend"),ub=new Map,S_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){ub.set(t,e),wo(e,[t])}for(var pp=0;pp<S_.length;pp++){var mp=S_[pp],BR=mp.toLowerCase(),qR=mp[0].toUpperCase()+mp.slice(1);ps(BR,"on"+qR)}ps(ob,"onAnimationEnd");ps(ab,"onAnimationIteration");ps(lb,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(cb,"onTransitionEnd");Ta("onMouseEnter",["mouseout","mouseover"]);Ta("onMouseLeave",["mouseout","mouseover"]);Ta("onPointerEnter",["pointerout","pointerover"]);Ta("onPointerLeave",["pointerout","pointerover"]);wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function C_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Bk(r,e,void 0,t),t.currentTarget=null}function db(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;C_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;C_(i,a,c),s=l}}}if(Zd)throw t=Em,Zd=!1,Em=null,t}function Qe(t,e){var n=e[Pm];n===void 0&&(n=e[Pm]=new Set);var r=t+"__bubble";n.has(r)||(hb(e,t,2,!1),n.add(r))}function gp(t,e,n){var r=0;e&&(r|=4),hb(n,t,r,e)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function Rc(t){if(!t[Wu]){t[Wu]=!0,_E.forEach(function(n){n!=="selectionchange"&&(HR.has(n)||gp(n,!1,t),gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wu]||(e[Wu]=!0,gp("selectionchange",!1,e))}}function hb(t,e,n,r){switch(QE(e)){case 1:var i=sR;break;case 4:i=oR;break;default:i=c0}n=i.bind(null,e,n,t),i=void 0,!xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$s(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}OE(function(){var c=s,d=s0(n),h=[];e:{var f=ub.get(t);if(f!==void 0){var m=d0,E=t;switch(t){case"keypress":if(Sd(n)===0)break e;case"keydown":case"keyup":m=xR;break;case"focusin":E="focus",m=up;break;case"focusout":E="blur",m=up;break;case"beforeblur":case"afterblur":m=up;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=m_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=cR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=IR;break;case ob:case ab:case lb:m=hR;break;case cb:m=SR;break;case"scroll":m=aR;break;case"wheel":m=AR;break;case"copy":case"cut":case"paste":m=pR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=y_}var x=(e&4)!==0,N=!x&&t==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var v=c,T;v!==null;){T=v;var A=T.stateNode;if(T.tag===5&&A!==null&&(T=A,y!==null&&(A=Ic(v,y),A!=null&&x.push(Nc(v,A,T)))),N)break;v=v.return}0<x.length&&(f=new m(f,E,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==_m&&(E=n.relatedTarget||n.fromElement)&&($s(E)||E[li]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=c,E=E?$s(E):null,E!==null&&(N=xo(E),E!==N||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=c),m!==E)){if(x=m_,A="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=y_,A="onPointerLeave",y="onPointerEnter",v="pointer"),N=m==null?f:ra(m),T=E==null?f:ra(E),f=new x(A,v+"leave",m,n,d),f.target=N,f.relatedTarget=T,A=null,$s(d)===c&&(x=new x(y,v+"enter",E,n,d),x.target=T,x.relatedTarget=N,A=x),N=A,m&&E)t:{for(x=m,y=E,v=0,T=x;T;T=Oo(T))v++;for(T=0,A=y;A;A=Oo(A))T++;for(;0<v-T;)x=Oo(x),v--;for(;0<T-v;)y=Oo(y),T--;for(;v--;){if(x===y||y!==null&&x===y.alternate)break t;x=Oo(x),y=Oo(y)}x=null}else x=null;m!==null&&A_(h,f,m,x,!1),E!==null&&N!==null&&A_(h,N,E,x,!0)}}e:{if(f=c?ra(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var O=OR;else if(w_(f))if(tb)O=jR;else{O=MR;var M=zR}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=LR);if(O&&(O=O(t,c))){eb(h,O,n,d);break e}M&&M(t,f,c),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&pm(f,"number",f.value)}switch(M=c?ra(c):window,t){case"focusin":(w_(M)||M.contentEditable==="true")&&(ta=M,Sm=c,cc=null);break;case"focusout":cc=Sm=ta=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,T_(h,n,d);break;case"selectionchange":if(UR)break;case"keydown":case"keyup":T_(h,n,d)}var S;if(f0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ea?JE(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(XE&&n.locale!=="ko"&&(ea||b!=="onCompositionStart"?b==="onCompositionEnd"&&ea&&(S=YE()):(Hi=d,u0="value"in Hi?Hi.value:Hi.textContent,ea=!0)),M=ih(c,b),0<M.length&&(b=new g_(b,t,null,n,d),h.push({event:b,listeners:M}),S?b.data=S:(S=ZE(n),S!==null&&(b.data=S)))),(S=RR?NR(t,n):PR(t,n))&&(c=ih(c,"onBeforeInput"),0<c.length&&(d=new g_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}db(h,e)})}function Nc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ic(t,n),s!=null&&r.unshift(Nc(t,s,i)),s=Ic(t,e),s!=null&&r.push(Nc(t,s,i))),t=t.return}return r}function Oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function A_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ic(n,s),l!=null&&o.unshift(Nc(n,l,a))):i||(l=Ic(n,s),l!=null&&o.push(Nc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KR=/\r\n?/g,GR=/\u0000|\uFFFD/g;function k_(t){return(typeof t=="string"?t:""+t).replace(KR,`
`).replace(GR,"")}function Qu(t,e,n){if(e=k_(e),k_(t)!==e&&n)throw Error(Z(425))}function sh(){}var Am=null,km=null;function Rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,WR=typeof clearTimeout=="function"?clearTimeout:void 0,R_=typeof Promise=="function"?Promise:void 0,QR=typeof queueMicrotask=="function"?queueMicrotask:typeof R_<"u"?function(t){return R_.resolve(null).then(t).catch(YR)}:Nm;function YR(t){setTimeout(function(){throw t})}function vp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cc(e)}function Xi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function N_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var el=Math.random().toString(36).slice(2),Tr="__reactFiber$"+el,Pc="__reactProps$"+el,li="__reactContainer$"+el,Pm="__reactEvents$"+el,XR="__reactListeners$"+el,JR="__reactHandles$"+el;function $s(t){var e=t[Tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[li]||n[Tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=N_(t);t!==null;){if(n=t[Tr])return n;t=N_(t)}return e}t=n,n=t.parentNode}return null}function du(t){return t=t[Tr]||t[li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ra(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function af(t){return t[Pc]||null}var Dm=[],ia=-1;function ms(t){return{current:t}}function Ye(t){0>ia||(t.current=Dm[ia],Dm[ia]=null,ia--)}function He(t,e){ia++,Dm[ia]=t.current,t.current=e}var cs={},Xt=ms(cs),pn=ms(!1),eo=cs;function Sa(t,e){var n=t.type.contextTypes;if(!n)return cs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mn(t){return t=t.childContextTypes,t!=null}function oh(){Ye(pn),Ye(Xt)}function P_(t,e,n){if(Xt.current!==cs)throw Error(Z(168));He(Xt,e),He(pn,n)}function fb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,zk(t)||"Unknown",i));return ot({},n,r)}function ah(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cs,eo=Xt.current,He(Xt,t),He(pn,pn.current),!0}function D_(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=fb(t,e,eo),r.__reactInternalMemoizedMergedChildContext=t,Ye(pn),Ye(Xt),He(Xt,t)):Ye(pn),He(pn,n)}var Qr=null,lf=!1,_p=!1;function pb(t){Qr===null?Qr=[t]:Qr.push(t)}function ZR(t){lf=!0,pb(t)}function gs(){if(!_p&&Qr!==null){_p=!0;var t=0,e=Fe;try{var n=Qr;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qr=null,lf=!1}catch(i){throw Qr!==null&&(Qr=Qr.slice(t+1)),jE(o0,gs),i}finally{Fe=e,_p=!1}}return null}var sa=[],oa=0,lh=null,ch=0,qn=[],Hn=0,to=null,Xr=1,Jr="";function Ps(t,e){sa[oa++]=ch,sa[oa++]=lh,lh=t,ch=e}function mb(t,e,n){qn[Hn++]=Xr,qn[Hn++]=Jr,qn[Hn++]=to,to=t;var r=Xr;t=Jr;var i=32-dr(r)-1;r&=~(1<<i),n+=1;var s=32-dr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xr=1<<32-dr(e)+i|n<<i|r,Jr=s+t}else Xr=1<<s|n<<i|r,Jr=t}function m0(t){t.return!==null&&(Ps(t,1),mb(t,1,0))}function g0(t){for(;t===lh;)lh=sa[--oa],sa[oa]=null,ch=sa[--oa],sa[oa]=null;for(;t===to;)to=qn[--Hn],qn[Hn]=null,Jr=qn[--Hn],qn[Hn]=null,Xr=qn[--Hn],qn[Hn]=null}var Pn=null,Rn=null,Ze=!1,lr=null;function gb(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function V_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,Rn=Xi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:Xr,overflow:Jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,Rn=null,!0):!1;default:return!1}}function Vm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Om(t){if(Ze){var e=Rn;if(e){var n=e;if(!V_(t,e)){if(Vm(t))throw Error(Z(418));e=Xi(n.nextSibling);var r=Pn;e&&V_(t,e)?gb(r,n):(t.flags=t.flags&-4097|2,Ze=!1,Pn=t)}}else{if(Vm(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Ze=!1,Pn=t}}}function O_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function Yu(t){if(t!==Pn)return!1;if(!Ze)return O_(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rm(t.type,t.memoizedProps)),e&&(e=Rn)){if(Vm(t))throw yb(),Error(Z(418));for(;e;)gb(t,e),e=Xi(e.nextSibling)}if(O_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rn=Xi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rn=null}}else Rn=Pn?Xi(t.stateNode.nextSibling):null;return!0}function yb(){for(var t=Rn;t;)t=Xi(t.nextSibling)}function Ca(){Rn=Pn=null,Ze=!1}function y0(t){lr===null?lr=[t]:lr.push(t)}var eN=gi.ReactCurrentBatchConfig;function Pl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Xu(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function z_(t){var e=t._init;return e(t._payload)}function vb(t){function e(y,v){if(t){var T=y.deletions;T===null?(y.deletions=[v],y.flags|=16):T.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=ts(y,v),y.index=0,y.sibling=null,y}function s(y,v,T){return y.index=T,t?(T=y.alternate,T!==null?(T=T.index,T<v?(y.flags|=2,v):T):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,T,A){return v===null||v.tag!==6?(v=Sp(T,y.mode,A),v.return=y,v):(v=i(v,T),v.return=y,v)}function l(y,v,T,A){var O=T.type;return O===Zo?d(y,v,T.props.children,A,T.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Vi&&z_(O)===v.type)?(A=i(v,T.props),A.ref=Pl(y,v,T),A.return=y,A):(A=Dd(T.type,T.key,T.props,null,y.mode,A),A.ref=Pl(y,v,T),A.return=y,A)}function c(y,v,T,A){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=Cp(T,y.mode,A),v.return=y,v):(v=i(v,T.children||[]),v.return=y,v)}function d(y,v,T,A,O){return v===null||v.tag!==7?(v=Qs(T,y.mode,A,O),v.return=y,v):(v=i(v,T),v.return=y,v)}function h(y,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Sp(""+v,y.mode,T),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fu:return T=Dd(v.type,v.key,v.props,null,y.mode,T),T.ref=Pl(y,null,v),T.return=y,T;case Jo:return v=Cp(v,y.mode,T),v.return=y,v;case Vi:var A=v._init;return h(y,A(v._payload),T)}if(Kl(v)||Cl(v))return v=Qs(v,y.mode,T,null),v.return=y,v;Xu(y,v)}return null}function f(y,v,T,A){var O=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:a(y,v,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Fu:return T.key===O?l(y,v,T,A):null;case Jo:return T.key===O?c(y,v,T,A):null;case Vi:return O=T._init,f(y,v,O(T._payload),A)}if(Kl(T)||Cl(T))return O!==null?null:d(y,v,T,A,null);Xu(y,T)}return null}function m(y,v,T,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(T)||null,a(v,y,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Fu:return y=y.get(A.key===null?T:A.key)||null,l(v,y,A,O);case Jo:return y=y.get(A.key===null?T:A.key)||null,c(v,y,A,O);case Vi:var M=A._init;return m(y,v,T,M(A._payload),O)}if(Kl(A)||Cl(A))return y=y.get(T)||null,d(v,y,A,O,null);Xu(v,A)}return null}function E(y,v,T,A){for(var O=null,M=null,S=v,b=v=0,w=null;S!==null&&b<T.length;b++){S.index>b?(w=S,S=null):w=S.sibling;var I=f(y,S,T[b],A);if(I===null){S===null&&(S=w);break}t&&S&&I.alternate===null&&e(y,S),v=s(I,v,b),M===null?O=I:M.sibling=I,M=I,S=w}if(b===T.length)return n(y,S),Ze&&Ps(y,b),O;if(S===null){for(;b<T.length;b++)S=h(y,T[b],A),S!==null&&(v=s(S,v,b),M===null?O=S:M.sibling=S,M=S);return Ze&&Ps(y,b),O}for(S=r(y,S);b<T.length;b++)w=m(S,y,b,T[b],A),w!==null&&(t&&w.alternate!==null&&S.delete(w.key===null?b:w.key),v=s(w,v,b),M===null?O=w:M.sibling=w,M=w);return t&&S.forEach(function(C){return e(y,C)}),Ze&&Ps(y,b),O}function x(y,v,T,A){var O=Cl(T);if(typeof O!="function")throw Error(Z(150));if(T=O.call(T),T==null)throw Error(Z(151));for(var M=O=null,S=v,b=v=0,w=null,I=T.next();S!==null&&!I.done;b++,I=T.next()){S.index>b?(w=S,S=null):w=S.sibling;var C=f(y,S,I.value,A);if(C===null){S===null&&(S=w);break}t&&S&&C.alternate===null&&e(y,S),v=s(C,v,b),M===null?O=C:M.sibling=C,M=C,S=w}if(I.done)return n(y,S),Ze&&Ps(y,b),O;if(S===null){for(;!I.done;b++,I=T.next())I=h(y,I.value,A),I!==null&&(v=s(I,v,b),M===null?O=I:M.sibling=I,M=I);return Ze&&Ps(y,b),O}for(S=r(y,S);!I.done;b++,I=T.next())I=m(S,y,b,I.value,A),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?b:I.key),v=s(I,v,b),M===null?O=I:M.sibling=I,M=I);return t&&S.forEach(function(R){return e(y,R)}),Ze&&Ps(y,b),O}function N(y,v,T,A){if(typeof T=="object"&&T!==null&&T.type===Zo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Fu:e:{for(var O=T.key,M=v;M!==null;){if(M.key===O){if(O=T.type,O===Zo){if(M.tag===7){n(y,M.sibling),v=i(M,T.props.children),v.return=y,y=v;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Vi&&z_(O)===M.type){n(y,M.sibling),v=i(M,T.props),v.ref=Pl(y,M,T),v.return=y,y=v;break e}n(y,M);break}else e(y,M);M=M.sibling}T.type===Zo?(v=Qs(T.props.children,y.mode,A,T.key),v.return=y,y=v):(A=Dd(T.type,T.key,T.props,null,y.mode,A),A.ref=Pl(y,v,T),A.return=y,y=A)}return o(y);case Jo:e:{for(M=T.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(y,v.sibling),v=i(v,T.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Cp(T,y.mode,A),v.return=y,y=v}return o(y);case Vi:return M=T._init,N(y,v,M(T._payload),A)}if(Kl(T))return E(y,v,T,A);if(Cl(T))return x(y,v,T,A);Xu(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,T),v.return=y,y=v):(n(y,v),v=Sp(T,y.mode,A),v.return=y,y=v),o(y)):n(y,v)}return N}var Aa=vb(!0),_b=vb(!1),uh=ms(null),dh=null,aa=null,v0=null;function _0(){v0=aa=dh=null}function w0(t){var e=uh.current;Ye(uh),t._currentValue=e}function zm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ma(t,e){dh=t,v0=aa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(v0!==t)if(t={context:t,memoizedValue:e,next:null},aa===null){if(dh===null)throw Error(Z(308));aa=t,dh.dependencies={lanes:0,firstContext:t}}else aa=aa.next=t;return e}var Us=null;function x0(t){Us===null?Us=[t]:Us.push(t)}function wb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,x0(e)):(n.next=i.next,i.next=n),e.interleaved=n,ci(t,r)}function ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oi=!1;function E0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ji(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ci(t,n)}return i=r.interleaved,i===null?(e.next=e,x0(r)):(e.next=i.next,i.next=e),r.interleaved=e,ci(t,n)}function Cd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,a0(t,n)}}function M_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hh(t,e,n,r){var i=t.updateQueue;Oi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,x=a;switch(f=e,m=n,x.tag){case 1:if(E=x.payload,typeof E=="function"){h=E.call(m,h,f);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=x.payload,f=typeof E=="function"?E.call(m,h,f):E,f==null)break e;h=ot({},h,f);break e;case 2:Oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ro|=o,t.lanes=o,t.memoizedState=h}}function L_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var hu={},kr=ms(hu),Dc=ms(hu),Vc=ms(hu);function Bs(t){if(t===hu)throw Error(Z(174));return t}function b0(t,e){switch(He(Vc,e),He(Dc,t),He(kr,hu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gm(e,t)}Ye(kr),He(kr,e)}function ka(){Ye(kr),Ye(Dc),Ye(Vc)}function Eb(t){Bs(Vc.current);var e=Bs(kr.current),n=gm(e,t.type);e!==n&&(He(Dc,t),He(kr,n))}function I0(t){Dc.current===t&&(Ye(kr),Ye(Dc))}var nt=ms(0);function fh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wp=[];function T0(){for(var t=0;t<wp.length;t++)wp[t]._workInProgressVersionPrimary=null;wp.length=0}var Ad=gi.ReactCurrentDispatcher,xp=gi.ReactCurrentBatchConfig,no=0,it=null,Tt=null,Pt=null,ph=!1,uc=!1,Oc=0,tN=0;function Kt(){throw Error(Z(321))}function S0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mr(t[n],e[n]))return!1;return!0}function C0(t,e,n,r,i,s){if(no=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ad.current=t===null||t.memoizedState===null?sN:oN,t=n(r,i),uc){s=0;do{if(uc=!1,Oc=0,25<=s)throw Error(Z(301));s+=1,Pt=Tt=null,e.updateQueue=null,Ad.current=aN,t=n(r,i)}while(uc)}if(Ad.current=mh,e=Tt!==null&&Tt.next!==null,no=0,Pt=Tt=it=null,ph=!1,e)throw Error(Z(300));return t}function A0(){var t=Oc!==0;return Oc=0,t}function Ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?it.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Jn(){if(Tt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Pt===null?it.memoizedState:Pt.next;if(e!==null)Pt=e,Tt=t;else{if(t===null)throw Error(Z(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Pt===null?it.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function zc(t,e){return typeof e=="function"?e(t):e}function Ep(t){var e=Jn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=Tt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((no&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,it.lanes|=d,ro|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,mr(r,e.memoizedState)||(un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,ro|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);mr(s,e.memoizedState)||(un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bb(){}function Ib(t,e){var n=it,r=Jn(),i=e(),s=!mr(r.memoizedState,i);if(s&&(r.memoizedState=i,un=!0),r=r.queue,k0(Cb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,Mc(9,Sb.bind(null,n,r,i,e),void 0,null),Dt===null)throw Error(Z(349));no&30||Tb(n,e,i)}return i}function Tb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sb(t,e,n,r){e.value=n,e.getSnapshot=r,Ab(e)&&kb(t)}function Cb(t,e,n){return n(function(){Ab(e)&&kb(t)})}function Ab(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mr(t,n)}catch{return!0}}function kb(t){var e=ci(t,1);e!==null&&hr(e,t,1,-1)}function j_(t){var e=Ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:t},e.queue=t,t=t.dispatch=iN.bind(null,it,t),[e.memoizedState,t]}function Mc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rb(){return Jn().memoizedState}function kd(t,e,n,r){var i=Ir();it.flags|=t,i.memoizedState=Mc(1|e,n,void 0,r===void 0?null:r)}function cf(t,e,n,r){var i=Jn();r=r===void 0?null:r;var s=void 0;if(Tt!==null){var o=Tt.memoizedState;if(s=o.destroy,r!==null&&S0(r,o.deps)){i.memoizedState=Mc(e,n,s,r);return}}it.flags|=t,i.memoizedState=Mc(1|e,n,s,r)}function F_(t,e){return kd(8390656,8,t,e)}function k0(t,e){return cf(2048,8,t,e)}function Nb(t,e){return cf(4,2,t,e)}function Pb(t,e){return cf(4,4,t,e)}function Db(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vb(t,e,n){return n=n!=null?n.concat([t]):null,cf(4,4,Db.bind(null,e,t),n)}function R0(){}function Ob(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&S0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zb(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&S0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mb(t,e,n){return no&21?(mr(n,e)||(n=UE(),it.lanes|=n,ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function nN(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=xp.transition;xp.transition={};try{t(!1),e()}finally{Fe=n,xp.transition=r}}function Lb(){return Jn().memoizedState}function rN(t,e,n){var r=es(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jb(t))Fb(e,n);else if(n=wb(t,e,n,r),n!==null){var i=tn();hr(n,t,r,i),$b(n,e,r)}}function iN(t,e,n){var r=es(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jb(t))Fb(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,mr(a,o)){var l=e.interleaved;l===null?(i.next=i,x0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=wb(t,e,i,r),n!==null&&(i=tn(),hr(n,t,r,i),$b(n,e,r))}}function jb(t){var e=t.alternate;return t===it||e!==null&&e===it}function Fb(t,e){uc=ph=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $b(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,a0(t,n)}}var mh={readContext:Xn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},sN={readContext:Xn,useCallback:function(t,e){return Ir().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:F_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kd(4194308,4,Db.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kd(4194308,4,t,e)},useInsertionEffect:function(t,e){return kd(4,2,t,e)},useMemo:function(t,e){var n=Ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rN.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Ir();return t={current:t},e.memoizedState=t},useState:j_,useDebugValue:R0,useDeferredValue:function(t){return Ir().memoizedState=t},useTransition:function(){var t=j_(!1),e=t[0];return t=nN.bind(null,t[1]),Ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=Ir();if(Ze){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Dt===null)throw Error(Z(349));no&30||Tb(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,F_(Cb.bind(null,r,s,t),[t]),r.flags|=2048,Mc(9,Sb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ir(),e=Dt.identifierPrefix;if(Ze){var n=Jr,r=Xr;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oN={readContext:Xn,useCallback:Ob,useContext:Xn,useEffect:k0,useImperativeHandle:Vb,useInsertionEffect:Nb,useLayoutEffect:Pb,useMemo:zb,useReducer:Ep,useRef:Rb,useState:function(){return Ep(zc)},useDebugValue:R0,useDeferredValue:function(t){var e=Jn();return Mb(e,Tt.memoizedState,t)},useTransition:function(){var t=Ep(zc)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:bb,useSyncExternalStore:Ib,useId:Lb,unstable_isNewReconciler:!1},aN={readContext:Xn,useCallback:Ob,useContext:Xn,useEffect:k0,useImperativeHandle:Vb,useInsertionEffect:Nb,useLayoutEffect:Pb,useMemo:zb,useReducer:bp,useRef:Rb,useState:function(){return bp(zc)},useDebugValue:R0,useDeferredValue:function(t){var e=Jn();return Tt===null?e.memoizedState=t:Mb(e,Tt.memoizedState,t)},useTransition:function(){var t=bp(zc)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:bb,useSyncExternalStore:Ib,useId:Lb,unstable_isNewReconciler:!1};function sr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uf={isMounted:function(t){return(t=t._reactInternals)?xo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tn(),i=es(t),s=ii(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ji(t,s,i),e!==null&&(hr(e,t,i,r),Cd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tn(),i=es(t),s=ii(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ji(t,s,i),e!==null&&(hr(e,t,i,r),Cd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tn(),r=es(t),i=ii(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ji(t,i,r),e!==null&&(hr(e,t,r,n),Cd(e,t,r))}};function $_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!kc(n,r)||!kc(i,s):!0}function Ub(t,e,n){var r=!1,i=cs,s=e.contextType;return typeof s=="object"&&s!==null?s=Xn(s):(i=mn(e)?eo:Xt.current,r=e.contextTypes,s=(r=r!=null)?Sa(t,i):cs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function U_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uf.enqueueReplaceState(e,e.state,null)}function Lm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},E0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Xn(s):(s=mn(e)?eo:Xt.current,i.context=Sa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Mm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uf.enqueueReplaceState(i,i.state,null),hh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ra(t,e){try{var n="",r=e;do n+=Ok(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ip(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lN=typeof WeakMap=="function"?WeakMap:Map;function Bb(t,e,n){n=ii(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yh||(yh=!0,Qm=r),jm(t,e)},n}function qb(t,e,n){n=ii(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){jm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){jm(t,e),typeof r!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function B_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=EN.bind(null,t,e,n),e.then(t,t))}function q_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function H_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ii(-1,1),e.tag=2,Ji(n,e,1))),n.lanes|=1),t)}var cN=gi.ReactCurrentOwner,un=!1;function en(t,e,n,r){e.child=t===null?_b(e,null,n,r):Aa(e,t.child,n,r)}function K_(t,e,n,r,i){n=n.render;var s=e.ref;return ma(e,i),r=C0(t,e,n,r,s,i),n=A0(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ui(t,e,i)):(Ze&&n&&m0(e),e.flags|=1,en(t,e,r,i),e.child)}function G_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!L0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Hb(t,e,s,r,i)):(t=Dd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:kc,n(o,r)&&t.ref===e.ref)return ui(t,e,i)}return e.flags|=1,t=ts(s,r),t.ref=e.ref,t.return=e,e.child=t}function Hb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(kc(s,r)&&t.ref===e.ref)if(un=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,ui(t,e,i)}return Fm(t,e,n,r,i)}function Kb(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(ca,Cn),Cn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(ca,Cn),Cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,He(ca,Cn),Cn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,He(ca,Cn),Cn|=r;return en(t,e,i,n),e.child}function Gb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fm(t,e,n,r,i){var s=mn(n)?eo:Xt.current;return s=Sa(e,s),ma(e,i),n=C0(t,e,n,r,s,i),r=A0(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ui(t,e,i)):(Ze&&r&&m0(e),e.flags|=1,en(t,e,n,i),e.child)}function W_(t,e,n,r,i){if(mn(n)){var s=!0;ah(e)}else s=!1;if(ma(e,i),e.stateNode===null)Rd(t,e),Ub(e,n,r),Lm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xn(c):(c=mn(n)?eo:Xt.current,c=Sa(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&U_(e,o,r,c),Oi=!1;var f=e.memoizedState;o.state=f,hh(e,r,o,i),l=e.memoizedState,a!==r||f!==l||pn.current||Oi?(typeof d=="function"&&(Mm(e,n,d,r),l=e.memoizedState),(a=Oi||$_(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:sr(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xn(l):(l=mn(n)?eo:Xt.current,l=Sa(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&U_(e,o,r,l),Oi=!1,f=e.memoizedState,o.state=f,hh(e,r,o,i);var E=e.memoizedState;a!==h||f!==E||pn.current||Oi?(typeof m=="function"&&(Mm(e,n,m,r),E=e.memoizedState),(c=Oi||$_(e,n,c,r,f,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return $m(t,e,n,r,s,i)}function $m(t,e,n,r,i,s){Gb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&D_(e,n,!1),ui(t,e,s);r=e.stateNode,cN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Aa(e,t.child,null,s),e.child=Aa(e,null,a,s)):en(t,e,a,s),e.memoizedState=r.state,i&&D_(e,n,!0),e.child}function Wb(t){var e=t.stateNode;e.pendingContext?P_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P_(t,e.context,!1),b0(t,e.containerInfo)}function Q_(t,e,n,r,i){return Ca(),y0(i),e.flags|=256,en(t,e,n,r),e.child}var Um={dehydrated:null,treeContext:null,retryLane:0};function Bm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qb(t,e,n){var r=e.pendingProps,i=nt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(nt,i&1),t===null)return Om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ff(o,r,0,null),t=Qs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bm(n),e.memoizedState=Um,t):N0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return uN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ts(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ts(a,s):(s=Qs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Bm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Um,r}return s=t.child,t=s.sibling,r=ts(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function N0(t,e){return e=ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ju(t,e,n,r){return r!==null&&y0(r),Aa(e,t.child,null,n),t=N0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ip(Error(Z(422))),Ju(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ff({mode:"visible",children:r.children},i,0,null),s=Qs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Aa(e,t.child,null,o),e.child.memoizedState=Bm(o),e.memoizedState=Um,s);if(!(e.mode&1))return Ju(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Z(419)),r=Ip(s,r,void 0),Ju(t,e,o,r)}if(a=(o&t.childLanes)!==0,un||a){if(r=Dt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ci(t,i),hr(r,t,i,-1))}return M0(),r=Ip(Error(Z(421))),Ju(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rn=Xi(i.nextSibling),Pn=e,Ze=!0,lr=null,t!==null&&(qn[Hn++]=Xr,qn[Hn++]=Jr,qn[Hn++]=to,Xr=t.id,Jr=t.overflow,to=e),e=N0(e,r.children),e.flags|=4096,e)}function Y_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zm(t.return,e,n)}function Tp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(en(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Y_(t,n,e);else if(t.tag===19)Y_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tp(e,!0,n,null,s);break;case"together":Tp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ui(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=ts(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ts(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dN(t,e,n){switch(e.tag){case 3:Wb(e),Ca();break;case 5:Eb(e);break;case 1:mn(e.type)&&ah(e);break;case 4:b0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(uh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?Qb(t,e,n):(He(nt,nt.current&1),t=ui(t,e,n),t!==null?t.sibling:null);He(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,Kb(t,e,n)}return ui(t,e,n)}var Xb,qm,Jb,Zb;Xb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qm=function(){};Jb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Bs(kr.current);var s=null;switch(n){case"input":i=hm(t,i),r=hm(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=mm(t,i),r=mm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sh)}ym(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ec.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ec.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Zb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Dl(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hN(t,e,n){var r=e.pendingProps;switch(g0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return mn(e.type)&&oh(),Gt(e),null;case 3:return r=e.stateNode,ka(),Ye(pn),Ye(Xt),T0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lr!==null&&(Jm(lr),lr=null))),qm(t,e),Gt(e),null;case 5:I0(e);var i=Bs(Vc.current);if(n=e.type,t!==null&&e.stateNode!=null)Jb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Gt(e),null}if(t=Bs(kr.current),Yu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Tr]=e,r[Pc]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<Wl.length;i++)Qe(Wl[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":s_(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":a_(r,s),Qe("invalid",r)}ym(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Qu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Qu(r.textContent,a,t),i=["children",""+a]):Ec.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":$u(r),o_(r,s,!0);break;case"textarea":$u(r),l_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tr]=e,t[Pc]=r,Xb(t,e,!1,!1),e.stateNode=t;e:{switch(o=vm(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wl.length;i++)Qe(Wl[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":s_(t,r),i=hm(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":a_(t,r),i=mm(t,r),Qe("invalid",t);break;default:i=r}ym(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bc(t,l):typeof l=="number"&&bc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ec.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qe("scroll",t):l!=null&&t0(t,s,l,o))}switch(n){case"input":$u(t),o_(t,r,!1);break;case"textarea":$u(t),l_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ls(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?da(t,!!r.multiple,s,!1):r.defaultValue!=null&&da(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)Zb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Bs(Vc.current),Bs(kr.current),Yu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tr]=e,(s=r.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:Qu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tr]=e,e.stateNode=r}return Gt(e),null;case 13:if(Ye(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Rn!==null&&e.mode&1&&!(e.flags&128))yb(),Ca(),e.flags|=98560,s=!1;else if(s=Yu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[Tr]=e}else Ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),s=!1}else lr!==null&&(Jm(lr),lr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?St===0&&(St=3):M0())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return ka(),qm(t,e),t===null&&Rc(e.stateNode.containerInfo),Gt(e),null;case 10:return w0(e.type._context),Gt(e),null;case 17:return mn(e.type)&&oh(),Gt(e),null;case 19:if(Ye(nt),s=e.memoizedState,s===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Dl(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fh(t),o!==null){for(e.flags|=128,Dl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(nt,nt.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>Na&&(e.flags|=128,r=!0,Dl(s,!1),e.lanes=4194304)}else{if(!r)if(t=fh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Dl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ze)return Gt(e),null}else 2*pt()-s.renderingStartTime>Na&&n!==1073741824&&(e.flags|=128,r=!0,Dl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=nt.current,He(nt,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return z0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function fN(t,e){switch(g0(e),e.tag){case 1:return mn(e.type)&&oh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ka(),Ye(pn),Ye(Xt),T0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return I0(e),null;case 13:if(Ye(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(nt),null;case 4:return ka(),null;case 10:return w0(e.type._context),null;case 22:case 23:return z0(),null;case 24:return null;default:return null}}var Zu=!1,Yt=!1,pN=typeof WeakSet=="function"?WeakSet:Set,ae=null;function la(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lt(t,e,r)}else n.current=null}function Hm(t,e,n){try{n()}catch(r){lt(t,e,r)}}var X_=!1;function mN(t,e){if(Am=nh,t=ib(),p0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:t,selectionRange:n},nh=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var x=E.memoizedProps,N=E.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:sr(e.type,x),N);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(A){lt(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return E=X_,X_=!1,E}function dc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hm(e,n,s)}i=i.next}while(i!==r)}}function df(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Km(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eI(t){var e=t.alternate;e!==null&&(t.alternate=null,eI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tr],delete e[Pc],delete e[Pm],delete e[XR],delete e[JR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tI(t){return t.tag===5||t.tag===3||t.tag===4}function J_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sh));else if(r!==4&&(t=t.child,t!==null))for(Gm(t,e,n),t=t.sibling;t!==null;)Gm(t,e,n),t=t.sibling}function Wm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wm(t,e,n),t=t.sibling;t!==null;)Wm(t,e,n),t=t.sibling}var jt=null,or=!1;function ki(t,e,n){for(n=n.child;n!==null;)nI(t,e,n),n=n.sibling}function nI(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(nf,n)}catch{}switch(n.tag){case 5:Yt||la(n,e);case 6:var r=jt,i=or;jt=null,ki(t,e,n),jt=r,or=i,jt!==null&&(or?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(or?(t=jt,n=n.stateNode,t.nodeType===8?vp(t.parentNode,n):t.nodeType===1&&vp(t,n),Cc(t)):vp(jt,n.stateNode));break;case 4:r=jt,i=or,jt=n.stateNode.containerInfo,or=!0,ki(t,e,n),jt=r,or=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hm(n,e,o),i=i.next}while(i!==r)}ki(t,e,n);break;case 1:if(!Yt&&(la(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){lt(n,e,a)}ki(t,e,n);break;case 21:ki(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,ki(t,e,n),Yt=r):ki(t,e,n);break;default:ki(t,e,n)}}function Z_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pN),e.forEach(function(r){var i=IN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,or=!1;break e;case 3:jt=a.stateNode.containerInfo,or=!0;break e;case 4:jt=a.stateNode.containerInfo,or=!0;break e}a=a.return}if(jt===null)throw Error(Z(160));nI(s,o,i),jt=null,or=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){lt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rI(e,t),e=e.sibling}function rI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ir(e,t),br(t),r&4){try{dc(3,t,t.return),df(3,t)}catch(x){lt(t,t.return,x)}try{dc(5,t,t.return)}catch(x){lt(t,t.return,x)}}break;case 1:ir(e,t),br(t),r&512&&n!==null&&la(n,n.return);break;case 5:if(ir(e,t),br(t),r&512&&n!==null&&la(n,n.return),t.flags&32){var i=t.stateNode;try{bc(i,"")}catch(x){lt(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TE(i,s),vm(a,o);var c=vm(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?RE(i,h):d==="dangerouslySetInnerHTML"?AE(i,h):d==="children"?bc(i,h):t0(i,d,h,c)}switch(a){case"input":fm(i,s);break;case"textarea":SE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?da(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?da(i,!!s.multiple,s.defaultValue,!0):da(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pc]=s}catch(x){lt(t,t.return,x)}}break;case 6:if(ir(e,t),br(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){lt(t,t.return,x)}}break;case 3:if(ir(e,t),br(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cc(e.containerInfo)}catch(x){lt(t,t.return,x)}break;case 4:ir(e,t),br(t);break;case 13:ir(e,t),br(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(V0=pt())),r&4&&Z_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(c=Yt)||d,ir(e,t),Yt=c):ir(e,t),br(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ae=t,d=t.child;d!==null;){for(h=ae=d;ae!==null;){switch(f=ae,m=f.child,f.tag){case 0:case 11:case 14:case 15:dc(4,f,f.return);break;case 1:la(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(x){lt(r,n,x)}}break;case 5:la(f,f.return);break;case 22:if(f.memoizedState!==null){tw(h);continue}}m!==null?(m.return=f,ae=m):tw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kE("display",o))}catch(x){lt(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){lt(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ir(e,t),br(t),r&4&&Z_(t);break;case 21:break;default:ir(e,t),br(t)}}function br(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tI(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bc(i,""),r.flags&=-33);var s=J_(t);Wm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=J_(t);Gm(t,a,o);break;default:throw Error(Z(161))}}catch(l){lt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gN(t,e,n){ae=t,iI(t)}function iI(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Yt;a=Zu;var c=Yt;if(Zu=o,(Yt=l)&&!c)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?nw(i):l!==null?(l.return=o,ae=l):nw(i);for(;s!==null;)ae=s,iI(s),s=s.sibling;ae=i,Zu=a,Yt=c}ew(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):ew(t)}}function ew(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||df(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:sr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}L_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Cc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Yt||e.flags&512&&Km(e)}catch(f){lt(e,e.return,f)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function tw(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function nw(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{df(4,e)}catch(l){lt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){lt(e,i,l)}}var s=e.return;try{Km(e)}catch(l){lt(e,s,l)}break;case 5:var o=e.return;try{Km(e)}catch(l){lt(e,o,l)}}}catch(l){lt(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var yN=Math.ceil,gh=gi.ReactCurrentDispatcher,P0=gi.ReactCurrentOwner,Qn=gi.ReactCurrentBatchConfig,De=0,Dt=null,wt=null,$t=0,Cn=0,ca=ms(0),St=0,Lc=null,ro=0,hf=0,D0=0,hc=null,ln=null,V0=0,Na=1/0,Wr=null,yh=!1,Qm=null,Zi=null,ed=!1,Ki=null,vh=0,fc=0,Ym=null,Nd=-1,Pd=0;function tn(){return De&6?pt():Nd!==-1?Nd:Nd=pt()}function es(t){return t.mode&1?De&2&&$t!==0?$t&-$t:eN.transition!==null?(Pd===0&&(Pd=UE()),Pd):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:QE(t.type)),t):1}function hr(t,e,n,r){if(50<fc)throw fc=0,Ym=null,Error(Z(185));cu(t,n,r),(!(De&2)||t!==Dt)&&(t===Dt&&(!(De&2)&&(hf|=n),St===4&&ji(t,$t)),gn(t,r),n===1&&De===0&&!(e.mode&1)&&(Na=pt()+500,lf&&gs()))}function gn(t,e){var n=t.callbackNode;eR(t,e);var r=th(t,t===Dt?$t:0);if(r===0)n!==null&&d_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&d_(n),e===1)t.tag===0?ZR(rw.bind(null,t)):pb(rw.bind(null,t)),QR(function(){!(De&6)&&gs()}),n=null;else{switch(BE(r)){case 1:n=o0;break;case 4:n=FE;break;case 16:n=eh;break;case 536870912:n=$E;break;default:n=eh}n=hI(n,sI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sI(t,e){if(Nd=-1,Pd=0,De&6)throw Error(Z(327));var n=t.callbackNode;if(ga()&&t.callbackNode!==n)return null;var r=th(t,t===Dt?$t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_h(t,r);else{e=r;var i=De;De|=2;var s=aI();(Dt!==t||$t!==e)&&(Wr=null,Na=pt()+500,Ws(t,e));do try{wN();break}catch(a){oI(t,a)}while(!0);_0(),gh.current=s,De=i,wt!==null?e=0:(Dt=null,$t=0,e=St)}if(e!==0){if(e===2&&(i=bm(t),i!==0&&(r=i,e=Xm(t,i))),e===1)throw n=Lc,Ws(t,0),ji(t,r),gn(t,pt()),n;if(e===6)ji(t,r);else{if(i=t.current.alternate,!(r&30)&&!vN(i)&&(e=_h(t,r),e===2&&(s=bm(t),s!==0&&(r=s,e=Xm(t,s))),e===1))throw n=Lc,Ws(t,0),ji(t,r),gn(t,pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Ds(t,ln,Wr);break;case 3:if(ji(t,r),(r&130023424)===r&&(e=V0+500-pt(),10<e)){if(th(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){tn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Nm(Ds.bind(null,t,ln,Wr),e);break}Ds(t,ln,Wr);break;case 4:if(ji(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-dr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yN(r/1960))-r,10<r){t.timeoutHandle=Nm(Ds.bind(null,t,ln,Wr),r);break}Ds(t,ln,Wr);break;case 5:Ds(t,ln,Wr);break;default:throw Error(Z(329))}}}return gn(t,pt()),t.callbackNode===n?sI.bind(null,t):null}function Xm(t,e){var n=hc;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=_h(t,e),t!==2&&(e=ln,ln=n,e!==null&&Jm(e)),t}function Jm(t){ln===null?ln=t:ln.push.apply(ln,t)}function vN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!mr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ji(t,e){for(e&=~D0,e&=~hf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dr(e),r=1<<n;t[n]=-1,e&=~r}}function rw(t){if(De&6)throw Error(Z(327));ga();var e=th(t,0);if(!(e&1))return gn(t,pt()),null;var n=_h(t,e);if(t.tag!==0&&n===2){var r=bm(t);r!==0&&(e=r,n=Xm(t,r))}if(n===1)throw n=Lc,Ws(t,0),ji(t,e),gn(t,pt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,ln,Wr),gn(t,pt()),null}function O0(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(Na=pt()+500,lf&&gs())}}function io(t){Ki!==null&&Ki.tag===0&&!(De&6)&&ga();var e=De;De|=1;var n=Qn.transition,r=Fe;try{if(Qn.transition=null,Fe=1,t)return t()}finally{Fe=r,Qn.transition=n,De=e,!(De&6)&&gs()}}function z0(){Cn=ca.current,Ye(ca)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WR(n)),wt!==null)for(n=wt.return;n!==null;){var r=n;switch(g0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oh();break;case 3:ka(),Ye(pn),Ye(Xt),T0();break;case 5:I0(r);break;case 4:ka();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:w0(r.type._context);break;case 22:case 23:z0()}n=n.return}if(Dt=t,wt=t=ts(t.current,null),$t=Cn=e,St=0,Lc=null,D0=hf=ro=0,ln=hc=null,Us!==null){for(e=0;e<Us.length;e++)if(n=Us[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Us=null}return t}function oI(t,e){do{var n=wt;try{if(_0(),Ad.current=mh,ph){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ph=!1}if(no=0,Pt=Tt=it=null,uc=!1,Oc=0,P0.current=null,n===null||n.return===null){St=1,Lc=e,wt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=$t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=q_(o);if(m!==null){m.flags&=-257,H_(m,o,a,s,e),m.mode&1&&B_(s,c,e),e=m,l=c;var E=e.updateQueue;if(E===null){var x=new Set;x.add(l),e.updateQueue=x}else E.add(l);break e}else{if(!(e&1)){B_(s,c,e),M0();break e}l=Error(Z(426))}}else if(Ze&&a.mode&1){var N=q_(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),H_(N,o,a,s,e),y0(Ra(l,a));break e}}s=l=Ra(l,a),St!==4&&(St=2),hc===null?hc=[s]:hc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Bb(s,l,e);M_(s,y);break e;case 1:a=l;var v=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Zi===null||!Zi.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=qb(s,a,e);M_(s,A);break e}}s=s.return}while(s!==null)}cI(n)}catch(O){e=O,wt===n&&n!==null&&(wt=n=n.return);continue}break}while(!0)}function aI(){var t=gh.current;return gh.current=mh,t===null?mh:t}function M0(){(St===0||St===3||St===2)&&(St=4),Dt===null||!(ro&268435455)&&!(hf&268435455)||ji(Dt,$t)}function _h(t,e){var n=De;De|=2;var r=aI();(Dt!==t||$t!==e)&&(Wr=null,Ws(t,e));do try{_N();break}catch(i){oI(t,i)}while(!0);if(_0(),De=n,gh.current=r,wt!==null)throw Error(Z(261));return Dt=null,$t=0,St}function _N(){for(;wt!==null;)lI(wt)}function wN(){for(;wt!==null&&!Hk();)lI(wt)}function lI(t){var e=dI(t.alternate,t,Cn);t.memoizedProps=t.pendingProps,e===null?cI(t):wt=e,P0.current=null}function cI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fN(n,e),n!==null){n.flags&=32767,wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,wt=null;return}}else if(n=hN(n,e,Cn),n!==null){wt=n;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);St===0&&(St=5)}function Ds(t,e,n){var r=Fe,i=Qn.transition;try{Qn.transition=null,Fe=1,xN(t,e,n,r)}finally{Qn.transition=i,Fe=r}return null}function xN(t,e,n,r){do ga();while(Ki!==null);if(De&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(tR(t,s),t===Dt&&(wt=Dt=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ed||(ed=!0,hI(eh,function(){return ga(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qn.transition,Qn.transition=null;var o=Fe;Fe=1;var a=De;De|=4,P0.current=null,mN(t,n),rI(n,t),$R(km),nh=!!Am,km=Am=null,t.current=n,gN(n),Kk(),De=a,Fe=o,Qn.transition=s}else t.current=n;if(ed&&(ed=!1,Ki=t,vh=i),s=t.pendingLanes,s===0&&(Zi=null),Qk(n.stateNode),gn(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yh)throw yh=!1,t=Qm,Qm=null,t;return vh&1&&t.tag!==0&&ga(),s=t.pendingLanes,s&1?t===Ym?fc++:(fc=0,Ym=t):fc=0,gs(),null}function ga(){if(Ki!==null){var t=BE(vh),e=Qn.transition,n=Fe;try{if(Qn.transition=null,Fe=16>t?16:t,Ki===null)var r=!1;else{if(t=Ki,Ki=null,vh=0,De&6)throw Error(Z(331));var i=De;for(De|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var d=ae;switch(d.tag){case 0:case 11:case 15:dc(8,d,s)}var h=d.child;if(h!==null)h.return=d,ae=h;else for(;ae!==null;){d=ae;var f=d.sibling,m=d.return;if(eI(d),d===c){ae=null;break}if(f!==null){f.return=m,ae=f;break}ae=m}}}var E=s.alternate;if(E!==null){var x=E.child;if(x!==null){E.child=null;do{var N=x.sibling;x.sibling=null,x=N}while(x!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dc(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ae=y;break e}ae=s.return}}var v=t.current;for(ae=v;ae!==null;){o=ae;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ae=T;else e:for(o=v;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:df(9,a)}}catch(O){lt(a,a.return,O)}if(a===o){ae=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,ae=A;break e}ae=a.return}}if(De=i,gs(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(nf,t)}catch{}r=!0}return r}finally{Fe=n,Qn.transition=e}}return!1}function iw(t,e,n){e=Ra(n,e),e=Bb(t,e,1),t=Ji(t,e,1),e=tn(),t!==null&&(cu(t,1,e),gn(t,e))}function lt(t,e,n){if(t.tag===3)iw(t,t,n);else for(;e!==null;){if(e.tag===3){iw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zi===null||!Zi.has(r))){t=Ra(n,t),t=qb(e,t,1),e=Ji(e,t,1),t=tn(),e!==null&&(cu(e,1,t),gn(e,t));break}}e=e.return}}function EN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&($t&n)===n&&(St===4||St===3&&($t&130023424)===$t&&500>pt()-V0?Ws(t,0):D0|=n),gn(t,e)}function uI(t,e){e===0&&(t.mode&1?(e=qu,qu<<=1,!(qu&130023424)&&(qu=4194304)):e=1);var n=tn();t=ci(t,e),t!==null&&(cu(t,e,n),gn(t,n))}function bN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uI(t,n)}function IN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),uI(t,n)}var dI;dI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,dN(t,e,n);un=!!(t.flags&131072)}else un=!1,Ze&&e.flags&1048576&&mb(e,ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rd(t,e),t=e.pendingProps;var i=Sa(e,Xt.current);ma(e,n),i=C0(null,e,r,t,i,n);var s=A0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(s=!0,ah(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,E0(e),i.updater=uf,e.stateNode=i,i._reactInternals=e,Lm(e,r,t,n),e=$m(null,e,r,!0,s,n)):(e.tag=0,Ze&&s&&m0(e),en(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=SN(r),t=sr(r,t),i){case 0:e=Fm(null,e,r,t,n);break e;case 1:e=W_(null,e,r,t,n);break e;case 11:e=K_(null,e,r,t,n);break e;case 14:e=G_(null,e,r,sr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sr(r,i),Fm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sr(r,i),W_(t,e,r,i,n);case 3:e:{if(Wb(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xb(t,e),hh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ra(Error(Z(423)),e),e=Q_(t,e,r,n,i);break e}else if(r!==i){i=Ra(Error(Z(424)),e),e=Q_(t,e,r,n,i);break e}else for(Rn=Xi(e.stateNode.containerInfo.firstChild),Pn=e,Ze=!0,lr=null,n=_b(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===i){e=ui(t,e,n);break e}en(t,e,r,n)}e=e.child}return e;case 5:return Eb(e),t===null&&Om(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Rm(r,i)?o=null:s!==null&&Rm(r,s)&&(e.flags|=32),Gb(t,e),en(t,e,o,n),e.child;case 6:return t===null&&Om(e),null;case 13:return Qb(t,e,n);case 4:return b0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Aa(e,null,r,n):en(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sr(r,i),K_(t,e,r,i,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,He(uh,r._currentValue),r._currentValue=o,s!==null)if(mr(s.value,o)){if(s.children===i.children&&!pn.current){e=ui(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ii(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}en(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ma(e,n),i=Xn(i),r=r(i),e.flags|=1,en(t,e,r,n),e.child;case 14:return r=e.type,i=sr(r,e.pendingProps),i=sr(r.type,i),G_(t,e,r,i,n);case 15:return Hb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sr(r,i),Rd(t,e),e.tag=1,mn(r)?(t=!0,ah(e)):t=!1,ma(e,n),Ub(e,r,i),Lm(e,r,i,n),$m(null,e,r,!0,t,n);case 19:return Yb(t,e,n);case 22:return Kb(t,e,n)}throw Error(Z(156,e.tag))};function hI(t,e){return jE(t,e)}function TN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new TN(t,e,n,r)}function L0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SN(t){if(typeof t=="function")return L0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===r0)return 11;if(t===i0)return 14}return 2}function ts(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")L0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zo:return Qs(n.children,i,s,e);case n0:o=8,i|=8;break;case lm:return t=Kn(12,n,e,i|2),t.elementType=lm,t.lanes=s,t;case cm:return t=Kn(13,n,e,i),t.elementType=cm,t.lanes=s,t;case um:return t=Kn(19,n,e,i),t.elementType=um,t.lanes=s,t;case EE:return ff(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wE:o=10;break e;case xE:o=9;break e;case r0:o=11;break e;case i0:o=14;break e;case Vi:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Qs(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function ff(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=EE,t.lanes=n,t.stateNode={isHidden:!1},t}function Sp(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function Cp(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ap(0),this.expirationTimes=ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ap(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function j0(t,e,n,r,i,s,o,a,l){return t=new CN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},E0(s),t}function AN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fI(t){if(!t)return cs;t=t._reactInternals;e:{if(xo(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(mn(n))return fb(t,n,e)}return e}function pI(t,e,n,r,i,s,o,a,l){return t=j0(n,r,!0,t,i,s,o,a,l),t.context=fI(null),n=t.current,r=tn(),i=es(n),s=ii(r,i),s.callback=e??null,Ji(n,s,i),t.current.lanes=i,cu(t,i,r),gn(t,r),t}function pf(t,e,n,r){var i=e.current,s=tn(),o=es(i);return n=fI(n),e.context===null?e.context=n:e.pendingContext=n,e=ii(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ji(i,e,o),t!==null&&(hr(t,i,o,s),Cd(t,i,o)),o}function wh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function F0(t,e){sw(t,e),(t=t.alternate)&&sw(t,e)}function kN(){return null}var mI=typeof reportError=="function"?reportError:function(t){console.error(t)};function $0(t){this._internalRoot=t}mf.prototype.render=$0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));pf(t,e,null,null)};mf.prototype.unmount=$0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){pf(null,t,null,null)}),e[li]=null}};function mf(t){this._internalRoot=t}mf.prototype.unstable_scheduleHydration=function(t){if(t){var e=KE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Li.length&&e!==0&&e<Li[n].priority;n++);Li.splice(n,0,t),n===0&&WE(t)}};function U0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ow(){}function RN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=wh(o);s.call(c)}}var o=pI(e,r,t,0,null,!1,!1,"",ow);return t._reactRootContainer=o,t[li]=o.current,Rc(t.nodeType===8?t.parentNode:t),io(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=wh(l);a.call(c)}}var l=j0(t,0,!1,null,null,!1,!1,"",ow);return t._reactRootContainer=l,t[li]=l.current,Rc(t.nodeType===8?t.parentNode:t),io(function(){pf(e,l,n,r)}),l}function yf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=wh(o);a.call(l)}}pf(e,o,t,i)}else o=RN(n,e,t,i,r);return wh(o)}qE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gl(e.pendingLanes);n!==0&&(a0(e,n|1),gn(e,pt()),!(De&6)&&(Na=pt()+500,gs()))}break;case 13:io(function(){var r=ci(t,1);if(r!==null){var i=tn();hr(r,t,1,i)}}),F0(t,1)}};l0=function(t){if(t.tag===13){var e=ci(t,134217728);if(e!==null){var n=tn();hr(e,t,134217728,n)}F0(t,134217728)}};HE=function(t){if(t.tag===13){var e=es(t),n=ci(t,e);if(n!==null){var r=tn();hr(n,t,e,r)}F0(t,e)}};KE=function(){return Fe};GE=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};wm=function(t,e,n){switch(e){case"input":if(fm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=af(r);if(!i)throw Error(Z(90));IE(r),fm(r,i)}}}break;case"textarea":SE(t,n);break;case"select":e=n.value,e!=null&&da(t,!!n.multiple,e,!1)}};DE=O0;VE=io;var NN={usingClientEntryPoint:!1,Events:[du,ra,af,NE,PE,O0]},Vl={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PN={bundleType:Vl.bundleType,version:Vl.version,rendererPackageName:Vl.rendererPackageName,rendererConfig:Vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ME(t),t===null?null:t.stateNode},findFiberByHostInstance:Vl.findFiberByHostInstance||kN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{nf=td.inject(PN),Ar=td}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NN;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U0(e))throw Error(Z(200));return AN(t,e,null,n)};Ln.createRoot=function(t,e){if(!U0(t))throw Error(Z(299));var n=!1,r="",i=mI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=j0(t,1,!1,null,null,n,!1,r,i),t[li]=e.current,Rc(t.nodeType===8?t.parentNode:t),new $0(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=ME(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return io(t)};Ln.hydrate=function(t,e,n){if(!gf(e))throw Error(Z(200));return yf(null,t,e,!0,n)};Ln.hydrateRoot=function(t,e,n){if(!U0(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pI(e,null,t,1,n??null,i,!1,s,o),t[li]=e.current,Rc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mf(e)};Ln.render=function(t,e,n){if(!gf(e))throw Error(Z(200));return yf(null,t,e,!1,n)};Ln.unmountComponentAtNode=function(t){if(!gf(t))throw Error(Z(40));return t._reactRootContainer?(io(function(){yf(null,null,t,!1,function(){t._reactRootContainer=null,t[li]=null})}),!0):!1};Ln.unstable_batchedUpdates=O0;Ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gf(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return yf(t,e,n,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function gI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gI)}catch(t){console.error(t)}}gI(),gE.exports=Ln;var jc=gE.exports,aw=jc;om.createRoot=aw.createRoot,om.hydrateRoot=aw.hydrateRoot;function zt(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=zt(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var yI={exports:{}},vI={},_I={exports:{}},wI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pa=D;function DN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var VN=typeof Object.is=="function"?Object.is:DN,ON=Pa.useState,zN=Pa.useEffect,MN=Pa.useLayoutEffect,LN=Pa.useDebugValue;function jN(t,e){var n=e(),r=ON({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return MN(function(){i.value=n,i.getSnapshot=e,Ap(i)&&s({inst:i})},[t,n,e]),zN(function(){return Ap(i)&&s({inst:i}),t(function(){Ap(i)&&s({inst:i})})},[t]),LN(n),n}function Ap(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!VN(t,n)}catch{return!0}}function FN(t,e){return e()}var $N=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FN:jN;wI.useSyncExternalStore=Pa.useSyncExternalStore!==void 0?Pa.useSyncExternalStore:$N;_I.exports=wI;var UN=_I.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=D,BN=UN;function qN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var HN=typeof Object.is=="function"?Object.is:qN,KN=BN.useSyncExternalStore,GN=vf.useRef,WN=vf.useEffect,QN=vf.useMemo,YN=vf.useDebugValue;vI.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=GN(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=QN(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var E=o.value;if(i(E,m))return h=E}return h=m}if(E=h,HN(d,m))return E;var x=r(m);return i!==void 0&&i(E,x)?(d=m,E):(d=m,h=x)}var c=!1,d,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=KN(t,s[0],s[1]);return WN(function(){o.hasValue=!0,o.value=a},[a]),YN(a),a};yI.exports=vI;var XN=yI.exports;const JN=iE(XN),ZN={},lw=t=>{let e;const n=new Set,r=(d,h)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(E=>E(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(ZN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},eP=t=>t?lw(t):lw,{useDebugValue:tP}=K,{useSyncExternalStoreWithSelector:nP}=JN,rP=t=>t;function xI(t,e=rP,n){const r=nP(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return tP(r),r}const cw=(t,e)=>{const n=eP(t),r=(i,s=e)=>xI(n,i,s);return Object.assign(r,n),r},iP=(t,e)=>t?cw(t,e):cw;function Vt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var sP={value:()=>{}};function _f(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Vd(n)}function Vd(t){this._=t}function oP(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Vd.prototype=_f.prototype={constructor:Vd,on:function(t,e){var n=this._,r=oP(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=aP(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=uw(n[i],t.name,e);else if(e==null)for(i in n)n[i]=uw(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Vd(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function aP(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function uw(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=sP,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Zm="http://www.w3.org/1999/xhtml";const dw={svg:"http://www.w3.org/2000/svg",xhtml:Zm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),dw.hasOwnProperty(e)?{space:dw[e],local:t}:t}function lP(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Zm&&e.documentElement.namespaceURI===Zm?e.createElement(t):e.createElementNS(n,t)}}function cP(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function EI(t){var e=wf(t);return(e.local?cP:lP)(e)}function uP(){}function B0(t){return t==null?uP:function(){return this.querySelector(t)}}function dP(t){typeof t!="function"&&(t=B0(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,d=0;d<o;++d)(l=s[d])&&(c=t.call(l,l.__data__,d,s))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new zn(r,this._parents)}function hP(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function fP(){return[]}function bI(t){return t==null?fP:function(){return this.querySelectorAll(t)}}function pP(t){return function(){return hP(t.apply(this,arguments))}}function mP(t){typeof t=="function"?t=pP(t):t=bI(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new zn(r,i)}function II(t){return function(){return this.matches(t)}}function TI(t){return function(e){return e.matches(t)}}var gP=Array.prototype.find;function yP(t){return function(){return gP.call(this.children,t)}}function vP(){return this.firstElementChild}function _P(t){return this.select(t==null?vP:yP(typeof t=="function"?t:TI(t)))}var wP=Array.prototype.filter;function xP(){return Array.from(this.children)}function EP(t){return function(){return wP.call(this.children,t)}}function bP(t){return this.selectAll(t==null?xP:EP(typeof t=="function"?t:TI(t)))}function IP(t){typeof t!="function"&&(t=II(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new zn(r,this._parents)}function SI(t){return new Array(t.length)}function TP(){return new zn(this._enter||this._groups.map(SI),this._parents)}function xh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xh.prototype={constructor:xh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function SP(t){return function(){return t}}function CP(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new xh(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function AP(t,e,n,r,i,s,o){var a,l,c=new Map,d=e.length,h=s.length,f=new Array(d),m;for(a=0;a<d;++a)(l=e[a])&&(f[a]=m=o.call(l,l.__data__,a,e)+"",c.has(m)?i[a]=l:c.set(m,l));for(a=0;a<h;++a)m=o.call(t,s[a],a,s)+"",(l=c.get(m))?(r[a]=l,l.__data__=s[a],c.delete(m)):n[a]=new xh(t,s[a]);for(a=0;a<d;++a)(l=e[a])&&c.get(f[a])===l&&(i[a]=l)}function kP(t){return t.__data__}function RP(t,e){if(!arguments.length)return Array.from(this,kP);var n=e?AP:CP,r=this._parents,i=this._groups;typeof t!="function"&&(t=SP(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var d=r[c],h=i[c],f=h.length,m=NP(t.call(d,d&&d.__data__,c,r)),E=m.length,x=a[c]=new Array(E),N=o[c]=new Array(E),y=l[c]=new Array(f);n(d,h,x,N,y,m,e);for(var v=0,T=0,A,O;v<E;++v)if(A=x[v]){for(v>=T&&(T=v+1);!(O=N[T])&&++T<E;);A._next=O||null}}return o=new zn(o,r),o._enter=a,o._exit=l,o}function NP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function PP(){return new zn(this._exit||this._groups.map(SI),this._parents)}function DP(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function VP(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],d=r[l],h=c.length,f=a[l]=new Array(h),m,E=0;E<h;++E)(m=c[E]||d[E])&&(f[E]=m);for(;l<i;++l)a[l]=n[l];return new zn(a,this._parents)}function OP(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function zP(t){t||(t=MP);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,d=0;d<a;++d)(c=o[d])&&(l[d]=c);l.sort(e)}return new zn(i,this._parents).order()}function MP(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function LP(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function jP(){return Array.from(this)}function FP(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function $P(){let t=0;for(const e of this)++t;return t}function UP(){return!this.node()}function BP(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function qP(t){return function(){this.removeAttribute(t)}}function HP(t){return function(){this.removeAttributeNS(t.space,t.local)}}function KP(t,e){return function(){this.setAttribute(t,e)}}function GP(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function WP(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function QP(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function YP(t,e){var n=wf(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?HP:qP:typeof e=="function"?n.local?QP:WP:n.local?GP:KP)(n,e))}function CI(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function XP(t){return function(){this.style.removeProperty(t)}}function JP(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ZP(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function eD(t,e,n){return arguments.length>1?this.each((e==null?XP:typeof e=="function"?ZP:JP)(t,e,n??"")):Da(this.node(),t)}function Da(t,e){return t.style.getPropertyValue(e)||CI(t).getComputedStyle(t,null).getPropertyValue(e)}function tD(t){return function(){delete this[t]}}function nD(t,e){return function(){this[t]=e}}function rD(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function iD(t,e){return arguments.length>1?this.each((e==null?tD:typeof e=="function"?rD:nD)(t,e)):this.node()[t]}function AI(t){return t.trim().split(/^|\s+/)}function q0(t){return t.classList||new kI(t)}function kI(t){this._node=t,this._names=AI(t.getAttribute("class")||"")}kI.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function RI(t,e){for(var n=q0(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function NI(t,e){for(var n=q0(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function sD(t){return function(){RI(this,t)}}function oD(t){return function(){NI(this,t)}}function aD(t,e){return function(){(e.apply(this,arguments)?RI:NI)(this,t)}}function lD(t,e){var n=AI(t+"");if(arguments.length<2){for(var r=q0(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?aD:e?sD:oD)(n,e))}function cD(){this.textContent=""}function uD(t){return function(){this.textContent=t}}function dD(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function hD(t){return arguments.length?this.each(t==null?cD:(typeof t=="function"?dD:uD)(t)):this.node().textContent}function fD(){this.innerHTML=""}function pD(t){return function(){this.innerHTML=t}}function mD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function gD(t){return arguments.length?this.each(t==null?fD:(typeof t=="function"?mD:pD)(t)):this.node().innerHTML}function yD(){this.nextSibling&&this.parentNode.appendChild(this)}function vD(){return this.each(yD)}function _D(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wD(){return this.each(_D)}function xD(t){var e=typeof t=="function"?t:EI(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ED(){return null}function bD(t,e){var n=typeof t=="function"?t:EI(t),r=e==null?ED:typeof e=="function"?e:B0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ID(){var t=this.parentNode;t&&t.removeChild(this)}function TD(){return this.each(ID)}function SD(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function CD(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function AD(t){return this.select(t?CD:SD)}function kD(t){return arguments.length?this.property("__data__",t):this.node().__data__}function RD(t){return function(e){t.call(this,e,this.__data__)}}function ND(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function PD(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function DD(t,e,n){return function(){var r=this.__on,i,s=RD(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function VD(t,e,n){var r=ND(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(i=0,d=a[l];i<s;++i)if((o=r[i]).type===d.type&&o.name===d.name)return d.value}return}for(a=e?DD:PD,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function PI(t,e,n){var r=CI(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function OD(t,e){return function(){return PI(this,t,e)}}function zD(t,e){return function(){return PI(this,t,e.apply(this,arguments))}}function MD(t,e){return this.each((typeof e=="function"?zD:OD)(t,e))}function*LD(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var DI=[null];function zn(t,e){this._groups=t,this._parents=e}function fu(){return new zn([[document.documentElement]],DI)}function jD(){return this}zn.prototype=fu.prototype={constructor:zn,select:dP,selectAll:mP,selectChild:_P,selectChildren:bP,filter:IP,data:RP,enter:TP,exit:PP,join:DP,merge:VP,selection:jD,order:OP,sort:zP,call:LP,nodes:jP,node:FP,size:$P,empty:UP,each:BP,attr:YP,style:eD,property:iD,classed:lD,text:hD,html:gD,raise:vD,lower:wD,append:xD,insert:bD,remove:TD,clone:AD,datum:kD,on:VD,dispatch:MD,[Symbol.iterator]:LD};function An(t){return typeof t=="string"?new zn([[document.querySelector(t)]],[document.documentElement]):new zn([[t]],DI)}function FD(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ar(t,e){if(t=FD(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const $D={passive:!1},Fc={capture:!0,passive:!1};function kp(t){t.stopImmediatePropagation()}function ya(t){t.preventDefault(),t.stopImmediatePropagation()}function VI(t){var e=t.document.documentElement,n=An(t).on("dragstart.drag",ya,Fc);"onselectstart"in e?n.on("selectstart.drag",ya,Fc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function OI(t,e){var n=t.document.documentElement,r=An(t).on("dragstart.drag",null);e&&(r.on("click.drag",ya,Fc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const nd=t=>()=>t;function eg(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}eg.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function UD(t){return!t.ctrlKey&&!t.button}function BD(){return this.parentNode}function qD(t,e){return e??{x:t.x,y:t.y}}function HD(){return navigator.maxTouchPoints||"ontouchstart"in this}function zI(){var t=UD,e=BD,n=qD,r=HD,i={},s=_f("start","drag","end"),o=0,a,l,c,d,h=0;function f(A){A.on("mousedown.drag",m).filter(r).on("touchstart.drag",N).on("touchmove.drag",y,$D).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(A,O){if(!(d||!t.call(this,A,O))){var M=T(this,e.call(this,A,O),A,O,"mouse");M&&(An(A.view).on("mousemove.drag",E,Fc).on("mouseup.drag",x,Fc),VI(A.view),kp(A),c=!1,a=A.clientX,l=A.clientY,M("start",A))}}function E(A){if(ya(A),!c){var O=A.clientX-a,M=A.clientY-l;c=O*O+M*M>h}i.mouse("drag",A)}function x(A){An(A.view).on("mousemove.drag mouseup.drag",null),OI(A.view,c),ya(A),i.mouse("end",A)}function N(A,O){if(t.call(this,A,O)){var M=A.changedTouches,S=e.call(this,A,O),b=M.length,w,I;for(w=0;w<b;++w)(I=T(this,S,A,O,M[w].identifier,M[w]))&&(kp(A),I("start",A,M[w]))}}function y(A){var O=A.changedTouches,M=O.length,S,b;for(S=0;S<M;++S)(b=i[O[S].identifier])&&(ya(A),b("drag",A,O[S]))}function v(A){var O=A.changedTouches,M=O.length,S,b;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),S=0;S<M;++S)(b=i[O[S].identifier])&&(kp(A),b("end",A,O[S]))}function T(A,O,M,S,b,w){var I=s.copy(),C=ar(w||M,O),R,k,P;if((P=n.call(A,new eg("beforestart",{sourceEvent:M,target:f,identifier:b,active:o,x:C[0],y:C[1],dx:0,dy:0,dispatch:I}),S))!=null)return R=P.x-C[0]||0,k=P.y-C[1]||0,function $(z,F,j){var L=C,B;switch(z){case"start":i[b]=$,B=o++;break;case"end":delete i[b],--o;case"drag":C=ar(j||F,O),B=o;break}I.call(z,A,new eg(z,{sourceEvent:F,subject:P,target:f,identifier:b,active:B,x:C[0]+R,y:C[1]+k,dx:C[0]-L[0],dy:C[1]-L[1],dispatch:I}),S)}}return f.filter=function(A){return arguments.length?(t=typeof A=="function"?A:nd(!!A),f):t},f.container=function(A){return arguments.length?(e=typeof A=="function"?A:nd(A),f):e},f.subject=function(A){return arguments.length?(n=typeof A=="function"?A:nd(A),f):n},f.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:nd(!!A),f):r},f.on=function(){var A=s.on.apply(s,arguments);return A===s?f:A},f.clickDistance=function(A){return arguments.length?(h=(A=+A)*A,f):Math.sqrt(h)},f}function H0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function MI(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function pu(){}var $c=.7,Eh=1/$c,va="\\s*([+-]?\\d+)\\s*",Uc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",KD=/^#([0-9a-f]{3,8})$/,GD=new RegExp(`^rgb\\(${va},${va},${va}\\)$`),WD=new RegExp(`^rgb\\(${Rr},${Rr},${Rr}\\)$`),QD=new RegExp(`^rgba\\(${va},${va},${va},${Uc}\\)$`),YD=new RegExp(`^rgba\\(${Rr},${Rr},${Rr},${Uc}\\)$`),XD=new RegExp(`^hsl\\(${Uc},${Rr},${Rr}\\)$`),JD=new RegExp(`^hsla\\(${Uc},${Rr},${Rr},${Uc}\\)$`),hw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H0(pu,Bc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fw,formatHex:fw,formatHex8:ZD,formatHsl:eV,formatRgb:pw,toString:pw});function fw(){return this.rgb().formatHex()}function ZD(){return this.rgb().formatHex8()}function eV(){return LI(this).formatHsl()}function pw(){return this.rgb().formatRgb()}function Bc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=KD.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?mw(e):n===3?new dn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=GD.exec(t))?new dn(e[1],e[2],e[3],1):(e=WD.exec(t))?new dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QD.exec(t))?rd(e[1],e[2],e[3],e[4]):(e=YD.exec(t))?rd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=XD.exec(t))?vw(e[1],e[2]/100,e[3]/100,1):(e=JD.exec(t))?vw(e[1],e[2]/100,e[3]/100,e[4]):hw.hasOwnProperty(t)?mw(hw[t]):t==="transparent"?new dn(NaN,NaN,NaN,0):null}function mw(t){return new dn(t>>16&255,t>>8&255,t&255,1)}function rd(t,e,n,r){return r<=0&&(t=e=n=NaN),new dn(t,e,n,r)}function tV(t){return t instanceof pu||(t=Bc(t)),t?(t=t.rgb(),new dn(t.r,t.g,t.b,t.opacity)):new dn}function tg(t,e,n,r){return arguments.length===1?tV(t):new dn(t,e,n,r??1)}function dn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}H0(dn,tg,MI(pu,{brighter(t){return t=t==null?Eh:Math.pow(Eh,t),new dn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$c:Math.pow($c,t),new dn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new dn(Ys(this.r),Ys(this.g),Ys(this.b),bh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gw,formatHex:gw,formatHex8:nV,formatRgb:yw,toString:yw}));function gw(){return`#${qs(this.r)}${qs(this.g)}${qs(this.b)}`}function nV(){return`#${qs(this.r)}${qs(this.g)}${qs(this.b)}${qs((isNaN(this.opacity)?1:this.opacity)*255)}`}function yw(){const t=bh(this.opacity);return`${t===1?"rgb(":"rgba("}${Ys(this.r)}, ${Ys(this.g)}, ${Ys(this.b)}${t===1?")":`, ${t})`}`}function bh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ys(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qs(t){return t=Ys(t),(t<16?"0":"")+t.toString(16)}function vw(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new cr(t,e,n,r)}function LI(t){if(t instanceof cr)return new cr(t.h,t.s,t.l,t.opacity);if(t instanceof pu||(t=Bc(t)),!t)return new cr;if(t instanceof cr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new cr(o,a,l,t.opacity)}function rV(t,e,n,r){return arguments.length===1?LI(t):new cr(t,e,n,r??1)}function cr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}H0(cr,rV,MI(pu,{brighter(t){return t=t==null?Eh:Math.pow(Eh,t),new cr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$c:Math.pow($c,t),new cr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new dn(Rp(t>=240?t-240:t+120,i,r),Rp(t,i,r),Rp(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new cr(_w(this.h),id(this.s),id(this.l),bh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bh(this.opacity);return`${t===1?"hsl(":"hsla("}${_w(this.h)}, ${id(this.s)*100}%, ${id(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _w(t){return t=(t||0)%360,t<0?t+360:t}function id(t){return Math.max(0,Math.min(1,t||0))}function Rp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const jI=t=>()=>t;function iV(t,e){return function(n){return t+n*e}}function sV(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function oV(t){return(t=+t)==1?FI:function(e,n){return n-e?sV(e,n,t):jI(isNaN(e)?n:e)}}function FI(t,e){var n=e-t;return n?iV(t,n):jI(isNaN(t)?e:t)}const ww=function t(e){var n=oV(e);function r(i,s){var o=n((i=tg(i)).r,(s=tg(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=FI(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=t,r}(1);function zi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ng=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Np=new RegExp(ng.source,"g");function aV(t){return function(){return t}}function lV(t){return function(e){return t(e)+""}}function cV(t,e){var n=ng.lastIndex=Np.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=ng.exec(t))&&(i=Np.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:zi(r,i)})),n=Np.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?lV(l[0].x):aV(e):(e=l.length,function(c){for(var d=0,h;d<e;++d)a[(h=l[d]).i]=h.x(c);return a.join("")})}var xw=180/Math.PI,rg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $I(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*xw,skewX:Math.atan(l)*xw,scaleX:o,scaleY:a}}var sd;function uV(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?rg:$I(e.a,e.b,e.c,e.d,e.e,e.f)}function dV(t){return t==null||(sd||(sd=document.createElementNS("http://www.w3.org/2000/svg","g")),sd.setAttribute("transform",t),!(t=sd.transform.baseVal.consolidate()))?rg:(t=t.matrix,$I(t.a,t.b,t.c,t.d,t.e,t.f))}function UI(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,d,h,f,m,E){if(c!==h||d!==f){var x=m.push("translate(",null,e,null,n);E.push({i:x-4,x:zi(c,h)},{i:x-2,x:zi(d,f)})}else(h||f)&&m.push("translate("+h+e+f+n)}function o(c,d,h,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:zi(c,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(c,d,h,f){c!==d?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:zi(c,d)}):d&&h.push(i(h)+"skewX("+d+r)}function l(c,d,h,f,m,E){if(c!==h||d!==f){var x=m.push(i(m)+"scale(",null,",",null,")");E.push({i:x-4,x:zi(c,h)},{i:x-2,x:zi(d,f)})}else(h!==1||f!==1)&&m.push(i(m)+"scale("+h+","+f+")")}return function(c,d){var h=[],f=[];return c=t(c),d=t(d),s(c.translateX,c.translateY,d.translateX,d.translateY,h,f),o(c.rotate,d.rotate,h,f),a(c.skewX,d.skewX,h,f),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,f),c=d=null,function(m){for(var E=-1,x=f.length,N;++E<x;)h[(N=f[E]).i]=N.x(m);return h.join("")}}}var hV=UI(uV,"px, ","px)","deg)"),fV=UI(dV,", ",")",")"),pV=1e-12;function Ew(t){return((t=Math.exp(t))+1/t)/2}function mV(t){return((t=Math.exp(t))-1/t)/2}function gV(t){return((t=Math.exp(2*t))-1)/(t+1)}const yV=function t(e,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],d=o[0],h=o[1],f=o[2],m=d-a,E=h-l,x=m*m+E*E,N,y;if(x<pV)y=Math.log(f/c)/e,N=function(S){return[a+S*m,l+S*E,c*Math.exp(e*S*y)]};else{var v=Math.sqrt(x),T=(f*f-c*c+r*x)/(2*c*n*v),A=(f*f-c*c-r*x)/(2*f*n*v),O=Math.log(Math.sqrt(T*T+1)-T),M=Math.log(Math.sqrt(A*A+1)-A);y=(M-O)/e,N=function(S){var b=S*y,w=Ew(O),I=c/(n*v)*(w*gV(e*b+O)-mV(O));return[a+I*m,l+I*E,c*w/Ew(e*b+O)]}}return N.duration=y*1e3*e/Math.SQRT2,N}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i}(Math.SQRT2,2,4);var Va=0,Ql=0,Ol=0,BI=1e3,Ih,Yl,Th=0,so=0,xf=0,qc=typeof performance=="object"&&performance.now?performance:Date,qI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function K0(){return so||(qI(vV),so=qc.now()+xf)}function vV(){so=0}function Sh(){this._call=this._time=this._next=null}Sh.prototype=HI.prototype={constructor:Sh,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?K0():+n)+(e==null?0:+e),!this._next&&Yl!==this&&(Yl?Yl._next=this:Ih=this,Yl=this),this._call=t,this._time=n,ig()},stop:function(){this._call&&(this._call=null,this._time=1/0,ig())}};function HI(t,e,n){var r=new Sh;return r.restart(t,e,n),r}function _V(){K0(),++Va;for(var t=Ih,e;t;)(e=so-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Va}function bw(){so=(Th=qc.now())+xf,Va=Ql=0;try{_V()}finally{Va=0,xV(),so=0}}function wV(){var t=qc.now(),e=t-Th;e>BI&&(xf-=e,Th=t)}function xV(){for(var t,e=Ih,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ih=n);Yl=t,ig(r)}function ig(t){if(!Va){Ql&&(Ql=clearTimeout(Ql));var e=t-so;e>24?(t<1/0&&(Ql=setTimeout(bw,t-qc.now()-xf)),Ol&&(Ol=clearInterval(Ol))):(Ol||(Th=qc.now(),Ol=setInterval(wV,BI)),Va=1,qI(bw))}}function Iw(t,e,n){var r=new Sh;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var EV=_f("start","end","cancel","interrupt"),bV=[],KI=0,Tw=1,sg=2,Od=3,Sw=4,og=5,zd=6;function Ef(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;IV(t,n,{name:e,index:r,group:i,on:EV,tween:bV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:KI})}function G0(t,e){var n=yr(t,e);if(n.state>KI)throw new Error("too late; already scheduled");return n}function Or(t,e){var n=yr(t,e);if(n.state>Od)throw new Error("too late; already running");return n}function yr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function IV(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=HI(s,0,n.time);function s(c){n.state=Tw,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var d,h,f,m;if(n.state!==Tw)return l();for(d in r)if(m=r[d],m.name===n.name){if(m.state===Od)return Iw(o);m.state===Sw?(m.state=zd,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[d]):+d<e&&(m.state=zd,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[d])}if(Iw(function(){n.state===Od&&(n.state=Sw,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=sg,n.on.call("start",t,t.__data__,n.index,n.group),n.state===sg){for(n.state=Od,i=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(m=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=m);i.length=h+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=og,1),h=-1,f=i.length;++h<f;)i[h].call(t,d);n.state===og&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=zd,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Md(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>sg&&r.state<og,r.state=zd,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function TV(t){return this.each(function(){Md(this,t)})}function SV(t,e){var n,r;return function(){var i=Or(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function CV(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Or(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function AV(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=yr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?SV:CV)(n,t,e))}function W0(t,e,n){var r=t._id;return t.each(function(){var i=Or(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return yr(i,r).value[e]}}function GI(t,e){var n;return(typeof e=="number"?zi:e instanceof Bc?ww:(n=Bc(e))?(e=n,ww):cV)(t,e)}function kV(t){return function(){this.removeAttribute(t)}}function RV(t){return function(){this.removeAttributeNS(t.space,t.local)}}function NV(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function PV(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function DV(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function VV(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function OV(t,e){var n=wf(t),r=n==="transform"?fV:GI;return this.attrTween(t,typeof e=="function"?(n.local?VV:DV)(n,r,W0(this,"attr."+t,e)):e==null?(n.local?RV:kV)(n):(n.local?PV:NV)(n,r,e))}function zV(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function MV(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function LV(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&MV(t,s)),n}return i._value=e,i}function jV(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&zV(t,s)),n}return i._value=e,i}function FV(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=wf(t);return this.tween(n,(r.local?LV:jV)(r,e))}function $V(t,e){return function(){G0(this,t).delay=+e.apply(this,arguments)}}function UV(t,e){return e=+e,function(){G0(this,t).delay=e}}function BV(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$V:UV)(e,t)):yr(this.node(),e).delay}function qV(t,e){return function(){Or(this,t).duration=+e.apply(this,arguments)}}function HV(t,e){return e=+e,function(){Or(this,t).duration=e}}function KV(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qV:HV)(e,t)):yr(this.node(),e).duration}function GV(t,e){if(typeof e!="function")throw new Error;return function(){Or(this,t).ease=e}}function WV(t){var e=this._id;return arguments.length?this.each(GV(e,t)):yr(this.node(),e).ease}function QV(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Or(this,t).ease=n}}function YV(t){if(typeof t!="function")throw new Error;return this.each(QV(this._id,t))}function XV(t){typeof t!="function"&&(t=II(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new di(r,this._parents,this._name,this._id)}function JV(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],d=l.length,h=o[a]=new Array(d),f,m=0;m<d;++m)(f=l[m]||c[m])&&(h[m]=f);for(;a<r;++a)o[a]=e[a];return new di(o,this._parents,this._name,this._id)}function ZV(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function e4(t,e,n){var r,i,s=ZV(e)?G0:Or;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function t4(t,e){var n=this._id;return arguments.length<2?yr(this.node(),n).on.on(t):this.each(e4(n,t,e))}function n4(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function r4(){return this.on("end.remove",n4(this._id))}function i4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=B0(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),d,h,f=0;f<l;++f)(d=a[f])&&(h=t.call(d,d.__data__,f,a))&&("__data__"in d&&(h.__data__=d.__data__),c[f]=h,Ef(c[f],e,n,f,c,yr(d,n)));return new di(s,this._parents,e,n)}function s4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=bI(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,d,h=0;h<c;++h)if(d=l[h]){for(var f=t.call(d,d.__data__,h,l),m,E=yr(d,n),x=0,N=f.length;x<N;++x)(m=f[x])&&Ef(m,e,n,x,f,E);s.push(f),o.push(d)}return new di(s,o,e,n)}var o4=fu.prototype.constructor;function a4(){return new o4(this._groups,this._parents)}function l4(t,e){var n,r,i;return function(){var s=Da(this,t),o=(this.style.removeProperty(t),Da(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function WI(t){return function(){this.style.removeProperty(t)}}function c4(t,e,n){var r,i=n+"",s;return function(){var o=Da(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function u4(t,e,n){var r,i,s;return function(){var o=Da(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Da(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function d4(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=Or(this,t),c=l.on,d=l.value[s]==null?a||(a=WI(e)):void 0;(c!==n||i!==d)&&(r=(n=c).copy()).on(o,i=d),l.on=r}}function h4(t,e,n){var r=(t+="")=="transform"?hV:GI;return e==null?this.styleTween(t,l4(t,r)).on("end.style."+t,WI(t)):typeof e=="function"?this.styleTween(t,u4(t,r,W0(this,"style."+t,e))).each(d4(this._id,t)):this.styleTween(t,c4(t,r,e),n).on("end.style."+t,null)}function f4(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function p4(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&f4(t,o,n)),r}return s._value=e,s}function m4(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,p4(t,e,n??""))}function g4(t){return function(){this.textContent=t}}function y4(t){return function(){var e=t(this);this.textContent=e??""}}function v4(t){return this.tween("text",typeof t=="function"?y4(W0(this,"text",t)):g4(t==null?"":t+""))}function _4(t){return function(e){this.textContent=t.call(this,e)}}function w4(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&_4(i)),e}return r._value=t,r}function x4(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,w4(t))}function E4(){for(var t=this._name,e=this._id,n=QI(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var d=yr(l,e);Ef(l,t,n,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new di(r,this._parents,t,n)}function b4(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=Or(this,r),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var I4=0;function di(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function QI(){return++I4}var Kr=fu.prototype;di.prototype={constructor:di,select:i4,selectAll:s4,selectChild:Kr.selectChild,selectChildren:Kr.selectChildren,filter:XV,merge:JV,selection:a4,transition:E4,call:Kr.call,nodes:Kr.nodes,node:Kr.node,size:Kr.size,empty:Kr.empty,each:Kr.each,on:t4,attr:OV,attrTween:FV,style:h4,styleTween:m4,text:v4,textTween:x4,remove:r4,tween:AV,delay:BV,duration:KV,ease:WV,easeVarying:YV,end:b4,[Symbol.iterator]:Kr[Symbol.iterator]};function T4(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var S4={time:null,delay:0,duration:250,ease:T4};function C4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function A4(t){var e,n;t instanceof di?(e=t._id,t=t._name):(e=QI(),(n=S4).time=K0(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Ef(l,t,e,c,o,n||C4(l,e));return new di(r,this._parents,t,e)}fu.prototype.interrupt=TV;fu.prototype.transition=A4;const od=t=>()=>t;function k4(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Zr(t,e,n){this.k=t,this.x=e,this.y=n}Zr.prototype={constructor:Zr,scale:function(t){return t===1?this:new Zr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Zr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var si=new Zr(1,0,0);Zr.prototype;function Pp(t){t.stopImmediatePropagation()}function zl(t){t.preventDefault(),t.stopImmediatePropagation()}function R4(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function N4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Cw(){return this.__zoom||si}function P4(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function D4(){return navigator.maxTouchPoints||"ontouchstart"in this}function V4(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function YI(){var t=R4,e=N4,n=V4,r=P4,i=D4,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=yV,c=_f("start","zoom","end"),d,h,f,m=500,E=150,x=0,N=10;function y(P){P.property("__zoom",Cw).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",w).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",C).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(P,$,z,F){var j=P.selection?P.selection():P;j.property("__zoom",Cw),P!==j?O(P,$,z,F):j.interrupt().each(function(){M(this,arguments).event(F).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},y.scaleBy=function(P,$,z,F){y.scaleTo(P,function(){var j=this.__zoom.k,L=typeof $=="function"?$.apply(this,arguments):$;return j*L},z,F)},y.scaleTo=function(P,$,z,F){y.transform(P,function(){var j=e.apply(this,arguments),L=this.__zoom,B=z==null?A(j):typeof z=="function"?z.apply(this,arguments):z,G=L.invert(B),U=typeof $=="function"?$.apply(this,arguments):$;return n(T(v(L,U),B,G),j,o)},z,F)},y.translateBy=function(P,$,z,F){y.transform(P,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),o)},null,F)},y.translateTo=function(P,$,z,F,j){y.transform(P,function(){var L=e.apply(this,arguments),B=this.__zoom,G=F==null?A(L):typeof F=="function"?F.apply(this,arguments):F;return n(si.translate(G[0],G[1]).scale(B.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof z=="function"?-z.apply(this,arguments):-z),L,o)},F,j)};function v(P,$){return $=Math.max(s[0],Math.min(s[1],$)),$===P.k?P:new Zr($,P.x,P.y)}function T(P,$,z){var F=$[0]-z[0]*P.k,j=$[1]-z[1]*P.k;return F===P.x&&j===P.y?P:new Zr(P.k,F,j)}function A(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function O(P,$,z,F){P.on("start.zoom",function(){M(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(F).end()}).tween("zoom",function(){var j=this,L=arguments,B=M(j,L).event(F),G=e.apply(j,L),U=z==null?A(G):typeof z=="function"?z.apply(j,L):z,Y=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),X=j.__zoom,ee=typeof $=="function"?$.apply(j,L):$,oe=l(X.invert(U).concat(Y/X.k),ee.invert(U).concat(Y/ee.k));return function(he){if(he===1)he=ee;else{var de=oe(he),we=Y/de[2];he=new Zr(we,U[0]-de[0]*we,U[1]-de[1]*we)}B.zoom(null,he)}})}function M(P,$,z){return!z&&P.__zooming||new S(P,$)}function S(P,$){this.that=P,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(P,$),this.taps=0}S.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,$){return this.mouse&&P!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var $=An(this.that).datum();c.call(P,this.that,new k4(P,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:c}),$)}};function b(P,...$){if(!t.apply(this,arguments))return;var z=M(this,$).event(P),F=this.__zoom,j=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,r.apply(this,arguments)))),L=ar(P);if(z.wheel)(z.mouse[0][0]!==L[0]||z.mouse[0][1]!==L[1])&&(z.mouse[1]=F.invert(z.mouse[0]=L)),clearTimeout(z.wheel);else{if(F.k===j)return;z.mouse=[L,F.invert(L)],Md(this),z.start()}zl(P),z.wheel=setTimeout(B,E),z.zoom("mouse",n(T(v(F,j),z.mouse[0],z.mouse[1]),z.extent,o));function B(){z.wheel=null,z.end()}}function w(P,...$){if(f||!t.apply(this,arguments))return;var z=P.currentTarget,F=M(this,$,!0).event(P),j=An(P.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",Y,!0),L=ar(P,z),B=P.clientX,G=P.clientY;VI(P.view),Pp(P),F.mouse=[L,this.__zoom.invert(L)],Md(this),F.start();function U(X){if(zl(X),!F.moved){var ee=X.clientX-B,oe=X.clientY-G;F.moved=ee*ee+oe*oe>x}F.event(X).zoom("mouse",n(T(F.that.__zoom,F.mouse[0]=ar(X,z),F.mouse[1]),F.extent,o))}function Y(X){j.on("mousemove.zoom mouseup.zoom",null),OI(X.view,F.moved),zl(X),F.event(X).end()}}function I(P,...$){if(t.apply(this,arguments)){var z=this.__zoom,F=ar(P.changedTouches?P.changedTouches[0]:P,this),j=z.invert(F),L=z.k*(P.shiftKey?.5:2),B=n(T(v(z,L),F,j),e.apply(this,$),o);zl(P),a>0?An(this).transition().duration(a).call(O,B,F,P):An(this).call(y.transform,B,F,P)}}function C(P,...$){if(t.apply(this,arguments)){var z=P.touches,F=z.length,j=M(this,$,P.changedTouches.length===F).event(P),L,B,G,U;for(Pp(P),B=0;B<F;++B)G=z[B],U=ar(G,this),U=[U,this.__zoom.invert(U),G.identifier],j.touch0?!j.touch1&&j.touch0[2]!==U[2]&&(j.touch1=U,j.taps=0):(j.touch0=U,L=!0,j.taps=1+!!d);d&&(d=clearTimeout(d)),L&&(j.taps<2&&(h=U[0],d=setTimeout(function(){d=null},m)),Md(this),j.start())}}function R(P,...$){if(this.__zooming){var z=M(this,$).event(P),F=P.changedTouches,j=F.length,L,B,G,U;for(zl(P),L=0;L<j;++L)B=F[L],G=ar(B,this),z.touch0&&z.touch0[2]===B.identifier?z.touch0[0]=G:z.touch1&&z.touch1[2]===B.identifier&&(z.touch1[0]=G);if(B=z.that.__zoom,z.touch1){var Y=z.touch0[0],X=z.touch0[1],ee=z.touch1[0],oe=z.touch1[1],he=(he=ee[0]-Y[0])*he+(he=ee[1]-Y[1])*he,de=(de=oe[0]-X[0])*de+(de=oe[1]-X[1])*de;B=v(B,Math.sqrt(he/de)),G=[(Y[0]+ee[0])/2,(Y[1]+ee[1])/2],U=[(X[0]+oe[0])/2,(X[1]+oe[1])/2]}else if(z.touch0)G=z.touch0[0],U=z.touch0[1];else return;z.zoom("touch",n(T(B,G,U),z.extent,o))}}function k(P,...$){if(this.__zooming){var z=M(this,$).event(P),F=P.changedTouches,j=F.length,L,B;for(Pp(P),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),L=0;L<j;++L)B=F[L],z.touch0&&z.touch0[2]===B.identifier?delete z.touch0:z.touch1&&z.touch1[2]===B.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(B=ar(B,this),Math.hypot(h[0]-B[0],h[1]-B[1])<N)){var G=An(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return y.wheelDelta=function(P){return arguments.length?(r=typeof P=="function"?P:od(+P),y):r},y.filter=function(P){return arguments.length?(t=typeof P=="function"?P:od(!!P),y):t},y.touchable=function(P){return arguments.length?(i=typeof P=="function"?P:od(!!P),y):i},y.extent=function(P){return arguments.length?(e=typeof P=="function"?P:od([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),y):e},y.scaleExtent=function(P){return arguments.length?(s[0]=+P[0],s[1]=+P[1],y):[s[0],s[1]]},y.translateExtent=function(P){return arguments.length?(o[0][0]=+P[0][0],o[1][0]=+P[1][0],o[0][1]=+P[0][1],o[1][1]=+P[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(P){return arguments.length?(n=P,y):n},y.duration=function(P){return arguments.length?(a=+P,y):a},y.interpolate=function(P){return arguments.length?(l=P,y):l},y.on=function(){var P=c.on.apply(c,arguments);return P===c?y:P},y.clickDistance=function(P){return arguments.length?(x=(P=+P)*P,y):Math.sqrt(x)},y.tapDistance=function(P){return arguments.length?(N=+P,y):N},y}const bf=D.createContext(null),O4=bf.Provider,hi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},XI=hi.error001();function qe(t,e){const n=D.useContext(bf);if(n===null)throw new Error(XI);return xI(n,t,e)}const xt=()=>{const t=D.useContext(bf);if(t===null)throw new Error(XI);return D.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},z4=t=>t.userSelectionActive?"none":"all";function Q0({position:t,children:e,className:n,style:r,...i}){const s=qe(z4),o=`${t}`.split("-");return K.createElement("div",{className:zt(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},e)}function M4({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:K.createElement(Q0,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},K.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const L4=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...d})=>{const h=D.useRef(null),[f,m]=D.useState({x:0,y:0,width:0,height:0}),E=zt(["react-flow__edge-textwrapper",c]);return D.useEffect(()=>{if(h.current){const x=h.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:K.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:E,visibility:f.width?"visible":"hidden",...d},i&&K.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),K.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:r},n),l)};var j4=D.memo(L4);const Y0=t=>({width:t.offsetWidth,height:t.offsetHeight}),us=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),X0=(t={x:0,y:0},e)=>({x:us(t.x,e[0][0],e[1][0]),y:us(t.y,e[0][1],e[1][1])}),Aw=(t,e,n)=>t<e?us(Math.abs(t-e),1,50)/50:t>n?-us(Math.abs(t-n),1,50)/50:0,JI=(t,e)=>{const n=Aw(t.x,35,e.width-35)*20,r=Aw(t.y,35,e.height-35)*20;return[n,r]},ZI=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},eT=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Hc=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),tT=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),kw=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),F4=(t,e)=>tT(eT(Hc(t),Hc(e))),ag=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},$4=t=>Gn(t.width)&&Gn(t.height)&&Gn(t.x)&&Gn(t.y),Gn=t=>!isNaN(t)&&isFinite(t),ut=Symbol.for("internals"),nT=["Enter"," ","Escape"],U4=(t,e)=>{},B4=t=>"nativeEvent"in t;function lg(t){var i,s;const e=B4(t)?t.nativeEvent:t,n=((s=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const rT=t=>"clientX"in t,ns=(t,e)=>{var s,o;const n=rT(t),r=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,i=n?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},Ch=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},tl=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m=20})=>K.createElement(K.Fragment,null,K.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:f}),m&&K.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),i&&Gn(n)&&Gn(r)?K.createElement(j4,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c}):null);tl.displayName="BaseEdge";function Ml(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(s=>s.id===t);i&&n(r,{...i})}}function iT({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function sT({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=t*.125+i*.375+o*.375+n*.125,c=e*.125+s*.375+a*.375+r*.125,d=Math.abs(l-t),h=Math.abs(c-e);return[l,c,d,h]}var oo;(function(t){t.Strict="strict",t.Loose="loose"})(oo||(oo={}));var Hs;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Hs||(Hs={}));var Kc;(function(t){t.Partial="partial",t.Full="full"})(Kc||(Kc={}));var Fi;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Fi||(Fi={}));var Ah;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ah||(Ah={}));var le;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(le||(le={}));function Rw({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===le.Left||t===le.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function oT({sourceX:t,sourceY:e,sourcePosition:n=le.Bottom,targetX:r,targetY:i,targetPosition:s=le.Top}){const[o,a]=Rw({pos:n,x1:t,y1:e,x2:r,y2:i}),[l,c]=Rw({pos:s,x1:r,y1:i,x2:t,y2:e}),[d,h,f,m]=sT({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${t},${e} C${o},${a} ${l},${c} ${r},${i}`,d,h,f,m]}const J0=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=le.Bottom,targetPosition:s=le.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:E,interactionWidth:x})=>{const[N,y,v]=oT({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return K.createElement(tl,{path:N,labelX:y,labelY:v,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:E,interactionWidth:x})});J0.displayName="SimpleBezierEdge";const Nw={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},q4=({source:t,sourcePosition:e=le.Bottom,target:n})=>e===le.Left||e===le.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Pw=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function H4({source:t,sourcePosition:e=le.Bottom,target:n,targetPosition:r=le.Top,center:i,offset:s}){const o=Nw[e],a=Nw[r],l={x:t.x+o.x*s,y:t.y+o.y*s},c={x:n.x+a.x*s,y:n.y+a.y*s},d=q4({source:l,sourcePosition:e,target:c}),h=d.x!==0?"x":"y",f=d[h];let m=[],E,x;const N={x:0,y:0},y={x:0,y:0},[v,T,A,O]=iT({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*a[h]===-1){E=i.x??v,x=i.y??T;const S=[{x:E,y:l.y},{x:E,y:c.y}],b=[{x:l.x,y:x},{x:c.x,y:x}];o[h]===f?m=h==="x"?S:b:m=h==="x"?b:S}else{const S=[{x:l.x,y:c.y}],b=[{x:c.x,y:l.y}];if(h==="x"?m=o.x===f?b:S:m=o.y===f?S:b,e===r){const k=Math.abs(t[h]-n[h]);if(k<=s){const P=Math.min(s-1,s-k);o[h]===f?N[h]=(l[h]>t[h]?-1:1)*P:y[h]=(c[h]>n[h]?-1:1)*P}}if(e!==r){const k=h==="x"?"y":"x",P=o[h]===a[k],$=l[k]>c[k],z=l[k]<c[k];(o[h]===1&&(!P&&$||P&&z)||o[h]!==1&&(!P&&z||P&&$))&&(m=h==="x"?S:b)}const w={x:l.x+N.x,y:l.y+N.y},I={x:c.x+y.x,y:c.y+y.y},C=Math.max(Math.abs(w.x-m[0].x),Math.abs(I.x-m[0].x)),R=Math.max(Math.abs(w.y-m[0].y),Math.abs(I.y-m[0].y));C>=R?(E=(w.x+I.x)/2,x=m[0].y):(E=m[0].x,x=(w.y+I.y)/2)}return[[t,{x:l.x+N.x,y:l.y+N.y},...m,{x:c.x+y.x,y:c.y+y.y},n],E,x,A,O]}function K4(t,e,n,r){const i=Math.min(Pw(t,e)/2,Pw(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const c=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${s+i*c},${o}Q ${s},${o} ${s},${o+i*d}`}const a=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function Gc({sourceX:t,sourceY:e,sourcePosition:n=le.Bottom,targetX:r,targetY:i,targetPosition:s=le.Top,borderRadius:o=5,centerX:a,centerY:l,offset:c=20}){const[d,h,f,m,E]=H4({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:c});return[d.reduce((N,y,v)=>{let T="";return v>0&&v<d.length-1?T=K4(d[v-1],y,d[v+1],o):T=`${v===0?"M":"L"}${y.x} ${y.y}`,N+=T,N},""),h,f,m,E]}const If=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,sourcePosition:h=le.Bottom,targetPosition:f=le.Top,markerEnd:m,markerStart:E,pathOptions:x,interactionWidth:N})=>{const[y,v,T]=Gc({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:f,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return K.createElement(tl,{path:y,labelX:v,labelY:T,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:m,markerStart:E,interactionWidth:N})});If.displayName="SmoothStepEdge";const Z0=D.memo(t=>{var e;return K.createElement(If,{...t,pathOptions:D.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});Z0.displayName="StepEdge";function aT({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,a]=iT({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,a]}const ey=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m})=>{const[E,x,N]=aT({sourceX:t,sourceY:e,targetX:n,targetY:r});return K.createElement(tl,{path:E,labelX:x,labelY:N,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m})});ey.displayName="StraightEdge";function ad(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Dw({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case le.Left:return[e-ad(e-r,s),n];case le.Right:return[e+ad(r-e,s),n];case le.Top:return[e,n-ad(n-i,s)];case le.Bottom:return[e,n+ad(i-n,s)]}}function ty({sourceX:t,sourceY:e,sourcePosition:n=le.Bottom,targetX:r,targetY:i,targetPosition:s=le.Top,curvature:o=.25}){const[a,l]=Dw({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[c,d]=Dw({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,f,m,E]=sT({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${t},${e} C${a},${l} ${c},${d} ${r},${i}`,h,f,m,E]}const kh=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=le.Bottom,targetPosition:s=le.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:E,pathOptions:x,interactionWidth:N})=>{const[y,v,T]=ty({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:x==null?void 0:x.curvature});return K.createElement(tl,{path:y,labelX:v,labelY:T,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:E,interactionWidth:N})});kh.displayName="BezierEdge";const ny=D.createContext(null),G4=ny.Provider;ny.Consumer;const lT=()=>D.useContext(ny),W4=t=>"id"in t&&"source"in t&&"target"in t,Q4=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,cg=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,Y4=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),cT=(t,e)=>{if(!t.source||!t.target)return e;let n;return W4(t)?n={...t}:n={...t,id:Q4(t)},Y4(n,e)?e:e.concat(n)},ug=({x:t,y:e},[n,r,i],s,[o,a])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?{x:o*Math.round(l.x/o),y:a*Math.round(l.y/a)}:l},uT=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),Xs=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},mu=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:s,y:o}=Xs(i,e).positionAbsolute;return eT(r,Hc({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tT(n)},dT=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const l={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},c=[];return t.forEach(d=>{const{width:h,height:f,selectable:m=!0,hidden:E=!1}=d;if(o&&!m||E)return!1;const{positionAbsolute:x}=Xs(d,a),N={x:x.x,y:x.y,width:h||0,height:f||0},y=ag(l,N),v=typeof h>"u"||typeof f>"u"||h===null||f===null,T=s&&y>0,A=(h||0)*(f||0);(v||T||y>=A||d.dragging)&&c.push(d)}),c},hT=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},fT=(t,e,n,r,i,s=.1)=>{const o=e/(t.width*(1+s)),a=n/(t.height*(1+s)),l=Math.min(o,a),c=us(l,r,i),d=t.x+t.width/2,h=t.y+t.height/2,f=e/2-d*c,m=n/2-h*c;return{x:f,y:m,zoom:c}},Vs=(t,e=0)=>t.transition().duration(e);function Vw(t,e,n,r){return(e[n]||[]).reduce((i,s)=>{var o,a;return`${t.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:t.id,x:(((o=t.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function X4(t,e,n,r,i,s){const{x:o,y:a}=ns(t),c=e.elementsFromPoint(o,a).find(E=>E.classList.contains("react-flow__handle"));if(c){const E=c.getAttribute("data-nodeid");if(E){const x=ry(void 0,c),N=c.getAttribute("data-handleid"),y=s({nodeId:E,id:N,type:x});if(y){const v=i.find(T=>T.nodeId===E&&T.type===x&&T.id===N);return{handle:{id:N,type:x,nodeId:E,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:y}}}}let d=[],h=1/0;if(i.forEach(E=>{const x=Math.sqrt((E.x-n.x)**2+(E.y-n.y)**2);if(x<=r){const N=s(E);x<=h&&(x<h?d=[{handle:E,validHandleResult:N}]:x===h&&d.push({handle:E,validHandleResult:N}),h=x)}}),!d.length)return{handle:null,validHandleResult:pT()};if(d.length===1)return d[0];const f=d.some(({validHandleResult:E})=>E.isValid),m=d.some(({handle:E})=>E.type==="target");return d.find(({handle:E,validHandleResult:x})=>m?E.type==="target":f?x.isValid:!0)||d[0]}const J4={source:null,target:null,sourceHandle:null,targetHandle:null},pT=()=>({handleDomNode:null,isValid:!1,connection:J4,endHandle:null});function mT(t,e,n,r,i,s,o){const a=i==="target",l=o.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...pT(),handleDomNode:l};if(l){const d=ry(void 0,l),h=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),E=l.classList.contains("connectableend"),x={source:a?h:n,sourceHandle:a?f:r,target:a?n:h,targetHandle:a?r:f};c.connection=x,m&&E&&(e===oo.Strict?a&&d==="source"||!a&&d==="target":h!==n||f!==r)&&(c.endHandle={nodeId:h,handleId:f,type:d},c.isValid=s(x))}return c}function Z4({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,s)=>{if(s[ut]){const{handleBounds:o}=s[ut];let a=[],l=[];o&&(a=Vw(s,o,"source",`${e}-${n}-${r}`),l=Vw(s,o,"target",`${e}-${n}-${r}`)),i.push(...a,...l)}return i},[])}function ry(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Dp(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function e5(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function gT({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:c}){const d=ZI(t.target),{connectionMode:h,domNode:f,autoPanOnConnect:m,connectionRadius:E,onConnectStart:x,panBy:N,getNodes:y,cancelConnection:v}=s();let T=0,A;const{x:O,y:M}=ns(t),S=d==null?void 0:d.elementFromPoint(O,M),b=ry(l,S),w=f==null?void 0:f.getBoundingClientRect();if(!w||!b)return;let I,C=ns(t,w),R=!1,k=null,P=!1,$=null;const z=Z4({nodes:y(),nodeId:n,handleId:e,handleType:b}),F=()=>{if(!m)return;const[B,G]=JI(C,w);N({x:B,y:G}),T=requestAnimationFrame(F)};o({connectionPosition:C,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:b,connectionStartHandle:{nodeId:n,handleId:e,type:b},connectionEndHandle:null}),x==null||x(t,{nodeId:n,handleId:e,handleType:b});function j(B){const{transform:G}=s();C=ns(B,w);const{handle:U,validHandleResult:Y}=X4(B,d,ug(C,G,!1,[1,1]),E,z,X=>mT(X,h,n,e,i?"target":"source",a,d));if(A=U,R||(F(),R=!0),$=Y.handleDomNode,k=Y.connection,P=Y.isValid,o({connectionPosition:A&&P?uT({x:A.x,y:A.y},G):C,connectionStatus:e5(!!A,P),connectionEndHandle:Y.endHandle}),!A&&!P&&!$)return Dp(I);k.source!==k.target&&$&&(Dp(I),I=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",P),$.classList.toggle("react-flow__handle-valid",P))}function L(B){var G,U;(A||$)&&k&&P&&(r==null||r(k)),(U=(G=s()).onConnectEnd)==null||U.call(G,B),l&&(c==null||c(B)),Dp(I),v(),cancelAnimationFrame(T),R=!1,P=!1,k=null,$=null,d.removeEventListener("mousemove",j),d.removeEventListener("mouseup",L),d.removeEventListener("touchmove",j),d.removeEventListener("touchend",L)}d.addEventListener("mousemove",j),d.addEventListener("mouseup",L),d.addEventListener("touchmove",j),d.addEventListener("touchend",L)}const Ow=()=>!0,t5=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),n5=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n}},yT=D.forwardRef(({type:t="source",position:e=le.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:c,onMouseDown:d,onTouchStart:h,...f},m)=>{var w,I;const E=o||null,x=t==="target",N=xt(),y=lT(),{connectOnClick:v,noPanClassName:T}=qe(t5,Vt),{connecting:A,clickConnecting:O}=qe(n5(y,E,t),Vt);y||(I=(w=N.getState()).onError)==null||I.call(w,"010",hi.error010());const M=C=>{const{defaultEdgeOptions:R,onConnect:k,hasDefaultEdges:P}=N.getState(),$={...R,...C};if(P){const{edges:z,setEdges:F}=N.getState();F(cT($,z))}k==null||k($),a==null||a($)},S=C=>{if(!y)return;const R=rT(C);i&&(R&&C.button===0||!R)&&gT({event:C,handleId:E,nodeId:y,onConnect:M,isTarget:x,getState:N.getState,setState:N.setState,isValidConnection:n||N.getState().isValidConnection||Ow}),R?d==null||d(C):h==null||h(C)},b=C=>{const{onClickConnectStart:R,onClickConnectEnd:k,connectionClickStartHandle:P,connectionMode:$,isValidConnection:z}=N.getState();if(!y||!P&&!i)return;if(!P){R==null||R(C,{nodeId:y,handleId:E,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:y,type:t,handleId:E}});return}const F=ZI(C.target),j=n||z||Ow,{connection:L,isValid:B}=mT({nodeId:y,id:E,type:t},$,P.nodeId,P.handleId||null,P.type,j,F);B&&M(L),k==null||k(C),N.setState({connectionClickStartHandle:null})};return K.createElement("div",{"data-handleid":E,"data-nodeid":y,"data-handlepos":e,"data-id":`${y}-${E}-${t}`,className:zt(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",T,c,{source:!x,target:x,connectable:r,connectablestart:i,connectableend:s,connecting:O,connectionindicator:r&&(i&&!A||s&&A)}]),onMouseDown:S,onTouchStart:S,onClick:v?b:void 0,ref:m,...f},l)});yT.displayName="Handle";var wn=D.memo(yT);const vT=({data:t,isConnectable:e,targetPosition:n=le.Top,sourcePosition:r=le.Bottom})=>K.createElement(K.Fragment,null,K.createElement(wn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,K.createElement(wn,{type:"source",position:r,isConnectable:e}));vT.displayName="DefaultNode";var dg=D.memo(vT);const _T=({data:t,isConnectable:e,sourcePosition:n=le.Bottom})=>K.createElement(K.Fragment,null,t==null?void 0:t.label,K.createElement(wn,{type:"source",position:n,isConnectable:e}));_T.displayName="InputNode";var wT=D.memo(_T);const xT=({data:t,isConnectable:e,targetPosition:n=le.Top})=>K.createElement(K.Fragment,null,K.createElement(wn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);xT.displayName="OutputNode";var ET=D.memo(xT);const iy=()=>null;iy.displayName="GroupNode";const r5=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),ld=t=>t.id;function i5(t,e){return Vt(t.selectedNodes.map(ld),e.selectedNodes.map(ld))&&Vt(t.selectedEdges.map(ld),e.selectedEdges.map(ld))}const bT=D.memo(({onSelectionChange:t})=>{const e=xt(),{selectedNodes:n,selectedEdges:r}=qe(r5,i5);return D.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(s=>s(i))},[n,r,t]),null});bT.displayName="SelectionListener";const s5=t=>!!t.onSelectionChange;function o5({onSelectionChange:t}){const e=qe(s5);return t||e?K.createElement(bT,{onSelectionChange:t}):null}const a5=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function zo(t,e){D.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Te(t,e,n){D.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const l5=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:d,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:E,minZoom:x,maxZoom:N,nodeExtent:y,onNodesChange:v,onEdgesChange:T,elementsSelectable:A,connectionMode:O,snapGrid:M,snapToGrid:S,translateExtent:b,connectOnClick:w,defaultEdgeOptions:I,fitView:C,fitViewOptions:R,onNodesDelete:k,onEdgesDelete:P,onNodeDrag:$,onNodeDragStart:z,onNodeDragStop:F,onSelectionDrag:j,onSelectionDragStart:L,onSelectionDragStop:B,noPanClassName:G,nodeOrigin:U,rfId:Y,autoPanOnConnect:X,autoPanOnNodeDrag:ee,onError:oe,connectionRadius:he,isValidConnection:de,nodeDragThreshold:we})=>{const{setNodes:_e,setEdges:ye,setDefaultNodesAndEdges:$e,setMinZoom:be,setMaxZoom:Ge,setTranslateExtent:ze,setNodeExtent:dt,reset:Se}=qe(a5,Vt),ie=xt();return D.useEffect(()=>{const xe=r==null?void 0:r.map(yt=>({...yt,...I}));return $e(n,xe),()=>{Se()}},[]),Te("defaultEdgeOptions",I,ie.setState),Te("connectionMode",O,ie.setState),Te("onConnect",i,ie.setState),Te("onConnectStart",s,ie.setState),Te("onConnectEnd",o,ie.setState),Te("onClickConnectStart",a,ie.setState),Te("onClickConnectEnd",l,ie.setState),Te("nodesDraggable",c,ie.setState),Te("nodesConnectable",d,ie.setState),Te("nodesFocusable",h,ie.setState),Te("edgesFocusable",f,ie.setState),Te("edgesUpdatable",m,ie.setState),Te("elementsSelectable",A,ie.setState),Te("elevateNodesOnSelect",E,ie.setState),Te("snapToGrid",S,ie.setState),Te("snapGrid",M,ie.setState),Te("onNodesChange",v,ie.setState),Te("onEdgesChange",T,ie.setState),Te("connectOnClick",w,ie.setState),Te("fitViewOnInit",C,ie.setState),Te("fitViewOnInitOptions",R,ie.setState),Te("onNodesDelete",k,ie.setState),Te("onEdgesDelete",P,ie.setState),Te("onNodeDrag",$,ie.setState),Te("onNodeDragStart",z,ie.setState),Te("onNodeDragStop",F,ie.setState),Te("onSelectionDrag",j,ie.setState),Te("onSelectionDragStart",L,ie.setState),Te("onSelectionDragStop",B,ie.setState),Te("noPanClassName",G,ie.setState),Te("nodeOrigin",U,ie.setState),Te("rfId",Y,ie.setState),Te("autoPanOnConnect",X,ie.setState),Te("autoPanOnNodeDrag",ee,ie.setState),Te("onError",oe,ie.setState),Te("connectionRadius",he,ie.setState),Te("isValidConnection",de,ie.setState),Te("nodeDragThreshold",we,ie.setState),zo(t,_e),zo(e,ye),zo(x,be),zo(N,Ge),zo(b,ze),zo(y,dt),null},zw={display:"none"},c5={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},IT="react-flow__node-desc",TT="react-flow__edge-desc",u5="react-flow__aria-live",d5=t=>t.ariaLiveMessage;function h5({rfId:t}){const e=qe(d5);return K.createElement("div",{id:`${u5}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:c5},e)}function f5({rfId:t,disableKeyboardA11y:e}){return K.createElement(K.Fragment,null,K.createElement("div",{id:`${IT}-${t}`,style:zw},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),K.createElement("div",{id:`${TT}-${t}`,style:zw},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&K.createElement(h5,{rfId:t}))}var Wc=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=D.useState(!1),i=D.useRef(!1),s=D.useRef(new Set([])),[o,a]=D.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=c.reduce((h,f)=>h.concat(...f),[]);return[c,d]}return[[],[]]},[t]);return D.useEffect(()=>{const l=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||l;if(t!==null){const d=m=>{if(i.current=m.ctrlKey||m.metaKey||m.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&lg(m))return!1;const x=Lw(m.code,a);s.current.add(m[x]),Mw(o,s.current,!1)&&(m.preventDefault(),r(!0))},h=m=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&lg(m))return!1;const x=Lw(m.code,a);Mw(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",h),window.removeEventListener("blur",f)}}},[t,r]),n};function Mw(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function Lw(t,e){return e.includes(t)?"code":"key"}function ST(t,e,n,r){var a,l;const i=t.parentNode||t.parentId;if(!i)return n;const s=e.get(i),o=Xs(s,r);return ST(s,e,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[ut])==null?void 0:a.z)??0)>(n.z??0)?((l=s[ut])==null?void 0:l.z)??0:n.z??0},r)}function CT(t,e,n){t.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!t.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:o,y:a,z:l}=ST(r,t,{...r.position,z:((s=r[ut])==null?void 0:s.z)??0},e);r.positionAbsolute={x:o,y:a},r[ut].z=l,n!=null&&n[r.id]&&(r[ut].isParent=!0)}})}function Vp(t,e,n,r){const i=new Map,s={},o=r?1e3:0;return t.forEach(a=>{var m;const l=(Gn(a.zIndex)?a.zIndex:0)+(a.selected?o:0),c=e.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},h=a.parentNode||a.parentId;h&&(s[h]=!0);const f=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==a.type;Object.defineProperty(d,ut,{enumerable:!1,value:{handleBounds:f||(m=c==null?void 0:c[ut])==null?void 0:m.handleBounds,z:l}}),i.set(a.id,d)}),CT(i,n,s),i}function AT(t,e={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:h}=t(),f=e.initial&&!c&&d;if(a&&l&&(f||!e.initial)){const E=n().filter(N=>{var v;const y=e.includeHiddenNodes?N.width&&N.height:!N.hidden;return(v=e.nodes)!=null&&v.length?y&&e.nodes.some(T=>T.id===N.id):y}),x=E.every(N=>N.width&&N.height);if(E.length>0&&x){const N=mu(E,h),{x:y,y:v,zoom:T}=fT(N,r,i,e.minZoom??s,e.maxZoom??o,e.padding??.1),A=si.translate(y,v).scale(T);return typeof e.duration=="number"&&e.duration>0?a.transform(Vs(l,e.duration),A):a.transform(l,A),!0}}return!1}function p5(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[ut]:r[ut],selected:n.selected})}),new Map(e)}function m5(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function cd({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:c}=n();t!=null&&t.length&&(l&&r({nodeInternals:p5(t,i)}),o==null||o(t)),e!=null&&e.length&&(c&&r({edges:m5(e,s)}),a==null||a(e))}const Mo=()=>{},g5={zoomIn:Mo,zoomOut:Mo,zoomTo:Mo,getZoom:()=>1,setViewport:Mo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Mo,fitBounds:Mo,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},y5=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),v5=()=>{const t=xt(),{d3Zoom:e,d3Selection:n}=qe(y5,Vt);return D.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(Vs(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(Vs(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>e.scaleTo(Vs(n,s==null?void 0:s.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,s)=>{const[o,a,l]=t.getState().transform,c=si.translate(i.x??o,i.y??a).scale(i.zoom??l);e.transform(Vs(n,s==null?void 0:s.duration),c)},getViewport:()=>{const[i,s,o]=t.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>AT(t.getState,i),setCenter:(i,s,o)=>{const{width:a,height:l,maxZoom:c}=t.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,h=a/2-i*d,f=l/2-s*d,m=si.translate(h,f).scale(d);e.transform(Vs(n,o==null?void 0:o.duration),m)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:l,maxZoom:c}=t.getState(),{x:d,y:h,zoom:f}=fT(i,o,a,l,c,(s==null?void 0:s.padding)??.1),m=si.translate(d,h).scale(f);e.transform(Vs(n,s==null?void 0:s.duration),m)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ug(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:l}=t.getState();if(!l)return i;const{x:c,y:d}=l.getBoundingClientRect(),h={x:i.x-c,y:i.y-d};return ug(h,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=t.getState();if(!o)return i;const{x:a,y:l}=o.getBoundingClientRect(),c=uT(i,s);return{x:c.x+a,y:c.y+l}},viewportInitialized:!0}:g5,[e,n])};function zr(){const t=v5(),e=xt(),n=D.useCallback(()=>e.getState().getNodes().map(x=>({...x})),[]),r=D.useCallback(x=>e.getState().nodeInternals.get(x),[]),i=D.useCallback(()=>{const{edges:x=[]}=e.getState();return x.map(N=>({...N}))},[]),s=D.useCallback(x=>{const{edges:N=[]}=e.getState();return N.find(y=>y.id===x)},[]),o=D.useCallback(x=>{const{getNodes:N,setNodes:y,hasDefaultNodes:v,onNodesChange:T}=e.getState(),A=N(),O=typeof x=="function"?x(A):x;if(v)y(O);else if(T){const M=O.length===0?A.map(S=>({type:"remove",id:S.id})):O.map(S=>({item:S,type:"reset"}));T(M)}},[]),a=D.useCallback(x=>{const{edges:N=[],setEdges:y,hasDefaultEdges:v,onEdgesChange:T}=e.getState(),A=typeof x=="function"?x(N):x;if(v)y(A);else if(T){const O=A.length===0?N.map(M=>({type:"remove",id:M.id})):A.map(M=>({item:M,type:"reset"}));T(O)}},[]),l=D.useCallback(x=>{const N=Array.isArray(x)?x:[x],{getNodes:y,setNodes:v,hasDefaultNodes:T,onNodesChange:A}=e.getState();if(T){const M=[...y(),...N];v(M)}else if(A){const O=N.map(M=>({item:M,type:"add"}));A(O)}},[]),c=D.useCallback(x=>{const N=Array.isArray(x)?x:[x],{edges:y=[],setEdges:v,hasDefaultEdges:T,onEdgesChange:A}=e.getState();if(T)v([...y,...N]);else if(A){const O=N.map(M=>({item:M,type:"add"}));A(O)}},[]),d=D.useCallback(()=>{const{getNodes:x,edges:N=[],transform:y}=e.getState(),[v,T,A]=y;return{nodes:x().map(O=>({...O})),edges:N.map(O=>({...O})),viewport:{x:v,y:T,zoom:A}}},[]),h=D.useCallback(({nodes:x,edges:N})=>{const{nodeInternals:y,getNodes:v,edges:T,hasDefaultNodes:A,hasDefaultEdges:O,onNodesDelete:M,onEdgesDelete:S,onNodesChange:b,onEdgesChange:w}=e.getState(),I=(x||[]).map($=>$.id),C=(N||[]).map($=>$.id),R=v().reduce(($,z)=>{const F=z.parentNode||z.parentId,j=!I.includes(z.id)&&F&&$.find(B=>B.id===F);return(typeof z.deletable=="boolean"?z.deletable:!0)&&(I.includes(z.id)||j)&&$.push(z),$},[]),k=T.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),P=k.filter($=>C.includes($.id));if(R||P){const $=hT(R,k),z=[...P,...$],F=z.reduce((j,L)=>(j.includes(L.id)||j.push(L.id),j),[]);if((O||A)&&(O&&e.setState({edges:T.filter(j=>!F.includes(j.id))}),A&&(R.forEach(j=>{y.delete(j.id)}),e.setState({nodeInternals:new Map(y)}))),F.length>0&&(S==null||S(z),w&&w(F.map(j=>({id:j,type:"remove"})))),R.length>0&&(M==null||M(R),b)){const j=R.map(L=>({id:L.id,type:"remove"}));b(j)}}},[]),f=D.useCallback(x=>{const N=$4(x),y=N?null:e.getState().nodeInternals.get(x.id);return!N&&!y?[null,null,N]:[N?x:kw(y),y,N]},[]),m=D.useCallback((x,N=!0,y)=>{const[v,T,A]=f(x);return v?(y||e.getState().getNodes()).filter(O=>{if(!A&&(O.id===T.id||!O.positionAbsolute))return!1;const M=kw(O),S=ag(M,v);return N&&S>0||S>=v.width*v.height}):[]},[]),E=D.useCallback((x,N,y=!0)=>{const[v]=f(x);if(!v)return!1;const T=ag(v,N);return y&&T>0||T>=v.width*v.height},[]);return D.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:l,addEdges:c,toObject:d,deleteElements:h,getIntersectingNodes:m,isNodeIntersecting:E}),[t,n,r,i,s,o,a,l,c,d,h,m,E])}const _5={actInsideInputWithModifier:!1};var w5=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=xt(),{deleteElements:r}=zr(),i=Wc(t,_5),s=Wc(e);D.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),l=a().filter(d=>d.selected),c=o.filter(d=>d.selected);r({nodes:l,edges:c}),n.setState({nodesSelectionActive:!1})}},[i]),D.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function x5(t){const e=xt();D.useEffect(()=>{let n;const r=()=>{var s,o;if(!t.current)return;const i=Y0(t.current);(i.height===0||i.width===0)&&((o=(s=e.getState()).onError)==null||o.call(s,"004",hi.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const sy={position:"absolute",width:"100%",height:"100%",top:0,left:0},E5=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ud=t=>({x:t.x,y:t.y,zoom:t.k}),Lo=(t,e)=>t.target.closest(`.${e}`),jw=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Fw=t=>{const e=t.ctrlKey&&Ch()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},b5=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),I5=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Hs.Free,zoomOnDoubleClick:c=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:f,translateExtent:m,minZoom:E,maxZoom:x,zoomActivationKeyCode:N,preventScrolling:y=!0,children:v,noWheelClassName:T,noPanClassName:A})=>{const O=D.useRef(),M=xt(),S=D.useRef(!1),b=D.useRef(!1),w=D.useRef(null),I=D.useRef({x:0,y:0,zoom:0}),{d3Zoom:C,d3Selection:R,d3ZoomHandler:k,userSelectionActive:P}=qe(b5,Vt),$=Wc(N),z=D.useRef(0),F=D.useRef(!1),j=D.useRef();return x5(w),D.useEffect(()=>{if(w.current){const L=w.current.getBoundingClientRect(),B=YI().scaleExtent([E,x]).translateExtent(m),G=An(w.current).call(B),U=si.translate(f.x,f.y).scale(us(f.zoom,E,x)),Y=[[0,0],[L.width,L.height]],X=B.constrain()(U,Y,m);B.transform(G,X),B.wheelDelta(Fw),M.setState({d3Zoom:B,d3Selection:G,d3ZoomHandler:G.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:w.current.closest(".react-flow")})}},[]),D.useEffect(()=>{R&&C&&(o&&!$&&!P?R.on("wheel.zoom",L=>{if(Lo(L,T))return!1;L.preventDefault(),L.stopImmediatePropagation();const B=R.property("__zoom").k||1;if(L.ctrlKey&&s){const de=ar(L),we=Fw(L),_e=B*Math.pow(2,we);C.scaleTo(R,_e,de,L);return}const G=L.deltaMode===1?20:1;let U=l===Hs.Vertical?0:L.deltaX*G,Y=l===Hs.Horizontal?0:L.deltaY*G;!Ch()&&L.shiftKey&&l!==Hs.Vertical&&(U=L.deltaY*G,Y=0),C.translateBy(R,-(U/B)*a,-(Y/B)*a,{internal:!0});const X=ud(R.property("__zoom")),{onViewportChangeStart:ee,onViewportChange:oe,onViewportChangeEnd:he}=M.getState();clearTimeout(j.current),F.current||(F.current=!0,e==null||e(L,X),ee==null||ee(X)),F.current&&(t==null||t(L,X),oe==null||oe(X),j.current=setTimeout(()=>{n==null||n(L,X),he==null||he(X),F.current=!1},150))},{passive:!1}):typeof k<"u"&&R.on("wheel.zoom",function(L,B){if(!y&&L.type==="wheel"&&!L.ctrlKey||Lo(L,T))return null;L.preventDefault(),k.call(this,L,B)},{passive:!1}))},[P,o,l,R,C,k,$,s,y,T,e,t,n]),D.useEffect(()=>{C&&C.on("start",L=>{var U,Y;if(!L.sourceEvent||L.sourceEvent.internal)return null;z.current=(U=L.sourceEvent)==null?void 0:U.button;const{onViewportChangeStart:B}=M.getState(),G=ud(L.transform);S.current=!0,I.current=G,((Y=L.sourceEvent)==null?void 0:Y.type)==="mousedown"&&M.setState({paneDragging:!0}),B==null||B(G),e==null||e(L.sourceEvent,G)})},[C,e]),D.useEffect(()=>{C&&(P&&!S.current?C.on("zoom",null):P||C.on("zoom",L=>{var G;const{onViewportChange:B}=M.getState();if(M.setState({transform:[L.transform.x,L.transform.y,L.transform.k]}),b.current=!!(r&&jw(h,z.current??0)),(t||B)&&!((G=L.sourceEvent)!=null&&G.internal)){const U=ud(L.transform);B==null||B(U),t==null||t(L.sourceEvent,U)}}))},[P,C,t,h,r]),D.useEffect(()=>{C&&C.on("end",L=>{if(!L.sourceEvent||L.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=M.getState();if(S.current=!1,M.setState({paneDragging:!1}),r&&jw(h,z.current??0)&&!b.current&&r(L.sourceEvent),b.current=!1,(n||B)&&E5(I.current,L.transform)){const G=ud(L.transform);I.current=G,clearTimeout(O.current),O.current=setTimeout(()=>{B==null||B(G),n==null||n(L.sourceEvent,G)},o?150:0)}})},[C,o,h,n,r]),D.useEffect(()=>{C&&C.filter(L=>{const B=$||i,G=s&&L.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&L.button===1&&L.type==="mousedown"&&(Lo(L,"react-flow__node")||Lo(L,"react-flow__edge")))return!0;if(!h&&!B&&!o&&!c&&!s||P||!c&&L.type==="dblclick"||Lo(L,T)&&L.type==="wheel"||Lo(L,A)&&(L.type!=="wheel"||o&&L.type==="wheel"&&!$)||!s&&L.ctrlKey&&L.type==="wheel"||!B&&!o&&!G&&L.type==="wheel"||!h&&(L.type==="mousedown"||L.type==="touchstart")||Array.isArray(h)&&!h.includes(L.button)&&L.type==="mousedown")return!1;const U=Array.isArray(h)&&h.includes(L.button)||!L.button||L.button<=1;return(!L.ctrlKey||L.type==="wheel")&&U})},[P,C,i,s,o,c,h,d,$]),K.createElement("div",{className:"react-flow__renderer",ref:w,style:sy},v)},T5=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function S5(){const{userSelectionActive:t,userSelectionRect:e}=qe(T5,Vt);return t&&e?K.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function $w(t,e){const n=e.parentNode||e.parentId,r=t.find(i=>i.id===n);if(r){const i=e.position.x+e.width-r.width,s=e.position.y+e.height-r.height;if(i>0||s>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),e.position.x<0){const o=Math.abs(e.position.x);r.position.x=r.position.x-o,r.style.width+=o,e.position.x=0}if(e.position.y<0){const o=Math.abs(e.position.y);r.position.y=r.position.y-o,r.style.height+=o,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function kT(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const s=t.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&$w(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&$w(r,o);break}case"remove":return r}return r.push(o),r},n)}function RT(t,e){return kT(t,e)}function C5(t,e){return kT(t,e)}const Mi=(t,e)=>({id:t,type:"select",selected:e});function ua(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Mi(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Mi(r.id,!1))),n},[])}const Op=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},A5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),NT=D.memo(({isSelecting:t,selectionMode:e=Kc.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:d,children:h})=>{const f=D.useRef(null),m=xt(),E=D.useRef(0),x=D.useRef(0),N=D.useRef(),{userSelectionActive:y,elementsSelectable:v,dragging:T}=qe(A5,Vt),A=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),E.current=0,x.current=0},O=k=>{s==null||s(k),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},M=k=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){k.preventDefault();return}o==null||o(k)},S=a?k=>a(k):void 0,b=k=>{const{resetSelectedElements:P,domNode:$}=m.getState();if(N.current=$==null?void 0:$.getBoundingClientRect(),!v||!t||k.button!==0||k.target!==f.current||!N.current)return;const{x:z,y:F}=ns(k,N.current);P(),m.setState({userSelectionRect:{width:0,height:0,startX:z,startY:F,x:z,y:F}}),r==null||r(k)},w=k=>{const{userSelectionRect:P,nodeInternals:$,edges:z,transform:F,onNodesChange:j,onEdgesChange:L,nodeOrigin:B,getNodes:G}=m.getState();if(!t||!N.current||!P)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=ns(k,N.current),Y=P.startX??0,X=P.startY??0,ee={...P,x:U.x<Y?U.x:Y,y:U.y<X?U.y:X,width:Math.abs(U.x-Y),height:Math.abs(U.y-X)},oe=G(),he=dT($,ee,F,e===Kc.Partial,!0,B),de=hT(he,z).map(_e=>_e.id),we=he.map(_e=>_e.id);if(E.current!==we.length){E.current=we.length;const _e=ua(oe,we);_e.length&&(j==null||j(_e))}if(x.current!==de.length){x.current=de.length;const _e=ua(z,de);_e.length&&(L==null||L(_e))}m.setState({userSelectionRect:ee})},I=k=>{if(k.button!==0)return;const{userSelectionRect:P}=m.getState();!y&&P&&k.target===f.current&&(O==null||O(k)),m.setState({nodesSelectionActive:E.current>0}),A(),i==null||i(k)},C=k=>{y&&(m.setState({nodesSelectionActive:E.current>0}),i==null||i(k)),A()},R=v&&(t||y);return K.createElement("div",{className:zt(["react-flow__pane",{dragging:T,selection:t}]),onClick:R?void 0:Op(O,f),onContextMenu:Op(M,f),onWheel:Op(S,f),onMouseEnter:R?void 0:l,onMouseDown:R?b:void 0,onMouseMove:R?w:c,onMouseUp:R?I:void 0,onMouseLeave:R?C:d,ref:f,style:sy},h,K.createElement(S5,null))});NT.displayName="Pane";function PT(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:PT(r,e):!1}function Uw(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function k5(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!PT(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function R5(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function DT(t,e,n,r,i=[0,0],s){const o=R5(t,t.extent||r);let a=o;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=n.get(l),{x:f,y:m}=Xs(h,i).positionAbsolute;a=h&&Gn(f)&&Gn(m)&&Gn(h.width)&&Gn(h.height)?[[f+t.width*i[0],m+t.height*i[1]],[f+h.width-t.width+t.width*i[0],m+h.height-t.height+t.height*i[1]]]:a}else s==null||s("005",hi.error005()),a=o;else if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:f,y:m}=Xs(h,i).positionAbsolute;a=[[t.extent[0][0]+f,t.extent[0][1]+m],[t.extent[1][0]+f,t.extent[1][1]+m]]}let c={x:0,y:0};if(l){const h=n.get(l);c=Xs(h,i).positionAbsolute}const d=a&&a!=="parent"?X0(e,a):e;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function zp({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const Bw=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const s=Array.from(i),o=e.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-o.left-a.x)/n,y:(c.top-o.top-a.y)/n,...Y0(l)}})};function Ll(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function hg({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:l}=e.getState(),c=a.get(t);if(!c){l==null||l("012",hi.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&o)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):i([t])}function VT(){const t=xt();return D.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=t.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:s?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function Mp(t){return(e,n,r)=>t==null?void 0:t(e,r)}function OT({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=xt(),[l,c]=D.useState(!1),d=D.useRef([]),h=D.useRef({x:null,y:null}),f=D.useRef(0),m=D.useRef(null),E=D.useRef({x:0,y:0}),x=D.useRef(null),N=D.useRef(!1),y=D.useRef(!1),v=D.useRef(!1),T=VT();return D.useEffect(()=>{if(t!=null&&t.current){const A=An(t.current),O=({x:b,y:w})=>{const{nodeInternals:I,onNodeDrag:C,onSelectionDrag:R,updateNodePositions:k,nodeExtent:P,snapGrid:$,snapToGrid:z,nodeOrigin:F,onError:j}=a.getState();h.current={x:b,y:w};let L=!1,B={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&P){const U=mu(d.current,F);B=Hc(U)}if(d.current=d.current.map(U=>{const Y={x:b-U.distance.x,y:w-U.distance.y};z&&(Y.x=$[0]*Math.round(Y.x/$[0]),Y.y=$[1]*Math.round(Y.y/$[1]));const X=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];d.current.length>1&&P&&!U.extent&&(X[0][0]=U.positionAbsolute.x-B.x+P[0][0],X[1][0]=U.positionAbsolute.x+(U.width??0)-B.x2+P[1][0],X[0][1]=U.positionAbsolute.y-B.y+P[0][1],X[1][1]=U.positionAbsolute.y+(U.height??0)-B.y2+P[1][1]);const ee=DT(U,Y,I,X,F,j);return L=L||U.position.x!==ee.position.x||U.position.y!==ee.position.y,U.position=ee.position,U.positionAbsolute=ee.positionAbsolute,U}),!L)return;k(d.current,!0,!0),c(!0);const G=i?C:Mp(R);if(G&&x.current){const[U,Y]=zp({nodeId:i,dragItems:d.current,nodeInternals:I});G(x.current,U,Y)}},M=()=>{if(!m.current)return;const[b,w]=JI(E.current,m.current);if(b!==0||w!==0){const{transform:I,panBy:C}=a.getState();h.current.x=(h.current.x??0)-b/I[2],h.current.y=(h.current.y??0)-w/I[2],C({x:b,y:w})&&O(h.current)}f.current=requestAnimationFrame(M)},S=b=>{var F;const{nodeInternals:w,multiSelectionActive:I,nodesDraggable:C,unselectNodesAndEdges:R,onNodeDragStart:k,onSelectionDragStart:P}=a.getState();y.current=!0;const $=i?k:Mp(P);(!o||!s)&&!I&&i&&((F=w.get(i))!=null&&F.selected||R()),i&&s&&o&&hg({id:i,store:a,nodeRef:t});const z=T(b);if(h.current=z,d.current=k5(w,C,z,i),$&&d.current){const[j,L]=zp({nodeId:i,dragItems:d.current,nodeInternals:w});$(b.sourceEvent,j,L)}};if(e)A.on(".drag",null);else{const b=zI().on("start",w=>{const{domNode:I,nodeDragThreshold:C}=a.getState();C===0&&S(w),v.current=!1;const R=T(w);h.current=R,m.current=(I==null?void 0:I.getBoundingClientRect())||null,E.current=ns(w.sourceEvent,m.current)}).on("drag",w=>{var k,P;const I=T(w),{autoPanOnNodeDrag:C,nodeDragThreshold:R}=a.getState();if(w.sourceEvent.type==="touchmove"&&w.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!N.current&&y.current&&C&&(N.current=!0,M()),!y.current){const $=I.xSnapped-(((k=h==null?void 0:h.current)==null?void 0:k.x)??0),z=I.ySnapped-(((P=h==null?void 0:h.current)==null?void 0:P.y)??0);Math.sqrt($*$+z*z)>R&&S(w)}(h.current.x!==I.xSnapped||h.current.y!==I.ySnapped)&&d.current&&y.current&&(x.current=w.sourceEvent,E.current=ns(w.sourceEvent,m.current),O(I))}}).on("end",w=>{if(!(!y.current||v.current)&&(c(!1),N.current=!1,y.current=!1,cancelAnimationFrame(f.current),d.current)){const{updateNodePositions:I,nodeInternals:C,onNodeDragStop:R,onSelectionDragStop:k}=a.getState(),P=i?R:Mp(k);if(I(d.current,!1,!1),P){const[$,z]=zp({nodeId:i,dragItems:d.current,nodeInternals:C});P(w.sourceEvent,$,z)}}}).filter(w=>{const I=w.target;return!w.button&&(!n||!Uw(I,`.${n}`,t))&&(!r||Uw(I,r,t))});return A.call(b),()=>{A.on(".drag",null)}}}},[t,e,n,r,s,a,i,o,T]),l}function zT(){const t=xt();return D.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:l,onError:c,nodesDraggable:d}=t.getState(),h=o().filter(v=>v.selected&&(v.draggable||d&&typeof v.draggable>"u")),f=a?l[0]:5,m=a?l[1]:5,E=n.isShiftPressed?4:1,x=n.x*f*E,N=n.y*m*E,y=h.map(v=>{if(v.positionAbsolute){const T={x:v.positionAbsolute.x+x,y:v.positionAbsolute.y+N};a&&(T.x=l[0]*Math.round(T.x/l[0]),T.y=l[1]*Math.round(T.y/l[1]));const{positionAbsolute:A,position:O}=DT(v,T,r,i,void 0,c);v.position=O,v.positionAbsolute=A}return v});s(y,!0,!1)},[])}const _a={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var jl=t=>{const e=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:l,selected:c,onClick:d,onMouseEnter:h,onMouseMove:f,onMouseLeave:m,onContextMenu:E,onDoubleClick:x,style:N,className:y,isDraggable:v,isSelectable:T,isConnectable:A,isFocusable:O,selectNodesOnDrag:M,sourcePosition:S,targetPosition:b,hidden:w,resizeObserver:I,dragHandle:C,zIndex:R,isParent:k,noDragClassName:P,noPanClassName:$,initialized:z,disableKeyboardA11y:F,ariaLabel:j,rfId:L,hasHandleBounds:B})=>{const G=xt(),U=D.useRef(null),Y=D.useRef(null),X=D.useRef(S),ee=D.useRef(b),oe=D.useRef(r),he=T||v||d||h||f||m,de=zT(),we=Ll(n,G.getState,h),_e=Ll(n,G.getState,f),ye=Ll(n,G.getState,m),$e=Ll(n,G.getState,E),be=Ll(n,G.getState,x),Ge=Se=>{const{nodeDragThreshold:ie}=G.getState();if(T&&(!M||!v||ie>0)&&hg({id:n,store:G,nodeRef:U}),d){const xe=G.getState().nodeInternals.get(n);xe&&d(Se,{...xe})}},ze=Se=>{if(!lg(Se)&&!F)if(nT.includes(Se.key)&&T){const ie=Se.key==="Escape";hg({id:n,store:G,unselect:ie,nodeRef:U})}else v&&c&&Object.prototype.hasOwnProperty.call(_a,Se.key)&&(G.setState({ariaLiveMessage:`Moved selected node ${Se.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),de({x:_a[Se.key].x,y:_a[Se.key].y,isShiftPressed:Se.shiftKey}))};D.useEffect(()=>()=>{Y.current&&(I==null||I.unobserve(Y.current),Y.current=null)},[]),D.useEffect(()=>{if(U.current&&!w){const Se=U.current;(!z||!B||Y.current!==Se)&&(Y.current&&(I==null||I.unobserve(Y.current)),I==null||I.observe(Se),Y.current=Se)}},[w,z,B]),D.useEffect(()=>{const Se=oe.current!==r,ie=X.current!==S,xe=ee.current!==b;U.current&&(Se||ie||xe)&&(Se&&(oe.current=r),ie&&(X.current=S),xe&&(ee.current=b),G.getState().updateNodeDimensions([{id:n,nodeElement:U.current,forceUpdate:!0}]))},[n,r,S,b]);const dt=OT({nodeRef:U,disabled:w||!v,noDragClassName:P,handleSelector:C,nodeId:n,isSelectable:T,selectNodesOnDrag:M});return w?null:K.createElement("div",{className:zt(["react-flow__node",`react-flow__node-${r}`,{[$]:v},y,{selected:c,selectable:T,parent:k,dragging:dt}]),ref:U,style:{zIndex:R,transform:`translate(${a}px,${l}px)`,pointerEvents:he?"all":"none",visibility:z?"visible":"hidden",...N},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:we,onMouseMove:_e,onMouseLeave:ye,onContextMenu:$e,onClick:Ge,onDoubleClick:be,onKeyDown:O?ze:void 0,tabIndex:O?0:void 0,role:O?"button":void 0,"aria-describedby":F?void 0:`${IT}-${L}`,"aria-label":j},K.createElement(G4,{value:n},K.createElement(t,{id:n,data:i,type:r,xPos:s,yPos:o,selected:c,isConnectable:A,sourcePosition:S,targetPosition:b,dragging:dt,dragHandle:C,zIndex:R})))};return e.displayName="NodeWrapper",D.memo(e)};const N5=t=>{const e=t.getNodes().filter(n=>n.selected);return{...mu(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function P5({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=xt(),{width:i,height:s,x:o,y:a,transformString:l,userSelectionActive:c}=qe(N5,Vt),d=zT(),h=D.useRef(null);if(D.useEffect(()=>{var E;n||(E=h.current)==null||E.focus({preventScroll:!0})},[n]),OT({nodeRef:h}),c||!i||!s)return null;const f=t?E=>{const x=r.getState().getNodes().filter(N=>N.selected);t(E,x)}:void 0,m=E=>{Object.prototype.hasOwnProperty.call(_a,E.key)&&d({x:_a[E.key].x,y:_a[E.key].y,isShiftPressed:E.shiftKey})};return K.createElement("div",{className:zt(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},K.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:i,height:s,top:a,left:o}}))}var D5=D.memo(P5);const V5=t=>t.nodesSelectionActive,MT=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:l,onMoveStart:c,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:f,selectionMode:m,onSelectionStart:E,onSelectionEnd:x,multiSelectionKeyCode:N,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:T,zoomOnScroll:A,zoomOnPinch:O,panOnScroll:M,panOnScrollSpeed:S,panOnScrollMode:b,zoomOnDoubleClick:w,panOnDrag:I,defaultViewport:C,translateExtent:R,minZoom:k,maxZoom:P,preventScrolling:$,onSelectionContextMenu:z,noWheelClassName:F,noPanClassName:j,disableKeyboardA11y:L})=>{const B=qe(V5),G=Wc(h),U=Wc(y),Y=U||I,X=U||M,ee=G||f&&Y!==!0;return w5({deleteKeyCode:a,multiSelectionKeyCode:N}),K.createElement(I5,{onMove:l,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:T,zoomOnScroll:A,zoomOnPinch:O,panOnScroll:X,panOnScrollSpeed:S,panOnScrollMode:b,zoomOnDoubleClick:w,panOnDrag:!G&&Y,defaultViewport:C,translateExtent:R,minZoom:k,maxZoom:P,zoomActivationKeyCode:v,preventScrolling:$,noWheelClassName:F,noPanClassName:j},K.createElement(NT,{onSelectionStart:E,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:Y,isSelecting:!!ee,selectionMode:m},t,B&&K.createElement(D5,{onSelectionContextMenu:z,noPanClassName:j,disableKeyboardA11y:L})))};MT.displayName="FlowRenderer";var O5=D.memo(MT);function z5(t){return qe(D.useCallback(n=>t?dT(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function M5(t){const e={input:jl(t.input||wT),default:jl(t.default||dg),output:jl(t.output||ET),group:jl(t.group||iy)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=jl(t[s]||dg),i),n);return{...e,...r}}const L5=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},j5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),LT=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=qe(j5,Vt),a=z5(t.onlyRenderVisibleElements),l=D.useRef(),c=D.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const f=h.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(f)});return l.current=d,d},[]);return D.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),K.createElement("div",{className:"react-flow__nodes",style:sy},a.map(d=>{var O,M,S;let h=d.type||"default";t.nodeTypes[h]||(o==null||o("003",hi.error003(h)),h="default");const f=t.nodeTypes[h]||t.nodeTypes.default,m=!!(d.draggable||e&&typeof d.draggable>"u"),E=!!(d.selectable||i&&typeof d.selectable>"u"),x=!!(d.connectable||n&&typeof d.connectable>"u"),N=!!(d.focusable||r&&typeof d.focusable>"u"),y=t.nodeExtent?X0(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,v=(y==null?void 0:y.x)??0,T=(y==null?void 0:y.y)??0,A=L5({x:v,y:T,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return K.createElement(f,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||le.Bottom,targetPosition:d.targetPosition||le.Top,hidden:d.hidden,xPos:v,yPos:T,xPosOrigin:A.x,yPosOrigin:A.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:E,isConnectable:x,isFocusable:N,resizeObserver:c,dragHandle:d.dragHandle,zIndex:((O=d[ut])==null?void 0:O.z)??0,isParent:!!((M=d[ut])!=null&&M.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((S=d[ut])!=null&&S.handleBounds)})}))};LT.displayName="NodeRenderer";var F5=D.memo(LT);const $5=(t,e,n)=>n===le.Left?t-e:n===le.Right?t+e:t,U5=(t,e,n)=>n===le.Top?t-e:n===le.Bottom?t+e:t,qw="react-flow__edgeupdater",Hw=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>K.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:zt([qw,`${qw}-${a}`]),cx:$5(e,r,t),cy:U5(n,r,t),r,stroke:"transparent",fill:"transparent"}),B5=()=>!0;var jo=t=>{const e=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:l,animated:c,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:E,labelBgBorderRadius:x,style:N,source:y,target:v,sourceX:T,sourceY:A,targetX:O,targetY:M,sourcePosition:S,targetPosition:b,elementsSelectable:w,hidden:I,sourceHandleId:C,targetHandleId:R,onContextMenu:k,onMouseEnter:P,onMouseMove:$,onMouseLeave:z,reconnectRadius:F,onReconnect:j,onReconnectStart:L,onReconnectEnd:B,markerEnd:G,markerStart:U,rfId:Y,ariaLabel:X,isFocusable:ee,isReconnectable:oe,pathOptions:he,interactionWidth:de,disableKeyboardA11y:we})=>{const _e=D.useRef(null),[ye,$e]=D.useState(!1),[be,Ge]=D.useState(!1),ze=xt(),dt=D.useMemo(()=>`url('#${cg(U,Y)}')`,[U,Y]),Se=D.useMemo(()=>`url('#${cg(G,Y)}')`,[G,Y]);if(I)return null;const ie=ht=>{var ft;const{edges:vt,addSelectedEdges:Fn,unselectNodesAndEdges:$n,multiSelectionActive:xn}=ze.getState(),En=vt.find(bn=>bn.id===n);En&&(w&&(ze.setState({nodesSelectionActive:!1}),En.selected&&xn?($n({nodes:[],edges:[En]}),(ft=_e.current)==null||ft.blur()):Fn([n])),o&&o(ht,En))},xe=Ml(n,ze.getState,a),yt=Ml(n,ze.getState,k),Et=Ml(n,ze.getState,P),Jt=Ml(n,ze.getState,$),Zt=Ml(n,ze.getState,z),Bt=(ht,vt)=>{if(ht.button!==0)return;const{edges:Fn,isValidConnection:$n}=ze.getState(),xn=vt?v:y,En=(vt?R:C)||null,ft=vt?"target":"source",bn=$n||B5,_i=vt,et=Fn.find(In=>In.id===n);Ge(!0),L==null||L(ht,et,ft);const Un=In=>{Ge(!1),B==null||B(In,et,ft)};gT({event:ht,handleId:En,nodeId:xn,onConnect:In=>j==null?void 0:j(et,In),isTarget:_i,getState:ze.getState,setState:ze.setState,isValidConnection:bn,edgeUpdaterType:ft,onReconnectEnd:Un})},bt=ht=>Bt(ht,!0),Ve=ht=>Bt(ht,!1),Me=()=>$e(!0),kt=()=>$e(!1),Xe=!w&&!o,er=ht=>{var vt;if(!we&&nT.includes(ht.key)&&w){const{unselectNodesAndEdges:Fn,addSelectedEdges:$n,edges:xn}=ze.getState();ht.key==="Escape"?((vt=_e.current)==null||vt.blur(),Fn({edges:[xn.find(ft=>ft.id===n)]})):$n([n])}};return K.createElement("g",{className:zt(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:c,inactive:Xe,updating:ye}]),onClick:ie,onDoubleClick:xe,onContextMenu:yt,onMouseEnter:Et,onMouseMove:Jt,onMouseLeave:Zt,onKeyDown:ee?er:void 0,tabIndex:ee?0:void 0,role:ee?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":X===null?void 0:X||`Edge from ${y} to ${v}`,"aria-describedby":ee?`${TT}-${Y}`:void 0,ref:_e},!be&&K.createElement(t,{id:n,source:y,target:v,selected:l,animated:c,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:E,labelBgBorderRadius:x,data:s,style:N,sourceX:T,sourceY:A,targetX:O,targetY:M,sourcePosition:S,targetPosition:b,sourceHandleId:C,targetHandleId:R,markerStart:dt,markerEnd:Se,pathOptions:he,interactionWidth:de}),oe&&K.createElement(K.Fragment,null,(oe==="source"||oe===!0)&&K.createElement(Hw,{position:S,centerX:T,centerY:A,radius:F,onMouseDown:bt,onMouseEnter:Me,onMouseOut:kt,type:"source"}),(oe==="target"||oe===!0)&&K.createElement(Hw,{position:b,centerX:O,centerY:M,radius:F,onMouseDown:Ve,onMouseEnter:Me,onMouseOut:kt,type:"target"})))};return e.displayName="EdgeWrapper",D.memo(e)};function q5(t){const e={default:jo(t.default||kh),straight:jo(t.bezier||ey),step:jo(t.step||Z0),smoothstep:jo(t.step||If),simplebezier:jo(t.simplebezier||J0)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=jo(t[s]||kh),i),n);return{...e,...r}}function Kw(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,o=(n==null?void 0:n.height)||e.height;switch(t){case le.Top:return{x:r+s/2,y:i};case le.Right:return{x:r+s,y:i+o/2};case le.Bottom:return{x:r+s/2,y:i+o};case le.Left:return{x:r,y:i+o/2}}}function Gw(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const H5=(t,e,n,r,i,s)=>{const o=Kw(n,t,e),a=Kw(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function K5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:l}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=Hc({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:a/l[2]}),h=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),f=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(h*f)>0}function Ww(t){var r,i,s,o,a;const e=((r=t==null?void 0:t[ut])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const G5=[{level:0,isMaxLevel:!0,edges:[]}];function W5(t,e,n=!1){let r=-1;const i=t.reduce((o,a)=>{var d,h;const l=Gn(a.zIndex);let c=l?a.zIndex:0;if(n){const f=e.get(a.target),m=e.get(a.source),E=a.selected||(f==null?void 0:f.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[ut])==null?void 0:d.z)||0,((h=f==null?void 0:f[ut])==null?void 0:h.z)||0,1e3);c=(l?a.zIndex:0)+(E?x:0)}return o[c]?o[c].push(a):o[c]=[a],r=c>r?c:r,o},{}),s=Object.entries(i).map(([o,a])=>{const l=+o;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?G5:s}function Q5(t,e,n){const r=qe(D.useCallback(i=>t?i.edges.filter(s=>{const o=e.get(s.source),a=e.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&K5({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return W5(r,e,n)}const Y5=({color:t="none",strokeWidth:e=1})=>K.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),X5=({color:t="none",strokeWidth:e=1})=>K.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Qw={[Ah.Arrow]:Y5,[Ah.ArrowClosed]:X5};function J5(t){const e=xt();return D.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(Qw,t)?Qw[t]:((s=(i=e.getState()).onError)==null||s.call(i,"009",hi.error009(t)),null)},[t])}const Z5=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=J5(e);return l?K.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},K.createElement(l,{color:n,strokeWidth:o})):null},eO=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=cg(o,e);r.includes(a)||(i.push({id:a,color:o.color||t,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},jT=({defaultColor:t,rfId:e})=>{const n=qe(D.useCallback(eO({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return K.createElement("defs",null,n.map(r=>K.createElement(Z5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};jT.displayName="MarkerDefinitions";var tO=D.memo(jT);const nO=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),FT=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:E,reconnectRadius:x,children:N,disableKeyboardA11y:y})=>{const{edgesFocusable:v,edgesUpdatable:T,elementsSelectable:A,width:O,height:M,connectionMode:S,nodeInternals:b,onError:w}=qe(nO,Vt),I=Q5(e,b,n);return O?K.createElement(K.Fragment,null,I.map(({level:C,edges:R,isMaxLevel:k})=>K.createElement("svg",{key:C,style:{zIndex:C},width:O,height:M,className:"react-flow__edges react-flow__container"},k&&K.createElement(tO,{defaultColor:t,rfId:r}),K.createElement("g",null,R.map(P=>{const[$,z,F]=Ww(b.get(P.source)),[j,L,B]=Ww(b.get(P.target));if(!F||!B)return null;let G=P.type||"default";i[G]||(w==null||w("011",hi.error011(G)),G="default");const U=i[G]||i.default,Y=S===oo.Strict?L.target:(L.target??[]).concat(L.source??[]),X=Gw(z.source,P.sourceHandle),ee=Gw(Y,P.targetHandle),oe=(X==null?void 0:X.position)||le.Bottom,he=(ee==null?void 0:ee.position)||le.Top,de=!!(P.focusable||v&&typeof P.focusable>"u"),we=P.reconnectable||P.updatable,_e=typeof f<"u"&&(we||T&&typeof we>"u");if(!X||!ee)return w==null||w("008",hi.error008(X,P)),null;const{sourceX:ye,sourceY:$e,targetX:be,targetY:Ge}=H5($,X,oe,j,ee,he);return K.createElement(U,{key:P.id,id:P.id,className:zt([P.className,s]),type:G,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:ye,sourceY:$e,targetX:be,targetY:Ge,sourcePosition:oe,targetPosition:he,elementsSelectable:A,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:E,reconnectRadius:x,rfId:r,ariaLabel:P.ariaLabel,isFocusable:de,isReconnectable:_e,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:y})})))),N):null};FT.displayName="EdgeRenderer";var rO=D.memo(FT);const iO=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function sO({children:t}){const e=qe(iO);return K.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function oO(t){const e=zr(),n=D.useRef(!1);D.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const aO={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},$T=({nodeId:t,handleType:e,style:n,type:r=Fi.Bezier,CustomComponent:i,connectionStatus:s})=>{var M,S,b;const{fromNode:o,handleId:a,toX:l,toY:c,connectionMode:d}=qe(D.useCallback(w=>({fromNode:w.nodeInternals.get(t),handleId:w.connectionHandleId,toX:(w.connectionPosition.x-w.transform[0])/w.transform[2],toY:(w.connectionPosition.y-w.transform[1])/w.transform[2],connectionMode:w.connectionMode}),[t]),Vt),h=(M=o==null?void 0:o[ut])==null?void 0:M.handleBounds;let f=h==null?void 0:h[e];if(d===oo.Loose&&(f=f||(h==null?void 0:h[e==="source"?"target":"source"])),!o||!f)return null;const m=a?f.find(w=>w.id===a):f[0],E=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,N=(((S=o.positionAbsolute)==null?void 0:S.x)??0)+E,y=(((b=o.positionAbsolute)==null?void 0:b.y)??0)+x,v=m==null?void 0:m.position,T=v?aO[v]:null;if(!v||!T)return null;if(i)return K.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:m,fromX:N,fromY:y,toX:l,toY:c,fromPosition:v,toPosition:T,connectionStatus:s});let A="";const O={sourceX:N,sourceY:y,sourcePosition:v,targetX:l,targetY:c,targetPosition:T};return r===Fi.Bezier?[A]=ty(O):r===Fi.Step?[A]=Gc({...O,borderRadius:0}):r===Fi.SmoothStep?[A]=Gc(O):r===Fi.SimpleBezier?[A]=oT(O):A=`M${N},${y} ${l},${c}`,K.createElement("path",{d:A,fill:"none",className:"react-flow__connection-path",style:n})};$T.displayName="ConnectionLine";const lO=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function cO({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:l,connectionStatus:c}=qe(lO,Vt);return!(i&&s&&a&&o)?null:K.createElement("svg",{style:t,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},K.createElement("g",{className:zt(["react-flow__connection",c])},K.createElement($T,{nodeId:i,handleType:s,style:e,type:n,CustomComponent:r,connectionStatus:c})))}function Yw(t,e){return D.useRef(null),xt(),D.useMemo(()=>e(t),[t])}const UT=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:E,onSelectionStart:x,onSelectionEnd:N,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:T,connectionLineContainerStyle:A,selectionKeyCode:O,selectionOnDrag:M,selectionMode:S,multiSelectionKeyCode:b,panActivationKeyCode:w,zoomActivationKeyCode:I,deleteKeyCode:C,onlyRenderVisibleElements:R,elementsSelectable:k,selectNodesOnDrag:P,defaultViewport:$,translateExtent:z,minZoom:F,maxZoom:j,preventScrolling:L,defaultMarkerColor:B,zoomOnScroll:G,zoomOnPinch:U,panOnScroll:Y,panOnScrollSpeed:X,panOnScrollMode:ee,zoomOnDoubleClick:oe,panOnDrag:he,onPaneClick:de,onPaneMouseEnter:we,onPaneMouseMove:_e,onPaneMouseLeave:ye,onPaneScroll:$e,onPaneContextMenu:be,onEdgeContextMenu:Ge,onEdgeMouseEnter:ze,onEdgeMouseMove:dt,onEdgeMouseLeave:Se,onReconnect:ie,onReconnectStart:xe,onReconnectEnd:yt,reconnectRadius:Et,noDragClassName:Jt,noWheelClassName:Zt,noPanClassName:Bt,elevateEdgesOnSelect:bt,disableKeyboardA11y:Ve,nodeOrigin:Me,nodeExtent:kt,rfId:Xe})=>{const er=Yw(t,M5),ht=Yw(e,q5);return oO(s),K.createElement(O5,{onPaneClick:de,onPaneMouseEnter:we,onPaneMouseMove:_e,onPaneMouseLeave:ye,onPaneContextMenu:be,onPaneScroll:$e,deleteKeyCode:C,selectionKeyCode:O,selectionOnDrag:M,selectionMode:S,onSelectionStart:x,onSelectionEnd:N,multiSelectionKeyCode:b,panActivationKeyCode:w,zoomActivationKeyCode:I,elementsSelectable:k,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:G,zoomOnPinch:U,zoomOnDoubleClick:oe,panOnScroll:Y,panOnScrollSpeed:X,panOnScrollMode:ee,panOnDrag:he,defaultViewport:$,translateExtent:z,minZoom:F,maxZoom:j,onSelectionContextMenu:E,preventScrolling:L,noDragClassName:Jt,noWheelClassName:Zt,noPanClassName:Bt,disableKeyboardA11y:Ve},K.createElement(sO,null,K.createElement(rO,{edgeTypes:ht,onEdgeClick:a,onEdgeDoubleClick:c,onlyRenderVisibleElements:R,onEdgeContextMenu:Ge,onEdgeMouseEnter:ze,onEdgeMouseMove:dt,onEdgeMouseLeave:Se,onReconnect:ie,onReconnectStart:xe,onReconnectEnd:yt,reconnectRadius:Et,defaultMarkerColor:B,noPanClassName:Bt,elevateEdgesOnSelect:!!bt,disableKeyboardA11y:Ve,rfId:Xe},K.createElement(cO,{style:v,type:y,component:T,containerStyle:A})),K.createElement("div",{className:"react-flow__edgelabel-renderer"}),K.createElement(F5,{nodeTypes:er,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:P,onlyRenderVisibleElements:R,noPanClassName:Bt,noDragClassName:Jt,disableKeyboardA11y:Ve,nodeOrigin:Me,nodeExtent:kt,rfId:Xe})))};UT.displayName="GraphView";var uO=D.memo(UT);const fg=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ri={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:fg,nodeExtent:fg,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:oo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:U4,isValidConnection:void 0},dO=()=>iP((t,e)=>({...Ri,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=e();t({nodeInternals:Vp(n,r,i,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?Vp(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:l,nodeOrigin:c}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:f}=new window.DOMMatrixReadOnly(h.transform),m=n.reduce((x,N)=>{const y=i.get(N.id);if(y!=null&&y.hidden)i.set(y.id,{...y,[ut]:{...y[ut],handleBounds:void 0}});else if(y){const v=Y0(N.nodeElement);!!(v.width&&v.height&&(y.width!==v.width||y.height!==v.height||N.forceUpdate))&&(i.set(y.id,{...y,[ut]:{...y[ut],handleBounds:{source:Bw(".source",N.nodeElement,f,c),target:Bw(".target",N.nodeElement,f,c)}},...v}),x.push({id:y.id,type:"dimensions",dimensions:v}))}return x},[]);CT(i,c);const E=o||s&&!o&&AT(e,{initial:!0,...a});t({nodeInternals:new Map(i),fitViewOnInitDone:E}),(m==null?void 0:m.length)>0&&(r==null||r(m))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=e(),o=n.map(a=>{const l={id:a.id,type:"position",dragging:i};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const c=RT(n,a()),d=Vp(c,i,o,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(l=>Mi(l,!0)):(o=ua(s(),n),a=ua(i,[])),cd({changedNodes:o,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(l=>Mi(l,!0)):(o=ua(i,n),a=ua(s(),[])),cd({changedNodes:a,changedEdges:o,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=e(),o=n||s(),a=r||i,l=o.map(d=>(d.selected=!1,Mi(d.id,!1))),c=a.map(d=>Mi(d.id,!1));cd({changedNodes:l,changedEdges:c,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),s=r().filter(a=>a.selected).map(a=>Mi(a.id,!1)),o=n.filter(a=>a.selected).map(a=>Mi(a.id,!1));cd({changedNodes:s,changedEdges:o,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=X0(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:l}=e();if(!o||!a||!n.x&&!n.y)return!1;const c=si.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[i,s]],h=o==null?void 0:o.constrain()(c,d,l);return o.transform(a,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Ri.connectionNodeId,connectionHandleId:Ri.connectionHandleId,connectionHandleType:Ri.connectionHandleType,connectionStatus:Ri.connectionStatus,connectionStartHandle:Ri.connectionStartHandle,connectionEndHandle:Ri.connectionEndHandle}),reset:()=>t({...Ri})}),Object.is),oy=({children:t})=>{const e=D.useRef(null);return e.current||(e.current=dO()),K.createElement(O4,{value:e.current},t)};oy.displayName="ReactFlowProvider";const BT=({children:t})=>D.useContext(bf)?K.createElement(K.Fragment,null,t):K.createElement(oy,null,t);BT.displayName="ReactFlowWrapper";const hO={input:wT,default:dg,output:ET,group:iy},fO={default:kh,straight:ey,step:Z0,smoothstep:If,simplebezier:J0},pO=[0,0],mO=[15,15],gO={x:0,y:0,zoom:1},yO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},qT=D.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=hO,edgeTypes:o=fO,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:h,onMoveEnd:f,onConnect:m,onConnectStart:E,onConnectEnd:x,onClickConnectStart:N,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:T,onNodeMouseLeave:A,onNodeContextMenu:O,onNodeDoubleClick:M,onNodeDragStart:S,onNodeDrag:b,onNodeDragStop:w,onNodesDelete:I,onEdgesDelete:C,onSelectionChange:R,onSelectionDragStart:k,onSelectionDrag:P,onSelectionDragStop:$,onSelectionContextMenu:z,onSelectionStart:F,onSelectionEnd:j,connectionMode:L=oo.Strict,connectionLineType:B=Fi.Bezier,connectionLineStyle:G,connectionLineComponent:U,connectionLineContainerStyle:Y,deleteKeyCode:X="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:oe=!1,selectionMode:he=Kc.Full,panActivationKeyCode:de="Space",multiSelectionKeyCode:we=Ch()?"Meta":"Control",zoomActivationKeyCode:_e=Ch()?"Meta":"Control",snapToGrid:ye=!1,snapGrid:$e=mO,onlyRenderVisibleElements:be=!1,selectNodesOnDrag:Ge=!0,nodesDraggable:ze,nodesConnectable:dt,nodesFocusable:Se,nodeOrigin:ie=pO,edgesFocusable:xe,edgesUpdatable:yt,elementsSelectable:Et,defaultViewport:Jt=gO,minZoom:Zt=.5,maxZoom:Bt=2,translateExtent:bt=fg,preventScrolling:Ve=!0,nodeExtent:Me,defaultMarkerColor:kt="#b1b1b7",zoomOnScroll:Xe=!0,zoomOnPinch:er=!0,panOnScroll:ht=!1,panOnScrollSpeed:vt=.5,panOnScrollMode:Fn=Hs.Free,zoomOnDoubleClick:$n=!0,panOnDrag:xn=!0,onPaneClick:En,onPaneMouseEnter:ft,onPaneMouseMove:bn,onPaneMouseLeave:_i,onPaneScroll:et,onPaneContextMenu:Un,children:Lr,onEdgeContextMenu:In,onEdgeDoubleClick:tr,onEdgeMouseEnter:To,onEdgeMouseMove:wi,onEdgeMouseLeave:So,onEdgeUpdate:jr,onEdgeUpdateStart:Co,onEdgeUpdateEnd:It,onReconnect:Ao,onReconnectStart:Fr,onReconnectEnd:_r,reconnectRadius:fl=10,edgeUpdaterRadius:pl=10,onNodesChange:wr,onEdgesChange:ml,noDragClassName:xr="nodrag",noWheelClassName:xi="nowheel",noPanClassName:bs="nopan",fitView:Is=!1,fitViewOptions:Ei,connectOnClick:Bn=!0,attributionPosition:ko,proOptions:Ro,defaultEdgeOptions:Ts,elevateNodesOnSelect:Ss=!0,elevateEdgesOnSelect:No=!1,disableKeyboardA11y:bi=!1,autoPanOnConnect:gl=!0,autoPanOnNodeDrag:Ii=!0,connectionRadius:Ti=20,isValidConnection:Si,onError:$r,style:nr,id:Er,nodeDragThreshold:yl,...Cs},As)=>{const Ur=Er||"1";return K.createElement("div",{...Cs,style:{...nr,...yO},ref:As,className:zt(["react-flow",i]),"data-testid":"rf__wrapper",id:Er},K.createElement(BT,null,K.createElement(uO,{onInit:c,onMove:d,onMoveStart:h,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:T,onNodeMouseLeave:A,onNodeContextMenu:O,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:B,connectionLineStyle:G,connectionLineComponent:U,connectionLineContainerStyle:Y,selectionKeyCode:ee,selectionOnDrag:oe,selectionMode:he,deleteKeyCode:X,multiSelectionKeyCode:we,panActivationKeyCode:de,zoomActivationKeyCode:_e,onlyRenderVisibleElements:be,selectNodesOnDrag:Ge,defaultViewport:Jt,translateExtent:bt,minZoom:Zt,maxZoom:Bt,preventScrolling:Ve,zoomOnScroll:Xe,zoomOnPinch:er,zoomOnDoubleClick:$n,panOnScroll:ht,panOnScrollSpeed:vt,panOnScrollMode:Fn,panOnDrag:xn,onPaneClick:En,onPaneMouseEnter:ft,onPaneMouseMove:bn,onPaneMouseLeave:_i,onPaneScroll:et,onPaneContextMenu:Un,onSelectionContextMenu:z,onSelectionStart:F,onSelectionEnd:j,onEdgeContextMenu:In,onEdgeDoubleClick:tr,onEdgeMouseEnter:To,onEdgeMouseMove:wi,onEdgeMouseLeave:So,onReconnect:Ao??jr,onReconnectStart:Fr??Co,onReconnectEnd:_r??It,reconnectRadius:fl??pl,defaultMarkerColor:kt,noDragClassName:xr,noWheelClassName:xi,noPanClassName:bs,elevateEdgesOnSelect:No,rfId:Ur,disableKeyboardA11y:bi,nodeOrigin:ie,nodeExtent:Me}),K.createElement(l5,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:E,onConnectEnd:x,onClickConnectStart:N,onClickConnectEnd:y,nodesDraggable:ze,nodesConnectable:dt,nodesFocusable:Se,edgesFocusable:xe,edgesUpdatable:yt,elementsSelectable:Et,elevateNodesOnSelect:Ss,minZoom:Zt,maxZoom:Bt,nodeExtent:Me,onNodesChange:wr,onEdgesChange:ml,snapToGrid:ye,snapGrid:$e,connectionMode:L,translateExtent:bt,connectOnClick:Bn,defaultEdgeOptions:Ts,fitView:Is,fitViewOptions:Ei,onNodesDelete:I,onEdgesDelete:C,onNodeDragStart:S,onNodeDrag:b,onNodeDragStop:w,onSelectionDrag:P,onSelectionDragStart:k,onSelectionDragStop:$,noPanClassName:bs,nodeOrigin:ie,rfId:Ur,autoPanOnConnect:gl,autoPanOnNodeDrag:Ii,onError:$r,connectionRadius:Ti,isValidConnection:Si,nodeDragThreshold:yl}),K.createElement(o5,{onSelectionChange:R}),Lr,K.createElement(M4,{proOptions:Ro,position:ko}),K.createElement(f5,{rfId:Ur,disableKeyboardA11y:bi})))});qT.displayName="ReactFlow";const vO=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function _O({children:t}){const e=qe(vO);return e?jc.createPortal(t,e):null}function HT(t){return e=>{const[n,r]=D.useState(e),i=D.useCallback(s=>r(o=>t(s,o)),[]);return[n,r,i]}}const wO=HT(RT),xO=HT(C5),KT=({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:c,borderRadius:d,shapeRendering:h,onClick:f,selected:m})=>{const{background:E,backgroundColor:x}=s||{},N=o||E||x;return K.createElement("rect",{className:zt(["react-flow__minimap-node",{selected:m},c]),x:e,y:n,rx:d,ry:d,width:r,height:i,fill:N,stroke:a,strokeWidth:l,shapeRendering:h,onClick:f?y=>f(y,t):void 0})};KT.displayName="MiniMapNode";var EO=D.memo(KT);const bO=t=>t.nodeOrigin,IO=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),Lp=t=>t instanceof Function?t:()=>t;function TO({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:s=EO,onClick:o}){const a=qe(IO,Vt),l=qe(bO),c=Lp(e),d=Lp(t),h=Lp(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return K.createElement(K.Fragment,null,a.map(m=>{const{x:E,y:x}=Xs(m,l).positionAbsolute;return K.createElement(s,{key:m.id,x:E,y:x,width:m.width,height:m.height,style:m.style,selected:m.selected,className:h(m),color:c(m),borderRadius:r,strokeColor:d(m),strokeWidth:i,shapeRendering:f,onClick:o,id:m.id})}))}var SO=D.memo(TO);const CO=200,AO=150,kO=t=>{const e=t.getNodes(),n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:e.length>0?F4(mu(e,t.nodeOrigin),n):n,rfId:t.rfId}},RO="react-flow__minimap-desc";function GT({style:t,className:e,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o=2,nodeComponent:a,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:d=1,position:h="bottom-right",onClick:f,onNodeClick:m,pannable:E=!1,zoomable:x=!1,ariaLabel:N="React Flow mini map",inversePan:y=!1,zoomStep:v=10,offsetScale:T=5}){const A=xt(),O=D.useRef(null),{boundingRect:M,viewBB:S,rfId:b}=qe(kO,Vt),w=(t==null?void 0:t.width)??CO,I=(t==null?void 0:t.height)??AO,C=M.width/w,R=M.height/I,k=Math.max(C,R),P=k*w,$=k*I,z=T*k,F=M.x-(P-M.width)/2-z,j=M.y-($-M.height)/2-z,L=P+z*2,B=$+z*2,G=`${RO}-${b}`,U=D.useRef(0);U.current=k,D.useEffect(()=>{if(O.current){const ee=An(O.current),oe=we=>{const{transform:_e,d3Selection:ye,d3Zoom:$e}=A.getState();if(we.sourceEvent.type!=="wheel"||!ye||!$e)return;const be=-we.sourceEvent.deltaY*(we.sourceEvent.deltaMode===1?.05:we.sourceEvent.deltaMode?1:.002)*v,Ge=_e[2]*Math.pow(2,be);$e.scaleTo(ye,Ge)},he=we=>{const{transform:_e,d3Selection:ye,d3Zoom:$e,translateExtent:be,width:Ge,height:ze}=A.getState();if(we.sourceEvent.type!=="mousemove"||!ye||!$e)return;const dt=U.current*Math.max(1,_e[2])*(y?-1:1),Se={x:_e[0]-we.sourceEvent.movementX*dt,y:_e[1]-we.sourceEvent.movementY*dt},ie=[[0,0],[Ge,ze]],xe=si.translate(Se.x,Se.y).scale(_e[2]),yt=$e.constrain()(xe,ie,be);$e.transform(ye,yt)},de=YI().on("zoom",E?he:null).on("zoom.wheel",x?oe:null);return ee.call(de),()=>{ee.on("zoom",null)}}},[E,x,y,v]);const Y=f?ee=>{const oe=ar(ee);f(ee,{x:oe[0],y:oe[1]})}:void 0,X=m?(ee,oe)=>{const he=A.getState().nodeInternals.get(oe);m(ee,he)}:void 0;return K.createElement(Q0,{position:h,style:t,className:zt(["react-flow__minimap",e]),"data-testid":"rf__minimap"},K.createElement("svg",{width:w,height:I,viewBox:`${F} ${j} ${L} ${B}`,role:"img","aria-labelledby":G,ref:O,onClick:Y},N&&K.createElement("title",{id:G},N),K.createElement(SO,{onClick:X,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),K.createElement("path",{className:"react-flow__minimap-mask",d:`M${F-z},${j-z}h${L+z*2}v${B+z*2}h${-L-z*2}z
        M${S.x},${S.y}h${S.width}v${S.height}h${-S.width}z`,fill:l,fillRule:"evenodd",stroke:c,strokeWidth:d,pointerEvents:"none"})))}GT.displayName="MiniMap";var NO=D.memo(GT);function PO(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},K.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function DO(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},K.createElement("path",{d:"M0 0h32v4.2H0z"}))}function VO(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},K.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function OO(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},K.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function zO(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},K.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Xl=({children:t,className:e,...n})=>K.createElement("button",{type:"button",className:zt(["react-flow__controls-button",e]),...n},t);Xl.displayName="ControlButton";const MO=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),WT=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:c,children:d,position:h="bottom-left"})=>{const f=xt(),[m,E]=D.useState(!1),{isInteractive:x,minZoomReached:N,maxZoomReached:y}=qe(MO,Vt),{zoomIn:v,zoomOut:T,fitView:A}=zr();if(D.useEffect(()=>{E(!0)},[]),!m)return null;const O=()=>{v(),s==null||s()},M=()=>{T(),o==null||o()},S=()=>{A(i),a==null||a()},b=()=>{f.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),l==null||l(!x)};return K.createElement(Q0,{className:zt(["react-flow__controls",c]),position:h,style:t,"data-testid":"rf__controls"},e&&K.createElement(K.Fragment,null,K.createElement(Xl,{onClick:O,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},K.createElement(PO,null)),K.createElement(Xl,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},K.createElement(DO,null))),n&&K.createElement(Xl,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view"},K.createElement(VO,null)),r&&K.createElement(Xl,{className:"react-flow__controls-interactive",onClick:b,title:"toggle interactivity","aria-label":"toggle interactivity"},x?K.createElement(zO,null):K.createElement(OO,null)),d)};WT.displayName="Controls";var LO=D.memo(WT),fr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(fr||(fr={}));function jO({color:t,dimensions:e,lineWidth:n}){return K.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function FO({color:t,radius:e}){return K.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const $O={[fr.Dots]:"#91919a",[fr.Lines]:"#eee",[fr.Cross]:"#e2e2e2"},UO={[fr.Dots]:1,[fr.Lines]:1,[fr.Cross]:6},BO=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function QT({id:t,variant:e=fr.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:l}){const c=D.useRef(null),{transform:d,patternId:h}=qe(BO,Vt),f=o||$O[e],m=r||UO[e],E=e===fr.Dots,x=e===fr.Cross,N=Array.isArray(n)?n:[n,n],y=[N[0]*d[2]||1,N[1]*d[2]||1],v=m*d[2],T=x?[v,v]:y,A=E?[v/s,v/s]:[T[0]/s,T[1]/s];return K.createElement("svg",{className:zt(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},K.createElement("pattern",{id:h+t,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${A[0]},-${A[1]})`},E?K.createElement(FO,{color:f,radius:v/s}):K.createElement(jO,{dimensions:T,color:f,lineWidth:i})),K.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}QT.displayName="Background";var qO=D.memo(QT),wa;(function(t){t.Line="line",t.Handle="handle"})(wa||(wa={}));function HO({width:t,prevWidth:e,height:n,prevHeight:r,invertX:i,invertY:s}){const o=t-e,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}const YT={width:0,height:0,x:0,y:0},KO={...YT,pointerX:0,pointerY:0,aspectRatio:1};function GO({nodeId:t,position:e,variant:n=wa.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:f,onResizeStart:m,onResize:E,onResizeEnd:x}){const N=lT(),y=typeof t=="string"?t:N,v=xt(),T=D.useRef(null),A=D.useRef(KO),O=D.useRef(YT),M=VT(),S=n===wa.Line?"right":"bottom-right",b=e??S;D.useEffect(()=>{if(!T.current||!y)return;const R=An(T.current),k=b.includes("right")||b.includes("left"),P=b.includes("bottom")||b.includes("top"),$=b.includes("left"),z=b.includes("top"),F=zI().on("start",j=>{const L=v.getState().nodeInternals.get(y),{xSnapped:B,ySnapped:G}=M(j);O.current={width:(L==null?void 0:L.width)??0,height:(L==null?void 0:L.height)??0,x:(L==null?void 0:L.position.x)??0,y:(L==null?void 0:L.position.y)??0},A.current={...O.current,pointerX:B,pointerY:G,aspectRatio:O.current.width/O.current.height},m==null||m(j,{...O.current})}).on("drag",j=>{const{nodeInternals:L,triggerNodeChanges:B}=v.getState(),{xSnapped:G,ySnapped:U}=M(j),Y=L.get(y);if(Y){const X=[],{pointerX:ee,pointerY:oe,width:he,height:de,x:we,y:_e,aspectRatio:ye}=A.current,{x:$e,y:be,width:Ge,height:ze}=O.current,dt=Math.floor(k?G-ee:0),Se=Math.floor(P?U-oe:0);let ie=us(he+($?-dt:dt),a,c),xe=us(de+(z?-Se:Se),l,d);if(h){const bt=ie/xe,Ve=k&&P,Me=k&&!P,kt=P&&!k;ie=bt<=ye&&Ve||kt?xe*ye:ie,xe=bt>ye&&Ve||Me?ie/ye:xe,ie>=c?(ie=c,xe=c/ye):ie<=a&&(ie=a,xe=a/ye),xe>=d?(xe=d,ie=d*ye):xe<=l&&(xe=l,ie=l*ye)}const yt=ie!==Ge,Et=xe!==ze;if($||z){const bt=$?we-(ie-he):we,Ve=z?_e-(xe-de):_e,Me=bt!==$e&&yt,kt=Ve!==be&&Et;if(Me||kt){const Xe={id:Y.id,type:"position",position:{x:Me?bt:$e,y:kt?Ve:be}};X.push(Xe),O.current.x=Xe.position.x,O.current.y=Xe.position.y}}if(yt||Et){const bt={id:y,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:ie,height:xe}};X.push(bt),O.current.width=ie,O.current.height=xe}if(X.length===0)return;const Jt=HO({width:O.current.width,prevWidth:Ge,height:O.current.height,prevHeight:ze,invertX:$,invertY:z}),Zt={...O.current,direction:Jt};if((f==null?void 0:f(j,Zt))===!1)return;E==null||E(j,Zt),B(X)}}).on("end",j=>{const L={id:y,type:"dimensions",resizing:!1};x==null||x(j,{...O.current}),v.getState().triggerNodeChanges([L])});return R.call(F),()=>{R.on(".drag",null)}},[y,b,a,l,c,d,h,M,m,E,x]);const w=b.split("-"),I=n===wa.Line?"borderColor":"backgroundColor",C=o?{...i,[I]:o}:i;return K.createElement("div",{className:zt(["react-flow__resize-control","nodrag",...w,n,r]),ref:T,style:C},s)}var Xw=D.memo(GO);const WO=["top-left","top-right","bottom-left","bottom-right"],QO=["top","right","bottom","left"];function nl({nodeId:t,isVisible:e=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:f,onResizeStart:m,onResize:E,onResizeEnd:x}){return e?K.createElement(K.Fragment,null,QO.map(N=>K.createElement(Xw,{key:N,className:i,style:s,nodeId:t,position:N,variant:wa.Line,color:o,minWidth:a,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:m,keepAspectRatio:h,shouldResize:f,onResize:E,onResizeEnd:x})),WO.map(N=>K.createElement(Xw,{key:N,className:n,style:r,nodeId:t,position:N,color:o,minWidth:a,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:m,keepAspectRatio:h,shouldResize:f,onResize:E,onResizeEnd:x}))):null}/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XT=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>D.createElement("svg",{ref:l,...XO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:XT("lucide",i),...a},[...o.map(([c,d])=>D.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const n=D.forwardRef(({className:r,...i},s)=>D.createElement(JO,{ref:s,iconNode:e,className:XT(`lucide-${YO(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=se("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=se("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=se("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=se("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=se("BoxSelect",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=se("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=se("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=se("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=se("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=se("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=se("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=se("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=se("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=se("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=se("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=se("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=se("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=se("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=se("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=se("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=se("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=se("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=se("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=se("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=se("PinOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12",key:"13x2n8"}],["path",{d:"M15 9.34V6h1a2 2 0 0 0 0-4H7.89",key:"reo3ki"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=se("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=se("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=se("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=se("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=se("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=se("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=se("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=se("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=se("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=se("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=se("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=se("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Fz=({connectionColor:t="#dc2626",setConnectionColor:e=()=>{},connectionLineType:n,setConnectionLineType:r,lastSaved:i,onSave:s,onLoad:o,onClear:a,onHelp:l,isDarkMode:c,toggleTheme:d,searchTerm:h,setSearchTerm:f,onExport:m,isOpen:E,onToggle:x,onOpenCaseManager:N,currentBoardName:y,onToggleZen:v,onNextMatch:T,onPrevMatch:A,onToggleBg:O,onLogout:M,currentUser:S,isSyncing:b,syncError:w,onRetry:I})=>{const C=D.useRef(null),[R,k]=D.useState(()=>{try{const F=localStorage.getItem("sidebar-sections");return F?JSON.parse(F):{evidence:!0,connection:!0,extras:!0,zones:!0}}catch{return{evidence:!0,connection:!0,extras:!0,zones:!0}}});D.useEffect(()=>{localStorage.setItem("sidebar-sections",JSON.stringify(R))},[R]);const P=F=>{k(j=>({...j,[F]:!j[F]}))},$=()=>{const F=Object.values(R).some(j=>j);k(Object.keys(R).reduce((j,L)=>({...j,[L]:!F}),{}))},z=(F,j,L)=>{F.dataTransfer.setData("application/reactflow",j),F.dataTransfer.setData("application/category",L),F.dataTransfer.effectAllowed="move"};return p.jsxs("div",{className:`absolute top-0 left-0 h-full z-50 transition-transform duration-300 ease-in-out ${E?"translate-x-0":"-translate-x-full"}`,children:[p.jsxs("aside",{className:`h-full w-80 border-r flex flex-col shadow-2xl backdrop-blur-xl transition-colors duration-500 ease-in-out ${c?"bg-zinc-900/95 border-zinc-800":"bg-white/90 border-gray-200"}`,children:[p.jsxs("div",{className:`p-3 border-b transition-colors duration-500 ${c?"border-zinc-800":"border-gray-200"}`,children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("div",{children:p.jsxs("h1",{className:"text-lg font-bold text-red-500 tracking-widest uppercase leading-tight",children:["Detective",p.jsx("br",{}),"Board"]})}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:$,className:`p-2 rounded-full ${c?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:Object.values(R).some(F=>F)?"Colapsar todo":"Expandir todo",children:Object.values(R).some(F=>F)?p.jsx(oz,{size:16}):p.jsx(sz,{size:16})}),p.jsx("button",{onClick:v,className:`p-2 rounded-full ${c?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Modo Zen (Pantalla Completa)",children:p.jsx(wz,{size:16})}),p.jsx("button",{onClick:O,className:`p-2 rounded-full ${c?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Cambiar Fondo (Corcho/Pizarra/Papel)",children:p.jsx(Iz,{size:16})}),p.jsx("button",{onClick:d,className:`p-2 rounded-full ${c?"bg-zinc-800 text-yellow-400 hover:bg-zinc-700":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Cambiar tema",children:c?p.jsx(lS,{size:16}):p.jsx(iS,{size:16})})]})]}),y&&p.jsxs("div",{className:"mt-2 px-2 py-1 bg-zinc-100/5 rounded border border-zinc-500/20",children:[p.jsx("p",{className:"text-xs text-zinc-500 font-mono uppercase mb-0",children:"Expediente:"}),p.jsx("p",{className:`text-xs font-bold font-mono truncate w-full ${c?"text-yellow-500":"text-yellow-700"}`,title:y,children:y})]})]}),p.jsx("div",{className:"px-3 pt-2 pb-1",children:p.jsxs("div",{className:`flex items-center px-2 py-1.5 rounded border transition-colors duration-500 ${c?"bg-zinc-950 border-zinc-800":"bg-white border-gray-300"}`,children:[p.jsx(sS,{size:12,className:"text-zinc-500 mr-2"}),p.jsx("input",{type:"text",name:"search",placeholder:"Buscar pistas...",value:h,onChange:F=>f(F.target.value),className:`bg-transparent w-full text-xs outline-none font-mono ${c?"text-zinc-300 placeholder-zinc-600":"text-zinc-700 placeholder-zinc-400"}`}),h&&p.jsxs("div",{className:"flex gap-1 ml-1 border-l border-zinc-700 pl-1",children:[p.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),A()},className:"p-0.5 hover:text-white text-zinc-500 transition-colors",title:"Anterior",children:p.jsx(tz,{size:12})}),p.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),T()},className:"p-0.5 hover:text-white text-zinc-500 transition-colors",title:"Siguiente",children:p.jsx(ZO,{size:12})})]})]})}),p.jsxs("div",{className:"p-3 space-y-2 overflow-y-auto",children:[p.jsx(dd,{title:"Evidencia",icon:pz,isDarkMode:c,isOpen:R.evidence,onToggle:()=>P("evidence"),children:p.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[p.jsx(Rt,{onDragStart:z,type:"evidence",category:"person",icon:fy,label:"Sospechoso",color:"border-blue-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"evidence",category:"place",icon:nS,label:"Lugar",color:"border-green-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"evidence",category:"clue",icon:ly,label:"Pista",color:"border-yellow-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"evidence",category:"event",icon:JT,label:"Evento",color:"border-red-500",isDarkMode:c,compact:!0})]})}),p.jsxs(dd,{title:"Configuracin de Hilo",icon:pg,isDarkMode:c,isOpen:R.connection,onToggle:()=>P("connection"),children:[p.jsx("div",{className:"flex items-center justify-center gap-3 mb-2 px-1 py-0.5",children:[{color:"#dc2626",label:"Rojo"},{color:"#3b82f6",label:"Azul"},{color:"#22c55e",label:"Verde"},{color:"#eab308",label:"Amarillo"},{color:"#a855f7",label:"Morado"}].map(F=>p.jsx("button",{onClick:()=>e(F.color),className:`w-5 h-5 rounded-full border-2 transition-all ${t===F.color?"border-white scale-100 ring-1 ring-zinc-500":"border-transparent hover:scale-100"}`,style:{backgroundColor:F.color},title:F.label},F.color))}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>r("straight"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="straight"?c?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":c?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Recta",children:p.jsx(rS,{size:14})}),p.jsx("button",{onClick:()=>r("default"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="default"?c?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":c?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Curva",children:p.jsx(pg,{size:14})}),p.jsx("button",{onClick:()=>r("step"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="step"?c?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":c?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Escalonada",children:p.jsx(eS,{size:14})})]})]}),p.jsx(dd,{title:"Extras",icon:vz,isDarkMode:c,isOpen:R.extras,onToggle:()=>P("extras"),children:p.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[p.jsx(Rt,{onDragStart:z,type:"note",category:"note",icon:aS,label:"Nota",color:"border-yellow-400",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"text",category:"text",icon:uS,label:"Texto",color:"border-zinc-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"image",category:"image",icon:cy,label:"Imagen",color:"border-purple-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"url",category:"url",icon:uy,label:"URL",color:"border-blue-500",isDarkMode:c,compact:!0})]})}),p.jsx(dd,{title:"Zonas y Sellos",icon:Jw,isDarkMode:c,isOpen:R.zones,onToggle:()=>P("zones"),children:p.jsxs("div",{className:"space-y-2",children:[p.jsx(Rt,{onDragStart:z,type:"zone",category:"zone",icon:Jw,label:"Zona de Grupo",color:"border-zinc-600",isDarkMode:c}),p.jsxs("div",{className:"grid grid-cols-3 gap-1.5 pt-1",children:[p.jsx(Rt,{onDragStart:z,type:"stamp",category:"solved",icon:az,label:"Resuelto",color:"border-green-600",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"stamp",category:"discarded",icon:lz,label:"Descartado",color:"border-red-600",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"stamp",category:"key",icon:Vz,label:"Clave",color:"border-yellow-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"stamp",category:"question",icon:mg,label:"?",color:"border-blue-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"stamp",category:"important",icon:cS,label:"!",color:"border-orange-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"stamp",category:"verify",icon:tS,label:"Ojo",color:"border-purple-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"stamp",category:"danger",icon:oS,label:"Peligro",color:"border-red-600",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"stamp",category:"confidential",icon:Oa,label:"Top",color:"border-zinc-500",isDarkMode:c,compact:!0}),p.jsx(Rt,{onDragStart:z,type:"stamp",category:"custom",icon:Tz,label:"Personalizado",color:"border-zinc-400",isDarkMode:c,compact:!0})]})]})})]}),p.jsxs("div",{className:`mt-auto p-3 border-t space-y-2 transition-colors duration-500 ${c?"border-zinc-800":"border-gray-200"}`,children:[p.jsxs("button",{onClick:N,title:"Abrir gestor de expedientes",className:`w-full py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 ${c?"bg-yellow-900/20 text-yellow-500 border-yellow-900/50 hover:bg-yellow-900/40":"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100"}`,children:[p.jsx(mz,{size:14})," Gestionar Casos"]}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsxs("button",{onClick:s,className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${c?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Guardar (JSON)",children:[p.jsx(Pz,{size:16,className:"mb-1"}),p.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Guardar"})]}),p.jsxs("button",{onClick:()=>C.current.click(),className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${c?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Cargar (JSON)",children:[p.jsx(zz,{size:16,className:"mb-1"}),p.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Cargar"})]}),p.jsxs("button",{onClick:m,className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${c?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Exportar (PNG)",children:[p.jsx(hz,{size:16,className:"mb-1"}),p.jsx("span",{className:"text-[9px] font-bold uppercase",children:"PNG"})]})]}),p.jsx("input",{type:"file",name:"file-upload",ref:C,onChange:o,className:"hidden",accept:".json"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("button",{onClick:a,title:"Borrar todo el contenido",className:`py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 ${c?"bg-red-900/20 text-red-500 border-red-900/50 hover:bg-red-900/40":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"}`,children:[p.jsx(gg,{size:14})," Limpiar"]}),p.jsxs("button",{onClick:l,title:"Ver atajos de teclado",className:`py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 ${c?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,children:[p.jsx(mg,{size:14})," Ayuda"]})]}),i&&p.jsxs("div",{className:`text-[10px] text-center mt-2 font-mono ${c?"text-zinc-600":"text-gray-400"}`,children:["Guardado: ",i.toLocaleTimeString()]}),p.jsxs("button",{onClick:M,className:`w-full py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 mt-2 ${c?"bg-red-950/50 text-red-500 border-red-900/30 hover:bg-red-900/40":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"}`,children:[p.jsx(_z,{size:14})," Cerrar Sesin"]})]})]}),p.jsx("button",{onClick:x,className:`absolute top-6 -right-8 p-1.5 rounded-r-md shadow-md border-y border-r cursor-pointer flex items-center justify-center transition-colors duration-500 ${c?"bg-zinc-900 border-zinc-800 text-zinc-400 hover:text-white":"bg-white border-gray-200 text-zinc-600 hover:text-black"}`,title:E?"Ocultar barra lateral":"Mostrar barra lateral",children:E?p.jsx(rz,{size:16}):p.jsx(iz,{size:16})})]})},dd=({title:t,icon:e,isDarkMode:n,children:r,isOpen:i,onToggle:s})=>p.jsxs("div",{className:`p-2 rounded-lg border transition-all duration-200 ${n?"bg-zinc-950/50 border-zinc-800":"bg-white border-gray-200 shadow-sm"}`,children:[p.jsxs("button",{onClick:s,className:`w-full text-xs font-bold uppercase flex items-center justify-between gap-2 ${n?"text-zinc-500 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(e,{size:10})," ",t]}),p.jsx("div",{className:`transition-transform duration-300 ${i?"rotate-0":"-rotate-90"}`,children:p.jsx(nz,{size:12})})]}),p.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${i?"grid-rows-[1fr] opacity-100 mt-2":"grid-rows-[0fr] opacity-0 mt-0"}`,children:p.jsx("div",{className:"overflow-hidden",children:r})})]}),Rt=({onDragStart:t,type:e,category:n,icon:r,label:i,color:s,isDarkMode:o,compact:a})=>p.jsxs("div",{className:`${a?"flex flex-col items-center justify-center p-2 gap-1 text-center":"flex items-center gap-3 p-3"} rounded cursor-grab border-l-4 ${s.replace("border-","border-l-")} transition-all ${a?"hover:scale-105":"hover:translate-x-2"} ${o?"bg-zinc-800/40 border-y border-r border-zinc-800 hover:bg-zinc-800":"bg-white border-y border-r border-gray-200 hover:bg-gray-50 shadow-sm"}`,onDragStart:l=>t(l,e,n),draggable:!0,title:i,children:[p.jsx(r,{size:a?16:18,className:s.replace("border-","text-")}),p.jsx("span",{className:`${a?"text-[10px]":"text-sm"} font-bold font-mono ${o?"text-zinc-300":"text-zinc-700"}`,children:i})]}),$z=({isOpen:t,onClose:e,node:n,onSave:r,onDelete:i,isDarkMode:s})=>{const[o,a]=D.useState(""),[l,c]=D.useState(""),[d,h]=D.useState(""),[f,m]=D.useState("clue"),[E,x]=D.useState(!1);if(D.useEffect(()=>{n&&(a(n.data.label||""),c(n.data.description||""),h(n.data.image||""),m(n.data.category||"clue"),x(!1))},[n]),!t)return null;if(E)return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm",children:p.jsxs("div",{className:`${s?"bg-zinc-900":"bg-white"} border border-red-900/50 p-6 rounded-lg w-96 shadow-2xl animate-in fade-in zoom-in duration-200 text-center`,children:[p.jsx("h2",{className:"text-xl font-bold text-red-500 font-mono tracking-wider mb-4",children:"ELIMINAR EVIDENCIA?"}),p.jsx("p",{className:`${s?"text-zinc-400":"text-gray-600"} text-sm font-mono mb-6`,children:"Esta accin es irreversible. Ests seguro?"}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsx("button",{onClick:()=>x(!1),className:`px-4 py-2 ${s?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:"Cancelar"}),p.jsx("button",{onClick:()=>i(n.id),className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Confirmar"})]})]})});const N=y=>{y.preventDefault(),r(n.id,{...n.data,label:o,description:l,image:d,category:f}),e()};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm",children:p.jsxs("div",{className:`${s?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-96 shadow-2xl animate-in fade-in zoom-in duration-200`,children:[p.jsxs("div",{className:`flex justify-between items-center mb-4 border-b ${s?"border-zinc-800":"border-gray-200"} pb-2`,children:[p.jsx("h2",{className:"text-xl font-bold text-red-500 font-mono tracking-wider",children:"EDITAR EVIDENCIA"}),p.jsx("button",{onClick:e,className:`${s?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:p.jsx(ys,{size:20})})]}),p.jsxs("form",{onSubmit:N,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"evidence-category",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Categora"}),p.jsxs("select",{id:"evidence-category",name:"evidence-category",value:f,onChange:y=>m(y.target.value),className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all text-sm`,children:[p.jsx("option",{value:"person",children:"Sospechoso"}),p.jsx("option",{value:"place",children:"Lugar"}),p.jsx("option",{value:"clue",children:"Pista"}),p.jsx("option",{value:"event",children:"Evento"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"evidence-title",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Ttulo"}),p.jsx("input",{id:"evidence-title",type:"text",name:"evidence-title",value:o,onChange:y=>a(y.target.value),className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all`,autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"evidence-description",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Descripcin"}),p.jsx("textarea",{id:"evidence-description",name:"evidence-description",value:l,onChange:y=>c(y.target.value),rows:4,className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-300":"bg-gray-50 border-gray-300 text-gray-700"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono text-sm resize-none transition-all`})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"evidence-image-url",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Imagen (URL o Local)"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{id:"evidence-image-url",type:"text",name:"evidence-image-url",value:d,onChange:y=>h(y.target.value),placeholder:"https://...",className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-400":"bg-gray-50 border-gray-300 text-gray-600"} border p-2 rounded focus:border-red-900 outline-none font-mono text-xs`}),p.jsx("div",{className:`text-[10px] ${s?"text-zinc-600":"text-gray-400"} text-center font-mono uppercase tracking-widest`,children:"- O -"}),p.jsxs("label",{className:`flex items-center justify-center w-full p-2 ${s?"bg-zinc-950 border-zinc-800 hover:border-zinc-600 hover:text-zinc-200":"bg-gray-50 border-gray-300 hover:border-gray-400 hover:text-gray-800"} border border-dashed rounded cursor-pointer transition-colors group`,children:[p.jsx("span",{className:`text-xs ${s?"text-zinc-500 group-hover:text-zinc-300":"text-gray-500 group-hover:text-gray-700"} font-mono uppercase`,children:"Subir archivo local"}),p.jsx("input",{type:"file",name:"evidence-image-file",className:"hidden",accept:"image/*",onChange:y=>{const v=y.target.files[0];if(v){const T=new FileReader;T.onload=A=>h(A.target.result),T.readAsDataURL(v)}}})]})]})]}),n.data.status&&p.jsx("div",{className:`flex justify-end pt-2 border-t ${s?"border-zinc-800":"border-gray-200"}`,children:p.jsxs("button",{type:"button",onClick:()=>{r(n.id,{...n.data,status:null}),e()},className:"text-[10px] flex items-center gap-1 text-orange-500 hover:text-orange-400 uppercase font-bold tracking-wider",children:[p.jsx(ay,{size:12})," Quitar Sello"]})}),p.jsxs("div",{className:`flex justify-between items-center mt-6 pt-4 border-t ${s?"border-zinc-800":"border-gray-200"}`,children:[p.jsx("button",{type:"button",onClick:()=>x(!0),className:"text-red-600 hover:text-red-500 text-xs font-bold uppercase tracking-wider transition-colors",children:"Eliminar"}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 ${s?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-800"} text-xs font-bold uppercase tracking-wider transition-colors`,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Guardar"})]})]})]})]})})};let hd;const Uz=new Uint8Array(16);function Bz(){if(!hd&&(hd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hd(Uz)}const Lt=[];for(let t=0;t<256;++t)Lt.push((t+256).toString(16).slice(1));function qz(t,e=0){return Lt[t[e+0]]+Lt[t[e+1]]+Lt[t[e+2]]+Lt[t[e+3]]+"-"+Lt[t[e+4]]+Lt[t[e+5]]+"-"+Lt[t[e+6]]+Lt[t[e+7]]+"-"+Lt[t[e+8]]+Lt[t[e+9]]+"-"+Lt[t[e+10]]+Lt[t[e+11]]+Lt[t[e+12]]+Lt[t[e+13]]+Lt[t[e+14]]+Lt[t[e+15]]}const Hz=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tx={randomUUID:Hz};function kn(t,e,n){if(tx.randomUUID&&!t)return tx.randomUUID();t=t||{};const r=t.random||(t.rng||Bz)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,qz(r)}function Kz({top:t,left:e,right:n,bottom:r,clientX:i,clientY:s,onHide:o,takeSnapshot:a,setNodes:l}){const{screenToFlowPosition:c,setCenter:d,getZoom:h}=zr(),f=E=>{E.stopPropagation();const{x,y:N}=c({x:i,y:s});d(x,N,{zoom:h(),duration:800}),o()},m=D.useCallback((E,x,N)=>{const y=c({x:i,y:s}),v={id:kn(),type:E,position:y,data:{label:N,category:x}};a(),l(T=>T.concat(v)),o()},[i,s,c,a,l,o]);return p.jsxs("div",{style:{top:t,left:e,right:n,bottom:r},className:"absolute z-50 bg-zinc-800 border border-zinc-700 shadow-xl rounded-md overflow-hidden min-w-[150px] flex flex-col animate-in fade-in zoom-in duration-100",children:[p.jsxs("button",{onClick:f,className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors border-b border-zinc-700",children:[p.jsx(dz,{size:14,className:"text-blue-400"})," Centrar Vista"]}),p.jsxs("button",{onClick:()=>m("note","note","Nota"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[p.jsx(aS,{size:14,className:"text-yellow-500"})," Aadir Nota"]}),p.jsxs("button",{onClick:()=>m("text","text","Texto"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[p.jsx(uS,{size:14,className:"text-zinc-400"})," Aadir Texto"]}),p.jsxs("button",{onClick:()=>m("image","image","Imagen"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[p.jsx(cy,{size:14,className:"text-purple-500"})," Aadir Imagen"]}),p.jsxs("button",{onClick:()=>m("url","url","Enlace"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[p.jsx(uy,{size:14,className:"text-blue-400"})," Aadir URL"]})]})}const Gz=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmText:s="Confirmar",cancelText:o="Cancelar",isDanger:a=!1,isDarkMode:l})=>t?p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[300] backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:`${l?"bg-zinc-900":"bg-white"} border ${a?"border-red-900/50":l?"border-zinc-700":"border-gray-200"} p-6 rounded-lg w-96 shadow-2xl animate-in zoom-in duration-200 text-center`,children:[p.jsx("h2",{className:`text-xl font-bold ${a?"text-red-500":l?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-4`,children:r}),p.jsx("p",{className:`${l?"text-zinc-400":"text-gray-600"} text-sm font-mono mb-6`,children:i}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsx("button",{onClick:e,className:`px-4 py-2 ${l?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:o}),p.jsx("button",{onClick:()=>{n&&n(),e()},className:`px-6 py-2 ${a?"bg-red-900/80 hover:bg-red-800 text-red-100 border-red-900":"bg-blue-900/80 hover:bg-blue-800 text-blue-100 border-blue-900"} text-xs font-bold uppercase tracking-wider rounded shadow-lg border transition-all`,children:s})]})]})}):null,Wz=({isOpen:t,onClose:e,isDarkMode:n})=>{if(!t)return null;const r=[{key:"Doble Clic (Nodo)",desc:"Editar contenido de la evidencia",icon:jp},{key:"Doble Clic (Hilo)",desc:"Aadir/Editar etiqueta de relacin",icon:jp},{key:"Clic (Hilo)",desc:"Cambiar estilo (Slido / Punteado)",icon:jp},{key:"Backspace",desc:"Eliminar elementos seleccionados",icon:Gr},{key:"Ctrl + D",desc:"Duplicar nodos seleccionados",icon:Gr},{key:"Ctrl + Z",desc:"Deshacer accin",icon:Gr},{key:"Ctrl + Y",desc:"Rehacer accin",icon:Gr},{key:"Ctrl + S",desc:"Guardar tablero manualmente",icon:Gr},{key:"Ctrl + V",desc:"Pegar imagen del portapapeles",icon:Gr},{key:"F3 / Shift + F3",desc:"Navegar resultados de bsqueda",icon:Gr},{key:"Shift + C",desc:"Conectar nodos seleccionados",icon:Gr},{key:"Ctrl + Shift + L",desc:"Bloquear/Desbloquear seleccin",icon:Oa}];return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:`${n?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-[500px] shadow-2xl animate-in zoom-in duration-200 relative`,children:[p.jsx("button",{onClick:e,className:`absolute top-4 right-4 ${n?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:p.jsx(ys,{size:20})}),p.jsxs("h2",{className:`text-xl font-bold ${n?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-6 flex items-center gap-2`,children:[p.jsx(Gr,{className:"text-red-500"})," ATAJOS DE TECLADO"]}),p.jsx("div",{className:"grid grid-cols-1 gap-3",children:r.map((i,s)=>p.jsxs("div",{className:`flex items-center justify-between p-2 rounded border transition-colors ${n?"bg-zinc-950/50 border-zinc-800/50 hover:border-zinc-700":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(i.icon,{size:14,className:n?"text-zinc-500":"text-gray-400"}),p.jsx("span",{className:`${n?"text-zinc-300":"text-gray-700"} text-sm font-mono`,children:i.desc})]}),p.jsx("span",{className:"text-xs font-bold text-red-400 bg-red-900/10 px-2 py-1 rounded border border-red-900/20 font-mono",children:i.key})]},s))})]})})},Qz=({isOpen:t,onClose:e,onConfirm:n,onDelete:r,title:i,initialValue:s="",initialColor:o="#dc2626",initialType:a,showTypeSelector:l=!1,colorLabel:c="Color",placeholder:d="Escribe una relacin...",isDarkMode:h})=>{const[f,m]=D.useState(s),[E,x]=D.useState(o),[N,y]=D.useState(a||"default");if(D.useEffect(()=>{t&&(m(s),x(o),a&&y(a))},[t,s,o,a]),!t)return null;const v=[{color:"#dc2626",label:"Rojo"},{color:"#3b82f6",label:"Azul"},{color:"#22c55e",label:"Verde"},{color:"#eab308",label:"Amarillo"},{color:"#a855f7",label:"Morado"}],T=A=>{A.preventDefault(),n(f,E,N),e()};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:`${h?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-96 shadow-2xl animate-in zoom-in duration-200`,children:[p.jsx("h2",{className:`text-xl font-bold ${h?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-4`,children:i}),p.jsxs("form",{onSubmit:T,children:[p.jsx("input",{type:"text",name:"input-value",value:f,onChange:A=>m(A.target.value),className:`w-full ${h?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all mb-4`,autoFocus:!0,placeholder:d}),l&&p.jsxs("div",{className:"mb-4",children:[p.jsx("span",{className:`block text-xs font-bold ${h?"text-zinc-500":"text-gray-500"} uppercase mb-2 font-mono`,children:"Tipo de Conexin"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"button",onClick:()=>y("straight"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${N==="straight"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Recta",children:p.jsx(rS,{size:16})}),p.jsx("button",{type:"button",onClick:()=>y("default"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${N==="default"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Curva",children:p.jsx(pg,{size:16})}),p.jsx("button",{type:"button",onClick:()=>y("step"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${N==="step"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Escalonada",children:p.jsx(eS,{size:16})})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("span",{className:`block text-xs font-bold ${h?"text-zinc-500":"text-gray-500"} uppercase mb-2 font-mono`,children:c}),p.jsx("div",{className:"flex gap-3",children:v.map(A=>p.jsx("button",{type:"button",onClick:()=>x(A.color),className:`w-6 h-6 rounded-full border-2 transition-all ${E===A.color?(h?"border-white ring-zinc-400":"border-gray-800 ring-gray-400")+" scale-110 ring-1":"border-transparent hover:scale-110"}`,style:{backgroundColor:A.color},title:A.label},A.color))})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[r?p.jsx("button",{type:"button",onClick:r,className:"text-red-600 hover:text-red-500 text-xs font-bold uppercase tracking-wider transition-colors",children:"Eliminar"}):p.jsx("div",{}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 ${h?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Guardar"})]})]})]})]})})},Yz=({isOpen:t,onClose:e,boards:n,currentBoardId:r,onSwitch:i,onCreate:s,onDelete:o,onRename:a,onClone:l,onReorder:c,trash:d,onRestore:h,onPermanentDelete:f,isDarkMode:m})=>{const[E,x]=D.useState(null),[N,y]=D.useState(""),[v,T]=D.useState(!1),[A,O]=D.useState(""),[M,S]=D.useState(null),[b,w]=D.useState(""),[I,C]=D.useState("manual"),[R,k]=D.useState(!1),P=D.useMemo(()=>{let Y=(R?d:n).filter(X=>X.name.toLowerCase().includes(b.toLowerCase()));return I==="name"?Y.sort((X,ee)=>X.name.localeCompare(ee.name)):I==="created"?Y.sort((X,ee)=>ee.createdAt-X.createdAt):I==="modified"?Y.sort((X,ee)=>(ee.lastModified||0)-(X.lastModified||0)):Y},[n,d,b,I,R]),$=I==="manual"&&!b&&!R,z=(U,Y)=>{U.dataTransfer.setData("boardIndex",Y),U.dataTransfer.effectAllowed="move"},F=U=>{U.preventDefault(),U.dataTransfer.dropEffect="move"},j=(U,Y)=>{U.preventDefault();const X=parseInt(U.dataTransfer.getData("boardIndex"));if(isNaN(X)||X===Y)return;const ee=[...n],[oe]=ee.splice(X,1);ee.splice(Y,0,oe),c(ee)};if(!t)return null;const L=U=>{x(U.id),y(U.name)},B=()=>{N.trim()&&a(E,N),x(null)},G=()=>{A.trim()&&(s(A),O(""),T(!1))};return p.jsx("div",{className:"fixed inset-0 bg-black/90 z-[200] flex items-center justify-center backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:`${m?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border w-[900px] h-[600px] rounded-lg shadow-2xl flex flex-col overflow-hidden`,children:[p.jsxs("div",{className:`p-6 border-b ${m?"border-zinc-800 bg-zinc-950":"border-gray-200 bg-gray-50"} flex justify-between items-center z-50 relative`,children:[p.jsxs("div",{children:[p.jsxs("h2",{className:`text-2xl font-bold ${m?"text-zinc-100":"text-gray-800"} font-mono tracking-widest flex items-center gap-3 uppercase`,children:[R?p.jsx(ex,{className:"text-red-500",size:28}):p.jsx(Zw,{className:"text-yellow-600",size:28}),R?"PAPELERA DE RECICLAJE":"ARCHIVOS DE CASO"]}),p.jsx("p",{className:`${m?"text-zinc-500":"text-gray-500"} text-xs font-mono mt-1`,children:R?"Restaura casos eliminados o brralos definitivamente":"Selecciona un expediente para investigar"})]}),p.jsx("button",{onClick:e,className:`${m?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:p.jsx(ys,{size:24})})]}),p.jsxs("div",{className:`px-6 py-3 border-b flex gap-4 items-center justify-between ${m?"border-zinc-800 bg-zinc-900/50":"border-gray-200 bg-gray-50/50"}`,children:[p.jsxs("div",{className:`flex-1 flex items-center px-3 py-1.5 rounded border ${m?"bg-zinc-950 border-zinc-700":"bg-white border-gray-300"}`,children:[p.jsx(sS,{size:14,className:m?"text-zinc-500":"text-gray-400"}),p.jsx("input",{type:"text",name:"case-search",placeholder:"Buscar expediente...",value:b,onChange:U=>w(U.target.value),className:`ml-2 bg-transparent w-full text-xs outline-none font-mono ${m?"text-zinc-300 placeholder-zinc-600":"text-zinc-700 placeholder-zinc-400"}`})]}),p.jsxs("button",{onClick:()=>k(!R),className:`flex items-center gap-2 px-3 py-1.5 rounded border text-xs font-bold uppercase transition-colors ${R?m?"bg-red-900/30 border-red-800 text-red-400":"bg-red-50 border-red-200 text-red-600":m?"bg-zinc-900 border-zinc-700 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-600 hover:text-black"}`,children:[R?p.jsx(Zw,{size:14}):p.jsx(ex,{size:14}),R?"Ver Archivos":"Papelera"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ez,{size:14,className:m?"text-zinc-500":"text-gray-400"}),p.jsxs("select",{name:"sort-cases",value:I,onChange:U=>C(U.target.value),className:`text-xs font-mono p-1.5 rounded border outline-none cursor-pointer ${m?"bg-zinc-950 border-zinc-700 text-zinc-300":"bg-white border-gray-300 text-zinc-700"}`,children:[p.jsx("option",{value:"manual",children:"Manual (Arrastrar)"}),p.jsx("option",{value:"name",children:"Nombre (A-Z)"}),p.jsx("option",{value:"created",children:"Creado (Reciente)"}),p.jsx("option",{value:"modified",children:"Modificado (Reciente)"})]})]})]}),p.jsx("div",{className:`flex-1 p-8 overflow-y-auto overflow-x-hidden ${m?"bg-zinc-900/50":"bg-gray-100"}`,children:p.jsxs("div",{className:"flex flex-wrap justify-center items-start gap-y-12 pl-8 pb-12 pt-[2px]",children:[!b&&!R&&(v?p.jsx("div",{className:"relative w-56 h-40 -ml-12 first:ml-0 z-50 transition-all duration-300 shadow-2xl transform scale-105",children:p.jsxs("div",{className:`flex flex-col items-center justify-center h-full border-2 border-dashed border-yellow-600/50 bg-yellow-900/10 rounded-lg p-4 animate-in zoom-in duration-200 ${m?"bg-zinc-900":"bg-white"}`,children:[p.jsx("span",{className:"text-yellow-500 font-mono text-xs font-bold mb-2",children:"NOMBRE DEL CASO"}),p.jsx("input",{type:"text",name:"new-case-name",autoFocus:!0,value:A,onChange:U=>O(U.target.value),onKeyDown:U=>{U.key==="Enter"&&G(),U.key==="Escape"&&T(!1)},placeholder:"Ej: El Robo del Siglo",className:`${m?"bg-zinc-950 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"} border text-xs p-2 w-full rounded outline-none focus:border-yellow-600 font-mono text-center mb-2`}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>T(!1),className:`${m?"text-zinc-500 hover:text-white hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 hover:bg-gray-200"} text-[10px] uppercase font-bold px-2 py-1 rounded`,children:"Cancelar"}),p.jsx("button",{onClick:G,className:"text-zinc-900 bg-yellow-600 hover:bg-yellow-500 text-[10px] uppercase font-bold px-3 py-1 rounded",children:"Crear"})]})]})}):p.jsx("button",{onClick:()=>{T(!0),O(`Caso #${n.length+1}`)},className:"relative w-56 h-40 -ml-12 first:ml-0 transition-all duration-300 group",style:{zIndex:M==="new"?50:0,transform:M==="new"?"translateY(-1rem) scale(1.05) rotate(0deg)":"rotate(-3deg)"},onMouseEnter:()=>S("new"),onMouseLeave:()=>S(null),children:p.jsxs("div",{className:`flex flex-col items-center justify-center h-full border-2 border-dashed rounded-lg shadow-lg ${m?"border-zinc-700 hover:border-zinc-500 bg-zinc-800/50":"border-gray-300 hover:border-gray-400 bg-white"}`,children:[p.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 transition-all group-hover:scale-110 ${m?"bg-zinc-800 group-hover:bg-zinc-700":"bg-gray-200 group-hover:bg-gray-300"}`,children:p.jsx(Az,{className:m?"text-zinc-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-800"})}),p.jsx("span",{className:`${m?"text-zinc-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-800"} font-mono text-sm font-bold`,children:"NUEVO CASO"})]})})),P.map((U,Y)=>{const X=M===U.id,ee=r===U.id,oe=U.isDeleting,he=Y%3===0?"2deg":Y%3===1?"-1deg":"3deg";return p.jsx("div",{draggable:$,onDragStart:de=>z(de,Y),onDragOver:F,onDrop:de=>j(de,Y),className:"relative w-56 h-40 -ml-12 transition-all duration-300 ease-out cursor-pointer group",style:{zIndex:X?50:Y+1,transform:X?"translateY(-1.5rem) scale(1.1) rotate(0deg)":`rotate(${he})`,animation:oe?"delete-burn 0.5s ease-in-out forwards":"none",pointerEvents:oe?"none":"auto"},onMouseEnter:()=>S(U.id),onMouseLeave:()=>S(null),onClick:()=>{E!==U.id&&!R&&i(U.id)},children:p.jsxs("div",{className:`relative flex flex-col h-full border-2 rounded-lg overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.5)] transition-colors duration-300
                    ${ee?m?"border-yellow-500 bg-yellow-900/40":"border-yellow-500 bg-yellow-100":m?R?"border-zinc-700 bg-zinc-900/50":"border-yellow-900/40 bg-yellow-950/30 hover:border-yellow-700 hover:bg-yellow-900/20":R?"border-gray-300 bg-gray-100":"border-yellow-200 bg-yellow-50 hover:border-yellow-300 hover:bg-yellow-100"}
                `,children:[$&&X&&p.jsx("div",{className:"absolute top-2 right-2 text-yellow-600/50",children:p.jsx(yz,{size:16})}),p.jsx("div",{className:`absolute top-0 left-0 w-24 h-6 rounded-br-lg border-b-2 border-r-2 shadow-sm transition-colors duration-300
                        ${ee?"bg-yellow-500 border-yellow-500":m?R?"bg-zinc-800 border-zinc-700":"bg-yellow-900/40 border-yellow-900/40 group-hover:bg-yellow-800 group-hover:border-yellow-700":R?"bg-gray-300 border-gray-300":"bg-yellow-200 border-yellow-200 group-hover:bg-yellow-300 group-hover:border-yellow-300"}
                    `}),p.jsxs("div",{className:"flex-1 p-4 pt-8 flex flex-col items-center justify-between text-center",children:[p.jsxs("div",{children:[p.jsx(ly,{size:32,className:`mb-2 drop-shadow-md transition-colors duration-300 ${ee?m?"text-yellow-400":"text-yellow-600":m?"text-yellow-800/60 group-hover:text-yellow-600":"text-yellow-300 group-hover:text-yellow-500"}`}),E===U.id?p.jsxs("div",{className:"flex items-center gap-1 w-full",onClick:de=>de.stopPropagation(),children:[p.jsx("input",{type:"text",name:"edit-case-name",value:N,onChange:de=>y(de.target.value),className:`${m?"bg-zinc-950 border-zinc-600 text-white":"bg-white border-gray-300 text-gray-900"} border text-xs p-1 w-full rounded outline-none focus:border-yellow-600 font-mono`,autoFocus:!0,onKeyDown:de=>de.key==="Enter"&&B()}),p.jsx("button",{onClick:B,className:"text-green-500 hover:text-green-400",children:p.jsx(ZT,{size:14})})]}):p.jsx("h3",{className:`font-mono font-bold text-sm line-clamp-2 ${r===U.id?m?"text-yellow-100":"text-yellow-800":m?R?"text-zinc-500 line-through":"text-zinc-300":R?"text-gray-400 line-through":"text-gray-700"}`,onDoubleClick:de=>{R||(de.stopPropagation(),L(U))},children:U.name})]}),p.jsxs("div",{className:`text-[10px] ${m?"text-zinc-500":"text-gray-500"} font-mono w-full`,children:[U.lastModified&&p.jsxs("p",{children:["Modif: ",new Date(U.lastModified).toLocaleString([],{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),p.jsxs("p",{className:`${m?"text-zinc-600":"text-gray-400"}`,children:["Creado: ",new Date(U.createdAt).toLocaleDateString()]})]})]}),p.jsx("div",{className:`absolute bottom-2 right-2 flex gap-1 ${R?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity z-50`,onClick:de=>de.stopPropagation(),children:R?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:de=>{de.stopPropagation(),h(U.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-green-500 hover:text-green-400 hover:bg-zinc-950 border-zinc-700":"bg-white text-green-600 hover:text-green-700 hover:bg-gray-50 border-gray-200"}`,title:"Restaurar Caso",children:p.jsx(hy,{size:12})}),p.jsx("button",{onClick:de=>{de.stopPropagation(),f(U.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-red-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-red-600 hover:bg-gray-50 border-gray-200"}`,title:"Eliminar Definitivamente",children:p.jsx(gg,{size:12})})]}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:de=>{de.preventDefault(),de.stopPropagation(),l(U.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-green-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-green-600 hover:bg-gray-50 border-gray-200"}`,title:"Clonar Caso",children:p.jsx(cz,{size:12})}),p.jsx("button",{onClick:de=>{de.stopPropagation(),L(U)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-blue-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-blue-600 hover:bg-gray-50 border-gray-200"}`,title:"Renombrar Caso",children:p.jsx(Cz,{size:12})}),n.length>1&&p.jsx("button",{onClick:de=>{de.stopPropagation(),o(U.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-red-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-red-600 hover:bg-gray-50 border-gray-200"}`,title:"Mover a Papelera",children:p.jsx(gg,{size:12})})]})})]})},U.id)})]})}),p.jsx("div",{className:`p-4 border-t text-center z-50 relative ${m?"bg-zinc-950 border-zinc-800":"bg-gray-50 border-gray-200"}`,children:p.jsx("p",{className:`${m?"text-zinc-600":"text-gray-400"} text-[10px] font-mono`,children:"CONFIDENCIAL - SOLO PARA USO OFICIAL"})})]})})},Xz=({isZenMode:t,setIsZenMode:e,undo:n,redo:r,isDarkMode:i})=>p.jsxs("div",{className:"absolute top-4 right-4 z-50 flex gap-2",children:[!t&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:n,className:`px-4 py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 shadow-lg ${i?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-zinc-700":"bg-white text-zinc-600 border-gray-300 hover:bg-gray-100"}`,title:"Deshacer (Ctrl+Z)",children:[p.jsx(Oz,{size:14})," Deshacer"]}),p.jsxs("button",{onClick:r,className:`px-4 py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 shadow-lg ${i?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-zinc-700":"bg-white text-zinc-600 border-gray-300 hover:bg-gray-100"}`,title:"Rehacer (Ctrl+Y)",children:[p.jsx(kz,{size:14})," Rehacer"]})]}),t&&p.jsxs("button",{onClick:()=>e(!1),className:"px-4 py-2 bg-black/50 hover:bg-black/80 text-white border border-white/20 rounded backdrop-blur-sm flex items-center gap-2 transition-all animate-in fade-in",title:"Salir de Modo Zen (Esc)",children:[p.jsx(xz,{size:14})," Salir"]})]}),py=(t,e)=>{if(!t||!t.type.startsWith("image/"))return;const n=new FileReader;n.onload=r=>{const i=new Image;i.onload=()=>{let o=i.width,a=i.height;if(o>400||a>400){const h=o/a;o>a?(o=400,a=400/h):(a=400,o=400*h)}const l=document.createElement("canvas");l.width=o,l.height=a,l.getContext("2d").drawImage(i,0,0,o,a);const d=l.toDataURL("image/jpeg",.7);e(d,o,a)},i.src=r.target.result},n.readAsDataURL(t)},Jz=({isInteractive:t,reactFlowInstance:e,takeSnapshot:n,setNodes:r})=>{D.useEffect(()=>{const i=s=>{if(!t||!e)return;const o=s.clipboardData.items;for(const a of o)if(a.type.indexOf("image")!==-1){const l=a.getAsFile();py(l,(c,d,h)=>{const f=e.screenToFlowPosition({x:window.innerWidth/2,y:window.innerHeight/2}),m={id:kn(),type:"image",position:f,data:{label:"Imagen Pegada",image:c},style:{width:d,height:h}};n(),r(E=>E.concat(m))})}};return window.addEventListener("paste",i),()=>window.removeEventListener("paste",i)},[e,t,n,r])};function Zz(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const eM=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function rs(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let Fo=null;function dS(t={}){return Fo||(t.includeStyleProperties?(Fo=t.includeStyleProperties,Fo):(Fo=rs(window.getComputedStyle(document.documentElement)),Fo))}function Rh(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function tM(t){const e=Rh(t,"border-left-width"),n=Rh(t,"border-right-width");return t.clientWidth+e+n}function nM(t){const e=Rh(t,"border-top-width"),n=Rh(t,"border-bottom-width");return t.clientHeight+e+n}function hS(t,e={}){const n=e.width||tM(t),r=e.height||nM(t);return{width:n,height:r}}function rM(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Sn=16384;function iM(t){(t.width>Sn||t.height>Sn)&&(t.width>Sn&&t.height>Sn?t.width>t.height?(t.height*=Sn/t.width,t.width=Sn):(t.width*=Sn/t.height,t.height=Sn):t.width>Sn?(t.height*=Sn/t.width,t.width=Sn):(t.width*=Sn/t.height,t.height=Sn))}function Nh(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function sM(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function oM(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),sM(i)}const yn=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||yn(n,e)};function aM(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function lM(t,e){return dS(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function cM(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?aM(n):lM(n,r);return document.createTextNode(`${i}{${s}}`)}function nx(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=eM();try{e.className=`${e.className} ${o}`}catch{return}const a=document.createElement("style");a.appendChild(cM(o,n,i,r)),e.appendChild(a)}function uM(t,e,n){nx(t,e,":before",n),nx(t,e,":after",n)}const rx="application/font-woff",ix="image/jpeg",dM={woff:rx,woff2:rx,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ix,jpeg:ix,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function hM(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function my(t){const e=hM(t).toLowerCase();return dM[e]||""}function fM(t){return t.split(/,/)[1]}function yg(t){return t.search(/^(data:)/)!==-1}function pM(t,e){return`data:${e};base64,${t}`}async function fS(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(n({res:r,result:a.result}))}catch(l){o(l)}},a.readAsDataURL(i)})}const Fp={};function mM(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function gy(t,e,n){const r=mM(t,e,n.includeQueryParams);if(Fp[r]!=null)return Fp[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await fS(t,n.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),fM(a)));i=pM(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Fp[r]=i,i}async function gM(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):Nh(e)}async function yM(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o==null||o.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return Nh(a)}const n=t.poster,r=my(n),i=await gy(n,r,e);return Nh(i)}async function vM(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Tf(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function _M(t,e){return yn(t,HTMLCanvasElement)?gM(t):yn(t,HTMLVideoElement)?yM(t,e):yn(t,HTMLIFrameElement)?vM(t,e):t.cloneNode(pS(t))}const wM=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",pS=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function xM(t,e,n){var r,i;if(pS(e))return e;let s=[];return wM(t)&&t.assignedNodes?s=rs(t.assignedNodes()):yn(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=rs(t.contentDocument.body.childNodes):s=rs(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||yn(t,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>Tf(a,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function EM(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):dS(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),yn(t,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function bM(t,e){yn(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),yn(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function IM(t,e){if(yn(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function TM(t,e,n){return yn(e,Element)&&(EM(t,e,n),uM(t,e,n),bM(t,e),IM(t,e)),e}async function SM(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const l=t.querySelector(a),c=document.querySelector(a);!l&&c&&!r[a]&&(r[a]=await Tf(c,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let l=0;l<i.length;l++)a.appendChild(i[l]);t.appendChild(o)}return t}async function Tf(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>_M(r,e)).then(r=>xM(t,r,e)).then(r=>TM(t,r,e)).then(r=>SM(r,e))}const mS=/url\((['"]?)([^'"]+?)\1\)/g,CM=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,AM=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function kM(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function RM(t){const e=[];return t.replace(mS,(n,r,i)=>(e.push(i),n)),e.filter(n=>!yg(n))}async function NM(t,e,n,r,i){try{const s=n?Zz(e,n):e,o=my(e);let a;return i||(a=await gy(s,o,r)),t.replace(kM(e),`$1${a}$3`)}catch{}return t}function PM(t,{preferredFontFormat:e}){return e?t.replace(AM,n=>{for(;;){const[r,,i]=CM.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function gS(t){return t.search(mS)!==-1}async function yS(t,e,n){if(!gS(t))return t;const r=PM(t,n);return RM(r).reduce((s,o)=>s.then(a=>NM(a,o,e,n)),Promise.resolve(r))}async function $o(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await yS(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function DM(t,e){await $o("background",t,e)||await $o("background-image",t,e),await $o("mask",t,e)||await $o("-webkit-mask",t,e)||await $o("mask-image",t,e)||await $o("-webkit-mask-image",t,e)}async function VM(t,e){const n=yn(t,HTMLImageElement);if(!(n&&!yg(t.src))&&!(yn(t,SVGImageElement)&&!yg(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await gy(r,my(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(c){o(c)}}:o;const a=t;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function OM(t,e){const r=rs(t.childNodes).map(i=>vS(i,e));await Promise.all(r).then(()=>t)}async function vS(t,e){yn(t,Element)&&(await DM(t,e),await VM(t,e),await OM(t,e))}function zM(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const sx={};async function ox(t){let e=sx[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},sx[t]=e,e}async function ax(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),fS(a,e.fetchRequestInit,({result:l})=>(n=n.replace(o,`url(${l})`),[o,l]))});return Promise.all(s).then(()=>n)}function lx(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=a.exec(r),l===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(l[0])}return e}async function MM(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{rs(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const l=s.href,c=ox(l).then(d=>ax(d,e)).then(d=>lx(d).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?a+=1:i.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:h,error:f})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(c)}})}catch(s){const o=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(ox(i.href).then(a=>ax(a,e)).then(a=>lx(a).forEach(l=>{o.insertRule(l,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{rs(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function LM(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>gS(e.style.getPropertyValue("src")))}async function jM(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=rs(t.ownerDocument.styleSheets),r=await MM(n,e);return LM(r)}function _S(t){return t.trim().replace(/["']/g,"")}function FM(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(_S(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function $M(t,e){const n=await jM(t,e),r=FM(t);return(await Promise.all(n.filter(s=>r.has(_S(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return yS(s.cssText,o,e)}))).join(`
`)}async function UM(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await $M(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function BM(t,e={}){const{width:n,height:r}=hS(t,e),i=await Tf(t,e,!0);return await UM(i,e),await vS(i,e),zM(i,e),await oM(i,n,r)}async function qM(t,e={}){const{width:n,height:r}=hS(t,e),i=await BM(t,e),s=await Nh(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=e.pixelRatio||rM(),c=e.canvasWidth||n,d=e.canvasHeight||r;return o.width=c*l,o.height=d*l,e.skipAutoScale||iM(o),o.style.width=`${c}`,o.style.height=`${d}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function cx(t,e={}){return(await qM(t,e)).toDataURL()}const HM=({reactFlowWrapper:t,reactFlowInstance:e,boards:n,currentBoardId:r,bgType:i,isDarkMode:s,setNodes:o})=>{const[a,l]=D.useState(!1),c=D.useCallback(async()=>{if(t.current===null||!e||!o)return;l(!0),await new Promise(z=>setTimeout(z,100));const{x:d,y:h,zoom:f}=e.getViewport(),m=e.getNodes(),E=m.filter(z=>z.selected),x=E.map(z=>z.id);x.length>0&&(o(z=>z.map(F=>({...F,selected:!1}))),await new Promise(z=>setTimeout(z,50)));const N=E.length>0?E:m;if(N.length===0){l(!1),x.length>0&&o(z=>z.map(F=>({...F,selected:x.includes(F.id)})));return}const y=mu(N),v=100,T=y.width+v*2,A=y.height+v*2,O=-y.x+v,M=-y.y+v;e.setViewport({x:O,y:M,zoom:1}),await new Promise(z=>setTimeout(z,1e3)),document.fonts&&await document.fonts.ready;const b=t.current.querySelector(".react-flow");if(!b){l(!1),x.length>0&&o(z=>z.map(F=>({...F,selected:x.includes(F.id)})));return}const w=n.find(z=>z.id===r),C=(w?w.name:"Tablero sin nombre").toUpperCase(),R=Math.max(16,Math.min(72,T*.04)),k=R*.5;let P={};i==="cork"?P={backgroundColor:s?"#18181b":"#e5e5e5",backgroundImage:s?"radial-gradient(rgba(255,255,255,0.05) 1px, transparent 1px), radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px)":"radial-gradient(#999 1px, transparent 1px), radial-gradient(#999 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:"0 0, 20px 20px"}:i==="blackboard"?P={backgroundColor:s?"#27272a":"#ffffff",backgroundImage:s?"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)":"radial-gradient(#e5e7eb 2px, transparent 2px)",backgroundSize:s?"100px 100px":"30px 30px"}:P={backgroundColor:s?"#1e293b":"#f0f9ff",backgroundImage:s?"linear-gradient(#334155 1px, transparent 1px), linear-gradient(90deg, #334155 1px, transparent 1px)":"linear-gradient(#cbd5e1 1px, transparent 1px), linear-gradient(90deg, #cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"};const $={pixelRatio:2,skipAutoScale:!0,backgroundColor:P.backgroundColor,width:T,height:A,style:{width:`${T}px`,height:`${A}px`,overflow:"visible",fontFamily:"'Courier Prime', monospace",...P},imagePlaceholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",filter:z=>!(z.classList&&(z.classList.contains("react-flow__controls")||z.classList.contains("react-flow__minimap")||z.classList.contains("react-flow__attribution")))};try{let z;try{z=await cx(b,{...$,useCORS:!0})}catch(oe){console.warn("Error exportando con CORS, reintentando sin CORS...",oe),await new Promise(he=>setTimeout(he,1e3)),z=await cx(b,{...$,useCORS:!1})}const F=document.createElement("canvas"),j=$.pixelRatio||1;F.width=T*j,F.height=A*j;const L=F.getContext("2d"),B=new Image;await new Promise((oe,he)=>{B.onload=oe,B.onerror=he,B.src=z}),L.drawImage(B,0,0);const G=R*j;L.font=`bold ${G}px "Courier Prime", monospace`,L.fillStyle=s?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",L.shadowColor=s?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.2)",L.shadowBlur=3*j,L.shadowOffsetX=1*j,L.shadowOffsetY=1*j,L.textAlign="right",L.textBaseline="bottom";const U=k*j;L.fillText(C,F.width-U,F.height-U),z=F.toDataURL("image/png");const Y=document.createElement("a"),X=n.find(oe=>oe.id===r),ee=X?X.name.replace(/[^a-z0-9\u00C0-\u017F\s-_]/gi,""):"caso-detective";Y.download=`${ee}.png`,Y.href=z,Y.click()}catch(z){console.error("Error al exportar",z),alert("Error al generar la imagen. Si utilizas imgenes externas (URL), es posible que tengan restricciones de seguridad (CORS).")}finally{e.setViewport({x:d,y:h,zoom:f}),x.length>0&&o(z=>z.map(F=>({...F,selected:x.includes(F.id)}))),l(!1)}},[t,s,e,n,r,i,o]);return{isExporting:a,onExport:c}},KM="default-case",$p=(t,e=[])=>{let n=localStorage.getItem(`board-${t}-nodes`),r=localStorage.getItem(`board-${t}-edges`),i=localStorage.getItem(`board-${t}-bg`);return!n&&t===KM&&(n=localStorage.getItem("detective-board-nodes"),r=localStorage.getItem("detective-board-edges")),{nodes:n?JSON.parse(n):e,edges:r?JSON.parse(r):[],bgType:i||"cork"}},fd="default-case",GM=({nodes:t,edges:e,bgType:n,setNodes:r,setEdges:i,setBgType:s,reactFlowInstance:o,clearHistory:a,setCaseManagerOpen:l,setConfirmModal:c,lastSaved:d})=>{const[h,f]=D.useState(()=>{try{const w=localStorage.getItem("detective-boards-list");return w?JSON.parse(w):localStorage.getItem("detective-board-nodes")?[{id:fd,name:"Caso #001: Principal",createdAt:Date.now(),lastModified:Date.now()}]:[{id:fd,name:"Caso #001: Nuevo",createdAt:Date.now(),lastModified:Date.now()}]}catch{return[{id:fd,name:"Caso #001: Nuevo",createdAt:Date.now(),lastModified:Date.now()}]}}),[m,E]=D.useState(()=>{try{const w=localStorage.getItem("detective-boards-trash");return w?JSON.parse(w):[]}catch{return[]}}),[x,N]=D.useState(()=>localStorage.getItem("detective-current-board-id")||fd);D.useEffect(()=>{localStorage.setItem("detective-boards-list",JSON.stringify(h))},[h]),D.useEffect(()=>{localStorage.setItem("detective-boards-trash",JSON.stringify(m))},[m]),D.useEffect(()=>{localStorage.setItem("detective-current-board-id",x)},[x]),D.useEffect(()=>{d&&f(w=>w.map(I=>I.id===x?{...I,lastModified:d.getTime()}:I))},[d,x]),D.useEffect(()=>{const w=h.find(I=>I.id===x);w&&(document.title=`${w.name} | Detective Board`)},[x,h]);const y=D.useCallback(w=>{localStorage.setItem(`board-${x}-nodes`,JSON.stringify(t)),localStorage.setItem(`board-${x}-edges`,JSON.stringify(e)),localStorage.setItem(`board-${x}-bg`,n);const I=$p(w);r(I.nodes),i(I.edges),s(I.bgType),N(w),a(),l(!1),o&&setTimeout(()=>{o.fitView({duration:800,padding:.2})},100)},[x,t,e,n,r,i,s,a,o,l]),v=w=>{if(!w)return;const I=kn(),C={id:I,name:w,createdAt:Date.now(),lastModified:Date.now()};f(R=>[...R,C]),y(I)},T=w=>{h.length<=1||c({isOpen:!0,title:"MOVER A PAPELERA?",message:"El caso se mover a la papelera. Podrs restaurarlo si lo necesitas.",isDanger:!0,confirmText:"Mover",onConfirm:()=>{f(I=>I.map(C=>C.id===w?{...C,isDeleting:!0}:C)),setTimeout(()=>{const I=h.find(R=>R.id===w),C=h.filter(R=>R.id!==w);if(I){const{isDeleting:R,...k}=I;E(P=>[{...k,deletedAt:Date.now()},...P])}if(f(C),x===w){const R=C[0].id,k=$p(R);r(k.nodes),i(k.edges),s(k.bgType),N(R),a(),o&&setTimeout(()=>{o.fitView({duration:800,padding:.2})},100)}},500)}})},A=D.useCallback(w=>{const I=m.find(C=>C.id===w);I&&(E(C=>C.filter(R=>R.id!==w)),f(C=>[...C,{...I,isDeleting:!1}]))},[m]),O=D.useCallback(w=>{c({isOpen:!0,title:"ELIMINAR DEFINITIVAMENTE?",message:"Esta accin es irreversible. Los datos del caso se borrarn del disco para siempre.",isDanger:!0,confirmText:"Eliminar",onConfirm:()=>{E(I=>I.filter(C=>C.id!==w)),localStorage.removeItem(`board-${w}-nodes`),localStorage.removeItem(`board-${w}-edges`),localStorage.removeItem(`board-${w}-bg`)}})},[]),M=(w,I)=>{f(C=>C.map(R=>R.id===w?{...R,name:I}:R))},S=D.useCallback(w=>{f(w)},[]),b=D.useCallback(w=>{const I=h.find(C=>C.id===w);I&&c({isOpen:!0,title:"CLONAR CASO?",message:`Deseas crear una copia del expediente "${I.name}"?`,confirmText:"Clonar",onConfirm:()=>{let C,R,k;if(w===x)C=t,R=e,k=n;else{const z=$p(w);C=z.nodes,R=z.edges,k=z.bgType}const P=kn(),$={id:P,name:`${I.name} (Copia)`,createdAt:Date.now(),lastModified:Date.now()};localStorage.setItem(`board-${P}-nodes`,JSON.stringify(C)),localStorage.setItem(`board-${P}-edges`,JSON.stringify(R)),localStorage.setItem(`board-${P}-bg`,k),f(z=>{const F=z.findIndex(L=>L.id===w),j=[...z];return j.splice(F+1,0,$),j}),y(P)}})},[h,y,x,t,e,n,c]);return D.useEffect(()=>{h.length>0&&!h.find(w=>w.id===x)&&y(h[0].id)},[h,x,y]),{boards:h,setBoards:f,trash:m,currentBoardId:x,setCurrentBoardId:N,handleSwitchBoard:y,handleCreateBoard:v,handleDeleteBoard:T,handleRestoreBoard:A,handlePermanentDelete:O,handleRenameBoard:M,handleReorderBoards:S,handleCloneBoard:b}},WM=({onSave:t,undo:e,redo:n,duplicateSelected:r,navigateSearch:i,reactFlowInstance:s,edges:o,setEdges:a,takeSnapshot:l,connectionLineType:c,connectionColor:d})=>{D.useEffect(()=>{const h=f=>{if((f.ctrlKey||f.metaKey)&&f.key==="s"&&(f.preventDefault(),t()),(f.ctrlKey||f.metaKey)&&f.key==="z"&&(f.preventDefault(),f.shiftKey?n():e()),(f.ctrlKey||f.metaKey)&&f.key==="y"&&(f.preventDefault(),n()),(f.ctrlKey||f.metaKey)&&f.key==="d"&&(f.preventDefault(),r()),f.key==="F3"&&(f.preventDefault(),f.shiftKey?i("prev"):i("next")),f.shiftKey&&f.key.toLowerCase()==="c"){if(f.preventDefault(),!s)return;const m=s.getNodes().filter(E=>E.selected);if(m.length>=2){m.sort((x,N)=>x.position.x-N.position.x);const E=[];for(let x=0;x<m.length-1;x++){const N=m[x],y=m[x+1];o.some(T=>T.source===N.id&&T.target===y.id||T.source===y.id&&T.target===N.id)||E.push({id:kn(),source:N.id,target:y.id,type:c,style:{stroke:d,strokeWidth:2},className:"quick-draw"})}E.length>0&&(l(),a(x=>x.concat(E)))}}};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,e,n,r,i,o,c,d,s,a,l])},QM=({isInteractive:t,reactFlowInstance:e,setNodes:n,takeSnapshot:r,setPendingStampNodeId:i,setInputModalOpen:s,setEditingEdge:o,setEditingNode:a})=>{const l=D.useCallback(d=>{if(d.preventDefault(),!t){d.dataTransfer.dropEffect="none";return}d.dataTransfer.dropEffect="move"},[t]),c=D.useCallback(d=>{if(d.preventDefault(),!t)return;if(d.dataTransfer.files&&d.dataTransfer.files.length>0){const N=d.dataTransfer.files[0];py(N,(y,v,T)=>{const A=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),O={id:kn(),type:"image",position:A,data:{label:"Imagen",image:y},style:{width:v,height:T}};r(),n(M=>M.concat(O))});return}const h=d.dataTransfer.getData("text/uri-list")||d.dataTransfer.getData("text/plain");if(h&&(h.startsWith("data:image")||h.startsWith("http"))){const N=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:kn(),type:"image",position:N,data:{label:"Imagen Extrada",image:h},style:{width:300,height:300}};r(),n(v=>v.concat(y));return}const f=d.dataTransfer.getData("application/reactflow"),m=d.dataTransfer.getData("application/category");if(typeof f>"u"||!f)return;if(f==="stamp"){const N=d.dataTransfer.getData("application/category"),y=N==="custom",v=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),A=e.getIntersectingNodes({x:v.x,y:v.y,width:1,height:1}).slice().reverse().find(O=>O.type==="evidence"||O.type==="note"||O.type==="image");if(A){if(y){i(A.id),s(!0),o(null),a(null);return}r(),n(O=>O.map(M=>M.id===A.id?{...M,data:{...M.data,status:N}}:M))}return}if(f==="zone"){const N=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:kn(),type:"zone",position:N,data:{label:"ZONA SEGURA"},style:{width:300,height:300,backgroundColor:"rgba(113, 113, 122, 0.05)",borderColor:"#71717a"}};r(),n(v=>[y,...v]);return}if(f==="url"){const N=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:kn(),type:"url",position:N,data:{url:"",label:"Nuevo Enlace"},style:{width:300,height:250}};r(),n(v=>v.concat(y));return}const E=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),x={id:kn(),type:f,position:E,data:{label:`Nuevo ${m}`,category:m,description:"Doble click para editar..."}};r(),n(N=>N.concat(x))},[e,n,t,r,i,s,o,a]);return{onDragOver:l,onDrop:c}},yy=({status:t})=>{if(typeof t=="object"&&t.type==="custom")return p.jsx("div",{className:"border-4 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif",borderColor:t.color,color:t.color,backgroundColor:`${t.color}30`},children:t.label});switch(t){case"solved":return p.jsx("div",{className:"border-4 border-green-600 text-green-600 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-green-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"RESUELTO"});case"discarded":return p.jsx("div",{className:"border-4 border-red-600 text-red-600 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-red-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"DESCARTADO"});case"key":return p.jsx("div",{className:"border-4 border-yellow-500 text-yellow-500 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-yellow-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"CLAVE"});case"question":return p.jsx("div",{className:"border-4 border-blue-500 text-blue-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-blue-950/30",children:p.jsx(mg,{size:40,strokeWidth:3})});case"important":return p.jsx("div",{className:"border-4 border-orange-500 text-orange-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-orange-950/30",children:p.jsx(cS,{size:40,strokeWidth:3})});case"verify":return p.jsx("div",{className:"border-4 border-purple-500 text-purple-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-purple-950/30",children:p.jsx(tS,{size:40,strokeWidth:3})});case"danger":return p.jsx("div",{className:"border-4 border-red-600 text-red-600 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-red-950/30",children:p.jsx(oS,{size:40,strokeWidth:3})});case"confidential":return p.jsx("div",{className:"border-4 border-zinc-500 text-zinc-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-zinc-950/30",children:p.jsx(Oa,{size:40,strokeWidth:3})});default:return null}},ux={person:{color:"border-blue-500",icon:fy,dark:{bg:"bg-gradient-to-br from-blue-900 to-blue-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-blue-50 to-blue-100",text:"text-blue-900/70",title:"text-blue-950",border:"border-black/10"}},place:{color:"border-green-500",icon:nS,dark:{bg:"bg-gradient-to-br from-green-900 to-green-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-green-50 to-green-100",text:"text-green-900/70",title:"text-green-950",border:"border-black/10"}},clue:{color:"border-orange-500",icon:ly,dark:{bg:"bg-gradient-to-br from-orange-900 to-orange-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-orange-50 to-orange-100",text:"text-orange-900/70",title:"text-orange-950",border:"border-black/10"}},event:{color:"border-red-500",icon:JT,dark:{bg:"bg-gradient-to-br from-red-900 to-red-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-red-50 to-red-100",text:"text-red-900/70",title:"text-red-950",border:"border-black/10"}}},YM=({id:t,data:e,selected:n,isDarkMode:r})=>{const i=ux[e.category]||ux.clue,s=r?i.dark:i.light,o=i.icon,{setNodes:a}=zr(),l=!!e.locked,[c,d]=D.useState(!1),h=D.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]),f=m=>{m.stopPropagation(),a(E=>E.map(x=>{if(x.id===t){const N=!!x.data.locked;return{...x,draggable:!0,data:{...x.data,locked:!N}}}return x}))};return p.jsxs("div",{className:`
        relative h-full w-full shadow-[0_10px_20px_-5px_rgba(0,0,0,0.6)] rounded-sm border-l-4 transition-all duration-300 ease-out group
        ${i.color} ${s.bg}
        ${n?"ring-2 ring-white scale-105 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.9)] z-50":"hover:scale-105 hover:-translate-y-1 hover:shadow-[0_20px_40px_-5px_rgba(0,0,0,0.8)] hover:z-40"}
        ${l?"nodrag":""} ${e.isDeleting?"deleting-default":""}
      `,children:[p.jsx(nl,{color:"#ef4444",isVisible:n&&!l,minWidth:250,minHeight:150,handleStyle:{width:15,height:15}}),(n||l)&&p.jsx("button",{onClick:f,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${l?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:l?p.jsx(il,{size:12}):p.jsx(rl,{size:12})}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(wn,{type:"target",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(wn,{type:"source",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&p.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${h}deg)`},children:p.jsx(yy,{status:e.status},JSON.stringify(e.status))}),p.jsxs("div",{className:"p-3 flex flex-col gap-2 h-full w-full overflow-hidden",children:[p.jsxs("div",{className:`flex items-center justify-between border-b ${s.border} pb-2`,children:[p.jsx("span",{className:`text-xs uppercase tracking-widest ${s.text} font-bold`,children:e.category}),p.jsx(o,{size:16,className:s.text})]}),e.image&&p.jsx("div",{className:`nodrag w-full h-32 overflow-hidden rounded-sm border ${s.border} sepia-[.5] cursor-zoom-in hover:sepia-0 transition-all`,onClick:m=>{m.stopPropagation(),d(!0)},children:p.jsx("img",{src:e.image,alt:"evidence",className:"w-full h-full object-cover"})}),c&&jc.createPortal(p.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center p-8 cursor-zoom-out backdrop-blur-sm animate-in fade-in duration-200",onClick:m=>{m.stopPropagation(),d(!1)},children:p.jsx("img",{src:e.image,alt:"Evidence HD",className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm"})}),document.body),p.jsxs("div",{children:[p.jsx("h3",{className:`text-lg font-bold ${s.title} leading-tight font-mono`,children:e.label}),p.jsx("p",{className:`text-xs ${s.text} mt-1 font-mono leading-relaxed`,children:e.description})]})]})]})},XM=D.memo(YM),Up={yellow:{bg:"from-yellow-100 to-yellow-300",btn:"bg-yellow-500"},green:{bg:"from-green-100 to-green-300",btn:"bg-green-500"},blue:{bg:"from-blue-100 to-blue-300",btn:"bg-blue-500"},red:{bg:"from-red-100 to-red-300",btn:"bg-red-500"},purple:{bg:"from-purple-100 to-purple-300",btn:"bg-purple-500"}},JM=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=zr(),o=!!e.locked,a=Up[e.color]||Up.yellow,l=D.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]),c=f=>{f.stopPropagation(),s(m=>m.map(E=>{if(E.id===t){const x=!!E.data.locked;return{...E,draggable:!0,data:{...E.data,locked:!x}}}return E}))},d=f=>{s(m=>m.map(E=>E.id===t?{...E,data:{...E.data,color:f}}:E))},h=()=>{s(f=>f.map(m=>m.id===t?{...m,data:{...m.data,status:null}}:m))};return p.jsxs(p.Fragment,{children:[p.jsx(nl,{color:"#eab308",isVisible:n&&!o,minWidth:150,minHeight:150,handleStyle:{width:15,height:15}}),n&&p.jsx("button",{onClick:()=>{i({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:p.jsx(ys,{size:12})}),(n||o)&&p.jsx("button",{onClick:c,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${o?"bg-red-900 border-red-700 text-red-200":"bg-yellow-500 border-yellow-700 text-white hover:bg-yellow-600"}`,children:o?p.jsx(il,{size:12}):p.jsx(rl,{size:12})}),n&&!o&&p.jsxs("div",{className:`nodrag absolute -bottom-8 left-1/2 transform -translate-x-1/2 flex gap-1 p-1.5 rounded-full shadow-xl border z-50 backdrop-blur-sm ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[Object.entries(Up).map(([f,m])=>p.jsx("button",{onClick:()=>d(f),className:`w-4 h-4 rounded-full ${m.btn} border border-white/20 hover:scale-125 transition-transform`},f)),e.status&&p.jsx("button",{onClick:h,className:`w-4 h-4 rounded-full flex items-center justify-center border border-white/20 hover:scale-125 transition-transform ml-1 ${r?"bg-zinc-700 text-zinc-400 hover:text-white":"bg-gray-200 text-gray-500 hover:text-black"}`,title:"Quitar Sello",children:p.jsx(ay,{size:10})})]}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(wn,{type:"target",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(wn,{type:"source",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&p.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${l}deg)`},children:p.jsx(yy,{status:e.status},JSON.stringify(e.status))}),p.jsxs("div",{className:`relative h-full w-full bg-gradient-to-br ${a.bg} shadow-[5px_5px_15px_rgba(0,0,0,0.5)] rotate-1 p-4 note-rough border-t border-l border-white/50 flex flex-col transition-all duration-300 ease-out hover:scale-105 hover:-translate-y-1 hover:shadow-[10px_15px_25px_rgba(0,0,0,0.6)] overflow-hidden ${o?"nodrag":""} ${e.isDeleting?"deleting-note":""}`,children:[p.jsx("div",{className:"absolute inset-0 paper-texture pointer-events-none opacity-50 mix-blend-multiply"}),p.jsx("textarea",{name:"note-content",className:"nodrag relative z-10 w-full h-full bg-transparent resize-none outline-none text-gray-800 placeholder-yellow-600/50 text-lg leading-relaxed",placeholder:"Escribe una nota...",defaultValue:e.label,onChange:f=>e.label=f.target.value,style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", sans-serif'}})]})]})},ZM=D.memo(JM),eL=({isOpen:t,onClose:e,imageSrc:n,onCropComplete:r})=>{const[i,s]=D.useState(1),[o,a]=D.useState({x:0,y:0}),[l,c]=D.useState(!1),[d,h]=D.useState({x:0,y:0}),f=D.useRef(null),m=D.useRef(null);if(D.useEffect(()=>{t&&(s(1),a({x:0,y:0}))},[t,n]),!t||!n)return null;const E=v=>{c(!0),h({x:v.clientX-o.x,y:v.clientY-o.y})},x=v=>{l&&a({x:v.clientX-d.x,y:v.clientY-d.y})},N=()=>{c(!1)},y=()=>{const v=document.createElement("canvas"),T=v.getContext("2d"),A=m.current,O=f.current,M=A.clientWidth,S=A.clientHeight;v.width=M,v.height=S;const b=M/2,w=S/2;T.translate(b+o.x,w+o.y),T.scale(i,i),T.drawImage(O,-O.naturalWidth/2,-O.naturalHeight/2),r(v.toDataURL("image/jpeg",.9)),e()};return p.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center p-4 animate-in fade-in duration-200 select-none",onMouseUp:N,onMouseLeave:N,children:[p.jsxs("div",{className:"w-full max-w-lg flex justify-between items-center mb-4",children:[p.jsxs("h2",{className:"text-zinc-100 font-mono font-bold text-lg flex items-center gap-2",children:[p.jsx(bz,{size:18})," AJUSTAR RECORTE"]}),p.jsx("button",{onClick:e,className:"text-zinc-400 hover:text-white",children:p.jsx(ys,{})})]}),p.jsxs("div",{ref:m,className:"relative w-[400px] h-[400px] bg-zinc-900 overflow-hidden border-2 border-dashed border-zinc-500 cursor-move shadow-2xl rounded-sm",onMouseDown:E,onMouseMove:x,children:[p.jsx("img",{ref:f,src:n,alt:"Crop target",className:"absolute max-w-none origin-center pointer-events-none",style:{left:"50%",top:"50%",transform:`translate(-50%, -50%) translate(${o.x}px, ${o.y}px) scale(${i})`}}),p.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-30",children:[p.jsx("div",{className:"w-full h-1/3 border-b border-white/50 absolute top-0"}),p.jsx("div",{className:"w-full h-1/3 border-b border-white/50 absolute top-1/3"}),p.jsx("div",{className:"h-full w-1/3 border-r border-white/50 absolute left-0"}),p.jsx("div",{className:"h-full w-1/3 border-r border-white/50 absolute left-1/3"})]})]}),p.jsxs("div",{className:"mt-6 flex items-center gap-4 w-full max-w-md bg-zinc-900 p-4 rounded-lg border border-zinc-800",children:[p.jsx(jz,{size:20,className:"text-zinc-400"}),p.jsx("input",{type:"range",name:"crop-scale",min:"0.1",max:"3",step:"0.05",value:i,onChange:v=>s(parseFloat(v.target.value)),className:"w-full accent-red-600 h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer"}),p.jsx(Lz,{size:20,className:"text-zinc-400"})]}),p.jsxs("div",{className:"mt-6 flex gap-4",children:[p.jsx("button",{onClick:e,className:"px-6 py-2 border border-zinc-600 text-zinc-300 hover:text-white rounded font-bold uppercase text-xs tracking-wider transition-colors",children:"Cancelar"}),p.jsxs("button",{onClick:y,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded font-bold uppercase text-xs tracking-wider shadow-lg flex items-center gap-2 transition-colors",children:[p.jsx(ZT,{size:16})," Aplicar"]})]})]})},tL=({id:t,data:e,selected:n,isDarkMode:r})=>{const[i,s]=D.useState(e.image),[o,a]=D.useState(!1),[l,c]=D.useState(!1),[d,h]=D.useState(!1),[f,m]=D.useState(e.filters||{brightness:100,contrast:100,grayscale:0,sepia:0}),{deleteElements:E,setNodes:x,getNode:N}=zr(),y=!!e.locked,v=D.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]);D.useEffect(()=>{e.filters&&m(e.filters)},[e.filters]),D.useEffect(()=>{if(e.image&&e.image.startsWith("http")){const I=new Image;I.crossOrigin="Anonymous",I.src=e.image,I.onload=()=>{try{const C=document.createElement("canvas");C.width=I.width,C.height=I.height,C.getContext("2d").drawImage(I,0,0);const k=C.toDataURL("image/jpeg");k.length>100&&(s(k),x(P=>P.map($=>$.id===t?{...$,data:{...$.data,image:k}}:$)))}catch{}}}},[]);const T=I=>{I.stopPropagation(),x(C=>C.map(R=>{if(R.id===t){const k=!!R.data.locked;return{...R,draggable:!0,data:{...R.data,locked:!k}}}return R}))},A=I=>{const C=I.target.files[0];C&&py(C,(R,k,P)=>{s(R),x($=>$.map(z=>z.id===t?{...z,data:{...z.data,image:R},style:{...z.style,width:k,height:P}}:z))})},O=I=>{if(!i)return;const C=new Image;C.src=i,C.onload=()=>{var j,L;const R=document.createElement("canvas");R.width=C.height,R.height=C.width;const k=R.getContext("2d");k.translate(R.width/2,R.height/2),k.rotate(I==="right"?90*Math.PI/180:-90*Math.PI/180),k.drawImage(C,-C.width/2,-C.height/2);const P=R.toDataURL();s(P);const $=N(t),z=(j=$==null?void 0:$.style)==null?void 0:j.width,F=(L=$==null?void 0:$.style)==null?void 0:L.height;x(B=>B.map(G=>G.id===t?{...G,data:{...G.data,image:P},style:{...G.style,width:F,height:z}}:G))}},M=()=>{c(!0)},S=I=>{s(I),x(C=>C.map(R=>R.id===t?{...R,data:{...R.data,image:I},style:{...R.style,width:300,height:300}}:R))},b=()=>{x(I=>I.map(C=>C.id===t?{...C,data:{...C.data,status:null}}:C))},w=(I,C)=>{const R={...f,[I]:C};m(R),x(k=>k.map(P=>P.id===t?{...P,data:{...P.data,filters:R}}:P))};return p.jsxs(p.Fragment,{children:[p.jsx(nl,{color:"#ef4444",isVisible:n&&!y,minWidth:100,minHeight:100,handleStyle:{width:15,height:15}}),n&&p.jsx("button",{onClick:()=>{E({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:p.jsx(ys,{size:12})}),(n||y)&&p.jsx("button",{onClick:T,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${y?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:y?p.jsx(il,{size:12}):p.jsx(rl,{size:12})}),n&&!y&&i&&p.jsxs("div",{className:`nodrag absolute -bottom-9 left-1/2 transform -translate-x-1/2 flex gap-1 p-1.5 rounded-full shadow-xl border z-50 backdrop-blur-sm items-center ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[p.jsx("button",{onClick:()=>h(!d),className:`p-1.5 rounded-full transition-colors ${d?"bg-blue-600 text-white":r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Filtros",children:p.jsx(Dz,{size:14})}),p.jsx("div",{className:`w-px h-4 mx-0.5 ${r?"bg-zinc-700":"bg-gray-300"}`}),p.jsx("button",{onClick:()=>O("left"),className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Rotar Izquierda",children:p.jsx(Rz,{size:14})}),p.jsx("button",{onClick:M,className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Recortar",children:p.jsx(uz,{size:14})}),p.jsx("button",{onClick:()=>O("right"),className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Rotar Derecha",children:p.jsx(Nz,{size:14})}),e.status&&p.jsx("button",{onClick:b,className:`p-1.5 text-red-500 hover:text-red-400 rounded-full transition-colors ${r?"hover:bg-zinc-700":"hover:bg-gray-200"}`,title:"Quitar Sello",children:p.jsx(ay,{size:14})})]}),d&&n&&!y&&p.jsxs("div",{className:`nodrag absolute -bottom-44 left-1/2 transform -translate-x-1/2 p-3 rounded-lg border z-50 w-48 backdrop-blur-sm flex flex-col gap-2 shadow-2xl animate-in fade-in slide-in-from-bottom-2 ${r?"bg-zinc-900/95 border-zinc-700":"bg-white/95 border-gray-200"}`,children:[p.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[p.jsx("span",{children:"Brillo"})," ",p.jsxs("span",{children:[f.brightness,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"200",value:f.brightness,onChange:I=>w("brightness",parseInt(I.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),p.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[p.jsx("span",{children:"Contraste"})," ",p.jsxs("span",{children:[f.contrast,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"200",value:f.contrast,onChange:I=>w("contrast",parseInt(I.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),p.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[p.jsx("span",{children:"B/N"})," ",p.jsxs("span",{children:[f.grayscale,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"100",value:f.grayscale,onChange:I=>w("grayscale",parseInt(I.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),p.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[p.jsx("span",{children:"Sepia"})," ",p.jsxs("span",{children:[f.sepia,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"100",value:f.sepia,onChange:I=>w("sepia",parseInt(I.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`})]}),p.jsx("div",{className:"tape-visual"}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(wn,{type:"target",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(wn,{type:"source",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&p.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${v}deg)`},children:p.jsx(yy,{status:e.status},JSON.stringify(e.status))}),p.jsx("div",{className:`h-full w-full ${i?"bg-zinc-100 p-2 pb-10 rotate-1 hover:rotate-0":r?"bg-zinc-900/50 border-zinc-700 hover:border-zinc-500":"bg-gray-200/50 border-gray-400 hover:border-gray-500"} shadow-[0_10px_20px_-5px_rgba(0,0,0,0.7)] flex items-center justify-center overflow-hidden rounded-sm relative group transition-all duration-300 ease-out hover:scale-105 hover:-translate-y-1 hover:shadow-[0_25px_50px_-12px_rgba(0,0,0,0.9)] ${y?"nodrag":""} ${e.isDeleting?"deleting-image":""} border-2 border-dashed`,children:i?p.jsxs("div",{className:"w-full h-full cursor-zoom-in",onClick:I=>{I.stopPropagation(),a(!0)},children:[p.jsx("img",{src:i,alt:"evidence",className:"w-full h-full object-cover border border-zinc-200",style:{filter:`brightness(${f.brightness}%) contrast(${f.contrast}%) grayscale(${f.grayscale}%) sepia(${f.sepia}%)`}}),p.jsx("div",{className:"absolute bottom-0 left-0 w-full h-10 flex items-center justify-center px-2",children:p.jsx("input",{type:"text",name:"image-caption",className:"nodrag w-full bg-transparent text-center text-zinc-800 text-xs outline-none placeholder-zinc-400/50 border-none p-0",placeholder:"",defaultValue:e.caption,onChange:I=>e.caption=I.target.value,onClick:I=>I.stopPropagation(),style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", cursive'}})})]}):p.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full p-2 gap-1",children:[p.jsxs("label",{className:`nodrag cursor-pointer flex flex-col items-center gap-1 transition-colors ${r?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,children:[p.jsx(cy,{size:24}),p.jsx("span",{className:"text-[10px] font-mono uppercase text-center",children:"Subir Local"}),p.jsx("input",{type:"file",name:"upload-image",className:"hidden",accept:"image/*",onChange:A})]}),p.jsx("div",{className:`text-[10px] font-mono ${r?"text-zinc-600":"text-zinc-400"}`,children:"- O -"}),p.jsx("input",{type:"text",name:"image-url",placeholder:"Pegar URL...",className:`nodrag w-full border text-[10px] p-1 rounded outline-none focus:border-purple-500 font-mono text-center ${r?"bg-zinc-950 border-zinc-700 text-zinc-300":"bg-white border-gray-300 text-zinc-700"}`,onKeyDown:I=>{if(I.key==="Enter"){const C=I.currentTarget.value;s(C),e.image=C;const R=new Image;R.crossOrigin="Anonymous",R.onload=()=>{try{const k=document.createElement("canvas");k.width=R.width,k.height=R.height,k.getContext("2d").drawImage(R,0,0);const $=k.toDataURL("image/jpeg");s($),x(z=>z.map(F=>F.id===t?{...F,data:{...F.data,image:$}}:F))}catch(k){console.warn("CORS blocked",k)}},R.src=C}}})]})}),o&&jc.createPortal(p.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center p-8 cursor-zoom-out backdrop-blur-sm animate-in fade-in duration-200",onClick:I=>{I.stopPropagation(),a(!1)},children:p.jsx("img",{src:i,alt:"Evidence HD",className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm",style:{filter:`brightness(${f.brightness}%) contrast(${f.contrast}%) grayscale(${f.grayscale}%) sepia(${f.sepia}%)`}})}),document.body),l&&jc.createPortal(p.jsx(eL,{isOpen:l,onClose:()=>c(!1),imageSrc:i,onCropComplete:S}),document.body)]})},nL=D.memo(tL),rL=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=zr(),o=!!e.locked,a=h=>{h.stopPropagation(),s(f=>f.map(m=>{if(m.id===t){const E=!!m.data.locked;return{...m,draggable:!0,data:{...m.data,locked:!E}}}return m}))},l=(h,f)=>{s(m=>m.map(E=>E.id===t?{...E,data:{...E.data,[h]:f}}:E))},c=["#e5e5e5","#18181b","#ef4444","#3b82f6","#22c55e","#eab308"],d=[{label:"S",val:"14px"},{label:"M",val:"24px"},{label:"L",val:"36px"},{label:"XL",val:"48px"}];return p.jsxs(p.Fragment,{children:[p.jsx(nl,{color:"#71717a",isVisible:n&&!o,minWidth:100,minHeight:30,handleStyle:{width:15,height:15}}),n&&p.jsx("button",{onClick:()=>{i({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:p.jsx(ys,{size:12})}),(n||o)&&p.jsx("button",{onClick:a,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${o?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:o?p.jsx(il,{size:12}):p.jsx(rl,{size:12})}),n&&!o&&p.jsxs("div",{className:`nodrag absolute -bottom-10 left-1/2 transform -translate-x-1/2 flex flex-col gap-1 p-1.5 rounded-lg shadow-xl border z-50 backdrop-blur-sm items-center ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[p.jsx("div",{className:"flex gap-1",children:c.map(h=>p.jsx("button",{onClick:()=>l("color",h),className:"w-4 h-4 rounded-full border border-white/20 hover:scale-125 transition-transform",style:{backgroundColor:h}},h))}),p.jsx("div",{className:`flex gap-1 border-t pt-1 mt-0.5 ${r?"border-white/10":"border-black/10"}`,children:d.map(h=>p.jsx("button",{onClick:()=>l("fontSize",h.val),className:`text-[8px] px-1 font-mono border rounded ${r?"text-zinc-300 hover:text-white border-zinc-700 bg-zinc-800 hover:bg-zinc-700":"text-zinc-600 hover:text-black border-gray-300 bg-gray-100 hover:bg-gray-200"}`,children:h.label},h.label))})]}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(wn,{type:"target",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(wn,{type:"source",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),p.jsx("div",{className:`h-full w-full p-2 flex items-center justify-center overflow-hidden border border-transparent hover:border-zinc-700/50 rounded transition-colors ${o?"nodrag":""} ${e.isDeleting?"deleting-default":""}`,children:p.jsx("textarea",{name:"text-content",className:`nodrag w-full h-full bg-transparent resize-none outline-none font-bold text-center p-2 ${e.color?"":"text-node-content text-gray-200"}`,placeholder:"Escribe un ttulo...",defaultValue:e.label,onChange:h=>e.label=h.target.value,style:{fontFamily:'"Courier Prime", monospace',color:e.color,fontSize:e.fontSize||"24px"}})})]})},iL=D.memo(rL),sL=({id:t,data:e,selected:n,style:r,isDarkMode:i})=>{const{setNodes:s}=zr(),o=(r==null?void 0:r.borderColor)||"#71717a",a=(r==null?void 0:r.backgroundColor)||(i?"rgba(113, 113, 122, 0.05)":"rgba(100, 116, 139, 0.05)"),l=!!e.locked,c=d=>{d.stopPropagation(),s(h=>h.map(f=>{if(f.id===t){const m=!!f.data.locked;return{...f,draggable:m,data:{...f.data,locked:!m}}}return f}))};return p.jsxs(p.Fragment,{children:[p.jsx(nl,{color:o,isVisible:n&&!l,minWidth:150,minHeight:150}),(n||l)&&p.jsx("button",{onClick:c,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${l?"bg-red-900 border-red-700 text-red-200":i?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:l?p.jsx(il,{size:12}):p.jsx(rl,{size:12})}),p.jsx("div",{className:`h-full w-full border-2 border-dashed rounded-xl transition-colors ${l?"nodrag":""} ${e.isDeleting?"deleting-zone":""}`,style:{borderColor:o,backgroundColor:a},children:p.jsx("div",{className:`absolute -top-3 left-4 px-2 py-0.5 rounded text-[10px] font-mono uppercase tracking-widest select-none whitespace-nowrap shadow-sm ${i?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-white border border-gray-300 text-gray-600"}`,children:e.label})})]})},oL=D.memo(sL),aL=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=zr(),[o,a]=D.useState(e.url||""),[l,c]=D.useState(!e.url),d=!!e.showIframe,[h,f]=D.useState(!1),[m,E]=D.useState(0),[x,N]=D.useState(null),[y,v]=D.useState(!0),[T,A]=D.useState(!1),O=!!e.locked,M=D.useMemo(()=>{if(!e.url)return"";try{const P=new URL(e.url);if(P.hostname.includes("youtube.com")||P.hostname.includes("youtu.be")){let z=null;if(P.hostname.includes("youtu.be"))z=P.pathname.slice(1);else if(P.searchParams.has("v"))z=P.searchParams.get("v");else if(P.pathname.startsWith("/embed/"))return e.url;if(z)return`https://www.youtube-nocookie.com/embed/${z}?rel=0&modestbranding=1&iv_load_policy=3&controls=1&playsinline=1&loop=1&playlist=${z}`}}catch{}return e.url},[e.url]),S=e.url?`https://s.wordpress.com/mshots/v1/${encodeURIComponent(e.url)}?w=400&v=${m}`:null,b=S?`https://wsrv.nl/?url=${encodeURIComponent(S)}`:null;D.useEffect(()=>{if(N(null),!b)return;($=>{const z=new Image;z.crossOrigin="Anonymous",z.referrerPolicy="no-referrer",z.src=$,z.onload=()=>{try{const F=document.createElement("canvas");F.width=z.width,F.height=z.height,F.getContext("2d").drawImage(z,0,0);const L=F.toDataURL("image/jpeg");N(L),v(!1)}catch{v(!1),A(!0)}},z.onerror=()=>{v(!1),A(!0)}})(b)},[b]);const w=P=>{P.stopPropagation(),s($=>$.map(z=>{if(z.id===t){const F=!!z.data.locked;return{...z,draggable:F,data:{...z.data,locked:!F}}}return z}))},I=()=>{let P=o;P&&!P.startsWith("http")&&(P="https://"+P),s($=>$.map(z=>z.id===t?{...z,data:{...z.data,url:P,showIframe:!1}}:z)),c(!1),f(!1),A(!1),v(!0)},C=()=>{c(!0),f(!1),A(!1),v(!0)},R=P=>{P.stopPropagation(),E($=>$+1),f(!1),A(!1),v(!0)},k=()=>{const P=!d;f(!1),s($=>$.map(z=>z.id===t?{...z,data:{...z.data,showIframe:P}}:z))};return p.jsxs(p.Fragment,{children:[p.jsx(nl,{color:"#3b82f6",isVisible:n&&!O,minWidth:200,minHeight:100}),n&&p.jsx("button",{onClick:()=>i({nodes:[{id:t}]}),className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:p.jsx(ys,{size:12})}),(n||O)&&p.jsx("button",{onClick:w,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${O?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:O?p.jsx(il,{size:12}):p.jsx(rl,{size:12})}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(wn,{type:"target",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(wn,{type:"source",position:le.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),p.jsxs("div",{className:`relative w-full h-full rounded-lg overflow-hidden border-2 transition-all shadow-lg flex flex-col ${r?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} ${O?"nodrag":""} ${e.isDeleting?"deleting-default":""}`,children:[p.jsxs("div",{className:`h-8 flex items-center px-2 gap-2 border-b ${r?"bg-zinc-800 border-zinc-700":"bg-gray-100 border-gray-200"}`,children:[p.jsx(gz,{size:14,className:"text-blue-500"}),p.jsx("span",{className:`text-[10px] font-mono truncate flex-1 ${r?"text-zinc-400":"text-gray-600"}`,children:e.url?new URL(e.url).hostname:"ENLACE WEB"}),!l&&p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:k,className:`text-zinc-500 transition-colors ${d?"text-blue-500":"hover:text-blue-500"}`,title:d?"Ver miniatura":"Ver interactivo",children:p.jsx(Ez,{size:12})}),p.jsx("button",{onClick:R,className:"text-zinc-500 hover:text-green-500 transition-colors",title:"Actualizar miniatura",children:p.jsx(hy,{size:12})}),p.jsx("button",{onClick:C,className:"text-zinc-500 hover:text-blue-500 transition-colors",children:p.jsx(Sz,{size:12})})]})]}),p.jsx("div",{className:"flex-1 relative bg-black/5 group",children:l?p.jsxs("div",{className:"p-4 flex flex-col gap-2 h-full justify-center",children:[p.jsx("input",{type:"text",name:"url-input",value:o,onChange:P=>a(P.target.value),placeholder:"https://ejemplo.com",className:`nodrag w-full text-xs p-2 rounded border outline-none font-mono ${r?"bg-zinc-950 border-zinc-700 text-white":"bg-white border-gray-300 text-black"}`,onKeyDown:P=>P.key==="Enter"&&I()}),p.jsx("button",{onClick:I,className:"bg-blue-600 text-white text-xs py-1 rounded hover:bg-blue-500 font-bold uppercase",children:"Guardar"})]}):p.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[p.jsx("div",{className:"flex-1 relative overflow-hidden bg-zinc-200 dark:bg-zinc-800 min-h-0",children:d?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`absolute top-0 left-0 w-full py-1 px-2 flex flex-col gap-1 items-center justify-center z-20 ${r?"bg-zinc-950/80":"bg-white/80"} backdrop-blur-[2px]`,children:p.jsx("span",{className:`text-[9px] leading-tight text-center select-none ${r?"text-zinc-400":"text-zinc-600"}`,children:"Si no carga, el sitio bloquea la conexin."})}),p.jsx("iframe",{src:M,className:"w-full h-full border-none relative z-10 bg-white",title:"Embedded Content",loading:"lazy",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-presentation allow-modals allow-popups-to-escape-sandbox",onError:P=>{console.warn("Error loading iframe:",e.url),P.target.style.display="none"}},m)]}):p.jsxs(p.Fragment,{children:[y&&e.url&&p.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center z-20",children:p.jsx("div",{className:"w-6 h-6 border-2 border-zinc-400 border-t-transparent rounded-full animate-spin"})}),x&&!T&&p.jsx("img",{src:x,alt:"Preview",className:"w-full h-full object-cover opacity-90 hover:opacity-100 transition-opacity"}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(!e.url||T)&&p.jsx(uy,{size:32,className:"text-zinc-400"})})]})}),p.jsxs("a",{href:e.url,target:"_blank",rel:"noopener",draggable:"false",onDragStart:P=>P.preventDefault(),className:`nodrag h-10 shrink-0 flex items-center justify-center gap-2 text-xs font-bold uppercase transition-colors z-10 relative ${r?"bg-zinc-800 hover:bg-zinc-700 text-blue-400":"bg-gray-200 hover:bg-gray-300 text-zinc-900"}`,children:[p.jsx(fz,{size:14})," Visitar Sitio"]})]})})]})]})},lL=D.memo(aL),Sf=({id:t,sourceX:e,sourceY:n,targetX:r,targetY:i,sourcePosition:s,targetPosition:o,style:a={},markerEnd:l,label:c,type:d,className:h})=>{let f="",m=0,E=0;const x={sourceX:e,sourceY:n,targetX:r,targetY:i,sourcePosition:s,targetPosition:o};return d==="straight"?[f,m,E]=aT(x):d==="step"?[f,m,E]=Gc({...x,borderRadius:0}):d==="smoothstep"?[f,m,E]=Gc(x):[f,m,E]=ty(x),p.jsxs(p.Fragment,{children:[p.jsx(tl,{path:f,markerEnd:l,style:a,className:h}),c&&p.jsx(_O,{children:p.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${m}px,${E}px)`,pointerEvents:"all"},className:"nodrag nopan",children:p.jsx("div",{className:"custom-edge-label",children:c})})})]})},cL=t=>p.jsx(Sf,{...t,type:"straight"}),uL=t=>p.jsx(Sf,{...t,type:"step"}),dL=t=>p.jsx(Sf,{...t,type:"smoothstep"}),hL=t=>p.jsx(Sf,{...t,type:"default"}),wS=D.createContext(!0),Uo=t=>e=>{const n=D.useContext(wS);return D.createElement(t,{...e,isDarkMode:n})},fL={evidence:Uo(XM),note:Uo(ZM),image:Uo(nL),text:Uo(iL),zone:Uo(oL),url:Uo(lL)},pL={default:hL,straight:cL,step:uL,smoothstep:dL},mL=({connectionColor:t})=>{const e=D.useMemo(()=>({hideAttribution:!0}),[]),n=D.useMemo(()=>({stroke:t,strokeWidth:2}),[t]),r=D.useCallback(i=>{switch(i.type){case"evidence":switch(i.data.category){case"person":return"#3b82f6";case"place":return"#22c55e";case"clue":return"#f97316";case"event":return"#ef4444";default:return"#ef4444"}case"note":return"#eab308";case"image":return"#a855f7";case"text":return"#71717a";default:return"#ef4444"}},[]);return{nodeTypes:fL,edgeTypes:pL,proOptions:e,connectionLineStyle:n,nodeColor:r}},gL=(t,e,n,r)=>{const[i,s]=D.useState([]),[o,a]=D.useState([]),l=D.useCallback(()=>{s(f=>[...f,{nodes:t,edges:e}]),a([])},[t,e]),c=D.useCallback(()=>{if(i.length===0)return;const f=i[i.length-1],m=i.slice(0,i.length-1);a(E=>[{nodes:t,edges:e},...E]),s(m),n(f.nodes),r(f.edges)},[i,t,e,n,r]),d=D.useCallback(()=>{if(o.length===0)return;const f=o[0],m=o.slice(1);s(E=>[...E,{nodes:t,edges:e}]),a(m),n(f.nodes),r(f.edges)},[o,t,e,n,r]),h=D.useCallback(()=>{s([]),a([])},[]);return{takeSnapshot:l,undo:c,redo:d,clearHistory:h,canUndo:i.length>0,canRedo:o.length>0}},yL=({nodes:t,edges:e,setNodes:n,setEdges:r,onNodesChange:i,onEdgesChange:s})=>{const{takeSnapshot:o,undo:a,redo:l,clearHistory:c}=gL(t,e,n,r),d=D.useCallback(E=>{n(x=>{var y;const N=x.find(v=>v.id===E);return!N||(y=N.data)!=null&&y.isDeleting?x:(setTimeout(()=>{n(v=>{var A;const T=v.find(O=>O.id===E);return T&&((A=T.data)!=null&&A.isDeleting)?v.filter(O=>O.id!==E):v}),r(v=>v.filter(T=>T.source!==E&&T.target!==E))},500),x.map(v=>v.id===E?{...v,data:{...v.data,isDeleting:!0}}:v))})},[n,r]),h=D.useCallback(E=>{r(x=>{var y;const N=x.find(v=>v.id===E);return!N||(y=N.className)!=null&&y.includes("deleting-edge")?x:(setTimeout(()=>{r(v=>v.filter(T=>T.id!==E))},300),x.map(v=>v.id===E?{...v,className:`${v.className||""} deleting-edge`}:v))})},[r]),f=D.useCallback(E=>{const x=E.filter(y=>y.type!=="remove"),N=E.filter(y=>y.type==="remove");N.length>0&&(o(),N.forEach(y=>d(y.id))),x.length>0&&i(x)},[i,o,d]),m=D.useCallback(E=>{const x=E.filter(y=>y.type!=="remove"),N=E.filter(y=>y.type==="remove");N.length>0&&(o(),N.forEach(y=>h(y.id))),x.length>0&&s(x)},[s,o,h]);return{takeSnapshot:o,undo:a,redo:l,clearHistory:c,onNodesChangeWithHistory:f,onEdgesChangeWithHistory:m,animateAndRemoveNode:d,animateAndRemoveEdge:h}},vL=(t,e,n,r,i)=>{const[s,o]=D.useState(null),a=D.useRef(null),l=D.useCallback(c=>{if(c.button!==2||!n||c.target.closest(".react-flow__node")||c.target.closest(".react-flow__edge")||c.target.closest(".react-flow__controls")||c.target.closest(".react-flow__minimap"))return;c.preventDefault();const{left:d,top:h}=t.current.getBoundingClientRect(),f=c.clientX-d,m=c.clientY-h;a.current={startX:f,startY:m,x:f,y:m,width:0,height:0,isDragging:!1};const E=N=>{if(N.buttons===0){x(N);return}if(!a.current||!t.current)return;const y=t.current.getBoundingClientRect(),v=N.clientX-y.left,T=N.clientY-y.top,A=Math.min(a.current.startX,v),O=Math.min(a.current.startY,T),M=Math.abs(v-a.current.startX),S=Math.abs(T-a.current.startY);(M>5||S>5)&&(a.current={...a.current,x:A,y:O,width:M,height:S,isDragging:!0},o({...a.current}))},x=N=>{var T;window.removeEventListener("pointermove",E),window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",x);const y=(T=a.current)==null?void 0:T.isDragging,v=a.current;if(a.current=null,o(null),!y)r(N);else if(v&&e){const A=t.current.getBoundingClientRect(),O=e.screenToFlowPosition({x:A.left+v.x,y:A.top+v.y}),M=e.screenToFlowPosition({x:A.left+v.x+v.width,y:A.top+v.y+v.height}),S={x:Math.min(O.x,M.x),y:Math.min(O.y,M.y),width:Math.abs(M.x-O.x),height:Math.abs(M.y-O.y)},b=e.getNodes().filter(w=>{var P,$,z,F;const I=w.width??((P=w.measured)==null?void 0:P.width)??200,C=w.height??(($=w.measured)==null?void 0:$.height)??150,R=((z=w.positionAbsolute)==null?void 0:z.x)??w.position.x,k=((F=w.positionAbsolute)==null?void 0:F.y)??w.position.y;return S.x<R+I&&S.x+S.width>R&&S.y<k+C&&S.y+S.height>k});i(w=>w.map(I=>({...I,selected:b.some(C=>C.id===I.id)||N.shiftKey&&I.selected})))}};window.addEventListener("pointermove",E),window.addEventListener("pointerup",x),window.addEventListener("pointercancel",x)},[n,r,e,i,t]);return{selectionRect:s,handleRightPointerDown:l}},_L=({isInteractive:t,reactFlowInstance:e,reactFlowWrapper:n,setEdges:r,setNodes:i,connectionLineType:s,connectionColor:o,takeSnapshot:a,setEditingNode:l,setEditingEdge:c,setInputModalOpen:d,setEditModalOpen:h,setMenu:f})=>{const m=D.useCallback(b=>{a(),r(w=>cT({...b,type:s,style:{stroke:o,strokeWidth:2}},w))},[r,o,a,s]),E=D.useCallback((b,w)=>{b.preventDefault(),b.stopPropagation(),t&&(l(null),c(w),d(!0))},[t,l,c,d]),x=D.useCallback((b,w)=>{t&&(a(),r(I=>I.map(C=>{var R;if(C.id===w.id){const k=(R=C.style)==null?void 0:R.strokeDasharray;return{...C,style:{...C.style,strokeDasharray:k?void 0:"10,10"}}}return C})))},[r,t,a]),N=D.useCallback(()=>f(null),[f]),y=D.useCallback(b=>{if(b.preventDefault(),!t)return;const w=n.current.getBoundingClientRect();f({top:b.clientY<w.bottom-200?b.clientY-w.top:void 0,left:b.clientX<w.right-200?b.clientX-w.left:void 0,right:b.clientX>=w.right-200?w.width-(b.clientX-w.left):void 0,bottom:b.clientY>=w.bottom-200?w.height-(b.clientY-w.top):void 0,clientX:b.clientX,clientY:b.clientY})},[t,n,f]),{selectionRect:v,handleRightPointerDown:T}=vL(n,e,t,y,i),A=D.useCallback((b,w)=>{w.type==="evidence"?(l(w),h(!0)):w.type==="zone"&&(c(null),l(w),d(!0))},[l,h,c,d]),O=D.useCallback((b,w)=>{a(),w.type!=="zone"&&i(I=>{const C=I.findIndex(P=>P.id===w.id);if(C===I.length-1)return I;const R=[...I],[k]=R.splice(C,1);return R.push(k),R})},[a,i]),M=D.useCallback(()=>{n.current&&n.current.classList.add("is-moving")},[n]),S=D.useCallback(()=>{n.current&&n.current.classList.remove("is-moving")},[n]);return{onConnect:m,onEdgeContextMenu:E,onEdgeClick:x,onPaneClick:N,onPaneContextMenu:y,onNodeDoubleClick:A,onNodeDragStart:O,onMoveStart:M,onMoveEnd:S,selectionRect:v,handleRightPointerDown:T}},wL=({reactFlowInstance:t,boards:e,currentBoardId:n,bgType:r,setBoards:i,setNodes:s,setEdges:o,setBgType:a,handleSwitchBoard:l,clearHistory:c,takeSnapshot:d,setConfirmModal:h})=>{const f=D.useCallback(()=>{if(t){const N={...t.toObject(),bgType:r},y=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),v=URL.createObjectURL(y),T=document.createElement("a");T.href=v;const A=e.find(M=>M.id===n),O=A?A.name.replace(/[^a-z0-9\u00C0-\u017F\s-_]/gi,""):"caso-detective";T.download=`${O}.json`,T.click(),URL.revokeObjectURL(v)}},[t,e,n,r]),m=D.useCallback(x=>{const N=x.target.files[0];if(!N)return;const y=N.name.replace(/\.json$/i,""),v=new FileReader;v.onload=T=>{try{const A=JSON.parse(T.target.result);if(A&&(A.nodes||A.edges)){const O=A.nodes||[],M=A.edges||[],S=A.bgType||"cork",b=e.find(w=>w.name===y);if(b)h({isOpen:!0,title:"SOBRESCRIBIR CASO?",message:`Ya existe un caso llamado "${y}". Deseas sobrescribir sus datos con este archivo?`,confirmText:"Sobrescribir",cancelText:"Cancelar",isDanger:!0,onConfirm:()=>{localStorage.setItem(`board-${b.id}-nodes`,JSON.stringify(O)),localStorage.setItem(`board-${b.id}-edges`,JSON.stringify(M)),localStorage.setItem(`board-${b.id}-bg`,S),b.id===n?(s(O),o(M),a(S),c()):l(b.id)}});else{const w=kn(),I={id:w,name:y,createdAt:Date.now(),lastModified:Date.now()};localStorage.setItem(`board-${w}-nodes`,JSON.stringify(O)),localStorage.setItem(`board-${w}-edges`,JSON.stringify(M)),localStorage.setItem(`board-${w}-bg`,S),i(C=>[...C,I]),l(w)}}}catch(A){console.error("Error al cargar el caso",A),alert("El archivo no es vlido.")}},v.readAsText(N),x.target.value=""},[e,n,s,o,a,l,i,h,c]),E=D.useCallback(()=>{h({isOpen:!0,title:"LIMPIAR TABLERO?",message:"Ests seguro de que quieres eliminar todo el contenido del tablero? Esta accin no se puede deshacer.",onConfirm:()=>{d(),s([]),o([])},isDanger:!0})},[d,s,o,h]);return{onSave:f,onLoad:m,onClear:E}},xL=({searchTerm:t,setNodes:e,reactFlowInstance:n})=>(D.useEffect(()=>{if(e(i=>i.map(s=>{var c,d;if(!t)return{...s,style:{...s.style,opacity:1}};const o=((c=s.data.label)==null?void 0:c.toLowerCase())||"",a=((d=s.data.description)==null?void 0:d.toLowerCase())||"",l=o.includes(t.toLowerCase())||a.includes(t.toLowerCase());return{...s,style:{...s.style,opacity:l?1:.1}}})),t&&t.length>1&&n){const s=n.getNodes().find(o=>{var c,d;const a=((c=o.data.label)==null?void 0:c.toLowerCase())||"",l=((d=o.data.description)==null?void 0:d.toLowerCase())||"";return a.includes(t.toLowerCase())||l.includes(t.toLowerCase())});s&&n.setCenter(s.position.x+(s.width||0)/2,s.position.y+(s.height||0)/2,{zoom:1.5,duration:800})}},[t,e,n]),{navigateSearch:D.useCallback(i=>{if(!t||!n)return;const o=n.getNodes().filter(f=>{var x,N;const m=((x=f.data.label)==null?void 0:x.toLowerCase())||"",E=((N=f.data.description)==null?void 0:N.toLowerCase())||"";return m.includes(t.toLowerCase())||E.includes(t.toLowerCase())});if(o.length===0)return;const a=o.findIndex(f=>f.selected);let l=i==="next"?a+1:a-1;l>=o.length&&(l=0),l<0&&(l=o.length-1);const c=o[l];e(f=>f.map(m=>({...m,selected:m.id===c.id})));const d=c.width||150,h=c.height||50;n.setCenter(c.position.x+d/2,c.position.y+h/2,{zoom:1.5,duration:600})},[t,n,e])}),EL=t=>{const[e,n]=D.useState("#dc2626"),[r,i]=D.useState("straight"),[s,o]=D.useState(!0),[a,l]=D.useState(!0),[c,d]=D.useState(""),[h,f]=D.useState(!0),[m,E]=D.useState(!1),[x,N]=D.useState(t),y=D.useCallback(()=>{const v=["cork","blackboard","paper"];N(T=>v[(v.indexOf(T)+1)%v.length])},[]);return{connectionColor:e,setConnectionColor:n,connectionLineType:r,setConnectionLineType:i,isInteractive:s,setIsInteractive:o,isDarkMode:a,setIsDarkMode:l,searchTerm:c,setSearchTerm:d,isSidebarOpen:h,setIsSidebarOpen:f,isZenMode:m,setIsZenMode:E,bgType:x,setBgType:N,toggleBackground:y}},bL=({reactFlowInstance:t,setNodes:e,setEdges:n,takeSnapshot:r,animateAndRemoveNode:i,animateAndRemoveEdge:s,setEditModalOpen:o,setEditingNode:a,setEditingEdge:l,setInputModalOpen:c,setConnectionColor:d,setConnectionLineType:h,setPendingStampNodeId:f})=>{const m=D.useCallback((O,M)=>{r(),e(S=>S.map(b=>b.id===O?{...b,data:M}:b))},[e,r]),E=D.useCallback(O=>{r(),i(O),o(!1),a(null)},[i,r,o,a]),x=D.useCallback(()=>{if(!t)return;const O=t.getNodes().filter(M=>M.selected);if(O.length>0){r();const M=new Map,S=O.map(I=>{const C=kn();return M.set(I.id,C),{...I,id:C,position:{x:I.position.x+50,y:I.position.y+50},selected:!0,data:{...I.data}}}),w=t.getEdges().filter(I=>M.has(I.source)&&M.has(I.target)).map(I=>({...I,id:kn(),source:M.get(I.source),target:M.get(I.target),selected:!0}));e(I=>I.map(C=>({...C,selected:!1})).concat(S)),n(I=>I.map(C=>({...C,selected:!1})).concat(w))}},[t,e,n,r]),N=D.useCallback(O=>{d(O),n(M=>M.map(S=>S.selected?{...S,style:{...S.style,stroke:O}}:S))},[n,d]),y=D.useCallback(O=>{h(O),n(M=>M.map(S=>S.selected?{...S,type:O}:S))},[n,h]),v=D.useCallback((O,M,S,b)=>{b&&(r(),n(w=>w.map(I=>I.id===b.id?{...I,label:O,type:S||I.type,style:{...I.style,stroke:M},labelStyle:void 0,labelBgStyle:void 0}:I)),l(null))},[n,r,l]),T=D.useCallback((O,M)=>{O?(r(),s(O.id),l(null),c(!1)):M&&M.type==="zone"&&(E(M.id),c(!1))},[s,E,r,l,c]),A=D.useCallback((O,M,S,b,w,I)=>{b?v(O,M,S,b):w&&w.type==="zone"?(r(),e(C=>C.map(R=>R.id===w.id?{...R,data:{...R.data,label:O},style:{...R.style,borderColor:M,backgroundColor:`${M}10`}}:R)),a(null),c(!1)):I&&(r(),e(C=>C.map(R=>R.id===I?{...R,data:{...R.data,status:{type:"custom",label:O||"SELLO",color:M}}}:R)),f(null),c(!1))},[v,e,r,a,c,f]);return{handleSaveNode:m,handleDeleteNode:E,duplicateSelected:x,handleConnectionColorChange:N,handleConnectionLineTypeChange:y,handleEdgeLabelSave:v,handleEdgeDelete:T,handleInputModalConfirm:A}};var dx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ES={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new TL;const f=s<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SL=function(t){const e=xS(t);return ES.encodeByteArray(e,!0)},bS=function(t){return SL(t).replace(/\./g,"")},IS=function(t){try{return ES.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=()=>CL().__FIREBASE_DEFAULTS__,kL=()=>{if(typeof process>"u"||typeof dx>"u")return;const t=dx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IS(t[1]);return e&&JSON.parse(e)},Cf=()=>{try{return AL()||kL()||RL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NL=t=>{var e,n;return(n=(e=Cf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TS=()=>{var t;return(t=Cf())===null||t===void 0?void 0:t.config},SS=t=>{var e;return(e=Cf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function VL(){var t;const e=(t=Cf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ML(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AS(){return!VL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vy(){try{return typeof indexedDB=="object"}catch{return!1}}function kS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function LL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="FirebaseError";class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jL,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eo.prototype.create)}}class Eo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?FL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new vr(i,a,r)}}function FL(t,e){return t.replace($L,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $L=/\{\$([^}]+)}/g;function UL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function za(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(hx(s)&&hx(o)){if(!za(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Zl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BL(t,e){const n=new qL(t,e);return n.subscribe.bind(n)}class qL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bp),i.error===void 0&&(i.error=Bp),i.complete===void 0&&(i.complete=Bp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=1e3,GL=2,WL=4*60*60*1e3,QL=.5;function fx(t,e=KL,n=GL){const r=e*Math.pow(n,t),i=Math.round(QL*r*(Math.random()-.5)*2);return Math.min(WL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){return t&&t._delegate?t._delegate:t}class gr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JL(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XL(t){return t===Os?void 0:t}function JL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const e3={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},t3=Ae.INFO,n3={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},r3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=n3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Af{constructor(e){this.name=e,this._logLevel=t3,this._logHandler=r3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const i3=(t,e)=>e.some(n=>t instanceof n);let px,mx;function s3(){return px||(px=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o3(){return mx||(mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RS=new WeakMap,vg=new WeakMap,NS=new WeakMap,qp=new WeakMap,_y=new WeakMap;function a3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(is(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&RS.set(n,t)}).catch(()=>{}),_y.set(e,t),e}function l3(t){if(vg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vg.set(t,e)}let _g={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function c3(t){_g=t(_g)}function u3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hp(this),e,...n);return NS.set(r,e.sort?e.sort():[e]),is(r)}:o3().includes(t)?function(...e){return t.apply(Hp(this),e),is(RS.get(this))}:function(...e){return is(t.apply(Hp(this),e))}}function d3(t){return typeof t=="function"?u3(t):(t instanceof IDBTransaction&&l3(t),i3(t,s3())?new Proxy(t,_g):t)}function is(t){if(t instanceof IDBRequest)return a3(t);if(qp.has(t))return qp.get(t);const e=d3(t);return e!==t&&(qp.set(t,e),_y.set(e,t)),e}const Hp=t=>_y.get(t);function PS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=is(o);return r&&o.addEventListener("upgradeneeded",l=>{r(is(o.result),l.oldVersion,l.newVersion,is(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const h3=["get","getKey","getAll","getAllKeys","count"],f3=["put","add","delete","clear"],Kp=new Map;function gx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kp.get(e))return Kp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=f3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||h3.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Kp.set(e,s),s}c3(t=>({...t,get:(e,n,r)=>gx(e,n)||t.get(e,n,r),has:(e,n)=>!!gx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(m3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function m3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wg="@firebase/app",yx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Af("@firebase/app"),g3="@firebase/app-compat",y3="@firebase/analytics-compat",v3="@firebase/analytics",_3="@firebase/app-check-compat",w3="@firebase/app-check",x3="@firebase/auth",E3="@firebase/auth-compat",b3="@firebase/database",I3="@firebase/data-connect",T3="@firebase/database-compat",S3="@firebase/functions",C3="@firebase/functions-compat",A3="@firebase/installations",k3="@firebase/installations-compat",R3="@firebase/messaging",N3="@firebase/messaging-compat",P3="@firebase/performance",D3="@firebase/performance-compat",V3="@firebase/remote-config",O3="@firebase/remote-config-compat",z3="@firebase/storage",M3="@firebase/storage-compat",L3="@firebase/firestore",j3="@firebase/vertexai-preview",F3="@firebase/firestore-compat",$3="firebase",U3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="[DEFAULT]",B3={[wg]:"fire-core",[g3]:"fire-core-compat",[v3]:"fire-analytics",[y3]:"fire-analytics-compat",[w3]:"fire-app-check",[_3]:"fire-app-check-compat",[x3]:"fire-auth",[E3]:"fire-auth-compat",[b3]:"fire-rtdb",[I3]:"fire-data-connect",[T3]:"fire-rtdb-compat",[S3]:"fire-fn",[C3]:"fire-fn-compat",[A3]:"fire-iid",[k3]:"fire-iid-compat",[R3]:"fire-fcm",[N3]:"fire-fcm-compat",[P3]:"fire-perf",[D3]:"fire-perf-compat",[V3]:"fire-rc",[O3]:"fire-rc-compat",[z3]:"fire-gcs",[M3]:"fire-gcs-compat",[L3]:"fire-fst",[F3]:"fire-fst-compat",[j3]:"fire-vertex","fire-js":"fire-js",[$3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new Map,q3=new Map,Eg=new Map;function vx(t,e){try{t.container.addComponent(e)}catch(n){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dr(t){const e=t.name;if(Eg.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;Eg.set(e,t);for(const n of Ph.values())vx(n,t);for(const n of q3.values())vx(n,t);return!0}function bo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ur(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new Eo("app","Firebase",H3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=U3;function DS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ss.create("bad-app-name",{appName:String(i)});if(n||(n=TS()),!n)throw ss.create("no-options");const s=Ph.get(i);if(s){if(za(n,s.options)&&za(r,s.config))return s;throw ss.create("duplicate-app",{appName:i})}const o=new ZL(i);for(const l of Eg.values())o.addComponent(l);const a=new K3(n,r,o);return Ph.set(i,a),a}function VS(t=xg){const e=Ph.get(t);if(!e&&t===xg&&TS())return DS();if(!e)throw ss.create("no-app",{appName:t});return e}function Yn(t,e,n){var r;let i=(r=B3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(a.join(" "));return}Dr(new gr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="firebase-heartbeat-database",W3=1,Qc="firebase-heartbeat-store";let Gp=null;function OS(){return Gp||(Gp=PS(G3,W3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ss.create("idb-open",{originalErrorMessage:t.message})})),Gp}async function Q3(t){try{const n=(await OS()).transaction(Qc),r=await n.objectStore(Qc).get(zS(t));return await n.done,r}catch(e){if(e instanceof vr)fi.warn(e.message);else{const n=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fi.warn(n.message)}}}async function _x(t,e){try{const r=(await OS()).transaction(Qc,"readwrite");await r.objectStore(Qc).put(e,zS(t)),await r.done}catch(n){if(n instanceof vr)fi.warn(n.message);else{const r=ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fi.warn(r.message)}}}function zS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=1024,X3=30*24*60*60*1e3;class J3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ej(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=X3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wx(),{heartbeatsToSend:r,unsentEntries:i}=Z3(this._heartbeatsCache.heartbeats),s=bS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fi.warn(n),""}}}function wx(){return new Date().toISOString().substring(0,10)}function Z3(t,e=Y3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ej{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vy()?kS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Q3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xx(t){return bS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t){Dr(new gr("platform-logger",e=>new p3(e),"PRIVATE")),Dr(new gr("heartbeat",e=>new J3(e),"PRIVATE")),Yn(wg,yx,t),Yn(wg,yx,"esm2017"),Yn("fire-js","")}tj("");function wy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function MS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nj=MS,LS=new Eo("auth","Firebase",MS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Af("@firebase/auth");function rj(t,...e){Dh.logLevel<=Ae.WARN&&Dh.warn(`Auth (${sl}): ${t}`,...e)}function Ld(t,...e){Dh.logLevel<=Ae.ERROR&&Dh.error(`Auth (${sl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,...e){throw Ey(t,...e)}function pr(t,...e){return Ey(t,...e)}function xy(t,e,n){const r=Object.assign(Object.assign({},nj()),{[e]:n});return new Eo("auth","Firebase",r).create(e,{appName:t.name})}function oi(t){return xy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ij(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zn(t,"argument-error"),xy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ey(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LS.create(t,...e)}function me(t,e,...n){if(!t)throw Ey(e,...n)}function ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ld(e),new Error(e)}function pi(t,e){t||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sj(){return Ex()==="http:"||Ex()==="https:"}function Ex(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sj()||CS()||"connection"in navigator)?navigator.onLine:!0}function aj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.shortDelay=e,this.longDelay=n,pi(n>e,"Short delay should be less than long delay!"),this.isMobile=DL()||zL()}get(){return oj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t,e){pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=new yu(3e4,6e4);function yi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mr(t,e,n,r,i={}){return FS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=gu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return OL()||(c.referrerPolicy="no-referrer"),jS.fetch()($S(t,t.config.apiHost,n,a),c)})}async function FS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lj),e);try{const i=new dj(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw pd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw pd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xy(t,d,c);Zn(t,d)}}catch(i){if(i instanceof vr)throw i;Zn(t,"network-request-failed",{message:String(i)})}}async function vu(t,e,n,r,i={}){const s=await Mr(t,e,n,r,i);return"mfaPendingCredential"in s&&Zn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function $S(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?by(t.config,i):`${t.config.apiScheme}://${i}`}function uj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),cj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pr(t,e,r);return i.customData._tokenResponse=n,i}function bx(t){return t!==void 0&&t.enterprise!==void 0}class hj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function fj(t,e){return Mr(t,"GET","/v2/recaptchaConfig",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e){return Mr(t,"POST","/v1/accounts:delete",e)}async function US(t,e){return Mr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mj(t,e=!1){const n=Ot(t),r=await n.getIdToken(e),i=Iy(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:pc(Wp(i.auth_time)),issuedAtTime:pc(Wp(i.iat)),expirationTime:pc(Wp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wp(t){return Number(t)*1e3}function Iy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ld("JWT malformed, contained fewer than 3 sections"),null;try{const i=IS(n);return i?JSON.parse(i):(Ld("Failed to decode base64 JWT payload"),null)}catch(i){return Ld("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ix(t){const e=Iy(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vr&&gj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ma(t,US(n,{idToken:r}));me(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?BS(s.providerUserInfo):[],a=_j(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ig(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function vj(t){const e=Ot(t);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _j(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BS(t){return t.map(e=>{var{providerId:n}=e,r=wy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(t,e){const n=await FS(t,{},async()=>{const r=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$S(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xj(t,e){return Mr(t,"POST","/v2/accounts:revokeToken",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ix(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=Ix(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await wj(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xa;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=wy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ig(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ma(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mj(this,e)}reload(){return vj(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(oi(this.auth));const e=await this.getIdToken();return await Ma(this,pj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:A,isAnonymous:O,providerData:M,stsTokenManager:S}=n;me(T&&S,e,"internal-error");const b=xa.fromJSON(this.name,S);me(typeof T=="string",e,"internal-error"),Ni(h,e.name),Ni(f,e.name),me(typeof A=="boolean",e,"internal-error"),me(typeof O=="boolean",e,"internal-error"),Ni(m,e.name),Ni(E,e.name),Ni(x,e.name),Ni(N,e.name),Ni(y,e.name),Ni(v,e.name);const w=new ti({uid:T,auth:e,email:f,emailVerified:A,displayName:h,isAnonymous:O,photoURL:E,phoneNumber:m,tenantId:x,stsTokenManager:b,createdAt:y,lastLoginAt:v});return M&&Array.isArray(M)&&(w.providerData=M.map(I=>Object.assign({},I))),N&&(w._redirectEventId=N),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new xa;i.updateFromServerResponse(n);const s=new ti({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Vh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?BS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new xa;a.updateFromIdToken(r);const l=new ti({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ig(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map;function ni(t){pi(t instanceof Function,"Expected a class definition");let e=Tx.get(t);return e?(pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qS.type="NONE";const Sx=qS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e,n){return`firebase:${t}:${e}:${n}`}class Ea{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=jd(this.userKey,i.apiKey,s),this.fullPersistenceKey=jd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ea(ni(Sx),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ni(Sx);const o=jd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ti._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ea(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ea(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YS(e))return"Blackberry";if(XS(e))return"Webos";if(KS(e))return"Safari";if((e.includes("chrome/")||GS(e))&&!e.includes("edge/"))return"Chrome";if(QS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HS(t=Ct()){return/firefox\//i.test(t)}function KS(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GS(t=Ct()){return/crios\//i.test(t)}function WS(t=Ct()){return/iemobile/i.test(t)}function QS(t=Ct()){return/android/i.test(t)}function YS(t=Ct()){return/blackberry/i.test(t)}function XS(t=Ct()){return/webos/i.test(t)}function Ty(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ej(t=Ct()){var e;return Ty(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bj(){return ML()&&document.documentMode===10}function JS(t=Ct()){return Ty(t)||QS(t)||XS(t)||YS(t)||/windows phone/i.test(t)||WS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e=[]){let n;switch(t){case"Browser":n=Cx(Ct());break;case"Worker":n=`${Cx(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${sl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t,e={}){return Mr(t,"GET","/v2/passwordPolicy",yi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=6;class Cj{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Sj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ax(this),this.idTokenSubscription=new Ax(this),this.beforeStateQueue=new Ij(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await US(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(oi(this));const n=e?Ot(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Tj(this),n=new Cj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Eo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vi(t){return Ot(t)}class Ax{constructor(e){this.auth=e,this.observer=null,this.addObserver=BL(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kj(t){kf=t}function e2(t){return kf.loadJS(t)}function Rj(){return kf.recaptchaEnterpriseScript}function Nj(){return kf.gapiScript}function Pj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Dj="recaptcha-enterprise",Vj="NO_RECAPTCHA";class Oj{constructor(e){this.type=Dj,this.auth=vi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{fj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new hj(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;bx(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Vj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&bx(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Rj();l.length!==0&&(l+=a),e2(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function kx(t,e,n,r=!1){const i=new Oj(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Oh(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await kx(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await kx(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t,e){const n=bo(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(za(s,e??{}))return i;Zn(i,"already-initialized")}return n.initialize({options:e})}function Mj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Lj(t,e,n){const r=vi(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=t2(e),{host:o,port:a}=jj(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Fj()}function t2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jj(t){const e=t2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Rx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Rx(o)}}}function Rx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Fj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,n){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function $j(t,e){return Mr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e){return vu(t,"POST","/v1/accounts:signInWithPassword",yi(t,e))}async function Bj(t,e){return Mr(t,"POST","/v1/accounts:sendOobCode",yi(t,e))}async function qj(t,e){return Bj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(t,e){return vu(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}async function Kj(t,e){return vu(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends Sy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Yc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oh(e,n,"signInWithPassword",Uj);case"emailLink":return Hj(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oh(e,r,"signUpPassword",$j);case"emailLink":return Kj(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e){return vu(t,"POST","/v1/accounts:signInWithIdp",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="http://localhost";class ao extends Sy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=wy(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ao(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ba(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ba(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ba(e,n)}buildRequest(){const e={requestUri:Gj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qj(t){const e=Jl(Zl(t)).link,n=e?Jl(Zl(e)).deep_link_id:null,r=Jl(Zl(t)).deep_link_id;return(r?Jl(Zl(r)).link:null)||r||n||e||t}class Cy{constructor(e){var n,r,i,s,o,a;const l=Jl(Zl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=Wj((i=l.mode)!==null&&i!==void 0?i:null);me(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Qj(e);try{return new Cy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.providerId=ol.PROVIDER_ID}static credential(e,n){return Yc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cy.parseLink(n);return me(r,"argument-error"),Yc._fromEmailAndCode(e,r.code,r.tenantId)}}ol.PROVIDER_ID="password";ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Ay{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends _u{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.FACEBOOK_SIGN_IN_METHOD="facebook.com";$i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ao._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends _u{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.GITHUB_SIGN_IN_METHOD="github.com";Ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends _u{constructor(){super("twitter.com")}static credential(e,n){return ao._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bi.credential(n,r)}catch{return null}}}Bi.TWITTER_SIGN_IN_METHOD="twitter.com";Bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(t,e){return vu(t,"POST","/v1/accounts:signUp",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ti._fromIdTokenResponse(e,r,i),o=Nx(r);return new lo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Nx(r);return new lo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Nx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends vr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new zh(e,n,r,i)}}function n2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zh._fromErrorAndOperation(t,s,e,r):s})}async function Xj(t,e,n=!1){const r=await Ma(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jj(t,e,n=!1){const{auth:r}=t;if(ur(r.app))return Promise.reject(oi(r));const i="reauthenticate";try{const s=await Ma(t,n2(r,i,e,t),n);me(s.idToken,r,"internal-error");const o=Iy(s.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),lo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e,n=!1){if(ur(t.app))return Promise.reject(oi(t));const r="signIn",i=await n2(t,r,e),s=await lo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Zj(t,e){return r2(vi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t){const e=vi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function e6(t,e,n){const r=vi(t);await Oh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qj)}async function t6(t,e,n){if(ur(t.app))return Promise.reject(oi(t));const r=vi(t),o=await Oh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yj).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&i2(t),l}),a=await lo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function n6(t,e,n){return ur(t.app)?Promise.reject(oi(t)):Zj(Ot(t),ol.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&i2(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6(t,e){return Mr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i6(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ot(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ma(r,r6(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function s6(t,e,n,r){return Ot(t).onIdTokenChanged(e,n,r)}function o6(t,e,n){return Ot(t).beforeAuthStateChanged(e,n)}function a6(t,e,n,r){return Ot(t).onAuthStateChanged(e,n,r)}function l6(t){return Ot(t).signOut()}const Mh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mh,"1"),this.storage.removeItem(Mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=1e3,u6=10;class o2 extends s2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bj()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,u6):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},c6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}o2.type="LOCAL";const d6=o2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends s2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}a2.type="SESSION";const l2=a2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Rf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await h6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=ky("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function p6(t){Nr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function m6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function g6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function y6(){return c2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="firebaseLocalStorageDb",v6=1,Lh="firebaseLocalStorage",d2="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nf(t,e){return t.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function _6(){const t=indexedDB.deleteDatabase(u2);return new wu(t).toPromise()}function Tg(){const t=indexedDB.open(u2,v6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lh,{keyPath:d2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await _6(),e(await Tg()))})})}async function Px(t,e,n){const r=Nf(t,!0).put({[d2]:e,value:n});return new wu(r).toPromise()}async function w6(t,e){const n=Nf(t,!1).get(e),r=await new wu(n).toPromise();return r===void 0?null:r.value}function Dx(t,e){const n=Nf(t,!0).delete(e);return new wu(n).toPromise()}const x6=800,E6=3;class h2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>E6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return c2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rf._getInstance(y6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await m6(),!this.activeServiceWorker)return;this.sender=new f6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||g6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tg();return await Px(e,Mh,"1"),await Dx(e,Mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Px(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>w6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Nf(i,!1).getAll();return new wu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}h2.type="LOCAL";const b6=h2;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t,e){return e?ni(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Sy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function I6(t){return r2(t.auth,new Ry(t),t.bypassAuthState)}function T6(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),Jj(n,new Ry(t),t.bypassAuthState)}async function S6(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),Xj(n,new Ry(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I6;case"linkViaPopup":case"linkViaRedirect":return S6;case"reauthViaPopup":case"reauthViaRedirect":return T6;default:Zn(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new yu(2e3,1e4);async function A6(t,e,n){if(ur(t.app))return Promise.reject(pr(t,"operation-not-supported-in-this-environment"));const r=vi(t);ij(t,e,Ay);const i=f2(r,n);return new Ks(r,"signInViaPopup",e,i).executeNotNull()}class Ks extends p2{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ks.currentPopupAction&&Ks.currentPopupAction.cancel(),Ks.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ks.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,C6.get())};e()}}Ks.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="pendingRedirect",Fd=new Map;class R6 extends p2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const r=await N6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function N6(t,e){const n=V6(e),r=D6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function P6(t,e){Fd.set(t._key(),e)}function D6(t){return ni(t._redirectPersistence)}function V6(t){return jd(k6,t.config.apiKey,t.name)}async function O6(t,e,n=!1){if(ur(t.app))return Promise.reject(oi(t));const r=vi(t),i=f2(r,e),o=await new R6(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=10*60*1e3;class M6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!m2(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vx(e))}saveEventToCache(e){this.cachedEventUids.add(Vx(e)),this.lastProcessedEventTime=Date.now()}}function Vx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function m2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function L6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j6(t,e={}){return Mr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$6=/^https?/;async function U6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await j6(t);for(const n of e)try{if(B6(n))return}catch{}Zn(t,"unauthorized-domain")}function B6(t){const e=bg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$6.test(n))return!1;if(F6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=new yu(3e4,6e4);function Ox(){const t=Nr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function H6(t){return new Promise((e,n)=>{var r,i,s;function o(){Ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ox(),n(pr(t,"network-request-failed"))},timeout:q6.get()})}if(!((i=(r=Nr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Nr().gapi)===null||s===void 0)&&s.load)o();else{const a=Pj("iframefcb");return Nr()[a]=()=>{gapi.load?o():n(pr(t,"network-request-failed"))},e2(`${Nj()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw $d=null,e})}let $d=null;function K6(t){return $d=$d||H6(t),$d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=new yu(5e3,15e3),W6="__/auth/iframe",Q6="emulator/auth/iframe",Y6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J6(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?by(e,Q6):`https://${t.config.authDomain}/${W6}`,r={apiKey:e.apiKey,appName:t.name,v:sl},i=X6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${gu(r).slice(1)}`}async function Z6(t){const e=await K6(t),n=Nr().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:J6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=pr(t,"network-request-failed"),a=Nr().setTimeout(()=>{s(o)},G6.get());function l(){Nr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t9=500,n9=600,r9="_blank",i9="http://localhost";class zx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s9(t,e,n,r=t9,i=n9){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},e9),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ct().toLowerCase();n&&(a=GS(c)?r9:n),HS(c)&&(e=e||i9,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,E])=>`${f}${m}=${E},`,"");if(Ej(c)&&a!=="_self")return o9(e||"",a),new zx(null);const h=window.open(e||"",a,d);me(h,t,"popup-blocked");try{h.focus()}catch{}return new zx(h)}function o9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9="__/auth/handler",l9="emulator/auth/handler",c9=encodeURIComponent("fac");async function Mx(t,e,n,r,i,s){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:sl,eventId:i};if(e instanceof Ay){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof _u){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${c9}=${encodeURIComponent(l)}`:"";return`${u9(t)}?${gu(a).slice(1)}${c}`}function u9({config:t}){return t.emulator?by(t,l9):`https://${t.authDomain}/${a9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="webStorageSupport";class d9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=l2,this._completeRedirectFn=O6,this._overrideRedirectResult=P6}async _openPopup(e,n,r,i){var s;pi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Mx(e,n,r,bg(),i);return s9(e,o,ky())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Mx(e,n,r,bg(),i);return p6(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(pi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Z6(e),r=new M6(e);return n.register("authEvent",i=>(me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qp,{type:Qp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Qp];o!==void 0&&n(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=U6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JS()||KS()||Ty()}}const h9=d9;var Lx="@firebase/auth",jx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m9(t){Dr(new gr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZS(t)},c=new Aj(r,i,s,l);return Mj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dr(new gr("auth-internal",e=>{const n=vi(e.getProvider("auth").getImmediate());return(r=>new f9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(Lx,jx,p9(t)),Yn(Lx,jx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=5*60,y9=SS("authIdTokenMaxAge")||g9;let Fx=null;const v9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>y9)return;const i=n==null?void 0:n.token;Fx!==i&&(Fx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _9(t=VS()){const e=bo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zj(t,{popupRedirectResolver:h9,persistence:[b6,d6,l2]}),r=SS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=v9(s.toString());o6(n,o,()=>o(n.currentUser)),s6(n,a=>o(a))}}const i=NL("auth");return i&&Lj(n,`http://${i}`),n}function w9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=pr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",w9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m9("Browser");var x9="firebase",E9="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(x9,E9,"app");var $x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,g2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,b){function w(){}w.prototype=b.prototype,S.D=b.prototype,S.prototype=new w,S.prototype.constructor=S,S.C=function(I,C,R){for(var k=Array(arguments.length-2),P=2;P<arguments.length;P++)k[P-2]=arguments[P];return b.prototype[C].apply(I,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,b,w){w||(w=0);var I=Array(16);if(typeof b=="string")for(var C=0;16>C;++C)I[C]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=S.g[0],w=S.g[1],C=S.g[2];var R=S.g[3],k=b+(R^w&(C^R))+I[0]+3614090360&4294967295;b=w+(k<<7&4294967295|k>>>25),k=R+(C^b&(w^C))+I[1]+3905402710&4294967295,R=b+(k<<12&4294967295|k>>>20),k=C+(w^R&(b^w))+I[2]+606105819&4294967295,C=R+(k<<17&4294967295|k>>>15),k=w+(b^C&(R^b))+I[3]+3250441966&4294967295,w=C+(k<<22&4294967295|k>>>10),k=b+(R^w&(C^R))+I[4]+4118548399&4294967295,b=w+(k<<7&4294967295|k>>>25),k=R+(C^b&(w^C))+I[5]+1200080426&4294967295,R=b+(k<<12&4294967295|k>>>20),k=C+(w^R&(b^w))+I[6]+2821735955&4294967295,C=R+(k<<17&4294967295|k>>>15),k=w+(b^C&(R^b))+I[7]+4249261313&4294967295,w=C+(k<<22&4294967295|k>>>10),k=b+(R^w&(C^R))+I[8]+1770035416&4294967295,b=w+(k<<7&4294967295|k>>>25),k=R+(C^b&(w^C))+I[9]+2336552879&4294967295,R=b+(k<<12&4294967295|k>>>20),k=C+(w^R&(b^w))+I[10]+4294925233&4294967295,C=R+(k<<17&4294967295|k>>>15),k=w+(b^C&(R^b))+I[11]+2304563134&4294967295,w=C+(k<<22&4294967295|k>>>10),k=b+(R^w&(C^R))+I[12]+1804603682&4294967295,b=w+(k<<7&4294967295|k>>>25),k=R+(C^b&(w^C))+I[13]+4254626195&4294967295,R=b+(k<<12&4294967295|k>>>20),k=C+(w^R&(b^w))+I[14]+2792965006&4294967295,C=R+(k<<17&4294967295|k>>>15),k=w+(b^C&(R^b))+I[15]+1236535329&4294967295,w=C+(k<<22&4294967295|k>>>10),k=b+(C^R&(w^C))+I[1]+4129170786&4294967295,b=w+(k<<5&4294967295|k>>>27),k=R+(w^C&(b^w))+I[6]+3225465664&4294967295,R=b+(k<<9&4294967295|k>>>23),k=C+(b^w&(R^b))+I[11]+643717713&4294967295,C=R+(k<<14&4294967295|k>>>18),k=w+(R^b&(C^R))+I[0]+3921069994&4294967295,w=C+(k<<20&4294967295|k>>>12),k=b+(C^R&(w^C))+I[5]+3593408605&4294967295,b=w+(k<<5&4294967295|k>>>27),k=R+(w^C&(b^w))+I[10]+38016083&4294967295,R=b+(k<<9&4294967295|k>>>23),k=C+(b^w&(R^b))+I[15]+3634488961&4294967295,C=R+(k<<14&4294967295|k>>>18),k=w+(R^b&(C^R))+I[4]+3889429448&4294967295,w=C+(k<<20&4294967295|k>>>12),k=b+(C^R&(w^C))+I[9]+568446438&4294967295,b=w+(k<<5&4294967295|k>>>27),k=R+(w^C&(b^w))+I[14]+3275163606&4294967295,R=b+(k<<9&4294967295|k>>>23),k=C+(b^w&(R^b))+I[3]+4107603335&4294967295,C=R+(k<<14&4294967295|k>>>18),k=w+(R^b&(C^R))+I[8]+1163531501&4294967295,w=C+(k<<20&4294967295|k>>>12),k=b+(C^R&(w^C))+I[13]+2850285829&4294967295,b=w+(k<<5&4294967295|k>>>27),k=R+(w^C&(b^w))+I[2]+4243563512&4294967295,R=b+(k<<9&4294967295|k>>>23),k=C+(b^w&(R^b))+I[7]+1735328473&4294967295,C=R+(k<<14&4294967295|k>>>18),k=w+(R^b&(C^R))+I[12]+2368359562&4294967295,w=C+(k<<20&4294967295|k>>>12),k=b+(w^C^R)+I[5]+4294588738&4294967295,b=w+(k<<4&4294967295|k>>>28),k=R+(b^w^C)+I[8]+2272392833&4294967295,R=b+(k<<11&4294967295|k>>>21),k=C+(R^b^w)+I[11]+1839030562&4294967295,C=R+(k<<16&4294967295|k>>>16),k=w+(C^R^b)+I[14]+4259657740&4294967295,w=C+(k<<23&4294967295|k>>>9),k=b+(w^C^R)+I[1]+2763975236&4294967295,b=w+(k<<4&4294967295|k>>>28),k=R+(b^w^C)+I[4]+1272893353&4294967295,R=b+(k<<11&4294967295|k>>>21),k=C+(R^b^w)+I[7]+4139469664&4294967295,C=R+(k<<16&4294967295|k>>>16),k=w+(C^R^b)+I[10]+3200236656&4294967295,w=C+(k<<23&4294967295|k>>>9),k=b+(w^C^R)+I[13]+681279174&4294967295,b=w+(k<<4&4294967295|k>>>28),k=R+(b^w^C)+I[0]+3936430074&4294967295,R=b+(k<<11&4294967295|k>>>21),k=C+(R^b^w)+I[3]+3572445317&4294967295,C=R+(k<<16&4294967295|k>>>16),k=w+(C^R^b)+I[6]+76029189&4294967295,w=C+(k<<23&4294967295|k>>>9),k=b+(w^C^R)+I[9]+3654602809&4294967295,b=w+(k<<4&4294967295|k>>>28),k=R+(b^w^C)+I[12]+3873151461&4294967295,R=b+(k<<11&4294967295|k>>>21),k=C+(R^b^w)+I[15]+530742520&4294967295,C=R+(k<<16&4294967295|k>>>16),k=w+(C^R^b)+I[2]+3299628645&4294967295,w=C+(k<<23&4294967295|k>>>9),k=b+(C^(w|~R))+I[0]+4096336452&4294967295,b=w+(k<<6&4294967295|k>>>26),k=R+(w^(b|~C))+I[7]+1126891415&4294967295,R=b+(k<<10&4294967295|k>>>22),k=C+(b^(R|~w))+I[14]+2878612391&4294967295,C=R+(k<<15&4294967295|k>>>17),k=w+(R^(C|~b))+I[5]+4237533241&4294967295,w=C+(k<<21&4294967295|k>>>11),k=b+(C^(w|~R))+I[12]+1700485571&4294967295,b=w+(k<<6&4294967295|k>>>26),k=R+(w^(b|~C))+I[3]+2399980690&4294967295,R=b+(k<<10&4294967295|k>>>22),k=C+(b^(R|~w))+I[10]+4293915773&4294967295,C=R+(k<<15&4294967295|k>>>17),k=w+(R^(C|~b))+I[1]+2240044497&4294967295,w=C+(k<<21&4294967295|k>>>11),k=b+(C^(w|~R))+I[8]+1873313359&4294967295,b=w+(k<<6&4294967295|k>>>26),k=R+(w^(b|~C))+I[15]+4264355552&4294967295,R=b+(k<<10&4294967295|k>>>22),k=C+(b^(R|~w))+I[6]+2734768916&4294967295,C=R+(k<<15&4294967295|k>>>17),k=w+(R^(C|~b))+I[13]+1309151649&4294967295,w=C+(k<<21&4294967295|k>>>11),k=b+(C^(w|~R))+I[4]+4149444226&4294967295,b=w+(k<<6&4294967295|k>>>26),k=R+(w^(b|~C))+I[11]+3174756917&4294967295,R=b+(k<<10&4294967295|k>>>22),k=C+(b^(R|~w))+I[2]+718787259&4294967295,C=R+(k<<15&4294967295|k>>>17),k=w+(R^(C|~b))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+b&4294967295,S.g[1]=S.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+R&4294967295}r.prototype.u=function(S,b){b===void 0&&(b=S.length);for(var w=b-this.blockSize,I=this.B,C=this.h,R=0;R<b;){if(C==0)for(;R<=w;)i(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<b;)if(I[C++]=S.charCodeAt(R++),C==this.blockSize){i(this,I),C=0;break}}else for(;R<b;)if(I[C++]=S[R++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=b},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var b=1;b<S.length-8;++b)S[b]=0;var w=8*this.o;for(b=S.length-8;b<S.length;++b)S[b]=w&255,w/=256;for(this.u(S),S=Array(16),b=w=0;4>b;++b)for(var I=0;32>I;I+=8)S[w++]=this.g[b]>>>I&255;return S};function s(S,b){var w=a;return Object.prototype.hasOwnProperty.call(w,S)?w[S]:w[S]=b(S)}function o(S,b){this.h=b;for(var w=[],I=!0,C=S.length-1;0<=C;C--){var R=S[C]|0;I&&R==b||(w[C]=R,I=!1)}this.g=w}var a={};function l(S){return-128<=S&&128>S?s(S,function(b){return new o([b|0],0>b?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return N(c(-S));for(var b=[],w=1,I=0;S>=w;I++)b[I]=S/w|0,w*=4294967296;return new o(b,0)}function d(S,b){if(S.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S.charAt(0)=="-")return N(d(S.substring(1),b));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(b,8)),I=h,C=0;C<S.length;C+=8){var R=Math.min(8,S.length-C),k=parseInt(S.substring(C,C+R),b);8>R?(R=c(Math.pow(b,R)),I=I.j(R).add(c(k))):(I=I.j(w),I=I.add(c(k)))}return I}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-N(this).m();for(var S=0,b=1,w=0;w<this.g.length;w++){var I=this.i(w);S+=(0<=I?I:4294967296+I)*b,b*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(x(this))return"-"+N(this).toString(S);for(var b=c(Math.pow(S,6)),w=this,I="";;){var C=A(w,b).g;w=y(w,C.j(b));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(S);if(w=C,E(w))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(var b=0;b<S.g.length;b++)if(S.g[b]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=y(this,S),x(S)?-1:E(S)?0:1};function N(S){for(var b=S.g.length,w=[],I=0;I<b;I++)w[I]=~S.g[I];return new o(w,~S.h).add(f)}t.abs=function(){return x(this)?N(this):this},t.add=function(S){for(var b=Math.max(this.g.length,S.g.length),w=[],I=0,C=0;C<=b;C++){var R=I+(this.i(C)&65535)+(S.i(C)&65535),k=(R>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);I=k>>>16,R&=65535,k&=65535,w[C]=k<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function y(S,b){return S.add(N(b))}t.j=function(S){if(E(this)||E(S))return h;if(x(this))return x(S)?N(this).j(N(S)):N(N(this).j(S));if(x(S))return N(this.j(N(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var b=this.g.length+S.g.length,w=[],I=0;I<2*b;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<S.g.length;C++){var R=this.i(I)>>>16,k=this.i(I)&65535,P=S.i(C)>>>16,$=S.i(C)&65535;w[2*I+2*C]+=k*$,v(w,2*I+2*C),w[2*I+2*C+1]+=R*$,v(w,2*I+2*C+1),w[2*I+2*C+1]+=k*P,v(w,2*I+2*C+1),w[2*I+2*C+2]+=R*P,v(w,2*I+2*C+2)}for(I=0;I<b;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=b;I<2*b;I++)w[I]=0;return new o(w,0)};function v(S,b){for(;(S[b]&65535)!=S[b];)S[b+1]+=S[b]>>>16,S[b]&=65535,b++}function T(S,b){this.g=S,this.h=b}function A(S,b){if(E(b))throw Error("division by zero");if(E(S))return new T(h,h);if(x(S))return b=A(N(S),b),new T(N(b.g),N(b.h));if(x(b))return b=A(S,N(b)),new T(N(b.g),b.h);if(30<S.g.length){if(x(S)||x(b))throw Error("slowDivide_ only works with positive integers.");for(var w=f,I=b;0>=I.l(S);)w=O(w),I=O(I);var C=M(w,1),R=M(I,1);for(I=M(I,2),w=M(w,2);!E(I);){var k=R.add(I);0>=k.l(S)&&(C=C.add(w),R=k),I=M(I,1),w=M(w,1)}return b=y(S,C.j(b)),new T(C,b)}for(C=h;0<=S.l(b);){for(w=Math.max(1,Math.floor(S.m()/b.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=c(w),k=R.j(b);x(k)||0<k.l(S);)w-=I,R=c(w),k=R.j(b);E(R)&&(R=f),C=C.add(R),S=y(S,k)}return new T(C,S)}t.A=function(S){return A(this,S).h},t.and=function(S){for(var b=Math.max(this.g.length,S.g.length),w=[],I=0;I<b;I++)w[I]=this.i(I)&S.i(I);return new o(w,this.h&S.h)},t.or=function(S){for(var b=Math.max(this.g.length,S.g.length),w=[],I=0;I<b;I++)w[I]=this.i(I)|S.i(I);return new o(w,this.h|S.h)},t.xor=function(S){for(var b=Math.max(this.g.length,S.g.length),w=[],I=0;I<b;I++)w[I]=this.i(I)^S.i(I);return new o(w,this.h^S.h)};function O(S){for(var b=S.g.length+1,w=[],I=0;I<b;I++)w[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(w,S.h)}function M(S,b){var w=b>>5;b%=32;for(var I=S.g.length-w,C=[],R=0;R<I;R++)C[R]=0<b?S.i(R+w)>>>b|S.i(R+w+1)<<32-b:S.i(R+w);return new o(C,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,g2=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Js=o}).apply(typeof $x<"u"?$x:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var y2,ec,v2,Ud,Sg,_2,w2,x2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(u,g){if(g)e:{var _=r;u=u.split(".");for(var V=0;V<u.length-1;V++){var q=u[V];if(!(q in _))break e;_=_[q]}u=u[u.length-1],V=_[u],g=g(V),g!=V&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var _=0,V=!1,q={next:function(){if(!V&&_<u.length){var W=_++;return{value:g(W,u[W]),done:!1}}return V=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(u){return u||function(){return s(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,_){return u.call.apply(u.bind,arguments)}function h(u,g,_){if(!u)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,V),u.apply(g,q)}}return function(){return u.apply(g,arguments)}}function f(u,g,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var V=_.slice();return V.push.apply(V,arguments),u.apply(this,V)}}function E(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(V,q,W){for(var te=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)te[Be-2]=arguments[Be];return g.prototype[q].apply(V,te)}}function x(u){const g=u.length;if(0<g){const _=Array(g);for(let V=0;V<g;V++)_[V]=u[V];return _}return[]}function N(u,g){for(let _=1;_<arguments.length;_++){const V=arguments[_];if(l(V)){const q=u.length||0,W=V.length||0;u.length=q+W;for(let te=0;te<W;te++)u[q+te]=V[te]}else u.push(V)}}class y{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function A(u){return A[" "](u),u}A[" "]=function(){};var O=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(u,g,_){for(const V in u)g.call(_,u[V],V,u)}function S(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function b(u){const g={};for(const _ in u)g[_]=u[_];return g}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,g){let _,V;for(let q=1;q<arguments.length;q++){V=arguments[q];for(_ in V)u[_]=V[_];for(let W=0;W<w.length;W++)_=w[W],Object.prototype.hasOwnProperty.call(V,_)&&(u[_]=V[_])}}function C(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function R(u){a.setTimeout(()=>{throw u},0)}function k(){var u=L;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class P{constructor(){this.h=this.g=null}add(g,_){const V=$.get();V.set(g,_),this.h?this.h.next=V:this.g=V,this.h=V}}var $=new y(()=>new z,u=>u.reset());class z{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let F,j=!1,L=new P,B=()=>{const u=a.Promise.resolve(void 0);F=()=>{u.then(G)}};var G=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(_){R(_)}var g=$;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}j=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};a.addEventListener("test",_,g),a.removeEventListener("test",_,g)}catch{}return u}();function ee(u,g){if(Y.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,V=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(O){e:{try{A(g.nodeName);var q=!0;break e}catch{}q=!1}q||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ee.aa.h.call(this)}}E(ee,Y);var oe={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),de=0;function we(u,g,_,V,q){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!V,this.ha=q,this.key=++de,this.da=this.fa=!1}function _e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,g,_,V,q){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var te=be(u,g,V,q);return-1<te?(g=u[te],_||(g.fa=!1)):(g=new we(g,this.src,W,!!V,q),g.fa=_,u.push(g)),g};function $e(u,g){var _=g.type;if(_ in u.g){var V=u.g[_],q=Array.prototype.indexOf.call(V,g,void 0),W;(W=0<=q)&&Array.prototype.splice.call(V,q,1),W&&(_e(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function be(u,g,_,V){for(var q=0;q<u.length;++q){var W=u[q];if(!W.da&&W.listener==g&&W.capture==!!_&&W.ha==V)return q}return-1}var Ge="closure_lm_"+(1e6*Math.random()|0),ze={};function dt(u,g,_,V,q){if(Array.isArray(g)){for(var W=0;W<g.length;W++)dt(u,g[W],_,V,q);return null}return _=bt(_),u&&u[he]?u.K(g,_,c(V)?!!V.capture:!1,q):Se(u,g,_,!1,V,q)}function Se(u,g,_,V,q,W){if(!g)throw Error("Invalid event type");var te=c(q)?!!q.capture:!!q,Be=Zt(u);if(Be||(u[Ge]=Be=new ye(u)),_=Be.add(g,_,V,te,W),_.proxy)return _;if(V=ie(),_.proxy=V,V.src=u,V.listener=_,u.addEventListener)X||(q=te),q===void 0&&(q=!1),u.addEventListener(g.toString(),V,q);else if(u.attachEvent)u.attachEvent(Et(g.toString()),V);else if(u.addListener&&u.removeListener)u.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ie(){function u(_){return g.call(u.src,u.listener,_)}const g=Jt;return u}function xe(u,g,_,V,q){if(Array.isArray(g))for(var W=0;W<g.length;W++)xe(u,g[W],_,V,q);else V=c(V)?!!V.capture:!!V,_=bt(_),u&&u[he]?(u=u.i,g=String(g).toString(),g in u.g&&(W=u.g[g],_=be(W,_,V,q),-1<_&&(_e(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[g],u.h--)))):u&&(u=Zt(u))&&(g=u.g[g.toString()],u=-1,g&&(u=be(g,_,V,q)),(_=-1<u?g[u]:null)&&yt(_))}function yt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[he])$e(g.i,u);else{var _=u.type,V=u.proxy;g.removeEventListener?g.removeEventListener(_,V,u.capture):g.detachEvent?g.detachEvent(Et(_),V):g.addListener&&g.removeListener&&g.removeListener(V),(_=Zt(g))?($e(_,u),_.h==0&&(_.src=null,g[Ge]=null)):_e(u)}}}function Et(u){return u in ze?ze[u]:ze[u]="on"+u}function Jt(u,g){if(u.da)u=!0;else{g=new ee(g,this);var _=u.listener,V=u.ha||u.src;u.fa&&yt(u),u=_.call(V,g)}return u}function Zt(u){return u=u[Ge],u instanceof ye?u:null}var Bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(u){return typeof u=="function"?u:(u[Bt]||(u[Bt]=function(g){return u.handleEvent(g)}),u[Bt])}function Ve(){U.call(this),this.i=new ye(this),this.M=this,this.F=null}E(Ve,U),Ve.prototype[he]=!0,Ve.prototype.removeEventListener=function(u,g,_,V){xe(this,u,g,_,V)};function Me(u,g){var _,V=u.F;if(V)for(_=[];V;V=V.F)_.push(V);if(u=u.M,V=g.type||g,typeof g=="string")g=new Y(g,u);else if(g instanceof Y)g.target=g.target||u;else{var q=g;g=new Y(V,u),I(g,q)}if(q=!0,_)for(var W=_.length-1;0<=W;W--){var te=g.g=_[W];q=kt(te,V,!0,g)&&q}if(te=g.g=u,q=kt(te,V,!0,g)&&q,q=kt(te,V,!1,g)&&q,_)for(W=0;W<_.length;W++)te=g.g=_[W],q=kt(te,V,!1,g)&&q}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],V=0;V<_.length;V++)_e(_[V]);delete u.g[g],u.h--}}this.F=null},Ve.prototype.K=function(u,g,_,V){return this.i.add(String(u),g,!1,_,V)},Ve.prototype.L=function(u,g,_,V){return this.i.add(String(u),g,!0,_,V)};function kt(u,g,_,V){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var q=!0,W=0;W<g.length;++W){var te=g[W];if(te&&!te.da&&te.capture==_){var Be=te.listener,Mt=te.ha||te.src;te.fa&&$e(u.i,te),q=Be.call(Mt,V)!==!1&&q}}return q&&!V.defaultPrevented}function Xe(u,g,_){if(typeof u=="function")_&&(u=f(u,_));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function er(u){u.g=Xe(()=>{u.g=null,u.i&&(u.i=!1,er(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ht extends U{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:er(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vt(u){U.call(this),this.h=u,this.g={}}E(vt,U);var Fn=[];function $n(u){M(u.g,function(g,_){this.g.hasOwnProperty(_)&&yt(g)},u),u.g={}}vt.prototype.N=function(){vt.aa.N.call(this),$n(this)},vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=a.JSON.stringify,En=a.JSON.parse,ft=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function bn(){}bn.prototype.h=null;function _i(u){return u.h||(u.h=u.i())}function et(){}var Un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lr(){Y.call(this,"d")}E(Lr,Y);function In(){Y.call(this,"c")}E(In,Y);var tr={},To=null;function wi(){return To=To||new Ve}tr.La="serverreachability";function So(u){Y.call(this,tr.La,u)}E(So,Y);function jr(u){const g=wi();Me(g,new So(g))}tr.STAT_EVENT="statevent";function Co(u,g){Y.call(this,tr.STAT_EVENT,u),this.stat=g}E(Co,Y);function It(u){const g=wi();Me(g,new Co(g,u))}tr.Ma="timingevent";function Ao(u,g){Y.call(this,tr.Ma,u),this.size=g}E(Ao,Y);function Fr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function fl(u,g,_,V,q,W){u.info(function(){if(u.g)if(W)for(var te="",Be=W.split("&"),Mt=0;Mt<Be.length;Mt++){var Oe=Be[Mt].split("=");if(1<Oe.length){var qt=Oe[0];Oe=Oe[1];var Ht=qt.split("_");te=2<=Ht.length&&Ht[1]=="type"?te+(qt+"="+Oe+"&"):te+(qt+"=redacted&")}}else te=null;else te=W;return"XMLHTTP REQ ("+V+") [attempt "+q+"]: "+g+`
`+_+`
`+te})}function pl(u,g,_,V,q,W,te){u.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+q+"]: "+g+`
`+_+`
`+W+" "+te})}function wr(u,g,_,V){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+xr(u,_)+(V?" "+V:"")})}function ml(u,g){u.info(function(){return"TIMEOUT: "+g})}_r.prototype.info=function(){};function xr(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var V=_[u];if(!(2>V.length)){var q=V[1];if(Array.isArray(q)&&!(1>q.length)){var W=q[0];if(W!="noop"&&W!="stop"&&W!="close")for(var te=1;te<q.length;te++)q[te]=""}}}}return xn(_)}catch{return g}}var xi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Is;function Ei(){}E(Ei,bn),Ei.prototype.g=function(){return new XMLHttpRequest},Ei.prototype.i=function(){return{}},Is=new Ei;function Bn(u,g,_,V){this.j=u,this.i=g,this.l=_,this.R=V||1,this.U=new vt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ko}function ko(){this.i=null,this.g="",this.h=!1}var Ro={},Ts={};function Ss(u,g,_){u.L=1,u.v=Ru(qr(g)),u.m=_,u.P=!0,No(u,null)}function No(u,g){u.F=Date.now(),Ii(u),u.A=qr(u.v);var _=u.A,V=u.R;Array.isArray(V)||(V=[String(V)]),Nv(_.i,"t",V),u.C=0,_=u.j.J,u.h=new ko,u.g=Qv(u.j,_?g:null,!u.m),0<u.O&&(u.M=new ht(f(u.Y,u,u.g),u.O)),g=u.U,_=u.g,V=u.ca;var q="readystatechange";Array.isArray(q)||(q&&(Fn[0]=q.toString()),q=Fn);for(var W=0;W<q.length;W++){var te=dt(_,q[W],V||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),jr(),fl(u.i,u.u,u.A,u.l,u.R,u.m)}Bn.prototype.ca=function(u){u=u.target;const g=this.M;g&&Hr(u)==3?g.j():this.Y(u)},Bn.prototype.Y=function(u){try{if(u==this.g)e:{const Ht=Hr(this.g);var g=this.g.Ba();const Vo=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Lv(this.g)))){this.J||Ht!=4||g==7||(g==8||0>=Vo?jr(3):jr(2)),Si(this);var _=this.g.Z();this.X=_;t:if(bi(this)){var V=Lv(this.g);u="";var q=V.length,W=Hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),$r(this);var te="";break t}this.h.i=new a.TextDecoder}for(g=0;g<q;g++)this.h.h=!0,u+=this.h.i.decode(V[g],{stream:!(W&&g==q-1)});V.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,pl(this.i,this.u,this.A,this.l,this.R,Ht,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Mt=this.g;if((Be=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Be)){var Oe=Be;break t}}Oe=null}if(_=Oe)wr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Er(this,_);else{this.o=!1,this.s=3,It(12),nr(this),$r(this);break e}}if(this.P){_=!0;let rr;for(;!this.J&&this.C<te.length;)if(rr=gl(this,te),rr==Ts){Ht==4&&(this.s=4,It(14),_=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==Ro){this.s=4,It(15),wr(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else wr(this.i,this.l,rr,null),Er(this,rr);if(bi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||te.length!=0||this.h.h||(this.s=1,It(16),_=!1),this.o=this.o&&_,!_)wr(this.i,this.l,te,"[Invalid Chunked Response]"),nr(this),$r(this);else if(0<te.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),ep(qt),qt.M=!0,It(11))}}else wr(this.i,this.l,te,null),Er(this,te);Ht==4&&nr(this),this.o&&!this.J&&(Ht==4?Hv(this.j,this):(this.o=!1,Ii(this)))}else ok(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),nr(this),$r(this)}}}catch{}finally{}};function bi(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function gl(u,g){var _=u.C,V=g.indexOf(`
`,_);return V==-1?Ts:(_=Number(g.substring(_,V)),isNaN(_)?Ro:(V+=1,V+_>g.length?Ts:(g=g.slice(V,V+_),u.C=V+_,g)))}Bn.prototype.cancel=function(){this.J=!0,nr(this)};function Ii(u){u.S=Date.now()+u.I,Ti(u,u.I)}function Ti(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Fr(f(u.ba,u),g)}function Si(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ml(this.i,this.A),this.L!=2&&(jr(),It(17)),nr(this),this.s=2,$r(this)):Ti(this,this.S-u)};function $r(u){u.j.G==0||u.J||Hv(u.j,u)}function nr(u){Si(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,$n(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Er(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||Ee(_.h,u))){if(!u.K&&Ee(_.h,u)&&_.G==3){try{var V=_.Da.g.parse(g)}catch{V=null}if(Array.isArray(V)&&V.length==3){var q=V;if(q[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)zu(_),Vu(_);else break e;Zf(_),It(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=Fr(f(_.Za,_),6e3));if(1>=Ur(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Rs(_,11)}else if((u.K||_.g==u)&&zu(_),!v(g))for(q=_.Da.g.parse(g),g=0;g<q.length;g++){let Oe=q[g];if(_.T=Oe[0],Oe=Oe[1],_.G==2)if(Oe[0]=="c"){_.K=Oe[1],_.ia=Oe[2];const qt=Oe[3];qt!=null&&(_.la=qt,_.j.info("VER="+_.la));const Ht=Oe[4];Ht!=null&&(_.Aa=Ht,_.j.info("SVER="+_.Aa));const Vo=Oe[5];Vo!=null&&typeof Vo=="number"&&0<Vo&&(V=1.5*Vo,_.L=V,_.j.info("backChannelRequestTimeoutMs_="+V)),V=_;const rr=u.g;if(rr){const Lu=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lu){var W=V.h;W.g||Lu.indexOf("spdy")==-1&&Lu.indexOf("quic")==-1&&Lu.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ge(W,W.h),W.h=null))}if(V.D){const tp=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;tp&&(V.ya=tp,We(V.I,V.D,tp))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),V=_;var te=u;if(V.qa=Wv(V,V.J?V.ia:null,V.W),te.K){Re(V.h,te);var Be=te,Mt=V.L;Mt&&(Be.I=Mt),Be.B&&(Si(Be),Ii(Be)),V.g=te}else Bv(V);0<_.i.length&&Ou(_)}else Oe[0]!="stop"&&Oe[0]!="close"||Rs(_,7);else _.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Rs(_,7):Jf(_):Oe[0]!="noop"&&_.l&&_.l.ta(Oe),_.v=0)}}jr(4)}catch{}}var yl=class{constructor(u,g){this.g=u,this.map=g}};function Cs(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function As(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ur(u){return u.h?1:u.g?u.g.size:0}function Ee(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ge(u,g){u.g?u.g.add(g):u.h=g}function Re(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Cs.prototype.cancel=function(){if(this.i=Ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ne(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return x(u.i)}function tt(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],_=u.length,V=0;V<_;V++)g.push(u[V]);return g}g=[],_=0;for(V in u)g[_++]=u[V];return g}function Br(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const V in u)g[_++]=V;return g}}}function vl(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=Br(u),V=tt(u),q=V.length,W=0;W<q;W++)g.call(void 0,V[W],_&&_[W],u)}var _l=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yf(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var V=u[_].indexOf("="),q=null;if(0<=V){var W=u[_].substring(0,V);q=u[_].substring(V+1)}else W=u[_];g(W,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function ks(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ks){this.h=u.h,Au(this,u.j),this.o=u.o,this.g=u.g,ku(this,u.s),this.l=u.l;var g=u.i,_=new El;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Cv(this,_),this.m=u.m}else u&&(g=String(u).match(_l))?(this.h=!1,Au(this,g[1]||"",!0),this.o=wl(g[2]||""),this.g=wl(g[3]||"",!0),ku(this,g[4]),this.l=wl(g[5]||"",!0),Cv(this,g[6]||"",!0),this.m=wl(g[7]||"")):(this.h=!1,this.i=new El(null,this.h))}ks.prototype.toString=function(){var u=[],g=this.j;g&&u.push(xl(g,Av,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(xl(g,Av,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(xl(_,_.charAt(0)=="/"?YA:QA,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",xl(_,JA)),u.join("")};function qr(u){return new ks(u)}function Au(u,g,_){u.j=_?wl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ku(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Cv(u,g,_){g instanceof El?(u.i=g,ZA(u.i,u.h)):(_||(g=xl(g,XA)),u.i=new El(g,u.h))}function We(u,g,_){u.i.set(g,_)}function Ru(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function wl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function xl(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,WA),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function WA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Av=/[#\/\?@]/g,QA=/[#\?:]/g,YA=/[#\?]/g,XA=/[#\?@]/g,JA=/#/g;function El(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Ci(u){u.g||(u.g=new Map,u.h=0,u.i&&Yf(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=El.prototype,t.add=function(u,g){Ci(this),this.i=null,u=Po(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function kv(u,g){Ci(u),g=Po(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Rv(u,g){return Ci(u),g=Po(u,g),u.g.has(g)}t.forEach=function(u,g){Ci(this),this.g.forEach(function(_,V){_.forEach(function(q){u.call(g,q,V,this)},this)},this)},t.na=function(){Ci(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let V=0;V<g.length;V++){const q=u[V];for(let W=0;W<q.length;W++)_.push(g[V])}return _},t.V=function(u){Ci(this);let g=[];if(typeof u=="string")Rv(this,u)&&(g=g.concat(this.g.get(Po(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},t.set=function(u,g){return Ci(this),this.i=null,u=Po(this,u),Rv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Nv(u,g,_){kv(u,g),0<_.length&&(u.i=null,u.g.set(Po(u,g),x(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var V=g[_];const W=encodeURIComponent(String(V)),te=this.V(V);for(V=0;V<te.length;V++){var q=W;te[V]!==""&&(q+="="+encodeURIComponent(String(te[V]))),u.push(q)}}return this.i=u.join("&")};function Po(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ZA(u,g){g&&!u.j&&(Ci(u),u.i=null,u.g.forEach(function(_,V){var q=V.toLowerCase();V!=q&&(kv(this,V),Nv(this,q,_))},u)),u.j=g}function ek(u,g){const _=new _r;if(a.Image){const V=new Image;V.onload=m(Ai,_,"TestLoadImage: loaded",!0,g,V),V.onerror=m(Ai,_,"TestLoadImage: error",!1,g,V),V.onabort=m(Ai,_,"TestLoadImage: abort",!1,g,V),V.ontimeout=m(Ai,_,"TestLoadImage: timeout",!1,g,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=u}else g(!1)}function tk(u,g){const _=new _r,V=new AbortController,q=setTimeout(()=>{V.abort(),Ai(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:V.signal}).then(W=>{clearTimeout(q),W.ok?Ai(_,"TestPingServer: ok",!0,g):Ai(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),Ai(_,"TestPingServer: error",!1,g)})}function Ai(u,g,_,V,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),V(_)}catch{}}function nk(){this.g=new ft}function rk(u,g,_){const V=_||"";try{vl(u,function(q,W){let te=q;c(q)&&(te=xn(q)),g.push(V+W+"="+encodeURIComponent(te))})}catch(q){throw g.push(V+"type="+encodeURIComponent("_badmap")),q}}function Nu(u){this.l=u.Ub||null,this.j=u.eb||!1}E(Nu,bn),Nu.prototype.g=function(){return new Pu(this.l,this.j)},Nu.prototype.i=function(u){return function(){return u}}({});function Pu(u,g){Ve.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Pu,Ve),t=Pu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Il(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Il(this)),this.g&&(this.readyState=3,Il(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?bl(this):Il(this),this.readyState==3&&Pv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,bl(this))},t.Qa=function(u){this.g&&(this.response=u,bl(this))},t.ga=function(){this.g&&bl(this)};function bl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Il(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Il(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dv(u){let g="";return M(u,function(_,V){g+=V,g+=":",g+=_,g+=`\r
`}),g}function Xf(u,g,_){e:{for(V in _){var V=!1;break e}V=!0}V||(_=Dv(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):We(u,g,_))}function at(u){Ve.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(at,Ve);var ik=/^https?$/i,sk=["POST","PUT"];t=at.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,_,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Is.g(),this.v=this.o?_i(this.o):_i(Is),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(W){Vv(this,W);return}if(u=_||"",_=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var q in V)_.set(q,V[q]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const W of V.keys())_.set(W,V.get(W));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),q=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sk,g,void 0))||V||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,te]of _)this.g.setRequestHeader(W,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mv(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Vv(this,W)}};function Vv(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Ov(u),Du(u)}function Ov(u){u.A||(u.A=!0,Me(u,"complete"),Me(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Me(this,"complete"),Me(this,"abort"),Du(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Du(this,!0)),at.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zv(this):this.bb())},t.bb=function(){zv(this)};function zv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Hr(u)!=4||u.Z()!=2)){if(u.u&&Hr(u)==4)Xe(u.Ea,0,u);else if(Me(u,"readystatechange"),Hr(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var V;if(V=te===0){var q=String(u.D).match(_l)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),V=!ik.test(q?q.toLowerCase():"")}_=V}if(_)Me(u,"complete"),Me(u,"success");else{u.m=6;try{var W=2<Hr(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Ov(u)}}finally{Du(u)}}}}function Du(u,g){if(u.g){Mv(u);const _=u.g,V=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Me(u,"ready");try{_.onreadystatechange=V}catch{}}}function Mv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Hr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),En(g)}};function Lv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ok(u){const g={};u=(u.g&&2<=Hr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<u.length;V++){if(v(u[V]))continue;var _=C(u[V]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=g[q]||[];g[q]=W,W.push(_)}S(g,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tl(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function jv(u){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tl("baseRetryDelayMs",5e3,u),this.cb=Tl("retryDelaySeedMs",1e4,u),this.Wa=Tl("forwardChannelMaxRetries",2,u),this.wa=Tl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Cs(u&&u.concurrentRequestLimit),this.Da=new nk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jv.prototype,t.la=8,t.G=1,t.connect=function(u,g,_,V){It(0),this.W=u,this.H=g||{},_&&V!==void 0&&(this.H.OSID=_,this.H.OAID=V),this.F=this.X,this.I=Wv(this,null,this.W),Ou(this)};function Jf(u){if(Fv(u),u.G==3){var g=u.U++,_=qr(u.I);if(We(_,"SID",u.K),We(_,"RID",g),We(_,"TYPE","terminate"),Sl(u,_),g=new Bn(u,u.j,g),g.L=2,g.v=Ru(qr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=g.v,_=!0),_||(g.g=Qv(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ii(g)}Gv(u)}function Vu(u){u.g&&(ep(u),u.g.cancel(),u.g=null)}function Fv(u){Vu(u),u.u&&(a.clearTimeout(u.u),u.u=null),zu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ou(u){if(!As(u.h)&&!u.s){u.s=!0;var g=u.Ga;F||B(),j||(F(),j=!0),L.add(g,u),u.B=0}}function ak(u,g){return Ur(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Fr(f(u.Ga,u,g),Kv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const q=new Bn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=b(W),I(W,this.S)):W=this.S),this.m!==null||this.O||(q.H=W,W=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var V=this.i[_];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(g+=V,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Uv(this,q,g),_=qr(this.I),We(_,"RID",u),We(_,"CVER",22),this.D&&We(_,"X-HTTP-Session-Id",this.D),Sl(this,_),W&&(this.O?g="headers="+encodeURIComponent(String(Dv(W)))+"&"+g:this.m&&Xf(_,this.m,W)),ge(this.h,q),this.Ua&&We(_,"TYPE","init"),this.P?(We(_,"$req",g),We(_,"SID","null"),q.T=!0,Ss(q,_,null)):Ss(q,_,g),this.G=2}}else this.G==3&&(u?$v(this,u):this.i.length==0||As(this.h)||$v(this))};function $v(u,g){var _;g?_=g.l:_=u.U++;const V=qr(u.I);We(V,"SID",u.K),We(V,"RID",_),We(V,"AID",u.T),Sl(u,V),u.m&&u.o&&Xf(V,u.m,u.o),_=new Bn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Uv(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ge(u.h,_),Ss(_,V,g)}function Sl(u,g){u.H&&M(u.H,function(_,V){We(g,V,_)}),u.l&&vl({},function(_,V){We(g,V,_)})}function Uv(u,g,_){_=Math.min(u.i.length,_);var V=u.l?f(u.l.Na,u.l,u):null;e:{var q=u.i;let W=-1;for(;;){const te=["count="+_];W==-1?0<_?(W=q[0].g,te.push("ofs="+W)):W=0:te.push("ofs="+W);let Be=!0;for(let Mt=0;Mt<_;Mt++){let Oe=q[Mt].g;const qt=q[Mt].map;if(Oe-=W,0>Oe)W=Math.max(0,q[Mt].g-100),Be=!1;else try{rk(qt,te,"req"+Oe+"_")}catch{V&&V(qt)}}if(Be){V=te.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,V}function Bv(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;F||B(),j||(F(),j=!0),L.add(g,u),u.v=0}}function Zf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Fr(f(u.Fa,u),Kv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,qv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Fr(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Vu(this),qv(this))};function ep(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function qv(u){u.g=new Bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=qr(u.qa);We(g,"RID","rpc"),We(g,"SID",u.K),We(g,"AID",u.T),We(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(g,"TO",u.ja),We(g,"TYPE","xmlhttp"),Sl(u,g),u.m&&u.o&&Xf(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Ru(qr(g)),_.m=null,_.P=!0,No(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Vu(this),Zf(this),It(19))};function zu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Hv(u,g){var _=null;if(u.g==g){zu(u),ep(u),u.g=null;var V=2}else if(Ee(u.h,g))_=g.D,Re(u.h,g),V=1;else return;if(u.G!=0){if(g.o)if(V==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var q=u.B;V=wi(),Me(V,new Ao(V,_)),Ou(u)}else Bv(u);else if(q=g.s,q==3||q==0&&0<g.X||!(V==1&&ak(u,g)||V==2&&Zf(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),q){case 1:Rs(u,5);break;case 4:Rs(u,10);break;case 3:Rs(u,6);break;default:Rs(u,2)}}}function Kv(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function Rs(u,g){if(u.j.info("Error code "+g),g==2){var _=f(u.fb,u),V=u.Xa;const q=!V;V=new ks(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Au(V,"https"),Ru(V),q?ek(V.toString(),_):tk(V.toString(),_)}else It(2);u.G=0,u.l&&u.l.sa(g),Gv(u),Fv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Gv(u){if(u.G=0,u.ka=[],u.l){const g=Ne(u.h);(g.length!=0||u.i.length!=0)&&(N(u.ka,g),N(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function Wv(u,g,_){var V=_ instanceof ks?qr(_):new ks(_);if(V.g!="")g&&(V.g=g+"."+V.g),ku(V,V.s);else{var q=a.location;V=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;var W=new ks(null);V&&Au(W,V),g&&(W.g=g),q&&ku(W,q),_&&(W.l=_),V=W}return _=u.D,g=u.ya,_&&g&&We(V,_,g),We(V,"VER",u.la),Sl(u,V),V}function Qv(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new at(new Nu({eb:_})):new at(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yv(){}t=Yv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mu(){}Mu.prototype.g=function(u,g){return new Tn(u,g)};function Tn(u,g){Ve.call(this),this.g=new jv(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!v(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Do(this)}E(Tn,Ve),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){Jf(this.g)},Tn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=xn(u),u=_);g.i.push(new yl(g.Ya++,u)),g.G==3&&Ou(g)},Tn.prototype.N=function(){this.g.l=null,delete this.j,Jf(this.g),delete this.g,Tn.aa.N.call(this)};function Xv(u){Lr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Xv,Lr);function Jv(){In.call(this),this.status=1}E(Jv,In);function Do(u){this.g=u}E(Do,Yv),Do.prototype.ua=function(){Me(this.g,"a")},Do.prototype.ta=function(u){Me(this.g,new Xv(u))},Do.prototype.sa=function(u){Me(this.g,new Jv)},Do.prototype.ra=function(){Me(this.g,"b")},Mu.prototype.createWebChannel=Mu.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,x2=function(){return new Mu},w2=function(){return wi()},_2=tr,Sg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,Ud=xi,bs.COMPLETE="complete",v2=bs,et.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,ec=et,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,y2=at}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const Ux="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new Af("@firebase/firestore");function Go(){return co.logLevel}function J(t,...e){if(co.logLevel<=Ae.DEBUG){const n=e.map(Ny);co.debug(`Firestore (${al}): ${t}`,...n)}}function mt(t,...e){if(co.logLevel<=Ae.ERROR){const n=e.map(Ny);co.error(`Firestore (${al}): ${t}`,...n)}}function Xc(t,...e){if(co.logLevel<=Ae.WARN){const n=e.map(Ny);co.warn(`Firestore (${al}): ${t}`,...n)}}function Ny(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: `+t;throw mt(e),new Error(e)}function fe(t,e){t||ce()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class T9{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new b9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Qt(e)}}class S9{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C9{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new S9(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){fe(this.o===void 0);const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new A9(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=R9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function La(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function b2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new st(0,0))}static max(){return new pe(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(),r===void 0?r=e.length-n:r>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends Jc{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const N9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Jc{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return N9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Le.fromString(e))}static fromName(e){return new re(Le.fromString(e).popFirst(5))}static empty(){return new re(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Le(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Cg(t){return t.fields.find(e=>e.kind===2)}function zs(t){return t.fields.filter(e=>e.kind!==2)}jh.UNKNOWN_ID=-1;class Bd{constructor(e,n){this.fieldPath=e,this.kind=n}}class Zc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Zc(0,Mn.min())}}function I2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Mn(i,re.empty(),e)}function T2(t){return new Mn(t.readTime,t.key,-1)}class Mn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mn(pe.min(),re.empty(),-1)}static max(){return new Mn(pe.max(),re.empty(),-1)}}function Py(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vs(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==S2)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(i=>i?H.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new H((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new H((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Pr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new mc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Dy(r.target.error);this.V.reject(new mc(e,i))}}static open(e,n,r,i){try{return new Pf(n,e.transaction(i,r))}catch(s){throw new mc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(J("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new D9(n)}}class os{constructor(e,n,r){this.name=e,this.version=n,this.p=r,os.S(Ct())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return J("SimpleDb","Removing database:",e),Ms(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vy())return!1;if(os.v())return!0;const e=Ct(),n=os.S(e),r=0<n&&n<10,i=A2(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(J("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new mc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ne(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ne(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mc(e,o))},i.onupgradeneeded=s=>{J("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{J("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Pf.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),H.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(J("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function A2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class P9{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ms(this.B.delete())}}class mc extends ne{constructor(e,n){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function _s(t){return t.name==="IndexedDbTransactionError"}class D9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(J("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(J("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ms(r)}add(e){return J("SimpleDb","ADD",this.store.name,e,e),Ms(this.store.add(e))}get(e){return Ms(this.store.get(e)).next(n=>(n===void 0&&(n=null),J("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return J("SimpleDb","DELETE",this.store.name,e),Ms(this.store.delete(e))}count(){return J("SimpleDb","COUNT",this.store.name),Ms(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new H((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new H((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){J("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new H((r,i)=>{n.onerror=s=>{const o=Dy(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new H((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new P9(a),c=n(a.primaryKey,a.value,l);if(c instanceof H){const d=c.catch(h=>(l.done(),H.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>H.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ms(t){return new H((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Dy(r.target.error);n(i)}})}let Bx=!1;function Dy(t){const e=os.S(Ct());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bx||(Bx=!0,setTimeout(()=>{throw r},0)),r}}return t}class V9{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){J("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{J("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){_s(n)?J("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await vs(n)}await this.X(6e4)})}}class O9{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return H.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return J("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(J("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=T2(s);Py(o,r)>0&&(r=o)}),new Mn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hn.oe=-1;function Df(t){return t==null}function eu(t){return t===0&&1/t==-1/0}function k2(t){return typeof t=="number"&&Number.isInteger(t)&&!eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qx(e)),e=z9(t.get(n),e);return qx(e)}function z9(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function qx(t){return t+""}function Sr(t){const e=t.length;if(fe(e>=2),e===2)return fe(t.charAt(0)===""&&t.charAt(1)===""),Le.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ce(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ce()}s=o+2}return new Le(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e){return[t,nn(e)]}function R2(t,e,n){return[t,nn(e),n]}const M9={},L9=["prefixPath","collectionGroup","readTime","documentId"],j9=["prefixPath","collectionGroup","documentId"],F9=["collectionGroup","readTime","prefixPath","documentId"],$9=["canonicalId","targetId"],U9=["targetId","path"],B9=["path","targetId"],q9=["collectionId","parent"],H9=["indexId","uid"],K9=["uid","sequenceNumber"],G9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W9=["indexId","uid","orderedDocumentKey"],Q9=["userId","collectionPath","documentId"],Y9=["userId","collectionPath","largestBatchId"],X9=["userId","collectionGroup","largestBatchId"],N2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],J9=[...N2,"documentOverlays"],P2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],D2=P2,Vy=[...D2,"indexConfiguration","indexState","indexEntries"],Z9=Vy,eF=[...Vy,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends C2{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function At(t,e){const n=ue(t);return os.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ll(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function V2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gd(this.root,e,this.comparator,!0)}}class gd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=i??Ft.EMPTY,this.right=s??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ft(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ft.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gx(this.data.getIterator())}getIteratorFrom(e){return new Gx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ue)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ue(this.comparator);return n.data=e,n}}class Gx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new Ue(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new O2("Invalid base64 string: "+s):s}}(e);return new gt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const tF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(t){if(fe(!!t),typeof t=="string"){let e=0;const n=tF.exec(t);if(fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ds(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zy(t){const e=t.mapValue.fields.__previous_value__;return Oy(e)?zy(e):e}function tu(t){const e=mi(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class uo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new uo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof uo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hd={nullValue:"NULL_VALUE"};function ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oy(t)?4:z2(t)?9007199254740991:Vf(t)?10:11:ce()}function Vr(t,e){if(t===e)return!0;const n=ho(t);if(n!==ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tu(t).isEqual(tu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=mi(i.timestampValue),a=mi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ds(i.bytesValue).isEqual(ds(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),a=Je(s.doubleValue);return o===a?eu(o)===eu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return La(t.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Kx(o)!==Kx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Vr(o[l],a[l])))return!1;return!0}(t,e);default:return ce()}}function nu(t,e){return(t.values||[]).find(n=>Vr(n,e))!==void 0}function hs(t,e){if(t===e)return 0;const n=ho(t),r=ho(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Je(s.integerValue||s.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Wx(t.timestampValue,e.timestampValue);case 4:return Wx(tu(t),tu(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ds(s),l=ds(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ve(a[c],l[c]);if(d!==0)return d}return ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ve(Je(s.latitude),Je(o.latitude));return a!==0?a:ve(Je(s.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},f=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,E=(l=f.value)===null||l===void 0?void 0:l.arrayValue,x=ve(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:Qx(m,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Gi.mapValue&&o===Gi.mapValue)return 0;if(s===Gi.mapValue)return 1;if(o===Gi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=ve(l[h],d[h]);if(f!==0)return f;const m=hs(a[l[h]],c[d[h]]);if(m!==0)return m}return ve(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ce()}}function Wx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=mi(t),r=mi(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function Qx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=hs(n[i],r[i]);if(s)return s}return ve(n.length,r.length)}function ja(t){return kg(t)}function kg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=mi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=kg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${kg(n.fields[o])}`;return i+"}"}(t.mapValue):ce()}function ru(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rg(t){return!!t&&"integerValue"in t}function iu(t){return!!t&&"arrayValue"in t}function Yx(t){return!!t&&"nullValue"in t}function Xx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kd(t){return!!t&&"mapValue"in t}function Vf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function gc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ll(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const M2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function rF(t){return"nullValue"in t?Hd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ru(uo.empty(),re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Vf(t)?M2:{mapValue:{}}:ce()}function iF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ru(uo.empty(),re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?M2:"mapValue"in t?Vf(t)?{mapValue:{}}:Gi:ce()}function Jx(t,e){const n=hs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Zx(t,e){const n=hs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(n)}setAll(e){let n=rt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=gc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ll(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cn(gc(this.value))}}function L2(t){const e=[];return ll(t.fields,(n,r)=>{const i=new rt([n]);if(Kd(r)){const s=L2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ct(e,0,pe.min(),pe.min(),pe.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new ct(e,1,n,pe.min(),r,i,0)}static newNoDocument(e,n){return new ct(e,2,n,pe.min(),pe.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,pe.min(),pe.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n){this.position=e,this.inclusive=n}}function e1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=hs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function t1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function sF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{}class ke extends j2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oF(e,n,r):n==="array-contains"?new cF(e,r):n==="in"?new H2(e,r):n==="not-in"?new uF(e,r):n==="array-contains-any"?new dF(e,r):new ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aF(e,r):new lF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hs(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class je extends j2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new je(e,n)}matches(e){return $a(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $a(t){return t.op==="and"}function Ng(t){return t.op==="or"}function My(t){return F2(t)&&$a(t)}function F2(t){for(const e of t.filters)if(e instanceof je)return!1;return!0}function Pg(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+ja(t.value);if(My(t))return t.filters.map(e=>Pg(e)).join(",");{const e=t.filters.map(n=>Pg(n)).join(",");return`${t.op}(${e})`}}function $2(t,e){return t instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.field.isEqual(i.field)&&Vr(r.value,i.value)}(t,e):t instanceof je?function(r,i){return i instanceof je&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&$2(o,i.filters[a]),!0):!1}(t,e):void ce()}function U2(t,e){const n=t.filters.concat(e);return je.create(n,t.op)}function B2(t){return t instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${ja(n.value)}`}(t):t instanceof je?function(n){return n.op.toString()+" {"+n.getFilters().map(B2).join(" ,")+"}"}(t):"Filter"}class oF extends ke{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class aF extends ke{constructor(e,n){super(e,"in",n),this.keys=q2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lF extends ke{constructor(e,n){super(e,"not-in",n),this.keys=q2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function q2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class cF extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return iu(n)&&nu(n.arrayValue,this.value)}}class H2 extends ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nu(this.value.arrayValue,n)}}class uF extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!nu(this.value.arrayValue,n)}}class dF extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!iu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Dg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new hF(t,e,n,r,i,s,o)}function fo(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ja(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ja(r)).join(",")),e.ue=n}return e.ue}function xu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t1(t.startAt,e.startAt)&&t1(t.endAt,e.endAt)}function $h(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Uh(t,e){return t.filters.filter(n=>n instanceof ke&&n.field.isEqual(e))}function n1(t,e,n){let r=Hd,i=!0;for(const s of Uh(t,e)){let o=Hd,a=!0;switch(s.op){case"<":case"<=":o=rF(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Hd}Jx({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Jx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function r1(t,e,n){let r=Gi,i=!0;for(const s of Uh(t,e)){let o=Gi,a=!0;switch(s.op){case">=":case">":o=iF(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Gi}Zx({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Zx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function K2(t,e,n,r,i,s,o,a){return new Eu(t,e,n,r,i,s,o,a)}function Of(t){return new Eu(t)}function i1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function G2(t){return t.collectionGroup!==null}function yc(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ue(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Fh(s,r))}),n.has(rt.keyField().canonicalString())||e.ce.push(new Fh(rt.keyField(),r))}return e.ce}function Dn(t){const e=ue(t);return e.le||(e.le=fF(e,yc(t))),e.le}function fF(t,e){if(t.limitType==="F")return Dg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Fh(i.field,s)});const n=t.endAt?new Fa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fa(t.startAt.position,t.startAt.inclusive):null;return Dg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vg(t,e){const n=t.filters.concat([e]);return new Eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Og(t,e,n){return new Eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zf(t,e){return xu(Dn(t),Dn(e))&&t.limitType===e.limitType}function W2(t){return`${fo(Dn(t))}|lt:${t.limitType}`}function Wo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>B2(i)).join(", ")}]`),Df(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ja(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ja(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function bu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of yc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=e1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,yc(r),i)||r.endAt&&!function(o,a,l){const c=e1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,yc(r),i))}(t,e)}function Q2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Y2(t){return(e,n)=>{let r=!1;for(const i of yc(t)){const s=pF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function pF(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?hs(l,c):ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ll(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return V2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=new Ke(re.comparator);function Nn(){return mF}const X2=new Ke(re.comparator);function tc(...t){let e=X2;for(const n of t)e=e.insert(n.key,n);return e}function J2(t){let e=X2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cr(){return vc()}function Z2(){return vc()}function vc(){return new ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const gF=new Ke(re.comparator),yF=new Ue(re.comparator);function Ie(...t){let e=yF;for(const n of t)e=e.add(n);return e}const vF=new Ue(ve);function Ly(){return vF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function eC(t){return{integerValue:""+t}}function _F(t,e){return k2(e)?eC(e):jy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function wF(t,e,n){return t instanceof Ua?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Oy(s)&&(s=zy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ba?nC(t,e):t instanceof qa?rC(t,e):function(i,s){const o=tC(i,s),a=s1(o)+s1(i.Pe);return Rg(o)&&Rg(i.Pe)?eC(a):jy(i.serializer,a)}(t,e)}function xF(t,e,n){return t instanceof Ba?nC(t,e):t instanceof qa?rC(t,e):n}function tC(t,e){return t instanceof su?function(r){return Rg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ua extends Mf{}class Ba extends Mf{constructor(e){super(),this.elements=e}}function nC(t,e){const n=iC(e);for(const r of t.elements)n.some(i=>Vr(i,r))||n.push(r);return{arrayValue:{values:n}}}class qa extends Mf{constructor(e){super(),this.elements=e}}function rC(t,e){let n=iC(e);for(const r of t.elements)n=n.filter(i=>!Vr(i,r));return{arrayValue:{values:n}}}class su extends Mf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function s1(t){return Je(t.integerValue||t.doubleValue)}function iC(t){return iu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n){this.field=e,this.transform=n}}function EF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ba&&i instanceof Ba||r instanceof qa&&i instanceof qa?La(r.elements,i.elements,Vr):r instanceof su&&i instanceof su?Vr(r.Pe,i.Pe):r instanceof Ua&&i instanceof Ua}(t.transform,e.transform)}class bF{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lf{}function oC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jf(t.key,fn.none()):new cl(t.key,t.data,fn.none());{const n=t.data,r=cn.empty();let i=new Ue(rt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xs(t.key,r,new Wn(i.toArray()),fn.none())}}function IF(t,e,n){t instanceof cl?function(i,s,o){const a=i.value.clone(),l=a1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xs?function(i,s,o){if(!Gd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=a1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(aC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _c(t,e,n,r){return t instanceof cl?function(s,o,a,l){if(!Gd(s.precondition,o))return a;const c=s.value.clone(),d=l1(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof xs?function(s,o,a,l){if(!Gd(s.precondition,o))return a;const c=l1(s.fieldTransforms,l,o),d=o.data;return d.setAll(aC(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Gd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function TF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=tC(r.transform,i||null);s!=null&&(n===null&&(n=cn.empty()),n.set(r.field,s))}return n||null}function o1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&La(r,i,(s,o)=>EF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cl extends Lf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xs extends Lf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function a1(t,e,n){const r=new Map;fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xF(o,a,n[i]))}return r}function l1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,wF(s,o,e))}return r}class jf extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lC extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&IF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_c(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_c(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Z2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=oC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(n,r)=>o1(n,r))&&La(this.baseMutations,e.baseMutations,(n,r)=>o1(n,r))}}class $y{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length);let i=function(){return gF}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $y(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Pe;function CF(t){switch(t){default:return ce();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function cC(t){if(t===void 0)return mt("GRPC error has no .code"),Q.UNKNOWN;switch(t){case _t.OK:return Q.OK;case _t.CANCELLED:return Q.CANCELLED;case _t.UNKNOWN:return Q.UNKNOWN;case _t.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case _t.INTERNAL:return Q.INTERNAL;case _t.UNAVAILABLE:return Q.UNAVAILABLE;case _t.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case _t.NOT_FOUND:return Q.NOT_FOUND;case _t.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case _t.ABORTED:return Q.ABORTED;case _t.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case _t.DATA_LOSS:return Q.DATA_LOSS;default:return ce()}}(Pe=_t||(_t={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=new Js([4294967295,4294967295],0);function c1(t){const e=AF().encode(t),n=new g2;return n.update(e),new Uint8Array(n.digest())}function u1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Js([n,r],0),new Js([i,s],0)]}class By{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(r<0)throw new nc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Js.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Js.fromNumber(r)));return i.compare(kF)===1&&(i=new Js([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=c1(e),[r,i]=u1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new By(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=c1(e),[r,i]=u1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Iu(pe.min(),i,new Ke(ve),Nn(),Ie())}}class Tu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Tu(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uC{constructor(e,n){this.targetId=e,this.me=n}}class dC{constructor(e,n,r=gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class d1{constructor(){this.fe=0,this.ge=f1(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),r=Ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ce()}}),new Tu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=f1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RF{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nn(),this.qe=h1(),this.Qe=new Ke(ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if($h(s))if(r===0){const o=new re(s.path);this.Ue(n,o,ct.newNoDocument(o,pe.min()))}else fe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ds(r).toUint8Array()}catch(l){if(l instanceof O2)return Xc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new By(o,i,s)}catch(l){return Xc(l instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&$h(a.target)){const l=new re(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ct.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Iu(e,n,this.Qe,this.ke,r);return this.ke=Nn(),this.qe=h1(),this.Qe=new Ke(ve),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new d1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ue(ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new d1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function h1(){return new Ke(re.comparator)}function f1(){return new Ke(re.comparator)}const NF={asc:"ASCENDING",desc:"DESCENDING"},PF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DF={and:"AND",or:"OR"};class VF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zg(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function Ha(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OF(t,e){return Ha(t,e.toTimestamp())}function rn(t){return fe(!!t),pe.fromTimestamp(function(n){const r=mi(n);return new st(r.seconds,r.nanos)}(t))}function qy(t,e){return Mg(t,e).canonicalString()}function Mg(t,e){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fC(t){const e=Le.fromString(t);return fe(EC(e)),e}function Bh(t,e){return qy(t.databaseId,e.path)}function Zs(t,e){const n=fC(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(gC(n))}function pC(t,e){return qy(t.databaseId,e)}function mC(t){const e=fC(t);return e.length===4?Le.emptyPath():gC(e)}function Lg(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gC(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function p1(t,e,n){return{name:Bh(t,e),fields:n.value.mapValue.fields}}function zF(t,e,n){const r=Zs(t,e.name),i=rn(e.updateTime),s=e.createTime?rn(e.createTime):pe.min(),o=new cn({mapValue:{fields:e.fields}}),a=ct.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function MF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(fe(d===void 0||typeof d=="string"),gt.fromBase64String(d||"")):(fe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),gt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?Q.UNKNOWN:cC(c.code);return new ne(d,c.message||"")}(o);n=new dC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zs(t,r.document.name),s=rn(r.document.updateTime),o=r.document.createTime?rn(r.document.createTime):pe.min(),a=new cn({mapValue:{fields:r.document.fields}}),l=ct.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Wd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Zs(t,r.document),s=r.readTime?rn(r.readTime):pe.min(),o=ct.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Wd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Zs(t,r.document),s=r.removedTargetIds||[];n=new Wd([],s,i,null)}else{if(!("filter"in e))return ce();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new SF(i,s),a=r.targetId;n=new uC(a,o)}}return n}function qh(t,e){let n;if(e instanceof cl)n={update:p1(t,e.key,e.value)};else if(e instanceof jf)n={delete:Bh(t,e.key)};else if(e instanceof xs)n={update:p1(t,e.key,e.data),updateMask:BF(e.fieldMask)};else{if(!(e instanceof lC))return ce();n={verify:Bh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ua)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof su)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:OF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ce()}(t,e.precondition)),n}function jg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?fn.updateTime(rn(s.updateTime)):s.exists!==void 0?fn.exists(s.exists):fn.none()}(e.currentDocument):fn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)fe(a.setToServerValue==="REQUEST_TIME"),l=new Ua;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Ba(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new qa(d)}else"increment"in a?l=new su(o,a.increment):ce();const c=rt.fromServerFormat(a.fieldPath);return new sC(c,l)}(t,i)):[];if(e.update){e.update.name;const i=Zs(t,e.update.name),s=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Wn(c.map(d=>rt.fromServerFormat(d)))}(e.updateMask);return new xs(i,s,o,n,r)}return new cl(i,s,n,r)}if(e.delete){const i=Zs(t,e.delete);return new jf(i,n)}if(e.verify){const i=Zs(t,e.verify);return new lC(i,n)}return ce()}function LF(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?rn(i.updateTime):rn(s);return o.isEqual(pe.min())&&(o=rn(s)),new bF(o,i.transformResults||[])}(n,e))):[]}function yC(t,e){return{documents:[pC(t,e.path)]}}function vC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pC(t,i);const s=function(c){if(c.length!==0)return xC(je.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Qo(f.field),direction:FF(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function _C(t){let e=mC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fe(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=wC(h);return f instanceof je&&My(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Fh(Yo(E.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Df(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Fa(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Fa(m,f)}(n.endAt)),K2(e,i,o,s,a,"F",l,c)}function jF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yo(n.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yo(n.unaryFilter.field);return ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yo(n.unaryFilter.field);return ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yo(n.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(n){return ke.create(Yo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return je.create(n.compositeFilter.filters.map(r=>wC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce()}}(n.compositeFilter.op))}(t):ce()}function FF(t){return NF[t]}function $F(t){return PF[t]}function UF(t){return DF[t]}function Qo(t){return{fieldPath:t.canonicalString()}}function Yo(t){return rt.fromServerFormat(t.fieldPath)}function xC(t){return t instanceof ke?function(n){if(n.op==="=="){if(Xx(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NAN"}};if(Yx(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xx(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NAN"}};if(Yx(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(n.field),op:$F(n.op),value:n.value}}}(t):t instanceof je?function(n){const r=n.getFilters().map(i=>xC(i));return r.length===1?r[0]:{compositeFilter:{op:UF(n.op),filters:r}}}(t):ce()}function BF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function EC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r,i,s=pe.min(),o=pe.min(),a=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.ct=e}}function qF(t,e){let n;if(e.document)n=zF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=re.fromSegments(e.noDocument.path),i=mo(e.noDocument.readTime);n=ct.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ce();{const r=re.fromSegments(e.unknownDocument.path),i=mo(e.unknownDocument.version);n=ct.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new st(i[0],i[1]);return pe.fromTimestamp(s)}(e.readTime)),n}function m1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Bh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ha(s,o.version.toTimestamp()),createTime:Ha(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:po(e.version)};else{if(!e.isUnknownDocument())return ce();r.unknownDocument={path:n.path.toArray(),version:po(e.version)}}return r}function Hh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function po(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mo(t){const e=new st(t.seconds,t.nanoseconds);return pe.fromTimestamp(e)}function Ls(t,e){const n=(e.baseMutations||[]).map(s=>jg(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>jg(t.ct,s)),i=st.fromMillis(e.localWriteTimeMs);return new Fy(e.batchId,i,n,r)}function rc(t){const e=mo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?mo(t.lastLimboFreeSnapshotVersion):pe.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return fe(s.documents.length===1),Dn(Of(mC(s.documents[0])))}(t.query):function(s){return Dn(_C(s))}(t.query),new ri(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,gt.fromBase64String(t.resumeToken))}function IC(t,e){const n=po(e.snapshotVersion),r=po(e.lastLimboFreeSnapshotVersion);let i;i=$h(e.target)?yC(t.ct,e.target):vC(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function TC(t){const e=_C({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Og(e,e.limit,"L"):e}function Yp(t,e){return new Uy(e.largestBatchId,jg(t.ct,e.overlayMutation))}function g1(t,e){const n=e.path.lastSegment();return[t,nn(e.path.popLast()),n]}function y1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:po(r.readTime),documentKey:nn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{getBundleMetadata(e,n){return v1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:mo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return v1(e).put(function(i){return{bundleId:i.id,createTime:po(rn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return _1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:TC(s.bundledQuery),readTime:mo(s.readTime)}}(r)})}saveNamedQuery(e,n){return _1(e).put(function(i){return{name:i.name,readTime:po(rn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function v1(t){return At(t,"bundles")}function _1(t){return At(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Ff(e,r)}getOverlay(e,n){return Fl(e).get(g1(this.userId,n)).next(r=>r?Yp(this.serializer,r):null)}getOverlays(e,n){const r=Cr();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Uy(n,o);i.push(this.ht(e,a))}),H.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(nn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Fl(e).j("collectionPathOverlayIndex",a))}),H.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Cr(),s=nn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Fl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Yp(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Cr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fl(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=Yp(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return Fl(e).put(function(i,s,o){const[a,l,c]=g1(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:qh(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Fl(t){return At(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{Pt(e){return At(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?gt.fromUint8Array(r):gt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Je(e.integerValue));else if("doubleValue"in e){const r=Je(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),eu(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=mi(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ds(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?z2(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Vf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ce()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Je(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),re.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}js.vt=new js;function GF(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function w1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=GF(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class WF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=w1(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=w1(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class QF{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class YF{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class $l{constructor(){this.jt=new WF,this.Ht=new QF(this.jt),this.Jt=new YF(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fs(this.indexId,this.documentKey,this.arrayValue,r)}}function Pi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=x1(t.arrayValue,e.arrayValue),n!==0?n:(n=x1(t.directionalValue,e.directionalValue),n!==0?n:re.comparator(t.documentKey,e.documentKey)))}function x1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.Xt=new Ue((n,r)=>rt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(fe(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Cg(e);if(n!==void 0&&!this.sn(n))return!1;const r=zs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ue(rt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Bd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Bd(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Bd(r.field,r.dir==="asc"?0:1)));return new jh(jh.UNKNOWN_ID,this.collectionId,n,Zc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){var e,n;if(fe(t instanceof ke||t instanceof je),t instanceof ke){if(t instanceof H2){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ke.create(t.field,"==",s)))||[];return je.create(i,"or")}return t}const r=t.filters.map(i=>SC(i));return je.create(r,t.op)}function XF(t){if(t.getFilters().length===0)return[];const e=Ug(SC(t));return fe(CC(e)),Fg(e)||$g(e)?[e]:e.getFilters()}function Fg(t){return t instanceof ke}function $g(t){return t instanceof je&&My(t)}function CC(t){return Fg(t)||$g(t)||function(n){if(n instanceof je&&Ng(n)){for(const r of n.getFilters())if(!Fg(r)&&!$g(r))return!1;return!0}return!1}(t)}function Ug(t){if(fe(t instanceof ke||t instanceof je),t instanceof ke)return t;if(t.filters.length===1)return Ug(t.filters[0]);const e=t.filters.map(r=>Ug(r));let n=je.create(e,t.op);return n=Kh(n),CC(n)?n:(fe(n instanceof je),fe($a(n)),fe(n.filters.length>1),n.filters.reduce((r,i)=>Hy(r,i)))}function Hy(t,e){let n;return fe(t instanceof ke||t instanceof je),fe(e instanceof ke||e instanceof je),n=t instanceof ke?e instanceof ke?function(i,s){return je.create([i,s],"and")}(t,e):b1(t,e):e instanceof ke?b1(e,t):function(i,s){if(fe(i.filters.length>0&&s.filters.length>0),$a(i)&&$a(s))return U2(i,s.getFilters());const o=Ng(i)?i:s,a=Ng(i)?s:i,l=o.filters.map(c=>Hy(c,a));return je.create(l,"or")}(t,e),Kh(n)}function b1(t,e){if($a(e))return U2(e,t.getFilters());{const n=e.filters.map(r=>Hy(t,r));return je.create(n,"or")}}function Kh(t){if(fe(t instanceof ke||t instanceof je),t instanceof ke)return t;const e=t.getFilters();if(e.length===1)return Kh(e[0]);if(F2(t))return t;const n=e.map(i=>Kh(i)),r=[];return n.forEach(i=>{i instanceof ke?r.push(i):i instanceof je&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:je.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(){this.un=new Ky}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Mn.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Mn.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class Ky{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ue(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ue(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Uint8Array(0);class ZF{constructor(e,n){this.databaseId=n,this.cn=new Ky,this.ln=new ws(r=>fo(r),(r,i)=>xu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:nn(i)};return I1(e).put(s)}return H.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[b2(n),""],!1,!0);return I1(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Sr(o.parent))}return r})}addFieldIndex(e,n){const r=Ul(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ho(e);return s.next(a=>{o.put(y1(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ul(e),i=Ho(e),s=qo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ul(e),r=qo(e),i=Ho(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return H.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new E1(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=qo(e);let i=!0;const s=new Map;return H.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ie();const a=[];return H.forEach(s,(l,c)=>{J("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`}(l)} to execute ${fo(n)}`);const d=function(T,A){const O=Cg(A);if(O===void 0)return null;for(const M of Uh(T,O.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(c,l),h=function(T,A){const O=new Map;for(const M of zs(A))for(const S of Uh(T,M.fieldPath))switch(S.op){case"==":case"in":O.set(M.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return O.set(M.fieldPath.canonicalString(),S.value),Array.from(O.values())}return null}(c,l),f=function(T,A){const O=[];let M=!0;for(const S of zs(A)){const b=S.kind===0?n1(T,S.fieldPath,T.startAt):r1(T,S.fieldPath,T.startAt);O.push(b.value),M&&(M=b.inclusive)}return new Fa(O,M)}(c,l),m=function(T,A){const O=[];let M=!0;for(const S of zs(A)){const b=S.kind===0?r1(T,S.fieldPath,T.endAt):n1(T,S.fieldPath,T.endAt);O.push(b.value),M&&(M=b.inclusive)}return new Fa(O,M)}(c,l),E=this.In(l,c,f),x=this.In(l,c,m),N=this.Tn(l,c,h),y=this.En(l.indexId,d,E,f.inclusive,x,m.inclusive,N);return H.forEach(y,v=>r.G(v,n.limit).next(T=>{T.forEach(A=>{const O=re.fromSegments(A.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return H.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=XF(je.create(e.filters,"and")).map(r=>Dg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.dn(n[h/c]):yd,m=this.An(e,f,r[h%c],i),E=this.Rn(e,f,s[h%c],o),x=a.map(N=>this.An(e,f,N,!0));d.push(...this.createRange(m,E,x))}return d}An(e,n,r,i){const s=new Fs(e,re.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Fs(e,re.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new E1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return H.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Ue(rt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new $l;for(const i of zs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);js.vt.It(s,o)}return r.zt()}dn(e){const n=new $l;return js.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new $l;return js.vt.It(ru(this.databaseId,n),r.Yt(function(s){const o=zs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new $l);let s=0;for(const o of zs(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&iu(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);js.vt.It(a,c)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new $l;l.seed(a.zt()),js.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof ke&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ul(e),i=Ho(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return H.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new Zc(h.sequenceNumber,new Mn(mo(h.readTime),new re(Sr(h.documentKey)),h.largestBatchId)):Zc.empty(),m=d.fields.map(([E,x])=>new Bd(rt.fromServerFormat(E),x));return new jh(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ve(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ul(e),s=Ho(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>H.forEach(a,l=>s.put(y1(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return H.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?H.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),H.forEach(a,l=>this.wn(e,i,l).next(c=>{const d=this.Sn(s,l);return c.isEqual(d)?H.resolve():this.bn(e,s,l,c,d)}))))})}Dn(e,n,r,i){return qo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return qo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=qo(e);let s=new Ue(Pi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Fs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ue(Pi);const i=this.Vn(n,e);if(i==null)return r;const s=Cg(n);if(s!=null){const o=e.data.field(s.fieldPath);if(iu(o))for(const a of o.arrayValue.values||[])r=r.add(new Fs(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Fs(n.indexId,e.key,yd,i));return r}bn(e,n,r,i,s){J("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),E=c.getIterator();let x=Bo(m),N=Bo(E);for(;x||N;){let y=!1,v=!1;if(x&&N){const T=d(x,N);T<0?v=!0:T>0&&(y=!0)}else x!=null?v=!0:y=!0;y?(h(N),N=Bo(E)):v?(f(x),x=Bo(m)):(x=Bo(m),N=Bo(E))}}(i,s,Pi,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),H.waitFor(o)}yn(e){let n=1;return Ho(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Pi(o,a)).filter((o,a,l)=>!a||Pi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Pi(o,e),l=Pi(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,yd,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,yd,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return Pi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(T1)}getMinOffset(e,n){return H.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||ce())).next(T1)}}function I1(t){return At(t,"collectionParents")}function qo(t){return At(t,"indexEntries")}function Ul(t){return At(t,"indexConfiguration")}function Ho(t){return At(t,"indexState")}function T1(t){fe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Py(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Mn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class an{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,h,f)=>(a++,f.delete()));s.push(l.next(()=>{fe(a===1)}));const c=[];for(const d of n.mutations){const h=R2(e,d.key.path,n.batchId);s.push(i.delete(h)),c.push(d.key)}return H.waitFor(s).next(()=>c)}function Gh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ce();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(41943040,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);class $f{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){fe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new $f(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Di(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Xo(e),o=Di(e);return o.add({}).next(a=>{fe(typeof a=="number");const l=new Fy(a,n,r,i),c=function(m,E,x){const N=x.baseMutations.map(v=>qh(m.ct,v)),y=x.mutations.map(v=>qh(m.ct,v));return{userId:E,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:N,mutations:y}}(this.serializer,this.userId,l),d=[];let h=new Ue((f,m)=>ve(f.canonicalString(),m.canonicalString()));for(const f of i){const m=R2(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(s.put(m,M9))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),H.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Di(e).get(n).next(r=>r?(fe(r.userId===this.userId),Ls(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?H.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Di(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(fe(a.batchId>=r),s=Ls(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Di(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Di(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ls(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=qd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Xo(e).J({range:i},(o,a,l)=>{const[c,d,h]=o,f=Sr(d);if(c===this.userId&&n.path.isEqual(f))return Di(e).get(h).next(m=>{if(!m)throw ce();fe(m.userId===this.userId),s.push(Ls(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(ve);const i=[];return n.forEach(s=>{const o=qd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Xo(e).J({range:a},(c,d,h)=>{const[f,m,E]=c,x=Sr(m);f===this.userId&&s.path.isEqual(x)?r=r.add(E):h.done()});i.push(l)}),H.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=qd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ue(ve);return Xo(e).J({range:o},(l,c,d)=>{const[h,f,m]=l,E=Sr(f);h===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Di(e).get(s).next(o=>{if(o===null)throw ce();fe(o.userId===this.userId),r.push(Ls(this.serializer,o))}))}),H.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return AC(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),H.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return H.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Xo(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Sr(s[1]);i.push(l)}else a.done()}).next(()=>{fe(i.length===0)})})}containsKey(e,n){return kC(e,this.userId,n)}Nn(e){return RC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kC(t,e,n){const r=qd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xo(t).J({range:s,H:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function Di(t){return At(t,"mutations")}function Xo(t){return At(t,"documentMutations")}function RC(t){return At(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new go(0)}static kn(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new go(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>pe.fromTimestamp(new st(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ko(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(fe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ko(e).J((o,a)=>{const l=rc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>H.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ko(e).J((r,i)=>{const s=rc(i);n(s)})}qn(e){return C1(e).get("targetGlobalKey").next(n=>(fe(n!==null),n))}Qn(e,n){return C1(e).put("targetGlobalKey",n)}Kn(e,n){return Ko(e).put(IC(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=fo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ko(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=rc(a);xu(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=qi(e);return n.forEach(o=>{const a=nn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),H.waitFor(i)}removeMatchingKeys(e,n,r){const i=qi(e);return H.forEach(n,s=>{const o=nn(s.path);return H.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=qi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=qi(e);let s=Ie();return i.J({range:r,H:!0},(o,a,l)=>{const c=Sr(o[1]),d=new re(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=nn(n.path),i=IDBKeyRange.bound([r],[b2(r)],!1,!0);let s=0;return qi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return Ko(e).get(n).next(r=>r?rc(r):null)}}function Ko(t){return At(t,"targets")}function C1(t){return At(t,"targetGlobal")}function qi(t){return At(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1([t,e],[n,r]){const i=ve(t,n);return i===0?ve(e,r):i}class t${constructor(e){this.Un=e,this.buffer=new Ue(A1),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();A1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class n${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){J("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_s(n)?J("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await vs(n)}await this.Hn(3e5)})}}class r${constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return H.resolve(hn.oe);const r=new t$(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(S1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S1):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Go()<=Ae.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function i$(t,e){return new r$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,n){this.db=e,this.garbageCollector=i$(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return vd(e,r)}removeReference(e,n,r){return vd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return vd(e,n)}nr(e,n){return function(i,s){let o=!1;return RC(i).Y(a=>kC(i,a,s).next(l=>(l&&(o=!0),H.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,pe.min()),qi(e).delete(function(h){return[0,nn(h.path)]}(o))))});i.push(l)}}).next(()=>H.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return vd(e,n)}tr(e,n){const r=qi(e);let i,s=hn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==hn.oe&&n(new re(Sr(i)),s),s=c,i=l):s=hn.oe}).next(()=>{s!==hn.oe&&n(new re(Sr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vd(t,e){return qi(t).put(function(r,i){return{targetId:0,path:nn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.changes=new ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ns(e).put(r)}removeEntry(e,n,r){return Ns(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Hh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=ct.newInvalidDocument(n);return Ns(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bl(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:ct.newInvalidDocument(n)};return Ns(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bl(n))},(i,s)=>{r={document:this.ir(n,s),size:Gh(s)}}).next(()=>r)}getEntries(e,n){let r=Nn();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=Nn(),i=new Ke(re.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Gh(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return H.resolve();let i=new Ue(N1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Bl(i.first()),Bl(i.last())),o=i.getIterator();let a=o.getNext();return Ns(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const h=re.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&N1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(Bl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Hh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ns(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=Nn();for(const h of c){const f=this.ir(re.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(bu(n,f)||i.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=Nn();const o=R1(n,r),a=R1(n,Mn.max());return Ns(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.ir(re.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new a$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return k1(e).get("remoteDocumentGlobalKey").next(n=>(fe(!!n),n))}rr(e,n){return k1(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=qF(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(pe.min())))return r}return ct.newInvalidDocument(e)}}function PC(t){return new o$(t)}class a$ extends NC{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ws(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ue((s,o)=>ve(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=m1(this.cr.serializer,o);i=i.add(s.path.popLast());const c=Gh(l);r+=c-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=m1(this.cr.serializer,o.convertToNoDocument(pe.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),H.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function k1(t){return At(t,"remoteDocumentGlobal")}function Ns(t){return At(t,"remoteDocumentsV14")}function Bl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function R1(t,e){const n=e.documentKey.path.toArray();return[t,Hh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function N1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ve(n[s],r[s]),i)return i;return i=ve(n.length,r.length),i||(i=ve(n[n.length-2],r[r.length-2]),i||ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_c(r.mutation,i,Wn.empty(),st.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const i=Cr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=tc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Cr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Nn();const o=vc(),a=function(){return vc()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof xs)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),_c(d.mutation,c,d.mutation.getFieldMask(),st.now())):o.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new l$(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=vc();let i=new Ke((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Wn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||Ie()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=Z2();d.forEach(f=>{if(!s.has(f)){const m=oC(n.get(f),r.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):G2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):H.resolve(Cr());let a=-1,l=s;return o.next(c=>H.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?H.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ie())).next(d=>({batchId:a,changes:J2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=tc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=tc();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,l=>{const c=function(h,f){return new Eu(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,ct.newInvalidDocument(d)))});let a=tc();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&_c(d.mutation,c,Wn.empty(),st.now()),bu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:rn(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:TC(i.bundledQuery),readTime:rn(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(){this.overlays=new Ke(re.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Cr();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const i=Cr(),s=n.length+1,o=new re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Cr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Cr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return H.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Uy(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.Tr=new Ue(Nt.Er),this.dr=new Ue(Nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new re(new Le([])),r=new Nt(n,e),i=new Nt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new Le([])),r=new Nt(n,e),i=new Nt(n,e+1);let s=Ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ue(Nt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Fy(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),i=new Nt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(ve);return n.forEach(i=>{const s=new Nt(i,0),o=new Nt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;re.isDocumentKey(s)||(s=s.child(""));const o=new Nt(new re(s),0);let a=new Ue(ve);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,i=>{const s=new Nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Nt(n,0),i=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e){this.Mr=e,this.docs=function(){return new Ke(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Nn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ct.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nn();const o=n.path,a=new re(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Py(T2(d),r)<=0||(i.has(d.key)||bu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ce()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new p$(this)}getSize(e){return H.resolve(this.size)}}class p$ extends NC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e){this.persistence=e,this.Nr=new ws(n=>fo(n),xu),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Gy,this.targetCount=0,this.kr=go.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new hn(0),this.Kr=!1,this.Kr=!0,this.$r=new d$,this.referenceDelegate=e(this),this.Ur=new m$(this),this.indexManager=new JF,this.remoteDocumentCache=function(i){return new f$(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new bC(n),this.Gr=new c$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new u$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new h$(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new g$(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class g$ extends C2{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Jr=new Gy,this.Yr=null}static Zr(e){return new Uf(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=re.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,pe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e){this.serializer=e}O(e,n,r,i){const s=new Pf("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hx,{unique:!0}),l.createObjectStore("documentMutations")}(e),P1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=H.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),P1(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hx,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return H.waitFor(f)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Q9});c.createIndex("collectionPathOverlayIndex",Y9,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",X9,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:L9});c.createIndex("documentKeyIndex",j9),c.createIndex("collectionGroupIndex",F9)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:H9}).createIndex("sequenceNumberIndex",K9,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:G9}).createIndex("documentKeyIndex",W9,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Gh(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>H.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>H.forEach(a,l=>{fe(l.userId===s.userId);const c=Ls(this.serializer,l);return AC(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Le(o),c=function(h){return[0,nn(h)]}(l);s.push(n.get(c).next(d=>d?H.resolve():(h=>n.put({targetId:0,path:nn(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>H.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:q9});const r=n.store("collectionParents"),i=new Ky,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:nn(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Le(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=Sr(a);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=rc(i),o=IC(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new re(Le.fromString(h.document.name).popFirst(5)):h.noDocument?re.fromSegments(h.noDocument.path):h.unknownDocument?re.fromSegments(h.unknownDocument.path):ce()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>H.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=PC(this.serializer),s=new VC(Uf.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Ie();Ls(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),H.forEach(a,(l,c)=>{const d=new Qt(c),h=Ff.lt(this.serializer,d),f=s.getIndexManager(d),m=$f.lt(d,this.serializer,f,s.referenceDelegate);return new DC(i,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Ag(n,hn.oe),l).next()})})}}function P1(t){t.createObjectStore("targetDocuments",{keyPath:U9}).createIndex("documentTargetsIndex",B9,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$9,{unique:!0}),t.createObjectStore("targetGlobal")}const Xp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wy{constructor(e,n,r,i,s,o,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Wy.D())throw new ne(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new s$(this,i),this.Ai=n+"main",this.serializer=new bC(l),this.Ri=new os(this.Ai,this.hi,new y$(this.serializer)),this.$r=new KF,this.Ur=new e$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PC(this.serializer),this.Gr=new HF,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(Q.FAILED_PRECONDITION,Xp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new hn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_d(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(_s(e))return J("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ql(e).get("owner").next(n=>H.resolve(this.vi(n)))}Ci(e){return _d(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=At(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return H.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?H.resolve(!0):ql(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ne(Q.FAILED_PRECONDITION,Xp);return!1}}return!(!this.networkEnabled||!this.inForeground)||_d(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&J("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Ag(e,hn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>_d(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return $f.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZF(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ff.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?eF:l===16?Z9:l===15?Vy:l===14?D2:l===13?P2:l===12?J9:l===11?N2:void ce()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new Ag(a,this.Qr?this.Qr.next():hn.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ne(Q.FAILED_PRECONDITION,S2);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return ql(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ne(Q.FAILED_PRECONDITION,Xp)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ql(e).put("owner",n)}static D(){return os.D()}bi(e){const n=ql(e);return n.get("owner").next(r=>this.vi(r)?(J("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):H.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;AS()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return J("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ql(t){return At(t,"owner")}function _d(t){return At(t,"clientMetadata")}function OC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ie(),i=Ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Qy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return AS()?8:A2(Ct())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new v$;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Go()<=Ae.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Wo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Go()<=Ae.DEBUG&&J("QueryEngine","Query:",Wo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Go()<=Ae.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Wo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):H.resolve())}Yi(e,n){if(i1(n))return H.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Og(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ie(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Og(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return i1(n)||i.isEqual(pe.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?H.resolve(null):(Go()<=Ae.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wo(n)),this.rs(e,o,n,I2(i,-1)).next(a=>a))})}ts(e,n){let r=new Ue(Y2(e));return n.forEach((i,s)=>{bu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Go()<=Ae.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Wo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Mn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ke(ve),this._s=new ws(s=>fo(s),xu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function MC(t,e,n,r){return new _$(t,e,n,r)}async function LC(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ie();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function w$(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=H.resolve();return f.forEach(E=>{m=m.next(()=>d.getEntry(l,E)).next(x=>{const N=c.docVersions.get(E);fe(N!==null),x.version.compareTo(N)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function jC(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function x$(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(gt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(x,N,y){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,m,d)&&a.push(n.Ur.updateTargetData(s,m))});let l=Nn(),c=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(E$(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(pe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function E$(t,e,n){let r=Ie(),i=Ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(pe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function b$(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wh(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ri(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ka(t,e,n){const r=ue(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!_s(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Bg(t,e,n){const r=ue(t);let i=pe.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=ue(l),f=h._s.get(d);return f!==void 0?H.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,o,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:pe.min(),n?s:Ie())).next(a=>(UC(r,Q2(e),a),{documents:a,Ts:s})))}function FC(t,e){const n=ue(t),r=ue(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function $C(t,e){const n=ue(t),r=n.us.get(e)||pe.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,I2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(UC(n,e,i),i))}function UC(t,e,n){let r=t.us.get(e)||pe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function D1(t,e){return`firestore_clients_${t}_${e}`}function V1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Jp(t,e){return`firestore_targets_${t}_${e}`}class Qh{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ne(i.error.code,i.error.message))),o?new Qh(e,n,i.state,s):(mt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ne(r.error.code,r.error.message))),s?new wc(e,r.state,i):(mt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Ly();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=k2(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Yh(e,s):(mt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Yy{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Yy(n.clientId,n.onlineState):(mt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qg{constructor(){this.activeTargetIds=Ly()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zp{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ke(ve),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=D1(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new qg),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(D1(this.persistenceKey,r));if(i){const s=Yh.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Jp(this.persistenceKey,e));if(i){const s=wc.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J("SharedClientState","READ",e,n),n}setItem(e,n){J("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){J("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(J("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=hn.oe;if(s!=null)try{const a=JSON.parse(s);fe(typeof a=="number"),o=a}catch(a){mt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==hn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Qh(this.currentUser,e,n,r),s=V1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=V1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Jp(this.persistenceKey,e),s=new wc(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Yh.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Qh.Rs(new Qt(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return wc.Rs(i,n)}Ls(e){return Yy.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);J("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Ly();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class BC{constructor(){this.so=new qg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd=null;function em(){return wd===null?wd=function(){return 268435456+Math.round(2147483648*Math.random())}():wd++,"0x"+wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class C$ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=em(),l=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(d=>(J("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Xc("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+al}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=T$[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=em();return new Promise((o,a)=>{const l=new y2;l.setWithCredentials(!0),l.listenOnce(v2.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ud.NO_ERROR:const d=l.getResponseJson();J(Wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ud.TIMEOUT:J(Wt,`RPC '${e}' ${s} timed out`),a(new ne(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Ud.HTTP_ERROR:const h=l.getStatus();if(J(Wt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const E=function(N){const y=N.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(y)>=0?y:Q.UNKNOWN}(m.status);a(new ne(E,m.message))}else a(new ne(Q.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(Q.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{J(Wt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);J(Wt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=em(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=x2(),a=w2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");J(Wt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,m=!1;const E=new S$({Io:N=>{m?J(Wt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(f||(J(Wt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),J(Wt,`RPC '${e}' stream ${i} sending:`,N),h.send(N))},To:()=>h.close()}),x=(N,y,v)=>{N.listen(y,T=>{try{v(T)}catch(A){setTimeout(()=>{throw A},0)}})};return x(h,ec.EventType.OPEN,()=>{m||(J(Wt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),x(h,ec.EventType.CLOSE,()=>{m||(m=!0,J(Wt,`RPC '${e}' stream ${i} transport closed`),E.So())}),x(h,ec.EventType.ERROR,N=>{m||(m=!0,Xc(Wt,`RPC '${e}' stream ${i} transport errored:`,N),E.So(new ne(Q.UNAVAILABLE,"The operation could not be completed")))}),x(h,ec.EventType.MESSAGE,N=>{var y;if(!m){const v=N.data[0];fe(!!v);const T=v,A=T.error||((y=T[0])===null||y===void 0?void 0:y.error);if(A){J(Wt,`RPC '${e}' stream ${i} received error:`,A);const O=A.status;let M=function(w){const I=_t[w];if(I!==void 0)return cC(I)}(O),S=A.message;M===void 0&&(M=Q.INTERNAL,S="Unknown error status: "+O+" with message "+A.message),m=!0,E.So(new ne(M,S)),h.close()}else J(Wt,`RPC '${e}' stream ${i} received:`,v),E.bo(v)}}),x(a,_2.STAT_EVENT,N=>{N.stat===Sg.PROXY?J(Wt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Sg.NOPROXY&&J(Wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){return typeof window<"u"?window:null}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return new VF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new HC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ne(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class A$ extends KC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=MF(this.serializer,e),r=function(s){if(!("targetChange"in s))return pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?rn(o.readTime):pe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Lg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=$h(l)?{documents:yC(s,l)}:{query:vC(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hC(s,o.resumeToken);const c=zg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=Ha(s,o.snapshotVersion.toTimestamp());const c=zg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=jF(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Lg(this.serializer),n.removeTarget=e,this.a_(n)}}class k$ extends KC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=LF(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Lg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>qh(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R$ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ne(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Mg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(Q.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Mg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(Q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class N${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mt(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Io(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await Su(c),c.q_.set("Unknown"),c.L_.delete(4),await qf(c)}(this))})}),this.q_=new N$(r,i)}}async function qf(t){if(Io(t))for(const e of t.B_)await e(!0)}async function Su(t){for(const e of t.B_)await e(!1)}function Hf(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Zy(n)?Jy(n):dl(n).r_()&&Xy(n,e))}function Ga(t,e){const n=ue(t),r=dl(n);n.N_.delete(e),r.r_()&&GC(n,e),n.N_.size===0&&(r.r_()?r.o_():Io(n)&&n.q_.set("Unknown"))}function Xy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dl(t).A_(e)}function GC(t,e){t.Q_.xe(e),dl(t).R_(e)}function Jy(t){t.Q_=new RF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),dl(t).start(),t.q_.v_()}function Zy(t){return Io(t)&&!dl(t).n_()&&t.N_.size>0}function Io(t){return ue(t).L_.size===0}function WC(t){t.Q_=void 0}async function D$(t){t.q_.set("Online")}async function V$(t){t.N_.forEach((e,n)=>{Xy(t,e)})}async function O$(t,e){WC(t),Zy(t)?(t.q_.M_(e),Jy(t)):t.q_.set("Unknown")}async function z$(t,e,n){if(t.q_.set("Online"),e instanceof dC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xh(t,r)}else if(e instanceof Wd?t.Q_.Ke(e):e instanceof uC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(pe.min()))try{const r=await jC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(gt.EMPTY_BYTE_STRING,d.snapshotVersion)),GC(s,l);const h=new ri(d.target,l,c,d.sequenceNumber);Xy(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Xh(t,r)}}async function Xh(t,e,n){if(!_s(e))throw e;t.L_.add(1),await Su(t),t.q_.set("Offline"),n||(n=()=>jC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await qf(t)})}function QC(t,e){return e().catch(n=>Xh(t,n,e))}async function ul(t){const e=ue(t),n=fs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;M$(e);)try{const i=await b$(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,L$(e,i)}catch(i){await Xh(e,i)}YC(e)&&XC(e)}function M$(t){return Io(t)&&t.O_.length<10}function L$(t,e){t.O_.push(e);const n=fs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function YC(t){return Io(t)&&!fs(t).n_()&&t.O_.length>0}function XC(t){fs(t).start()}async function j$(t){fs(t).p_()}async function F$(t){const e=fs(t);for(const n of t.O_)e.m_(n.mutations)}async function $$(t,e,n){const r=t.O_.shift(),i=$y.from(r,e,n);await QC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ul(t)}async function U$(t,e){e&&fs(t).V_&&await async function(r,i){if(function(o){return CF(o)&&o!==Q.ABORTED}(i.code)){const s=r.O_.shift();fs(r).s_(),await QC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ul(r)}}(t,e),YC(t)&&XC(t)}async function z1(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Io(n);n.L_.add(3),await Su(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qf(n)}async function Hg(t,e){const n=ue(t);e?(n.L_.delete(2),await qf(n)):e||(n.L_.add(2),await Su(n),n.q_.set("Unknown"))}function dl(t){return t.K_||(t.K_=function(n,r,i){const s=ue(n);return s.w_(),new A$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:D$.bind(null,t),Ro:V$.bind(null,t),mo:O$.bind(null,t),d_:z$.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Zy(t)?Jy(t):t.q_.set("Unknown")):(await t.K_.stop(),WC(t))})),t.K_}function fs(t){return t.U_||(t.U_=function(n,r,i){const s=ue(n);return s.w_(),new k$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:j$.bind(null,t),mo:U$.bind(null,t),f_:F$.bind(null,t),g_:$$.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ul(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ev(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tv(t,e){if(mt("AsyncQueue",`${e}: ${t}`),_s(t))return new ne(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=tc(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new Ia(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.W_=new Ke(re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wa{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wa(e,n,Ia.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class q${constructor(){this.queries=L1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ue(n),s=i.queries;i.queries=L1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ne(Q.ABORTED,"Firestore shutting down"))}}function L1(){return new ws(t=>W2(t),zf)}async function JC(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new B$,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=tv(o,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&nv(n)}async function ZC(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function H$(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&nv(n)}function K$(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function nv(t){t.Y_.forEach(e=>{e.next()})}var Kg,j1;(j1=Kg||(Kg={})).ea="default",j1.Cache="cache";class eA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.key=e}}class nA{constructor(e){this.key=e}}class G${constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=Y2(e),this.Ra=new Ia(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new M1,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),m=bu(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let N=!1;f&&m?f.data.isEqual(m.data)?E!==x&&(r.track({type:3,doc:m}),N=!0):this.ga(f,m)||(r.track({type:2,doc:m}),N=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),N=!0):f&&!m&&(r.track({type:1,doc:f}),N=!0,(l||c)&&(a=!0)),N&&(m?(o=o.add(m),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(m,E){const x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return x(m)-x(E)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Wa(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new M1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new nA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new tA(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class W${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Q${constructor(e){this.key=e,this.va=!1}}class Y${constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ws(a=>W2(a),zf),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(re.comparator),this.Na=new Map,this.La=new Gy,this.Ba={},this.ka=new Map,this.qa=go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function X$(t,e,n=!0){const r=Kf(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await rA(r,e,n,!0),i}async function J$(t,e){const n=Kf(t);await rA(n,e,!0,!1)}async function rA(t,e,n,r){const i=await Wh(t.localStore,Dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await rv(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Hf(t.remoteStore,i),a}async function rv(t,e,n,r,i){t.Ka=(h,f,m)=>async function(x,N,y,v){let T=N.view.ma(y);T.ns&&(T=await Bg(x.localStore,N.query,!1).then(({documents:S})=>N.view.ma(S,T)));const A=v&&v.targetChanges.get(N.targetId),O=v&&v.targetMismatches.get(N.targetId)!=null,M=N.view.applyChanges(T,x.isPrimaryClient,A,O);return Gg(x,N.targetId,M.wa),M.snapshot}(t,h,f,m);const s=await Bg(t.localStore,e,!0),o=new G$(e,s.Ts),a=o.ma(s.documents),l=Tu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Gg(t,n,c.wa);const d=new W$(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Z$(t,e,n){const r=ue(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!zf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ka(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ga(r.remoteStore,i.targetId),Qa(r,i.targetId)}).catch(vs)):(Qa(r,i.targetId),await Ka(r.localStore,i.targetId,!0))}async function eU(t,e){const n=ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ga(n.remoteStore,r.targetId))}async function tU(t,e,n){const r=av(t);try{const i=await function(o,a){const l=ue(o),c=st.now(),d=a.reduce((m,E)=>m.add(E.key),Ie());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=Nn(),x=Ie();return l.cs.getEntries(m,d).next(N=>{E=N,E.forEach((y,v)=>{v.isValidDocument()||(x=x.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(N=>{h=N;const y=[];for(const v of a){const T=TF(v,h.get(v.key).overlayedDocument);T!=null&&y.push(new xs(v.key,T,L2(T.value.mapValue),fn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,y,a)}).next(N=>{f=N;const y=N.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(m,N.batchId,y)})}).then(()=>({batchId:f.batchId,changes:J2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ke(ve)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Es(r,i.changes),await ul(r.remoteStore)}catch(i){const s=tv(i,"Failed to persist write");n.reject(s)}}async function iA(t,e){const n=ue(t);try{const r=await x$(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?fe(o.va):i.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),await Es(n,r,e)}catch(r){await vs(r)}}function F1(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&nv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nU(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ke(re.comparator);o=o.insert(s,ct.newNoDocument(s,pe.min()));const a=Ie().add(s),l=new Iu(pe.min(),new Map,new Ke(ve),o,a);await iA(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),ov(r)}else await Ka(r.localStore,e,!1).then(()=>Qa(r,e,n)).catch(vs)}async function rU(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await w$(n.localStore,e);sv(n,r,null),iv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Es(n,i)}catch(i){await vs(i)}}async function iU(t,e,n){const r=ue(t);try{const i=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(fe(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);sv(r,e,n),iv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Es(r,i)}catch(i){await vs(i)}}function iv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function sv(t,e,n){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Qa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||sA(t,r)})}function sA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ga(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ov(t))}function Gg(t,e,n){for(const r of n)r instanceof tA?(t.La.addReference(r.key,e),sU(t,r)):r instanceof nA?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||sA(t,r.key)):ce()}function sU(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),ov(t))}function ov(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new Q$(n)),t.Oa=t.Oa.insert(n,r),Hf(t.remoteStore,new ri(Dn(Of(n.path)),r,"TargetPurposeLimboResolution",hn.oe))}}async function Es(t,e,n){const r=ue(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Qy.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=ue(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>H.forEach(c,f=>H.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>H.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!_s(h))throw h;J("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),E=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(E);d.os=d.os.insert(f,x)}}}(r.localStore,s))}async function oU(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await LC(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ne(Q.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Es(n,r.hs)}}function aU(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let i=Ie();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function lU(t,e){const n=ue(t),r=await Bg(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Gg(n,e.targetId,i.wa),i}async function cU(t,e){const n=ue(t);return $C(n.localStore,e).then(r=>Es(n,r))}async function uU(t,e,n,r){const i=ue(t),s=await function(a,l){const c=ue(a),d=ue(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):H.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ul(i.remoteStore):n==="acknowledged"||n==="rejected"?(sv(i,e,r||null),iv(i,e),function(a,l){ue(ue(a).mutationQueue).On(l)}(i.localStore,e)):ce(),await Es(i,s)):J("SyncEngine","Cannot apply mutation batch with id: "+e)}async function dU(t,e){const n=ue(t);if(Kf(n),av(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await $1(n,r.toArray());n.Qa=!0,await Hg(n.remoteStore,!0);for(const s of i)Hf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Qa(n,o),Ka(n.localStore,o,!0))),Ga(n.remoteStore,o)}),await i,await $1(n,r),function(o){const a=ue(o);a.Na.forEach((l,c)=>{Ga(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Ke(re.comparator)}(n),n.Qa=!1,await Hg(n.remoteStore,!1)}}async function $1(t,e,n){const r=ue(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Wh(r.localStore,Dn(l[0]));for(const c of l){const d=r.Fa.get(c),h=await lU(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await FC(r.localStore,o);a=await Wh(r.localStore,c),await rv(r,oA(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function oA(t){return K2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hU(t){return function(n){return ue(ue(n).persistence).Qi()}(ue(t).localStore)}async function fU(t,e,n,r){const i=ue(t);if(i.Qa)return void J("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await $C(i.localStore,Q2(s[0])),a=Iu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",gt.EMPTY_BYTE_STRING);await Es(i,o,a);break}case"rejected":await Ka(i.localStore,e,!0),Qa(i,e,r);break;default:ce()}}async function pU(t,e,n){const r=Kf(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){J("SyncEngine","Adding an already active target "+i);continue}const s=await FC(r.localStore,i),o=await Wh(r.localStore,s);await rv(r,oA(s),o.targetId,!1,o.resumeToken),Hf(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await Ka(r.localStore,i,!1).then(()=>{Ga(r.remoteStore,i),Qa(r,i)}).catch(vs)}}function Kf(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nU.bind(null,e),e.Ca.d_=H$.bind(null,e.eventManager),e.Ca.$a=K$.bind(null,e.eventManager),e}function av(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iU.bind(null,e),e}class ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return MC(this.persistence,new zC,e.initialUser,this.serializer)}Ga(e){return new VC(Uf.Zr,this.serializer)}Wa(e){return new BC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ou.provider={build:()=>new ou};class aA extends ou{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await av(this.Ja.syncEngine),await ul(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return MC(this.persistence,new zC,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new n$(r,e.asyncQueue,n)}Ha(e,n){const r=new O9(n,this.persistence);return new V9(e.asyncQueue,r)}Ga(e){const n=OC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Wy(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,qC(),Qd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new BC}}class mU extends aA{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Zp&&(this.sharedClientState.syncEngine={no:uU.bind(null,n),ro:fU.bind(null,n),io:pU.bind(null,n),Qi:hU.bind(null,n),eo:cU.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await dU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=qC();if(!Zp.D(n))throw new ne(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=OC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class au{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oU.bind(null,this.syncEngine),await Hg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new q$}()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),r=function(s){return new C$(s)}(e.databaseInfo);return function(s,o,a,l){return new R$(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new P$(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>F1(this.syncEngine,n,0),function(){return O1.D()?new O1:new I$}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new Y$(i,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ue(i);J("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Su(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}au.provider={build:()=>new au};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=E2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tm(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await LC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yU(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>z1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>z1(e.remoteStore,i)),t._onlineComponents=e}async function yU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await tm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Xc("Error using user provided cache. Falling back to memory cache: "+n),await tm(t,new ou)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await tm(t,new ou);return t._offlineComponents}async function cA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await U1(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await U1(t,new au))),t._onlineComponents}function vU(t){return cA(t).then(e=>e.syncEngine)}async function uA(t){const e=await cA(t),n=e.eventManager;return n.onListen=X$.bind(null,e.syncEngine),n.onUnlisten=Z$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eU.bind(null,e.syncEngine),n}function _U(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new lA({next:f=>{d.Za(),o.enqueueAndForget(()=>ZC(s,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new ne(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new ne(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new eA(Of(a.path),d,{includeMetadataChanges:!0,_a:!0});return JC(s,h)}(await uA(t),t.asyncQueue,e,n,r)),r.promise}function wU(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new lA({next:f=>{d.Za(),o.enqueueAndForget(()=>ZC(s,h)),f.fromCache&&l.source==="server"?c.reject(new ne(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new eA(a,d,{includeMetadataChanges:!0,_a:!0});return JC(s,h)}(await uA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e,n){if(!n)throw new ne(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xU(t,e,n,r){if(e===!0&&r===!0)throw new ne(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function q1(t){if(!re.isDocumentKey(t))throw new ne(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function H1(t){if(re.isDocumentKey(t))throw new ne(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function yo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gf(t);throw new ne(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new I9;switch(r.type){case"firstParty":return new C9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=B1.get(n);r&&(J("ComponentProvider","Removing Datastore"),B1.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hl(this.firestore,e,this._query)}}class vn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class as extends hl{constructor(e,n,r){super(e,n,Of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new re(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function EU(t,e,...n){if(t=Ot(t),hA("collection","path",e),t instanceof lv){const r=Le.fromString(e,...n);return H1(r),new as(t,null,r)}{if(!(t instanceof vn||t instanceof as))throw new ne(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return H1(r),new as(t.firestore,null,r)}}function nm(t,e,...n){if(t=Ot(t),arguments.length===1&&(e=E2.newId()),hA("doc","path",e),t instanceof lv){const r=Le.fromString(e,...n);return q1(r),new vn(t,null,new re(r))}{if(!(t instanceof vn||t instanceof as))throw new ne(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return q1(r),new vn(t.firestore,t instanceof as?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new HC(this,"async_queue_retry"),this.Vu=()=>{const r=Qd();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_s(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw mt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=ev.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Cu extends lv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new G1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G1(e),this._firestoreClient=void 0,await e}}}function bU(t,e,n){n||(n="(default)");const r=bo(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(za(s,e))return i;throw new ne(Q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ne(Q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function cv(t){if(t._terminated)throw new ne(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IU(t),t._firestoreClient}function IU(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new nF(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,dA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new gU(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ya(gt.fromBase64String(e))}catch(n){throw new ne(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ya(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=/^__.*__$/;class SU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new cl(e,this.data,n,this.fieldTransforms)}}function fA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class pv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fA(this.Cu)&&TU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class CU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bf(e)}Qu(e,n,r,i=!1){return new pv({Cu:e,methodName:n,qu:r,path:rt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pA(t){const e=t._freezeSettings(),n=Bf(t._databaseId);return new CU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AU(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);yA("Data must be an object, but it was:",o,r);const a=mA(r,o);let l,c;if(s.merge)l=new Wn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=RU(e,h,n);if(!o.contains(f))throw new ne(Q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);PU(d,f)||d.push(f)}l=new Wn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new SU(new cn(a),l,c)}class mv extends dv{_toFieldTransform(e){return new sC(e.path,new Ua)}isEqual(e){return e instanceof mv}}function kU(t,e,n,r=!1){return gv(n,t.Qu(r?4:3,e))}function gv(t,e){if(gA(t=Ot(t)))return yA("Unsupported field value:",e,t),mA(t,e);if(t instanceof dv)return function(r,i){if(!fA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=gv(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _F(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=st.fromDate(r);return{timestampValue:Ha(i.serializer,s)}}if(r instanceof st){const s=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ha(i.serializer,s)}}if(r instanceof hv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ya)return{bytesValue:hC(i.serializer,r._byteString)};if(r instanceof vn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return jy(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Gf(r)}`)}(t,e)}function mA(t,e){const n={};return V2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ll(t,(r,i)=>{const s=gv(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function gA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof hv||t instanceof Ya||t instanceof vn||t instanceof dv||t instanceof fv)}function yA(t,e,n){if(!gA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Gf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function RU(t,e,n){if((e=Ot(e))instanceof uv)return e._internalPath;if(typeof e=="string")return vA(t,e);throw Jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const NU=new RegExp("[~\\*/\\[\\]]");function vA(t,e,n){if(e.search(NU)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uv(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(Q.INVALID_ARGUMENT,a+t+l)}function PU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DU extends _A{data(){return super.data()}}function wA(t,e){return typeof e=="string"?vA(t,e):e instanceof uv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yv{}class OU extends yv{}function zU(t,e,...n){let r=[];e instanceof yv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof _v).length,a=s.filter(l=>l instanceof vv).length;if(o>1||o>0&&a>0)throw new ne(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class vv extends OU{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vv(e,n,r)}_apply(e){const n=this._parse(e);return xA(e._query,n),new hl(e.firestore,e.converter,Vg(e._query,n))}_parse(e){const n=pA(e.firestore);return function(s,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ne(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Q1(h,d);const m=[];for(const E of h)m.push(W1(l,s,E));f={arrayValue:{values:m}}}else f=W1(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Q1(h,d),f=kU(a,o,h,d==="in"||d==="not-in");return ke.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class _v extends yv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _v(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:je.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)xA(o,l),o=Vg(o,l)}(e._query,n),new hl(e.firestore,e.converter,Vg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function W1(t,e,n){if(typeof(n=Ot(n))=="string"){if(n==="")throw new ne(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!G2(e)&&n.indexOf("/")!==-1)throw new ne(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!re.isDocumentKey(r))throw new ne(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ru(t,new re(r))}if(n instanceof vn)return ru(t,n._key);throw new ne(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gf(n)}.`)}function Q1(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MU{convertValue(e,n="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ll(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Je(o.doubleValue));return new fv(s)}convertGeoPoint(e){return new hv(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const n=mi(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);fe(EC(r));const i=new uo(r.get(1),r.get(3)),s=new re(r.popFirst(5));return i.isEqual(n)||mt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class EA extends _A{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yd extends EA{data(e={}){return super.data(e)}}class jU{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ic(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yd(this._firestore,this._userDataWriter,r.key,r,new ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Yd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ic(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Yd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ic(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:FU(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t){t=yo(t,vn);const e=yo(t.firestore,Cu);return _U(cv(e),t._key).then(n=>HU(e,t,n))}class bA extends MU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function UU(t){t=yo(t,hl);const e=yo(t.firestore,Cu),n=cv(e),r=new bA(e);return VU(t._query),wU(n,t._query).then(i=>new jU(e,r,t,i))}function BU(t,e,n){t=yo(t,vn);const r=yo(t.firestore,Cu),i=LU(t.converter,e,n);return IA(r,[AU(pA(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fn.none())])}function qU(t){return IA(yo(t.firestore,Cu),[new jf(t._key,fn.none())])}function IA(t,e){return function(r,i){const s=new Pr;return r.asyncQueue.enqueueAndForget(async()=>tU(await vU(r),i,s)),s.promise}(cv(t),e)}function HU(t,e,n){const r=n.docs.get(e._key),i=new bA(t);return new EA(t,i,e._key,r,new ic(n.hasPendingWrites,n.fromCache),e.converter)}class KU{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=YU(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function GU(t){return new KU(t)}class WU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=au.provider,this._offlineComponentProvider={build:n=>new aA(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class QU{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=au.provider,this._offlineComponentProvider={build:n=>new mU(n,e==null?void 0:e.cacheSizeBytes)}}}function YU(t){return new WU(void 0)}function XU(){return new QU}function JU(){return new mv("serverTimestamp")}(function(e,n=!0){(function(i){al=i})(sl),Dr(new gr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Cu(new T9(r.getProvider("auth-internal")),new k9(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uo(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Yn(Ux,"4.7.3",e),Yn(Ux,"4.7.3","esm2017")})();const TA="@firebase/installations",wv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=1e4,CA=`w:${wv}`,AA="FIS_v2",ZU="https://firebaseinstallations.googleapis.com/v1",e8=60*60*1e3,t8="installations",n8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vo=new Eo(t8,n8,r8);function kA(t){return t instanceof vr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA({projectId:t}){return`${ZU}/projects/${t}/installations`}function NA(t){return{token:t.token,requestStatus:2,expiresIn:s8(t.expiresIn),creationTime:Date.now()}}async function PA(t,e){const r=(await e.json()).error;return vo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function DA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function i8(t,{refreshToken:e}){const n=DA(t);return n.append("Authorization",o8(e)),n}async function VA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function s8(t){return Number(t.replace("s","000"))}function o8(t){return`${AA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=RA(t),i=DA(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:AA,appId:t.appId,sdkVersion:CA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await VA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:NA(c.authToken)}}else throw await PA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=/^[cdef][\w-]{21}$/,Wg="";function u8(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=d8(t);return c8.test(n)?n:Wg}catch{return Wg}}function d8(t){return l8(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Map;function MA(t,e){const n=Wf(t);LA(n,e),h8(n,e)}function LA(t,e){const n=zA.get(t);if(n)for(const r of n)r(e)}function h8(t,e){const n=f8();n&&n.postMessage({key:t,fid:e}),p8()}let Gs=null;function f8(){return!Gs&&"BroadcastChannel"in self&&(Gs=new BroadcastChannel("[Firebase] FID Change"),Gs.onmessage=t=>{LA(t.data.key,t.data.fid)}),Gs}function p8(){zA.size===0&&Gs&&(Gs.close(),Gs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8="firebase-installations-database",g8=1,_o="firebase-installations-store";let rm=null;function xv(){return rm||(rm=PS(m8,g8,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_o)}}})),rm}async function Zh(t,e){const n=Wf(t),i=(await xv()).transaction(_o,"readwrite"),s=i.objectStore(_o),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&MA(t,e.fid),e}async function jA(t){const e=Wf(t),r=(await xv()).transaction(_o,"readwrite");await r.objectStore(_o).delete(e),await r.done}async function Qf(t,e){const n=Wf(t),i=(await xv()).transaction(_o,"readwrite"),s=i.objectStore(_o),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&MA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ev(t){let e;const n=await Qf(t.appConfig,r=>{const i=y8(r),s=v8(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Wg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function y8(t){const e=t||{fid:u8(),registrationStatus:0};return FA(e)}function v8(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(vo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=_8(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:w8(t)}:{installationEntry:e}}async function _8(t,e){try{const n=await a8(t,e);return Zh(t.appConfig,n)}catch(n){throw kA(n)&&n.customData.serverCode===409?await jA(t.appConfig):await Zh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function w8(t){let e=await Y1(t.appConfig);for(;e.registrationStatus===1;)await OA(100),e=await Y1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ev(t);return r||n}return e}function Y1(t){return Qf(t,e=>{if(!e)throw vo.create("installation-not-found");return FA(e)})}function FA(t){return x8(t)?{fid:t.fid,registrationStatus:0}:t}function x8(t){return t.registrationStatus===1&&t.registrationTime+SA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E8({appConfig:t,heartbeatServiceProvider:e},n){const r=b8(t,n),i=i8(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:CA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await VA(()=>fetch(r,a));if(l.ok){const c=await l.json();return NA(c)}else throw await PA("Generate Auth Token",l)}function b8(t,{fid:e}){return`${RA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bv(t,e=!1){let n;const r=await Qf(t.appConfig,s=>{if(!$A(s))throw vo.create("not-registered");const o=s.authToken;if(!e&&S8(o))return s;if(o.requestStatus===1)return n=I8(t,e),s;{if(!navigator.onLine)throw vo.create("app-offline");const a=A8(s);return n=T8(t,a),a}});return n?await n:r.authToken}async function I8(t,e){let n=await X1(t.appConfig);for(;n.authToken.requestStatus===1;)await OA(100),n=await X1(t.appConfig);const r=n.authToken;return r.requestStatus===0?bv(t,e):r}function X1(t){return Qf(t,e=>{if(!$A(e))throw vo.create("not-registered");const n=e.authToken;return k8(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function T8(t,e){try{const n=await E8(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Zh(t.appConfig,r),n}catch(n){if(kA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await jA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Zh(t.appConfig,r)}throw n}}function $A(t){return t!==void 0&&t.registrationStatus===2}function S8(t){return t.requestStatus===2&&!C8(t)}function C8(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+e8}function A8(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function k8(t){return t.requestStatus===1&&t.requestTime+SA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ev(e);return r?r.catch(console.error):bv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N8(t,e=!1){const n=t;return await P8(n),(await bv(n,e)).token}async function P8(t){const{registrationPromise:e}=await Ev(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(t){if(!t||!t.options)throw im("App Configuration");if(!t.name)throw im("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw im(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function im(t){return vo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="installations",V8="installations-internal",O8=t=>{const e=t.getProvider("app").getImmediate(),n=D8(e),r=bo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},z8=t=>{const e=t.getProvider("app").getImmediate(),n=bo(e,UA).getImmediate();return{getId:()=>R8(n),getToken:i=>N8(n,i)}};function M8(){Dr(new gr(UA,O8,"PUBLIC")),Dr(new gr(V8,z8,"PRIVATE"))}M8();Yn(TA,wv);Yn(TA,wv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="analytics",L8="firebase_id",j8="origin",F8=60*1e3,$8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Iv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Af("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new Eo("analytics","Analytics",U8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){if(!t.startsWith(Iv)){const e=Vn.create("invalid-gtag-resource",{gtagURL:t});return _n.warn(e.message),""}return t}function BA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function q8(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function H8(t,e){const n=q8("firebase-js-sdk-policy",{createScriptURL:B8}),r=document.createElement("script"),i=`${Iv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function K8(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function G8(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await BA(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){_n.error(a)}t("config",i,s)}async function W8(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await BA(n);for(const l of o){const c=a.find(h=>h.measurementId===l),d=c&&e[c.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){_n.error(s)}}function Q8(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await W8(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await G8(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){_n.error(a)}}return i}function Y8(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Q8(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function X8(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Iv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=30,Z8=1e3;class eB{constructor(e={},n=Z8){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qA=new eB;function tB(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function nB(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:tB(r)},s=$8.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function rB(t,e=qA,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Vn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Vn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new oB;return setTimeout(async()=>{a.abort()},F8),HA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function HA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=qA){var s;const{appId:o,measurementId:a}=t;try{await iB(r,e)}catch(l){if(a)return _n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await nB(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!sB(c)){if(i.deleteThrottleMetadata(o),a)return _n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?fx(n,i.intervalMillis,J8):fx(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,h),_n.debug(`Calling attemptFetch again in ${d} millis`),HA(t,h,r,i)}}function iB(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sB(t){if(!(t instanceof vr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class oB{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function aB(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(){if(vy())try{await kS()}catch(t){return _n.warn(Vn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return _n.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cB(t,e,n,r,i,s,o){var a;const l=rB(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&_n.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>_n.error(m)),e.push(l);const c=lB().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);X8(s)||H8(s,d.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[j8]="firebase",f.update=!0,h!=null&&(f[L8]=h),i("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.app=e}_delete(){return delete xc[this.app.options.appId],Promise.resolve()}}let xc={},J1=[];const Z1={};let sm="dataLayer",dB="gtag",eE,KA,tE=!1;function hB(){const t=[];if(CS()&&t.push("This is a browser extension environment."),LL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Vn.create("invalid-analytics-context",{errorInfo:e});_n.warn(n.message)}}function fB(t,e,n){hB();const r=t.options.appId;if(!r)throw Vn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)_n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(xc[r]!=null)throw Vn.create("already-exists",{id:r});if(!tE){K8(sm);const{wrappedGtag:s,gtagCore:o}=Y8(xc,J1,Z1,sm,dB);KA=s,eE=o,tE=!0}return xc[r]=cB(t,J1,Z1,e,eE,sm,n),new uB(t)}function pB(t=VS()){t=Ot(t);const e=bo(t,ef);return e.isInitialized()?e.getImmediate():mB(t)}function mB(t,e={}){const n=bo(t,ef);if(n.isInitialized()){const i=n.getImmediate();if(za(e,n.getOptions()))return i;throw Vn.create("already-initialized")}return n.initialize({options:e})}function gB(t,e,n,r){t=Ot(t),aB(KA,xc[t.app.options.appId],e,n,r).catch(i=>_n.error(i))}const nE="@firebase/analytics",rE="0.10.8";function yB(){Dr(new gr(ef,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return fB(r,i,n)},"PUBLIC")),Dr(new gr("analytics-internal",t,"PRIVATE")),Yn(nE,rE),Yn(nE,rE,"esm2017");function t(e){try{const n=e.getProvider(ef).getImmediate();return{logEvent:(r,i,s)=>gB(n,r,i,s)}}catch(n){throw Vn.create("interop-component-reg-failed",{reason:n})}}}yB();const vB={apiKey:"AIzaSyBRvglSh40aRJFOA9SNxoyBhNjslW_7p8k",authDomain:"detective-board-b108b.firebaseapp.com",projectId:"detective-board-b108b",storageBucket:"detective-board-b108b.firebasestorage.app",messagingSenderId:"140107009046",appId:"1:140107009046:web:49e3c650ea0e90a5f2b937",measurementId:"G-TBJ91VEM4Y"},Tv=DS(vB);pB(Tv);const Xa=_9(Tv),xd=bU(Tv,{localCache:GU({tabManager:XU()}),experimentalForceLongPolling:!0}),_B=new Yr,GA=D.createContext();function Sv(){return D.useContext(GA)}function wB({children:t}){const[e,n]=D.useState(null),[r,i]=D.useState(!0);D.useEffect(()=>a6(Xa,a=>{n(a),i(!1)}),[]);const s={currentUser:e};return p.jsx(GA.Provider,{value:s,children:!r&&t})}const xB=({onSwitchToSignUp:t,onForgotPassword:e,isDarkMode:n})=>{const[r,i]=D.useState(""),[s,o]=D.useState(""),[a,l]=D.useState(""),c=async h=>{h.preventDefault(),l("");try{await n6(Xa,r,s)}catch(f){console.error(f),l("Error: "+f.message)}},d=async()=>{l("");try{await A6(Xa,_B)}catch(h){console.error(h),h.code==="auth/cancelled-popup-request"?l(""):l("Error Google: "+h.message)}};return p.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[p.jsxs("form",{onSubmit:c,className:`shadow-xl rounded-lg px-8 pt-6 pb-8 mb-4 border transition-colors duration-300 ${n?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"}`,children:[p.jsx("h2",{className:`text-2xl font-bold mb-6 text-center font-mono ${n?"text-white":"text-gray-800"}`,children:"INICIAR SESIN"}),a&&p.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:a}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"text-zinc-400":"text-gray-600"}`,htmlFor:"login-email",children:"Correo"}),p.jsxs("div",{className:"relative",children:[p.jsx(dy,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${n?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"login-email",type:"email",placeholder:"detective@agencia.com",value:r,onChange:h=>i(h.target.value),required:!0})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"text-zinc-400":"text-gray-600"}`,htmlFor:"login-password",children:"Contrasea"}),p.jsxs("div",{className:"relative",children:[p.jsx(Oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${n?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"login-password",type:"password",placeholder:"",value:s,onChange:h=>o(h.target.value),required:!0})]})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase transition-transform active:scale-95",type:"submit",children:"Entrar"}),p.jsxs("div",{className:"relative flex py-1 items-center",children:[p.jsx("div",{className:`flex-grow border-t ${n?"border-zinc-600":"border-gray-300"}`}),p.jsx("span",{className:`flex-shrink mx-2 text-xs ${n?"text-zinc-500":"text-gray-400"}`,children:"O"}),p.jsx("div",{className:`flex-grow border-t ${n?"border-zinc-600":"border-gray-300"}`})]}),p.jsxs("button",{onClick:d,type:"button",className:`flex items-center justify-center gap-3 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-all active:scale-95 ${n?"bg-white text-gray-700 hover:bg-gray-100":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[p.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),p.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),p.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),p.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}),p.jsx("div",{className:"text-center mt-6",children:p.jsx("a",{onClick:e,className:"inline-block align-baseline font-bold text-sm text-blue-400 hover:text-blue-300 cursor-pointer",children:"Olvidaste tu contrasea?"})})]}),p.jsxs("p",{className:`text-center text-xs ${n?"text-zinc-500":"text-gray-500"}`,children:["No tienes cuenta?"," ",p.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Regstrate aqu."})]})]})},EB=({onSwitchToLogin:t,isDarkMode:e})=>{const[n,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(""),[l,c]=D.useState(""),[d,h]=D.useState(""),f=async m=>{if(m.preventDefault(),o!==l)return h("Las contraseas no coinciden.");h("");try{const E=await t6(Xa,i,o);await i6(E.user,{displayName:n})}catch(E){console.error(E),E.code==="auth/email-already-in-use"?h("Este correo ya est en uso."):E.code==="auth/weak-password"?h("La contrasea es muy dbil (mnimo 6 caracteres)."):h("Error: "+E.message)}};return p.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[p.jsxs("form",{onSubmit:f,className:`shadow-xl rounded-lg px-8 pt-6 pb-8 mb-4 border transition-colors duration-300 ${e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"}`,children:[p.jsx("h2",{className:`text-2xl font-bold mb-6 text-center font-mono ${e?"text-white":"text-gray-800"}`,children:"CREAR CUENTA"}),d&&p.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:d}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"signup-name",children:"Nombre"}),p.jsxs("div",{className:"relative",children:[p.jsx(fy,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"signup-name",type:"text",placeholder:"Sherlock Holmes",value:n,onChange:m=>r(m.target.value),required:!0})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"signup-email",children:"Correo"}),p.jsxs("div",{className:"relative",children:[p.jsx(dy,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"signup-email",type:"email",placeholder:"detective@agencia.com",value:i,onChange:m=>s(m.target.value),required:!0})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"signup-password",children:"Contrasea"}),p.jsxs("div",{className:"relative",children:[p.jsx(Oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"signup-password",type:"password",placeholder:"",value:o,onChange:m=>a(m.target.value),required:!0})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"signup-confirm-password",children:"Confirmar Contrasea"}),p.jsxs("div",{className:"relative",children:[p.jsx(Oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"signup-confirm-password",type:"password",placeholder:"",value:l,onChange:m=>c(m.target.value),required:!0})]})]}),p.jsx("div",{className:"flex flex-col gap-4",children:p.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase transition-transform active:scale-95",type:"submit",children:"Registrarse"})})]}),p.jsxs("p",{className:`text-center text-xs ${e?"text-zinc-500":"text-gray-500"}`,children:["Ya tienes una cuenta?"," ",p.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Inicia sesin."})]})]})},bB=({onSwitchToLogin:t,isDarkMode:e})=>{const[n,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(""),l=async c=>{c.preventDefault(),a(""),s("");try{await e6(Xa,n),s("Revisa tu correo! Se ha enviado un enlace para restablecer tu contrasea.")}catch{a("Error al enviar el correo. Verifica que la direccin sea correcta.")}};return p.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[p.jsxs("form",{onSubmit:l,className:`shadow-xl rounded-lg px-8 pt-6 pb-8 mb-4 border transition-colors duration-300 ${e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"}`,children:[p.jsx("h2",{className:`text-2xl font-bold mb-6 text-center font-mono ${e?"text-white":"text-gray-800"}`,children:"RECUPERAR CONTRASEA"}),o&&p.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:o}),i&&p.jsx("p",{className:"bg-green-900/50 text-green-300 text-xs p-3 rounded mb-4",children:i}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"reset-email",children:"Correo Electrnico"}),p.jsxs("div",{className:"relative",children:[p.jsx(dy,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"reset-email",type:"email",placeholder:"detective@agencia.com",value:n,onChange:c=>r(c.target.value),required:!0})]})]}),p.jsx("div",{className:"flex flex-col gap-4",children:p.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase transition-transform active:scale-95",type:"submit",children:"Enviar Enlace"})})]}),p.jsx("p",{className:`text-center text-xs ${e?"text-zinc-500":"text-gray-500"}`,children:p.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Volver a Iniciar Sesin"})})]})},IB=()=>{const[t,e]=D.useState("login"),[n,r]=D.useState(!0),i=()=>{switch(t){case"signup":return p.jsx(EB,{onSwitchToLogin:()=>e("login"),isDarkMode:n});case"forgot":return p.jsx(bB,{onSwitchToLogin:()=>e("login"),isDarkMode:n});case"login":default:return p.jsx(xB,{onSwitchToSignUp:()=>e("signup"),onForgotPassword:()=>e("forgot"),isDarkMode:n})}};return p.jsxs("div",{className:`w-screen h-screen flex flex-col items-center justify-center p-4 transition-colors duration-500 ${n?"bg-zinc-900":"bg-gray-100"}`,children:[p.jsx("button",{onClick:()=>r(!n),className:`absolute top-4 right-4 p-2 rounded-full transition-colors ${n?"bg-zinc-800 text-yellow-400 hover:bg-zinc-700":"bg-white text-gray-600 hover:bg-gray-200 shadow-sm"}`,children:n?p.jsx(lS,{size:20}):p.jsx(iS,{size:20})}),p.jsx("h1",{className:`text-5xl font-black font-mono mb-8 tracking-[0.2em] uppercase text-center ${n?"text-zinc-500":"text-zinc-400"}`,children:"DETECTIVE BOARD"}),p.jsx("div",{className:"w-full flex justify-center animate-in fade-in slide-in-from-bottom-8 duration-500",children:i()},t)]})},TB=()=>{const{currentUser:t}=Sv(),e=D.useCallback(async(s,o)=>{if(!(!t||!s))try{console.log(`[NUBE]  Intentando guardar tablero ${s}...`);const a=nm(xd,"users",t.uid,"boards",s),l=JSON.parse(JSON.stringify(o));await BU(a,{...l,updatedAt:JU(),ownerId:t.uid},{merge:!0}),console.log(`[NUBE]  Guardado exitoso. Deberas ver la coleccin 'users' -> '${t.uid}' en Firestore.`)}catch(a){console.error(" ERROR CRTICO al guardar en Firestore (Revisa Reglas o Conexin):",a)}},[t]),n=D.useCallback(async s=>{if(!t||!s)return null;try{console.log(`[NUBE] Descargando tablero ${s}...`);const o=nm(xd,"users",t.uid,"boards",s),a=await $U(o);return a.exists()?a.data():null}catch(o){throw console.error("Error al cargar de Firestore:",o),o}},[t]),r=D.useCallback(async()=>{if(!t)return[];try{console.log("[NUBE] Sincronizando lista de casos...");const s=EU(xd,"users",t.uid,"boards"),o=zU(s);return(await UU(o)).docs.map(l=>({id:l.id,...l.data()}))}catch(s){throw console.error("Error al obtener tableros:",s),s}},[t]),i=D.useCallback(async s=>{t&&await qU(nm(xd,"users",t.uid,"boards",s))},[t]);return{saveBoard:e,loadBoard:n,getBoards:r,deleteBoard:i}},SB=()=>{var Cs,As,Ur;const t=D.useRef(null),{currentUser:e}=Sv(),[n,r]=D.useState(!1),[i,s,o]=wO([]),[a,l,c]=xO([]),[d,h]=D.useState(null),[f,m]=D.useState(!1),[E,x]=D.useState(null),[N,y]=D.useState(null),[v,T]=D.useState(null),[A,O]=D.useState({isOpen:!1,title:"",message:"",onConfirm:null,isDanger:!1}),[M,S]=D.useState(!1),[b,w]=D.useState(!1),[I,C]=D.useState(null),[R,k]=D.useState(null),[P,$]=D.useState(!1),[z,F]=D.useState(null),[j,L]=D.useState(0),[B,G]=D.useState(!1),U=D.useRef(!1),Y=D.useRef(null),{saveBoard:X,loadBoard:ee,getBoards:oe}=TB(),{connectionColor:he,setConnectionColor:de,connectionLineType:we,setConnectionLineType:_e,isInteractive:ye,setIsInteractive:$e,isDarkMode:be,setIsDarkMode:Ge,searchTerm:ze,setSearchTerm:dt,isSidebarOpen:Se,setIsSidebarOpen:ie,isZenMode:xe,setIsZenMode:yt,bgType:Et,setBgType:Jt,toggleBackground:Zt}=EL("cork"),{nodeTypes:Bt,edgeTypes:bt,proOptions:Ve,connectionLineStyle:Me,nodeColor:kt}=mL({connectionColor:he}),{takeSnapshot:Xe,undo:er,redo:ht,clearHistory:vt,onNodesChangeWithHistory:Fn,onEdgesChangeWithHistory:$n,animateAndRemoveNode:xn,animateAndRemoveEdge:En}=yL({nodes:i,edges:a,setNodes:s,setEdges:l,onNodesChange:o,onEdgesChange:c}),{boards:ft,setBoards:bn,trash:_i,currentBoardId:et,setCurrentBoardId:Un,handleSwitchBoard:Lr,handleCreateBoard:In,handleDeleteBoard:tr,handleRestoreBoard:To,handlePermanentDelete:wi,handleRenameBoard:So,handleReorderBoards:jr,handleCloneBoard:Co}=GM({nodes:i,edges:a,bgType:Et,setNodes:s,setEdges:l,setBgType:Jt,reactFlowInstance:d,clearHistory:vt,setCaseManagerOpen:r,setConfirmModal:O,lastSaved:N});D.useEffect(()=>{(async()=>{if(e){G(!1);try{const Re=(await oe()).map(Ne=>{var tt,Br;return{...Ne,createdAt:(tt=Ne.createdAt)!=null&&tt.toMillis?Ne.createdAt.toMillis():Ne.createdAt||Date.now(),lastModified:(Br=Ne.updatedAt)!=null&&Br.toMillis?Ne.updatedAt.toMillis():Ne.updatedAt||Date.now()}}).sort((Ne,tt)=>tt.lastModified-Ne.lastModified);bn(Re),Re.length>0&&(!et||!Re.find(Ne=>Ne.id===et))?Un(Re[0].id):Re.length===0&&console.log("No se encontraron tableros remotos.")}catch(ge){console.error("Error sincronizando tableros:",ge)}finally{G(!0)}}})()},[e,oe,bn,Un]),D.useEffect(()=>{(async()=>{var ge;if(B&&et){$(!0),F(null),U.current=!1,Y.current=null;try{const Re=await ee(et);Re?(s(Re.nodes||[]),l(Re.edges||[]),Re.bgType&&Jt(Re.bgType),U.current=!0):ft.some(tt=>tt.id===et)?(s([]),l([]),U.current=!0):console.warn("ID de tablero obsoleto detectado, omitiendo carga para evitar sobrescritura.")}catch(Re){Re.code==="unavailable"||(ge=Re.message)!=null&&ge.includes("offline")?(console.warn("Modo offline: No se pudo sincronizar con la nube, usando cach local si existe."),F("offline")):(console.error("Error cargando tablero:",Re),F("error"))}finally{$(!1)}}})()},[et,ee,s,l,Jt,B,ft,j]),D.useEffect(()=>{if(P||!U.current||z)return;const Ee=setTimeout(()=>{var ge;if(et){const Re=((ge=ft.find(Br=>Br.id===et))==null?void 0:ge.name)||"Caso Sin Nombre",Ne={nodes:i,edges:a,bgType:Et,name:Re},tt=JSON.stringify(Ne);if(Y.current===tt)return;X(et,Ne),Y.current=tt,y(new Date)}},2e3);return()=>clearTimeout(Ee)},[i,a,Et,et,X,ft,P,z]),D.useEffect(()=>{const Ee=ge=>{ge.preventDefault(),ge.returnValue=""};return window.addEventListener("beforeunload",Ee),()=>window.removeEventListener("beforeunload",Ee)},[]),Jz({isInteractive:ye,reactFlowInstance:d,takeSnapshot:Xe,setNodes:s});const{onConnect:It,onEdgeContextMenu:Ao,onEdgeClick:Fr,onPaneClick:_r,onNodeDoubleClick:fl,onNodeDragStart:pl,onMoveStart:wr,onMoveEnd:ml,selectionRect:xr,handleRightPointerDown:xi}=_L({isInteractive:ye,reactFlowInstance:d,reactFlowWrapper:t,setEdges:l,setNodes:s,connectionLineType:we,connectionColor:he,takeSnapshot:Xe,setEditingNode:x,setEditingEdge:C,setInputModalOpen:w,setEditModalOpen:m,setMenu:T});D.useEffect(()=>{const Ee=ge=>{ge.key==="Escape"&&xe&&yt(!1)};return window.addEventListener("keydown",Ee),()=>window.removeEventListener("keydown",Ee)},[xe]);const{handleSaveNode:bs,handleDeleteNode:Is,duplicateSelected:Ei,handleConnectionColorChange:Bn,handleConnectionLineTypeChange:ko,handleEdgeDelete:Ro,handleInputModalConfirm:Ts}=bL({reactFlowInstance:d,setNodes:s,setEdges:l,takeSnapshot:Xe,animateAndRemoveNode:xn,animateAndRemoveEdge:En,setEditModalOpen:m,setEditingNode:x,setEditingEdge:C,setInputModalOpen:w,setConnectionColor:de,setConnectionLineType:_e,setPendingStampNodeId:k}),{onDragOver:Ss,onDrop:No}=QM({isInteractive:ye,reactFlowInstance:d,setNodes:s,takeSnapshot:Xe,setPendingStampNodeId:k,setInputModalOpen:w,setEditingEdge:C,setEditingNode:x}),{onSave:bi,onLoad:gl,onClear:Ii}=wL({reactFlowInstance:d,boards:ft,currentBoardId:et,bgType:Et,setBoards:bn,setNodes:s,setEdges:l,setBgType:Jt,handleSwitchBoard:Lr,clearHistory:vt,takeSnapshot:Xe,setConfirmModal:O}),{navigateSearch:Ti}=xL({searchTerm:ze,setNodes:s,reactFlowInstance:d}),Si=K.useCallback(()=>{Xe(),s(Ee=>{const ge=Ee.filter(Ne=>Ne.selected);if(ge.length===0)return Ee;const Re=ge.some(Ne=>!Ne.data.locked);return Ee.map(Ne=>Ne.selected?{...Ne,data:{...Ne.data,locked:Re},draggable:!Re}:Ne)})},[s,Xe]);D.useEffect(()=>{const Ee=ge=>{["INPUT","TEXTAREA","SELECT"].includes(ge.target.tagName)||ge.target.isContentEditable||(ge.ctrlKey||ge.metaKey)&&ge.shiftKey&&ge.key.toLowerCase()==="l"&&(ge.preventDefault(),Si())};return window.addEventListener("keydown",Ee),()=>window.removeEventListener("keydown",Ee)},[Si]),D.useEffect(()=>{const Ee=i.filter(ge=>ge.selected).map(ge=>ge.id);l(ge=>{let Re=!1;const Ne=ge.map(tt=>{var _l;const Br=Ee.includes(tt.source)||Ee.includes(tt.target),vl=(_l=tt.className)==null?void 0:_l.includes("animated-flow");if(Br&&!vl){Re=!0;const Yf=(tt.className||"").replace("quick-draw","").trim();return{...tt,className:`${Yf} animated-flow`.trim()}}else if(!Br&&vl)return Re=!0,{...tt,className:(tt.className||"").replace("animated-flow","").trim()};return tt});return Re?Ne:ge})},[i,l]),D.useEffect(()=>{if(a.some(ge=>{var Re;return(Re=ge.className)==null?void 0:Re.includes("quick-draw")})){const ge=setTimeout(()=>{l(Re=>Re.map(Ne=>{var tt;return(tt=Ne.className)!=null&&tt.includes("quick-draw")?{...Ne,className:Ne.className.replace("quick-draw","").trim()}:Ne}))},1e3);return()=>clearTimeout(ge)}},[a,l]);const{isExporting:$r,onExport:nr}=HM({reactFlowWrapper:t,reactFlowInstance:d,boards:ft,currentBoardId:et,bgType:Et,isDarkMode:be,setNodes:s});WM({onSave:bi,undo:er,redo:ht,duplicateSelected:Ei,navigateSearch:Ti,reactFlowInstance:d,edges:a,setEdges:l,takeSnapshot:Xe,connectionLineType:we,connectionColor:he});const Er=ft.find(Ee=>Ee.id===et),yl=async()=>{try{await l6(Xa)}catch(Ee){console.error("Error al cerrar sesin",Ee)}};return p.jsx("div",{className:`flex h-screen w-screen transition-colors duration-500 ease-in-out ${be?"bg-[#1a1a1a]":"bg-gray-50 light-mode"}`,children:p.jsx(wS.Provider,{value:be,children:p.jsxs(oy,{children:[!xe&&p.jsx(Fz,{connectionColor:he,setConnectionColor:Bn,connectionLineType:we,setConnectionLineType:ko,lastSaved:N,onSave:bi,onLoad:gl,onClear:Ii,onHelp:()=>S(!0),isDarkMode:be,toggleTheme:()=>Ge(!be),searchTerm:ze,setSearchTerm:dt,onExport:nr,isOpen:Se,onToggle:()=>ie(!Se),onOpenCaseManager:()=>r(!0),currentBoardName:Er==null?void 0:Er.name,onToggleZen:()=>yt(!0),onNextMatch:()=>Ti("next"),onPrevMatch:()=>Ti("prev"),onToggleBg:Zt,onLogout:yl,currentUser:e,isSyncing:P||!B,syncError:z,onRetry:()=>L(Ee=>Ee+1)}),p.jsxs("div",{className:"flex-grow h-full relative overflow-hidden",ref:t,style:{"--connection-color":he},onPointerDown:xi,onContextMenu:Ee=>Ee.preventDefault(),children:[p.jsx(Xz,{isZenMode:xe,setIsZenMode:yt,undo:er,redo:ht,isDarkMode:be}),p.jsxs(qT,{nodes:i,edges:a,onNodesChange:Fn,onEdgesChange:$n,onConnect:It,onInit:h,onDrop:No,onDragOver:Ss,onNodeDoubleClick:fl,onEdgeClick:Fr,onEdgeContextMenu:Ao,onPaneClick:_r,nodeTypes:Bt,edgeTypes:bt,fitView:!0,className:`${Et==="cork"?"cork-pattern":Et==="blackboard"?"blackboard-pattern":"graph-paper-pattern"} ${ye?"":"board-locked"} ${be?"":"light-mode"}`,connectionLineType:we,connectionLineStyle:Me,nodesDraggable:ye,proOptions:Ve,elevateNodesOnSelect:!1,nodesConnectable:ye,elementsSelectable:ye,panOnDrag:ye,zoomOnScroll:ye,zoomOnPinch:ye,panOnScroll:ye,zoomOnDoubleClick:ye,onNodeDragStart:pl,onMoveStart:wr,onMoveEnd:ml,connectionRadius:30,children:[!xe&&p.jsx(LO,{showInteractive:!0,onInteractiveChange:$e,fitViewOptions:{duration:800,padding:.2},style:{left:Se?"340px":"10px",transition:"left 0.2s ease-in-out"}}),!xe&&p.jsx(NO,{nodeColor:kt,maskColor:be?"rgba(0, 0, 0, 0.6)":"rgba(0, 0, 0, 0.1)",className:be?"bg-zinc-900 border border-zinc-800":"bg-white border border-gray-200 shadow-md"}),p.jsx(qO,{gap:20,size:1,color:be?"#444":"#aaa",variant:"dots",className:"opacity-20"}),v&&p.jsx(Kz,{onClick:_r,...v,onHide:()=>T(null),takeSnapshot:Xe,setNodes:s}),i.length===0&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10 select-none",children:p.jsxs("div",{className:`text-center ${be?"opacity-10":"opacity-20"}`,children:[p.jsx("h1",{className:"text-5xl md:text-7xl font-black text-zinc-500 font-mono mb-4 tracking-[0.2em] uppercase",children:"CONFIDENCIAL"}),p.jsx("p",{className:"text-sm text-zinc-500 font-mono uppercase tracking-widest",children:"Arrastra evidencia o haz doble clic"})]})}),p.jsx("svg",{style:{position:"absolute",top:0,left:0,width:0,height:0,pointerEvents:"none"},children:p.jsx("defs",{children:p.jsxs("filter",{id:"yarn-texture",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[p.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.8",numOctaves:"3",result:"noise"}),p.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"1.5"})]})})})]}),p.jsx("div",{className:"absolute inset-0 pointer-events-none z-[5] bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.6)_100%)]"}),$r&&p.jsxs("div",{className:"absolute inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center backdrop-blur-sm animate-in fade-in duration-200 cursor-wait",children:[p.jsx("div",{className:"w-16 h-16 border-4 border-red-600 border-t-transparent rounded-full animate-spin mb-4"}),p.jsx("h2",{className:"text-xl font-bold text-white font-mono tracking-widest animate-pulse",children:"REVELANDO EVIDENCIA..."}),p.jsx("p",{className:"text-zinc-400 text-xs font-mono mt-2",children:"Procesando fotografa del tablero completo."})]}),xr&&xr.isDragging&&p.jsx("div",{className:"absolute z-50 pointer-events-none",style:{left:`${xr.x}px`,top:`${xr.y}px`,width:`${xr.width}px`,height:`${xr.height}px`,border:"2px dashed #3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)"}}),z&&p.jsx("div",{className:"absolute inset-0 z-[60] bg-black/60 flex items-center justify-center backdrop-blur-sm animate-in fade-in duration-300",children:p.jsxs("div",{className:"bg-zinc-900 p-8 rounded-xl border border-red-500/30 text-center shadow-2xl max-w-md",children:[p.jsx(Mz,{size:48,className:"mx-auto text-red-500 mb-4 animate-pulse"}),p.jsx("h2",{className:"text-xl font-bold text-white mb-2 font-mono tracking-wider",children:"CONEXIN INTERRUMPIDA"}),p.jsx("p",{className:"text-zinc-400 mb-6 text-sm",children:z==="offline"?"No se pudo sincronizar con la base de datos. Es posible que un firewall o configuracin de red est bloqueando la conexin.":"Hubo un error crtico al cargar el expediente."}),p.jsxs("button",{onClick:()=>L(Ee=>Ee+1),className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded font-bold uppercase tracking-wider transition-colors flex items-center gap-2 mx-auto shadow-lg",children:[p.jsx(hy,{size:16})," Reintentar Conexin"]})]})})]}),p.jsx($z,{isOpen:f,onClose:()=>m(!1),node:E,onSave:bs,onDelete:Is,isDarkMode:be}),p.jsx(Gz,{isOpen:A.isOpen,onClose:()=>O(Ee=>({...Ee,isOpen:!1})),onConfirm:A.onConfirm,title:A.title,message:A.message,isDanger:A.isDanger,confirmText:A.confirmText,cancelText:A.cancelText,isDarkMode:be}),p.jsx(Wz,{isOpen:M,onClose:()=>S(!1),isDarkMode:be}),p.jsx(Qz,{isOpen:b,onClose:()=>{w(!1),C(null),x(null),k(null)},onConfirm:(Ee,ge,Re)=>Ts(Ee,ge,Re,I,E,R),onDelete:()=>{R?(Xe(),s(Ee=>Ee.map(ge=>ge.id===R?{...ge,data:{...ge.data,status:null}}:ge)),w(!1),k(null)):Ro(I,E)},title:I?"EDITAR CONEXIN":R?"CREAR SELLO":"EDITAR ZONA",initialValue:I?I.label||"":R?"":((Cs=E==null?void 0:E.data)==null?void 0:Cs.label)||"",initialColor:I?((As=I.style)==null?void 0:As.stroke)||"#dc2626":R?"#dc2626":((Ur=E==null?void 0:E.style)==null?void 0:Ur.borderColor)||"#71717a",initialType:I==null?void 0:I.type,showTypeSelector:!!I,colorLabel:I?"Color del Hilo":R?"Color del Sello":"Color de Zona",placeholder:R?"Texto del sello (ej: CONFIRMADO)":"Escribe una etiqueta...",isDarkMode:be}),p.jsx(Yz,{isOpen:n,onClose:()=>r(!1),boards:ft,currentBoardId:et,onSwitch:Lr,onCreate:In,onDelete:tr,onRename:So,onClone:Co,onReorder:jr,trash:_i,onRestore:To,onPermanentDelete:wi,isDarkMode:be})]})})})},CB=()=>{const{currentUser:t}=Sv();return D.useEffect(()=>{document.title="Detective Board";const e="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%23dc2626%22%20stroke-width%3D%222.5%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Ccircle%20cx%3D%2211%22%20cy%3D%2211%22%20r%3D%228%22%3E%3C%2Fcircle%3E%3Cline%20x1%3D%2221%22%20y1%3D%2221%22%20x2%3D%2216.65%22%20y2%3D%2216.65%22%3E%3C%2Fline%3E%3C%2Fsvg%3E";let n=document.querySelector("link[rel~='icon']");n||(n=document.createElement("link"),n.rel="icon",document.head.appendChild(n)),n.href=e},[]),t?p.jsx(SB,{}):p.jsx(IB,{})};om.createRoot(document.getElementById("root")).render(p.jsx(K.StrictMode,{children:p.jsx(wB,{children:p.jsx(CB,{})})}));
