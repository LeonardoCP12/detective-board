(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function nx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rx={exports:{}},Ud={},ix={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=Symbol.for("react.element"),SI=Symbol.for("react.portal"),TI=Symbol.for("react.fragment"),II=Symbol.for("react.strict_mode"),CI=Symbol.for("react.profiler"),kI=Symbol.for("react.provider"),AI=Symbol.for("react.context"),RI=Symbol.for("react.forward_ref"),NI=Symbol.for("react.suspense"),PI=Symbol.for("react.memo"),DI=Symbol.for("react.lazy"),_y=Symbol.iterator;function zI(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var sx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ox=Object.assign,ax={};function aa(t,e,n){this.props=t,this.context=e,this.refs=ax,this.updater=n||sx}aa.prototype.isReactComponent={};aa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};aa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lx(){}lx.prototype=aa.prototype;function xg(t,e,n){this.props=t,this.context=e,this.refs=ax,this.updater=n||sx}var Eg=xg.prototype=new lx;Eg.constructor=xg;ox(Eg,aa.prototype);Eg.isPureReactComponent=!0;var xy=Array.isArray,cx=Object.prototype.hasOwnProperty,bg={current:null},ux={key:!0,ref:!0,__self:!0,__source:!0};function dx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)cx.call(e,r)&&!ux.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sc,type:t,key:s,ref:o,props:i,_owner:bg.current}}function LI(t,e){return{$$typeof:sc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sg(t){return typeof t=="object"&&t!==null&&t.$$typeof===sc}function OI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ey=/\/+/g;function Oh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?OI(""+t.key):e.toString(36)}function vu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sc:case SI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Oh(o,0):r,xy(i)?(n="",t!=null&&(n=t.replace(Ey,"$&/")+"/"),vu(i,e,n,"",function(u){return u})):i!=null&&(Sg(i)&&(i=LI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ey,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",xy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Oh(s,a);o+=vu(s,e,n,l,i)}else if(l=zI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Oh(s,a++),o+=vu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vc(t,e,n){if(t==null)return t;var r=[],i=0;return vu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function VI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},wu={transition:null},MI={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:wu,ReactCurrentOwner:bg};function hx(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Vc,forEach:function(t,e,n){Vc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vc(t,function(){e++}),e},toArray:function(t){return Vc(t,function(e){return e})||[]},only:function(t){if(!Sg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=aa;_e.Fragment=TI;_e.Profiler=CI;_e.PureComponent=xg;_e.StrictMode=II;_e.Suspense=NI;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MI;_e.act=hx;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ox({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cx.call(e,l)&&!ux.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:sc,type:t.type,key:i,ref:s,props:r,_owner:o}};_e.createContext=function(t){return t={$$typeof:AI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kI,_context:t},t.Consumer=t};_e.createElement=dx;_e.createFactory=function(t){var e=dx.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:RI,render:t}};_e.isValidElement=Sg;_e.lazy=function(t){return{$$typeof:DI,_payload:{_status:-1,_result:t},_init:VI}};_e.memo=function(t,e){return{$$typeof:PI,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=wu.transition;wu.transition={};try{t()}finally{wu.transition=e}};_e.unstable_act=hx;_e.useCallback=function(t,e){return Jt.current.useCallback(t,e)};_e.useContext=function(t){return Jt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Jt.current.useEffect(t,e)};_e.useId=function(){return Jt.current.useId()};_e.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Jt.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};_e.useRef=function(t){return Jt.current.useRef(t)};_e.useState=function(t){return Jt.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return Jt.current.useTransition()};_e.version="18.3.1";ix.exports=_e;var D=ix.exports;const q=nx(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI=D,$I=Symbol.for("react.element"),FI=Symbol.for("react.fragment"),UI=Object.prototype.hasOwnProperty,BI=jI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HI={key:!0,ref:!0,__self:!0,__source:!0};function fx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UI.call(e,r)&&!HI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$I,type:t,key:s,ref:o,props:i,_owner:BI.current}}Ud.Fragment=FI;Ud.jsx=fx;Ud.jsxs=fx;rx.exports=Ud;var p=rx.exports,jf={},px={exports:{}},Cn={},gx={exports:{}},mx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,M){var U=$.length;$.push(M);e:for(;0<U;){var W=U-1>>>1,F=$[W];if(0<i(F,M))$[W]=M,$[U]=F,U=W;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var M=$[0],U=$.pop();if(U!==M){$[0]=U;e:for(var W=0,F=$.length,Q=F>>>1;W<Q;){var G=2*(W+1)-1,Z=$[G],te=G+1,ue=$[te];if(0>i(Z,U))te<F&&0>i(ue,Z)?($[W]=ue,$[te]=U,W=te):($[W]=Z,$[G]=U,W=G);else if(te<F&&0>i(ue,U))$[W]=ue,$[te]=U,W=te;else break e}}return M}function i($,M){var U=$.sortIndex-M.sortIndex;return U!==0?U:$.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,m=!1,b=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=$)r(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function R($){if(S=!1,T($),!b)if(n(l)!==null)b=!0,O(L);else{var M=n(u);M!==null&&B(R,M.startTime-$)}}function L($,M){b=!1,S&&(S=!1,y(E),E=-1),m=!0;var U=f;try{for(T(M),h=n(l);h!==null&&(!(h.expirationTime>M)||$&&!C());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var F=W(h.expirationTime<=M);M=t.unstable_now(),typeof F=="function"?h.callback=F:h===n(l)&&r(l),T(M)}else r(l);h=n(l)}if(h!==null)var Q=!0;else{var G=n(u);G!==null&&B(R,G.startTime-M),Q=!1}return Q}finally{h=null,f=U,m=!1}}var V=!1,I=null,E=-1,_=5,x=-1;function C(){return!(t.unstable_now()-x<_)}function A(){if(I!==null){var $=t.unstable_now();x=$;var M=!0;try{M=I(!0,$)}finally{M?k():(V=!1,I=null)}}else V=!1}var k;if(typeof v=="function")k=function(){v(A)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=A,k=function(){j.postMessage(null)}}else k=function(){P(A,0)};function O($){I=$,V||(V=!0,k())}function B($,M){E=P(function(){$(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){b||m||(b=!0,O(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var U=f;f=M;try{return $()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,M){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var U=f;f=$;try{return M()}finally{f=U}},t.unstable_scheduleCallback=function($,M,U){var W=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,$){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=U+F,$={id:d++,callback:M,priorityLevel:$,startTime:U,expirationTime:F,sortIndex:-1},U>W?($.sortIndex=U,e(u,$),n(l)===null&&$===n(u)&&(S?(y(E),E=-1):S=!0,B(R,U-W))):($.sortIndex=F,e(l,$),b||m||(b=!0,O(L))),$},t.unstable_shouldYield=C,t.unstable_wrapCallback=function($){var M=f;return function(){var U=f;f=M;try{return $.apply(this,arguments)}finally{f=U}}}})(mx);gx.exports=mx;var qI=gx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WI=D,Tn=qI;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yx=new Set,El={};function Fs(t,e){Fo(t,e),Fo(t+"Capture",e)}function Fo(t,e){for(El[t]=e,t=0;t<e.length;t++)yx.add(e[t])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$f=Object.prototype.hasOwnProperty,KI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,by={},Sy={};function GI(t){return $f.call(Sy,t)?!0:$f.call(by,t)?!1:KI.test(t)?Sy[t]=!0:(by[t]=!0,!1)}function QI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YI(t,e,n,r){if(e===null||typeof e>"u"||QI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tg=/[\-:]([a-z])/g;function Ig(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tg,Ig);Lt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tg,Ig);Lt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tg,Ig);Lt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cg(t,e,n,r){var i=Lt.hasOwnProperty(e)?Lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YI(e,n,i,r)&&(n=null),r||i===null?GI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ai=WI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),po=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Ff=Symbol.for("react.profiler"),vx=Symbol.for("react.provider"),wx=Symbol.for("react.context"),Ag=Symbol.for("react.forward_ref"),Uf=Symbol.for("react.suspense"),Bf=Symbol.for("react.suspense_list"),Rg=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),_x=Symbol.for("react.offscreen"),Ty=Symbol.iterator;function za(t){return t===null||typeof t!="object"?null:(t=Ty&&t[Ty]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,Vh;function Ga(t){if(Vh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vh=e&&e[1]||""}return`
`+Vh+t}var Mh=!1;function jh(t,e){if(!t||Mh)return"";Mh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ga(t):""}function XI(t){switch(t.tag){case 5:return Ga(t.type);case 16:return Ga("Lazy");case 13:return Ga("Suspense");case 19:return Ga("SuspenseList");case 0:case 2:case 15:return t=jh(t.type,!1),t;case 11:return t=jh(t.type.render,!1),t;case 1:return t=jh(t.type,!0),t;default:return""}}function Hf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case go:return"Fragment";case po:return"Portal";case Ff:return"Profiler";case kg:return"StrictMode";case Uf:return"Suspense";case Bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wx:return(t.displayName||"Context")+".Consumer";case vx:return(t._context.displayName||"Context")+".Provider";case Ag:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rg:return e=t.displayName||null,e!==null?e:Hf(t.type)||"Memo";case xi:e=t._payload,t=t._init;try{return Hf(t(e))}catch{}}return null}function JI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hf(e);case 8:return e===kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZI(t){var e=xx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jc(t){t._valueTracker||(t._valueTracker=ZI(t))}function Ex(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qf(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Iy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bx(t,e){e=e.checked,e!=null&&Cg(t,"checked",e,!1)}function Wf(t,e){bx(t,e);var n=Ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kf(t,e.type,Ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kf(t,e,n){(e!=="number"||Bu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qa=Array.isArray;function Co(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ky(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Qa(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ki(n)}}function Sx(t,e){var n=Ki(e.value),r=Ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ay(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $c,Ix=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eC=["Webkit","ms","Moz","O"];Object.keys(al).forEach(function(t){eC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),al[e]=al[t]})});function Cx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||al.hasOwnProperty(t)&&al[t]?(""+e).trim():e+"px"}function kx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tC=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yf(t,e){if(e){if(tC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Xf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jf=null;function Ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zf=null,ko=null,Ao=null;function Ry(t){if(t=lc(t)){if(typeof Zf!="function")throw Error(J(280));var e=t.stateNode;e&&(e=Kd(e),Zf(t.stateNode,t.type,e))}}function Ax(t){ko?Ao?Ao.push(t):Ao=[t]:ko=t}function Rx(){if(ko){var t=ko,e=Ao;if(Ao=ko=null,Ry(t),e)for(t=0;t<e.length;t++)Ry(e[t])}}function Nx(t,e){return t(e)}function Px(){}var $h=!1;function Dx(t,e,n){if($h)return t(e,n);$h=!0;try{return Nx(t,e,n)}finally{$h=!1,(ko!==null||Ao!==null)&&(Px(),Rx())}}function Sl(t,e){var n=t.stateNode;if(n===null)return null;var r=Kd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var ep=!1;if(Xr)try{var La={};Object.defineProperty(La,"passive",{get:function(){ep=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{ep=!1}function nC(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var ll=!1,Hu=null,qu=!1,tp=null,rC={onError:function(t){ll=!0,Hu=t}};function iC(t,e,n,r,i,s,o,a,l){ll=!1,Hu=null,nC.apply(rC,arguments)}function sC(t,e,n,r,i,s,o,a,l){if(iC.apply(this,arguments),ll){if(ll){var u=Hu;ll=!1,Hu=null}else throw Error(J(198));qu||(qu=!0,tp=u)}}function Us(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ny(t){if(Us(t)!==t)throw Error(J(188))}function oC(t){var e=t.alternate;if(!e){if(e=Us(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ny(i),t;if(s===r)return Ny(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function Lx(t){return t=oC(t),t!==null?Ox(t):null}function Ox(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ox(t);if(e!==null)return e;t=t.sibling}return null}var Vx=Tn.unstable_scheduleCallback,Py=Tn.unstable_cancelCallback,aC=Tn.unstable_shouldYield,lC=Tn.unstable_requestPaint,at=Tn.unstable_now,cC=Tn.unstable_getCurrentPriorityLevel,Pg=Tn.unstable_ImmediatePriority,Mx=Tn.unstable_UserBlockingPriority,Wu=Tn.unstable_NormalPriority,uC=Tn.unstable_LowPriority,jx=Tn.unstable_IdlePriority,Bd=null,pr=null;function dC(t){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(Bd,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:pC,hC=Math.log,fC=Math.LN2;function pC(t){return t>>>=0,t===0?32:31-(hC(t)/fC|0)|0}var Fc=64,Uc=4194304;function Ya(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ya(a):(s&=o,s!==0&&(r=Ya(s)))}else o=n&~i,o!==0?r=Ya(o):s!==0&&(r=Ya(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),i=1<<n,r|=t[n],e&=~i;return r}function gC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=gC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function np(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $x(){var t=Fc;return Fc<<=1,!(Fc&4194240)&&(Fc=64),t}function Fh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function yC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Dg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Oe=0;function Fx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ux,zg,Bx,Hx,qx,rp=!1,Bc=[],zi=null,Li=null,Oi=null,Tl=new Map,Il=new Map,Ti=[],vC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dy(t,e){switch(t){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":Tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(e.pointerId)}}function Oa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lc(e),e!==null&&zg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wC(t,e,n,r,i){switch(e){case"focusin":return zi=Oa(zi,t,e,n,r,i),!0;case"dragenter":return Li=Oa(Li,t,e,n,r,i),!0;case"mouseover":return Oi=Oa(Oi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Tl.set(s,Oa(Tl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Il.set(s,Oa(Il.get(s)||null,t,e,n,r,i)),!0}return!1}function Wx(t){var e=ps(t.target);if(e!==null){var n=Us(e);if(n!==null){if(e=n.tag,e===13){if(e=zx(n),e!==null){t.blockedOn=e,qx(t.priority,function(){Bx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ip(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jf=r,n.target.dispatchEvent(r),Jf=null}else return e=lc(n),e!==null&&zg(e),t.blockedOn=n,!1;e.shift()}return!0}function zy(t,e,n){_u(t)&&n.delete(e)}function _C(){rp=!1,zi!==null&&_u(zi)&&(zi=null),Li!==null&&_u(Li)&&(Li=null),Oi!==null&&_u(Oi)&&(Oi=null),Tl.forEach(zy),Il.forEach(zy)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,rp||(rp=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,_C)))}function Cl(t){function e(i){return Va(i,t)}if(0<Bc.length){Va(Bc[0],t);for(var n=1;n<Bc.length;n++){var r=Bc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zi!==null&&Va(zi,t),Li!==null&&Va(Li,t),Oi!==null&&Va(Oi,t),Tl.forEach(e),Il.forEach(e),n=0;n<Ti.length;n++)r=Ti[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ti.length&&(n=Ti[0],n.blockedOn===null);)Wx(n),n.blockedOn===null&&Ti.shift()}var Ro=ai.ReactCurrentBatchConfig,Gu=!0;function xC(t,e,n,r){var i=Oe,s=Ro.transition;Ro.transition=null;try{Oe=1,Lg(t,e,n,r)}finally{Oe=i,Ro.transition=s}}function EC(t,e,n,r){var i=Oe,s=Ro.transition;Ro.transition=null;try{Oe=4,Lg(t,e,n,r)}finally{Oe=i,Ro.transition=s}}function Lg(t,e,n,r){if(Gu){var i=ip(t,e,n,r);if(i===null)Xh(t,e,r,Qu,n),Dy(t,r);else if(wC(i,t,e,n,r))r.stopPropagation();else if(Dy(t,r),e&4&&-1<vC.indexOf(t)){for(;i!==null;){var s=lc(i);if(s!==null&&Ux(s),s=ip(t,e,n,r),s===null&&Xh(t,e,r,Qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xh(t,e,r,null,n)}}var Qu=null;function ip(t,e,n,r){if(Qu=null,t=Ng(r),t=ps(t),t!==null)if(e=Us(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function Kx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cC()){case Pg:return 1;case Mx:return 4;case Wu:case uC:return 16;case jx:return 536870912;default:return 16}default:return 16}}var Ni=null,Og=null,xu=null;function Gx(){if(xu)return xu;var t,e=Og,n=e.length,r,i="value"in Ni?Ni.value:Ni.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return xu=i.slice(t,1<r?1-r:void 0)}function Eu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hc(){return!0}function Ly(){return!1}function kn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hc:Ly,this.isPropagationStopped=Ly,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hc)},persist:function(){},isPersistent:Hc}),e}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vg=kn(la),ac=Xe({},la,{view:0,detail:0}),bC=kn(ac),Uh,Bh,Ma,Hd=Xe({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ma&&(Ma&&t.type==="mousemove"?(Uh=t.screenX-Ma.screenX,Bh=t.screenY-Ma.screenY):Bh=Uh=0,Ma=t),Uh)},movementY:function(t){return"movementY"in t?t.movementY:Bh}}),Oy=kn(Hd),SC=Xe({},Hd,{dataTransfer:0}),TC=kn(SC),IC=Xe({},ac,{relatedTarget:0}),Hh=kn(IC),CC=Xe({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),kC=kn(CC),AC=Xe({},la,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RC=kn(AC),NC=Xe({},la,{data:0}),Vy=kn(NC),PC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zC[t])?!!e[t]:!1}function Mg(){return LC}var OC=Xe({},ac,{key:function(t){if(t.key){var e=PC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mg,charCode:function(t){return t.type==="keypress"?Eu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VC=kn(OC),MC=Xe({},Hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),My=kn(MC),jC=Xe({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mg}),$C=kn(jC),FC=Xe({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),UC=kn(FC),BC=Xe({},Hd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HC=kn(BC),qC=[9,13,27,32],jg=Xr&&"CompositionEvent"in window,cl=null;Xr&&"documentMode"in document&&(cl=document.documentMode);var WC=Xr&&"TextEvent"in window&&!cl,Qx=Xr&&(!jg||cl&&8<cl&&11>=cl),jy=" ",$y=!1;function Yx(t,e){switch(t){case"keyup":return qC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mo=!1;function KC(t,e){switch(t){case"compositionend":return Xx(e);case"keypress":return e.which!==32?null:($y=!0,jy);case"textInput":return t=e.data,t===jy&&$y?null:t;default:return null}}function GC(t,e){if(mo)return t==="compositionend"||!jg&&Yx(t,e)?(t=Gx(),xu=Og=Ni=null,mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qx&&e.locale!=="ko"?null:e.data;default:return null}}var QC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QC[t.type]:e==="textarea"}function Jx(t,e,n,r){Ax(r),e=Yu(e,"onChange"),0<e.length&&(n=new Vg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ul=null,kl=null;function YC(t){c1(t,0)}function qd(t){var e=wo(t);if(Ex(e))return t}function XC(t,e){if(t==="change")return e}var Zx=!1;if(Xr){var qh;if(Xr){var Wh="oninput"in document;if(!Wh){var Uy=document.createElement("div");Uy.setAttribute("oninput","return;"),Wh=typeof Uy.oninput=="function"}qh=Wh}else qh=!1;Zx=qh&&(!document.documentMode||9<document.documentMode)}function By(){ul&&(ul.detachEvent("onpropertychange",e1),kl=ul=null)}function e1(t){if(t.propertyName==="value"&&qd(kl)){var e=[];Jx(e,kl,t,Ng(t)),Dx(YC,e)}}function JC(t,e,n){t==="focusin"?(By(),ul=e,kl=n,ul.attachEvent("onpropertychange",e1)):t==="focusout"&&By()}function ZC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qd(kl)}function ek(t,e){if(t==="click")return qd(e)}function tk(t,e){if(t==="input"||t==="change")return qd(e)}function nk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:nk;function Al(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$f.call(e,i)||!rr(t[i],e[i]))return!1}return!0}function Hy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qy(t,e){var n=Hy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hy(n)}}function t1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?t1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function n1(){for(var t=window,e=Bu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bu(t.document)}return e}function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rk(t){var e=n1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&t1(n.ownerDocument.documentElement,n)){if(r!==null&&$g(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=qy(n,s);var o=qy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ik=Xr&&"documentMode"in document&&11>=document.documentMode,yo=null,sp=null,dl=null,op=!1;function Wy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;op||yo==null||yo!==Bu(r)||(r=yo,"selectionStart"in r&&$g(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&Al(dl,r)||(dl=r,r=Yu(sp,"onSelect"),0<r.length&&(e=new Vg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yo)))}function qc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vo={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},Kh={},r1={};Xr&&(r1=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Wd(t){if(Kh[t])return Kh[t];if(!vo[t])return t;var e=vo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in r1)return Kh[t]=e[n];return t}var i1=Wd("animationend"),s1=Wd("animationiteration"),o1=Wd("animationstart"),a1=Wd("transitionend"),l1=new Map,Ky="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){l1.set(t,e),Fs(e,[t])}for(var Gh=0;Gh<Ky.length;Gh++){var Qh=Ky[Gh],sk=Qh.toLowerCase(),ok=Qh[0].toUpperCase()+Qh.slice(1);es(sk,"on"+ok)}es(i1,"onAnimationEnd");es(s1,"onAnimationIteration");es(o1,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(a1,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ak=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xa));function Gy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sC(r,e,void 0,t),t.currentTarget=null}function c1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Gy(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Gy(i,a,u),s=l}}}if(qu)throw t=tp,qu=!1,tp=null,t}function He(t,e){var n=e[dp];n===void 0&&(n=e[dp]=new Set);var r=t+"__bubble";n.has(r)||(u1(e,t,2,!1),n.add(r))}function Yh(t,e,n){var r=0;e&&(r|=4),u1(n,t,r,e)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function Rl(t){if(!t[Wc]){t[Wc]=!0,yx.forEach(function(n){n!=="selectionchange"&&(ak.has(n)||Yh(n,!1,t),Yh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wc]||(e[Wc]=!0,Yh("selectionchange",!1,e))}}function u1(t,e,n,r){switch(Kx(e)){case 1:var i=xC;break;case 4:i=EC;break;default:i=Lg}n=i.bind(null,e,n,t),i=void 0,!ep||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ps(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Dx(function(){var u=s,d=Ng(n),h=[];e:{var f=l1.get(t);if(f!==void 0){var m=Vg,b=t;switch(t){case"keypress":if(Eu(n)===0)break e;case"keydown":case"keyup":m=VC;break;case"focusin":b="focus",m=Hh;break;case"focusout":b="blur",m=Hh;break;case"beforeblur":case"afterblur":m=Hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=TC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$C;break;case i1:case s1:case o1:m=kC;break;case a1:m=UC;break;case"scroll":m=bC;break;case"wheel":m=HC;break;case"copy":case"cut":case"paste":m=RC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=My}var S=(e&4)!==0,P=!S&&t==="scroll",y=S?f!==null?f+"Capture":null:f;S=[];for(var v=u,T;v!==null;){T=v;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,y!==null&&(R=Sl(v,y),R!=null&&S.push(Nl(v,R,T)))),P)break;v=v.return}0<S.length&&(f=new m(f,b,null,n,d),h.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Jf&&(b=n.relatedTarget||n.fromElement)&&(ps(b)||b[Jr]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=u,b=b?ps(b):null,b!==null&&(P=Us(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=u),m!==b)){if(S=Oy,R="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(S=My,R="onPointerLeave",y="onPointerEnter",v="pointer"),P=m==null?f:wo(m),T=b==null?f:wo(b),f=new S(R,v+"leave",m,n,d),f.target=P,f.relatedTarget=T,R=null,ps(d)===u&&(S=new S(y,v+"enter",b,n,d),S.target=T,S.relatedTarget=P,R=S),P=R,m&&b)t:{for(S=m,y=b,v=0,T=S;T;T=no(T))v++;for(T=0,R=y;R;R=no(R))T++;for(;0<v-T;)S=no(S),v--;for(;0<T-v;)y=no(y),T--;for(;v--;){if(S===y||y!==null&&S===y.alternate)break t;S=no(S),y=no(y)}S=null}else S=null;m!==null&&Qy(h,f,m,S,!1),b!==null&&P!==null&&Qy(h,P,b,S,!0)}}e:{if(f=u?wo(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var L=XC;else if(Fy(f))if(Zx)L=tk;else{L=ZC;var V=JC}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=ek);if(L&&(L=L(t,u))){Jx(h,L,n,d);break e}V&&V(t,f,u),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&Kf(f,"number",f.value)}switch(V=u?wo(u):window,t){case"focusin":(Fy(V)||V.contentEditable==="true")&&(yo=V,sp=u,dl=null);break;case"focusout":dl=sp=yo=null;break;case"mousedown":op=!0;break;case"contextmenu":case"mouseup":case"dragend":op=!1,Wy(h,n,d);break;case"selectionchange":if(ik)break;case"keydown":case"keyup":Wy(h,n,d)}var I;if(jg)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else mo?Yx(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Qx&&n.locale!=="ko"&&(mo||E!=="onCompositionStart"?E==="onCompositionEnd"&&mo&&(I=Gx()):(Ni=d,Og="value"in Ni?Ni.value:Ni.textContent,mo=!0)),V=Yu(u,E),0<V.length&&(E=new Vy(E,t,null,n,d),h.push({event:E,listeners:V}),I?E.data=I:(I=Xx(n),I!==null&&(E.data=I)))),(I=WC?KC(t,n):GC(t,n))&&(u=Yu(u,"onBeforeInput"),0<u.length&&(d=new Vy("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=I))}c1(h,e)})}function Nl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sl(t,n),s!=null&&r.unshift(Nl(t,s,i)),s=Sl(t,e),s!=null&&r.push(Nl(t,s,i))),t=t.return}return r}function no(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Sl(n,s),l!=null&&o.unshift(Nl(n,l,a))):i||(l=Sl(n,s),l!=null&&o.push(Nl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lk=/\r\n?/g,ck=/\u0000|\uFFFD/g;function Yy(t){return(typeof t=="string"?t:""+t).replace(lk,`
`).replace(ck,"")}function Kc(t,e,n){if(e=Yy(e),Yy(t)!==e&&n)throw Error(J(425))}function Xu(){}var ap=null,lp=null;function cp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var up=typeof setTimeout=="function"?setTimeout:void 0,uk=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,dk=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(t){return Xy.resolve(null).then(t).catch(hk)}:up;function hk(t){setTimeout(function(){throw t})}function Jh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cl(e)}function Vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ca=Math.random().toString(36).slice(2),fr="__reactFiber$"+ca,Pl="__reactProps$"+ca,Jr="__reactContainer$"+ca,dp="__reactEvents$"+ca,fk="__reactListeners$"+ca,pk="__reactHandles$"+ca;function ps(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jr]||n[fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jy(t);t!==null;){if(n=t[fr])return n;t=Jy(t)}return e}t=n,n=t.parentNode}return null}function lc(t){return t=t[fr]||t[Jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function Kd(t){return t[Pl]||null}var hp=[],_o=-1;function ts(t){return{current:t}}function We(t){0>_o||(t.current=hp[_o],hp[_o]=null,_o--)}function Ue(t,e){_o++,hp[_o]=t.current,t.current=e}var Gi={},Wt=ts(Gi),on=ts(!1),Cs=Gi;function Uo(t,e){var n=t.type.contextTypes;if(!n)return Gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function an(t){return t=t.childContextTypes,t!=null}function Ju(){We(on),We(Wt)}function Zy(t,e,n){if(Wt.current!==Gi)throw Error(J(168));Ue(Wt,e),Ue(on,n)}function d1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,JI(t)||"Unknown",i));return Xe({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,Cs=Wt.current,Ue(Wt,t),Ue(on,on.current),!0}function ev(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=d1(t,e,Cs),r.__reactInternalMemoizedMergedChildContext=t,We(on),We(Wt),Ue(Wt,t)):We(on),Ue(on,n)}var jr=null,Gd=!1,Zh=!1;function h1(t){jr===null?jr=[t]:jr.push(t)}function gk(t){Gd=!0,h1(t)}function ns(){if(!Zh&&jr!==null){Zh=!0;var t=0,e=Oe;try{var n=jr;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jr=null,Gd=!1}catch(i){throw jr!==null&&(jr=jr.slice(t+1)),Vx(Pg,ns),i}finally{Oe=e,Zh=!1}}return null}var xo=[],Eo=0,ed=null,td=0,Rn=[],Nn=0,ks=null,Fr=1,Ur="";function us(t,e){xo[Eo++]=td,xo[Eo++]=ed,ed=t,td=e}function f1(t,e,n){Rn[Nn++]=Fr,Rn[Nn++]=Ur,Rn[Nn++]=ks,ks=t;var r=Fr;t=Ur;var i=32-Zn(r)-1;r&=~(1<<i),n+=1;var s=32-Zn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fr=1<<32-Zn(e)+i|n<<i|r,Ur=s+t}else Fr=1<<s|n<<i|r,Ur=t}function Fg(t){t.return!==null&&(us(t,1),f1(t,1,0))}function Ug(t){for(;t===ed;)ed=xo[--Eo],xo[Eo]=null,td=xo[--Eo],xo[Eo]=null;for(;t===ks;)ks=Rn[--Nn],Rn[Nn]=null,Ur=Rn[--Nn],Rn[Nn]=null,Fr=Rn[--Nn],Rn[Nn]=null}var bn=null,En=null,Ge=!1,Qn=null;function p1(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,En=Vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:Fr,overflow:Ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,En=null,!0):!1;default:return!1}}function fp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pp(t){if(Ge){var e=En;if(e){var n=e;if(!tv(t,e)){if(fp(t))throw Error(J(418));e=Vi(n.nextSibling);var r=bn;e&&tv(t,e)?p1(r,n):(t.flags=t.flags&-4097|2,Ge=!1,bn=t)}}else{if(fp(t))throw Error(J(418));t.flags=t.flags&-4097|2,Ge=!1,bn=t}}}function nv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function Gc(t){if(t!==bn)return!1;if(!Ge)return nv(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cp(t.type,t.memoizedProps)),e&&(e=En)){if(fp(t))throw g1(),Error(J(418));for(;e;)p1(t,e),e=Vi(e.nextSibling)}if(nv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=Vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=bn?Vi(t.stateNode.nextSibling):null;return!0}function g1(){for(var t=En;t;)t=Vi(t.nextSibling)}function Bo(){En=bn=null,Ge=!1}function Bg(t){Qn===null?Qn=[t]:Qn.push(t)}var mk=ai.ReactCurrentBatchConfig;function ja(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Qc(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rv(t){var e=t._init;return e(t._payload)}function m1(t){function e(y,v){if(t){var T=y.deletions;T===null?(y.deletions=[v],y.flags|=16):T.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Fi(y,v),y.index=0,y.sibling=null,y}function s(y,v,T){return y.index=T,t?(T=y.alternate,T!==null?(T=T.index,T<v?(y.flags|=2,v):T):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,T,R){return v===null||v.tag!==6?(v=af(T,y.mode,R),v.return=y,v):(v=i(v,T),v.return=y,v)}function l(y,v,T,R){var L=T.type;return L===go?d(y,v,T.props.children,R,T.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xi&&rv(L)===v.type)?(R=i(v,T.props),R.ref=ja(y,v,T),R.return=y,R):(R=Au(T.type,T.key,T.props,null,y.mode,R),R.ref=ja(y,v,T),R.return=y,R)}function u(y,v,T,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=lf(T,y.mode,R),v.return=y,v):(v=i(v,T.children||[]),v.return=y,v)}function d(y,v,T,R,L){return v===null||v.tag!==7?(v=bs(T,y.mode,R,L),v.return=y,v):(v=i(v,T),v.return=y,v)}function h(y,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=af(""+v,y.mode,T),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Mc:return T=Au(v.type,v.key,v.props,null,y.mode,T),T.ref=ja(y,null,v),T.return=y,T;case po:return v=lf(v,y.mode,T),v.return=y,v;case xi:var R=v._init;return h(y,R(v._payload),T)}if(Qa(v)||za(v))return v=bs(v,y.mode,T,null),v.return=y,v;Qc(y,v)}return null}function f(y,v,T,R){var L=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:a(y,v,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Mc:return T.key===L?l(y,v,T,R):null;case po:return T.key===L?u(y,v,T,R):null;case xi:return L=T._init,f(y,v,L(T._payload),R)}if(Qa(T)||za(T))return L!==null?null:d(y,v,T,R,null);Qc(y,T)}return null}function m(y,v,T,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(T)||null,a(v,y,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Mc:return y=y.get(R.key===null?T:R.key)||null,l(v,y,R,L);case po:return y=y.get(R.key===null?T:R.key)||null,u(v,y,R,L);case xi:var V=R._init;return m(y,v,T,V(R._payload),L)}if(Qa(R)||za(R))return y=y.get(T)||null,d(v,y,R,L,null);Qc(v,R)}return null}function b(y,v,T,R){for(var L=null,V=null,I=v,E=v=0,_=null;I!==null&&E<T.length;E++){I.index>E?(_=I,I=null):_=I.sibling;var x=f(y,I,T[E],R);if(x===null){I===null&&(I=_);break}t&&I&&x.alternate===null&&e(y,I),v=s(x,v,E),V===null?L=x:V.sibling=x,V=x,I=_}if(E===T.length)return n(y,I),Ge&&us(y,E),L;if(I===null){for(;E<T.length;E++)I=h(y,T[E],R),I!==null&&(v=s(I,v,E),V===null?L=I:V.sibling=I,V=I);return Ge&&us(y,E),L}for(I=r(y,I);E<T.length;E++)_=m(I,y,E,T[E],R),_!==null&&(t&&_.alternate!==null&&I.delete(_.key===null?E:_.key),v=s(_,v,E),V===null?L=_:V.sibling=_,V=_);return t&&I.forEach(function(C){return e(y,C)}),Ge&&us(y,E),L}function S(y,v,T,R){var L=za(T);if(typeof L!="function")throw Error(J(150));if(T=L.call(T),T==null)throw Error(J(151));for(var V=L=null,I=v,E=v=0,_=null,x=T.next();I!==null&&!x.done;E++,x=T.next()){I.index>E?(_=I,I=null):_=I.sibling;var C=f(y,I,x.value,R);if(C===null){I===null&&(I=_);break}t&&I&&C.alternate===null&&e(y,I),v=s(C,v,E),V===null?L=C:V.sibling=C,V=C,I=_}if(x.done)return n(y,I),Ge&&us(y,E),L;if(I===null){for(;!x.done;E++,x=T.next())x=h(y,x.value,R),x!==null&&(v=s(x,v,E),V===null?L=x:V.sibling=x,V=x);return Ge&&us(y,E),L}for(I=r(y,I);!x.done;E++,x=T.next())x=m(I,y,E,x.value,R),x!==null&&(t&&x.alternate!==null&&I.delete(x.key===null?E:x.key),v=s(x,v,E),V===null?L=x:V.sibling=x,V=x);return t&&I.forEach(function(A){return e(y,A)}),Ge&&us(y,E),L}function P(y,v,T,R){if(typeof T=="object"&&T!==null&&T.type===go&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Mc:e:{for(var L=T.key,V=v;V!==null;){if(V.key===L){if(L=T.type,L===go){if(V.tag===7){n(y,V.sibling),v=i(V,T.props.children),v.return=y,y=v;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xi&&rv(L)===V.type){n(y,V.sibling),v=i(V,T.props),v.ref=ja(y,V,T),v.return=y,y=v;break e}n(y,V);break}else e(y,V);V=V.sibling}T.type===go?(v=bs(T.props.children,y.mode,R,T.key),v.return=y,y=v):(R=Au(T.type,T.key,T.props,null,y.mode,R),R.ref=ja(y,v,T),R.return=y,y=R)}return o(y);case po:e:{for(V=T.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(y,v.sibling),v=i(v,T.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=lf(T,y.mode,R),v.return=y,y=v}return o(y);case xi:return V=T._init,P(y,v,V(T._payload),R)}if(Qa(T))return b(y,v,T,R);if(za(T))return S(y,v,T,R);Qc(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,T),v.return=y,y=v):(n(y,v),v=af(T,y.mode,R),v.return=y,y=v),o(y)):n(y,v)}return P}var Ho=m1(!0),y1=m1(!1),nd=ts(null),rd=null,bo=null,Hg=null;function qg(){Hg=bo=rd=null}function Wg(t){var e=nd.current;We(nd),t._currentValue=e}function gp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function No(t,e){rd=t,Hg=bo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rn=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Hg!==t)if(t={context:t,memoizedValue:e,next:null},bo===null){if(rd===null)throw Error(J(308));bo=t,rd.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var gs=null;function Kg(t){gs===null?gs=[t]:gs.push(t)}function v1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Kg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zr(t,r)}function Zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ei=!1;function Gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zr(t,n)}return i=r.interleaved,i===null?(e.next=e,Kg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zr(t,n)}function bu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dg(t,n)}}function iv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,r){var i=t.updateQueue;Ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,S=a;switch(f=e,m=n,S.tag){case 1:if(b=S.payload,typeof b=="function"){h=b.call(m,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=S.payload,f=typeof b=="function"?b.call(m,h,f):b,f==null)break e;h=Xe({},h,f);break e;case 2:Ei=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rs|=o,t.lanes=o,t.memoizedState=h}}function sv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var cc={},gr=ts(cc),Dl=ts(cc),zl=ts(cc);function ms(t){if(t===cc)throw Error(J(174));return t}function Qg(t,e){switch(Ue(zl,e),Ue(Dl,t),Ue(gr,cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qf(e,t)}We(gr),Ue(gr,e)}function qo(){We(gr),We(Dl),We(zl)}function _1(t){ms(zl.current);var e=ms(gr.current),n=Qf(e,t.type);e!==n&&(Ue(Dl,t),Ue(gr,n))}function Yg(t){Dl.current===t&&(We(gr),We(Dl))}var Qe=ts(0);function sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ef=[];function Xg(){for(var t=0;t<ef.length;t++)ef[t]._workInProgressVersionPrimary=null;ef.length=0}var Su=ai.ReactCurrentDispatcher,tf=ai.ReactCurrentBatchConfig,As=0,Ye=null,gt=null,Et=null,od=!1,hl=!1,Ll=0,yk=0;function $t(){throw Error(J(321))}function Jg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function Zg(t,e,n,r,i,s){if(As=s,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Su.current=t===null||t.memoizedState===null?xk:Ek,t=n(r,i),hl){s=0;do{if(hl=!1,Ll=0,25<=s)throw Error(J(301));s+=1,Et=gt=null,e.updateQueue=null,Su.current=bk,t=n(r,i)}while(hl)}if(Su.current=ad,e=gt!==null&&gt.next!==null,As=0,Et=gt=Ye=null,od=!1,e)throw Error(J(300));return t}function em(){var t=Ll!==0;return Ll=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ye.memoizedState=Et=t:Et=Et.next=t,Et}function Mn(){if(gt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=Et===null?Ye.memoizedState:Et.next;if(e!==null)Et=e,gt=t;else{if(t===null)throw Error(J(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Et===null?Ye.memoizedState=Et=t:Et=Et.next=t}return Et}function Ol(t,e){return typeof e=="function"?e(t):e}function nf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=gt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((As&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ye.lanes|=d,Rs|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,rr(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ye.lanes|=s,Rs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);rr(s,e.memoizedState)||(rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function x1(){}function E1(t,e){var n=Ye,r=Mn(),i=e(),s=!rr(r.memoizedState,i);if(s&&(r.memoizedState=i,rn=!0),r=r.queue,tm(T1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Vl(9,S1.bind(null,n,r,i,e),void 0,null),bt===null)throw Error(J(349));As&30||b1(n,e,i)}return i}function b1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function S1(t,e,n,r){e.value=n,e.getSnapshot=r,I1(e)&&C1(t)}function T1(t,e,n){return n(function(){I1(e)&&C1(t)})}function I1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function C1(t){var e=Zr(t,1);e!==null&&er(e,t,1,-1)}function ov(t){var e=hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:t},e.queue=t,t=t.dispatch=_k.bind(null,Ye,t),[e.memoizedState,t]}function Vl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function k1(){return Mn().memoizedState}function Tu(t,e,n,r){var i=hr();Ye.flags|=t,i.memoizedState=Vl(1|e,n,void 0,r===void 0?null:r)}function Qd(t,e,n,r){var i=Mn();r=r===void 0?null:r;var s=void 0;if(gt!==null){var o=gt.memoizedState;if(s=o.destroy,r!==null&&Jg(r,o.deps)){i.memoizedState=Vl(e,n,s,r);return}}Ye.flags|=t,i.memoizedState=Vl(1|e,n,s,r)}function av(t,e){return Tu(8390656,8,t,e)}function tm(t,e){return Qd(2048,8,t,e)}function A1(t,e){return Qd(4,2,t,e)}function R1(t,e){return Qd(4,4,t,e)}function N1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P1(t,e,n){return n=n!=null?n.concat([t]):null,Qd(4,4,N1.bind(null,e,t),n)}function nm(){}function D1(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z1(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function L1(t,e,n){return As&21?(rr(n,e)||(n=$x(),Ye.lanes|=n,Rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=n)}function vk(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=tf.transition;tf.transition={};try{t(!1),e()}finally{Oe=n,tf.transition=r}}function O1(){return Mn().memoizedState}function wk(t,e,n){var r=$i(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},V1(t))M1(e,n);else if(n=v1(t,e,n,r),n!==null){var i=Xt();er(n,t,r,i),j1(n,e,r)}}function _k(t,e,n){var r=$i(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(V1(t))M1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,rr(a,o)){var l=e.interleaved;l===null?(i.next=i,Kg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=v1(t,e,i,r),n!==null&&(i=Xt(),er(n,t,r,i),j1(n,e,r))}}function V1(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function M1(t,e){hl=od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function j1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dg(t,n)}}var ad={readContext:Vn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},xk={readContext:Vn,useCallback:function(t,e){return hr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:av,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tu(4194308,4,N1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tu(4,2,t,e)},useMemo:function(t,e){var n=hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wk.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=hr();return t={current:t},e.memoizedState=t},useState:ov,useDebugValue:nm,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=ov(!1),e=t[0];return t=vk.bind(null,t[1]),hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,i=hr();if(Ge){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),bt===null)throw Error(J(349));As&30||b1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,av(T1.bind(null,r,s,t),[t]),r.flags|=2048,Vl(9,S1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=hr(),e=bt.identifierPrefix;if(Ge){var n=Ur,r=Fr;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ll++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ek={readContext:Vn,useCallback:D1,useContext:Vn,useEffect:tm,useImperativeHandle:P1,useInsertionEffect:A1,useLayoutEffect:R1,useMemo:z1,useReducer:nf,useRef:k1,useState:function(){return nf(Ol)},useDebugValue:nm,useDeferredValue:function(t){var e=Mn();return L1(e,gt.memoizedState,t)},useTransition:function(){var t=nf(Ol)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:x1,useSyncExternalStore:E1,useId:O1,unstable_isNewReconciler:!1},bk={readContext:Vn,useCallback:D1,useContext:Vn,useEffect:tm,useImperativeHandle:P1,useInsertionEffect:A1,useLayoutEffect:R1,useMemo:z1,useReducer:rf,useRef:k1,useState:function(){return rf(Ol)},useDebugValue:nm,useDeferredValue:function(t){var e=Mn();return gt===null?e.memoizedState=t:L1(e,gt.memoizedState,t)},useTransition:function(){var t=rf(Ol)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:x1,useSyncExternalStore:E1,useId:O1,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yd={isMounted:function(t){return(t=t._reactInternals)?Us(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=$i(t),s=Kr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mi(t,s,i),e!==null&&(er(e,t,i,r),bu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=$i(t),s=Kr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mi(t,s,i),e!==null&&(er(e,t,i,r),bu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=$i(t),i=Kr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mi(t,i,r),e!==null&&(er(e,t,r,n),bu(e,t,r))}};function lv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Al(n,r)||!Al(i,s):!0}function $1(t,e,n){var r=!1,i=Gi,s=e.contextType;return typeof s=="object"&&s!==null?s=Vn(s):(i=an(e)?Cs:Wt.current,r=e.contextTypes,s=(r=r!=null)?Uo(t,i):Gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function cv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yd.enqueueReplaceState(e,e.state,null)}function yp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Gg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vn(s):(s=an(e)?Cs:Wt.current,i.context=Uo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(mp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yd.enqueueReplaceState(i,i.state,null),id(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wo(t,e){try{var n="",r=e;do n+=XI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function sf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sk=typeof WeakMap=="function"?WeakMap:Map;function F1(t,e,n){n=Kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cd||(cd=!0,kp=r),vp(t,e)},n}function U1(t,e,n){n=Kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vp(t,e),typeof r!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Mk.bind(null,t,e,n),e.then(t,t))}function dv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kr(-1,1),e.tag=2,Mi(n,e,1))),n.lanes|=1),t)}var Tk=ai.ReactCurrentOwner,rn=!1;function Yt(t,e,n,r){e.child=t===null?y1(e,null,n,r):Ho(e,t.child,n,r)}function fv(t,e,n,r,i){n=n.render;var s=e.ref;return No(e,i),r=Zg(t,e,n,r,s,i),n=em(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ei(t,e,i)):(Ge&&n&&Fg(e),e.flags|=1,Yt(t,e,r,i),e.child)}function pv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!um(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,B1(t,e,s,r,i)):(t=Au(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Al,n(o,r)&&t.ref===e.ref)return ei(t,e,i)}return e.flags|=1,t=Fi(s,r),t.ref=e.ref,t.return=e,e.child=t}function B1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Al(s,r)&&t.ref===e.ref)if(rn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(rn=!0);else return e.lanes=t.lanes,ei(t,e,i)}return wp(t,e,n,r,i)}function H1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(To,wn),wn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(To,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ue(To,wn),wn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ue(To,wn),wn|=r;return Yt(t,e,i,n),e.child}function q1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wp(t,e,n,r,i){var s=an(n)?Cs:Wt.current;return s=Uo(e,s),No(e,i),n=Zg(t,e,n,r,s,i),r=em(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ei(t,e,i)):(Ge&&r&&Fg(e),e.flags|=1,Yt(t,e,n,i),e.child)}function gv(t,e,n,r,i){if(an(n)){var s=!0;Zu(e)}else s=!1;if(No(e,i),e.stateNode===null)Iu(t,e),$1(e,n,r),yp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vn(u):(u=an(n)?Cs:Wt.current,u=Uo(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&cv(e,o,r,u),Ei=!1;var f=e.memoizedState;o.state=f,id(e,r,o,i),l=e.memoizedState,a!==r||f!==l||on.current||Ei?(typeof d=="function"&&(mp(e,n,d,r),l=e.memoizedState),(a=Ei||lv(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,w1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Wn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vn(l):(l=an(n)?Cs:Wt.current,l=Uo(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&cv(e,o,r,l),Ei=!1,f=e.memoizedState,o.state=f,id(e,r,o,i);var b=e.memoizedState;a!==h||f!==b||on.current||Ei?(typeof m=="function"&&(mp(e,n,m,r),b=e.memoizedState),(u=Ei||lv(e,n,u,r,f,b,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return _p(t,e,n,r,s,i)}function _p(t,e,n,r,i,s){q1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ev(e,n,!1),ei(t,e,s);r=e.stateNode,Tk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ho(e,t.child,null,s),e.child=Ho(e,null,a,s)):Yt(t,e,a,s),e.memoizedState=r.state,i&&ev(e,n,!0),e.child}function W1(t){var e=t.stateNode;e.pendingContext?Zy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zy(t,e.context,!1),Qg(t,e.containerInfo)}function mv(t,e,n,r,i){return Bo(),Bg(i),e.flags|=256,Yt(t,e,n,r),e.child}var xp={dehydrated:null,treeContext:null,retryLane:0};function Ep(t){return{baseLanes:t,cachePool:null,transitions:null}}function K1(t,e,n){var r=e.pendingProps,i=Qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ue(Qe,i&1),t===null)return pp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Zd(o,r,0,null),t=bs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ep(n),e.memoizedState=xp,t):rm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ik(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fi(a,s):(s=bs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ep(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xp,r}return s=t.child,t=s.sibling,r=Fi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rm(t,e){return e=Zd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yc(t,e,n,r){return r!==null&&Bg(r),Ho(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ik(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=sf(Error(J(422))),Yc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Zd({mode:"visible",children:r.children},i,0,null),s=bs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ho(e,t.child,null,o),e.child.memoizedState=Ep(o),e.memoizedState=xp,s);if(!(e.mode&1))return Yc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(J(419)),r=sf(s,r,void 0),Yc(t,e,o,r)}if(a=(o&t.childLanes)!==0,rn||a){if(r=bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zr(t,i),er(r,t,i,-1))}return cm(),r=sf(Error(J(421))),Yc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,En=Vi(i.nextSibling),bn=e,Ge=!0,Qn=null,t!==null&&(Rn[Nn++]=Fr,Rn[Nn++]=Ur,Rn[Nn++]=ks,Fr=t.id,Ur=t.overflow,ks=e),e=rm(e,r.children),e.flags|=4096,e)}function yv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gp(t.return,e,n)}function of(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function G1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Yt(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yv(t,n,e);else if(t.tag===19)yv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ue(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),of(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}of(e,!0,n,null,s);break;case"together":of(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Iu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ei(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ck(t,e,n){switch(e.tag){case 3:W1(e),Bo();break;case 5:_1(e);break;case 1:an(e.type)&&Zu(e);break;case 4:Qg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ue(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?K1(t,e,n):(Ue(Qe,Qe.current&1),t=ei(t,e,n),t!==null?t.sibling:null);Ue(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return G1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ue(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,H1(t,e,n)}return ei(t,e,n)}var Q1,bp,Y1,X1;Q1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bp=function(){};Y1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ms(gr.current);var s=null;switch(n){case"input":i=qf(t,i),r=qf(t,r),s=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),s=[];break;case"textarea":i=Gf(t,i),r=Gf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xu)}Yf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(El.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(El.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&He("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};X1=function(t,e,n,r){n!==r&&(e.flags|=4)};function $a(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kk(t,e,n){var r=e.pendingProps;switch(Ug(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return an(e.type)&&Ju(),Ft(e),null;case 3:return r=e.stateNode,qo(),We(on),We(Wt),Xg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(Np(Qn),Qn=null))),bp(t,e),Ft(e),null;case 5:Yg(e);var i=ms(zl.current);if(n=e.type,t!==null&&e.stateNode!=null)Y1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Ft(e),null}if(t=ms(gr.current),Gc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[fr]=e,r[Pl]=s,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(i=0;i<Xa.length;i++)He(Xa[i],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":Iy(r,s),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r);break;case"textarea":ky(r,s),He("invalid",r)}Yf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Kc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Kc(r.textContent,a,t),i=["children",""+a]):El.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":jc(r),Cy(r,s,!0);break;case"textarea":jc(r),Ay(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fr]=e,t[Pl]=r,Q1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xf(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xa.length;i++)He(Xa[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":Iy(t,r),i=qf(t,r),He("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),He("invalid",t);break;case"textarea":ky(t,r),i=Gf(t,r),He("invalid",t);break;default:i=r}Yf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?kx(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ix(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bl(t,l):typeof l=="number"&&bl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(El.hasOwnProperty(s)?l!=null&&s==="onScroll"&&He("scroll",t):l!=null&&Cg(t,s,l,o))}switch(n){case"input":jc(t),Cy(t,r,!1);break;case"textarea":jc(t),Ay(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ki(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Co(t,!!r.multiple,s,!1):r.defaultValue!=null&&Co(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)X1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=ms(zl.current),ms(gr.current),Gc(e)){if(r=e.stateNode,n=e.memoizedProps,r[fr]=e,(s=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:Kc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fr]=e,e.stateNode=r}return Ft(e),null;case 13:if(We(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&En!==null&&e.mode&1&&!(e.flags&128))g1(),Bo(),e.flags|=98560,s=!1;else if(s=Gc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[fr]=e}else Bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),s=!1}else Qn!==null&&(Np(Qn),Qn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?mt===0&&(mt=3):cm())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return qo(),bp(t,e),t===null&&Rl(e.stateNode.containerInfo),Ft(e),null;case 10:return Wg(e.type._context),Ft(e),null;case 17:return an(e.type)&&Ju(),Ft(e),null;case 19:if(We(Qe),s=e.memoizedState,s===null)return Ft(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$a(s,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sd(t),o!==null){for(e.flags|=128,$a(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(Qe,Qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&at()>Ko&&(e.flags|=128,r=!0,$a(s,!1),e.lanes=4194304)}else{if(!r)if(t=sd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$a(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ge)return Ft(e),null}else 2*at()-s.renderingStartTime>Ko&&n!==1073741824&&(e.flags|=128,r=!0,$a(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=at(),e.sibling=null,n=Qe.current,Ue(Qe,r?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return lm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function Ak(t,e){switch(Ug(e),e.tag){case 1:return an(e.type)&&Ju(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qo(),We(on),We(Wt),Xg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yg(e),null;case 13:if(We(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Qe),null;case 4:return qo(),null;case 10:return Wg(e.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var Xc=!1,Ht=!1,Rk=typeof WeakSet=="function"?WeakSet:Set,ie=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function Sp(t,e,n){try{n()}catch(r){tt(t,e,r)}}var vv=!1;function Nk(t,e){if(ap=Gu,t=n1(),$g(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lp={focusedElem:t,selectionRange:n},Gu=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var S=b.memoizedProps,P=b.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?S:Wn(e.type,S),P);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(R){tt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return b=vv,vv=!1,b}function fl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Sp(e,n,s)}i=i.next}while(i!==r)}}function Xd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function J1(t){var e=t.alternate;e!==null&&(t.alternate=null,J1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fr],delete e[Pl],delete e[dp],delete e[fk],delete e[pk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Z1(t){return t.tag===5||t.tag===3||t.tag===4}function wv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Z1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ip(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xu));else if(r!==4&&(t=t.child,t!==null))for(Ip(t,e,n),t=t.sibling;t!==null;)Ip(t,e,n),t=t.sibling}function Cp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Cp(t,e,n),t=t.sibling;t!==null;)Cp(t,e,n),t=t.sibling}var Rt=null,Kn=!1;function vi(t,e,n){for(n=n.child;n!==null;)eE(t,e,n),n=n.sibling}function eE(t,e,n){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(Bd,n)}catch{}switch(n.tag){case 5:Ht||So(n,e);case 6:var r=Rt,i=Kn;Rt=null,vi(t,e,n),Rt=r,Kn=i,Rt!==null&&(Kn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Kn?(t=Rt,n=n.stateNode,t.nodeType===8?Jh(t.parentNode,n):t.nodeType===1&&Jh(t,n),Cl(t)):Jh(Rt,n.stateNode));break;case 4:r=Rt,i=Kn,Rt=n.stateNode.containerInfo,Kn=!0,vi(t,e,n),Rt=r,Kn=i;break;case 0:case 11:case 14:case 15:if(!Ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Sp(n,e,o),i=i.next}while(i!==r)}vi(t,e,n);break;case 1:if(!Ht&&(So(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tt(n,e,a)}vi(t,e,n);break;case 21:vi(t,e,n);break;case 22:n.mode&1?(Ht=(r=Ht)||n.memoizedState!==null,vi(t,e,n),Ht=r):vi(t,e,n);break;default:vi(t,e,n)}}function _v(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Rk),e.forEach(function(r){var i=$k.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rt=a.stateNode,Kn=!1;break e;case 3:Rt=a.stateNode.containerInfo,Kn=!0;break e;case 4:Rt=a.stateNode.containerInfo,Kn=!0;break e}a=a.return}if(Rt===null)throw Error(J(160));eE(s,o,i),Rt=null,Kn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){tt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tE(e,t),e=e.sibling}function tE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),dr(t),r&4){try{fl(3,t,t.return),Xd(3,t)}catch(S){tt(t,t.return,S)}try{fl(5,t,t.return)}catch(S){tt(t,t.return,S)}}break;case 1:qn(e,t),dr(t),r&512&&n!==null&&So(n,n.return);break;case 5:if(qn(e,t),dr(t),r&512&&n!==null&&So(n,n.return),t.flags&32){var i=t.stateNode;try{bl(i,"")}catch(S){tt(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bx(i,s),Xf(a,o);var u=Xf(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?kx(i,h):d==="dangerouslySetInnerHTML"?Ix(i,h):d==="children"?bl(i,h):Cg(i,d,h,u)}switch(a){case"input":Wf(i,s);break;case"textarea":Sx(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Co(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Co(i,!!s.multiple,s.defaultValue,!0):Co(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pl]=s}catch(S){tt(t,t.return,S)}}break;case 6:if(qn(e,t),dr(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){tt(t,t.return,S)}}break;case 3:if(qn(e,t),dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(S){tt(t,t.return,S)}break;case 4:qn(e,t),dr(t);break;case 13:qn(e,t),dr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(om=at())),r&4&&_v(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(u=Ht)||d,qn(e,t),Ht=u):qn(e,t),dr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ie=t,d=t.child;d!==null;){for(h=ie=d;ie!==null;){switch(f=ie,m=f.child,f.tag){case 0:case 11:case 14:case 15:fl(4,f,f.return);break;case 1:So(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(S){tt(r,n,S)}}break;case 5:So(f,f.return);break;case 22:if(f.memoizedState!==null){Ev(h);continue}}m!==null?(m.return=f,ie=m):Ev(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Cx("display",o))}catch(S){tt(t,t.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(S){tt(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qn(e,t),dr(t),r&4&&_v(t);break;case 21:break;default:qn(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Z1(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bl(i,""),r.flags&=-33);var s=wv(t);Cp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=wv(t);Ip(t,a,o);break;default:throw Error(J(161))}}catch(l){tt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Pk(t,e,n){ie=t,nE(t)}function nE(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ht;a=Xc;var u=Ht;if(Xc=o,(Ht=l)&&!u)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?bv(i):l!==null?(l.return=o,ie=l):bv(i);for(;s!==null;)ie=s,nE(s),s=s.sibling;ie=i,Xc=a,Ht=u}xv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):xv(t)}}function xv(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||Xd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Cl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Ht||e.flags&512&&Tp(e)}catch(f){tt(e,e.return,f)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Ev(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function bv(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xd(4,e)}catch(l){tt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){tt(e,i,l)}}var s=e.return;try{Tp(e)}catch(l){tt(e,s,l)}break;case 5:var o=e.return;try{Tp(e)}catch(l){tt(e,o,l)}}}catch(l){tt(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var Dk=Math.ceil,ld=ai.ReactCurrentDispatcher,im=ai.ReactCurrentOwner,Ln=ai.ReactCurrentBatchConfig,Ae=0,bt=null,ut=null,Dt=0,wn=0,To=ts(0),mt=0,Ml=null,Rs=0,Jd=0,sm=0,pl=null,nn=null,om=0,Ko=1/0,Mr=null,cd=!1,kp=null,ji=null,Jc=!1,Pi=null,ud=0,gl=0,Ap=null,Cu=-1,ku=0;function Xt(){return Ae&6?at():Cu!==-1?Cu:Cu=at()}function $i(t){return t.mode&1?Ae&2&&Dt!==0?Dt&-Dt:mk.transition!==null?(ku===0&&(ku=$x()),ku):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:Kx(t.type)),t):1}function er(t,e,n,r){if(50<gl)throw gl=0,Ap=null,Error(J(185));oc(t,n,r),(!(Ae&2)||t!==bt)&&(t===bt&&(!(Ae&2)&&(Jd|=n),mt===4&&Ii(t,Dt)),ln(t,r),n===1&&Ae===0&&!(e.mode&1)&&(Ko=at()+500,Gd&&ns()))}function ln(t,e){var n=t.callbackNode;mC(t,e);var r=Ku(t,t===bt?Dt:0);if(r===0)n!==null&&Py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Py(n),e===1)t.tag===0?gk(Sv.bind(null,t)):h1(Sv.bind(null,t)),dk(function(){!(Ae&6)&&ns()}),n=null;else{switch(Fx(r)){case 1:n=Pg;break;case 4:n=Mx;break;case 16:n=Wu;break;case 536870912:n=jx;break;default:n=Wu}n=uE(n,rE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rE(t,e){if(Cu=-1,ku=0,Ae&6)throw Error(J(327));var n=t.callbackNode;if(Po()&&t.callbackNode!==n)return null;var r=Ku(t,t===bt?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dd(t,r);else{e=r;var i=Ae;Ae|=2;var s=sE();(bt!==t||Dt!==e)&&(Mr=null,Ko=at()+500,Es(t,e));do try{Ok();break}catch(a){iE(t,a)}while(!0);qg(),ld.current=s,Ae=i,ut!==null?e=0:(bt=null,Dt=0,e=mt)}if(e!==0){if(e===2&&(i=np(t),i!==0&&(r=i,e=Rp(t,i))),e===1)throw n=Ml,Es(t,0),Ii(t,r),ln(t,at()),n;if(e===6)Ii(t,r);else{if(i=t.current.alternate,!(r&30)&&!zk(i)&&(e=dd(t,r),e===2&&(s=np(t),s!==0&&(r=s,e=Rp(t,s))),e===1))throw n=Ml,Es(t,0),Ii(t,r),ln(t,at()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:ds(t,nn,Mr);break;case 3:if(Ii(t,r),(r&130023424)===r&&(e=om+500-at(),10<e)){if(Ku(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=up(ds.bind(null,t,nn,Mr),e);break}ds(t,nn,Mr);break;case 4:if(Ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dk(r/1960))-r,10<r){t.timeoutHandle=up(ds.bind(null,t,nn,Mr),r);break}ds(t,nn,Mr);break;case 5:ds(t,nn,Mr);break;default:throw Error(J(329))}}}return ln(t,at()),t.callbackNode===n?rE.bind(null,t):null}function Rp(t,e){var n=pl;return t.current.memoizedState.isDehydrated&&(Es(t,e).flags|=256),t=dd(t,e),t!==2&&(e=nn,nn=n,e!==null&&Np(e)),t}function Np(t){nn===null?nn=t:nn.push.apply(nn,t)}function zk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!rr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ii(t,e){for(e&=~sm,e&=~Jd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function Sv(t){if(Ae&6)throw Error(J(327));Po();var e=Ku(t,0);if(!(e&1))return ln(t,at()),null;var n=dd(t,e);if(t.tag!==0&&n===2){var r=np(t);r!==0&&(e=r,n=Rp(t,r))}if(n===1)throw n=Ml,Es(t,0),Ii(t,e),ln(t,at()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,nn,Mr),ln(t,at()),null}function am(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(Ko=at()+500,Gd&&ns())}}function Ns(t){Pi!==null&&Pi.tag===0&&!(Ae&6)&&Po();var e=Ae;Ae|=1;var n=Ln.transition,r=Oe;try{if(Ln.transition=null,Oe=1,t)return t()}finally{Oe=r,Ln.transition=n,Ae=e,!(Ae&6)&&ns()}}function lm(){wn=To.current,We(To)}function Es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uk(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(Ug(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ju();break;case 3:qo(),We(on),We(Wt),Xg();break;case 5:Yg(r);break;case 4:qo();break;case 13:We(Qe);break;case 19:We(Qe);break;case 10:Wg(r.type._context);break;case 22:case 23:lm()}n=n.return}if(bt=t,ut=t=Fi(t.current,null),Dt=wn=e,mt=0,Ml=null,sm=Jd=Rs=0,nn=pl=null,gs!==null){for(e=0;e<gs.length;e++)if(n=gs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}gs=null}return t}function iE(t,e){do{var n=ut;try{if(qg(),Su.current=ad,od){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}od=!1}if(As=0,Et=gt=Ye=null,hl=!1,Ll=0,im.current=null,n===null||n.return===null){mt=1,Ml=e,ut=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=dv(o);if(m!==null){m.flags&=-257,hv(m,o,a,s,e),m.mode&1&&uv(s,u,e),e=m,l=u;var b=e.updateQueue;if(b===null){var S=new Set;S.add(l),e.updateQueue=S}else b.add(l);break e}else{if(!(e&1)){uv(s,u,e),cm();break e}l=Error(J(426))}}else if(Ge&&a.mode&1){var P=dv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),hv(P,o,a,s,e),Bg(Wo(l,a));break e}}s=l=Wo(l,a),mt!==4&&(mt=2),pl===null?pl=[s]:pl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=F1(s,l,e);iv(s,y);break e;case 1:a=l;var v=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ji===null||!ji.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=U1(s,a,e);iv(s,R);break e}}s=s.return}while(s!==null)}aE(n)}catch(L){e=L,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function sE(){var t=ld.current;return ld.current=ad,t===null?ad:t}function cm(){(mt===0||mt===3||mt===2)&&(mt=4),bt===null||!(Rs&268435455)&&!(Jd&268435455)||Ii(bt,Dt)}function dd(t,e){var n=Ae;Ae|=2;var r=sE();(bt!==t||Dt!==e)&&(Mr=null,Es(t,e));do try{Lk();break}catch(i){iE(t,i)}while(!0);if(qg(),Ae=n,ld.current=r,ut!==null)throw Error(J(261));return bt=null,Dt=0,mt}function Lk(){for(;ut!==null;)oE(ut)}function Ok(){for(;ut!==null&&!aC();)oE(ut)}function oE(t){var e=cE(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?aE(t):ut=e,im.current=null}function aE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ak(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ut=null;return}}else if(n=kk(n,e,wn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);mt===0&&(mt=5)}function ds(t,e,n){var r=Oe,i=Ln.transition;try{Ln.transition=null,Oe=1,Vk(t,e,n,r)}finally{Ln.transition=i,Oe=r}return null}function Vk(t,e,n,r){do Po();while(Pi!==null);if(Ae&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yC(t,s),t===bt&&(ut=bt=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jc||(Jc=!0,uE(Wu,function(){return Po(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ln.transition,Ln.transition=null;var o=Oe;Oe=1;var a=Ae;Ae|=4,im.current=null,Nk(t,n),tE(n,t),rk(lp),Gu=!!ap,lp=ap=null,t.current=n,Pk(n),lC(),Ae=a,Oe=o,Ln.transition=s}else t.current=n;if(Jc&&(Jc=!1,Pi=t,ud=i),s=t.pendingLanes,s===0&&(ji=null),dC(n.stateNode),ln(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cd)throw cd=!1,t=kp,kp=null,t;return ud&1&&t.tag!==0&&Po(),s=t.pendingLanes,s&1?t===Ap?gl++:(gl=0,Ap=t):gl=0,ns(),null}function Po(){if(Pi!==null){var t=Fx(ud),e=Ln.transition,n=Oe;try{if(Ln.transition=null,Oe=16>t?16:t,Pi===null)var r=!1;else{if(t=Pi,Pi=null,ud=0,Ae&6)throw Error(J(331));var i=Ae;for(Ae|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ie=u;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:fl(8,d,s)}var h=d.child;if(h!==null)h.return=d,ie=h;else for(;ie!==null;){d=ie;var f=d.sibling,m=d.return;if(J1(d),d===u){ie=null;break}if(f!==null){f.return=m,ie=f;break}ie=m}}}var b=s.alternate;if(b!==null){var S=b.child;if(S!==null){b.child=null;do{var P=S.sibling;S.sibling=null,S=P}while(S!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fl(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ie=y;break e}ie=s.return}}var v=t.current;for(ie=v;ie!==null;){o=ie;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ie=T;else e:for(o=v;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xd(9,a)}}catch(L){tt(a,a.return,L)}if(a===o){ie=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ie=R;break e}ie=a.return}}if(Ae=i,ns(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(Bd,t)}catch{}r=!0}return r}finally{Oe=n,Ln.transition=e}}return!1}function Tv(t,e,n){e=Wo(n,e),e=F1(t,e,1),t=Mi(t,e,1),e=Xt(),t!==null&&(oc(t,1,e),ln(t,e))}function tt(t,e,n){if(t.tag===3)Tv(t,t,n);else for(;e!==null;){if(e.tag===3){Tv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ji===null||!ji.has(r))){t=Wo(n,t),t=U1(e,t,1),e=Mi(e,t,1),t=Xt(),e!==null&&(oc(e,1,t),ln(e,t));break}}e=e.return}}function Mk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Dt&n)===n&&(mt===4||mt===3&&(Dt&130023424)===Dt&&500>at()-om?Es(t,0):sm|=n),ln(t,e)}function lE(t,e){e===0&&(t.mode&1?(e=Uc,Uc<<=1,!(Uc&130023424)&&(Uc=4194304)):e=1);var n=Xt();t=Zr(t,e),t!==null&&(oc(t,e,n),ln(t,n))}function jk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lE(t,n)}function $k(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),lE(t,n)}var cE;cE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rn=!1,Ck(t,e,n);rn=!!(t.flags&131072)}else rn=!1,Ge&&e.flags&1048576&&f1(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Iu(t,e),t=e.pendingProps;var i=Uo(e,Wt.current);No(e,n),i=Zg(null,e,r,t,i,n);var s=em();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(s=!0,Zu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gg(e),i.updater=Yd,e.stateNode=i,i._reactInternals=e,yp(e,r,t,n),e=_p(null,e,r,!0,s,n)):(e.tag=0,Ge&&s&&Fg(e),Yt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Iu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Uk(r),t=Wn(r,t),i){case 0:e=wp(null,e,r,t,n);break e;case 1:e=gv(null,e,r,t,n);break e;case 11:e=fv(null,e,r,t,n);break e;case 14:e=pv(null,e,r,Wn(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),wp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),gv(t,e,r,i,n);case 3:e:{if(W1(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,w1(t,e),id(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wo(Error(J(423)),e),e=mv(t,e,r,n,i);break e}else if(r!==i){i=Wo(Error(J(424)),e),e=mv(t,e,r,n,i);break e}else for(En=Vi(e.stateNode.containerInfo.firstChild),bn=e,Ge=!0,Qn=null,n=y1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bo(),r===i){e=ei(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return _1(e),t===null&&pp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cp(r,i)?o=null:s!==null&&cp(r,s)&&(e.flags|=32),q1(t,e),Yt(t,e,o,n),e.child;case 6:return t===null&&pp(e),null;case 13:return K1(t,e,n);case 4:return Qg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ho(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),fv(t,e,r,i,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ue(nd,r._currentValue),r._currentValue=o,s!==null)if(rr(s.value,o)){if(s.children===i.children&&!on.current){e=ei(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Kr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Yt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,No(e,n),i=Vn(i),r=r(i),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,i=Wn(r,e.pendingProps),i=Wn(r.type,i),pv(t,e,r,i,n);case 15:return B1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),Iu(t,e),e.tag=1,an(r)?(t=!0,Zu(e)):t=!1,No(e,n),$1(e,r,i),yp(e,r,i,n),_p(null,e,r,!0,t,n);case 19:return G1(t,e,n);case 22:return H1(t,e,n)}throw Error(J(156,e.tag))};function uE(t,e){return Vx(t,e)}function Fk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new Fk(t,e,n,r)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Uk(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ag)return 11;if(t===Rg)return 14}return 2}function Fi(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Au(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")um(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case go:return bs(n.children,i,s,e);case kg:o=8,i|=8;break;case Ff:return t=Dn(12,n,e,i|2),t.elementType=Ff,t.lanes=s,t;case Uf:return t=Dn(13,n,e,i),t.elementType=Uf,t.lanes=s,t;case Bf:return t=Dn(19,n,e,i),t.elementType=Bf,t.lanes=s,t;case _x:return Zd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vx:o=10;break e;case wx:o=9;break e;case Ag:o=11;break e;case Rg:o=14;break e;case xi:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Dn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function bs(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function Zd(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=_x,t.lanes=n,t.stateNode={isHidden:!1},t}function af(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function lf(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fh(0),this.expirationTimes=Fh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,r,i,s,o,a,l){return t=new Bk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gg(s),t}function Hk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:po,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dE(t){if(!t)return Gi;t=t._reactInternals;e:{if(Us(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(an(n))return d1(t,n,e)}return e}function hE(t,e,n,r,i,s,o,a,l){return t=dm(n,r,!0,t,i,s,o,a,l),t.context=dE(null),n=t.current,r=Xt(),i=$i(n),s=Kr(r,i),s.callback=e??null,Mi(n,s,i),t.current.lanes=i,oc(t,i,r),ln(t,r),t}function eh(t,e,n,r){var i=e.current,s=Xt(),o=$i(i);return n=dE(n),e.context===null?e.context=n:e.pendingContext=n,e=Kr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mi(i,e,o),t!==null&&(er(t,i,o,s),bu(t,i,o)),o}function hd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hm(t,e){Iv(t,e),(t=t.alternate)&&Iv(t,e)}function qk(){return null}var fE=typeof reportError=="function"?reportError:function(t){console.error(t)};function fm(t){this._internalRoot=t}th.prototype.render=fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));eh(t,e,null,null)};th.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){eh(null,t,null,null)}),e[Jr]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ti.length&&e!==0&&e<Ti[n].priority;n++);Ti.splice(n,0,t),n===0&&Wx(t)}};function pm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cv(){}function Wk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=hd(o);s.call(u)}}var o=hE(e,r,t,0,null,!1,!1,"",Cv);return t._reactRootContainer=o,t[Jr]=o.current,Rl(t.nodeType===8?t.parentNode:t),Ns(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=hd(l);a.call(u)}}var l=dm(t,0,!1,null,null,!1,!1,"",Cv);return t._reactRootContainer=l,t[Jr]=l.current,Rl(t.nodeType===8?t.parentNode:t),Ns(function(){eh(e,l,n,r)}),l}function rh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=hd(o);a.call(l)}}eh(e,o,t,i)}else o=Wk(n,e,t,i,r);return hd(o)}Ux=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ya(e.pendingLanes);n!==0&&(Dg(e,n|1),ln(e,at()),!(Ae&6)&&(Ko=at()+500,ns()))}break;case 13:Ns(function(){var r=Zr(t,1);if(r!==null){var i=Xt();er(r,t,1,i)}}),hm(t,1)}};zg=function(t){if(t.tag===13){var e=Zr(t,134217728);if(e!==null){var n=Xt();er(e,t,134217728,n)}hm(t,134217728)}};Bx=function(t){if(t.tag===13){var e=$i(t),n=Zr(t,e);if(n!==null){var r=Xt();er(n,t,e,r)}hm(t,e)}};Hx=function(){return Oe};qx=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};Zf=function(t,e,n){switch(e){case"input":if(Wf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Kd(r);if(!i)throw Error(J(90));Ex(r),Wf(r,i)}}}break;case"textarea":Sx(t,n);break;case"select":e=n.value,e!=null&&Co(t,!!n.multiple,e,!1)}};Nx=am;Px=Ns;var Kk={usingClientEntryPoint:!1,Events:[lc,wo,Kd,Ax,Rx,am]},Fa={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gk={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lx(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||qk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{Bd=Zc.inject(Gk),pr=Zc}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kk;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pm(e))throw Error(J(200));return Hk(t,e,null,n)};Cn.createRoot=function(t,e){if(!pm(t))throw Error(J(299));var n=!1,r="",i=fE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,r,i),t[Jr]=e.current,Rl(t.nodeType===8?t.parentNode:t),new fm(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Lx(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return Ns(t)};Cn.hydrate=function(t,e,n){if(!nh(e))throw Error(J(200));return rh(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!pm(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=fE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hE(e,null,t,1,n??null,i,!1,s,o),t[Jr]=e.current,Rl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new th(e)};Cn.render=function(t,e,n){if(!nh(e))throw Error(J(200));return rh(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!nh(t))throw Error(J(40));return t._reactRootContainer?(Ns(function(){rh(null,null,t,!1,function(){t._reactRootContainer=null,t[Jr]=null})}),!0):!1};Cn.unstable_batchedUpdates=am;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nh(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return rh(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function pE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pE)}catch(t){console.error(t)}}pE(),px.exports=Cn;var jl=px.exports,kv=jl;jf.createRoot=kv.createRoot,jf.hydrateRoot=kv.hydrateRoot;function It(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=It(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var gE={exports:{}},mE={},yE={exports:{}},vE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=D;function Qk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yk=typeof Object.is=="function"?Object.is:Qk,Xk=Go.useState,Jk=Go.useEffect,Zk=Go.useLayoutEffect,eA=Go.useDebugValue;function tA(t,e){var n=e(),r=Xk({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Zk(function(){i.value=n,i.getSnapshot=e,cf(i)&&s({inst:i})},[t,n,e]),Jk(function(){return cf(i)&&s({inst:i}),t(function(){cf(i)&&s({inst:i})})},[t]),eA(n),n}function cf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yk(t,n)}catch{return!0}}function nA(t,e){return e()}var rA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nA:tA;vE.useSyncExternalStore=Go.useSyncExternalStore!==void 0?Go.useSyncExternalStore:rA;yE.exports=vE;var iA=yE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=D,sA=iA;function oA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aA=typeof Object.is=="function"?Object.is:oA,lA=sA.useSyncExternalStore,cA=ih.useRef,uA=ih.useEffect,dA=ih.useMemo,hA=ih.useDebugValue;mE.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=cA(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=dA(function(){function l(m){if(!u){if(u=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var b=o.value;if(i(b,m))return h=b}return h=m}if(b=h,aA(d,m))return b;var S=r(m);return i!==void 0&&i(b,S)?(d=m,b):(d=m,h=S)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=lA(t,s[0],s[1]);return uA(function(){o.hasValue=!0,o.value=a},[a]),hA(a),a};gE.exports=mE;var fA=gE.exports;const pA=nx(fA),gA={},Av=t=>{let e;const n=new Set,r=(d,h)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(b=>b(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(gA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,l);return l},mA=t=>t?Av(t):Av,{useDebugValue:yA}=q,{useSyncExternalStoreWithSelector:vA}=pA,wA=t=>t;function wE(t,e=wA,n){const r=vA(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return yA(r),r}const Rv=(t,e)=>{const n=mA(t),r=(i,s=e)=>wE(n,i,s);return Object.assign(r,n),r},_A=(t,e)=>t?Rv(t,e):Rv;function St(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var xA={value:()=>{}};function sh(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ru(n)}function Ru(t){this._=t}function EA(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ru.prototype=sh.prototype={constructor:Ru,on:function(t,e){var n=this._,r=EA(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=bA(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Nv(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Nv(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ru(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function bA(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Nv(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=xA,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Pp="http://www.w3.org/1999/xhtml";const Pv={svg:"http://www.w3.org/2000/svg",xhtml:Pp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oh(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pv.hasOwnProperty(e)?{space:Pv[e],local:t}:t}function SA(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Pp&&e.documentElement.namespaceURI===Pp?e.createElement(t):e.createElementNS(n,t)}}function TA(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function _E(t){var e=oh(t);return(e.local?TA:SA)(e)}function IA(){}function gm(t){return t==null?IA:function(){return this.querySelector(t)}}function CA(t){typeof t!="function"&&(t=gm(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,u,d=0;d<o;++d)(l=s[d])&&(u=t.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),a[d]=u);return new In(r,this._parents)}function kA(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function AA(){return[]}function xE(t){return t==null?AA:function(){return this.querySelectorAll(t)}}function RA(t){return function(){return kA(t.apply(this,arguments))}}function NA(t){typeof t=="function"?t=RA(t):t=xE(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new In(r,i)}function EE(t){return function(){return this.matches(t)}}function bE(t){return function(e){return e.matches(t)}}var PA=Array.prototype.find;function DA(t){return function(){return PA.call(this.children,t)}}function zA(){return this.firstElementChild}function LA(t){return this.select(t==null?zA:DA(typeof t=="function"?t:bE(t)))}var OA=Array.prototype.filter;function VA(){return Array.from(this.children)}function MA(t){return function(){return OA.call(this.children,t)}}function jA(t){return this.selectAll(t==null?VA:MA(typeof t=="function"?t:bE(t)))}function $A(t){typeof t!="function"&&(t=EE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new In(r,this._parents)}function SE(t){return new Array(t.length)}function FA(){return new In(this._enter||this._groups.map(SE),this._parents)}function fd(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}fd.prototype={constructor:fd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function UA(t){return function(){return t}}function BA(t,e,n,r,i,s){for(var o=0,a,l=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new fd(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function HA(t,e,n,r,i,s,o){var a,l,u=new Map,d=e.length,h=s.length,f=new Array(d),m;for(a=0;a<d;++a)(l=e[a])&&(f[a]=m=o.call(l,l.__data__,a,e)+"",u.has(m)?i[a]=l:u.set(m,l));for(a=0;a<h;++a)m=o.call(t,s[a],a,s)+"",(l=u.get(m))?(r[a]=l,l.__data__=s[a],u.delete(m)):n[a]=new fd(t,s[a]);for(a=0;a<d;++a)(l=e[a])&&u.get(f[a])===l&&(i[a]=l)}function qA(t){return t.__data__}function WA(t,e){if(!arguments.length)return Array.from(this,qA);var n=e?HA:BA,r=this._parents,i=this._groups;typeof t!="function"&&(t=UA(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var d=r[u],h=i[u],f=h.length,m=KA(t.call(d,d&&d.__data__,u,r)),b=m.length,S=a[u]=new Array(b),P=o[u]=new Array(b),y=l[u]=new Array(f);n(d,h,S,P,y,m,e);for(var v=0,T=0,R,L;v<b;++v)if(R=S[v]){for(v>=T&&(T=v+1);!(L=P[T])&&++T<b;);R._next=L||null}}return o=new In(o,r),o._enter=a,o._exit=l,o}function KA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function GA(){return new In(this._exit||this._groups.map(SE),this._parents)}function QA(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function YA(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],d=r[l],h=u.length,f=a[l]=new Array(h),m,b=0;b<h;++b)(m=u[b]||d[b])&&(f[b]=m);for(;l<i;++l)a[l]=n[l];return new In(a,this._parents)}function XA(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function JA(t){t||(t=ZA);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,d=0;d<a;++d)(u=o[d])&&(l[d]=u);l.sort(e)}return new In(i,this._parents).order()}function ZA(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function eR(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function tR(){return Array.from(this)}function nR(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function rR(){let t=0;for(const e of this)++t;return t}function iR(){return!this.node()}function sR(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function oR(t){return function(){this.removeAttribute(t)}}function aR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lR(t,e){return function(){this.setAttribute(t,e)}}function cR(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function uR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function dR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function hR(t,e){var n=oh(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?aR:oR:typeof e=="function"?n.local?dR:uR:n.local?cR:lR)(n,e))}function TE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fR(t){return function(){this.style.removeProperty(t)}}function pR(t,e,n){return function(){this.style.setProperty(t,e,n)}}function gR(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function mR(t,e,n){return arguments.length>1?this.each((e==null?fR:typeof e=="function"?gR:pR)(t,e,n??"")):Qo(this.node(),t)}function Qo(t,e){return t.style.getPropertyValue(e)||TE(t).getComputedStyle(t,null).getPropertyValue(e)}function yR(t){return function(){delete this[t]}}function vR(t,e){return function(){this[t]=e}}function wR(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function _R(t,e){return arguments.length>1?this.each((e==null?yR:typeof e=="function"?wR:vR)(t,e)):this.node()[t]}function IE(t){return t.trim().split(/^|\s+/)}function mm(t){return t.classList||new CE(t)}function CE(t){this._node=t,this._names=IE(t.getAttribute("class")||"")}CE.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function kE(t,e){for(var n=mm(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function AE(t,e){for(var n=mm(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function xR(t){return function(){kE(this,t)}}function ER(t){return function(){AE(this,t)}}function bR(t,e){return function(){(e.apply(this,arguments)?kE:AE)(this,t)}}function SR(t,e){var n=IE(t+"");if(arguments.length<2){for(var r=mm(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?bR:e?xR:ER)(n,e))}function TR(){this.textContent=""}function IR(t){return function(){this.textContent=t}}function CR(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function kR(t){return arguments.length?this.each(t==null?TR:(typeof t=="function"?CR:IR)(t)):this.node().textContent}function AR(){this.innerHTML=""}function RR(t){return function(){this.innerHTML=t}}function NR(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function PR(t){return arguments.length?this.each(t==null?AR:(typeof t=="function"?NR:RR)(t)):this.node().innerHTML}function DR(){this.nextSibling&&this.parentNode.appendChild(this)}function zR(){return this.each(DR)}function LR(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function OR(){return this.each(LR)}function VR(t){var e=typeof t=="function"?t:_E(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function MR(){return null}function jR(t,e){var n=typeof t=="function"?t:_E(t),r=e==null?MR:typeof e=="function"?e:gm(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $R(){var t=this.parentNode;t&&t.removeChild(this)}function FR(){return this.each($R)}function UR(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function BR(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function HR(t){return this.select(t?BR:UR)}function qR(t){return arguments.length?this.property("__data__",t):this.node().__data__}function WR(t){return function(e){t.call(this,e,this.__data__)}}function KR(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function GR(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function QR(t,e,n){return function(){var r=this.__on,i,s=WR(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function YR(t,e,n){var r=KR(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,d;l<u;++l)for(i=0,d=a[l];i<s;++i)if((o=r[i]).type===d.type&&o.name===d.name)return d.value}return}for(a=e?QR:GR,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function RE(t,e,n){var r=TE(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function XR(t,e){return function(){return RE(this,t,e)}}function JR(t,e){return function(){return RE(this,t,e.apply(this,arguments))}}function ZR(t,e){return this.each((typeof e=="function"?JR:XR)(t,e))}function*eN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var NE=[null];function In(t,e){this._groups=t,this._parents=e}function uc(){return new In([[document.documentElement]],NE)}function tN(){return this}In.prototype=uc.prototype={constructor:In,select:CA,selectAll:NA,selectChild:LA,selectChildren:jA,filter:$A,data:WA,enter:FA,exit:GA,join:QA,merge:YA,selection:tN,order:XA,sort:JA,call:eR,nodes:tR,node:nR,size:rR,empty:iR,each:sR,attr:hR,style:mR,property:_R,classed:SR,text:kR,html:PR,raise:zR,lower:OR,append:VR,insert:jR,remove:FR,clone:HR,datum:qR,on:YR,dispatch:ZR,[Symbol.iterator]:eN};function _n(t){return typeof t=="string"?new In([[document.querySelector(t)]],[document.documentElement]):new In([[t]],NE)}function nN(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Gn(t,e){if(t=nN(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const rN={passive:!1},$l={capture:!0,passive:!1};function uf(t){t.stopImmediatePropagation()}function Do(t){t.preventDefault(),t.stopImmediatePropagation()}function PE(t){var e=t.document.documentElement,n=_n(t).on("dragstart.drag",Do,$l);"onselectstart"in e?n.on("selectstart.drag",Do,$l):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function DE(t,e){var n=t.document.documentElement,r=_n(t).on("dragstart.drag",null);e&&(r.on("click.drag",Do,$l),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const eu=t=>()=>t;function Dp(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Dp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function iN(t){return!t.ctrlKey&&!t.button}function sN(){return this.parentNode}function oN(t,e){return e??{x:t.x,y:t.y}}function aN(){return navigator.maxTouchPoints||"ontouchstart"in this}function zE(){var t=iN,e=sN,n=oN,r=aN,i={},s=sh("start","drag","end"),o=0,a,l,u,d,h=0;function f(R){R.on("mousedown.drag",m).filter(r).on("touchstart.drag",P).on("touchmove.drag",y,rN).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(R,L){if(!(d||!t.call(this,R,L))){var V=T(this,e.call(this,R,L),R,L,"mouse");V&&(_n(R.view).on("mousemove.drag",b,$l).on("mouseup.drag",S,$l),PE(R.view),uf(R),u=!1,a=R.clientX,l=R.clientY,V("start",R))}}function b(R){if(Do(R),!u){var L=R.clientX-a,V=R.clientY-l;u=L*L+V*V>h}i.mouse("drag",R)}function S(R){_n(R.view).on("mousemove.drag mouseup.drag",null),DE(R.view,u),Do(R),i.mouse("end",R)}function P(R,L){if(t.call(this,R,L)){var V=R.changedTouches,I=e.call(this,R,L),E=V.length,_,x;for(_=0;_<E;++_)(x=T(this,I,R,L,V[_].identifier,V[_]))&&(uf(R),x("start",R,V[_]))}}function y(R){var L=R.changedTouches,V=L.length,I,E;for(I=0;I<V;++I)(E=i[L[I].identifier])&&(Do(R),E("drag",R,L[I]))}function v(R){var L=R.changedTouches,V=L.length,I,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),I=0;I<V;++I)(E=i[L[I].identifier])&&(uf(R),E("end",R,L[I]))}function T(R,L,V,I,E,_){var x=s.copy(),C=Gn(_||V,L),A,k,N;if((N=n.call(R,new Dp("beforestart",{sourceEvent:V,target:f,identifier:E,active:o,x:C[0],y:C[1],dx:0,dy:0,dispatch:x}),I))!=null)return A=N.x-C[0]||0,k=N.y-C[1]||0,function j(O,B,$){var M=C,U;switch(O){case"start":i[E]=j,U=o++;break;case"end":delete i[E],--o;case"drag":C=Gn($||B,L),U=o;break}x.call(O,R,new Dp(O,{sourceEvent:B,subject:N,target:f,identifier:E,active:U,x:C[0]+A,y:C[1]+k,dx:C[0]-M[0],dy:C[1]-M[1],dispatch:x}),I)}}return f.filter=function(R){return arguments.length?(t=typeof R=="function"?R:eu(!!R),f):t},f.container=function(R){return arguments.length?(e=typeof R=="function"?R:eu(R),f):e},f.subject=function(R){return arguments.length?(n=typeof R=="function"?R:eu(R),f):n},f.touchable=function(R){return arguments.length?(r=typeof R=="function"?R:eu(!!R),f):r},f.on=function(){var R=s.on.apply(s,arguments);return R===s?f:R},f.clickDistance=function(R){return arguments.length?(h=(R=+R)*R,f):Math.sqrt(h)},f}function ym(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function LE(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function dc(){}var Fl=.7,pd=1/Fl,zo="\\s*([+-]?\\d+)\\s*",Ul="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lN=/^#([0-9a-f]{3,8})$/,cN=new RegExp(`^rgb\\(${zo},${zo},${zo}\\)$`),uN=new RegExp(`^rgb\\(${mr},${mr},${mr}\\)$`),dN=new RegExp(`^rgba\\(${zo},${zo},${zo},${Ul}\\)$`),hN=new RegExp(`^rgba\\(${mr},${mr},${mr},${Ul}\\)$`),fN=new RegExp(`^hsl\\(${Ul},${mr},${mr}\\)$`),pN=new RegExp(`^hsla\\(${Ul},${mr},${mr},${Ul}\\)$`),Dv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ym(dc,Bl,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zv,formatHex:zv,formatHex8:gN,formatHsl:mN,formatRgb:Lv,toString:Lv});function zv(){return this.rgb().formatHex()}function gN(){return this.rgb().formatHex8()}function mN(){return OE(this).formatHsl()}function Lv(){return this.rgb().formatRgb()}function Bl(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=lN.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ov(e):n===3?new sn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?tu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?tu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cN.exec(t))?new sn(e[1],e[2],e[3],1):(e=uN.exec(t))?new sn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dN.exec(t))?tu(e[1],e[2],e[3],e[4]):(e=hN.exec(t))?tu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fN.exec(t))?jv(e[1],e[2]/100,e[3]/100,1):(e=pN.exec(t))?jv(e[1],e[2]/100,e[3]/100,e[4]):Dv.hasOwnProperty(t)?Ov(Dv[t]):t==="transparent"?new sn(NaN,NaN,NaN,0):null}function Ov(t){return new sn(t>>16&255,t>>8&255,t&255,1)}function tu(t,e,n,r){return r<=0&&(t=e=n=NaN),new sn(t,e,n,r)}function yN(t){return t instanceof dc||(t=Bl(t)),t?(t=t.rgb(),new sn(t.r,t.g,t.b,t.opacity)):new sn}function zp(t,e,n,r){return arguments.length===1?yN(t):new sn(t,e,n,r??1)}function sn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ym(sn,zp,LE(dc,{brighter(t){return t=t==null?pd:Math.pow(pd,t),new sn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Fl:Math.pow(Fl,t),new sn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sn(Ss(this.r),Ss(this.g),Ss(this.b),gd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vv,formatHex:Vv,formatHex8:vN,formatRgb:Mv,toString:Mv}));function Vv(){return`#${ys(this.r)}${ys(this.g)}${ys(this.b)}`}function vN(){return`#${ys(this.r)}${ys(this.g)}${ys(this.b)}${ys((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mv(){const t=gd(this.opacity);return`${t===1?"rgb(":"rgba("}${Ss(this.r)}, ${Ss(this.g)}, ${Ss(this.b)}${t===1?")":`, ${t})`}`}function gd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ss(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ys(t){return t=Ss(t),(t<16?"0":"")+t.toString(16)}function jv(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Yn(t,e,n,r)}function OE(t){if(t instanceof Yn)return new Yn(t.h,t.s,t.l,t.opacity);if(t instanceof dc||(t=Bl(t)),!t)return new Yn;if(t instanceof Yn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Yn(o,a,l,t.opacity)}function wN(t,e,n,r){return arguments.length===1?OE(t):new Yn(t,e,n,r??1)}function Yn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ym(Yn,wN,LE(dc,{brighter(t){return t=t==null?pd:Math.pow(pd,t),new Yn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Fl:Math.pow(Fl,t),new Yn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new sn(df(t>=240?t-240:t+120,i,r),df(t,i,r),df(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Yn($v(this.h),nu(this.s),nu(this.l),gd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gd(this.opacity);return`${t===1?"hsl(":"hsla("}${$v(this.h)}, ${nu(this.s)*100}%, ${nu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $v(t){return t=(t||0)%360,t<0?t+360:t}function nu(t){return Math.max(0,Math.min(1,t||0))}function df(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const VE=t=>()=>t;function _N(t,e){return function(n){return t+n*e}}function xN(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function EN(t){return(t=+t)==1?ME:function(e,n){return n-e?xN(e,n,t):VE(isNaN(e)?n:e)}}function ME(t,e){var n=e-t;return n?_N(t,n):VE(isNaN(t)?e:t)}const Fv=function t(e){var n=EN(e);function r(i,s){var o=n((i=zp(i)).r,(s=zp(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=ME(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function bi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Lp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hf=new RegExp(Lp.source,"g");function bN(t){return function(){return t}}function SN(t){return function(e){return t(e)+""}}function TN(t,e){var n=Lp.lastIndex=hf.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Lp.exec(t))&&(i=hf.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:bi(r,i)})),n=hf.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?SN(l[0].x):bN(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)a[(h=l[d]).i]=h.x(u);return a.join("")})}var Uv=180/Math.PI,Op={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jE(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Uv,skewX:Math.atan(l)*Uv,scaleX:o,scaleY:a}}var ru;function IN(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Op:jE(e.a,e.b,e.c,e.d,e.e,e.f)}function CN(t){return t==null||(ru||(ru=document.createElementNS("http://www.w3.org/2000/svg","g")),ru.setAttribute("transform",t),!(t=ru.transform.baseVal.consolidate()))?Op:(t=t.matrix,jE(t.a,t.b,t.c,t.d,t.e,t.f))}function $E(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,d,h,f,m,b){if(u!==h||d!==f){var S=m.push("translate(",null,e,null,n);b.push({i:S-4,x:bi(u,h)},{i:S-2,x:bi(d,f)})}else(h||f)&&m.push("translate("+h+e+f+n)}function o(u,d,h,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:bi(u,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(u,d,h,f){u!==d?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:bi(u,d)}):d&&h.push(i(h)+"skewX("+d+r)}function l(u,d,h,f,m,b){if(u!==h||d!==f){var S=m.push(i(m)+"scale(",null,",",null,")");b.push({i:S-4,x:bi(u,h)},{i:S-2,x:bi(d,f)})}else(h!==1||f!==1)&&m.push(i(m)+"scale("+h+","+f+")")}return function(u,d){var h=[],f=[];return u=t(u),d=t(d),s(u.translateX,u.translateY,d.translateX,d.translateY,h,f),o(u.rotate,d.rotate,h,f),a(u.skewX,d.skewX,h,f),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,f),u=d=null,function(m){for(var b=-1,S=f.length,P;++b<S;)h[(P=f[b]).i]=P.x(m);return h.join("")}}}var kN=$E(IN,"px, ","px)","deg)"),AN=$E(CN,", ",")",")"),RN=1e-12;function Bv(t){return((t=Math.exp(t))+1/t)/2}function NN(t){return((t=Math.exp(t))-1/t)/2}function PN(t){return((t=Math.exp(2*t))-1)/(t+1)}const DN=function t(e,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],d=o[0],h=o[1],f=o[2],m=d-a,b=h-l,S=m*m+b*b,P,y;if(S<RN)y=Math.log(f/u)/e,P=function(I){return[a+I*m,l+I*b,u*Math.exp(e*I*y)]};else{var v=Math.sqrt(S),T=(f*f-u*u+r*S)/(2*u*n*v),R=(f*f-u*u-r*S)/(2*f*n*v),L=Math.log(Math.sqrt(T*T+1)-T),V=Math.log(Math.sqrt(R*R+1)-R);y=(V-L)/e,P=function(I){var E=I*y,_=Bv(L),x=u/(n*v)*(_*PN(e*E+L)-NN(L));return[a+x*m,l+x*b,u*_/Bv(e*E+L)]}}return P.duration=y*1e3*e/Math.SQRT2,P}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i}(Math.SQRT2,2,4);var Yo=0,Ja=0,Ua=0,FE=1e3,md,Za,yd=0,Ps=0,ah=0,Hl=typeof performance=="object"&&performance.now?performance:Date,UE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function vm(){return Ps||(UE(zN),Ps=Hl.now()+ah)}function zN(){Ps=0}function vd(){this._call=this._time=this._next=null}vd.prototype=BE.prototype={constructor:vd,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?vm():+n)+(e==null?0:+e),!this._next&&Za!==this&&(Za?Za._next=this:md=this,Za=this),this._call=t,this._time=n,Vp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vp())}};function BE(t,e,n){var r=new vd;return r.restart(t,e,n),r}function LN(){vm(),++Yo;for(var t=md,e;t;)(e=Ps-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Yo}function Hv(){Ps=(yd=Hl.now())+ah,Yo=Ja=0;try{LN()}finally{Yo=0,VN(),Ps=0}}function ON(){var t=Hl.now(),e=t-yd;e>FE&&(ah-=e,yd=t)}function VN(){for(var t,e=md,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:md=n);Za=t,Vp(r)}function Vp(t){if(!Yo){Ja&&(Ja=clearTimeout(Ja));var e=t-Ps;e>24?(t<1/0&&(Ja=setTimeout(Hv,t-Hl.now()-ah)),Ua&&(Ua=clearInterval(Ua))):(Ua||(yd=Hl.now(),Ua=setInterval(ON,FE)),Yo=1,UE(Hv))}}function qv(t,e,n){var r=new vd;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var MN=sh("start","end","cancel","interrupt"),jN=[],HE=0,Wv=1,Mp=2,Nu=3,Kv=4,jp=5,Pu=6;function lh(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;$N(t,n,{name:e,index:r,group:i,on:MN,tween:jN,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:HE})}function wm(t,e){var n=or(t,e);if(n.state>HE)throw new Error("too late; already scheduled");return n}function br(t,e){var n=or(t,e);if(n.state>Nu)throw new Error("too late; already running");return n}function or(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function $N(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=BE(s,0,n.time);function s(u){n.state=Wv,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,h,f,m;if(n.state!==Wv)return l();for(d in r)if(m=r[d],m.name===n.name){if(m.state===Nu)return qv(o);m.state===Kv?(m.state=Pu,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[d]):+d<e&&(m.state=Pu,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[d])}if(qv(function(){n.state===Nu&&(n.state=Kv,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Mp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Mp){for(n.state=Nu,i=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(m=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=m);i.length=h+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=jp,1),h=-1,f=i.length;++h<f;)i[h].call(t,d);n.state===jp&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Pu,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Du(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Mp&&r.state<jp,r.state=Pu,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function FN(t){return this.each(function(){Du(this,t)})}function UN(t,e){var n,r;return function(){var i=br(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function BN(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=br(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function HN(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=or(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?UN:BN)(n,t,e))}function _m(t,e,n){var r=t._id;return t.each(function(){var i=br(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return or(i,r).value[e]}}function qE(t,e){var n;return(typeof e=="number"?bi:e instanceof Bl?Fv:(n=Bl(e))?(e=n,Fv):TN)(t,e)}function qN(t){return function(){this.removeAttribute(t)}}function WN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function KN(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function GN(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function QN(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function YN(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function XN(t,e){var n=oh(t),r=n==="transform"?AN:qE;return this.attrTween(t,typeof e=="function"?(n.local?YN:QN)(n,r,_m(this,"attr."+t,e)):e==null?(n.local?WN:qN)(n):(n.local?GN:KN)(n,r,e))}function JN(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ZN(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function eP(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&ZN(t,s)),n}return i._value=e,i}function tP(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&JN(t,s)),n}return i._value=e,i}function nP(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=oh(t);return this.tween(n,(r.local?eP:tP)(r,e))}function rP(t,e){return function(){wm(this,t).delay=+e.apply(this,arguments)}}function iP(t,e){return e=+e,function(){wm(this,t).delay=e}}function sP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?rP:iP)(e,t)):or(this.node(),e).delay}function oP(t,e){return function(){br(this,t).duration=+e.apply(this,arguments)}}function aP(t,e){return e=+e,function(){br(this,t).duration=e}}function lP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oP:aP)(e,t)):or(this.node(),e).duration}function cP(t,e){if(typeof e!="function")throw new Error;return function(){br(this,t).ease=e}}function uP(t){var e=this._id;return arguments.length?this.each(cP(e,t)):or(this.node(),e).ease}function dP(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;br(this,t).ease=n}}function hP(t){if(typeof t!="function")throw new Error;return this.each(dP(this._id,t))}function fP(t){typeof t!="function"&&(t=EE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new ti(r,this._parents,this._name,this._id)}function pP(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],u=n[a],d=l.length,h=o[a]=new Array(d),f,m=0;m<d;++m)(f=l[m]||u[m])&&(h[m]=f);for(;a<r;++a)o[a]=e[a];return new ti(o,this._parents,this._name,this._id)}function gP(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function mP(t,e,n){var r,i,s=gP(e)?wm:br;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function yP(t,e){var n=this._id;return arguments.length<2?or(this.node(),n).on.on(t):this.each(mP(n,t,e))}function vP(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function wP(){return this.on("end.remove",vP(this._id))}function _P(t){var e=this._name,n=this._id;typeof t!="function"&&(t=gm(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),d,h,f=0;f<l;++f)(d=a[f])&&(h=t.call(d,d.__data__,f,a))&&("__data__"in d&&(h.__data__=d.__data__),u[f]=h,lh(u[f],e,n,f,u,or(d,n)));return new ti(s,this._parents,e,n)}function xP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xE(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var f=t.call(d,d.__data__,h,l),m,b=or(d,n),S=0,P=f.length;S<P;++S)(m=f[S])&&lh(m,e,n,S,f,b);s.push(f),o.push(d)}return new ti(s,o,e,n)}var EP=uc.prototype.constructor;function bP(){return new EP(this._groups,this._parents)}function SP(t,e){var n,r,i;return function(){var s=Qo(this,t),o=(this.style.removeProperty(t),Qo(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function WE(t){return function(){this.style.removeProperty(t)}}function TP(t,e,n){var r,i=n+"",s;return function(){var o=Qo(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function IP(t,e,n){var r,i,s;return function(){var o=Qo(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Qo(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function CP(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=br(this,t),u=l.on,d=l.value[s]==null?a||(a=WE(e)):void 0;(u!==n||i!==d)&&(r=(n=u).copy()).on(o,i=d),l.on=r}}function kP(t,e,n){var r=(t+="")=="transform"?kN:qE;return e==null?this.styleTween(t,SP(t,r)).on("end.style."+t,WE(t)):typeof e=="function"?this.styleTween(t,IP(t,r,_m(this,"style."+t,e))).each(CP(this._id,t)):this.styleTween(t,TP(t,r,e),n).on("end.style."+t,null)}function AP(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function RP(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&AP(t,o,n)),r}return s._value=e,s}function NP(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,RP(t,e,n??""))}function PP(t){return function(){this.textContent=t}}function DP(t){return function(){var e=t(this);this.textContent=e??""}}function zP(t){return this.tween("text",typeof t=="function"?DP(_m(this,"text",t)):PP(t==null?"":t+""))}function LP(t){return function(e){this.textContent=t.call(this,e)}}function OP(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&LP(i)),e}return r._value=t,r}function VP(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,OP(t))}function MP(){for(var t=this._name,e=this._id,n=KE(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var d=or(l,e);lh(l,t,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ti(r,this._parents,t,n)}function jP(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=br(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&s()})}var $P=0;function ti(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function KE(){return++$P}var Or=uc.prototype;ti.prototype={constructor:ti,select:_P,selectAll:xP,selectChild:Or.selectChild,selectChildren:Or.selectChildren,filter:fP,merge:pP,selection:bP,transition:MP,call:Or.call,nodes:Or.nodes,node:Or.node,size:Or.size,empty:Or.empty,each:Or.each,on:yP,attr:XN,attrTween:nP,style:kP,styleTween:NP,text:zP,textTween:VP,remove:wP,tween:HN,delay:sP,duration:lP,ease:uP,easeVarying:hP,end:jP,[Symbol.iterator]:Or[Symbol.iterator]};function FP(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var UP={time:null,delay:0,duration:250,ease:FP};function BP(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function HP(t){var e,n;t instanceof ti?(e=t._id,t=t._name):(e=KE(),(n=UP).time=vm(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&lh(l,t,e,u,o,n||BP(l,e));return new ti(r,this._parents,t,e)}uc.prototype.interrupt=FN;uc.prototype.transition=HP;const iu=t=>()=>t;function qP(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Br(t,e,n){this.k=t,this.x=e,this.y=n}Br.prototype={constructor:Br,scale:function(t){return t===1?this:new Br(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Br(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gr=new Br(1,0,0);Br.prototype;function ff(t){t.stopImmediatePropagation()}function Ba(t){t.preventDefault(),t.stopImmediatePropagation()}function WP(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function KP(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Gv(){return this.__zoom||Gr}function GP(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function QP(){return navigator.maxTouchPoints||"ontouchstart"in this}function YP(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function GE(){var t=WP,e=KP,n=YP,r=GP,i=QP,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=DN,u=sh("start","zoom","end"),d,h,f,m=500,b=150,S=0,P=10;function y(N){N.property("__zoom",Gv).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",x).filter(i).on("touchstart.zoom",C).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(N,j,O,B){var $=N.selection?N.selection():N;$.property("__zoom",Gv),N!==$?L(N,j,O,B):$.interrupt().each(function(){V(this,arguments).event(B).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},y.scaleBy=function(N,j,O,B){y.scaleTo(N,function(){var $=this.__zoom.k,M=typeof j=="function"?j.apply(this,arguments):j;return $*M},O,B)},y.scaleTo=function(N,j,O,B){y.transform(N,function(){var $=e.apply(this,arguments),M=this.__zoom,U=O==null?R($):typeof O=="function"?O.apply(this,arguments):O,W=M.invert(U),F=typeof j=="function"?j.apply(this,arguments):j;return n(T(v(M,F),U,W),$,o)},O,B)},y.translateBy=function(N,j,O,B){y.transform(N,function(){return n(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof O=="function"?O.apply(this,arguments):O),e.apply(this,arguments),o)},null,B)},y.translateTo=function(N,j,O,B,$){y.transform(N,function(){var M=e.apply(this,arguments),U=this.__zoom,W=B==null?R(M):typeof B=="function"?B.apply(this,arguments):B;return n(Gr.translate(W[0],W[1]).scale(U.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof O=="function"?-O.apply(this,arguments):-O),M,o)},B,$)};function v(N,j){return j=Math.max(s[0],Math.min(s[1],j)),j===N.k?N:new Br(j,N.x,N.y)}function T(N,j,O){var B=j[0]-O[0]*N.k,$=j[1]-O[1]*N.k;return B===N.x&&$===N.y?N:new Br(N.k,B,$)}function R(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function L(N,j,O,B){N.on("start.zoom",function(){V(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(B).end()}).tween("zoom",function(){var $=this,M=arguments,U=V($,M).event(B),W=e.apply($,M),F=O==null?R(W):typeof O=="function"?O.apply($,M):O,Q=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),G=$.__zoom,Z=typeof j=="function"?j.apply($,M):j,te=l(G.invert(F).concat(Q/G.k),Z.invert(F).concat(Q/Z.k));return function(ue){if(ue===1)ue=Z;else{var ae=te(ue),ve=Q/ae[2];ue=new Br(ve,F[0]-ae[0]*ve,F[1]-ae[1]*ve)}U.zoom(null,ue)}})}function V(N,j,O){return!O&&N.__zooming||new I(N,j)}function I(N,j){this.that=N,this.args=j,this.active=0,this.sourceEvent=null,this.extent=e.apply(N,j),this.taps=0}I.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,j){return this.mouse&&N!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var j=_n(this.that).datum();u.call(N,this.that,new qP(N,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),j)}};function E(N,...j){if(!t.apply(this,arguments))return;var O=V(this,j).event(N),B=this.__zoom,$=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,r.apply(this,arguments)))),M=Gn(N);if(O.wheel)(O.mouse[0][0]!==M[0]||O.mouse[0][1]!==M[1])&&(O.mouse[1]=B.invert(O.mouse[0]=M)),clearTimeout(O.wheel);else{if(B.k===$)return;O.mouse=[M,B.invert(M)],Du(this),O.start()}Ba(N),O.wheel=setTimeout(U,b),O.zoom("mouse",n(T(v(B,$),O.mouse[0],O.mouse[1]),O.extent,o));function U(){O.wheel=null,O.end()}}function _(N,...j){if(f||!t.apply(this,arguments))return;var O=N.currentTarget,B=V(this,j,!0).event(N),$=_n(N.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",Q,!0),M=Gn(N,O),U=N.clientX,W=N.clientY;PE(N.view),ff(N),B.mouse=[M,this.__zoom.invert(M)],Du(this),B.start();function F(G){if(Ba(G),!B.moved){var Z=G.clientX-U,te=G.clientY-W;B.moved=Z*Z+te*te>S}B.event(G).zoom("mouse",n(T(B.that.__zoom,B.mouse[0]=Gn(G,O),B.mouse[1]),B.extent,o))}function Q(G){$.on("mousemove.zoom mouseup.zoom",null),DE(G.view,B.moved),Ba(G),B.event(G).end()}}function x(N,...j){if(t.apply(this,arguments)){var O=this.__zoom,B=Gn(N.changedTouches?N.changedTouches[0]:N,this),$=O.invert(B),M=O.k*(N.shiftKey?.5:2),U=n(T(v(O,M),B,$),e.apply(this,j),o);Ba(N),a>0?_n(this).transition().duration(a).call(L,U,B,N):_n(this).call(y.transform,U,B,N)}}function C(N,...j){if(t.apply(this,arguments)){var O=N.touches,B=O.length,$=V(this,j,N.changedTouches.length===B).event(N),M,U,W,F;for(ff(N),U=0;U<B;++U)W=O[U],F=Gn(W,this),F=[F,this.__zoom.invert(F),W.identifier],$.touch0?!$.touch1&&$.touch0[2]!==F[2]&&($.touch1=F,$.taps=0):($.touch0=F,M=!0,$.taps=1+!!d);d&&(d=clearTimeout(d)),M&&($.taps<2&&(h=F[0],d=setTimeout(function(){d=null},m)),Du(this),$.start())}}function A(N,...j){if(this.__zooming){var O=V(this,j).event(N),B=N.changedTouches,$=B.length,M,U,W,F;for(Ba(N),M=0;M<$;++M)U=B[M],W=Gn(U,this),O.touch0&&O.touch0[2]===U.identifier?O.touch0[0]=W:O.touch1&&O.touch1[2]===U.identifier&&(O.touch1[0]=W);if(U=O.that.__zoom,O.touch1){var Q=O.touch0[0],G=O.touch0[1],Z=O.touch1[0],te=O.touch1[1],ue=(ue=Z[0]-Q[0])*ue+(ue=Z[1]-Q[1])*ue,ae=(ae=te[0]-G[0])*ae+(ae=te[1]-G[1])*ae;U=v(U,Math.sqrt(ue/ae)),W=[(Q[0]+Z[0])/2,(Q[1]+Z[1])/2],F=[(G[0]+te[0])/2,(G[1]+te[1])/2]}else if(O.touch0)W=O.touch0[0],F=O.touch0[1];else return;O.zoom("touch",n(T(U,W,F),O.extent,o))}}function k(N,...j){if(this.__zooming){var O=V(this,j).event(N),B=N.changedTouches,$=B.length,M,U;for(ff(N),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),M=0;M<$;++M)U=B[M],O.touch0&&O.touch0[2]===U.identifier?delete O.touch0:O.touch1&&O.touch1[2]===U.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(U=Gn(U,this),Math.hypot(h[0]-U[0],h[1]-U[1])<P)){var W=_n(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return y.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:iu(+N),y):r},y.filter=function(N){return arguments.length?(t=typeof N=="function"?N:iu(!!N),y):t},y.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:iu(!!N),y):i},y.extent=function(N){return arguments.length?(e=typeof N=="function"?N:iu([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),y):e},y.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],y):[s[0],s[1]]},y.translateExtent=function(N){return arguments.length?(o[0][0]=+N[0][0],o[1][0]=+N[1][0],o[0][1]=+N[0][1],o[1][1]=+N[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(N){return arguments.length?(n=N,y):n},y.duration=function(N){return arguments.length?(a=+N,y):a},y.interpolate=function(N){return arguments.length?(l=N,y):l},y.on=function(){var N=u.on.apply(u,arguments);return N===u?y:N},y.clickDistance=function(N){return arguments.length?(S=(N=+N)*N,y):Math.sqrt(S)},y.tapDistance=function(N){return arguments.length?(P=+N,y):P},y}const ch=D.createContext(null),XP=ch.Provider,ni={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},QE=ni.error001();function je(t,e){const n=D.useContext(ch);if(n===null)throw new Error(QE);return wE(n,t,e)}const ht=()=>{const t=D.useContext(ch);if(t===null)throw new Error(QE);return D.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},JP=t=>t.userSelectionActive?"none":"all";function xm({position:t,children:e,className:n,style:r,...i}){const s=je(JP),o=`${t}`.split("-");return q.createElement("div",{className:It(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},e)}function ZP({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:q.createElement(xm,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},q.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const e4=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...d})=>{const h=D.useRef(null),[f,m]=D.useState({x:0,y:0,width:0,height:0}),b=It(["react-flow__edge-textwrapper",u]);return D.useEffect(()=>{if(h.current){const S=h.current.getBBox();m({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:q.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:b,visibility:f.width?"visible":"hidden",...d},i&&q.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),q.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:r},n),l)};var t4=D.memo(e4);const Em=t=>({width:t.offsetWidth,height:t.offsetHeight}),Qi=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),bm=(t={x:0,y:0},e)=>({x:Qi(t.x,e[0][0],e[1][0]),y:Qi(t.y,e[0][1],e[1][1])}),Qv=(t,e,n)=>t<e?Qi(Math.abs(t-e),1,50)/50:t>n?-Qi(Math.abs(t-n),1,50)/50:0,YE=(t,e)=>{const n=Qv(t.x,35,e.width-35)*20,r=Qv(t.y,35,e.height-35)*20;return[n,r]},XE=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},JE=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),ql=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),ZE=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Yv=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),n4=(t,e)=>ZE(JE(ql(t),ql(e))),$p=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},r4=t=>zn(t.width)&&zn(t.height)&&zn(t.x)&&zn(t.y),zn=t=>!isNaN(t)&&isFinite(t),nt=Symbol.for("internals"),eb=["Enter"," ","Escape"],i4=(t,e)=>{},s4=t=>"nativeEvent"in t;function Fp(t){var i,s;const e=s4(t)?t.nativeEvent:t,n=((s=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const tb=t=>"clientX"in t,Ui=(t,e)=>{var s,o;const n=tb(t),r=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,i=n?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},wd=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},ua=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:f,interactionWidth:m=20})=>q.createElement(q.Fragment,null,q.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:f}),m&&q.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),i&&zn(n)&&zn(r)?q.createElement(t4,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);ua.displayName="BaseEdge";function Ha(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(s=>s.id===t);i&&n(r,{...i})}}function nb({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function rb({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=t*.125+i*.375+o*.375+n*.125,u=e*.125+s*.375+a*.375+r*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var Ds;(function(t){t.Strict="strict",t.Loose="loose"})(Ds||(Ds={}));var vs;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(vs||(vs={}));var Wl;(function(t){t.Partial="partial",t.Full="full"})(Wl||(Wl={}));var Ci;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ci||(Ci={}));var _d;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(_d||(_d={}));var oe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(oe||(oe={}));function Xv({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===oe.Left||t===oe.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function ib({sourceX:t,sourceY:e,sourcePosition:n=oe.Bottom,targetX:r,targetY:i,targetPosition:s=oe.Top}){const[o,a]=Xv({pos:n,x1:t,y1:e,x2:r,y2:i}),[l,u]=Xv({pos:s,x1:r,y1:i,x2:t,y2:e}),[d,h,f,m]=rb({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${t},${e} C${o},${a} ${l},${u} ${r},${i}`,d,h,f,m]}const Sm=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=oe.Bottom,targetPosition:s=oe.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:b,interactionWidth:S})=>{const[P,y,v]=ib({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return q.createElement(ua,{path:P,labelX:y,labelY:v,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:b,interactionWidth:S})});Sm.displayName="SimpleBezierEdge";const Jv={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},o4=({source:t,sourcePosition:e=oe.Bottom,target:n})=>e===oe.Left||e===oe.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Zv=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function a4({source:t,sourcePosition:e=oe.Bottom,target:n,targetPosition:r=oe.Top,center:i,offset:s}){const o=Jv[e],a=Jv[r],l={x:t.x+o.x*s,y:t.y+o.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},d=o4({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",f=d[h];let m=[],b,S;const P={x:0,y:0},y={x:0,y:0},[v,T,R,L]=nb({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*a[h]===-1){b=i.x??v,S=i.y??T;const I=[{x:b,y:l.y},{x:b,y:u.y}],E=[{x:l.x,y:S},{x:u.x,y:S}];o[h]===f?m=h==="x"?I:E:m=h==="x"?E:I}else{const I=[{x:l.x,y:u.y}],E=[{x:u.x,y:l.y}];if(h==="x"?m=o.x===f?E:I:m=o.y===f?I:E,e===r){const k=Math.abs(t[h]-n[h]);if(k<=s){const N=Math.min(s-1,s-k);o[h]===f?P[h]=(l[h]>t[h]?-1:1)*N:y[h]=(u[h]>n[h]?-1:1)*N}}if(e!==r){const k=h==="x"?"y":"x",N=o[h]===a[k],j=l[k]>u[k],O=l[k]<u[k];(o[h]===1&&(!N&&j||N&&O)||o[h]!==1&&(!N&&O||N&&j))&&(m=h==="x"?I:E)}const _={x:l.x+P.x,y:l.y+P.y},x={x:u.x+y.x,y:u.y+y.y},C=Math.max(Math.abs(_.x-m[0].x),Math.abs(x.x-m[0].x)),A=Math.max(Math.abs(_.y-m[0].y),Math.abs(x.y-m[0].y));C>=A?(b=(_.x+x.x)/2,S=m[0].y):(b=m[0].x,S=(_.y+x.y)/2)}return[[t,{x:l.x+P.x,y:l.y+P.y},...m,{x:u.x+y.x,y:u.y+y.y},n],b,S,R,L]}function l4(t,e,n,r){const i=Math.min(Zv(t,e)/2,Zv(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*d}`}const a=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function Kl({sourceX:t,sourceY:e,sourcePosition:n=oe.Bottom,targetX:r,targetY:i,targetPosition:s=oe.Top,borderRadius:o=5,centerX:a,centerY:l,offset:u=20}){const[d,h,f,m,b]=a4({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:u});return[d.reduce((P,y,v)=>{let T="";return v>0&&v<d.length-1?T=l4(d[v-1],y,d[v+1],o):T=`${v===0?"M":"L"}${y.x} ${y.y}`,P+=T,P},""),h,f,m,b]}const uh=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=oe.Bottom,targetPosition:f=oe.Top,markerEnd:m,markerStart:b,pathOptions:S,interactionWidth:P})=>{const[y,v,T]=Kl({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:f,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset});return q.createElement(ua,{path:y,labelX:v,labelY:T,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:b,interactionWidth:P})});uh.displayName="SmoothStepEdge";const Tm=D.memo(t=>{var e;return q.createElement(uh,{...t,pathOptions:D.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});Tm.displayName="StepEdge";function sb({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,a]=nb({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,a]}const Im=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:f,interactionWidth:m})=>{const[b,S,P]=sb({sourceX:t,sourceY:e,targetX:n,targetY:r});return q.createElement(ua,{path:b,labelX:S,labelY:P,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:f,interactionWidth:m})});Im.displayName="StraightEdge";function su(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ew({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case oe.Left:return[e-su(e-r,s),n];case oe.Right:return[e+su(r-e,s),n];case oe.Top:return[e,n-su(n-i,s)];case oe.Bottom:return[e,n+su(i-n,s)]}}function Cm({sourceX:t,sourceY:e,sourcePosition:n=oe.Bottom,targetX:r,targetY:i,targetPosition:s=oe.Top,curvature:o=.25}){const[a,l]=ew({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[u,d]=ew({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,f,m,b]=rb({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${a},${l} ${u},${d} ${r},${i}`,h,f,m,b]}const xd=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=oe.Bottom,targetPosition:s=oe.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:b,pathOptions:S,interactionWidth:P})=>{const[y,v,T]=Cm({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:S==null?void 0:S.curvature});return q.createElement(ua,{path:y,labelX:v,labelY:T,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:b,interactionWidth:P})});xd.displayName="BezierEdge";const km=D.createContext(null),c4=km.Provider;km.Consumer;const ob=()=>D.useContext(km),u4=t=>"id"in t&&"source"in t&&"target"in t,d4=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Up=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,h4=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),ab=(t,e)=>{if(!t.source||!t.target)return e;let n;return u4(t)?n={...t}:n={...t,id:d4(t)},h4(n,e)?e:e.concat(n)},Bp=({x:t,y:e},[n,r,i],s,[o,a])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?{x:o*Math.round(l.x/o),y:a*Math.round(l.y/a)}:l},lb=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),Ts=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},hc=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:s,y:o}=Ts(i,e).positionAbsolute;return JE(r,ql({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ZE(n)},cb=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const l={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},u=[];return t.forEach(d=>{const{width:h,height:f,selectable:m=!0,hidden:b=!1}=d;if(o&&!m||b)return!1;const{positionAbsolute:S}=Ts(d,a),P={x:S.x,y:S.y,width:h||0,height:f||0},y=$p(l,P),v=typeof h>"u"||typeof f>"u"||h===null||f===null,T=s&&y>0,R=(h||0)*(f||0);(v||T||y>=R||d.dragging)&&u.push(d)}),u},ub=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},db=(t,e,n,r,i,s=.1)=>{const o=e/(t.width*(1+s)),a=n/(t.height*(1+s)),l=Math.min(o,a),u=Qi(l,r,i),d=t.x+t.width/2,h=t.y+t.height/2,f=e/2-d*u,m=n/2-h*u;return{x:f,y:m,zoom:u}},hs=(t,e=0)=>t.transition().duration(e);function tw(t,e,n,r){return(e[n]||[]).reduce((i,s)=>{var o,a;return`${t.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:t.id,x:(((o=t.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function f4(t,e,n,r,i,s){const{x:o,y:a}=Ui(t),u=e.elementsFromPoint(o,a).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const S=Am(void 0,u),P=u.getAttribute("data-handleid"),y=s({nodeId:b,id:P,type:S});if(y){const v=i.find(T=>T.nodeId===b&&T.type===S&&T.id===P);return{handle:{id:P,type:S,nodeId:b,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:y}}}}let d=[],h=1/0;if(i.forEach(b=>{const S=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(S<=r){const P=s(b);S<=h&&(S<h?d=[{handle:b,validHandleResult:P}]:S===h&&d.push({handle:b,validHandleResult:P}),h=S)}}),!d.length)return{handle:null,validHandleResult:hb()};if(d.length===1)return d[0];const f=d.some(({validHandleResult:b})=>b.isValid),m=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:S})=>m?b.type==="target":f?S.isValid:!0)||d[0]}const p4={source:null,target:null,sourceHandle:null,targetHandle:null},hb=()=>({handleDomNode:null,isValid:!1,connection:p4,endHandle:null});function fb(t,e,n,r,i,s,o){const a=i==="target",l=o.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...hb(),handleDomNode:l};if(l){const d=Am(void 0,l),h=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),S={source:a?h:n,sourceHandle:a?f:r,target:a?n:h,targetHandle:a?r:f};u.connection=S,m&&b&&(e===Ds.Strict?a&&d==="source"||!a&&d==="target":h!==n||f!==r)&&(u.endHandle={nodeId:h,handleId:f,type:d},u.isValid=s(S))}return u}function g4({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,s)=>{if(s[nt]){const{handleBounds:o}=s[nt];let a=[],l=[];o&&(a=tw(s,o,"source",`${e}-${n}-${r}`),l=tw(s,o,"target",`${e}-${n}-${r}`)),i.push(...a,...l)}return i},[])}function Am(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function pf(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function m4(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function pb({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:u}){const d=XE(t.target),{connectionMode:h,domNode:f,autoPanOnConnect:m,connectionRadius:b,onConnectStart:S,panBy:P,getNodes:y,cancelConnection:v}=s();let T=0,R;const{x:L,y:V}=Ui(t),I=d==null?void 0:d.elementFromPoint(L,V),E=Am(l,I),_=f==null?void 0:f.getBoundingClientRect();if(!_||!E)return;let x,C=Ui(t,_),A=!1,k=null,N=!1,j=null;const O=g4({nodes:y(),nodeId:n,handleId:e,handleType:E}),B=()=>{if(!m)return;const[U,W]=YE(C,_);P({x:U,y:W}),T=requestAnimationFrame(B)};o({connectionPosition:C,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:E,connectionStartHandle:{nodeId:n,handleId:e,type:E},connectionEndHandle:null}),S==null||S(t,{nodeId:n,handleId:e,handleType:E});function $(U){const{transform:W}=s();C=Ui(U,_);const{handle:F,validHandleResult:Q}=f4(U,d,Bp(C,W,!1,[1,1]),b,O,G=>fb(G,h,n,e,i?"target":"source",a,d));if(R=F,A||(B(),A=!0),j=Q.handleDomNode,k=Q.connection,N=Q.isValid,o({connectionPosition:R&&N?lb({x:R.x,y:R.y},W):C,connectionStatus:m4(!!R,N),connectionEndHandle:Q.endHandle}),!R&&!N&&!j)return pf(x);k.source!==k.target&&j&&(pf(x),x=j,j.classList.add("connecting","react-flow__handle-connecting"),j.classList.toggle("valid",N),j.classList.toggle("react-flow__handle-valid",N))}function M(U){var W,F;(R||j)&&k&&N&&(r==null||r(k)),(F=(W=s()).onConnectEnd)==null||F.call(W,U),l&&(u==null||u(U)),pf(x),v(),cancelAnimationFrame(T),A=!1,N=!1,k=null,j=null,d.removeEventListener("mousemove",$),d.removeEventListener("mouseup",M),d.removeEventListener("touchmove",$),d.removeEventListener("touchend",M)}d.addEventListener("mousemove",$),d.addEventListener("mouseup",M),d.addEventListener("touchmove",$),d.addEventListener("touchend",M)}const nw=()=>!0,y4=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),v4=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n}},gb=D.forwardRef(({type:t="source",position:e=oe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:u,onMouseDown:d,onTouchStart:h,...f},m)=>{var _,x;const b=o||null,S=t==="target",P=ht(),y=ob(),{connectOnClick:v,noPanClassName:T}=je(y4,St),{connecting:R,clickConnecting:L}=je(v4(y,b,t),St);y||(x=(_=P.getState()).onError)==null||x.call(_,"010",ni.error010());const V=C=>{const{defaultEdgeOptions:A,onConnect:k,hasDefaultEdges:N}=P.getState(),j={...A,...C};if(N){const{edges:O,setEdges:B}=P.getState();B(ab(j,O))}k==null||k(j),a==null||a(j)},I=C=>{if(!y)return;const A=tb(C);i&&(A&&C.button===0||!A)&&pb({event:C,handleId:b,nodeId:y,onConnect:V,isTarget:S,getState:P.getState,setState:P.setState,isValidConnection:n||P.getState().isValidConnection||nw}),A?d==null||d(C):h==null||h(C)},E=C=>{const{onClickConnectStart:A,onClickConnectEnd:k,connectionClickStartHandle:N,connectionMode:j,isValidConnection:O}=P.getState();if(!y||!N&&!i)return;if(!N){A==null||A(C,{nodeId:y,handleId:b,handleType:t}),P.setState({connectionClickStartHandle:{nodeId:y,type:t,handleId:b}});return}const B=XE(C.target),$=n||O||nw,{connection:M,isValid:U}=fb({nodeId:y,id:b,type:t},j,N.nodeId,N.handleId||null,N.type,$,B);U&&V(M),k==null||k(C),P.setState({connectionClickStartHandle:null})};return q.createElement("div",{"data-handleid":b,"data-nodeid":y,"data-handlepos":e,"data-id":`${y}-${b}-${t}`,className:It(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",T,u,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,connecting:L,connectionindicator:r&&(i&&!R||s&&R)}]),onMouseDown:I,onTouchStart:I,onClick:v?E:void 0,ref:m,...f},l)});gb.displayName="Handle";var hn=D.memo(gb);const mb=({data:t,isConnectable:e,targetPosition:n=oe.Top,sourcePosition:r=oe.Bottom})=>q.createElement(q.Fragment,null,q.createElement(hn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,q.createElement(hn,{type:"source",position:r,isConnectable:e}));mb.displayName="DefaultNode";var Hp=D.memo(mb);const yb=({data:t,isConnectable:e,sourcePosition:n=oe.Bottom})=>q.createElement(q.Fragment,null,t==null?void 0:t.label,q.createElement(hn,{type:"source",position:n,isConnectable:e}));yb.displayName="InputNode";var vb=D.memo(yb);const wb=({data:t,isConnectable:e,targetPosition:n=oe.Top})=>q.createElement(q.Fragment,null,q.createElement(hn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);wb.displayName="OutputNode";var _b=D.memo(wb);const Rm=()=>null;Rm.displayName="GroupNode";const w4=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),ou=t=>t.id;function _4(t,e){return St(t.selectedNodes.map(ou),e.selectedNodes.map(ou))&&St(t.selectedEdges.map(ou),e.selectedEdges.map(ou))}const xb=D.memo(({onSelectionChange:t})=>{const e=ht(),{selectedNodes:n,selectedEdges:r}=je(w4,_4);return D.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(s=>s(i))},[n,r,t]),null});xb.displayName="SelectionListener";const x4=t=>!!t.onSelectionChange;function E4({onSelectionChange:t}){const e=je(x4);return t||e?q.createElement(xb,{onSelectionChange:t}):null}const b4=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function ro(t,e){D.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function we(t,e,n){D.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const S4=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:b,minZoom:S,maxZoom:P,nodeExtent:y,onNodesChange:v,onEdgesChange:T,elementsSelectable:R,connectionMode:L,snapGrid:V,snapToGrid:I,translateExtent:E,connectOnClick:_,defaultEdgeOptions:x,fitView:C,fitViewOptions:A,onNodesDelete:k,onEdgesDelete:N,onNodeDrag:j,onNodeDragStart:O,onNodeDragStop:B,onSelectionDrag:$,onSelectionDragStart:M,onSelectionDragStop:U,noPanClassName:W,nodeOrigin:F,rfId:Q,autoPanOnConnect:G,autoPanOnNodeDrag:Z,onError:te,connectionRadius:ue,isValidConnection:ae,nodeDragThreshold:ve})=>{const{setNodes:pe,setEdges:Ie,setDefaultNodesAndEdges:Ce,setMinZoom:$e,setMaxZoom:De,setTranslateExtent:ke,setNodeExtent:rt,reset:Ee}=je(b4,St),ne=ht();return D.useEffect(()=>{const be=r==null?void 0:r.map(vt=>({...vt,...x}));return Ce(n,be),()=>{Ee()}},[]),we("defaultEdgeOptions",x,ne.setState),we("connectionMode",L,ne.setState),we("onConnect",i,ne.setState),we("onConnectStart",s,ne.setState),we("onConnectEnd",o,ne.setState),we("onClickConnectStart",a,ne.setState),we("onClickConnectEnd",l,ne.setState),we("nodesDraggable",u,ne.setState),we("nodesConnectable",d,ne.setState),we("nodesFocusable",h,ne.setState),we("edgesFocusable",f,ne.setState),we("edgesUpdatable",m,ne.setState),we("elementsSelectable",R,ne.setState),we("elevateNodesOnSelect",b,ne.setState),we("snapToGrid",I,ne.setState),we("snapGrid",V,ne.setState),we("onNodesChange",v,ne.setState),we("onEdgesChange",T,ne.setState),we("connectOnClick",_,ne.setState),we("fitViewOnInit",C,ne.setState),we("fitViewOnInitOptions",A,ne.setState),we("onNodesDelete",k,ne.setState),we("onEdgesDelete",N,ne.setState),we("onNodeDrag",j,ne.setState),we("onNodeDragStart",O,ne.setState),we("onNodeDragStop",B,ne.setState),we("onSelectionDrag",$,ne.setState),we("onSelectionDragStart",M,ne.setState),we("onSelectionDragStop",U,ne.setState),we("noPanClassName",W,ne.setState),we("nodeOrigin",F,ne.setState),we("rfId",Q,ne.setState),we("autoPanOnConnect",G,ne.setState),we("autoPanOnNodeDrag",Z,ne.setState),we("onError",te,ne.setState),we("connectionRadius",ue,ne.setState),we("isValidConnection",ae,ne.setState),we("nodeDragThreshold",ve,ne.setState),ro(t,pe),ro(e,Ie),ro(S,$e),ro(P,De),ro(E,ke),ro(y,rt),null},rw={display:"none"},T4={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Eb="react-flow__node-desc",bb="react-flow__edge-desc",I4="react-flow__aria-live",C4=t=>t.ariaLiveMessage;function k4({rfId:t}){const e=je(C4);return q.createElement("div",{id:`${I4}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:T4},e)}function A4({rfId:t,disableKeyboardA11y:e}){return q.createElement(q.Fragment,null,q.createElement("div",{id:`${Eb}-${t}`,style:rw},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),q.createElement("div",{id:`${bb}-${t}`,style:rw},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&q.createElement(k4,{rfId:t}))}var Gl=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=D.useState(!1),i=D.useRef(!1),s=D.useRef(new Set([])),[o,a]=D.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,f)=>h.concat(...f),[]);return[u,d]}return[[],[]]},[t]);return D.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=m=>{if(i.current=m.ctrlKey||m.metaKey||m.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&Fp(m))return!1;const S=sw(m.code,a);s.current.add(m[S]),iw(o,s.current,!1)&&(m.preventDefault(),r(!0))},h=m=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&Fp(m))return!1;const S=sw(m.code,a);iw(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(m[S]),m.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",f)}}},[t,r]),n};function iw(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function sw(t,e){return e.includes(t)?"code":"key"}function Sb(t,e,n,r){var a,l;const i=t.parentNode||t.parentId;if(!i)return n;const s=e.get(i),o=Ts(s,r);return Sb(s,e,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[nt])==null?void 0:a.z)??0)>(n.z??0)?((l=s[nt])==null?void 0:l.z)??0:n.z??0},r)}function Tb(t,e,n){t.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!t.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:o,y:a,z:l}=Sb(r,t,{...r.position,z:((s=r[nt])==null?void 0:s.z)??0},e);r.positionAbsolute={x:o,y:a},r[nt].z=l,n!=null&&n[r.id]&&(r[nt].isParent=!0)}})}function gf(t,e,n,r){const i=new Map,s={},o=r?1e3:0;return t.forEach(a=>{var m;const l=(zn(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=e.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},h=a.parentNode||a.parentId;h&&(s[h]=!0);const f=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(d,nt,{enumerable:!1,value:{handleBounds:f||(m=u==null?void 0:u[nt])==null?void 0:m.handleBounds,z:l}}),i.set(a.id,d)}),Tb(i,n,s),i}function Ib(t,e={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),f=e.initial&&!u&&d;if(a&&l&&(f||!e.initial)){const b=n().filter(P=>{var v;const y=e.includeHiddenNodes?P.width&&P.height:!P.hidden;return(v=e.nodes)!=null&&v.length?y&&e.nodes.some(T=>T.id===P.id):y}),S=b.every(P=>P.width&&P.height);if(b.length>0&&S){const P=hc(b,h),{x:y,y:v,zoom:T}=db(P,r,i,e.minZoom??s,e.maxZoom??o,e.padding??.1),R=Gr.translate(y,v).scale(T);return typeof e.duration=="number"&&e.duration>0?a.transform(hs(l,e.duration),R):a.transform(l,R),!0}}return!1}function R4(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[nt]:r[nt],selected:n.selected})}),new Map(e)}function N4(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function au({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&r({nodeInternals:R4(t,i)}),o==null||o(t)),e!=null&&e.length&&(u&&r({edges:N4(e,s)}),a==null||a(e))}const io=()=>{},P4={zoomIn:io,zoomOut:io,zoomTo:io,getZoom:()=>1,setViewport:io,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:io,fitBounds:io,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},D4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),z4=()=>{const t=ht(),{d3Zoom:e,d3Selection:n}=je(D4,St);return D.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(hs(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(hs(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>e.scaleTo(hs(n,s==null?void 0:s.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,s)=>{const[o,a,l]=t.getState().transform,u=Gr.translate(i.x??o,i.y??a).scale(i.zoom??l);e.transform(hs(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,o]=t.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>Ib(t.getState,i),setCenter:(i,s,o)=>{const{width:a,height:l,maxZoom:u}=t.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,h=a/2-i*d,f=l/2-s*d,m=Gr.translate(h,f).scale(d);e.transform(hs(n,o==null?void 0:o.duration),m)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:f}=db(i,o,a,l,u,(s==null?void 0:s.padding)??.1),m=Gr.translate(d,h).scale(f);e.transform(hs(n,s==null?void 0:s.duration),m)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Bp(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:l}=t.getState();if(!l)return i;const{x:u,y:d}=l.getBoundingClientRect(),h={x:i.x-u,y:i.y-d};return Bp(h,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=t.getState();if(!o)return i;const{x:a,y:l}=o.getBoundingClientRect(),u=lb(i,s);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:P4,[e,n])};function Sr(){const t=z4(),e=ht(),n=D.useCallback(()=>e.getState().getNodes().map(S=>({...S})),[]),r=D.useCallback(S=>e.getState().nodeInternals.get(S),[]),i=D.useCallback(()=>{const{edges:S=[]}=e.getState();return S.map(P=>({...P}))},[]),s=D.useCallback(S=>{const{edges:P=[]}=e.getState();return P.find(y=>y.id===S)},[]),o=D.useCallback(S=>{const{getNodes:P,setNodes:y,hasDefaultNodes:v,onNodesChange:T}=e.getState(),R=P(),L=typeof S=="function"?S(R):S;if(v)y(L);else if(T){const V=L.length===0?R.map(I=>({type:"remove",id:I.id})):L.map(I=>({item:I,type:"reset"}));T(V)}},[]),a=D.useCallback(S=>{const{edges:P=[],setEdges:y,hasDefaultEdges:v,onEdgesChange:T}=e.getState(),R=typeof S=="function"?S(P):S;if(v)y(R);else if(T){const L=R.length===0?P.map(V=>({type:"remove",id:V.id})):R.map(V=>({item:V,type:"reset"}));T(L)}},[]),l=D.useCallback(S=>{const P=Array.isArray(S)?S:[S],{getNodes:y,setNodes:v,hasDefaultNodes:T,onNodesChange:R}=e.getState();if(T){const V=[...y(),...P];v(V)}else if(R){const L=P.map(V=>({item:V,type:"add"}));R(L)}},[]),u=D.useCallback(S=>{const P=Array.isArray(S)?S:[S],{edges:y=[],setEdges:v,hasDefaultEdges:T,onEdgesChange:R}=e.getState();if(T)v([...y,...P]);else if(R){const L=P.map(V=>({item:V,type:"add"}));R(L)}},[]),d=D.useCallback(()=>{const{getNodes:S,edges:P=[],transform:y}=e.getState(),[v,T,R]=y;return{nodes:S().map(L=>({...L})),edges:P.map(L=>({...L})),viewport:{x:v,y:T,zoom:R}}},[]),h=D.useCallback(({nodes:S,edges:P})=>{const{nodeInternals:y,getNodes:v,edges:T,hasDefaultNodes:R,hasDefaultEdges:L,onNodesDelete:V,onEdgesDelete:I,onNodesChange:E,onEdgesChange:_}=e.getState(),x=(S||[]).map(j=>j.id),C=(P||[]).map(j=>j.id),A=v().reduce((j,O)=>{const B=O.parentNode||O.parentId,$=!x.includes(O.id)&&B&&j.find(U=>U.id===B);return(typeof O.deletable=="boolean"?O.deletable:!0)&&(x.includes(O.id)||$)&&j.push(O),j},[]),k=T.filter(j=>typeof j.deletable=="boolean"?j.deletable:!0),N=k.filter(j=>C.includes(j.id));if(A||N){const j=ub(A,k),O=[...N,...j],B=O.reduce(($,M)=>($.includes(M.id)||$.push(M.id),$),[]);if((L||R)&&(L&&e.setState({edges:T.filter($=>!B.includes($.id))}),R&&(A.forEach($=>{y.delete($.id)}),e.setState({nodeInternals:new Map(y)}))),B.length>0&&(I==null||I(O),_&&_(B.map($=>({id:$,type:"remove"})))),A.length>0&&(V==null||V(A),E)){const $=A.map(M=>({id:M.id,type:"remove"}));E($)}}},[]),f=D.useCallback(S=>{const P=r4(S),y=P?null:e.getState().nodeInternals.get(S.id);return!P&&!y?[null,null,P]:[P?S:Yv(y),y,P]},[]),m=D.useCallback((S,P=!0,y)=>{const[v,T,R]=f(S);return v?(y||e.getState().getNodes()).filter(L=>{if(!R&&(L.id===T.id||!L.positionAbsolute))return!1;const V=Yv(L),I=$p(V,v);return P&&I>0||I>=v.width*v.height}):[]},[]),b=D.useCallback((S,P,y=!0)=>{const[v]=f(S);if(!v)return!1;const T=$p(v,P);return y&&T>0||T>=v.width*v.height},[]);return D.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:m,isNodeIntersecting:b}),[t,n,r,i,s,o,a,l,u,d,h,m,b])}const L4={actInsideInputWithModifier:!1};var O4=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ht(),{deleteElements:r}=Sr(),i=Gl(t,L4),s=Gl(e);D.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),l=a().filter(d=>d.selected),u=o.filter(d=>d.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),D.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function V4(t){const e=ht();D.useEffect(()=>{let n;const r=()=>{var s,o;if(!t.current)return;const i=Em(t.current);(i.height===0||i.width===0)&&((o=(s=e.getState()).onError)==null||o.call(s,"004",ni.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Nm={position:"absolute",width:"100%",height:"100%",top:0,left:0},M4=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,lu=t=>({x:t.x,y:t.y,zoom:t.k}),so=(t,e)=>t.target.closest(`.${e}`),ow=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),aw=t=>{const e=t.ctrlKey&&wd()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},j4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),$4=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=vs.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:f,translateExtent:m,minZoom:b,maxZoom:S,zoomActivationKeyCode:P,preventScrolling:y=!0,children:v,noWheelClassName:T,noPanClassName:R})=>{const L=D.useRef(),V=ht(),I=D.useRef(!1),E=D.useRef(!1),_=D.useRef(null),x=D.useRef({x:0,y:0,zoom:0}),{d3Zoom:C,d3Selection:A,d3ZoomHandler:k,userSelectionActive:N}=je(j4,St),j=Gl(P),O=D.useRef(0),B=D.useRef(!1),$=D.useRef();return V4(_),D.useEffect(()=>{if(_.current){const M=_.current.getBoundingClientRect(),U=GE().scaleExtent([b,S]).translateExtent(m),W=_n(_.current).call(U),F=Gr.translate(f.x,f.y).scale(Qi(f.zoom,b,S)),Q=[[0,0],[M.width,M.height]],G=U.constrain()(F,Q,m);U.transform(W,G),U.wheelDelta(aw),V.setState({d3Zoom:U,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:_.current.closest(".react-flow")})}},[]),D.useEffect(()=>{A&&C&&(o&&!j&&!N?A.on("wheel.zoom",M=>{if(so(M,T))return!1;M.preventDefault(),M.stopImmediatePropagation();const U=A.property("__zoom").k||1;if(M.ctrlKey&&s){const ae=Gn(M),ve=aw(M),pe=U*Math.pow(2,ve);C.scaleTo(A,pe,ae,M);return}const W=M.deltaMode===1?20:1;let F=l===vs.Vertical?0:M.deltaX*W,Q=l===vs.Horizontal?0:M.deltaY*W;!wd()&&M.shiftKey&&l!==vs.Vertical&&(F=M.deltaY*W,Q=0),C.translateBy(A,-(F/U)*a,-(Q/U)*a,{internal:!0});const G=lu(A.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:te,onViewportChangeEnd:ue}=V.getState();clearTimeout($.current),B.current||(B.current=!0,e==null||e(M,G),Z==null||Z(G)),B.current&&(t==null||t(M,G),te==null||te(G),$.current=setTimeout(()=>{n==null||n(M,G),ue==null||ue(G),B.current=!1},150))},{passive:!1}):typeof k<"u"&&A.on("wheel.zoom",function(M,U){if(!y&&M.type==="wheel"&&!M.ctrlKey||so(M,T))return null;M.preventDefault(),k.call(this,M,U)},{passive:!1}))},[N,o,l,A,C,k,j,s,y,T,e,t,n]),D.useEffect(()=>{C&&C.on("start",M=>{var F,Q;if(!M.sourceEvent||M.sourceEvent.internal)return null;O.current=(F=M.sourceEvent)==null?void 0:F.button;const{onViewportChangeStart:U}=V.getState(),W=lu(M.transform);I.current=!0,x.current=W,((Q=M.sourceEvent)==null?void 0:Q.type)==="mousedown"&&V.setState({paneDragging:!0}),U==null||U(W),e==null||e(M.sourceEvent,W)})},[C,e]),D.useEffect(()=>{C&&(N&&!I.current?C.on("zoom",null):N||C.on("zoom",M=>{var W;const{onViewportChange:U}=V.getState();if(V.setState({transform:[M.transform.x,M.transform.y,M.transform.k]}),E.current=!!(r&&ow(h,O.current??0)),(t||U)&&!((W=M.sourceEvent)!=null&&W.internal)){const F=lu(M.transform);U==null||U(F),t==null||t(M.sourceEvent,F)}}))},[N,C,t,h,r]),D.useEffect(()=>{C&&C.on("end",M=>{if(!M.sourceEvent||M.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=V.getState();if(I.current=!1,V.setState({paneDragging:!1}),r&&ow(h,O.current??0)&&!E.current&&r(M.sourceEvent),E.current=!1,(n||U)&&M4(x.current,M.transform)){const W=lu(M.transform);x.current=W,clearTimeout(L.current),L.current=setTimeout(()=>{U==null||U(W),n==null||n(M.sourceEvent,W)},o?150:0)}})},[C,o,h,n,r]),D.useEffect(()=>{C&&C.filter(M=>{const U=j||i,W=s&&M.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&M.button===1&&M.type==="mousedown"&&(so(M,"react-flow__node")||so(M,"react-flow__edge")))return!0;if(!h&&!U&&!o&&!u&&!s||N||!u&&M.type==="dblclick"||so(M,T)&&M.type==="wheel"||so(M,R)&&(M.type!=="wheel"||o&&M.type==="wheel"&&!j)||!s&&M.ctrlKey&&M.type==="wheel"||!U&&!o&&!W&&M.type==="wheel"||!h&&(M.type==="mousedown"||M.type==="touchstart")||Array.isArray(h)&&!h.includes(M.button)&&M.type==="mousedown")return!1;const F=Array.isArray(h)&&h.includes(M.button)||!M.button||M.button<=1;return(!M.ctrlKey||M.type==="wheel")&&F})},[N,C,i,s,o,u,h,d,j]),q.createElement("div",{className:"react-flow__renderer",ref:_,style:Nm},v)},F4=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function U4(){const{userSelectionActive:t,userSelectionRect:e}=je(F4,St);return t&&e?q.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function lw(t,e){const n=e.parentNode||e.parentId,r=t.find(i=>i.id===n);if(r){const i=e.position.x+e.width-r.width,s=e.position.y+e.height-r.height;if(i>0||s>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),e.position.x<0){const o=Math.abs(e.position.x);r.position.x=r.position.x-o,r.style.width+=o,e.position.x=0}if(e.position.y<0){const o=Math.abs(e.position.y);r.position.y=r.position.y-o,r.style.height+=o,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Cb(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const s=t.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&lw(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&lw(r,o);break}case"remove":return r}return r.push(o),r},n)}function kb(t,e){return Cb(t,e)}function B4(t,e){return Cb(t,e)}const Si=(t,e)=>({id:t,type:"select",selected:e});function Io(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Si(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Si(r.id,!1))),n},[])}const mf=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},H4=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Ab=D.memo(({isSelecting:t,selectionMode:e=Wl.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const f=D.useRef(null),m=ht(),b=D.useRef(0),S=D.useRef(0),P=D.useRef(),{userSelectionActive:y,elementsSelectable:v,dragging:T}=je(H4,St),R=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,S.current=0},L=k=>{s==null||s(k),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},V=k=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){k.preventDefault();return}o==null||o(k)},I=a?k=>a(k):void 0,E=k=>{const{resetSelectedElements:N,domNode:j}=m.getState();if(P.current=j==null?void 0:j.getBoundingClientRect(),!v||!t||k.button!==0||k.target!==f.current||!P.current)return;const{x:O,y:B}=Ui(k,P.current);N(),m.setState({userSelectionRect:{width:0,height:0,startX:O,startY:B,x:O,y:B}}),r==null||r(k)},_=k=>{const{userSelectionRect:N,nodeInternals:j,edges:O,transform:B,onNodesChange:$,onEdgesChange:M,nodeOrigin:U,getNodes:W}=m.getState();if(!t||!P.current||!N)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const F=Ui(k,P.current),Q=N.startX??0,G=N.startY??0,Z={...N,x:F.x<Q?F.x:Q,y:F.y<G?F.y:G,width:Math.abs(F.x-Q),height:Math.abs(F.y-G)},te=W(),ue=cb(j,Z,B,e===Wl.Partial,!0,U),ae=ub(ue,O).map(pe=>pe.id),ve=ue.map(pe=>pe.id);if(b.current!==ve.length){b.current=ve.length;const pe=Io(te,ve);pe.length&&($==null||$(pe))}if(S.current!==ae.length){S.current=ae.length;const pe=Io(O,ae);pe.length&&(M==null||M(pe))}m.setState({userSelectionRect:Z})},x=k=>{if(k.button!==0)return;const{userSelectionRect:N}=m.getState();!y&&N&&k.target===f.current&&(L==null||L(k)),m.setState({nodesSelectionActive:b.current>0}),R(),i==null||i(k)},C=k=>{y&&(m.setState({nodesSelectionActive:b.current>0}),i==null||i(k)),R()},A=v&&(t||y);return q.createElement("div",{className:It(["react-flow__pane",{dragging:T,selection:t}]),onClick:A?void 0:mf(L,f),onContextMenu:mf(V,f),onWheel:mf(I,f),onMouseEnter:A?void 0:l,onMouseDown:A?E:void 0,onMouseMove:A?_:u,onMouseUp:A?x:void 0,onMouseLeave:A?C:d,ref:f,style:Nm},h,q.createElement(U4,null))});Ab.displayName="Pane";function Rb(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:Rb(r,e):!1}function cw(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function q4(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!Rb(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function W4(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function Nb(t,e,n,r,i=[0,0],s){const o=W4(t,t.extent||r);let a=o;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=n.get(l),{x:f,y:m}=Ts(h,i).positionAbsolute;a=h&&zn(f)&&zn(m)&&zn(h.width)&&zn(h.height)?[[f+t.width*i[0],m+t.height*i[1]],[f+h.width-t.width+t.width*i[0],m+h.height-t.height+t.height*i[1]]]:a}else s==null||s("005",ni.error005()),a=o;else if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:f,y:m}=Ts(h,i).positionAbsolute;a=[[t.extent[0][0]+f,t.extent[0][1]+m],[t.extent[1][0]+f,t.extent[1][1]+m]]}let u={x:0,y:0};if(l){const h=n.get(l);u=Ts(h,i).positionAbsolute}const d=a&&a!=="parent"?bm(e,a):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function yf({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const uw=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const s=Array.from(i),o=e.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...Em(l)}})};function qa(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function qp({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:l}=e.getState(),u=a.get(t);if(!u){l==null||l("012",ni.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):i([t])}function Pb(){const t=ht();return D.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=t.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:s?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function vf(t){return(e,n,r)=>t==null?void 0:t(e,r)}function Db({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=ht(),[l,u]=D.useState(!1),d=D.useRef([]),h=D.useRef({x:null,y:null}),f=D.useRef(0),m=D.useRef(null),b=D.useRef({x:0,y:0}),S=D.useRef(null),P=D.useRef(!1),y=D.useRef(!1),v=D.useRef(!1),T=Pb();return D.useEffect(()=>{if(t!=null&&t.current){const R=_n(t.current),L=({x:E,y:_})=>{const{nodeInternals:x,onNodeDrag:C,onSelectionDrag:A,updateNodePositions:k,nodeExtent:N,snapGrid:j,snapToGrid:O,nodeOrigin:B,onError:$}=a.getState();h.current={x:E,y:_};let M=!1,U={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&N){const F=hc(d.current,B);U=ql(F)}if(d.current=d.current.map(F=>{const Q={x:E-F.distance.x,y:_-F.distance.y};O&&(Q.x=j[0]*Math.round(Q.x/j[0]),Q.y=j[1]*Math.round(Q.y/j[1]));const G=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];d.current.length>1&&N&&!F.extent&&(G[0][0]=F.positionAbsolute.x-U.x+N[0][0],G[1][0]=F.positionAbsolute.x+(F.width??0)-U.x2+N[1][0],G[0][1]=F.positionAbsolute.y-U.y+N[0][1],G[1][1]=F.positionAbsolute.y+(F.height??0)-U.y2+N[1][1]);const Z=Nb(F,Q,x,G,B,$);return M=M||F.position.x!==Z.position.x||F.position.y!==Z.position.y,F.position=Z.position,F.positionAbsolute=Z.positionAbsolute,F}),!M)return;k(d.current,!0,!0),u(!0);const W=i?C:vf(A);if(W&&S.current){const[F,Q]=yf({nodeId:i,dragItems:d.current,nodeInternals:x});W(S.current,F,Q)}},V=()=>{if(!m.current)return;const[E,_]=YE(b.current,m.current);if(E!==0||_!==0){const{transform:x,panBy:C}=a.getState();h.current.x=(h.current.x??0)-E/x[2],h.current.y=(h.current.y??0)-_/x[2],C({x:E,y:_})&&L(h.current)}f.current=requestAnimationFrame(V)},I=E=>{var B;const{nodeInternals:_,multiSelectionActive:x,nodesDraggable:C,unselectNodesAndEdges:A,onNodeDragStart:k,onSelectionDragStart:N}=a.getState();y.current=!0;const j=i?k:vf(N);(!o||!s)&&!x&&i&&((B=_.get(i))!=null&&B.selected||A()),i&&s&&o&&qp({id:i,store:a,nodeRef:t});const O=T(E);if(h.current=O,d.current=q4(_,C,O,i),j&&d.current){const[$,M]=yf({nodeId:i,dragItems:d.current,nodeInternals:_});j(E.sourceEvent,$,M)}};if(e)R.on(".drag",null);else{const E=zE().on("start",_=>{const{domNode:x,nodeDragThreshold:C}=a.getState();C===0&&I(_),v.current=!1;const A=T(_);h.current=A,m.current=(x==null?void 0:x.getBoundingClientRect())||null,b.current=Ui(_.sourceEvent,m.current)}).on("drag",_=>{var k,N;const x=T(_),{autoPanOnNodeDrag:C,nodeDragThreshold:A}=a.getState();if(_.sourceEvent.type==="touchmove"&&_.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!P.current&&y.current&&C&&(P.current=!0,V()),!y.current){const j=x.xSnapped-(((k=h==null?void 0:h.current)==null?void 0:k.x)??0),O=x.ySnapped-(((N=h==null?void 0:h.current)==null?void 0:N.y)??0);Math.sqrt(j*j+O*O)>A&&I(_)}(h.current.x!==x.xSnapped||h.current.y!==x.ySnapped)&&d.current&&y.current&&(S.current=_.sourceEvent,b.current=Ui(_.sourceEvent,m.current),L(x))}}).on("end",_=>{if(!(!y.current||v.current)&&(u(!1),P.current=!1,y.current=!1,cancelAnimationFrame(f.current),d.current)){const{updateNodePositions:x,nodeInternals:C,onNodeDragStop:A,onSelectionDragStop:k}=a.getState(),N=i?A:vf(k);if(x(d.current,!1,!1),N){const[j,O]=yf({nodeId:i,dragItems:d.current,nodeInternals:C});N(_.sourceEvent,j,O)}}}).filter(_=>{const x=_.target;return!_.button&&(!n||!cw(x,`.${n}`,t))&&(!r||cw(x,r,t))});return R.call(E),()=>{R.on(".drag",null)}}}},[t,e,n,r,s,a,i,o,T]),l}function zb(){const t=ht();return D.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=o().filter(v=>v.selected&&(v.draggable||d&&typeof v.draggable>"u")),f=a?l[0]:5,m=a?l[1]:5,b=n.isShiftPressed?4:1,S=n.x*f*b,P=n.y*m*b,y=h.map(v=>{if(v.positionAbsolute){const T={x:v.positionAbsolute.x+S,y:v.positionAbsolute.y+P};a&&(T.x=l[0]*Math.round(T.x/l[0]),T.y=l[1]*Math.round(T.y/l[1]));const{positionAbsolute:R,position:L}=Nb(v,T,r,i,void 0,u);v.position=L,v.positionAbsolute=R}return v});s(y,!0,!1)},[])}const Lo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Wa=t=>{const e=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:f,onMouseLeave:m,onContextMenu:b,onDoubleClick:S,style:P,className:y,isDraggable:v,isSelectable:T,isConnectable:R,isFocusable:L,selectNodesOnDrag:V,sourcePosition:I,targetPosition:E,hidden:_,resizeObserver:x,dragHandle:C,zIndex:A,isParent:k,noDragClassName:N,noPanClassName:j,initialized:O,disableKeyboardA11y:B,ariaLabel:$,rfId:M,hasHandleBounds:U})=>{const W=ht(),F=D.useRef(null),Q=D.useRef(null),G=D.useRef(I),Z=D.useRef(E),te=D.useRef(r),ue=T||v||d||h||f||m,ae=zb(),ve=qa(n,W.getState,h),pe=qa(n,W.getState,f),Ie=qa(n,W.getState,m),Ce=qa(n,W.getState,b),$e=qa(n,W.getState,S),De=Ee=>{const{nodeDragThreshold:ne}=W.getState();if(T&&(!V||!v||ne>0)&&qp({id:n,store:W,nodeRef:F}),d){const be=W.getState().nodeInternals.get(n);be&&d(Ee,{...be})}},ke=Ee=>{if(!Fp(Ee)&&!B)if(eb.includes(Ee.key)&&T){const ne=Ee.key==="Escape";qp({id:n,store:W,unselect:ne,nodeRef:F})}else v&&u&&Object.prototype.hasOwnProperty.call(Lo,Ee.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${Ee.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),ae({x:Lo[Ee.key].x,y:Lo[Ee.key].y,isShiftPressed:Ee.shiftKey}))};D.useEffect(()=>()=>{Q.current&&(x==null||x.unobserve(Q.current),Q.current=null)},[]),D.useEffect(()=>{if(F.current&&!_){const Ee=F.current;(!O||!U||Q.current!==Ee)&&(Q.current&&(x==null||x.unobserve(Q.current)),x==null||x.observe(Ee),Q.current=Ee)}},[_,O,U]),D.useEffect(()=>{const Ee=te.current!==r,ne=G.current!==I,be=Z.current!==E;F.current&&(Ee||ne||be)&&(Ee&&(te.current=r),ne&&(G.current=I),be&&(Z.current=E),W.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,r,I,E]);const rt=Db({nodeRef:F,disabled:_||!v,noDragClassName:N,handleSelector:C,nodeId:n,isSelectable:T,selectNodesOnDrag:V});return _?null:q.createElement("div",{className:It(["react-flow__node",`react-flow__node-${r}`,{[j]:v},y,{selected:u,selectable:T,parent:k,dragging:rt}]),ref:F,style:{zIndex:A,transform:`translate(${a}px,${l}px)`,pointerEvents:ue?"all":"none",visibility:O?"visible":"hidden",...P},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ve,onMouseMove:pe,onMouseLeave:Ie,onContextMenu:Ce,onClick:De,onDoubleClick:$e,onKeyDown:L?ke:void 0,tabIndex:L?0:void 0,role:L?"button":void 0,"aria-describedby":B?void 0:`${Eb}-${M}`,"aria-label":$},q.createElement(c4,{value:n},q.createElement(t,{id:n,data:i,type:r,xPos:s,yPos:o,selected:u,isConnectable:R,sourcePosition:I,targetPosition:E,dragging:rt,dragHandle:C,zIndex:A})))};return e.displayName="NodeWrapper",D.memo(e)};const K4=t=>{const e=t.getNodes().filter(n=>n.selected);return{...hc(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function G4({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=ht(),{width:i,height:s,x:o,y:a,transformString:l,userSelectionActive:u}=je(K4,St),d=zb(),h=D.useRef(null);if(D.useEffect(()=>{var b;n||(b=h.current)==null||b.focus({preventScroll:!0})},[n]),Db({nodeRef:h}),u||!i||!s)return null;const f=t?b=>{const S=r.getState().getNodes().filter(P=>P.selected);t(b,S)}:void 0,m=b=>{Object.prototype.hasOwnProperty.call(Lo,b.key)&&d({x:Lo[b.key].x,y:Lo[b.key].y,isShiftPressed:b.shiftKey})};return q.createElement("div",{className:It(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},q.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:i,height:s,top:a,left:o}}))}var Q4=D.memo(G4);const Y4=t=>t.nodesSelectionActive,Lb=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:f,selectionMode:m,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:P,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:T,zoomOnScroll:R,zoomOnPinch:L,panOnScroll:V,panOnScrollSpeed:I,panOnScrollMode:E,zoomOnDoubleClick:_,panOnDrag:x,defaultViewport:C,translateExtent:A,minZoom:k,maxZoom:N,preventScrolling:j,onSelectionContextMenu:O,noWheelClassName:B,noPanClassName:$,disableKeyboardA11y:M})=>{const U=je(Y4),W=Gl(h),F=Gl(y),Q=F||x,G=F||V,Z=W||f&&Q!==!0;return O4({deleteKeyCode:a,multiSelectionKeyCode:P}),q.createElement($4,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:T,zoomOnScroll:R,zoomOnPinch:L,panOnScroll:G,panOnScrollSpeed:I,panOnScrollMode:E,zoomOnDoubleClick:_,panOnDrag:!W&&Q,defaultViewport:C,translateExtent:A,minZoom:k,maxZoom:N,zoomActivationKeyCode:v,preventScrolling:j,noWheelClassName:B,noPanClassName:$},q.createElement(Ab,{onSelectionStart:b,onSelectionEnd:S,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:Q,isSelecting:!!Z,selectionMode:m},t,U&&q.createElement(Q4,{onSelectionContextMenu:O,noPanClassName:$,disableKeyboardA11y:M})))};Lb.displayName="FlowRenderer";var X4=D.memo(Lb);function J4(t){return je(D.useCallback(n=>t?cb(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function Z4(t){const e={input:Wa(t.input||vb),default:Wa(t.default||Hp),output:Wa(t.output||_b),group:Wa(t.group||Rm)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Wa(t[s]||Hp),i),n);return{...e,...r}}const e5=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},t5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Ob=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=je(t5,St),a=J4(t.onlyRenderVisibleElements),l=D.useRef(),u=D.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const f=h.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(f)});return l.current=d,d},[]);return D.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),q.createElement("div",{className:"react-flow__nodes",style:Nm},a.map(d=>{var L,V,I;let h=d.type||"default";t.nodeTypes[h]||(o==null||o("003",ni.error003(h)),h="default");const f=t.nodeTypes[h]||t.nodeTypes.default,m=!!(d.draggable||e&&typeof d.draggable>"u"),b=!!(d.selectable||i&&typeof d.selectable>"u"),S=!!(d.connectable||n&&typeof d.connectable>"u"),P=!!(d.focusable||r&&typeof d.focusable>"u"),y=t.nodeExtent?bm(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,v=(y==null?void 0:y.x)??0,T=(y==null?void 0:y.y)??0,R=e5({x:v,y:T,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return q.createElement(f,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||oe.Bottom,targetPosition:d.targetPosition||oe.Top,hidden:d.hidden,xPos:v,yPos:T,xPosOrigin:R.x,yPosOrigin:R.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:b,isConnectable:S,isFocusable:P,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((L=d[nt])==null?void 0:L.z)??0,isParent:!!((V=d[nt])!=null&&V.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((I=d[nt])!=null&&I.handleBounds)})}))};Ob.displayName="NodeRenderer";var n5=D.memo(Ob);const r5=(t,e,n)=>n===oe.Left?t-e:n===oe.Right?t+e:t,i5=(t,e,n)=>n===oe.Top?t-e:n===oe.Bottom?t+e:t,dw="react-flow__edgeupdater",hw=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>q.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:It([dw,`${dw}-${a}`]),cx:r5(e,r,t),cy:i5(n,r,t),r,stroke:"transparent",fill:"transparent"}),s5=()=>!0;var oo=t=>{const e=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:b,labelBgBorderRadius:S,style:P,source:y,target:v,sourceX:T,sourceY:R,targetX:L,targetY:V,sourcePosition:I,targetPosition:E,elementsSelectable:_,hidden:x,sourceHandleId:C,targetHandleId:A,onContextMenu:k,onMouseEnter:N,onMouseMove:j,onMouseLeave:O,reconnectRadius:B,onReconnect:$,onReconnectStart:M,onReconnectEnd:U,markerEnd:W,markerStart:F,rfId:Q,ariaLabel:G,isFocusable:Z,isReconnectable:te,pathOptions:ue,interactionWidth:ae,disableKeyboardA11y:ve})=>{const pe=D.useRef(null),[Ie,Ce]=D.useState(!1),[$e,De]=D.useState(!1),ke=ht(),rt=D.useMemo(()=>`url('#${Up(F,Q)}')`,[F,Q]),Ee=D.useMemo(()=>`url('#${Up(W,Q)}')`,[W,Q]);if(x)return null;const ne=Ze=>{var tn;const{edges:ft,addSelectedEdges:Ke,unselectNodesAndEdges:pn,multiSelectionActive:en}=ke.getState(),gn=ft.find($n=>$n.id===n);gn&&(_&&(ke.setState({nodesSelectionActive:!1}),gn.selected&&en?(pn({nodes:[],edges:[gn]}),(tn=pe.current)==null||tn.blur()):Ke([n])),o&&o(Ze,gn))},be=Ha(n,ke.getState,a),vt=Ha(n,ke.getState,k),fn=Ha(n,ke.getState,N),it=Ha(n,ke.getState,j),Vt=Ha(n,ke.getState,O),Ct=(Ze,ft)=>{if(Ze.button!==0)return;const{edges:Ke,isValidConnection:pn}=ke.getState(),en=ft?v:y,gn=(ft?A:C)||null,tn=ft?"target":"source",$n=pn||s5,ui=ft,lr=Ke.find(mn=>mn.id===n);De(!0),M==null||M(Ze,lr,tn);const Fn=mn=>{De(!1),U==null||U(mn,lr,tn)};pb({event:Ze,handleId:gn,nodeId:en,onConnect:mn=>$==null?void 0:$(lr,mn),isTarget:ui,getState:ke.getState,setState:ke.setState,isValidConnection:$n,edgeUpdaterType:tn,onReconnectEnd:Fn})},lt=Ze=>Ct(Ze,!0),Re=Ze=>Ct(Ze,!1),Le=()=>Ce(!0),wt=()=>Ce(!1),Gt=!_&&!o,Qt=Ze=>{var ft;if(!ve&&eb.includes(Ze.key)&&_){const{unselectNodesAndEdges:Ke,addSelectedEdges:pn,edges:en}=ke.getState();Ze.key==="Escape"?((ft=pe.current)==null||ft.blur(),Ke({edges:[en.find(tn=>tn.id===n)]})):pn([n])}};return q.createElement("g",{className:It(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:Gt,updating:Ie}]),onClick:ne,onDoubleClick:be,onContextMenu:vt,onMouseEnter:fn,onMouseMove:it,onMouseLeave:Vt,onKeyDown:Z?Qt:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${y} to ${v}`,"aria-describedby":Z?`${bb}-${Q}`:void 0,ref:pe},!$e&&q.createElement(t,{id:n,source:y,target:v,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:b,labelBgBorderRadius:S,data:s,style:P,sourceX:T,sourceY:R,targetX:L,targetY:V,sourcePosition:I,targetPosition:E,sourceHandleId:C,targetHandleId:A,markerStart:rt,markerEnd:Ee,pathOptions:ue,interactionWidth:ae}),te&&q.createElement(q.Fragment,null,(te==="source"||te===!0)&&q.createElement(hw,{position:I,centerX:T,centerY:R,radius:B,onMouseDown:lt,onMouseEnter:Le,onMouseOut:wt,type:"source"}),(te==="target"||te===!0)&&q.createElement(hw,{position:E,centerX:L,centerY:V,radius:B,onMouseDown:Re,onMouseEnter:Le,onMouseOut:wt,type:"target"})))};return e.displayName="EdgeWrapper",D.memo(e)};function o5(t){const e={default:oo(t.default||xd),straight:oo(t.bezier||Im),step:oo(t.step||Tm),smoothstep:oo(t.step||uh),simplebezier:oo(t.simplebezier||Sm)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=oo(t[s]||xd),i),n);return{...e,...r}}function fw(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,o=(n==null?void 0:n.height)||e.height;switch(t){case oe.Top:return{x:r+s/2,y:i};case oe.Right:return{x:r+s,y:i+o/2};case oe.Bottom:return{x:r+s/2,y:i+o};case oe.Left:return{x:r,y:i+o/2}}}function pw(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const a5=(t,e,n,r,i,s)=>{const o=fw(n,t,e),a=fw(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function l5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=ql({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:a/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),f=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*f)>0}function gw(t){var r,i,s,o,a;const e=((r=t==null?void 0:t[nt])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const c5=[{level:0,isMaxLevel:!0,edges:[]}];function u5(t,e,n=!1){let r=-1;const i=t.reduce((o,a)=>{var d,h;const l=zn(a.zIndex);let u=l?a.zIndex:0;if(n){const f=e.get(a.target),m=e.get(a.source),b=a.selected||(f==null?void 0:f.selected)||(m==null?void 0:m.selected),S=Math.max(((d=m==null?void 0:m[nt])==null?void 0:d.z)||0,((h=f==null?void 0:f[nt])==null?void 0:h.z)||0,1e3);u=(l?a.zIndex:0)+(b?S:0)}return o[u]?o[u].push(a):o[u]=[a],r=u>r?u:r,o},{}),s=Object.entries(i).map(([o,a])=>{const l=+o;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?c5:s}function d5(t,e,n){const r=je(D.useCallback(i=>t?i.edges.filter(s=>{const o=e.get(s.source),a=e.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&l5({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return u5(r,e,n)}const h5=({color:t="none",strokeWidth:e=1})=>q.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),f5=({color:t="none",strokeWidth:e=1})=>q.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),mw={[_d.Arrow]:h5,[_d.ArrowClosed]:f5};function p5(t){const e=ht();return D.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(mw,t)?mw[t]:((s=(i=e.getState()).onError)==null||s.call(i,"009",ni.error009(t)),null)},[t])}const g5=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=p5(e);return l?q.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},q.createElement(l,{color:n,strokeWidth:o})):null},m5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Up(o,e);r.includes(a)||(i.push({id:a,color:o.color||t,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},Vb=({defaultColor:t,rfId:e})=>{const n=je(D.useCallback(m5({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return q.createElement("defs",null,n.map(r=>q.createElement(g5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Vb.displayName="MarkerDefinitions";var y5=D.memo(Vb);const v5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Mb=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:b,reconnectRadius:S,children:P,disableKeyboardA11y:y})=>{const{edgesFocusable:v,edgesUpdatable:T,elementsSelectable:R,width:L,height:V,connectionMode:I,nodeInternals:E,onError:_}=je(v5,St),x=d5(e,E,n);return L?q.createElement(q.Fragment,null,x.map(({level:C,edges:A,isMaxLevel:k})=>q.createElement("svg",{key:C,style:{zIndex:C},width:L,height:V,className:"react-flow__edges react-flow__container"},k&&q.createElement(y5,{defaultColor:t,rfId:r}),q.createElement("g",null,A.map(N=>{const[j,O,B]=gw(E.get(N.source)),[$,M,U]=gw(E.get(N.target));if(!B||!U)return null;let W=N.type||"default";i[W]||(_==null||_("011",ni.error011(W)),W="default");const F=i[W]||i.default,Q=I===Ds.Strict?M.target:(M.target??[]).concat(M.source??[]),G=pw(O.source,N.sourceHandle),Z=pw(Q,N.targetHandle),te=(G==null?void 0:G.position)||oe.Bottom,ue=(Z==null?void 0:Z.position)||oe.Top,ae=!!(N.focusable||v&&typeof N.focusable>"u"),ve=N.reconnectable||N.updatable,pe=typeof f<"u"&&(ve||T&&typeof ve>"u");if(!G||!Z)return _==null||_("008",ni.error008(G,N)),null;const{sourceX:Ie,sourceY:Ce,targetX:$e,targetY:De}=a5(j,G,te,$,Z,ue);return q.createElement(F,{key:N.id,id:N.id,className:It([N.className,s]),type:W,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:Ie,sourceY:Ce,targetX:$e,targetY:De,sourcePosition:te,targetPosition:ue,elementsSelectable:R,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:b,reconnectRadius:S,rfId:r,ariaLabel:N.ariaLabel,isFocusable:ae,isReconnectable:pe,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:y})})))),P):null};Mb.displayName="EdgeRenderer";var w5=D.memo(Mb);const _5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function x5({children:t}){const e=je(_5);return q.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function E5(t){const e=Sr(),n=D.useRef(!1);D.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const b5={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top},jb=({nodeId:t,handleType:e,style:n,type:r=Ci.Bezier,CustomComponent:i,connectionStatus:s})=>{var V,I,E;const{fromNode:o,handleId:a,toX:l,toY:u,connectionMode:d}=je(D.useCallback(_=>({fromNode:_.nodeInternals.get(t),handleId:_.connectionHandleId,toX:(_.connectionPosition.x-_.transform[0])/_.transform[2],toY:(_.connectionPosition.y-_.transform[1])/_.transform[2],connectionMode:_.connectionMode}),[t]),St),h=(V=o==null?void 0:o[nt])==null?void 0:V.handleBounds;let f=h==null?void 0:h[e];if(d===Ds.Loose&&(f=f||(h==null?void 0:h[e==="source"?"target":"source"])),!o||!f)return null;const m=a?f.find(_=>_.id===a):f[0],b=m?m.x+m.width/2:(o.width??0)/2,S=m?m.y+m.height/2:o.height??0,P=(((I=o.positionAbsolute)==null?void 0:I.x)??0)+b,y=(((E=o.positionAbsolute)==null?void 0:E.y)??0)+S,v=m==null?void 0:m.position,T=v?b5[v]:null;if(!v||!T)return null;if(i)return q.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:m,fromX:P,fromY:y,toX:l,toY:u,fromPosition:v,toPosition:T,connectionStatus:s});let R="";const L={sourceX:P,sourceY:y,sourcePosition:v,targetX:l,targetY:u,targetPosition:T};return r===Ci.Bezier?[R]=Cm(L):r===Ci.Step?[R]=Kl({...L,borderRadius:0}):r===Ci.SmoothStep?[R]=Kl(L):r===Ci.SimpleBezier?[R]=ib(L):R=`M${P},${y} ${l},${u}`,q.createElement("path",{d:R,fill:"none",className:"react-flow__connection-path",style:n})};jb.displayName="ConnectionLine";const S5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function T5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:l,connectionStatus:u}=je(S5,St);return!(i&&s&&a&&o)?null:q.createElement("svg",{style:t,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},q.createElement("g",{className:It(["react-flow__connection",u])},q.createElement(jb,{nodeId:i,handleType:s,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function yw(t,e){return D.useRef(null),ht(),D.useMemo(()=>e(t),[t])}const $b=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:b,onSelectionStart:S,onSelectionEnd:P,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:T,connectionLineContainerStyle:R,selectionKeyCode:L,selectionOnDrag:V,selectionMode:I,multiSelectionKeyCode:E,panActivationKeyCode:_,zoomActivationKeyCode:x,deleteKeyCode:C,onlyRenderVisibleElements:A,elementsSelectable:k,selectNodesOnDrag:N,defaultViewport:j,translateExtent:O,minZoom:B,maxZoom:$,preventScrolling:M,defaultMarkerColor:U,zoomOnScroll:W,zoomOnPinch:F,panOnScroll:Q,panOnScrollSpeed:G,panOnScrollMode:Z,zoomOnDoubleClick:te,panOnDrag:ue,onPaneClick:ae,onPaneMouseEnter:ve,onPaneMouseMove:pe,onPaneMouseLeave:Ie,onPaneScroll:Ce,onPaneContextMenu:$e,onEdgeContextMenu:De,onEdgeMouseEnter:ke,onEdgeMouseMove:rt,onEdgeMouseLeave:Ee,onReconnect:ne,onReconnectStart:be,onReconnectEnd:vt,reconnectRadius:fn,noDragClassName:it,noWheelClassName:Vt,noPanClassName:Ct,elevateEdgesOnSelect:lt,disableKeyboardA11y:Re,nodeOrigin:Le,nodeExtent:wt,rfId:Gt})=>{const Qt=yw(t,Z4),Ze=yw(e,o5);return E5(s),q.createElement(X4,{onPaneClick:ae,onPaneMouseEnter:ve,onPaneMouseMove:pe,onPaneMouseLeave:Ie,onPaneContextMenu:$e,onPaneScroll:Ce,deleteKeyCode:C,selectionKeyCode:L,selectionOnDrag:V,selectionMode:I,onSelectionStart:S,onSelectionEnd:P,multiSelectionKeyCode:E,panActivationKeyCode:_,zoomActivationKeyCode:x,elementsSelectable:k,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:W,zoomOnPinch:F,zoomOnDoubleClick:te,panOnScroll:Q,panOnScrollSpeed:G,panOnScrollMode:Z,panOnDrag:ue,defaultViewport:j,translateExtent:O,minZoom:B,maxZoom:$,onSelectionContextMenu:b,preventScrolling:M,noDragClassName:it,noWheelClassName:Vt,noPanClassName:Ct,disableKeyboardA11y:Re},q.createElement(x5,null,q.createElement(w5,{edgeTypes:Ze,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:A,onEdgeContextMenu:De,onEdgeMouseEnter:ke,onEdgeMouseMove:rt,onEdgeMouseLeave:Ee,onReconnect:ne,onReconnectStart:be,onReconnectEnd:vt,reconnectRadius:fn,defaultMarkerColor:U,noPanClassName:Ct,elevateEdgesOnSelect:!!lt,disableKeyboardA11y:Re,rfId:Gt},q.createElement(T5,{style:v,type:y,component:T,containerStyle:R})),q.createElement("div",{className:"react-flow__edgelabel-renderer"}),q.createElement(n5,{nodeTypes:Qt,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:N,onlyRenderVisibleElements:A,noPanClassName:Ct,noDragClassName:it,disableKeyboardA11y:Re,nodeOrigin:Le,nodeExtent:wt,rfId:Gt})))};$b.displayName="GraphView";var I5=D.memo($b);const Wp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],wi={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Wp,nodeExtent:Wp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ds.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:i4,isValidConnection:void 0},C5=()=>_A((t,e)=>({...wi,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=e();t({nodeInternals:gf(n,r,i,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?gf(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:f}=new window.DOMMatrixReadOnly(h.transform),m=n.reduce((S,P)=>{const y=i.get(P.id);if(y!=null&&y.hidden)i.set(y.id,{...y,[nt]:{...y[nt],handleBounds:void 0}});else if(y){const v=Em(P.nodeElement);!!(v.width&&v.height&&(y.width!==v.width||y.height!==v.height||P.forceUpdate))&&(i.set(y.id,{...y,[nt]:{...y[nt],handleBounds:{source:uw(".source",P.nodeElement,f,u),target:uw(".target",P.nodeElement,f,u)}},...v}),S.push({id:y.id,type:"dimensions",dimensions:v}))}return S},[]);Tb(i,u);const b=o||s&&!o&&Ib(e,{initial:!0,...a});t({nodeInternals:new Map(i),fitViewOnInitDone:b}),(m==null?void 0:m.length)>0&&(r==null||r(m))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=e(),o=n.map(a=>{const l={id:a.id,type:"position",dragging:i};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const u=kb(n,a()),d=gf(u,i,o,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(l=>Si(l,!0)):(o=Io(s(),n),a=Io(i,[])),au({changedNodes:o,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(l=>Si(l,!0)):(o=Io(i,n),a=Io(s(),[])),au({changedNodes:a,changedEdges:o,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=e(),o=n||s(),a=r||i,l=o.map(d=>(d.selected=!1,Si(d.id,!1))),u=a.map(d=>Si(d.id,!1));au({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),s=r().filter(a=>a.selected).map(a=>Si(a.id,!1)),o=n.filter(a=>a.selected).map(a=>Si(a.id,!1));au({changedNodes:s,changedEdges:o,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=bm(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:l}=e();if(!o||!a||!n.x&&!n.y)return!1;const u=Gr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[i,s]],h=o==null?void 0:o.constrain()(u,d,l);return o.transform(a,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:wi.connectionNodeId,connectionHandleId:wi.connectionHandleId,connectionHandleType:wi.connectionHandleType,connectionStatus:wi.connectionStatus,connectionStartHandle:wi.connectionStartHandle,connectionEndHandle:wi.connectionEndHandle}),reset:()=>t({...wi})}),Object.is),Pm=({children:t})=>{const e=D.useRef(null);return e.current||(e.current=C5()),q.createElement(XP,{value:e.current},t)};Pm.displayName="ReactFlowProvider";const Fb=({children:t})=>D.useContext(ch)?q.createElement(q.Fragment,null,t):q.createElement(Pm,null,t);Fb.displayName="ReactFlowWrapper";const k5={input:vb,default:Hp,output:_b,group:Rm},A5={default:xd,straight:Im,step:Tm,smoothstep:uh,simplebezier:Sm},R5=[0,0],N5=[15,15],P5={x:0,y:0,zoom:1},D5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ub=D.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=k5,edgeTypes:o=A5,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:f,onConnect:m,onConnectStart:b,onConnectEnd:S,onClickConnectStart:P,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:T,onNodeMouseLeave:R,onNodeContextMenu:L,onNodeDoubleClick:V,onNodeDragStart:I,onNodeDrag:E,onNodeDragStop:_,onNodesDelete:x,onEdgesDelete:C,onSelectionChange:A,onSelectionDragStart:k,onSelectionDrag:N,onSelectionDragStop:j,onSelectionContextMenu:O,onSelectionStart:B,onSelectionEnd:$,connectionMode:M=Ds.Strict,connectionLineType:U=Ci.Bezier,connectionLineStyle:W,connectionLineComponent:F,connectionLineContainerStyle:Q,deleteKeyCode:G="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:te=!1,selectionMode:ue=Wl.Full,panActivationKeyCode:ae="Space",multiSelectionKeyCode:ve=wd()?"Meta":"Control",zoomActivationKeyCode:pe=wd()?"Meta":"Control",snapToGrid:Ie=!1,snapGrid:Ce=N5,onlyRenderVisibleElements:$e=!1,selectNodesOnDrag:De=!0,nodesDraggable:ke,nodesConnectable:rt,nodesFocusable:Ee,nodeOrigin:ne=R5,edgesFocusable:be,edgesUpdatable:vt,elementsSelectable:fn,defaultViewport:it=P5,minZoom:Vt=.5,maxZoom:Ct=2,translateExtent:lt=Wp,preventScrolling:Re=!0,nodeExtent:Le,defaultMarkerColor:wt="#b1b1b7",zoomOnScroll:Gt=!0,zoomOnPinch:Qt=!0,panOnScroll:Ze=!1,panOnScrollSpeed:ft=.5,panOnScrollMode:Ke=vs.Free,zoomOnDoubleClick:pn=!0,panOnDrag:en=!0,onPaneClick:gn,onPaneMouseEnter:tn,onPaneMouseMove:$n,onPaneMouseLeave:ui,onPaneScroll:lr,onPaneContextMenu:Fn,children:di,onEdgeContextMenu:mn,onEdgeDoubleClick:Un,onEdgeMouseEnter:Ks,onEdgeMouseMove:Ir,onEdgeMouseLeave:Gs,onEdgeUpdate:Cr,onEdgeUpdateStart:Qs,onEdgeUpdateEnd:pt,onReconnect:Bn,onReconnectStart:kr,onReconnectEnd:Ar,reconnectRadius:xa=10,edgeUpdaterRadius:Ea=10,onNodesChange:cr,onEdgesChange:ba,noDragClassName:Sa="nodrag",noWheelClassName:hi="nowheel",noPanClassName:is="nopan",fitView:ss=!1,fitViewOptions:Rr,connectOnClick:An=!0,attributionPosition:Ys,proOptions:fi,defaultEdgeOptions:pi,elevateNodesOnSelect:os=!0,elevateEdgesOnSelect:Xs=!1,disableKeyboardA11y:Nr=!1,autoPanOnConnect:Ta=!0,autoPanOnNodeDrag:Pr=!0,connectionRadius:as=20,isValidConnection:gi,onError:ye,style:ce,id:Fe,nodeDragThreshold:ze,...st},ur)=>{const Dr=Fe||"1";return q.createElement("div",{...st,style:{...ce,...D5},ref:ur,className:It(["react-flow",i]),"data-testid":"rf__wrapper",id:Fe},q.createElement(Fb,null,q.createElement(I5,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:T,onNodeMouseLeave:R,onNodeContextMenu:L,onNodeDoubleClick:V,nodeTypes:s,edgeTypes:o,connectionLineType:U,connectionLineStyle:W,connectionLineComponent:F,connectionLineContainerStyle:Q,selectionKeyCode:Z,selectionOnDrag:te,selectionMode:ue,deleteKeyCode:G,multiSelectionKeyCode:ve,panActivationKeyCode:ae,zoomActivationKeyCode:pe,onlyRenderVisibleElements:$e,selectNodesOnDrag:De,defaultViewport:it,translateExtent:lt,minZoom:Vt,maxZoom:Ct,preventScrolling:Re,zoomOnScroll:Gt,zoomOnPinch:Qt,zoomOnDoubleClick:pn,panOnScroll:Ze,panOnScrollSpeed:ft,panOnScrollMode:Ke,panOnDrag:en,onPaneClick:gn,onPaneMouseEnter:tn,onPaneMouseMove:$n,onPaneMouseLeave:ui,onPaneScroll:lr,onPaneContextMenu:Fn,onSelectionContextMenu:O,onSelectionStart:B,onSelectionEnd:$,onEdgeContextMenu:mn,onEdgeDoubleClick:Un,onEdgeMouseEnter:Ks,onEdgeMouseMove:Ir,onEdgeMouseLeave:Gs,onReconnect:Bn??Cr,onReconnectStart:kr??Qs,onReconnectEnd:Ar??pt,reconnectRadius:xa??Ea,defaultMarkerColor:wt,noDragClassName:Sa,noWheelClassName:hi,noPanClassName:is,elevateEdgesOnSelect:Xs,rfId:Dr,disableKeyboardA11y:Nr,nodeOrigin:ne,nodeExtent:Le}),q.createElement(S4,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:b,onConnectEnd:S,onClickConnectStart:P,onClickConnectEnd:y,nodesDraggable:ke,nodesConnectable:rt,nodesFocusable:Ee,edgesFocusable:be,edgesUpdatable:vt,elementsSelectable:fn,elevateNodesOnSelect:os,minZoom:Vt,maxZoom:Ct,nodeExtent:Le,onNodesChange:cr,onEdgesChange:ba,snapToGrid:Ie,snapGrid:Ce,connectionMode:M,translateExtent:lt,connectOnClick:An,defaultEdgeOptions:pi,fitView:ss,fitViewOptions:Rr,onNodesDelete:x,onEdgesDelete:C,onNodeDragStart:I,onNodeDrag:E,onNodeDragStop:_,onSelectionDrag:N,onSelectionDragStart:k,onSelectionDragStop:j,noPanClassName:is,nodeOrigin:ne,rfId:Dr,autoPanOnConnect:Ta,autoPanOnNodeDrag:Pr,onError:ye,connectionRadius:as,isValidConnection:gi,nodeDragThreshold:ze}),q.createElement(E4,{onSelectionChange:A}),di,q.createElement(ZP,{proOptions:fi,position:Ys}),q.createElement(A4,{rfId:Dr,disableKeyboardA11y:Nr})))});Ub.displayName="ReactFlow";const z5=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function L5({children:t}){const e=je(z5);return e?jl.createPortal(t,e):null}function Bb(t){return e=>{const[n,r]=D.useState(e),i=D.useCallback(s=>r(o=>t(s,o)),[]);return[n,r,i]}}const O5=Bb(kb),V5=Bb(B4),Hb=({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:u,borderRadius:d,shapeRendering:h,onClick:f,selected:m})=>{const{background:b,backgroundColor:S}=s||{},P=o||b||S;return q.createElement("rect",{className:It(["react-flow__minimap-node",{selected:m},u]),x:e,y:n,rx:d,ry:d,width:r,height:i,fill:P,stroke:a,strokeWidth:l,shapeRendering:h,onClick:f?y=>f(y,t):void 0})};Hb.displayName="MiniMapNode";var M5=D.memo(Hb);const j5=t=>t.nodeOrigin,$5=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),wf=t=>t instanceof Function?t:()=>t;function F5({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:s=M5,onClick:o}){const a=je($5,St),l=je(j5),u=wf(e),d=wf(t),h=wf(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return q.createElement(q.Fragment,null,a.map(m=>{const{x:b,y:S}=Ts(m,l).positionAbsolute;return q.createElement(s,{key:m.id,x:b,y:S,width:m.width,height:m.height,style:m.style,selected:m.selected,className:h(m),color:u(m),borderRadius:r,strokeColor:d(m),strokeWidth:i,shapeRendering:f,onClick:o,id:m.id})}))}var U5=D.memo(F5);const B5=200,H5=150,q5=t=>{const e=t.getNodes(),n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:e.length>0?n4(hc(e,t.nodeOrigin),n):n,rfId:t.rfId}},W5="react-flow__minimap-desc";function qb({style:t,className:e,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o=2,nodeComponent:a,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:h="bottom-right",onClick:f,onNodeClick:m,pannable:b=!1,zoomable:S=!1,ariaLabel:P="React Flow mini map",inversePan:y=!1,zoomStep:v=10,offsetScale:T=5}){const R=ht(),L=D.useRef(null),{boundingRect:V,viewBB:I,rfId:E}=je(q5,St),_=(t==null?void 0:t.width)??B5,x=(t==null?void 0:t.height)??H5,C=V.width/_,A=V.height/x,k=Math.max(C,A),N=k*_,j=k*x,O=T*k,B=V.x-(N-V.width)/2-O,$=V.y-(j-V.height)/2-O,M=N+O*2,U=j+O*2,W=`${W5}-${E}`,F=D.useRef(0);F.current=k,D.useEffect(()=>{if(L.current){const Z=_n(L.current),te=ve=>{const{transform:pe,d3Selection:Ie,d3Zoom:Ce}=R.getState();if(ve.sourceEvent.type!=="wheel"||!Ie||!Ce)return;const $e=-ve.sourceEvent.deltaY*(ve.sourceEvent.deltaMode===1?.05:ve.sourceEvent.deltaMode?1:.002)*v,De=pe[2]*Math.pow(2,$e);Ce.scaleTo(Ie,De)},ue=ve=>{const{transform:pe,d3Selection:Ie,d3Zoom:Ce,translateExtent:$e,width:De,height:ke}=R.getState();if(ve.sourceEvent.type!=="mousemove"||!Ie||!Ce)return;const rt=F.current*Math.max(1,pe[2])*(y?-1:1),Ee={x:pe[0]-ve.sourceEvent.movementX*rt,y:pe[1]-ve.sourceEvent.movementY*rt},ne=[[0,0],[De,ke]],be=Gr.translate(Ee.x,Ee.y).scale(pe[2]),vt=Ce.constrain()(be,ne,$e);Ce.transform(Ie,vt)},ae=GE().on("zoom",b?ue:null).on("zoom.wheel",S?te:null);return Z.call(ae),()=>{Z.on("zoom",null)}}},[b,S,y,v]);const Q=f?Z=>{const te=Gn(Z);f(Z,{x:te[0],y:te[1]})}:void 0,G=m?(Z,te)=>{const ue=R.getState().nodeInternals.get(te);m(Z,ue)}:void 0;return q.createElement(xm,{position:h,style:t,className:It(["react-flow__minimap",e]),"data-testid":"rf__minimap"},q.createElement("svg",{width:_,height:x,viewBox:`${B} ${$} ${M} ${U}`,role:"img","aria-labelledby":W,ref:L,onClick:Q},P&&q.createElement("title",{id:W},P),q.createElement(U5,{onClick:G,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),q.createElement("path",{className:"react-flow__minimap-mask",d:`M${B-O},${$-O}h${M+O*2}v${U+O*2}h${-M-O*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fill:l,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}qb.displayName="MiniMap";var K5=D.memo(qb);function G5(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},q.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Q5(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},q.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Y5(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},q.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function X5(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},q.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function J5(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},q.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const el=({children:t,className:e,...n})=>q.createElement("button",{type:"button",className:It(["react-flow__controls-button",e]),...n},t);el.displayName="ControlButton";const Z5=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Wb=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const f=ht(),[m,b]=D.useState(!1),{isInteractive:S,minZoomReached:P,maxZoomReached:y}=je(Z5,St),{zoomIn:v,zoomOut:T,fitView:R}=Sr();if(D.useEffect(()=>{b(!0)},[]),!m)return null;const L=()=>{v(),s==null||s()},V=()=>{T(),o==null||o()},I=()=>{R(i),a==null||a()},E=()=>{f.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),l==null||l(!S)};return q.createElement(xm,{className:It(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&q.createElement(q.Fragment,null,q.createElement(el,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},q.createElement(G5,null)),q.createElement(el,{onClick:V,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:P},q.createElement(Q5,null))),n&&q.createElement(el,{className:"react-flow__controls-fitview",onClick:I,title:"fit view","aria-label":"fit view"},q.createElement(Y5,null)),r&&q.createElement(el,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity"},S?q.createElement(J5,null):q.createElement(X5,null)),d)};Wb.displayName="Controls";var eD=D.memo(Wb),tr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(tr||(tr={}));function tD({color:t,dimensions:e,lineWidth:n}){return q.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function nD({color:t,radius:e}){return q.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const rD={[tr.Dots]:"#91919a",[tr.Lines]:"#eee",[tr.Cross]:"#e2e2e2"},iD={[tr.Dots]:1,[tr.Lines]:1,[tr.Cross]:6},sD=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Kb({id:t,variant:e=tr.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:l}){const u=D.useRef(null),{transform:d,patternId:h}=je(sD,St),f=o||rD[e],m=r||iD[e],b=e===tr.Dots,S=e===tr.Cross,P=Array.isArray(n)?n:[n,n],y=[P[0]*d[2]||1,P[1]*d[2]||1],v=m*d[2],T=S?[v,v]:y,R=b?[v/s,v/s]:[T[0]/s,T[1]/s];return q.createElement("svg",{className:It(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},q.createElement("pattern",{id:h+t,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R[0]},-${R[1]})`},b?q.createElement(nD,{color:f,radius:v/s}):q.createElement(tD,{dimensions:T,color:f,lineWidth:i})),q.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}Kb.displayName="Background";var oD=D.memo(Kb),Oo;(function(t){t.Line="line",t.Handle="handle"})(Oo||(Oo={}));function aD({width:t,prevWidth:e,height:n,prevHeight:r,invertX:i,invertY:s}){const o=t-e,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}const Gb={width:0,height:0,x:0,y:0},lD={...Gb,pointerX:0,pointerY:0,aspectRatio:1};function cD({nodeId:t,position:e,variant:n=Oo.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:f,onResizeStart:m,onResize:b,onResizeEnd:S}){const P=ob(),y=typeof t=="string"?t:P,v=ht(),T=D.useRef(null),R=D.useRef(lD),L=D.useRef(Gb),V=Pb(),I=n===Oo.Line?"right":"bottom-right",E=e??I;D.useEffect(()=>{if(!T.current||!y)return;const A=_n(T.current),k=E.includes("right")||E.includes("left"),N=E.includes("bottom")||E.includes("top"),j=E.includes("left"),O=E.includes("top"),B=zE().on("start",$=>{const M=v.getState().nodeInternals.get(y),{xSnapped:U,ySnapped:W}=V($);L.current={width:(M==null?void 0:M.width)??0,height:(M==null?void 0:M.height)??0,x:(M==null?void 0:M.position.x)??0,y:(M==null?void 0:M.position.y)??0},R.current={...L.current,pointerX:U,pointerY:W,aspectRatio:L.current.width/L.current.height},m==null||m($,{...L.current})}).on("drag",$=>{const{nodeInternals:M,triggerNodeChanges:U}=v.getState(),{xSnapped:W,ySnapped:F}=V($),Q=M.get(y);if(Q){const G=[],{pointerX:Z,pointerY:te,width:ue,height:ae,x:ve,y:pe,aspectRatio:Ie}=R.current,{x:Ce,y:$e,width:De,height:ke}=L.current,rt=Math.floor(k?W-Z:0),Ee=Math.floor(N?F-te:0);let ne=Qi(ue+(j?-rt:rt),a,u),be=Qi(ae+(O?-Ee:Ee),l,d);if(h){const lt=ne/be,Re=k&&N,Le=k&&!N,wt=N&&!k;ne=lt<=Ie&&Re||wt?be*Ie:ne,be=lt>Ie&&Re||Le?ne/Ie:be,ne>=u?(ne=u,be=u/Ie):ne<=a&&(ne=a,be=a/Ie),be>=d?(be=d,ne=d*Ie):be<=l&&(be=l,ne=l*Ie)}const vt=ne!==De,fn=be!==ke;if(j||O){const lt=j?ve-(ne-ue):ve,Re=O?pe-(be-ae):pe,Le=lt!==Ce&&vt,wt=Re!==$e&&fn;if(Le||wt){const Gt={id:Q.id,type:"position",position:{x:Le?lt:Ce,y:wt?Re:$e}};G.push(Gt),L.current.x=Gt.position.x,L.current.y=Gt.position.y}}if(vt||fn){const lt={id:y,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:ne,height:be}};G.push(lt),L.current.width=ne,L.current.height=be}if(G.length===0)return;const it=aD({width:L.current.width,prevWidth:De,height:L.current.height,prevHeight:ke,invertX:j,invertY:O}),Vt={...L.current,direction:it};if((f==null?void 0:f($,Vt))===!1)return;b==null||b($,Vt),U(G)}}).on("end",$=>{const M={id:y,type:"dimensions",resizing:!1};S==null||S($,{...L.current}),v.getState().triggerNodeChanges([M])});return A.call(B),()=>{A.on(".drag",null)}},[y,E,a,l,u,d,h,V,m,b,S]);const _=E.split("-"),x=n===Oo.Line?"borderColor":"backgroundColor",C=o?{...i,[x]:o}:i;return q.createElement("div",{className:It(["react-flow__resize-control","nodrag",..._,n,r]),ref:T,style:C},s)}var vw=D.memo(cD);const uD=["top-left","top-right","bottom-left","bottom-right"],dD=["top","right","bottom","left"];function da({nodeId:t,isVisible:e=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:f,onResizeStart:m,onResize:b,onResizeEnd:S}){return e?q.createElement(q.Fragment,null,dD.map(P=>q.createElement(vw,{key:P,className:i,style:s,nodeId:t,position:P,variant:Oo.Line,color:o,minWidth:a,minHeight:l,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:h,shouldResize:f,onResize:b,onResizeEnd:S})),uD.map(P=>q.createElement(vw,{key:P,className:n,style:r,nodeId:t,position:P,color:o,minWidth:a,minHeight:l,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:h,shouldResize:f,onResize:b,onResizeEnd:S}))):null}/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>D.createElement("svg",{ref:l,...fD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Qb("lucide",i),...a},[...o.map(([u,d])=>D.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(t,e)=>{const n=D.forwardRef(({className:r,...i},s)=>D.createElement(pD,{ref:s,iconNode:e,className:Qb(`lucide-${hD(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=re("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=re("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=re("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=re("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=re("BoxSelect",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=re("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=re("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=re("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=re("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=re("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=re("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=re("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=re("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=re("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=re("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=re("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=re("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=re("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=re("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=re("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=re("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=re("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=re("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=re("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=re("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=re("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=re("PinOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12",key:"13x2n8"}],["path",{d:"M15 9.34V6h1a2 2 0 0 0 0-4H7.89",key:"reo3ki"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=re("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=re("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=re("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=re("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=re("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=re("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=re("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=re("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=re("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=re("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=re("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),t3=({connectionColor:t="#dc2626",setConnectionColor:e=()=>{},connectionLineType:n,setConnectionLineType:r,lastSaved:i,onSave:s,onLoad:o,onClear:a,onHelp:l,isDarkMode:u,toggleTheme:d,searchTerm:h,setSearchTerm:f,onExport:m,isOpen:b,onToggle:S,onOpenCaseManager:P,currentBoardName:y,onToggleZen:v,onNextMatch:T,onPrevMatch:R,onToggleBg:L,onLogout:V,currentUser:I,isSyncing:E})=>{const _=D.useRef(null),[x,C]=D.useState(()=>{try{const j=localStorage.getItem("sidebar-sections");return j?JSON.parse(j):{evidence:!0,connection:!0,extras:!0,zones:!0}}catch{return{evidence:!0,connection:!0,extras:!0,zones:!0}}});D.useEffect(()=>{localStorage.setItem("sidebar-sections",JSON.stringify(x))},[x]);const A=j=>{C(O=>({...O,[j]:!O[j]}))},k=()=>{const j=Object.values(x).some(O=>O);C(Object.keys(x).reduce((O,B)=>({...O,[B]:!j}),{}))},N=(j,O,B)=>{j.dataTransfer.setData("application/reactflow",O),j.dataTransfer.setData("application/category",B),j.dataTransfer.effectAllowed="move"};return p.jsxs("div",{className:`absolute top-0 left-0 h-full z-50 transition-transform duration-300 ease-in-out ${b?"translate-x-0":"-translate-x-full"}`,children:[p.jsxs("aside",{className:`h-full w-80 border-r flex flex-col shadow-2xl backdrop-blur-xl transition-colors duration-500 ease-in-out ${u?"bg-zinc-900/95 border-zinc-800":"bg-white/90 border-gray-200"}`,children:[p.jsxs("div",{className:`p-3 border-b transition-colors duration-500 ${u?"border-zinc-800":"border-gray-200"}`,children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("div",{children:p.jsxs("h1",{className:"text-lg font-bold text-red-500 tracking-widest uppercase leading-tight",children:["Detective",p.jsx("br",{}),"Board"]})}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:k,className:`p-2 rounded-full ${u?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:Object.values(x).some(j=>j)?"Colapsar todo":"Expandir todo",children:Object.values(x).some(j=>j)?p.jsx(ED,{size:16}):p.jsx(xD,{size:16})}),p.jsx("button",{onClick:v,className:`p-2 rounded-full ${u?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Modo Zen (Pantalla Completa)",children:p.jsx(OD,{size:16})}),p.jsx("button",{onClick:L,className:`p-2 rounded-full ${u?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Cambiar Fondo (Corcho/Pizarra/Papel)",children:p.jsx($D,{size:16})}),p.jsx("button",{onClick:d,className:`p-2 rounded-full ${u?"bg-zinc-800 text-yellow-400 hover:bg-zinc-700":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Cambiar tema",children:u?p.jsx(a2,{size:16}):p.jsx(n2,{size:16})})]})]}),y&&p.jsxs("div",{className:"mt-2 px-2 py-1 bg-zinc-100/5 rounded border border-zinc-500/20",children:[p.jsx("p",{className:"text-xs text-zinc-500 font-mono uppercase mb-0",children:"Expediente:"}),p.jsx("p",{className:`text-xs font-bold font-mono truncate w-full ${u?"text-yellow-500":"text-yellow-700"}`,title:y,children:y})]})]}),p.jsx("div",{className:"px-3 pt-2 pb-1",children:p.jsxs("div",{className:`flex items-center px-2 py-1.5 rounded border transition-colors duration-500 ${u?"bg-zinc-950 border-zinc-800":"bg-white border-gray-300"}`,children:[p.jsx(i2,{size:12,className:"text-zinc-500 mr-2"}),p.jsx("input",{type:"text",name:"search",placeholder:"Buscar pistas...",value:h,onChange:j=>f(j.target.value),className:`bg-transparent w-full text-xs outline-none font-mono ${u?"text-zinc-300 placeholder-zinc-600":"text-zinc-700 placeholder-zinc-400"}`}),h&&p.jsxs("div",{className:"flex gap-1 ml-1 border-l border-zinc-700 pl-1",children:[p.jsx("button",{type:"button",onClick:j=>{j.preventDefault(),R()},className:"p-0.5 hover:text-white text-zinc-500 transition-colors",title:"Anterior",children:p.jsx(yD,{size:12})}),p.jsx("button",{type:"button",onClick:j=>{j.preventDefault(),T()},className:"p-0.5 hover:text-white text-zinc-500 transition-colors",title:"Siguiente",children:p.jsx(gD,{size:12})})]})]})}),p.jsxs("div",{className:"p-3 space-y-2 overflow-y-auto",children:[p.jsx(cu,{title:"Evidencia",icon:RD,isDarkMode:u,isOpen:x.evidence,onToggle:()=>A("evidence"),children:p.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[p.jsx(_t,{onDragStart:N,type:"evidence",category:"person",icon:Mm,label:"Sospechoso",color:"border-blue-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"evidence",category:"place",icon:e2,label:"Lugar",color:"border-green-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"evidence",category:"clue",icon:zm,label:"Pista",color:"border-yellow-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"evidence",category:"event",icon:Yb,label:"Evento",color:"border-red-500",isDarkMode:u,compact:!0})]})}),p.jsxs(cu,{title:"Configuracin de Hilo",icon:Kp,isDarkMode:u,isOpen:x.connection,onToggle:()=>A("connection"),children:[p.jsx("div",{className:"flex items-center justify-center gap-3 mb-2 px-1 py-0.5",children:[{color:"#dc2626",label:"Rojo"},{color:"#3b82f6",label:"Azul"},{color:"#22c55e",label:"Verde"},{color:"#eab308",label:"Amarillo"},{color:"#a855f7",label:"Morado"}].map(j=>p.jsx("button",{onClick:()=>e(j.color),className:`w-5 h-5 rounded-full border-2 transition-all ${t===j.color?"border-white scale-100 ring-1 ring-zinc-500":"border-transparent hover:scale-100"}`,style:{backgroundColor:j.color},title:j.label},j.color))}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>r("straight"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="straight"?u?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":u?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Recta",children:p.jsx(t2,{size:14})}),p.jsx("button",{onClick:()=>r("default"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="default"?u?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":u?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Curva",children:p.jsx(Kp,{size:14})}),p.jsx("button",{onClick:()=>r("step"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="step"?u?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":u?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Escalonada",children:p.jsx(Jb,{size:14})})]})]}),p.jsx(cu,{title:"Extras",icon:zD,isDarkMode:u,isOpen:x.extras,onToggle:()=>A("extras"),children:p.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[p.jsx(_t,{onDragStart:N,type:"note",category:"note",icon:o2,label:"Nota",color:"border-yellow-400",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"text",category:"text",icon:c2,label:"Texto",color:"border-zinc-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"image",category:"image",icon:Lm,label:"Imagen",color:"border-purple-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"url",category:"url",icon:Om,label:"URL",color:"border-blue-500",isDarkMode:u,compact:!0})]})}),p.jsx(cu,{title:"Zonas y Sellos",icon:ww,isDarkMode:u,isOpen:x.zones,onToggle:()=>A("zones"),children:p.jsxs("div",{className:"space-y-2",children:[p.jsx(_t,{onDragStart:N,type:"zone",category:"zone",icon:ww,label:"Zona de Grupo",color:"border-zinc-600",isDarkMode:u}),p.jsxs("div",{className:"grid grid-cols-3 gap-1.5 pt-1",children:[p.jsx(_t,{onDragStart:N,type:"stamp",category:"solved",icon:bD,label:"Resuelto",color:"border-green-600",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"stamp",category:"discarded",icon:SD,label:"Descartado",color:"border-red-600",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"stamp",category:"key",icon:YD,label:"Clave",color:"border-yellow-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"stamp",category:"question",icon:Gp,label:"?",color:"border-blue-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"stamp",category:"important",icon:l2,label:"!",color:"border-orange-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"stamp",category:"verify",icon:Zb,label:"Ojo",color:"border-purple-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"stamp",category:"danger",icon:s2,label:"Peligro",color:"border-red-600",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"stamp",category:"confidential",icon:Xo,label:"Top",color:"border-zinc-500",isDarkMode:u,compact:!0}),p.jsx(_t,{onDragStart:N,type:"stamp",category:"custom",icon:FD,label:"Personalizado",color:"border-zinc-400",isDarkMode:u,compact:!0})]})]})})]}),p.jsxs("div",{className:`mt-auto p-3 border-t space-y-2 transition-colors duration-500 ${u?"border-zinc-800":"border-gray-200"}`,children:[p.jsxs("button",{onClick:P,title:"Abrir gestor de expedientes",className:`w-full py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 ${u?"bg-yellow-900/20 text-yellow-500 border-yellow-900/50 hover:bg-yellow-900/40":"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100"}`,children:[p.jsx(ND,{size:14})," Gestionar Casos"]}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsxs("button",{onClick:s,className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${u?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Guardar (JSON)",children:[p.jsx(GD,{size:16,className:"mb-1"}),p.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Guardar"})]}),p.jsxs("button",{onClick:()=>_.current.click(),className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${u?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Cargar (JSON)",children:[p.jsx(JD,{size:16,className:"mb-1"}),p.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Cargar"})]}),p.jsxs("button",{onClick:m,className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${u?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Exportar (PNG)",children:[p.jsx(kD,{size:16,className:"mb-1"}),p.jsx("span",{className:"text-[9px] font-bold uppercase",children:"PNG"})]})]}),p.jsx("input",{type:"file",name:"file-upload",ref:_,onChange:o,className:"hidden",accept:".json"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("button",{onClick:a,title:"Borrar todo el contenido",className:`py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 ${u?"bg-red-900/20 text-red-500 border-red-900/50 hover:bg-red-900/40":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"}`,children:[p.jsx(Qp,{size:14})," Limpiar"]}),p.jsxs("button",{onClick:l,title:"Ver atajos de teclado",className:`py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 ${u?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,children:[p.jsx(Gp,{size:14})," Ayuda"]})]}),i&&p.jsxs("div",{className:`text-[10px] text-center mt-2 font-mono ${u?"text-zinc-600":"text-gray-400"}`,children:["Guardado: ",i.toLocaleTimeString()]}),p.jsxs("button",{onClick:V,className:`w-full py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 mt-2 ${u?"bg-red-950/50 text-red-500 border-red-900/30 hover:bg-red-900/40":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"}`,children:[p.jsx(LD,{size:14})," Cerrar Sesin"]})]})]}),p.jsx("button",{onClick:S,className:`absolute top-6 -right-8 p-1.5 rounded-r-md shadow-md border-y border-r cursor-pointer flex items-center justify-center transition-colors duration-500 ${u?"bg-zinc-900 border-zinc-800 text-zinc-400 hover:text-white":"bg-white border-gray-200 text-zinc-600 hover:text-black"}`,title:b?"Ocultar barra lateral":"Mostrar barra lateral",children:b?p.jsx(wD,{size:16}):p.jsx(_D,{size:16})})]})},cu=({title:t,icon:e,isDarkMode:n,children:r,isOpen:i,onToggle:s})=>p.jsxs("div",{className:`p-2 rounded-lg border transition-all duration-200 ${n?"bg-zinc-950/50 border-zinc-800":"bg-white border-gray-200 shadow-sm"}`,children:[p.jsxs("button",{onClick:s,className:`w-full text-xs font-bold uppercase flex items-center justify-between gap-2 ${n?"text-zinc-500 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(e,{size:10})," ",t]}),p.jsx("div",{className:`transition-transform duration-300 ${i?"rotate-0":"-rotate-90"}`,children:p.jsx(vD,{size:12})})]}),p.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${i?"grid-rows-[1fr] opacity-100 mt-2":"grid-rows-[0fr] opacity-0 mt-0"}`,children:p.jsx("div",{className:"overflow-hidden",children:r})})]}),_t=({onDragStart:t,type:e,category:n,icon:r,label:i,color:s,isDarkMode:o,compact:a})=>p.jsxs("div",{className:`${a?"flex flex-col items-center justify-center p-2 gap-1 text-center":"flex items-center gap-3 p-3"} rounded cursor-grab border-l-4 ${s.replace("border-","border-l-")} transition-all ${a?"hover:scale-105":"hover:translate-x-2"} ${o?"bg-zinc-800/40 border-y border-r border-zinc-800 hover:bg-zinc-800":"bg-white border-y border-r border-gray-200 hover:bg-gray-50 shadow-sm"}`,onDragStart:l=>t(l,e,n),draggable:!0,title:i,children:[p.jsx(r,{size:a?16:18,className:s.replace("border-","text-")}),p.jsx("span",{className:`${a?"text-[10px]":"text-sm"} font-bold font-mono ${o?"text-zinc-300":"text-zinc-700"}`,children:i})]}),n3=({isOpen:t,onClose:e,node:n,onSave:r,onDelete:i,isDarkMode:s})=>{const[o,a]=D.useState(""),[l,u]=D.useState(""),[d,h]=D.useState(""),[f,m]=D.useState("clue"),[b,S]=D.useState(!1);if(D.useEffect(()=>{n&&(a(n.data.label||""),u(n.data.description||""),h(n.data.image||""),m(n.data.category||"clue"),S(!1))},[n]),!t)return null;if(b)return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm",children:p.jsxs("div",{className:`${s?"bg-zinc-900":"bg-white"} border border-red-900/50 p-6 rounded-lg w-96 shadow-2xl animate-in fade-in zoom-in duration-200 text-center`,children:[p.jsx("h2",{className:"text-xl font-bold text-red-500 font-mono tracking-wider mb-4",children:"ELIMINAR EVIDENCIA?"}),p.jsx("p",{className:`${s?"text-zinc-400":"text-gray-600"} text-sm font-mono mb-6`,children:"Esta accin es irreversible. Ests seguro?"}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsx("button",{onClick:()=>S(!1),className:`px-4 py-2 ${s?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:"Cancelar"}),p.jsx("button",{onClick:()=>i(n.id),className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Confirmar"})]})]})});const P=y=>{y.preventDefault(),r(n.id,{...n.data,label:o,description:l,image:d,category:f}),e()};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm",children:p.jsxs("div",{className:`${s?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-96 shadow-2xl animate-in fade-in zoom-in duration-200`,children:[p.jsxs("div",{className:`flex justify-between items-center mb-4 border-b ${s?"border-zinc-800":"border-gray-200"} pb-2`,children:[p.jsx("h2",{className:"text-xl font-bold text-red-500 font-mono tracking-wider",children:"EDITAR EVIDENCIA"}),p.jsx("button",{onClick:e,className:`${s?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:p.jsx(rs,{size:20})})]}),p.jsxs("form",{onSubmit:P,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"evidence-category",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Categora"}),p.jsxs("select",{id:"evidence-category",name:"evidence-category",value:f,onChange:y=>m(y.target.value),className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all text-sm`,children:[p.jsx("option",{value:"person",children:"Sospechoso"}),p.jsx("option",{value:"place",children:"Lugar"}),p.jsx("option",{value:"clue",children:"Pista"}),p.jsx("option",{value:"event",children:"Evento"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"evidence-title",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Ttulo"}),p.jsx("input",{id:"evidence-title",type:"text",name:"evidence-title",value:o,onChange:y=>a(y.target.value),className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all`,autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"evidence-description",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Descripcin"}),p.jsx("textarea",{id:"evidence-description",name:"evidence-description",value:l,onChange:y=>u(y.target.value),rows:4,className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-300":"bg-gray-50 border-gray-300 text-gray-700"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono text-sm resize-none transition-all`})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"evidence-image-url",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Imagen (URL o Local)"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{id:"evidence-image-url",type:"text",name:"evidence-image-url",value:d,onChange:y=>h(y.target.value),placeholder:"https://...",className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-400":"bg-gray-50 border-gray-300 text-gray-600"} border p-2 rounded focus:border-red-900 outline-none font-mono text-xs`}),p.jsx("div",{className:`text-[10px] ${s?"text-zinc-600":"text-gray-400"} text-center font-mono uppercase tracking-widest`,children:"- O -"}),p.jsxs("label",{className:`flex items-center justify-center w-full p-2 ${s?"bg-zinc-950 border-zinc-800 hover:border-zinc-600 hover:text-zinc-200":"bg-gray-50 border-gray-300 hover:border-gray-400 hover:text-gray-800"} border border-dashed rounded cursor-pointer transition-colors group`,children:[p.jsx("span",{className:`text-xs ${s?"text-zinc-500 group-hover:text-zinc-300":"text-gray-500 group-hover:text-gray-700"} font-mono uppercase`,children:"Subir archivo local"}),p.jsx("input",{type:"file",name:"evidence-image-file",className:"hidden",accept:"image/*",onChange:y=>{const v=y.target.files[0];if(v){const T=new FileReader;T.onload=R=>h(R.target.result),T.readAsDataURL(v)}}})]})]})]}),n.data.status&&p.jsx("div",{className:`flex justify-end pt-2 border-t ${s?"border-zinc-800":"border-gray-200"}`,children:p.jsxs("button",{type:"button",onClick:()=>{r(n.id,{...n.data,status:null}),e()},className:"text-[10px] flex items-center gap-1 text-orange-500 hover:text-orange-400 uppercase font-bold tracking-wider",children:[p.jsx(Dm,{size:12})," Quitar Sello"]})}),p.jsxs("div",{className:`flex justify-between items-center mt-6 pt-4 border-t ${s?"border-zinc-800":"border-gray-200"}`,children:[p.jsx("button",{type:"button",onClick:()=>S(!0),className:"text-red-600 hover:text-red-500 text-xs font-bold uppercase tracking-wider transition-colors",children:"Eliminar"}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 ${s?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-800"} text-xs font-bold uppercase tracking-wider transition-colors`,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Guardar"})]})]})]})]})})};let uu;const r3=new Uint8Array(16);function i3(){if(!uu&&(uu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uu(r3)}const At=[];for(let t=0;t<256;++t)At.push((t+256).toString(16).slice(1));function s3(t,e=0){return At[t[e+0]]+At[t[e+1]]+At[t[e+2]]+At[t[e+3]]+"-"+At[t[e+4]]+At[t[e+5]]+"-"+At[t[e+6]]+At[t[e+7]]+"-"+At[t[e+8]]+At[t[e+9]]+"-"+At[t[e+10]]+At[t[e+11]]+At[t[e+12]]+At[t[e+13]]+At[t[e+14]]+At[t[e+15]]}const o3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ew={randomUUID:o3};function xn(t,e,n){if(Ew.randomUUID&&!t)return Ew.randomUUID();t=t||{};const r=t.random||(t.rng||i3)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,s3(r)}function a3({top:t,left:e,right:n,bottom:r,clientX:i,clientY:s,onHide:o,takeSnapshot:a,setNodes:l}){const{screenToFlowPosition:u,setCenter:d,getZoom:h}=Sr(),f=b=>{b.stopPropagation();const{x:S,y:P}=u({x:i,y:s});d(S,P,{zoom:h(),duration:800}),o()},m=D.useCallback((b,S,P)=>{const y=u({x:i,y:s}),v={id:xn(),type:b,position:y,data:{label:P,category:S}};a(),l(T=>T.concat(v)),o()},[i,s,u,a,l,o]);return p.jsxs("div",{style:{top:t,left:e,right:n,bottom:r},className:"absolute z-50 bg-zinc-800 border border-zinc-700 shadow-xl rounded-md overflow-hidden min-w-[150px] flex flex-col animate-in fade-in zoom-in duration-100",children:[p.jsxs("button",{onClick:f,className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors border-b border-zinc-700",children:[p.jsx(CD,{size:14,className:"text-blue-400"})," Centrar Vista"]}),p.jsxs("button",{onClick:()=>m("note","note","Nota"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[p.jsx(o2,{size:14,className:"text-yellow-500"})," Aadir Nota"]}),p.jsxs("button",{onClick:()=>m("text","text","Texto"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[p.jsx(c2,{size:14,className:"text-zinc-400"})," Aadir Texto"]}),p.jsxs("button",{onClick:()=>m("image","image","Imagen"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[p.jsx(Lm,{size:14,className:"text-purple-500"})," Aadir Imagen"]}),p.jsxs("button",{onClick:()=>m("url","url","Enlace"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[p.jsx(Om,{size:14,className:"text-blue-400"})," Aadir URL"]})]})}const l3=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmText:s="Confirmar",cancelText:o="Cancelar",isDanger:a=!1,isDarkMode:l})=>t?p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[300] backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:`${l?"bg-zinc-900":"bg-white"} border ${a?"border-red-900/50":l?"border-zinc-700":"border-gray-200"} p-6 rounded-lg w-96 shadow-2xl animate-in zoom-in duration-200 text-center`,children:[p.jsx("h2",{className:`text-xl font-bold ${a?"text-red-500":l?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-4`,children:r}),p.jsx("p",{className:`${l?"text-zinc-400":"text-gray-600"} text-sm font-mono mb-6`,children:i}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsx("button",{onClick:e,className:`px-4 py-2 ${l?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:o}),p.jsx("button",{onClick:()=>{n&&n(),e()},className:`px-6 py-2 ${a?"bg-red-900/80 hover:bg-red-800 text-red-100 border-red-900":"bg-blue-900/80 hover:bg-blue-800 text-blue-100 border-blue-900"} text-xs font-bold uppercase tracking-wider rounded shadow-lg border transition-all`,children:s})]})]})}):null,c3=({isOpen:t,onClose:e,isDarkMode:n})=>{if(!t)return null;const r=[{key:"Doble Clic (Nodo)",desc:"Editar contenido de la evidencia",icon:_f},{key:"Doble Clic (Hilo)",desc:"Aadir/Editar etiqueta de relacin",icon:_f},{key:"Clic (Hilo)",desc:"Cambiar estilo (Slido / Punteado)",icon:_f},{key:"Backspace",desc:"Eliminar elementos seleccionados",icon:Vr},{key:"Ctrl + D",desc:"Duplicar nodos seleccionados",icon:Vr},{key:"Ctrl + Z",desc:"Deshacer accin",icon:Vr},{key:"Ctrl + Y",desc:"Rehacer accin",icon:Vr},{key:"Ctrl + S",desc:"Guardar tablero manualmente",icon:Vr},{key:"Ctrl + V",desc:"Pegar imagen del portapapeles",icon:Vr},{key:"F3 / Shift + F3",desc:"Navegar resultados de bsqueda",icon:Vr},{key:"Shift + C",desc:"Conectar nodos seleccionados",icon:Vr},{key:"Ctrl + Shift + L",desc:"Bloquear/Desbloquear seleccin",icon:Xo}];return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:`${n?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-[500px] shadow-2xl animate-in zoom-in duration-200 relative`,children:[p.jsx("button",{onClick:e,className:`absolute top-4 right-4 ${n?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:p.jsx(rs,{size:20})}),p.jsxs("h2",{className:`text-xl font-bold ${n?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-6 flex items-center gap-2`,children:[p.jsx(Vr,{className:"text-red-500"})," ATAJOS DE TECLADO"]}),p.jsx("div",{className:"grid grid-cols-1 gap-3",children:r.map((i,s)=>p.jsxs("div",{className:`flex items-center justify-between p-2 rounded border transition-colors ${n?"bg-zinc-950/50 border-zinc-800/50 hover:border-zinc-700":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(i.icon,{size:14,className:n?"text-zinc-500":"text-gray-400"}),p.jsx("span",{className:`${n?"text-zinc-300":"text-gray-700"} text-sm font-mono`,children:i.desc})]}),p.jsx("span",{className:"text-xs font-bold text-red-400 bg-red-900/10 px-2 py-1 rounded border border-red-900/20 font-mono",children:i.key})]},s))})]})})},u3=({isOpen:t,onClose:e,onConfirm:n,onDelete:r,title:i,initialValue:s="",initialColor:o="#dc2626",initialType:a,showTypeSelector:l=!1,colorLabel:u="Color",placeholder:d="Escribe una relacin...",isDarkMode:h})=>{const[f,m]=D.useState(s),[b,S]=D.useState(o),[P,y]=D.useState(a||"default");if(D.useEffect(()=>{t&&(m(s),S(o),a&&y(a))},[t,s,o,a]),!t)return null;const v=[{color:"#dc2626",label:"Rojo"},{color:"#3b82f6",label:"Azul"},{color:"#22c55e",label:"Verde"},{color:"#eab308",label:"Amarillo"},{color:"#a855f7",label:"Morado"}],T=R=>{R.preventDefault(),n(f,b,P),e()};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:`${h?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-96 shadow-2xl animate-in zoom-in duration-200`,children:[p.jsx("h2",{className:`text-xl font-bold ${h?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-4`,children:i}),p.jsxs("form",{onSubmit:T,children:[p.jsx("input",{type:"text",name:"input-value",value:f,onChange:R=>m(R.target.value),className:`w-full ${h?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all mb-4`,autoFocus:!0,placeholder:d}),l&&p.jsxs("div",{className:"mb-4",children:[p.jsx("span",{className:`block text-xs font-bold ${h?"text-zinc-500":"text-gray-500"} uppercase mb-2 font-mono`,children:"Tipo de Conexin"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"button",onClick:()=>y("straight"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${P==="straight"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Recta",children:p.jsx(t2,{size:16})}),p.jsx("button",{type:"button",onClick:()=>y("default"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${P==="default"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Curva",children:p.jsx(Kp,{size:16})}),p.jsx("button",{type:"button",onClick:()=>y("step"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${P==="step"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Escalonada",children:p.jsx(Jb,{size:16})})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("span",{className:`block text-xs font-bold ${h?"text-zinc-500":"text-gray-500"} uppercase mb-2 font-mono`,children:u}),p.jsx("div",{className:"flex gap-3",children:v.map(R=>p.jsx("button",{type:"button",onClick:()=>S(R.color),className:`w-6 h-6 rounded-full border-2 transition-all ${b===R.color?(h?"border-white ring-zinc-400":"border-gray-800 ring-gray-400")+" scale-110 ring-1":"border-transparent hover:scale-110"}`,style:{backgroundColor:R.color},title:R.label},R.color))})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[r?p.jsx("button",{type:"button",onClick:r,className:"text-red-600 hover:text-red-500 text-xs font-bold uppercase tracking-wider transition-colors",children:"Eliminar"}):p.jsx("div",{}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 ${h?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Guardar"})]})]})]})]})})},d3=({isOpen:t,onClose:e,boards:n,currentBoardId:r,onSwitch:i,onCreate:s,onDelete:o,onRename:a,onClone:l,onReorder:u,trash:d,onRestore:h,onPermanentDelete:f,isDarkMode:m})=>{const[b,S]=D.useState(null),[P,y]=D.useState(""),[v,T]=D.useState(!1),[R,L]=D.useState(""),[V,I]=D.useState(null),[E,_]=D.useState(""),[x,C]=D.useState("manual"),[A,k]=D.useState(!1),N=D.useMemo(()=>{let Q=(A?d:n).filter(G=>G.name.toLowerCase().includes(E.toLowerCase()));return x==="name"?Q.sort((G,Z)=>G.name.localeCompare(Z.name)):x==="created"?Q.sort((G,Z)=>Z.createdAt-G.createdAt):x==="modified"?Q.sort((G,Z)=>(Z.lastModified||0)-(G.lastModified||0)):Q},[n,d,E,x,A]),j=x==="manual"&&!E&&!A,O=(F,Q)=>{F.dataTransfer.setData("boardIndex",Q),F.dataTransfer.effectAllowed="move"},B=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move"},$=(F,Q)=>{F.preventDefault();const G=parseInt(F.dataTransfer.getData("boardIndex"));if(isNaN(G)||G===Q)return;const Z=[...n],[te]=Z.splice(G,1);Z.splice(Q,0,te),u(Z)};if(!t)return null;const M=F=>{S(F.id),y(F.name)},U=()=>{P.trim()&&a(b,P),S(null)},W=()=>{R.trim()&&(s(R),L(""),T(!1))};return p.jsx("div",{className:"fixed inset-0 bg-black/90 z-[200] flex items-center justify-center backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:`${m?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border w-[900px] h-[600px] rounded-lg shadow-2xl flex flex-col overflow-hidden`,children:[p.jsxs("div",{className:`p-6 border-b ${m?"border-zinc-800 bg-zinc-950":"border-gray-200 bg-gray-50"} flex justify-between items-center z-50 relative`,children:[p.jsxs("div",{children:[p.jsxs("h2",{className:`text-2xl font-bold ${m?"text-zinc-100":"text-gray-800"} font-mono tracking-widest flex items-center gap-3 uppercase`,children:[A?p.jsx(xw,{className:"text-red-500",size:28}):p.jsx(_w,{className:"text-yellow-600",size:28}),A?"PAPELERA DE RECICLAJE":"ARCHIVOS DE CASO"]}),p.jsx("p",{className:`${m?"text-zinc-500":"text-gray-500"} text-xs font-mono mt-1`,children:A?"Restaura casos eliminados o brralos definitivamente":"Selecciona un expediente para investigar"})]}),p.jsx("button",{onClick:e,className:`${m?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:p.jsx(rs,{size:24})})]}),p.jsxs("div",{className:`px-6 py-3 border-b flex gap-4 items-center justify-between ${m?"border-zinc-800 bg-zinc-900/50":"border-gray-200 bg-gray-50/50"}`,children:[p.jsxs("div",{className:`flex-1 flex items-center px-3 py-1.5 rounded border ${m?"bg-zinc-950 border-zinc-700":"bg-white border-gray-300"}`,children:[p.jsx(i2,{size:14,className:m?"text-zinc-500":"text-gray-400"}),p.jsx("input",{type:"text",name:"case-search",placeholder:"Buscar expediente...",value:E,onChange:F=>_(F.target.value),className:`ml-2 bg-transparent w-full text-xs outline-none font-mono ${m?"text-zinc-300 placeholder-zinc-600":"text-zinc-700 placeholder-zinc-400"}`})]}),p.jsxs("button",{onClick:()=>k(!A),className:`flex items-center gap-2 px-3 py-1.5 rounded border text-xs font-bold uppercase transition-colors ${A?m?"bg-red-900/30 border-red-800 text-red-400":"bg-red-50 border-red-200 text-red-600":m?"bg-zinc-900 border-zinc-700 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-600 hover:text-black"}`,children:[A?p.jsx(_w,{size:14}):p.jsx(xw,{size:14}),A?"Ver Archivos":"Papelera"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(mD,{size:14,className:m?"text-zinc-500":"text-gray-400"}),p.jsxs("select",{name:"sort-cases",value:x,onChange:F=>C(F.target.value),className:`text-xs font-mono p-1.5 rounded border outline-none cursor-pointer ${m?"bg-zinc-950 border-zinc-700 text-zinc-300":"bg-white border-gray-300 text-zinc-700"}`,children:[p.jsx("option",{value:"manual",children:"Manual (Arrastrar)"}),p.jsx("option",{value:"name",children:"Nombre (A-Z)"}),p.jsx("option",{value:"created",children:"Creado (Reciente)"}),p.jsx("option",{value:"modified",children:"Modificado (Reciente)"})]})]})]}),p.jsx("div",{className:`flex-1 p-8 overflow-y-auto overflow-x-hidden ${m?"bg-zinc-900/50":"bg-gray-100"}`,children:p.jsxs("div",{className:"flex flex-wrap justify-center items-start gap-y-12 pl-8 pb-12 pt-[2px]",children:[!E&&!A&&(v?p.jsx("div",{className:"relative w-56 h-40 -ml-12 first:ml-0 z-50 transition-all duration-300 shadow-2xl transform scale-105",children:p.jsxs("div",{className:`flex flex-col items-center justify-center h-full border-2 border-dashed border-yellow-600/50 bg-yellow-900/10 rounded-lg p-4 animate-in zoom-in duration-200 ${m?"bg-zinc-900":"bg-white"}`,children:[p.jsx("span",{className:"text-yellow-500 font-mono text-xs font-bold mb-2",children:"NOMBRE DEL CASO"}),p.jsx("input",{type:"text",name:"new-case-name",autoFocus:!0,value:R,onChange:F=>L(F.target.value),onKeyDown:F=>{F.key==="Enter"&&W(),F.key==="Escape"&&T(!1)},placeholder:"Ej: El Robo del Siglo",className:`${m?"bg-zinc-950 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"} border text-xs p-2 w-full rounded outline-none focus:border-yellow-600 font-mono text-center mb-2`}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>T(!1),className:`${m?"text-zinc-500 hover:text-white hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 hover:bg-gray-200"} text-[10px] uppercase font-bold px-2 py-1 rounded`,children:"Cancelar"}),p.jsx("button",{onClick:W,className:"text-zinc-900 bg-yellow-600 hover:bg-yellow-500 text-[10px] uppercase font-bold px-3 py-1 rounded",children:"Crear"})]})]})}):p.jsx("button",{onClick:()=>{T(!0),L(`Caso #${n.length+1}`)},className:"relative w-56 h-40 -ml-12 first:ml-0 transition-all duration-300 group",style:{zIndex:V==="new"?50:0,transform:V==="new"?"translateY(-1rem) scale(1.05) rotate(0deg)":"rotate(-3deg)"},onMouseEnter:()=>I("new"),onMouseLeave:()=>I(null),children:p.jsxs("div",{className:`flex flex-col items-center justify-center h-full border-2 border-dashed rounded-lg shadow-lg ${m?"border-zinc-700 hover:border-zinc-500 bg-zinc-800/50":"border-gray-300 hover:border-gray-400 bg-white"}`,children:[p.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 transition-all group-hover:scale-110 ${m?"bg-zinc-800 group-hover:bg-zinc-700":"bg-gray-200 group-hover:bg-gray-300"}`,children:p.jsx(HD,{className:m?"text-zinc-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-800"})}),p.jsx("span",{className:`${m?"text-zinc-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-800"} font-mono text-sm font-bold`,children:"NUEVO CASO"})]})})),N.map((F,Q)=>{const G=V===F.id,Z=r===F.id,te=F.isDeleting,ue=Q%3===0?"2deg":Q%3===1?"-1deg":"3deg";return p.jsx("div",{draggable:j,onDragStart:ae=>O(ae,Q),onDragOver:B,onDrop:ae=>$(ae,Q),className:"relative w-56 h-40 -ml-12 transition-all duration-300 ease-out cursor-pointer group",style:{zIndex:G?50:Q+1,transform:G?"translateY(-1.5rem) scale(1.1) rotate(0deg)":`rotate(${ue})`,animation:te?"delete-burn 0.5s ease-in-out forwards":"none",pointerEvents:te?"none":"auto"},onMouseEnter:()=>I(F.id),onMouseLeave:()=>I(null),onClick:()=>{b!==F.id&&!A&&i(F.id)},children:p.jsxs("div",{className:`relative flex flex-col h-full border-2 rounded-lg overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.5)] transition-colors duration-300
                    ${Z?m?"border-yellow-500 bg-yellow-900/40":"border-yellow-500 bg-yellow-100":m?A?"border-zinc-700 bg-zinc-900/50":"border-yellow-900/40 bg-yellow-950/30 hover:border-yellow-700 hover:bg-yellow-900/20":A?"border-gray-300 bg-gray-100":"border-yellow-200 bg-yellow-50 hover:border-yellow-300 hover:bg-yellow-100"}
                `,children:[j&&G&&p.jsx("div",{className:"absolute top-2 right-2 text-yellow-600/50",children:p.jsx(DD,{size:16})}),p.jsx("div",{className:`absolute top-0 left-0 w-24 h-6 rounded-br-lg border-b-2 border-r-2 shadow-sm transition-colors duration-300
                        ${Z?"bg-yellow-500 border-yellow-500":m?A?"bg-zinc-800 border-zinc-700":"bg-yellow-900/40 border-yellow-900/40 group-hover:bg-yellow-800 group-hover:border-yellow-700":A?"bg-gray-300 border-gray-300":"bg-yellow-200 border-yellow-200 group-hover:bg-yellow-300 group-hover:border-yellow-300"}
                    `}),p.jsxs("div",{className:"flex-1 p-4 pt-8 flex flex-col items-center justify-between text-center",children:[p.jsxs("div",{children:[p.jsx(zm,{size:32,className:`mb-2 drop-shadow-md transition-colors duration-300 ${Z?m?"text-yellow-400":"text-yellow-600":m?"text-yellow-800/60 group-hover:text-yellow-600":"text-yellow-300 group-hover:text-yellow-500"}`}),b===F.id?p.jsxs("div",{className:"flex items-center gap-1 w-full",onClick:ae=>ae.stopPropagation(),children:[p.jsx("input",{type:"text",name:"edit-case-name",value:P,onChange:ae=>y(ae.target.value),className:`${m?"bg-zinc-950 border-zinc-600 text-white":"bg-white border-gray-300 text-gray-900"} border text-xs p-1 w-full rounded outline-none focus:border-yellow-600 font-mono`,autoFocus:!0,onKeyDown:ae=>ae.key==="Enter"&&U()}),p.jsx("button",{onClick:U,className:"text-green-500 hover:text-green-400",children:p.jsx(Xb,{size:14})})]}):p.jsx("h3",{className:`font-mono font-bold text-sm line-clamp-2 ${r===F.id?m?"text-yellow-100":"text-yellow-800":m?A?"text-zinc-500 line-through":"text-zinc-300":A?"text-gray-400 line-through":"text-gray-700"}`,onDoubleClick:ae=>{A||(ae.stopPropagation(),M(F))},children:F.name})]}),p.jsxs("div",{className:`text-[10px] ${m?"text-zinc-500":"text-gray-500"} font-mono w-full`,children:[F.lastModified&&p.jsxs("p",{children:["Modif: ",new Date(F.lastModified).toLocaleString([],{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),p.jsxs("p",{className:`${m?"text-zinc-600":"text-gray-400"}`,children:["Creado: ",new Date(F.createdAt).toLocaleDateString()]})]})]}),p.jsx("div",{className:`absolute bottom-2 right-2 flex gap-1 ${A?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity z-50`,onClick:ae=>ae.stopPropagation(),children:A?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:ae=>{ae.stopPropagation(),h(F.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-green-500 hover:text-green-400 hover:bg-zinc-950 border-zinc-700":"bg-white text-green-600 hover:text-green-700 hover:bg-gray-50 border-gray-200"}`,title:"Restaurar Caso",children:p.jsx(r2,{size:12})}),p.jsx("button",{onClick:ae=>{ae.stopPropagation(),f(F.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-red-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-red-600 hover:bg-gray-50 border-gray-200"}`,title:"Eliminar Definitivamente",children:p.jsx(Qp,{size:12})})]}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),l(F.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-green-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-green-600 hover:bg-gray-50 border-gray-200"}`,title:"Clonar Caso",children:p.jsx(TD,{size:12})}),p.jsx("button",{onClick:ae=>{ae.stopPropagation(),M(F)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-blue-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-blue-600 hover:bg-gray-50 border-gray-200"}`,title:"Renombrar Caso",children:p.jsx(BD,{size:12})}),n.length>1&&p.jsx("button",{onClick:ae=>{ae.stopPropagation(),o(F.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-red-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-red-600 hover:bg-gray-50 border-gray-200"}`,title:"Mover a Papelera",children:p.jsx(Qp,{size:12})})]})})]})},F.id)})]})}),p.jsx("div",{className:`p-4 border-t text-center z-50 relative ${m?"bg-zinc-950 border-zinc-800":"bg-gray-50 border-gray-200"}`,children:p.jsx("p",{className:`${m?"text-zinc-600":"text-gray-400"} text-[10px] font-mono`,children:"CONFIDENCIAL - SOLO PARA USO OFICIAL"})})]})})},h3=({isZenMode:t,setIsZenMode:e,undo:n,redo:r,isDarkMode:i})=>p.jsxs("div",{className:"absolute top-4 right-4 z-50 flex gap-2",children:[!t&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:n,className:`px-4 py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 shadow-lg ${i?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-zinc-700":"bg-white text-zinc-600 border-gray-300 hover:bg-gray-100"}`,title:"Deshacer (Ctrl+Z)",children:[p.jsx(XD,{size:14})," Deshacer"]}),p.jsxs("button",{onClick:r,className:`px-4 py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 shadow-lg ${i?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-zinc-700":"bg-white text-zinc-600 border-gray-300 hover:bg-gray-100"}`,title:"Rehacer (Ctrl+Y)",children:[p.jsx(qD,{size:14})," Rehacer"]})]}),t&&p.jsxs("button",{onClick:()=>e(!1),className:"px-4 py-2 bg-black/50 hover:bg-black/80 text-white border border-white/20 rounded backdrop-blur-sm flex items-center gap-2 transition-all animate-in fade-in",title:"Salir de Modo Zen (Esc)",children:[p.jsx(VD,{size:14})," Salir"]})]}),jm=(t,e)=>{if(!t||!t.type.startsWith("image/"))return;const n=new FileReader;n.onload=r=>{const i=new Image;i.onload=()=>{let o=i.width,a=i.height;if(o>400||a>400){const h=o/a;o>a?(o=400,a=400/h):(a=400,o=400*h)}const l=document.createElement("canvas");l.width=o,l.height=a,l.getContext("2d").drawImage(i,0,0,o,a);const d=l.toDataURL("image/jpeg",.7);e(d,o,a)},i.src=r.target.result},n.readAsDataURL(t)},f3=({isInteractive:t,reactFlowInstance:e,takeSnapshot:n,setNodes:r})=>{D.useEffect(()=>{const i=s=>{if(!t||!e)return;const o=s.clipboardData.items;for(const a of o)if(a.type.indexOf("image")!==-1){const l=a.getAsFile();jm(l,(u,d,h)=>{const f=e.screenToFlowPosition({x:window.innerWidth/2,y:window.innerHeight/2}),m={id:xn(),type:"image",position:f,data:{label:"Imagen Pegada",image:u},style:{width:d,height:h}};n(),r(b=>b.concat(m))})}};return window.addEventListener("paste",i),()=>window.removeEventListener("paste",i)},[e,t,n,r])};function p3(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const g3=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Bi(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let ao=null;function u2(t={}){return ao||(t.includeStyleProperties?(ao=t.includeStyleProperties,ao):(ao=Bi(window.getComputedStyle(document.documentElement)),ao))}function Ed(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function m3(t){const e=Ed(t,"border-left-width"),n=Ed(t,"border-right-width");return t.clientWidth+e+n}function y3(t){const e=Ed(t,"border-top-width"),n=Ed(t,"border-bottom-width");return t.clientHeight+e+n}function d2(t,e={}){const n=e.width||m3(t),r=e.height||y3(t);return{width:n,height:r}}function v3(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const vn=16384;function w3(t){(t.width>vn||t.height>vn)&&(t.width>vn&&t.height>vn?t.width>t.height?(t.height*=vn/t.width,t.width=vn):(t.width*=vn/t.height,t.height=vn):t.width>vn?(t.height*=vn/t.width,t.width=vn):(t.width*=vn/t.height,t.height=vn))}function bd(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function _3(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function x3(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),_3(i)}const cn=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||cn(n,e)};function E3(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function b3(t,e){return u2(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function S3(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?E3(n):b3(n,r);return document.createTextNode(`${i}{${s}}`)}function bw(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=g3();try{e.className=`${e.className} ${o}`}catch{return}const a=document.createElement("style");a.appendChild(S3(o,n,i,r)),e.appendChild(a)}function T3(t,e,n){bw(t,e,":before",n),bw(t,e,":after",n)}const Sw="application/font-woff",Tw="image/jpeg",I3={woff:Sw,woff2:Sw,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Tw,jpeg:Tw,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function C3(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function $m(t){const e=C3(t).toLowerCase();return I3[e]||""}function k3(t){return t.split(/,/)[1]}function Yp(t){return t.search(/^(data:)/)!==-1}function A3(t,e){return`data:${e};base64,${t}`}async function h2(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(n({res:r,result:a.result}))}catch(l){o(l)}},a.readAsDataURL(i)})}const xf={};function R3(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Fm(t,e,n){const r=R3(t,e,n.includeQueryParams);if(xf[r]!=null)return xf[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await h2(t,n.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),k3(a)));i=A3(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return xf[r]=i,i}async function N3(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):bd(e)}async function P3(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o==null||o.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return bd(a)}const n=t.poster,r=$m(n),i=await Fm(n,r,e);return bd(i)}async function D3(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await dh(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function z3(t,e){return cn(t,HTMLCanvasElement)?N3(t):cn(t,HTMLVideoElement)?P3(t,e):cn(t,HTMLIFrameElement)?D3(t,e):t.cloneNode(f2(t))}const L3=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",f2=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function O3(t,e,n){var r,i;if(f2(e))return e;let s=[];return L3(t)&&t.assignedNodes?s=Bi(t.assignedNodes()):cn(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=Bi(t.contentDocument.body.childNodes):s=Bi(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||cn(t,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>dh(a,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function V3(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):u2(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),cn(t,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function M3(t,e){cn(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),cn(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function j3(t,e){if(cn(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function $3(t,e,n){return cn(e,Element)&&(V3(t,e,n),T3(t,e,n),M3(t,e),j3(t,e)),e}async function F3(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const l=t.querySelector(a),u=document.querySelector(a);!l&&u&&!r[a]&&(r[a]=await dh(u,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let l=0;l<i.length;l++)a.appendChild(i[l]);t.appendChild(o)}return t}async function dh(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>z3(r,e)).then(r=>O3(t,r,e)).then(r=>$3(t,r,e)).then(r=>F3(r,e))}const p2=/url\((['"]?)([^'"]+?)\1\)/g,U3=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,B3=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function H3(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function q3(t){const e=[];return t.replace(p2,(n,r,i)=>(e.push(i),n)),e.filter(n=>!Yp(n))}async function W3(t,e,n,r,i){try{const s=n?p3(e,n):e,o=$m(e);let a;return i||(a=await Fm(s,o,r)),t.replace(H3(e),`$1${a}$3`)}catch{}return t}function K3(t,{preferredFontFormat:e}){return e?t.replace(B3,n=>{for(;;){const[r,,i]=U3.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function g2(t){return t.search(p2)!==-1}async function m2(t,e,n){if(!g2(t))return t;const r=K3(t,n);return q3(r).reduce((s,o)=>s.then(a=>W3(a,o,e,n)),Promise.resolve(r))}async function lo(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await m2(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function G3(t,e){await lo("background",t,e)||await lo("background-image",t,e),await lo("mask",t,e)||await lo("-webkit-mask",t,e)||await lo("mask-image",t,e)||await lo("-webkit-mask-image",t,e)}async function Q3(t,e){const n=cn(t,HTMLImageElement);if(!(n&&!Yp(t.src))&&!(cn(t,SVGImageElement)&&!Yp(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Fm(r,$m(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(u){o(u)}}:o;const a=t;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function Y3(t,e){const r=Bi(t.childNodes).map(i=>y2(i,e));await Promise.all(r).then(()=>t)}async function y2(t,e){cn(t,Element)&&(await G3(t,e),await Q3(t,e),await Y3(t,e))}function X3(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const Iw={};async function Cw(t){let e=Iw[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},Iw[t]=e,e}async function kw(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),h2(a,e.fetchRequestInit,({result:l})=>(n=n.replace(o,`url(${l})`),[o,l]))});return Promise.all(s).then(()=>n)}function Aw(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=a.exec(r),l===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(l[0])}return e}async function J3(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{Bi(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const l=s.href,u=Cw(l).then(d=>kw(d,e)).then(d=>Aw(d).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?a+=1:i.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:h,error:f})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(u)}})}catch(s){const o=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(Cw(i.href).then(a=>kw(a,e)).then(a=>Aw(a).forEach(l=>{o.insertRule(l,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{Bi(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function Z3(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>g2(e.style.getPropertyValue("src")))}async function ez(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Bi(t.ownerDocument.styleSheets),r=await J3(n,e);return Z3(r)}function v2(t){return t.trim().replace(/["']/g,"")}function tz(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(v2(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function nz(t,e){const n=await ez(t,e),r=tz(t);return(await Promise.all(n.filter(s=>r.has(v2(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return m2(s.cssText,o,e)}))).join(`
`)}async function rz(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await nz(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function iz(t,e={}){const{width:n,height:r}=d2(t,e),i=await dh(t,e,!0);return await rz(i,e),await y2(i,e),X3(i,e),await x3(i,n,r)}async function sz(t,e={}){const{width:n,height:r}=d2(t,e),i=await iz(t,e),s=await bd(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=e.pixelRatio||v3(),u=e.canvasWidth||n,d=e.canvasHeight||r;return o.width=u*l,o.height=d*l,e.skipAutoScale||w3(o),o.style.width=`${u}`,o.style.height=`${d}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function Rw(t,e={}){return(await sz(t,e)).toDataURL()}const oz=({reactFlowWrapper:t,reactFlowInstance:e,boards:n,currentBoardId:r,bgType:i,isDarkMode:s,setNodes:o})=>{const[a,l]=D.useState(!1),u=D.useCallback(async()=>{if(t.current===null||!e||!o)return;l(!0),await new Promise(O=>setTimeout(O,100));const{x:d,y:h,zoom:f}=e.getViewport(),m=e.getNodes(),b=m.filter(O=>O.selected),S=b.map(O=>O.id);S.length>0&&(o(O=>O.map(B=>({...B,selected:!1}))),await new Promise(O=>setTimeout(O,50)));const P=b.length>0?b:m;if(P.length===0){l(!1),S.length>0&&o(O=>O.map(B=>({...B,selected:S.includes(B.id)})));return}const y=hc(P),v=100,T=y.width+v*2,R=y.height+v*2,L=-y.x+v,V=-y.y+v;e.setViewport({x:L,y:V,zoom:1}),await new Promise(O=>setTimeout(O,1e3)),document.fonts&&await document.fonts.ready;const E=t.current.querySelector(".react-flow");if(!E){l(!1),S.length>0&&o(O=>O.map(B=>({...B,selected:S.includes(B.id)})));return}const _=n.find(O=>O.id===r),C=(_?_.name:"Tablero sin nombre").toUpperCase(),A=Math.max(16,Math.min(72,T*.04)),k=A*.5;let N={};i==="cork"?N={backgroundColor:s?"#18181b":"#e5e5e5",backgroundImage:s?"radial-gradient(rgba(255,255,255,0.05) 1px, transparent 1px), radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px)":"radial-gradient(#999 1px, transparent 1px), radial-gradient(#999 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:"0 0, 20px 20px"}:i==="blackboard"?N={backgroundColor:s?"#27272a":"#ffffff",backgroundImage:s?"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)":"radial-gradient(#e5e7eb 2px, transparent 2px)",backgroundSize:s?"100px 100px":"30px 30px"}:N={backgroundColor:s?"#1e293b":"#f0f9ff",backgroundImage:s?"linear-gradient(#334155 1px, transparent 1px), linear-gradient(90deg, #334155 1px, transparent 1px)":"linear-gradient(#cbd5e1 1px, transparent 1px), linear-gradient(90deg, #cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"};const j={pixelRatio:2,skipAutoScale:!0,backgroundColor:N.backgroundColor,width:T,height:R,style:{width:`${T}px`,height:`${R}px`,overflow:"visible",fontFamily:"'Courier Prime', monospace",...N},imagePlaceholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",filter:O=>!(O.classList&&(O.classList.contains("react-flow__controls")||O.classList.contains("react-flow__minimap")||O.classList.contains("react-flow__attribution")))};try{let O;try{O=await Rw(E,{...j,useCORS:!0})}catch(te){console.warn("Error exportando con CORS, reintentando sin CORS...",te),await new Promise(ue=>setTimeout(ue,1e3)),O=await Rw(E,{...j,useCORS:!1})}const B=document.createElement("canvas"),$=j.pixelRatio||1;B.width=T*$,B.height=R*$;const M=B.getContext("2d"),U=new Image;await new Promise((te,ue)=>{U.onload=te,U.onerror=ue,U.src=O}),M.drawImage(U,0,0);const W=A*$;M.font=`bold ${W}px "Courier Prime", monospace`,M.fillStyle=s?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",M.shadowColor=s?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.2)",M.shadowBlur=3*$,M.shadowOffsetX=1*$,M.shadowOffsetY=1*$,M.textAlign="right",M.textBaseline="bottom";const F=k*$;M.fillText(C,B.width-F,B.height-F),O=B.toDataURL("image/png");const Q=document.createElement("a"),G=n.find(te=>te.id===r),Z=G?G.name.replace(/[^a-z0-9\u00C0-\u017F\s-_]/gi,""):"caso-detective";Q.download=`${Z}.png`,Q.href=O,Q.click()}catch(O){console.error("Error al exportar",O),alert("Error al generar la imagen. Si utilizas imgenes externas (URL), es posible que tengan restricciones de seguridad (CORS).")}finally{e.setViewport({x:d,y:h,zoom:f}),S.length>0&&o(O=>O.map(B=>({...B,selected:S.includes(B.id)}))),l(!1)}},[t,s,e,n,r,i,o]);return{isExporting:a,onExport:u}},az="default-case",Ef=(t,e=[])=>{let n=localStorage.getItem(`board-${t}-nodes`),r=localStorage.getItem(`board-${t}-edges`),i=localStorage.getItem(`board-${t}-bg`);return!n&&t===az&&(n=localStorage.getItem("detective-board-nodes"),r=localStorage.getItem("detective-board-edges")),{nodes:n?JSON.parse(n):e,edges:r?JSON.parse(r):[],bgType:i||"cork"}},du="default-case",lz=({nodes:t,edges:e,bgType:n,setNodes:r,setEdges:i,setBgType:s,reactFlowInstance:o,clearHistory:a,setCaseManagerOpen:l,setConfirmModal:u,lastSaved:d})=>{const[h,f]=D.useState(()=>{try{const _=localStorage.getItem("detective-boards-list");return _?JSON.parse(_):localStorage.getItem("detective-board-nodes")?[{id:du,name:"Caso #001: Principal",createdAt:Date.now(),lastModified:Date.now()}]:[{id:du,name:"Caso #001: Nuevo",createdAt:Date.now(),lastModified:Date.now()}]}catch{return[{id:du,name:"Caso #001: Nuevo",createdAt:Date.now(),lastModified:Date.now()}]}}),[m,b]=D.useState(()=>{try{const _=localStorage.getItem("detective-boards-trash");return _?JSON.parse(_):[]}catch{return[]}}),[S,P]=D.useState(()=>localStorage.getItem("detective-current-board-id")||du);D.useEffect(()=>{localStorage.setItem("detective-boards-list",JSON.stringify(h))},[h]),D.useEffect(()=>{localStorage.setItem("detective-boards-trash",JSON.stringify(m))},[m]),D.useEffect(()=>{localStorage.setItem("detective-current-board-id",S)},[S]),D.useEffect(()=>{d&&f(_=>_.map(x=>x.id===S?{...x,lastModified:d.getTime()}:x))},[d,S]),D.useEffect(()=>{const _=h.find(x=>x.id===S);_&&(document.title=`${_.name} | Detective Board`)},[S,h]);const y=D.useCallback(_=>{localStorage.setItem(`board-${S}-nodes`,JSON.stringify(t)),localStorage.setItem(`board-${S}-edges`,JSON.stringify(e)),localStorage.setItem(`board-${S}-bg`,n);const x=Ef(_);r(x.nodes),i(x.edges),s(x.bgType),P(_),a(),l(!1),o&&setTimeout(()=>{o.fitView({duration:800,padding:.2})},100)},[S,t,e,n,r,i,s,a,o,l]),v=_=>{if(!_)return;const x=xn(),C={id:x,name:_,createdAt:Date.now(),lastModified:Date.now()};f(A=>[...A,C]),y(x)},T=_=>{h.length<=1||u({isOpen:!0,title:"MOVER A PAPELERA?",message:"El caso se mover a la papelera. Podrs restaurarlo si lo necesitas.",isDanger:!0,confirmText:"Mover",onConfirm:()=>{f(x=>x.map(C=>C.id===_?{...C,isDeleting:!0}:C)),setTimeout(()=>{const x=h.find(A=>A.id===_),C=h.filter(A=>A.id!==_);if(x){const{isDeleting:A,...k}=x;b(N=>[{...k,deletedAt:Date.now()},...N])}if(f(C),S===_){const A=C[0].id,k=Ef(A);r(k.nodes),i(k.edges),s(k.bgType),P(A),a(),o&&setTimeout(()=>{o.fitView({duration:800,padding:.2})},100)}},500)}})},R=D.useCallback(_=>{const x=m.find(C=>C.id===_);x&&(b(C=>C.filter(A=>A.id!==_)),f(C=>[...C,{...x,isDeleting:!1}]))},[m]),L=D.useCallback(_=>{u({isOpen:!0,title:"ELIMINAR DEFINITIVAMENTE?",message:"Esta accin es irreversible. Los datos del caso se borrarn del disco para siempre.",isDanger:!0,confirmText:"Eliminar",onConfirm:()=>{b(x=>x.filter(C=>C.id!==_)),localStorage.removeItem(`board-${_}-nodes`),localStorage.removeItem(`board-${_}-edges`),localStorage.removeItem(`board-${_}-bg`)}})},[]),V=(_,x)=>{f(C=>C.map(A=>A.id===_?{...A,name:x}:A))},I=D.useCallback(_=>{f(_)},[]),E=D.useCallback(_=>{const x=h.find(C=>C.id===_);x&&u({isOpen:!0,title:"CLONAR CASO?",message:`Deseas crear una copia del expediente "${x.name}"?`,confirmText:"Clonar",onConfirm:()=>{let C,A,k;if(_===S)C=t,A=e,k=n;else{const O=Ef(_);C=O.nodes,A=O.edges,k=O.bgType}const N=xn(),j={id:N,name:`${x.name} (Copia)`,createdAt:Date.now(),lastModified:Date.now()};localStorage.setItem(`board-${N}-nodes`,JSON.stringify(C)),localStorage.setItem(`board-${N}-edges`,JSON.stringify(A)),localStorage.setItem(`board-${N}-bg`,k),f(O=>{const B=O.findIndex(M=>M.id===_),$=[...O];return $.splice(B+1,0,j),$}),y(N)}})},[h,y,S,t,e,n,u]);return D.useEffect(()=>{h.length>0&&!h.find(_=>_.id===S)&&y(h[0].id)},[h,S,y]),{boards:h,setBoards:f,trash:m,currentBoardId:S,setCurrentBoardId:P,handleSwitchBoard:y,handleCreateBoard:v,handleDeleteBoard:T,handleRestoreBoard:R,handlePermanentDelete:L,handleRenameBoard:V,handleReorderBoards:I,handleCloneBoard:E}},cz=({onSave:t,undo:e,redo:n,duplicateSelected:r,navigateSearch:i,reactFlowInstance:s,edges:o,setEdges:a,takeSnapshot:l,connectionLineType:u,connectionColor:d})=>{D.useEffect(()=>{const h=f=>{if((f.ctrlKey||f.metaKey)&&f.key==="s"&&(f.preventDefault(),t()),(f.ctrlKey||f.metaKey)&&f.key==="z"&&(f.preventDefault(),f.shiftKey?n():e()),(f.ctrlKey||f.metaKey)&&f.key==="y"&&(f.preventDefault(),n()),(f.ctrlKey||f.metaKey)&&f.key==="d"&&(f.preventDefault(),r()),f.key==="F3"&&(f.preventDefault(),f.shiftKey?i("prev"):i("next")),f.shiftKey&&f.key.toLowerCase()==="c"){if(f.preventDefault(),!s)return;const m=s.getNodes().filter(b=>b.selected);if(m.length>=2){m.sort((S,P)=>S.position.x-P.position.x);const b=[];for(let S=0;S<m.length-1;S++){const P=m[S],y=m[S+1];o.some(T=>T.source===P.id&&T.target===y.id||T.source===y.id&&T.target===P.id)||b.push({id:xn(),source:P.id,target:y.id,type:u,style:{stroke:d,strokeWidth:2},className:"quick-draw"})}b.length>0&&(l(),a(S=>S.concat(b)))}}};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,e,n,r,i,o,u,d,s,a,l])},uz=({isInteractive:t,reactFlowInstance:e,setNodes:n,takeSnapshot:r,setPendingStampNodeId:i,setInputModalOpen:s,setEditingEdge:o,setEditingNode:a})=>{const l=D.useCallback(d=>{if(d.preventDefault(),!t){d.dataTransfer.dropEffect="none";return}d.dataTransfer.dropEffect="move"},[t]),u=D.useCallback(d=>{if(d.preventDefault(),!t)return;if(d.dataTransfer.files&&d.dataTransfer.files.length>0){const P=d.dataTransfer.files[0];jm(P,(y,v,T)=>{const R=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),L={id:xn(),type:"image",position:R,data:{label:"Imagen",image:y},style:{width:v,height:T}};r(),n(V=>V.concat(L))});return}const h=d.dataTransfer.getData("text/uri-list")||d.dataTransfer.getData("text/plain");if(h&&(h.startsWith("data:image")||h.startsWith("http"))){const P=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:xn(),type:"image",position:P,data:{label:"Imagen Extrada",image:h},style:{width:300,height:300}};r(),n(v=>v.concat(y));return}const f=d.dataTransfer.getData("application/reactflow"),m=d.dataTransfer.getData("application/category");if(typeof f>"u"||!f)return;if(f==="stamp"){const P=d.dataTransfer.getData("application/category"),y=P==="custom",v=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),R=e.getIntersectingNodes({x:v.x,y:v.y,width:1,height:1}).slice().reverse().find(L=>L.type==="evidence"||L.type==="note"||L.type==="image");if(R){if(y){i(R.id),s(!0),o(null),a(null);return}r(),n(L=>L.map(V=>V.id===R.id?{...V,data:{...V.data,status:P}}:V))}return}if(f==="zone"){const P=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:xn(),type:"zone",position:P,data:{label:"ZONA SEGURA"},style:{width:300,height:300,backgroundColor:"rgba(113, 113, 122, 0.05)",borderColor:"#71717a"}};r(),n(v=>[y,...v]);return}if(f==="url"){const P=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:xn(),type:"url",position:P,data:{url:"",label:"Nuevo Enlace"},style:{width:300,height:250}};r(),n(v=>v.concat(y));return}const b=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),S={id:xn(),type:f,position:b,data:{label:`Nuevo ${m}`,category:m,description:"Doble click para editar..."}};r(),n(P=>P.concat(S))},[e,n,t,r,i,s,o,a]);return{onDragOver:l,onDrop:u}},Um=({status:t})=>{if(typeof t=="object"&&t.type==="custom")return p.jsx("div",{className:"border-4 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif",borderColor:t.color,color:t.color,backgroundColor:`${t.color}30`},children:t.label});switch(t){case"solved":return p.jsx("div",{className:"border-4 border-green-600 text-green-600 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-green-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"RESUELTO"});case"discarded":return p.jsx("div",{className:"border-4 border-red-600 text-red-600 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-red-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"DESCARTADO"});case"key":return p.jsx("div",{className:"border-4 border-yellow-500 text-yellow-500 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-yellow-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"CLAVE"});case"question":return p.jsx("div",{className:"border-4 border-blue-500 text-blue-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-blue-950/30",children:p.jsx(Gp,{size:40,strokeWidth:3})});case"important":return p.jsx("div",{className:"border-4 border-orange-500 text-orange-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-orange-950/30",children:p.jsx(l2,{size:40,strokeWidth:3})});case"verify":return p.jsx("div",{className:"border-4 border-purple-500 text-purple-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-purple-950/30",children:p.jsx(Zb,{size:40,strokeWidth:3})});case"danger":return p.jsx("div",{className:"border-4 border-red-600 text-red-600 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-red-950/30",children:p.jsx(s2,{size:40,strokeWidth:3})});case"confidential":return p.jsx("div",{className:"border-4 border-zinc-500 text-zinc-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-zinc-950/30",children:p.jsx(Xo,{size:40,strokeWidth:3})});default:return null}},Nw={person:{color:"border-blue-500",icon:Mm,dark:{bg:"bg-gradient-to-br from-blue-900 to-blue-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-blue-50 to-blue-100",text:"text-blue-900/70",title:"text-blue-950",border:"border-black/10"}},place:{color:"border-green-500",icon:e2,dark:{bg:"bg-gradient-to-br from-green-900 to-green-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-green-50 to-green-100",text:"text-green-900/70",title:"text-green-950",border:"border-black/10"}},clue:{color:"border-orange-500",icon:zm,dark:{bg:"bg-gradient-to-br from-orange-900 to-orange-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-orange-50 to-orange-100",text:"text-orange-900/70",title:"text-orange-950",border:"border-black/10"}},event:{color:"border-red-500",icon:Yb,dark:{bg:"bg-gradient-to-br from-red-900 to-red-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-red-50 to-red-100",text:"text-red-900/70",title:"text-red-950",border:"border-black/10"}}},dz=({id:t,data:e,selected:n,isDarkMode:r})=>{const i=Nw[e.category]||Nw.clue,s=r?i.dark:i.light,o=i.icon,{setNodes:a}=Sr(),l=!!e.locked,[u,d]=D.useState(!1),h=D.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]),f=m=>{m.stopPropagation(),a(b=>b.map(S=>{if(S.id===t){const P=!!S.data.locked;return{...S,draggable:!0,data:{...S.data,locked:!P}}}return S}))};return p.jsxs("div",{className:`
        relative h-full w-full shadow-[0_10px_20px_-5px_rgba(0,0,0,0.6)] rounded-sm border-l-4 transition-all duration-300 ease-out group
        ${i.color} ${s.bg}
        ${n?"ring-2 ring-white scale-105 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.9)] z-50":"hover:scale-105 hover:-translate-y-1 hover:shadow-[0_20px_40px_-5px_rgba(0,0,0,0.8)] hover:z-40"}
        ${l?"nodrag":""} ${e.isDeleting?"deleting-default":""}
      `,children:[p.jsx(da,{color:"#ef4444",isVisible:n&&!l,minWidth:250,minHeight:150,handleStyle:{width:15,height:15}}),(n||l)&&p.jsx("button",{onClick:f,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${l?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:l?p.jsx(fa,{size:12}):p.jsx(ha,{size:12})}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(hn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(hn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&p.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${h}deg)`},children:p.jsx(Um,{status:e.status},JSON.stringify(e.status))}),p.jsxs("div",{className:"p-3 flex flex-col gap-2 h-full w-full overflow-hidden",children:[p.jsxs("div",{className:`flex items-center justify-between border-b ${s.border} pb-2`,children:[p.jsx("span",{className:`text-xs uppercase tracking-widest ${s.text} font-bold`,children:e.category}),p.jsx(o,{size:16,className:s.text})]}),e.image&&p.jsx("div",{className:`nodrag w-full h-32 overflow-hidden rounded-sm border ${s.border} sepia-[.5] cursor-zoom-in hover:sepia-0 transition-all`,onClick:m=>{m.stopPropagation(),d(!0)},children:p.jsx("img",{src:e.image,alt:"evidence",className:"w-full h-full object-cover"})}),u&&jl.createPortal(p.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center p-8 cursor-zoom-out backdrop-blur-sm animate-in fade-in duration-200",onClick:m=>{m.stopPropagation(),d(!1)},children:p.jsx("img",{src:e.image,alt:"Evidence HD",className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm"})}),document.body),p.jsxs("div",{children:[p.jsx("h3",{className:`text-lg font-bold ${s.title} leading-tight font-mono`,children:e.label}),p.jsx("p",{className:`text-xs ${s.text} mt-1 font-mono leading-relaxed`,children:e.description})]})]})]})},hz=D.memo(dz),bf={yellow:{bg:"from-yellow-100 to-yellow-300",btn:"bg-yellow-500"},green:{bg:"from-green-100 to-green-300",btn:"bg-green-500"},blue:{bg:"from-blue-100 to-blue-300",btn:"bg-blue-500"},red:{bg:"from-red-100 to-red-300",btn:"bg-red-500"},purple:{bg:"from-purple-100 to-purple-300",btn:"bg-purple-500"}},fz=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=Sr(),o=!!e.locked,a=bf[e.color]||bf.yellow,l=D.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]),u=f=>{f.stopPropagation(),s(m=>m.map(b=>{if(b.id===t){const S=!!b.data.locked;return{...b,draggable:!0,data:{...b.data,locked:!S}}}return b}))},d=f=>{s(m=>m.map(b=>b.id===t?{...b,data:{...b.data,color:f}}:b))},h=()=>{s(f=>f.map(m=>m.id===t?{...m,data:{...m.data,status:null}}:m))};return p.jsxs(p.Fragment,{children:[p.jsx(da,{color:"#eab308",isVisible:n&&!o,minWidth:150,minHeight:150,handleStyle:{width:15,height:15}}),n&&p.jsx("button",{onClick:()=>{i({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:p.jsx(rs,{size:12})}),(n||o)&&p.jsx("button",{onClick:u,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${o?"bg-red-900 border-red-700 text-red-200":"bg-yellow-500 border-yellow-700 text-white hover:bg-yellow-600"}`,children:o?p.jsx(fa,{size:12}):p.jsx(ha,{size:12})}),n&&!o&&p.jsxs("div",{className:`nodrag absolute -bottom-8 left-1/2 transform -translate-x-1/2 flex gap-1 p-1.5 rounded-full shadow-xl border z-50 backdrop-blur-sm ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[Object.entries(bf).map(([f,m])=>p.jsx("button",{onClick:()=>d(f),className:`w-4 h-4 rounded-full ${m.btn} border border-white/20 hover:scale-125 transition-transform`},f)),e.status&&p.jsx("button",{onClick:h,className:`w-4 h-4 rounded-full flex items-center justify-center border border-white/20 hover:scale-125 transition-transform ml-1 ${r?"bg-zinc-700 text-zinc-400 hover:text-white":"bg-gray-200 text-gray-500 hover:text-black"}`,title:"Quitar Sello",children:p.jsx(Dm,{size:10})})]}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(hn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(hn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&p.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${l}deg)`},children:p.jsx(Um,{status:e.status},JSON.stringify(e.status))}),p.jsxs("div",{className:`relative h-full w-full bg-gradient-to-br ${a.bg} shadow-[5px_5px_15px_rgba(0,0,0,0.5)] rotate-1 p-4 note-rough border-t border-l border-white/50 flex flex-col transition-all duration-300 ease-out hover:scale-105 hover:-translate-y-1 hover:shadow-[10px_15px_25px_rgba(0,0,0,0.6)] overflow-hidden ${o?"nodrag":""} ${e.isDeleting?"deleting-note":""}`,children:[p.jsx("div",{className:"absolute inset-0 paper-texture pointer-events-none opacity-50 mix-blend-multiply"}),p.jsx("textarea",{name:"note-content",className:"nodrag relative z-10 w-full h-full bg-transparent resize-none outline-none text-gray-800 placeholder-yellow-600/50 text-lg leading-relaxed",placeholder:"Escribe una nota...",defaultValue:e.label,onChange:f=>e.label=f.target.value,style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", sans-serif'}})]})]})},pz=D.memo(fz),gz=({isOpen:t,onClose:e,imageSrc:n,onCropComplete:r})=>{const[i,s]=D.useState(1),[o,a]=D.useState({x:0,y:0}),[l,u]=D.useState(!1),[d,h]=D.useState({x:0,y:0}),f=D.useRef(null),m=D.useRef(null);if(D.useEffect(()=>{t&&(s(1),a({x:0,y:0}))},[t,n]),!t||!n)return null;const b=v=>{u(!0),h({x:v.clientX-o.x,y:v.clientY-o.y})},S=v=>{l&&a({x:v.clientX-d.x,y:v.clientY-d.y})},P=()=>{u(!1)},y=()=>{const v=document.createElement("canvas"),T=v.getContext("2d"),R=m.current,L=f.current,V=R.clientWidth,I=R.clientHeight;v.width=V,v.height=I;const E=V/2,_=I/2;T.translate(E+o.x,_+o.y),T.scale(i,i),T.drawImage(L,-L.naturalWidth/2,-L.naturalHeight/2),r(v.toDataURL("image/jpeg",.9)),e()};return p.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center p-4 animate-in fade-in duration-200 select-none",onMouseUp:P,onMouseLeave:P,children:[p.jsxs("div",{className:"w-full max-w-lg flex justify-between items-center mb-4",children:[p.jsxs("h2",{className:"text-zinc-100 font-mono font-bold text-lg flex items-center gap-2",children:[p.jsx(jD,{size:18})," AJUSTAR RECORTE"]}),p.jsx("button",{onClick:e,className:"text-zinc-400 hover:text-white",children:p.jsx(rs,{})})]}),p.jsxs("div",{ref:m,className:"relative w-[400px] h-[400px] bg-zinc-900 overflow-hidden border-2 border-dashed border-zinc-500 cursor-move shadow-2xl rounded-sm",onMouseDown:b,onMouseMove:S,children:[p.jsx("img",{ref:f,src:n,alt:"Crop target",className:"absolute max-w-none origin-center pointer-events-none",style:{left:"50%",top:"50%",transform:`translate(-50%, -50%) translate(${o.x}px, ${o.y}px) scale(${i})`}}),p.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-30",children:[p.jsx("div",{className:"w-full h-1/3 border-b border-white/50 absolute top-0"}),p.jsx("div",{className:"w-full h-1/3 border-b border-white/50 absolute top-1/3"}),p.jsx("div",{className:"h-full w-1/3 border-r border-white/50 absolute left-0"}),p.jsx("div",{className:"h-full w-1/3 border-r border-white/50 absolute left-1/3"})]})]}),p.jsxs("div",{className:"mt-6 flex items-center gap-4 w-full max-w-md bg-zinc-900 p-4 rounded-lg border border-zinc-800",children:[p.jsx(e3,{size:20,className:"text-zinc-400"}),p.jsx("input",{type:"range",name:"crop-scale",min:"0.1",max:"3",step:"0.05",value:i,onChange:v=>s(parseFloat(v.target.value)),className:"w-full accent-red-600 h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer"}),p.jsx(ZD,{size:20,className:"text-zinc-400"})]}),p.jsxs("div",{className:"mt-6 flex gap-4",children:[p.jsx("button",{onClick:e,className:"px-6 py-2 border border-zinc-600 text-zinc-300 hover:text-white rounded font-bold uppercase text-xs tracking-wider transition-colors",children:"Cancelar"}),p.jsxs("button",{onClick:y,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded font-bold uppercase text-xs tracking-wider shadow-lg flex items-center gap-2 transition-colors",children:[p.jsx(Xb,{size:16})," Aplicar"]})]})]})},mz=({id:t,data:e,selected:n,isDarkMode:r})=>{const[i,s]=D.useState(e.image),[o,a]=D.useState(!1),[l,u]=D.useState(!1),[d,h]=D.useState(!1),[f,m]=D.useState(e.filters||{brightness:100,contrast:100,grayscale:0,sepia:0}),{deleteElements:b,setNodes:S,getNode:P}=Sr(),y=!!e.locked,v=D.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]);D.useEffect(()=>{e.filters&&m(e.filters)},[e.filters]),D.useEffect(()=>{if(e.image&&e.image.startsWith("http")){const x=new Image;x.crossOrigin="Anonymous",x.src=e.image,x.onload=()=>{try{const C=document.createElement("canvas");C.width=x.width,C.height=x.height,C.getContext("2d").drawImage(x,0,0);const k=C.toDataURL("image/jpeg");k.length>100&&(s(k),S(N=>N.map(j=>j.id===t?{...j,data:{...j.data,image:k}}:j)))}catch{}}}},[]);const T=x=>{x.stopPropagation(),S(C=>C.map(A=>{if(A.id===t){const k=!!A.data.locked;return{...A,draggable:!0,data:{...A.data,locked:!k}}}return A}))},R=x=>{const C=x.target.files[0];C&&jm(C,(A,k,N)=>{s(A),S(j=>j.map(O=>O.id===t?{...O,data:{...O.data,image:A},style:{...O.style,width:k,height:N}}:O))})},L=x=>{if(!i)return;const C=new Image;C.src=i,C.onload=()=>{var $,M;const A=document.createElement("canvas");A.width=C.height,A.height=C.width;const k=A.getContext("2d");k.translate(A.width/2,A.height/2),k.rotate(x==="right"?90*Math.PI/180:-90*Math.PI/180),k.drawImage(C,-C.width/2,-C.height/2);const N=A.toDataURL();s(N);const j=P(t),O=($=j==null?void 0:j.style)==null?void 0:$.width,B=(M=j==null?void 0:j.style)==null?void 0:M.height;S(U=>U.map(W=>W.id===t?{...W,data:{...W.data,image:N},style:{...W.style,width:B,height:O}}:W))}},V=()=>{u(!0)},I=x=>{s(x),S(C=>C.map(A=>A.id===t?{...A,data:{...A.data,image:x},style:{...A.style,width:300,height:300}}:A))},E=()=>{S(x=>x.map(C=>C.id===t?{...C,data:{...C.data,status:null}}:C))},_=(x,C)=>{const A={...f,[x]:C};m(A),S(k=>k.map(N=>N.id===t?{...N,data:{...N.data,filters:A}}:N))};return p.jsxs(p.Fragment,{children:[p.jsx(da,{color:"#ef4444",isVisible:n&&!y,minWidth:100,minHeight:100,handleStyle:{width:15,height:15}}),n&&p.jsx("button",{onClick:()=>{b({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:p.jsx(rs,{size:12})}),(n||y)&&p.jsx("button",{onClick:T,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${y?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:y?p.jsx(fa,{size:12}):p.jsx(ha,{size:12})}),n&&!y&&i&&p.jsxs("div",{className:`nodrag absolute -bottom-9 left-1/2 transform -translate-x-1/2 flex gap-1 p-1.5 rounded-full shadow-xl border z-50 backdrop-blur-sm items-center ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[p.jsx("button",{onClick:()=>h(!d),className:`p-1.5 rounded-full transition-colors ${d?"bg-blue-600 text-white":r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Filtros",children:p.jsx(QD,{size:14})}),p.jsx("div",{className:`w-px h-4 mx-0.5 ${r?"bg-zinc-700":"bg-gray-300"}`}),p.jsx("button",{onClick:()=>L("left"),className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Rotar Izquierda",children:p.jsx(WD,{size:14})}),p.jsx("button",{onClick:V,className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Recortar",children:p.jsx(ID,{size:14})}),p.jsx("button",{onClick:()=>L("right"),className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Rotar Derecha",children:p.jsx(KD,{size:14})}),e.status&&p.jsx("button",{onClick:E,className:`p-1.5 text-red-500 hover:text-red-400 rounded-full transition-colors ${r?"hover:bg-zinc-700":"hover:bg-gray-200"}`,title:"Quitar Sello",children:p.jsx(Dm,{size:14})})]}),d&&n&&!y&&p.jsxs("div",{className:`nodrag absolute -bottom-44 left-1/2 transform -translate-x-1/2 p-3 rounded-lg border z-50 w-48 backdrop-blur-sm flex flex-col gap-2 shadow-2xl animate-in fade-in slide-in-from-bottom-2 ${r?"bg-zinc-900/95 border-zinc-700":"bg-white/95 border-gray-200"}`,children:[p.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[p.jsx("span",{children:"Brillo"})," ",p.jsxs("span",{children:[f.brightness,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"200",value:f.brightness,onChange:x=>_("brightness",parseInt(x.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),p.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[p.jsx("span",{children:"Contraste"})," ",p.jsxs("span",{children:[f.contrast,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"200",value:f.contrast,onChange:x=>_("contrast",parseInt(x.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),p.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[p.jsx("span",{children:"B/N"})," ",p.jsxs("span",{children:[f.grayscale,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"100",value:f.grayscale,onChange:x=>_("grayscale",parseInt(x.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),p.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[p.jsx("span",{children:"Sepia"})," ",p.jsxs("span",{children:[f.sepia,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"100",value:f.sepia,onChange:x=>_("sepia",parseInt(x.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`})]}),p.jsx("div",{className:"tape-visual"}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(hn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(hn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&p.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${v}deg)`},children:p.jsx(Um,{status:e.status},JSON.stringify(e.status))}),p.jsx("div",{className:`h-full w-full ${i?"bg-zinc-100 p-2 pb-10 rotate-1 hover:rotate-0":r?"bg-zinc-900/50 border-zinc-700 hover:border-zinc-500":"bg-gray-200/50 border-gray-400 hover:border-gray-500"} shadow-[0_10px_20px_-5px_rgba(0,0,0,0.7)] flex items-center justify-center overflow-hidden rounded-sm relative group transition-all duration-300 ease-out hover:scale-105 hover:-translate-y-1 hover:shadow-[0_25px_50px_-12px_rgba(0,0,0,0.9)] ${y?"nodrag":""} ${e.isDeleting?"deleting-image":""} border-2 border-dashed`,children:i?p.jsxs("div",{className:"w-full h-full cursor-zoom-in",onClick:x=>{x.stopPropagation(),a(!0)},children:[p.jsx("img",{src:i,alt:"evidence",className:"w-full h-full object-cover border border-zinc-200",style:{filter:`brightness(${f.brightness}%) contrast(${f.contrast}%) grayscale(${f.grayscale}%) sepia(${f.sepia}%)`}}),p.jsx("div",{className:"absolute bottom-0 left-0 w-full h-10 flex items-center justify-center px-2",children:p.jsx("input",{type:"text",name:"image-caption",className:"nodrag w-full bg-transparent text-center text-zinc-800 text-xs outline-none placeholder-zinc-400/50 border-none p-0",placeholder:"",defaultValue:e.caption,onChange:x=>e.caption=x.target.value,onClick:x=>x.stopPropagation(),style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", cursive'}})})]}):p.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full p-2 gap-1",children:[p.jsxs("label",{className:`nodrag cursor-pointer flex flex-col items-center gap-1 transition-colors ${r?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,children:[p.jsx(Lm,{size:24}),p.jsx("span",{className:"text-[10px] font-mono uppercase text-center",children:"Subir Local"}),p.jsx("input",{type:"file",name:"upload-image",className:"hidden",accept:"image/*",onChange:R})]}),p.jsx("div",{className:`text-[10px] font-mono ${r?"text-zinc-600":"text-zinc-400"}`,children:"- O -"}),p.jsx("input",{type:"text",name:"image-url",placeholder:"Pegar URL...",className:`nodrag w-full border text-[10px] p-1 rounded outline-none focus:border-purple-500 font-mono text-center ${r?"bg-zinc-950 border-zinc-700 text-zinc-300":"bg-white border-gray-300 text-zinc-700"}`,onKeyDown:x=>{if(x.key==="Enter"){const C=x.currentTarget.value;s(C),e.image=C;const A=new Image;A.crossOrigin="Anonymous",A.onload=()=>{try{const k=document.createElement("canvas");k.width=A.width,k.height=A.height,k.getContext("2d").drawImage(A,0,0);const j=k.toDataURL("image/jpeg");s(j),S(O=>O.map(B=>B.id===t?{...B,data:{...B.data,image:j}}:B))}catch(k){console.warn("CORS blocked",k)}},A.src=C}}})]})}),o&&jl.createPortal(p.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center p-8 cursor-zoom-out backdrop-blur-sm animate-in fade-in duration-200",onClick:x=>{x.stopPropagation(),a(!1)},children:p.jsx("img",{src:i,alt:"Evidence HD",className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm",style:{filter:`brightness(${f.brightness}%) contrast(${f.contrast}%) grayscale(${f.grayscale}%) sepia(${f.sepia}%)`}})}),document.body),l&&jl.createPortal(p.jsx(gz,{isOpen:l,onClose:()=>u(!1),imageSrc:i,onCropComplete:I}),document.body)]})},yz=D.memo(mz),vz=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=Sr(),o=!!e.locked,a=h=>{h.stopPropagation(),s(f=>f.map(m=>{if(m.id===t){const b=!!m.data.locked;return{...m,draggable:!0,data:{...m.data,locked:!b}}}return m}))},l=(h,f)=>{s(m=>m.map(b=>b.id===t?{...b,data:{...b.data,[h]:f}}:b))},u=["#e5e5e5","#18181b","#ef4444","#3b82f6","#22c55e","#eab308"],d=[{label:"S",val:"14px"},{label:"M",val:"24px"},{label:"L",val:"36px"},{label:"XL",val:"48px"}];return p.jsxs(p.Fragment,{children:[p.jsx(da,{color:"#71717a",isVisible:n&&!o,minWidth:100,minHeight:30,handleStyle:{width:15,height:15}}),n&&p.jsx("button",{onClick:()=>{i({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:p.jsx(rs,{size:12})}),(n||o)&&p.jsx("button",{onClick:a,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${o?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:o?p.jsx(fa,{size:12}):p.jsx(ha,{size:12})}),n&&!o&&p.jsxs("div",{className:`nodrag absolute -bottom-10 left-1/2 transform -translate-x-1/2 flex flex-col gap-1 p-1.5 rounded-lg shadow-xl border z-50 backdrop-blur-sm items-center ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[p.jsx("div",{className:"flex gap-1",children:u.map(h=>p.jsx("button",{onClick:()=>l("color",h),className:"w-4 h-4 rounded-full border border-white/20 hover:scale-125 transition-transform",style:{backgroundColor:h}},h))}),p.jsx("div",{className:`flex gap-1 border-t pt-1 mt-0.5 ${r?"border-white/10":"border-black/10"}`,children:d.map(h=>p.jsx("button",{onClick:()=>l("fontSize",h.val),className:`text-[8px] px-1 font-mono border rounded ${r?"text-zinc-300 hover:text-white border-zinc-700 bg-zinc-800 hover:bg-zinc-700":"text-zinc-600 hover:text-black border-gray-300 bg-gray-100 hover:bg-gray-200"}`,children:h.label},h.label))})]}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(hn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(hn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),p.jsx("div",{className:`h-full w-full p-2 flex items-center justify-center overflow-hidden border border-transparent hover:border-zinc-700/50 rounded transition-colors ${o?"nodrag":""} ${e.isDeleting?"deleting-default":""}`,children:p.jsx("textarea",{name:"text-content",className:`nodrag w-full h-full bg-transparent resize-none outline-none font-bold text-center p-2 ${e.color?"":"text-node-content text-gray-200"}`,placeholder:"Escribe un ttulo...",defaultValue:e.label,onChange:h=>e.label=h.target.value,style:{fontFamily:'"Courier Prime", monospace',color:e.color,fontSize:e.fontSize||"24px"}})})]})},wz=D.memo(vz),_z=({id:t,data:e,selected:n,style:r,isDarkMode:i})=>{const{setNodes:s}=Sr(),o=(r==null?void 0:r.borderColor)||"#71717a",a=(r==null?void 0:r.backgroundColor)||(i?"rgba(113, 113, 122, 0.05)":"rgba(100, 116, 139, 0.05)"),l=!!e.locked,u=d=>{d.stopPropagation(),s(h=>h.map(f=>{if(f.id===t){const m=!!f.data.locked;return{...f,draggable:m,data:{...f.data,locked:!m}}}return f}))};return p.jsxs(p.Fragment,{children:[p.jsx(da,{color:o,isVisible:n&&!l,minWidth:150,minHeight:150}),(n||l)&&p.jsx("button",{onClick:u,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${l?"bg-red-900 border-red-700 text-red-200":i?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:l?p.jsx(fa,{size:12}):p.jsx(ha,{size:12})}),p.jsx("div",{className:`h-full w-full border-2 border-dashed rounded-xl transition-colors ${l?"nodrag":""} ${e.isDeleting?"deleting-zone":""}`,style:{borderColor:o,backgroundColor:a},children:p.jsx("div",{className:`absolute -top-3 left-4 px-2 py-0.5 rounded text-[10px] font-mono uppercase tracking-widest select-none whitespace-nowrap shadow-sm ${i?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-white border border-gray-300 text-gray-600"}`,children:e.label})})]})},xz=D.memo(_z),Ez=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=Sr(),[o,a]=D.useState(e.url||""),[l,u]=D.useState(!e.url),d=!!e.showIframe,[h,f]=D.useState(!1),[m,b]=D.useState(0),[S,P]=D.useState(null),[y,v]=D.useState(!0),[T,R]=D.useState(!1),L=!!e.locked,V=D.useMemo(()=>{if(!e.url)return"";try{const N=new URL(e.url);if(N.hostname.includes("youtube.com")||N.hostname.includes("youtu.be")){let O=null;if(N.hostname.includes("youtu.be"))O=N.pathname.slice(1);else if(N.searchParams.has("v"))O=N.searchParams.get("v");else if(N.pathname.startsWith("/embed/"))return e.url;if(O)return`https://www.youtube-nocookie.com/embed/${O}?rel=0&modestbranding=1&iv_load_policy=3&controls=1&playsinline=1&loop=1&playlist=${O}`}}catch{}return e.url},[e.url]),I=e.url?`https://s.wordpress.com/mshots/v1/${encodeURIComponent(e.url)}?w=400&v=${m}`:null,E=I?`https://wsrv.nl/?url=${encodeURIComponent(I)}`:null;D.useEffect(()=>{if(P(null),!E)return;(j=>{const O=new Image;O.crossOrigin="Anonymous",O.referrerPolicy="no-referrer",O.src=j,O.onload=()=>{try{const B=document.createElement("canvas");B.width=O.width,B.height=O.height,B.getContext("2d").drawImage(O,0,0);const M=B.toDataURL("image/jpeg");P(M),v(!1)}catch{v(!1),R(!0)}},O.onerror=()=>{v(!1),R(!0)}})(E)},[E]);const _=N=>{N.stopPropagation(),s(j=>j.map(O=>{if(O.id===t){const B=!!O.data.locked;return{...O,draggable:B,data:{...O.data,locked:!B}}}return O}))},x=()=>{let N=o;N&&!N.startsWith("http")&&(N="https://"+N),s(j=>j.map(O=>O.id===t?{...O,data:{...O.data,url:N,showIframe:!1}}:O)),u(!1),f(!1),R(!1),v(!0)},C=()=>{u(!0),f(!1),R(!1),v(!0)},A=N=>{N.stopPropagation(),b(j=>j+1),f(!1),R(!1),v(!0)},k=()=>{const N=!d;f(!1),s(j=>j.map(O=>O.id===t?{...O,data:{...O.data,showIframe:N}}:O))};return p.jsxs(p.Fragment,{children:[p.jsx(da,{color:"#3b82f6",isVisible:n&&!L,minWidth:200,minHeight:100}),n&&p.jsx("button",{onClick:()=>i({nodes:[{id:t}]}),className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:p.jsx(rs,{size:12})}),(n||L)&&p.jsx("button",{onClick:_,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${L?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:L?p.jsx(fa,{size:12}):p.jsx(ha,{size:12})}),p.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[p.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),p.jsx(hn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),p.jsx(hn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),p.jsxs("div",{className:`relative w-full h-full rounded-lg overflow-hidden border-2 transition-all shadow-lg flex flex-col ${r?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} ${L?"nodrag":""} ${e.isDeleting?"deleting-default":""}`,children:[p.jsxs("div",{className:`h-8 flex items-center px-2 gap-2 border-b ${r?"bg-zinc-800 border-zinc-700":"bg-gray-100 border-gray-200"}`,children:[p.jsx(PD,{size:14,className:"text-blue-500"}),p.jsx("span",{className:`text-[10px] font-mono truncate flex-1 ${r?"text-zinc-400":"text-gray-600"}`,children:e.url?new URL(e.url).hostname:"ENLACE WEB"}),!l&&p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:k,className:`text-zinc-500 transition-colors ${d?"text-blue-500":"hover:text-blue-500"}`,title:d?"Ver miniatura":"Ver interactivo",children:p.jsx(MD,{size:12})}),p.jsx("button",{onClick:A,className:"text-zinc-500 hover:text-green-500 transition-colors",title:"Actualizar miniatura",children:p.jsx(r2,{size:12})}),p.jsx("button",{onClick:C,className:"text-zinc-500 hover:text-blue-500 transition-colors",children:p.jsx(UD,{size:12})})]})]}),p.jsx("div",{className:"flex-1 relative bg-black/5 group",children:l?p.jsxs("div",{className:"p-4 flex flex-col gap-2 h-full justify-center",children:[p.jsx("input",{type:"text",name:"url-input",value:o,onChange:N=>a(N.target.value),placeholder:"https://ejemplo.com",className:`nodrag w-full text-xs p-2 rounded border outline-none font-mono ${r?"bg-zinc-950 border-zinc-700 text-white":"bg-white border-gray-300 text-black"}`,onKeyDown:N=>N.key==="Enter"&&x()}),p.jsx("button",{onClick:x,className:"bg-blue-600 text-white text-xs py-1 rounded hover:bg-blue-500 font-bold uppercase",children:"Guardar"})]}):p.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[p.jsx("div",{className:"flex-1 relative overflow-hidden bg-zinc-200 dark:bg-zinc-800 min-h-0",children:d?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`absolute top-0 left-0 w-full py-1 px-2 flex flex-col gap-1 items-center justify-center z-20 ${r?"bg-zinc-950/80":"bg-white/80"} backdrop-blur-[2px]`,children:p.jsx("span",{className:`text-[9px] leading-tight text-center select-none ${r?"text-zinc-400":"text-zinc-600"}`,children:"Si no carga, el sitio bloquea la conexin."})}),p.jsx("iframe",{src:V,className:"w-full h-full border-none relative z-10 bg-white",title:"Embedded Content",loading:"lazy",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-presentation allow-modals allow-popups-to-escape-sandbox",onError:N=>{console.warn("Error loading iframe:",e.url),N.target.style.display="none"}},m)]}):p.jsxs(p.Fragment,{children:[y&&e.url&&p.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center z-20",children:p.jsx("div",{className:"w-6 h-6 border-2 border-zinc-400 border-t-transparent rounded-full animate-spin"})}),S&&!T&&p.jsx("img",{src:S,alt:"Preview",className:"w-full h-full object-cover opacity-90 hover:opacity-100 transition-opacity"}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(!e.url||T)&&p.jsx(Om,{size:32,className:"text-zinc-400"})})]})}),p.jsxs("a",{href:e.url,target:"_blank",rel:"noopener",draggable:"false",onDragStart:N=>N.preventDefault(),className:`nodrag h-10 shrink-0 flex items-center justify-center gap-2 text-xs font-bold uppercase transition-colors z-10 relative ${r?"bg-zinc-800 hover:bg-zinc-700 text-blue-400":"bg-gray-200 hover:bg-gray-300 text-zinc-900"}`,children:[p.jsx(AD,{size:14})," Visitar Sitio"]})]})})]})]})},bz=D.memo(Ez),hh=({id:t,sourceX:e,sourceY:n,targetX:r,targetY:i,sourcePosition:s,targetPosition:o,style:a={},markerEnd:l,label:u,type:d,className:h})=>{let f="",m=0,b=0;const S={sourceX:e,sourceY:n,targetX:r,targetY:i,sourcePosition:s,targetPosition:o};return d==="straight"?[f,m,b]=sb(S):d==="step"?[f,m,b]=Kl({...S,borderRadius:0}):d==="smoothstep"?[f,m,b]=Kl(S):[f,m,b]=Cm(S),p.jsxs(p.Fragment,{children:[p.jsx(ua,{path:f,markerEnd:l,style:a,className:h}),u&&p.jsx(L5,{children:p.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${m}px,${b}px)`,pointerEvents:"all"},className:"nodrag nopan",children:p.jsx("div",{className:"custom-edge-label",children:u})})})]})},Sz=t=>p.jsx(hh,{...t,type:"straight"}),Tz=t=>p.jsx(hh,{...t,type:"step"}),Iz=t=>p.jsx(hh,{...t,type:"smoothstep"}),Cz=t=>p.jsx(hh,{...t,type:"default"}),w2=D.createContext(!0),co=t=>e=>{const n=D.useContext(w2);return D.createElement(t,{...e,isDarkMode:n})},kz={evidence:co(hz),note:co(pz),image:co(yz),text:co(wz),zone:co(xz),url:co(bz)},Az={default:Cz,straight:Sz,step:Tz,smoothstep:Iz},Rz=({connectionColor:t})=>{const e=D.useMemo(()=>({hideAttribution:!0}),[]),n=D.useMemo(()=>({stroke:t,strokeWidth:2}),[t]),r=D.useCallback(i=>{switch(i.type){case"evidence":switch(i.data.category){case"person":return"#3b82f6";case"place":return"#22c55e";case"clue":return"#f97316";case"event":return"#ef4444";default:return"#ef4444"}case"note":return"#eab308";case"image":return"#a855f7";case"text":return"#71717a";default:return"#ef4444"}},[]);return{nodeTypes:kz,edgeTypes:Az,proOptions:e,connectionLineStyle:n,nodeColor:r}},Nz=(t,e,n,r)=>{const[i,s]=D.useState([]),[o,a]=D.useState([]),l=D.useCallback(()=>{s(f=>[...f,{nodes:t,edges:e}]),a([])},[t,e]),u=D.useCallback(()=>{if(i.length===0)return;const f=i[i.length-1],m=i.slice(0,i.length-1);a(b=>[{nodes:t,edges:e},...b]),s(m),n(f.nodes),r(f.edges)},[i,t,e,n,r]),d=D.useCallback(()=>{if(o.length===0)return;const f=o[0],m=o.slice(1);s(b=>[...b,{nodes:t,edges:e}]),a(m),n(f.nodes),r(f.edges)},[o,t,e,n,r]),h=D.useCallback(()=>{s([]),a([])},[]);return{takeSnapshot:l,undo:u,redo:d,clearHistory:h,canUndo:i.length>0,canRedo:o.length>0}},Pz=({nodes:t,edges:e,setNodes:n,setEdges:r,onNodesChange:i,onEdgesChange:s})=>{const{takeSnapshot:o,undo:a,redo:l,clearHistory:u}=Nz(t,e,n,r),d=D.useCallback(b=>{n(S=>{var y;const P=S.find(v=>v.id===b);return!P||(y=P.data)!=null&&y.isDeleting?S:(setTimeout(()=>{n(v=>{var R;const T=v.find(L=>L.id===b);return T&&((R=T.data)!=null&&R.isDeleting)?v.filter(L=>L.id!==b):v}),r(v=>v.filter(T=>T.source!==b&&T.target!==b))},500),S.map(v=>v.id===b?{...v,data:{...v.data,isDeleting:!0}}:v))})},[n,r]),h=D.useCallback(b=>{r(S=>{var y;const P=S.find(v=>v.id===b);return!P||(y=P.className)!=null&&y.includes("deleting-edge")?S:(setTimeout(()=>{r(v=>v.filter(T=>T.id!==b))},300),S.map(v=>v.id===b?{...v,className:`${v.className||""} deleting-edge`}:v))})},[r]),f=D.useCallback(b=>{const S=b.filter(y=>y.type!=="remove"),P=b.filter(y=>y.type==="remove");P.length>0&&(o(),P.forEach(y=>d(y.id))),S.length>0&&i(S)},[i,o,d]),m=D.useCallback(b=>{const S=b.filter(y=>y.type!=="remove"),P=b.filter(y=>y.type==="remove");P.length>0&&(o(),P.forEach(y=>h(y.id))),S.length>0&&s(S)},[s,o,h]);return{takeSnapshot:o,undo:a,redo:l,clearHistory:u,onNodesChangeWithHistory:f,onEdgesChangeWithHistory:m,animateAndRemoveNode:d,animateAndRemoveEdge:h}},Dz=(t,e,n,r,i)=>{const[s,o]=D.useState(null),a=D.useRef(null),l=D.useCallback(u=>{if(u.button!==2||!n||u.target.closest(".react-flow__node")||u.target.closest(".react-flow__edge")||u.target.closest(".react-flow__controls")||u.target.closest(".react-flow__minimap"))return;u.preventDefault();const{left:d,top:h}=t.current.getBoundingClientRect(),f=u.clientX-d,m=u.clientY-h;a.current={startX:f,startY:m,x:f,y:m,width:0,height:0,isDragging:!1};const b=P=>{if(P.buttons===0){S(P);return}if(!a.current||!t.current)return;const y=t.current.getBoundingClientRect(),v=P.clientX-y.left,T=P.clientY-y.top,R=Math.min(a.current.startX,v),L=Math.min(a.current.startY,T),V=Math.abs(v-a.current.startX),I=Math.abs(T-a.current.startY);(V>5||I>5)&&(a.current={...a.current,x:R,y:L,width:V,height:I,isDragging:!0},o({...a.current}))},S=P=>{var T;window.removeEventListener("pointermove",b),window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",S);const y=(T=a.current)==null?void 0:T.isDragging,v=a.current;if(a.current=null,o(null),!y)r(P);else if(v&&e){const R=t.current.getBoundingClientRect(),L=e.screenToFlowPosition({x:R.left+v.x,y:R.top+v.y}),V=e.screenToFlowPosition({x:R.left+v.x+v.width,y:R.top+v.y+v.height}),I={x:Math.min(L.x,V.x),y:Math.min(L.y,V.y),width:Math.abs(V.x-L.x),height:Math.abs(V.y-L.y)},E=e.getNodes().filter(_=>{var N,j,O,B;const x=_.width??((N=_.measured)==null?void 0:N.width)??200,C=_.height??((j=_.measured)==null?void 0:j.height)??150,A=((O=_.positionAbsolute)==null?void 0:O.x)??_.position.x,k=((B=_.positionAbsolute)==null?void 0:B.y)??_.position.y;return I.x<A+x&&I.x+I.width>A&&I.y<k+C&&I.y+I.height>k});i(_=>_.map(x=>({...x,selected:E.some(C=>C.id===x.id)||P.shiftKey&&x.selected})))}};window.addEventListener("pointermove",b),window.addEventListener("pointerup",S),window.addEventListener("pointercancel",S)},[n,r,e,i,t]);return{selectionRect:s,handleRightPointerDown:l}},zz=({isInteractive:t,reactFlowInstance:e,reactFlowWrapper:n,setEdges:r,setNodes:i,connectionLineType:s,connectionColor:o,takeSnapshot:a,setEditingNode:l,setEditingEdge:u,setInputModalOpen:d,setEditModalOpen:h,setMenu:f})=>{const m=D.useCallback(E=>{a(),r(_=>ab({...E,type:s,style:{stroke:o,strokeWidth:2}},_))},[r,o,a,s]),b=D.useCallback((E,_)=>{E.preventDefault(),E.stopPropagation(),t&&(l(null),u(_),d(!0))},[t,l,u,d]),S=D.useCallback((E,_)=>{t&&(a(),r(x=>x.map(C=>{var A;if(C.id===_.id){const k=(A=C.style)==null?void 0:A.strokeDasharray;return{...C,style:{...C.style,strokeDasharray:k?void 0:"10,10"}}}return C})))},[r,t,a]),P=D.useCallback(()=>f(null),[f]),y=D.useCallback(E=>{if(E.preventDefault(),!t)return;const _=n.current.getBoundingClientRect();f({top:E.clientY<_.bottom-200?E.clientY-_.top:void 0,left:E.clientX<_.right-200?E.clientX-_.left:void 0,right:E.clientX>=_.right-200?_.width-(E.clientX-_.left):void 0,bottom:E.clientY>=_.bottom-200?_.height-(E.clientY-_.top):void 0,clientX:E.clientX,clientY:E.clientY})},[t,n,f]),{selectionRect:v,handleRightPointerDown:T}=Dz(n,e,t,y,i),R=D.useCallback((E,_)=>{_.type==="evidence"?(l(_),h(!0)):_.type==="zone"&&(u(null),l(_),d(!0))},[l,h,u,d]),L=D.useCallback((E,_)=>{a(),_.type!=="zone"&&i(x=>{const C=x.findIndex(N=>N.id===_.id);if(C===x.length-1)return x;const A=[...x],[k]=A.splice(C,1);return A.push(k),A})},[a,i]),V=D.useCallback(()=>{n.current&&n.current.classList.add("is-moving")},[n]),I=D.useCallback(()=>{n.current&&n.current.classList.remove("is-moving")},[n]);return{onConnect:m,onEdgeContextMenu:b,onEdgeClick:S,onPaneClick:P,onPaneContextMenu:y,onNodeDoubleClick:R,onNodeDragStart:L,onMoveStart:V,onMoveEnd:I,selectionRect:v,handleRightPointerDown:T}},Lz=({reactFlowInstance:t,boards:e,currentBoardId:n,bgType:r,setBoards:i,setNodes:s,setEdges:o,setBgType:a,handleSwitchBoard:l,clearHistory:u,takeSnapshot:d,setConfirmModal:h})=>{const f=D.useCallback(()=>{if(t){const P={...t.toObject(),bgType:r},y=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),v=URL.createObjectURL(y),T=document.createElement("a");T.href=v;const R=e.find(V=>V.id===n),L=R?R.name.replace(/[^a-z0-9\u00C0-\u017F\s-_]/gi,""):"caso-detective";T.download=`${L}.json`,T.click(),URL.revokeObjectURL(v)}},[t,e,n,r]),m=D.useCallback(S=>{const P=S.target.files[0];if(!P)return;const y=P.name.replace(/\.json$/i,""),v=new FileReader;v.onload=T=>{try{const R=JSON.parse(T.target.result);if(R&&(R.nodes||R.edges)){const L=R.nodes||[],V=R.edges||[],I=R.bgType||"cork",E=e.find(_=>_.name===y);if(E)h({isOpen:!0,title:"SOBRESCRIBIR CASO?",message:`Ya existe un caso llamado "${y}". Deseas sobrescribir sus datos con este archivo?`,confirmText:"Sobrescribir",cancelText:"Cancelar",isDanger:!0,onConfirm:()=>{localStorage.setItem(`board-${E.id}-nodes`,JSON.stringify(L)),localStorage.setItem(`board-${E.id}-edges`,JSON.stringify(V)),localStorage.setItem(`board-${E.id}-bg`,I),E.id===n?(s(L),o(V),a(I),u()):l(E.id)}});else{const _=xn(),x={id:_,name:y,createdAt:Date.now(),lastModified:Date.now()};localStorage.setItem(`board-${_}-nodes`,JSON.stringify(L)),localStorage.setItem(`board-${_}-edges`,JSON.stringify(V)),localStorage.setItem(`board-${_}-bg`,I),i(C=>[...C,x]),l(_)}}}catch(R){console.error("Error al cargar el caso",R),alert("El archivo no es vlido.")}},v.readAsText(P),S.target.value=""},[e,n,s,o,a,l,i,h,u]),b=D.useCallback(()=>{h({isOpen:!0,title:"LIMPIAR TABLERO?",message:"Ests seguro de que quieres eliminar todo el contenido del tablero? Esta accin no se puede deshacer.",onConfirm:()=>{d(),s([]),o([])},isDanger:!0})},[d,s,o,h]);return{onSave:f,onLoad:m,onClear:b}},Oz=({searchTerm:t,setNodes:e,reactFlowInstance:n})=>(D.useEffect(()=>{if(e(i=>i.map(s=>{var u,d;if(!t)return{...s,style:{...s.style,opacity:1}};const o=((u=s.data.label)==null?void 0:u.toLowerCase())||"",a=((d=s.data.description)==null?void 0:d.toLowerCase())||"",l=o.includes(t.toLowerCase())||a.includes(t.toLowerCase());return{...s,style:{...s.style,opacity:l?1:.1}}})),t&&t.length>1&&n){const s=n.getNodes().find(o=>{var u,d;const a=((u=o.data.label)==null?void 0:u.toLowerCase())||"",l=((d=o.data.description)==null?void 0:d.toLowerCase())||"";return a.includes(t.toLowerCase())||l.includes(t.toLowerCase())});s&&n.setCenter(s.position.x+(s.width||0)/2,s.position.y+(s.height||0)/2,{zoom:1.5,duration:800})}},[t,e,n]),{navigateSearch:D.useCallback(i=>{if(!t||!n)return;const o=n.getNodes().filter(f=>{var S,P;const m=((S=f.data.label)==null?void 0:S.toLowerCase())||"",b=((P=f.data.description)==null?void 0:P.toLowerCase())||"";return m.includes(t.toLowerCase())||b.includes(t.toLowerCase())});if(o.length===0)return;const a=o.findIndex(f=>f.selected);let l=i==="next"?a+1:a-1;l>=o.length&&(l=0),l<0&&(l=o.length-1);const u=o[l];e(f=>f.map(m=>({...m,selected:m.id===u.id})));const d=u.width||150,h=u.height||50;n.setCenter(u.position.x+d/2,u.position.y+h/2,{zoom:1.5,duration:600})},[t,n,e])}),Vz=t=>{const[e,n]=D.useState("#dc2626"),[r,i]=D.useState("straight"),[s,o]=D.useState(!0),[a,l]=D.useState(!0),[u,d]=D.useState(""),[h,f]=D.useState(!0),[m,b]=D.useState(!1),[S,P]=D.useState(t),y=D.useCallback(()=>{const v=["cork","blackboard","paper"];P(T=>v[(v.indexOf(T)+1)%v.length])},[]);return{connectionColor:e,setConnectionColor:n,connectionLineType:r,setConnectionLineType:i,isInteractive:s,setIsInteractive:o,isDarkMode:a,setIsDarkMode:l,searchTerm:u,setSearchTerm:d,isSidebarOpen:h,setIsSidebarOpen:f,isZenMode:m,setIsZenMode:b,bgType:S,setBgType:P,toggleBackground:y}},Mz=({reactFlowInstance:t,setNodes:e,setEdges:n,takeSnapshot:r,animateAndRemoveNode:i,animateAndRemoveEdge:s,setEditModalOpen:o,setEditingNode:a,setEditingEdge:l,setInputModalOpen:u,setConnectionColor:d,setConnectionLineType:h,setPendingStampNodeId:f})=>{const m=D.useCallback((L,V)=>{r(),e(I=>I.map(E=>E.id===L?{...E,data:V}:E))},[e,r]),b=D.useCallback(L=>{r(),i(L),o(!1),a(null)},[i,r,o,a]),S=D.useCallback(()=>{if(!t)return;const L=t.getNodes().filter(V=>V.selected);if(L.length>0){r();const V=new Map,I=L.map(x=>{const C=xn();return V.set(x.id,C),{...x,id:C,position:{x:x.position.x+50,y:x.position.y+50},selected:!0,data:{...x.data}}}),_=t.getEdges().filter(x=>V.has(x.source)&&V.has(x.target)).map(x=>({...x,id:xn(),source:V.get(x.source),target:V.get(x.target),selected:!0}));e(x=>x.map(C=>({...C,selected:!1})).concat(I)),n(x=>x.map(C=>({...C,selected:!1})).concat(_))}},[t,e,n,r]),P=D.useCallback(L=>{d(L),n(V=>V.map(I=>I.selected?{...I,style:{...I.style,stroke:L}}:I))},[n,d]),y=D.useCallback(L=>{h(L),n(V=>V.map(I=>I.selected?{...I,type:L}:I))},[n,h]),v=D.useCallback((L,V,I,E)=>{E&&(r(),n(_=>_.map(x=>x.id===E.id?{...x,label:L,type:I||x.type,style:{...x.style,stroke:V},labelStyle:void 0,labelBgStyle:void 0}:x)),l(null))},[n,r,l]),T=D.useCallback((L,V)=>{L?(r(),s(L.id),l(null),u(!1)):V&&V.type==="zone"&&(b(V.id),u(!1))},[s,b,r,l,u]),R=D.useCallback((L,V,I,E,_,x)=>{E?v(L,V,I,E):_&&_.type==="zone"?(r(),e(C=>C.map(A=>A.id===_.id?{...A,data:{...A.data,label:L},style:{...A.style,borderColor:V,backgroundColor:`${V}10`}}:A)),a(null),u(!1)):x&&(r(),e(C=>C.map(A=>A.id===x?{...A,data:{...A.data,status:{type:"custom",label:L||"SELLO",color:V}}}:A)),f(null),u(!1))},[v,e,r,a,u,f]);return{handleSaveNode:m,handleDeleteNode:b,duplicateSelected:S,handleConnectionColorChange:P,handleConnectionLineTypeChange:y,handleEdgeLabelSave:v,handleEdgeDelete:T,handleInputModalConfirm:R}};var Pw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},jz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},x2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new $z;const f=s<<2|a>>4;if(r.push(f),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $z extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fz=function(t){const e=_2(t);return x2.encodeByteArray(e,!0)},Sd=function(t){return Fz(t).replace(/\./g,"")},E2=function(t){try{return x2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=()=>Uz().__FIREBASE_DEFAULTS__,Hz=()=>{if(typeof process>"u"||typeof Pw>"u")return;const t=Pw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&E2(t[1]);return e&&JSON.parse(e)},fh=()=>{try{return Bz()||Hz()||qz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b2=t=>{var e,n;return(n=(e=fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Wz=t=>{const e=b2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},S2=()=>{var t;return(t=fh())===null||t===void 0?void 0:t.config},T2=t=>{var e;return(e=fh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sd(JSON.stringify(n)),Sd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function Yz(){var t;const e=(t=fh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function I2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Jz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zz(){const t=Kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eL(){return!Yz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C2(){try{return typeof indexedDB=="object"}catch{return!1}}function k2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function tL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nL,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bs.prototype.create)}}class Bs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?rL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ar(i,a,r)}}function rL(t,e){return t.replace(iL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iL=/\{\$([^}]+)}/g;function sL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ql(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Dw(s)&&Dw(o)){if(!Ql(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Dw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function nl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function oL(t,e){const n=new aL(t,e);return n.subscribe.bind(n)}class aL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Sf),i.error===void 0&&(i.error=Sf),i.complete===void 0&&(i.complete=Sf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=1e3,uL=2,dL=4*60*60*1e3,hL=.5;function zw(t,e=cL,n=uL){const r=e*Math.pow(n,t),i=Math.round(hL*r*(Math.random()-.5)*2);return Math.min(dL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class ir{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Kz;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gL(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pL(t){return t===fs?void 0:t}function gL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const yL={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},vL=Se.INFO,wL={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},_L=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ph{constructor(e){this.name=e,this._logLevel=vL,this._logHandler=_L,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const xL=(t,e)=>e.some(n=>t instanceof n);let Lw,Ow;function EL(){return Lw||(Lw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bL(){return Ow||(Ow=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A2=new WeakMap,Xp=new WeakMap,R2=new WeakMap,Tf=new WeakMap,Bm=new WeakMap;function SL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&A2.set(n,t)}).catch(()=>{}),Bm.set(e,t),e}function TL(t){if(Xp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Xp.set(t,e)}let Jp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IL(t){Jp=t(Jp)}function CL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(If(this),e,...n);return R2.set(r,e.sort?e.sort():[e]),Hi(r)}:bL().includes(t)?function(...e){return t.apply(If(this),e),Hi(A2.get(this))}:function(...e){return Hi(t.apply(If(this),e))}}function kL(t){return typeof t=="function"?CL(t):(t instanceof IDBTransaction&&TL(t),xL(t,EL())?new Proxy(t,Jp):t)}function Hi(t){if(t instanceof IDBRequest)return SL(t);if(Tf.has(t))return Tf.get(t);const e=kL(t);return e!==t&&(Tf.set(t,e),Bm.set(e,t)),e}const If=t=>Bm.get(t);function N2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hi(o.result),l.oldVersion,l.newVersion,Hi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const AL=["get","getKey","getAll","getAllKeys","count"],RL=["put","add","delete","clear"],Cf=new Map;function Vw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cf.get(e))return Cf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Cf.set(e,s),s}IL(t=>({...t,get:(e,n,r)=>Vw(e,n)||t.get(e,n,r),has:(e,n)=>!!Vw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zp="@firebase/app",Mw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new ph("@firebase/app"),DL="@firebase/app-compat",zL="@firebase/analytics-compat",LL="@firebase/analytics",OL="@firebase/app-check-compat",VL="@firebase/app-check",ML="@firebase/auth",jL="@firebase/auth-compat",$L="@firebase/database",FL="@firebase/data-connect",UL="@firebase/database-compat",BL="@firebase/functions",HL="@firebase/functions-compat",qL="@firebase/installations",WL="@firebase/installations-compat",KL="@firebase/messaging",GL="@firebase/messaging-compat",QL="@firebase/performance",YL="@firebase/performance-compat",XL="@firebase/remote-config",JL="@firebase/remote-config-compat",ZL="@firebase/storage",eO="@firebase/storage-compat",tO="@firebase/firestore",nO="@firebase/vertexai-preview",rO="@firebase/firestore-compat",iO="firebase",sO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="[DEFAULT]",oO={[Zp]:"fire-core",[DL]:"fire-core-compat",[LL]:"fire-analytics",[zL]:"fire-analytics-compat",[VL]:"fire-app-check",[OL]:"fire-app-check-compat",[ML]:"fire-auth",[jL]:"fire-auth-compat",[$L]:"fire-rtdb",[FL]:"fire-data-connect",[UL]:"fire-rtdb-compat",[BL]:"fire-fn",[HL]:"fire-fn-compat",[qL]:"fire-iid",[WL]:"fire-iid-compat",[KL]:"fire-fcm",[GL]:"fire-fcm-compat",[QL]:"fire-perf",[YL]:"fire-perf-compat",[XL]:"fire-rc",[JL]:"fire-rc-compat",[ZL]:"fire-gcs",[eO]:"fire-gcs-compat",[tO]:"fire-fst",[rO]:"fire-fst-compat",[nO]:"fire-vertex","fire-js":"fire-js",[iO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new Map,aO=new Map,tg=new Map;function jw(t,e){try{t.container.addComponent(e)}catch(n){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){const e=t.name;if(tg.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;tg.set(e,t);for(const n of Td.values())jw(n,t);for(const n of aO.values())jw(n,t);return!0}function Hs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qi=new Bs("app","Firebase",lO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=sO;function P2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:eg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qi.create("bad-app-name",{appName:String(i)});if(n||(n=S2()),!n)throw qi.create("no-options");const s=Td.get(i);if(s){if(Ql(n,s.options)&&Ql(r,s.config))return s;throw qi.create("duplicate-app",{appName:i})}const o=new mL(i);for(const l of tg.values())o.addComponent(l);const a=new cO(n,r,o);return Td.set(i,a),a}function Hm(t=eg){const e=Td.get(t);if(!e&&t===eg&&S2())return P2();if(!e)throw qi.create("no-app",{appName:t});return e}function On(t,e,n){var r;let i=(r=oO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(a.join(" "));return}xr(new ir(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="firebase-heartbeat-database",dO=1,Yl="firebase-heartbeat-store";let kf=null;function D2(){return kf||(kf=N2(uO,dO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yl)}catch(n){console.warn(n)}}}}).catch(t=>{throw qi.create("idb-open",{originalErrorMessage:t.message})})),kf}async function hO(t){try{const n=(await D2()).transaction(Yl),r=await n.objectStore(Yl).get(z2(t));return await n.done,r}catch(e){if(e instanceof ar)ri.warn(e.message);else{const n=qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ri.warn(n.message)}}}async function $w(t,e){try{const r=(await D2()).transaction(Yl,"readwrite");await r.objectStore(Yl).put(e,z2(t)),await r.done}catch(n){if(n instanceof ar)ri.warn(n.message);else{const r=qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ri.warn(r.message)}}}function z2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=1024,pO=30*24*60*60*1e3;class gO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Fw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=pO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ri.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fw(),{heartbeatsToSend:r,unsentEntries:i}=mO(this._heartbeatsCache.heartbeats),s=Sd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ri.warn(n),""}}}function Fw(){return new Date().toISOString().substring(0,10)}function mO(t,e=fO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Uw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Uw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C2()?k2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $w(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $w(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Uw(t){return Sd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){xr(new ir("platform-logger",e=>new NL(e),"PRIVATE")),xr(new ir("heartbeat",e=>new gO(e),"PRIVATE")),On(Zp,Mw,t),On(Zp,Mw,"esm2017"),On("fire-js","")}vO("");function qm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function L2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wO=L2,O2=new Bs("auth","Firebase",L2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new ph("@firebase/auth");function _O(t,...e){Id.logLevel<=Se.WARN&&Id.warn(`Auth (${pa}): ${t}`,...e)}function zu(t,...e){Id.logLevel<=Se.ERROR&&Id.error(`Auth (${pa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw Km(t,...e)}function nr(t,...e){return Km(t,...e)}function Wm(t,e,n){const r=Object.assign(Object.assign({},wO()),{[e]:n});return new Bs("auth","Firebase",r).create(e,{appName:t.name})}function Qr(t){return Wm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&jn(t,"argument-error"),Wm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Km(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return O2.create(t,...e)}function he(t,e,...n){if(!t)throw Km(e,...n)}function Hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zu(e),new Error(e)}function ii(t,e){t||Hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function EO(){return Bw()==="http:"||Bw()==="https:"}function Bw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EO()||I2()||"connection"in navigator)?navigator.onLine:!0}function SO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ii(n>e,"Short delay should be less than long delay!"),this.isMobile=Qz()||Jz()}get(){return bO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=new pc(3e4,6e4);function li(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tr(t,e,n,r,i={}){return M2(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=fc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return Xz()||(u.referrerPolicy="no-referrer"),V2.fetch()(j2(t,t.config.apiHost,n,a),u)})}async function M2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TO),e);try{const i=new kO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw hu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw hu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw hu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Wm(t,d,u);jn(t,d)}}catch(i){if(i instanceof ar)throw i;jn(t,"network-request-failed",{message:String(i)})}}async function gc(t,e,n,r,i={}){const s=await Tr(t,e,n,r,i);return"mfaPendingCredential"in s&&jn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function j2(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Gm(t.config,i):`${t.config.apiScheme}://${i}`}function CO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),IO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nr(t,e,r);return i.customData._tokenResponse=n,i}function Hw(t){return t!==void 0&&t.enterprise!==void 0}class AO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function RO(t,e){return Tr(t,"GET","/v2/recaptchaConfig",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e){return Tr(t,"POST","/v1/accounts:delete",e)}async function $2(t,e){return Tr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PO(t,e=!1){const n=Tt(t),r=await n.getIdToken(e),i=Qm(r);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ml(Af(i.auth_time)),issuedAtTime:ml(Af(i.iat)),expirationTime:ml(Af(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Af(t){return Number(t)*1e3}function Qm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{const i=E2(n);return i?JSON.parse(i):(zu("Failed to decode base64 JWT payload"),null)}catch(i){return zu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qw(t){const e=Qm(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&DO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ml(this.lastLoginAt),this.creationTime=ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Jo(t,$2(n,{idToken:r}));he(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?F2(s.providerUserInfo):[],a=OO(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function LO(t){const e=Tt(t);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function F2(t){return t.map(e=>{var{providerId:n}=e,r=qm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(t,e){const n=await M2(t,{},async()=>{const r=fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=j2(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",V2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MO(t,e){return Tr(t,"POST","/v2/accounts:revokeToken",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=qw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await VO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vo;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=qm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new rg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Jo(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PO(this,e)}reload(){return LO(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await Jo(this,NO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:R,isAnonymous:L,providerData:V,stsTokenManager:I}=n;he(T&&I,e,"internal-error");const E=Vo.fromJSON(this.name,I);he(typeof T=="string",e,"internal-error"),_i(h,e.name),_i(f,e.name),he(typeof R=="boolean",e,"internal-error"),he(typeof L=="boolean",e,"internal-error"),_i(m,e.name),_i(b,e.name),_i(S,e.name),_i(P,e.name),_i(y,e.name),_i(v,e.name);const _=new qr({uid:T,auth:e,email:f,emailVerified:R,displayName:h,isAnonymous:L,photoURL:b,phoneNumber:m,tenantId:S,stsTokenManager:E,createdAt:y,lastLoginAt:v});return V&&Array.isArray(V)&&(_.providerData=V.map(x=>Object.assign({},x))),P&&(_._redirectEventId=P),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vo;i.updateFromServerResponse(n);const s=new qr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Cd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?F2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vo;a.updateFromIdToken(r);const l=new qr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new rg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=new Map;function Wr(t){ii(t instanceof Function,"Expected a class definition");let e=Ww.get(t);return e?(ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ww.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}U2.type="NONE";const Kw=U2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class Mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Lu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Lu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mo(Wr(Kw),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Wr(Kw);const o=Lu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=qr._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Mo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Mo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G2(e))return"Blackberry";if(Q2(e))return"Webos";if(H2(e))return"Safari";if((e.includes("chrome/")||q2(e))&&!e.includes("edge/"))return"Chrome";if(K2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function B2(t=Kt()){return/firefox\//i.test(t)}function H2(t=Kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q2(t=Kt()){return/crios\//i.test(t)}function W2(t=Kt()){return/iemobile/i.test(t)}function K2(t=Kt()){return/android/i.test(t)}function G2(t=Kt()){return/blackberry/i.test(t)}function Q2(t=Kt()){return/webos/i.test(t)}function Ym(t=Kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jO(t=Kt()){var e;return Ym(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $O(){return Zz()&&document.documentMode===10}function Y2(t=Kt()){return Ym(t)||K2(t)||Q2(t)||G2(t)||/windows phone/i.test(t)||W2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e=[]){let n;switch(t){case"Browser":n=Gw(Kt());break;case"Worker":n=`${Gw(Kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(t,e={}){return Tr(t,"GET","/v2/passwordPolicy",li(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=6;class HO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qw(this),this.idTokenSubscription=new Qw(this),this.beforeStateQueue=new FO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $2(this,{idToken:e}),r=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Qr(this));const n=e?Tt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UO(this),n=new HO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await MO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wr(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[Wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_O(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ci(t){return Tt(t)}class Qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=oL(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WO(t){gh=t}function J2(t){return gh.loadJS(t)}function KO(){return gh.recaptchaEnterpriseScript}function GO(){return gh.gapiScript}function QO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const YO="recaptcha-enterprise",XO="NO_RECAPTCHA";class JO{constructor(e){this.type=YO,this.auth=ci(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{RO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new AO(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Hw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(XO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Hw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=KO();l.length!==0&&(l+=a),J2(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Yw(t,e,n,r=!1){const i=new JO(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function kd(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Yw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Yw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t,e){const n=Hs(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ql(s,e??{}))return i;jn(i,"already-initialized")}return n.initialize({options:e})}function eV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tV(t,e,n){const r=ci(t);he(r._canInitEmulator,r,"emulator-config-failed"),he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Z2(e),{host:o,port:a}=nV(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),rV()}function Z2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nV(t){const e=Z2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Xw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Xw(o)}}}function Xw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hr("not implemented")}_getIdTokenResponse(e){return Hr("not implemented")}_linkToIdToken(e,n){return Hr("not implemented")}_getReauthenticationResolver(e){return Hr("not implemented")}}async function iV(t,e){return Tr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(t,e){return gc(t,"POST","/v1/accounts:signInWithPassword",li(t,e))}async function oV(t,e){return Tr(t,"POST","/v1/accounts:sendOobCode",li(t,e))}async function aV(t,e){return oV(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV(t,e){return gc(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}async function cV(t,e){return gc(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends Xm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Xl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kd(e,n,"signInWithPassword",sV);case"emailLink":return lV(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kd(e,r,"signUpPassword",iV);case"emailLink":return cV(e,{idToken:n,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(t,e){return gc(t,"POST","/v1/accounts:signInWithIdp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV="http://localhost";class zs extends Xm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=qm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new zs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return jo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jo(e,n)}buildRequest(){const e={requestUri:uV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hV(t){const e=tl(nl(t)).link,n=e?tl(nl(e)).deep_link_id:null,r=tl(nl(t)).deep_link_id;return(r?tl(nl(r)).link:null)||r||n||e||t}class Jm{constructor(e){var n,r,i,s,o,a;const l=tl(nl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=dV((i=l.mode)!==null&&i!==void 0?i:null);he(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=hV(e);try{return new Jm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(e,n){return Xl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jm.parseLink(n);return he(r,"argument-error"),Xl._fromEmailAndCode(e,r.code,r.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends Zm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends mc{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends mc{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends mc{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fV(t,e){return gc(t,"POST","/v1/accounts:signUp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await qr._fromIdTokenResponse(e,r,i),o=Jw(r);return new Ls({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Jw(r);return new Ls({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Jw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends ar{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ad(e,n,r,i)}}function eS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,s,e,r):s})}async function pV(t,e,n=!1){const r=await Jo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e,n=!1){const{auth:r}=t;if(Xn(r.app))return Promise.reject(Qr(r));const i="reauthenticate";try{const s=await Jo(t,eS(r,i,e,t),n);he(s.idToken,r,"internal-error");const o=Qm(s.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(t.uid===a,r,"user-mismatch"),Ls._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t,e,n=!1){if(Xn(t.app))return Promise.reject(Qr(t));const r="signIn",i=await eS(t,r,e),s=await Ls._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function mV(t,e){return tS(ci(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(t){const e=ci(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yV(t,e,n){const r=ci(t);await kd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",aV)}async function vV(t,e,n){if(Xn(t.app))return Promise.reject(Qr(t));const r=ci(t),o=await kd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&nS(t),l}),a=await Ls._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function wV(t,e,n){return Xn(t.app)?Promise.reject(Qr(t)):mV(Tt(t),ga.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&nS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(t,e){return Tr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Tt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Jo(r,_V(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function EV(t,e,n,r){return Tt(t).onIdTokenChanged(e,n,r)}function bV(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function SV(t,e,n,r){return Tt(t).onAuthStateChanged(e,n,r)}function TV(t){return Tt(t).signOut()}const Rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rd,"1"),this.storage.removeItem(Rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=1e3,CV=10;class iS extends rS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$O()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,CV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iS.type="LOCAL";const kV=iS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends rS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sS.type="SESSION";const oS=sS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new mh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await AV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=e0("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(){return window}function NV(t){yr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function PV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zV(){return aS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebaseLocalStorageDb",LV=1,Nd="firebaseLocalStorage",cS="fbase_key";class yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yh(t,e){return t.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function OV(){const t=indexedDB.deleteDatabase(lS);return new yc(t).toPromise()}function ig(){const t=indexedDB.open(lS,LV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nd,{keyPath:cS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nd)?e(r):(r.close(),await OV(),e(await ig()))})})}async function Zw(t,e,n){const r=yh(t,!0).put({[cS]:e,value:n});return new yc(r).toPromise()}async function VV(t,e){const n=yh(t,!1).get(e),r=await new yc(n).toPromise();return r===void 0?null:r.value}function e_(t,e){const n=yh(t,!0).delete(e);return new yc(n).toPromise()}const MV=800,jV=3;class uS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ig(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mh._getInstance(zV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PV(),!this.activeServiceWorker)return;this.sender=new RV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ig();return await Zw(e,Rd,"1"),await e_(e,Rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>VV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>e_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=yh(i,!1).getAll();return new yc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uS.type="LOCAL";const $V=uS;new pc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t,e){return e?Wr(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Xm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FV(t){return tS(t.auth,new t0(t),t.bypassAuthState)}function UV(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),gV(n,new t0(t),t.bypassAuthState)}async function BV(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),pV(n,new t0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FV;case"linkViaPopup":case"linkViaRedirect":return BV;case"reauthViaPopup":case"reauthViaRedirect":return UV;default:jn(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=new pc(2e3,1e4);async function qV(t,e,n){if(Xn(t.app))return Promise.reject(nr(t,"operation-not-supported-in-this-environment"));const r=ci(t);xO(t,e,Zm);const i=dS(r,n);return new ws(r,"signInViaPopup",e,i).executeNotNull()}class ws extends hS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=e0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HV.get())};e()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="pendingRedirect",Ou=new Map;class KV extends hS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ou.get(this.auth._key());if(!e){try{const r=await GV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ou.set(this.auth._key(),e)}return this.bypassAuthState||Ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GV(t,e){const n=XV(e),r=YV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function QV(t,e){Ou.set(t._key(),e)}function YV(t){return Wr(t._redirectPersistence)}function XV(t){return Lu(WV,t.config.apiKey,t.name)}async function JV(t,e,n=!1){if(Xn(t.app))return Promise.reject(Qr(t));const r=ci(t),i=dS(r,e),o=await new KV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=10*60*1e3;class eM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZV&&this.cachedEventUids.clear(),this.cachedEventUids.has(t_(e))}saveEventToCache(e){this.cachedEventUids.add(t_(e)),this.lastProcessedEventTime=Date.now()}}function t_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t,e={}){return Tr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iM=/^https?/;async function sM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nM(t);for(const n of e)try{if(oM(n))return}catch{}jn(t,"unauthorized-domain")}function oM(t){const e=ng(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iM.test(n))return!1;if(rM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new pc(3e4,6e4);function n_(){const t=yr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lM(t){return new Promise((e,n)=>{var r,i,s;function o(){n_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n_(),n(nr(t,"network-request-failed"))},timeout:aM.get()})}if(!((i=(r=yr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=yr().gapi)===null||s===void 0)&&s.load)o();else{const a=QO("iframefcb");return yr()[a]=()=>{gapi.load?o():n(nr(t,"network-request-failed"))},J2(`${GO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function cM(t){return Vu=Vu||lM(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new pc(5e3,15e3),dM="__/auth/iframe",hM="emulator/auth/iframe",fM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gM(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gm(e,hM):`https://${t.config.authDomain}/${dM}`,r={apiKey:e.apiKey,appName:t.name,v:pa},i=pM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${fc(r).slice(1)}`}async function mM(t){const e=await cM(t),n=yr().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:gM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=nr(t,"network-request-failed"),a=yr().setTimeout(()=>{s(o)},uM.get());function l(){yr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vM=500,wM=600,_M="_blank",xM="http://localhost";class r_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EM(t,e,n,r=vM,i=wM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},yM),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Kt().toLowerCase();n&&(a=q2(u)?_M:n),B2(u)&&(e=e||xM,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,b])=>`${f}${m}=${b},`,"");if(jO(u)&&a!=="_self")return bM(e||"",a),new r_(null);const h=window.open(e||"",a,d);he(h,t,"popup-blocked");try{h.focus()}catch{}return new r_(h)}function bM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="__/auth/handler",TM="emulator/auth/handler",IM=encodeURIComponent("fac");async function i_(t,e,n,r,i,s){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:pa,eventId:i};if(e instanceof Zm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof mc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${IM}=${encodeURIComponent(l)}`:"";return`${CM(t)}?${fc(a).slice(1)}${u}`}function CM({config:t}){return t.emulator?Gm(t,TM):`https://${t.authDomain}/${SM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="webStorageSupport";class kM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oS,this._completeRedirectFn=JV,this._overrideRedirectResult=QV}async _openPopup(e,n,r,i){var s;ii((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await i_(e,n,r,ng(),i);return EM(e,o,e0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await i_(e,n,r,ng(),i);return NV(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ii(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mM(e),r=new eM(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rf,{type:Rf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Rf];o!==void 0&&n(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y2()||H2()||Ym()}}const AM=kM;var s_="@firebase/auth",o_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PM(t){xr(new ir("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X2(t)},u=new qO(r,i,s,l);return eV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xr(new ir("auth-internal",e=>{const n=ci(e.getProvider("auth").getImmediate());return(r=>new RM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(s_,o_,NM(t)),On(s_,o_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=5*60,zM=T2("authIdTokenMaxAge")||DM;let a_=null;const LM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zM)return;const i=n==null?void 0:n.token;a_!==i&&(a_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function OM(t=Hm()){const e=Hs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ZO(t,{popupRedirectResolver:AM,persistence:[$V,kV,oS]}),r=T2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=LM(s.toString());bV(n,o,()=>o(n.currentUser)),EV(n,a=>o(a))}}const i=b2("auth");return i&&tV(n,`http://${i}`),n}function VM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=nr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",VM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PM("Browser");var MM="firebase",jM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(MM,jM,"app");var l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,pS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,E){function _(){}_.prototype=E.prototype,I.D=E.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(x,C,A){for(var k=Array(arguments.length-2),N=2;N<arguments.length;N++)k[N-2]=arguments[N];return E.prototype[C].apply(x,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,E,_){_||(_=0);var x=Array(16);if(typeof E=="string")for(var C=0;16>C;++C)x[C]=E.charCodeAt(_++)|E.charCodeAt(_++)<<8|E.charCodeAt(_++)<<16|E.charCodeAt(_++)<<24;else for(C=0;16>C;++C)x[C]=E[_++]|E[_++]<<8|E[_++]<<16|E[_++]<<24;E=I.g[0],_=I.g[1],C=I.g[2];var A=I.g[3],k=E+(A^_&(C^A))+x[0]+3614090360&4294967295;E=_+(k<<7&4294967295|k>>>25),k=A+(C^E&(_^C))+x[1]+3905402710&4294967295,A=E+(k<<12&4294967295|k>>>20),k=C+(_^A&(E^_))+x[2]+606105819&4294967295,C=A+(k<<17&4294967295|k>>>15),k=_+(E^C&(A^E))+x[3]+3250441966&4294967295,_=C+(k<<22&4294967295|k>>>10),k=E+(A^_&(C^A))+x[4]+4118548399&4294967295,E=_+(k<<7&4294967295|k>>>25),k=A+(C^E&(_^C))+x[5]+1200080426&4294967295,A=E+(k<<12&4294967295|k>>>20),k=C+(_^A&(E^_))+x[6]+2821735955&4294967295,C=A+(k<<17&4294967295|k>>>15),k=_+(E^C&(A^E))+x[7]+4249261313&4294967295,_=C+(k<<22&4294967295|k>>>10),k=E+(A^_&(C^A))+x[8]+1770035416&4294967295,E=_+(k<<7&4294967295|k>>>25),k=A+(C^E&(_^C))+x[9]+2336552879&4294967295,A=E+(k<<12&4294967295|k>>>20),k=C+(_^A&(E^_))+x[10]+4294925233&4294967295,C=A+(k<<17&4294967295|k>>>15),k=_+(E^C&(A^E))+x[11]+2304563134&4294967295,_=C+(k<<22&4294967295|k>>>10),k=E+(A^_&(C^A))+x[12]+1804603682&4294967295,E=_+(k<<7&4294967295|k>>>25),k=A+(C^E&(_^C))+x[13]+4254626195&4294967295,A=E+(k<<12&4294967295|k>>>20),k=C+(_^A&(E^_))+x[14]+2792965006&4294967295,C=A+(k<<17&4294967295|k>>>15),k=_+(E^C&(A^E))+x[15]+1236535329&4294967295,_=C+(k<<22&4294967295|k>>>10),k=E+(C^A&(_^C))+x[1]+4129170786&4294967295,E=_+(k<<5&4294967295|k>>>27),k=A+(_^C&(E^_))+x[6]+3225465664&4294967295,A=E+(k<<9&4294967295|k>>>23),k=C+(E^_&(A^E))+x[11]+643717713&4294967295,C=A+(k<<14&4294967295|k>>>18),k=_+(A^E&(C^A))+x[0]+3921069994&4294967295,_=C+(k<<20&4294967295|k>>>12),k=E+(C^A&(_^C))+x[5]+3593408605&4294967295,E=_+(k<<5&4294967295|k>>>27),k=A+(_^C&(E^_))+x[10]+38016083&4294967295,A=E+(k<<9&4294967295|k>>>23),k=C+(E^_&(A^E))+x[15]+3634488961&4294967295,C=A+(k<<14&4294967295|k>>>18),k=_+(A^E&(C^A))+x[4]+3889429448&4294967295,_=C+(k<<20&4294967295|k>>>12),k=E+(C^A&(_^C))+x[9]+568446438&4294967295,E=_+(k<<5&4294967295|k>>>27),k=A+(_^C&(E^_))+x[14]+3275163606&4294967295,A=E+(k<<9&4294967295|k>>>23),k=C+(E^_&(A^E))+x[3]+4107603335&4294967295,C=A+(k<<14&4294967295|k>>>18),k=_+(A^E&(C^A))+x[8]+1163531501&4294967295,_=C+(k<<20&4294967295|k>>>12),k=E+(C^A&(_^C))+x[13]+2850285829&4294967295,E=_+(k<<5&4294967295|k>>>27),k=A+(_^C&(E^_))+x[2]+4243563512&4294967295,A=E+(k<<9&4294967295|k>>>23),k=C+(E^_&(A^E))+x[7]+1735328473&4294967295,C=A+(k<<14&4294967295|k>>>18),k=_+(A^E&(C^A))+x[12]+2368359562&4294967295,_=C+(k<<20&4294967295|k>>>12),k=E+(_^C^A)+x[5]+4294588738&4294967295,E=_+(k<<4&4294967295|k>>>28),k=A+(E^_^C)+x[8]+2272392833&4294967295,A=E+(k<<11&4294967295|k>>>21),k=C+(A^E^_)+x[11]+1839030562&4294967295,C=A+(k<<16&4294967295|k>>>16),k=_+(C^A^E)+x[14]+4259657740&4294967295,_=C+(k<<23&4294967295|k>>>9),k=E+(_^C^A)+x[1]+2763975236&4294967295,E=_+(k<<4&4294967295|k>>>28),k=A+(E^_^C)+x[4]+1272893353&4294967295,A=E+(k<<11&4294967295|k>>>21),k=C+(A^E^_)+x[7]+4139469664&4294967295,C=A+(k<<16&4294967295|k>>>16),k=_+(C^A^E)+x[10]+3200236656&4294967295,_=C+(k<<23&4294967295|k>>>9),k=E+(_^C^A)+x[13]+681279174&4294967295,E=_+(k<<4&4294967295|k>>>28),k=A+(E^_^C)+x[0]+3936430074&4294967295,A=E+(k<<11&4294967295|k>>>21),k=C+(A^E^_)+x[3]+3572445317&4294967295,C=A+(k<<16&4294967295|k>>>16),k=_+(C^A^E)+x[6]+76029189&4294967295,_=C+(k<<23&4294967295|k>>>9),k=E+(_^C^A)+x[9]+3654602809&4294967295,E=_+(k<<4&4294967295|k>>>28),k=A+(E^_^C)+x[12]+3873151461&4294967295,A=E+(k<<11&4294967295|k>>>21),k=C+(A^E^_)+x[15]+530742520&4294967295,C=A+(k<<16&4294967295|k>>>16),k=_+(C^A^E)+x[2]+3299628645&4294967295,_=C+(k<<23&4294967295|k>>>9),k=E+(C^(_|~A))+x[0]+4096336452&4294967295,E=_+(k<<6&4294967295|k>>>26),k=A+(_^(E|~C))+x[7]+1126891415&4294967295,A=E+(k<<10&4294967295|k>>>22),k=C+(E^(A|~_))+x[14]+2878612391&4294967295,C=A+(k<<15&4294967295|k>>>17),k=_+(A^(C|~E))+x[5]+4237533241&4294967295,_=C+(k<<21&4294967295|k>>>11),k=E+(C^(_|~A))+x[12]+1700485571&4294967295,E=_+(k<<6&4294967295|k>>>26),k=A+(_^(E|~C))+x[3]+2399980690&4294967295,A=E+(k<<10&4294967295|k>>>22),k=C+(E^(A|~_))+x[10]+4293915773&4294967295,C=A+(k<<15&4294967295|k>>>17),k=_+(A^(C|~E))+x[1]+2240044497&4294967295,_=C+(k<<21&4294967295|k>>>11),k=E+(C^(_|~A))+x[8]+1873313359&4294967295,E=_+(k<<6&4294967295|k>>>26),k=A+(_^(E|~C))+x[15]+4264355552&4294967295,A=E+(k<<10&4294967295|k>>>22),k=C+(E^(A|~_))+x[6]+2734768916&4294967295,C=A+(k<<15&4294967295|k>>>17),k=_+(A^(C|~E))+x[13]+1309151649&4294967295,_=C+(k<<21&4294967295|k>>>11),k=E+(C^(_|~A))+x[4]+4149444226&4294967295,E=_+(k<<6&4294967295|k>>>26),k=A+(_^(E|~C))+x[11]+3174756917&4294967295,A=E+(k<<10&4294967295|k>>>22),k=C+(E^(A|~_))+x[2]+718787259&4294967295,C=A+(k<<15&4294967295|k>>>17),k=_+(A^(C|~E))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,E){E===void 0&&(E=I.length);for(var _=E-this.blockSize,x=this.B,C=this.h,A=0;A<E;){if(C==0)for(;A<=_;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<E;)if(x[C++]=I.charCodeAt(A++),C==this.blockSize){i(this,x),C=0;break}}else for(;A<E;)if(x[C++]=I[A++],C==this.blockSize){i(this,x),C=0;break}}this.h=C,this.o+=E},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;var _=8*this.o;for(E=I.length-8;E<I.length;++E)I[E]=_&255,_/=256;for(this.u(I),I=Array(16),E=_=0;4>E;++E)for(var x=0;32>x;x+=8)I[_++]=this.g[E]>>>x&255;return I};function s(I,E){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=E(I)}function o(I,E){this.h=E;for(var _=[],x=!0,C=I.length-1;0<=C;C--){var A=I[C]|0;x&&A==E||(_[C]=A,x=!1)}this.g=_}var a={};function l(I){return-128<=I&&128>I?s(I,function(E){return new o([E|0],0>E?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return P(u(-I));for(var E=[],_=1,x=0;I>=_;x++)E[x]=I/_|0,_*=4294967296;return new o(E,0)}function d(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return P(d(I.substring(1),E));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(E,8)),x=h,C=0;C<I.length;C+=8){var A=Math.min(8,I.length-C),k=parseInt(I.substring(C,C+A),E);8>A?(A=u(Math.pow(E,A)),x=x.j(A).add(u(k))):(x=x.j(_),x=x.add(u(k)))}return x}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-P(this).m();for(var I=0,E=1,_=0;_<this.g.length;_++){var x=this.i(_);I+=(0<=x?x:4294967296+x)*E,E*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(S(this))return"-"+P(this).toString(I);for(var E=u(Math.pow(I,6)),_=this,x="";;){var C=R(_,E).g;_=y(_,C.j(E));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=C,b(_))return A+x;for(;6>A.length;)A="0"+A;x=A+x}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function S(I){return I.h==-1}t.l=function(I){return I=y(this,I),S(I)?-1:b(I)?0:1};function P(I){for(var E=I.g.length,_=[],x=0;x<E;x++)_[x]=~I.g[x];return new o(_,~I.h).add(f)}t.abs=function(){return S(this)?P(this):this},t.add=function(I){for(var E=Math.max(this.g.length,I.g.length),_=[],x=0,C=0;C<=E;C++){var A=x+(this.i(C)&65535)+(I.i(C)&65535),k=(A>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);x=k>>>16,A&=65535,k&=65535,_[C]=k<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function y(I,E){return I.add(P(E))}t.j=function(I){if(b(this)||b(I))return h;if(S(this))return S(I)?P(this).j(P(I)):P(P(this).j(I));if(S(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var E=this.g.length+I.g.length,_=[],x=0;x<2*E;x++)_[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<I.g.length;C++){var A=this.i(x)>>>16,k=this.i(x)&65535,N=I.i(C)>>>16,j=I.i(C)&65535;_[2*x+2*C]+=k*j,v(_,2*x+2*C),_[2*x+2*C+1]+=A*j,v(_,2*x+2*C+1),_[2*x+2*C+1]+=k*N,v(_,2*x+2*C+1),_[2*x+2*C+2]+=A*N,v(_,2*x+2*C+2)}for(x=0;x<E;x++)_[x]=_[2*x+1]<<16|_[2*x];for(x=E;x<2*E;x++)_[x]=0;return new o(_,0)};function v(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function T(I,E){this.g=I,this.h=E}function R(I,E){if(b(E))throw Error("division by zero");if(b(I))return new T(h,h);if(S(I))return E=R(P(I),E),new T(P(E.g),P(E.h));if(S(E))return E=R(I,P(E)),new T(P(E.g),E.h);if(30<I.g.length){if(S(I)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var _=f,x=E;0>=x.l(I);)_=L(_),x=L(x);var C=V(_,1),A=V(x,1);for(x=V(x,2),_=V(_,2);!b(x);){var k=A.add(x);0>=k.l(I)&&(C=C.add(_),A=k),x=V(x,1),_=V(_,1)}return E=y(I,C.j(E)),new T(C,E)}for(C=h;0<=I.l(E);){for(_=Math.max(1,Math.floor(I.m()/E.m())),x=Math.ceil(Math.log(_)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),A=u(_),k=A.j(E);S(k)||0<k.l(I);)_-=x,A=u(_),k=A.j(E);b(A)&&(A=f),C=C.add(A),I=y(I,k)}return new T(C,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var E=Math.max(this.g.length,I.g.length),_=[],x=0;x<E;x++)_[x]=this.i(x)&I.i(x);return new o(_,this.h&I.h)},t.or=function(I){for(var E=Math.max(this.g.length,I.g.length),_=[],x=0;x<E;x++)_[x]=this.i(x)|I.i(x);return new o(_,this.h|I.h)},t.xor=function(I){for(var E=Math.max(this.g.length,I.g.length),_=[],x=0;x<E;x++)_[x]=this.i(x)^I.i(x);return new o(_,this.h^I.h)};function L(I){for(var E=I.g.length+1,_=[],x=0;x<E;x++)_[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(_,I.h)}function V(I,E){var _=E>>5;E%=32;for(var x=I.g.length-_,C=[],A=0;A<x;A++)C[A]=0<E?I.i(A+_)>>>E|I.i(A+_+1)<<32-E:I.i(A+_);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Is=o}).apply(typeof l_<"u"?l_:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gS,rl,mS,Mu,sg,yS,vS,wS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(c,g){if(g)e:{var w=r;c=c.split(".");for(var z=0;z<c.length-1;z++){var H=c[z];if(!(H in w))break e;w=w[H]}c=c[c.length-1],z=w[c],g=g(z),g!=z&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function s(c,g){c instanceof String&&(c+="");var w=0,z=!1,H={next:function(){if(!z&&w<c.length){var K=w++;return{value:g(K,c[K]),done:!1}}return z=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(c){return c||function(){return s(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function u(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function d(c,g,w){return c.call.apply(c.bind,arguments)}function h(c,g,w){if(!c)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,z),c.apply(g,H)}}return function(){return c.apply(g,arguments)}}function f(c,g,w){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var z=w.slice();return z.push.apply(z,arguments),c.apply(this,z)}}function b(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(z,H,K){for(var ee=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ee[Me-2]=arguments[Me];return g.prototype[H].apply(z,ee)}}function S(c){const g=c.length;if(0<g){const w=Array(g);for(let z=0;z<g;z++)w[z]=c[z];return w}return[]}function P(c,g){for(let w=1;w<arguments.length;w++){const z=arguments[w];if(l(z)){const H=c.length||0,K=z.length||0;c.length=H+K;for(let ee=0;ee<K;ee++)c[H+ee]=z[ee]}else c.push(z)}}class y{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(c){return/^[\s\xa0]*$/.test(c)}function T(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(c,g,w){for(const z in c)g.call(w,c[z],z,c)}function I(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function E(c){const g={};for(const w in c)g[w]=c[w];return g}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let w,z;for(let H=1;H<arguments.length;H++){z=arguments[H];for(w in z)c[w]=z[w];for(let K=0;K<_.length;K++)w=_[K],Object.prototype.hasOwnProperty.call(z,w)&&(c[w]=z[w])}}function C(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function A(c){a.setTimeout(()=>{throw c},0)}function k(){var c=M;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class N{constructor(){this.h=this.g=null}add(g,w){const z=j.get();z.set(g,w),this.h?this.h.next=z:this.g=z,this.h=z}}var j=new y(()=>new O,c=>c.reset());class O{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let B,$=!1,M=new N,U=()=>{const c=a.Promise.resolve(void 0);B=()=>{c.then(W)}};var W=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(w){A(w)}var g=j;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}$=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,g),a.removeEventListener("test",w,g)}catch{}return c}();function Z(c,g){if(Q.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,z=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(L){e:{try{R(g.nodeName);var H=!0;break e}catch{}H=!1}H||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:te[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Z.aa.h.call(this)}}b(Z,Q);var te={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),ae=0;function ve(c,g,w,z,H){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!z,this.ha=H,this.key=++ae,this.da=this.fa=!1}function pe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ie(c){this.src=c,this.g={},this.h=0}Ie.prototype.add=function(c,g,w,z,H){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ee=$e(c,g,z,H);return-1<ee?(g=c[ee],w||(g.fa=!1)):(g=new ve(g,this.src,K,!!z,H),g.fa=w,c.push(g)),g};function Ce(c,g){var w=g.type;if(w in c.g){var z=c.g[w],H=Array.prototype.indexOf.call(z,g,void 0),K;(K=0<=H)&&Array.prototype.splice.call(z,H,1),K&&(pe(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function $e(c,g,w,z){for(var H=0;H<c.length;++H){var K=c[H];if(!K.da&&K.listener==g&&K.capture==!!w&&K.ha==z)return H}return-1}var De="closure_lm_"+(1e6*Math.random()|0),ke={};function rt(c,g,w,z,H){if(Array.isArray(g)){for(var K=0;K<g.length;K++)rt(c,g[K],w,z,H);return null}return w=lt(w),c&&c[ue]?c.K(g,w,u(z)?!!z.capture:!1,H):Ee(c,g,w,!1,z,H)}function Ee(c,g,w,z,H,K){if(!g)throw Error("Invalid event type");var ee=u(H)?!!H.capture:!!H,Me=Vt(c);if(Me||(c[De]=Me=new Ie(c)),w=Me.add(g,w,z,ee,K),w.proxy)return w;if(z=ne(),w.proxy=z,z.src=c,z.listener=w,c.addEventListener)G||(H=ee),H===void 0&&(H=!1),c.addEventListener(g.toString(),z,H);else if(c.attachEvent)c.attachEvent(fn(g.toString()),z);else if(c.addListener&&c.removeListener)c.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ne(){function c(w){return g.call(c.src,c.listener,w)}const g=it;return c}function be(c,g,w,z,H){if(Array.isArray(g))for(var K=0;K<g.length;K++)be(c,g[K],w,z,H);else z=u(z)?!!z.capture:!!z,w=lt(w),c&&c[ue]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],w=$e(K,w,z,H),-1<w&&(pe(K[w]),Array.prototype.splice.call(K,w,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=Vt(c))&&(g=c.g[g.toString()],c=-1,g&&(c=$e(g,w,z,H)),(w=-1<c?g[c]:null)&&vt(w))}function vt(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ue])Ce(g.i,c);else{var w=c.type,z=c.proxy;g.removeEventListener?g.removeEventListener(w,z,c.capture):g.detachEvent?g.detachEvent(fn(w),z):g.addListener&&g.removeListener&&g.removeListener(z),(w=Vt(g))?(Ce(w,c),w.h==0&&(w.src=null,g[De]=null)):pe(c)}}}function fn(c){return c in ke?ke[c]:ke[c]="on"+c}function it(c,g){if(c.da)c=!0;else{g=new Z(g,this);var w=c.listener,z=c.ha||c.src;c.fa&&vt(c),c=w.call(z,g)}return c}function Vt(c){return c=c[De],c instanceof Ie?c:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(c){return typeof c=="function"?c:(c[Ct]||(c[Ct]=function(g){return c.handleEvent(g)}),c[Ct])}function Re(){F.call(this),this.i=new Ie(this),this.M=this,this.F=null}b(Re,F),Re.prototype[ue]=!0,Re.prototype.removeEventListener=function(c,g,w,z){be(this,c,g,w,z)};function Le(c,g){var w,z=c.F;if(z)for(w=[];z;z=z.F)w.push(z);if(c=c.M,z=g.type||g,typeof g=="string")g=new Q(g,c);else if(g instanceof Q)g.target=g.target||c;else{var H=g;g=new Q(z,c),x(g,H)}if(H=!0,w)for(var K=w.length-1;0<=K;K--){var ee=g.g=w[K];H=wt(ee,z,!0,g)&&H}if(ee=g.g=c,H=wt(ee,z,!0,g)&&H,H=wt(ee,z,!1,g)&&H,w)for(K=0;K<w.length;K++)ee=g.g=w[K],H=wt(ee,z,!1,g)&&H}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],z=0;z<w.length;z++)pe(w[z]);delete c.g[g],c.h--}}this.F=null},Re.prototype.K=function(c,g,w,z){return this.i.add(String(c),g,!1,w,z)},Re.prototype.L=function(c,g,w,z){return this.i.add(String(c),g,!0,w,z)};function wt(c,g,w,z){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var H=!0,K=0;K<g.length;++K){var ee=g[K];if(ee&&!ee.da&&ee.capture==w){var Me=ee.listener,kt=ee.ha||ee.src;ee.fa&&Ce(c.i,ee),H=Me.call(kt,z)!==!1&&H}}return H&&!z.defaultPrevented}function Gt(c,g,w){if(typeof c=="function")w&&(c=f(c,w));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(c,g||0)}function Qt(c){c.g=Gt(()=>{c.g=null,c.i&&(c.i=!1,Qt(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Ze extends F{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ft(c){F.call(this),this.h=c,this.g={}}b(ft,F);var Ke=[];function pn(c){V(c.g,function(g,w){this.g.hasOwnProperty(w)&&vt(g)},c),c.g={}}ft.prototype.N=function(){ft.aa.N.call(this),pn(this)},ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=a.JSON.stringify,gn=a.JSON.parse,tn=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function $n(){}$n.prototype.h=null;function ui(c){return c.h||(c.h=c.i())}function lr(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function di(){Q.call(this,"d")}b(di,Q);function mn(){Q.call(this,"c")}b(mn,Q);var Un={},Ks=null;function Ir(){return Ks=Ks||new Re}Un.La="serverreachability";function Gs(c){Q.call(this,Un.La,c)}b(Gs,Q);function Cr(c){const g=Ir();Le(g,new Gs(g))}Un.STAT_EVENT="statevent";function Qs(c,g){Q.call(this,Un.STAT_EVENT,c),this.stat=g}b(Qs,Q);function pt(c){const g=Ir();Le(g,new Qs(g,c))}Un.Ma="timingevent";function Bn(c,g){Q.call(this,Un.Ma,c),this.size=g}b(Bn,Q);function kr(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},g)}function Ar(){this.g=!0}Ar.prototype.xa=function(){this.g=!1};function xa(c,g,w,z,H,K){c.info(function(){if(c.g)if(K)for(var ee="",Me=K.split("&"),kt=0;kt<Me.length;kt++){var Ne=Me[kt].split("=");if(1<Ne.length){var Mt=Ne[0];Ne=Ne[1];var jt=Mt.split("_");ee=2<=jt.length&&jt[1]=="type"?ee+(Mt+"="+Ne+"&"):ee+(Mt+"=redacted&")}}else ee=null;else ee=K;return"XMLHTTP REQ ("+z+") [attempt "+H+"]: "+g+`
`+w+`
`+ee})}function Ea(c,g,w,z,H,K,ee){c.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+H+"]: "+g+`
`+w+`
`+K+" "+ee})}function cr(c,g,w,z){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Sa(c,w)+(z?" "+z:"")})}function ba(c,g){c.info(function(){return"TIMEOUT: "+g})}Ar.prototype.info=function(){};function Sa(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var z=w[c];if(!(2>z.length)){var H=z[1];if(Array.isArray(H)&&!(1>H.length)){var K=H[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ee=1;ee<H.length;ee++)H[ee]=""}}}}return en(w)}catch{return g}}var hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},is={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ss;function Rr(){}b(Rr,$n),Rr.prototype.g=function(){return new XMLHttpRequest},Rr.prototype.i=function(){return{}},ss=new Rr;function An(c,g,w,z){this.j=c,this.i=g,this.l=w,this.R=z||1,this.U=new ft(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ys}function Ys(){this.i=null,this.g="",this.h=!1}var fi={},pi={};function os(c,g,w){c.L=1,c.v=kc(zr(g)),c.m=w,c.P=!0,Xs(c,null)}function Xs(c,g){c.F=Date.now(),Pr(c),c.A=zr(c.v);var w=c.A,z=c.R;Array.isArray(z)||(z=[String(z)]),J0(w.i,"t",z),c.C=0,w=c.j.J,c.h=new Ys,c.g=my(c.j,w?g:null,!c.m),0<c.O&&(c.M=new Ze(f(c.Y,c,c.g),c.O)),g=c.U,w=c.g,z=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(Ke[0]=H.toString()),H=Ke);for(var K=0;K<H.length;K++){var ee=rt(w,H[K],z||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Cr(),xa(c.i,c.u,c.A,c.l,c.R,c.m)}An.prototype.ca=function(c){c=c.target;const g=this.M;g&&Lr(c)==3?g.j():this.Y(c)},An.prototype.Y=function(c){try{if(c==this.g)e:{const jt=Lr(this.g);var g=this.g.Ba();const to=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||sy(this.g)))){this.J||jt!=4||g==7||(g==8||0>=to?Cr(3):Cr(2)),gi(this);var w=this.g.Z();this.X=w;t:if(Nr(this)){var z=sy(this.g);c="";var H=z.length,K=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ce(this),ye(this);var ee="";break t}this.h.i=new a.TextDecoder}for(g=0;g<H;g++)this.h.h=!0,c+=this.h.i.decode(z[g],{stream:!(K&&g==H-1)});z.length=0,this.h.g+=c,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=w==200,Ea(this.i,this.u,this.A,this.l,this.R,jt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,kt=this.g;if((Me=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Me)){var Ne=Me;break t}}Ne=null}if(w=Ne)cr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fe(this,w);else{this.o=!1,this.s=3,pt(12),ce(this),ye(this);break e}}if(this.P){w=!0;let Hn;for(;!this.J&&this.C<ee.length;)if(Hn=Ta(this,ee),Hn==pi){jt==4&&(this.s=4,pt(14),w=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==fi){this.s=4,pt(15),cr(this.i,this.l,ee,"[Invalid Chunk]"),w=!1;break}else cr(this.i,this.l,Hn,null),Fe(this,Hn);if(Nr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||ee.length!=0||this.h.h||(this.s=1,pt(16),w=!1),this.o=this.o&&w,!w)cr(this.i,this.l,ee,"[Invalid Chunked Response]"),ce(this),ye(this);else if(0<ee.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),zh(Mt),Mt.M=!0,pt(11))}}else cr(this.i,this.l,ee,null),Fe(this,ee);jt==4&&ce(this),this.o&&!this.J&&(jt==4?hy(this.j,this):(this.o=!1,Pr(this)))}else EI(this.g),w==400&&0<ee.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),ce(this),ye(this)}}}catch{}finally{}};function Nr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ta(c,g){var w=c.C,z=g.indexOf(`
`,w);return z==-1?pi:(w=Number(g.substring(w,z)),isNaN(w)?fi:(z+=1,z+w>g.length?pi:(g=g.slice(z,z+w),c.C=z+w,g)))}An.prototype.cancel=function(){this.J=!0,ce(this)};function Pr(c){c.S=Date.now()+c.I,as(c,c.I)}function as(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=kr(f(c.ba,c),g)}function gi(c){c.B&&(a.clearTimeout(c.B),c.B=null)}An.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ba(this.i,this.A),this.L!=2&&(Cr(),pt(17)),ce(this),this.s=2,ye(this)):as(this,this.S-c)};function ye(c){c.j.G==0||c.J||hy(c.j,c)}function ce(c){gi(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,pn(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Fe(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||Js(w.h,c))){if(!c.K&&Js(w.h,c)&&w.G==3){try{var z=w.Da.g.parse(g)}catch{z=null}if(Array.isArray(z)&&z.length==3){var H=z;if(H[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)zc(w),Pc(w);else break e;Dh(w),pt(18)}}else w.za=H[1],0<w.za-w.T&&37500>H[2]&&w.F&&w.v==0&&!w.C&&(w.C=kr(f(w.Za,w),6e3));if(1>=Dr(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else cs(w,11)}else if((c.K||w.g==c)&&zc(w),!v(g))for(H=w.Da.g.parse(g),g=0;g<H.length;g++){let Ne=H[g];if(w.T=Ne[0],Ne=Ne[1],w.G==2)if(Ne[0]=="c"){w.K=Ne[1],w.ia=Ne[2];const Mt=Ne[3];Mt!=null&&(w.la=Mt,w.j.info("VER="+w.la));const jt=Ne[4];jt!=null&&(w.Aa=jt,w.j.info("SVER="+w.Aa));const to=Ne[5];to!=null&&typeof to=="number"&&0<to&&(z=1.5*to,w.L=z,w.j.info("backChannelRequestTimeoutMs_="+z)),z=w;const Hn=c.g;if(Hn){const Oc=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oc){var K=z.h;K.g||Oc.indexOf("spdy")==-1&&Oc.indexOf("quic")==-1&&Oc.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ia(K,K.h),K.h=null))}if(z.D){const Lh=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lh&&(z.ya=Lh,Be(z.I,z.D,Lh))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),z=w;var ee=c;if(z.qa=gy(z,z.J?z.ia:null,z.W),ee.K){H0(z.h,ee);var Me=ee,kt=z.L;kt&&(Me.I=kt),Me.B&&(gi(Me),Pr(Me)),z.g=ee}else uy(z);0<w.i.length&&Dc(w)}else Ne[0]!="stop"&&Ne[0]!="close"||cs(w,7);else w.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?cs(w,7):Ph(w):Ne[0]!="noop"&&w.l&&w.l.ta(Ne),w.v=0)}}Cr(4)}catch{}}var ze=class{constructor(c,g){this.g=c,this.map=g}};function st(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ur(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Dr(c){return c.h?1:c.g?c.g.size:0}function Js(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Ia(c,g){c.g?c.g.add(g):c.h=g}function H0(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}st.prototype.cancel=function(){if(this.i=q0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function q0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return S(c.i)}function aI(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var g=[],w=c.length,z=0;z<w;z++)g.push(c[z]);return g}g=[],w=0;for(z in c)g[w++]=c[z];return g}function lI(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const z in c)g[w++]=z;return g}}}function W0(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=lI(c),z=aI(c),H=z.length,K=0;K<H;K++)g.call(void 0,z[K],w&&w[K],c)}var K0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cI(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var z=c[w].indexOf("="),H=null;if(0<=z){var K=c[w].substring(0,z);H=c[w].substring(z+1)}else K=c[w];g(K,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function ls(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ls){this.h=c.h,Ic(this,c.j),this.o=c.o,this.g=c.g,Cc(this,c.s),this.l=c.l;var g=c.i,w=new Aa;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),G0(this,w),this.m=c.m}else c&&(g=String(c).match(K0))?(this.h=!1,Ic(this,g[1]||"",!0),this.o=Ca(g[2]||""),this.g=Ca(g[3]||"",!0),Cc(this,g[4]),this.l=Ca(g[5]||"",!0),G0(this,g[6]||"",!0),this.m=Ca(g[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}ls.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ka(g,Q0,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ka(g,Q0,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(ka(w,w.charAt(0)=="/"?hI:dI,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",ka(w,pI)),c.join("")};function zr(c){return new ls(c)}function Ic(c,g,w){c.j=w?Ca(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Cc(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function G0(c,g,w){g instanceof Aa?(c.i=g,gI(c.i,c.h)):(w||(g=ka(g,fI)),c.i=new Aa(g,c.h))}function Be(c,g,w){c.i.set(g,w)}function kc(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ca(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ka(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,uI),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uI(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Q0=/[#\/\?@]/g,dI=/[#\?:]/g,hI=/[#\?]/g,fI=/[#\?@]/g,pI=/#/g;function Aa(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function mi(c){c.g||(c.g=new Map,c.h=0,c.i&&cI(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=Aa.prototype,t.add=function(c,g){mi(this),this.i=null,c=Zs(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function Y0(c,g){mi(c),g=Zs(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function X0(c,g){return mi(c),g=Zs(c,g),c.g.has(g)}t.forEach=function(c,g){mi(this),this.g.forEach(function(w,z){w.forEach(function(H){c.call(g,H,z,this)},this)},this)},t.na=function(){mi(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let z=0;z<g.length;z++){const H=c[z];for(let K=0;K<H.length;K++)w.push(g[z])}return w},t.V=function(c){mi(this);let g=[];if(typeof c=="string")X0(this,c)&&(g=g.concat(this.g.get(Zs(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},t.set=function(c,g){return mi(this),this.i=null,c=Zs(this,c),X0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function J0(c,g,w){Y0(c,g),0<w.length&&(c.i=null,c.g.set(Zs(c,g),S(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var z=g[w];const K=encodeURIComponent(String(z)),ee=this.V(z);for(z=0;z<ee.length;z++){var H=K;ee[z]!==""&&(H+="="+encodeURIComponent(String(ee[z]))),c.push(H)}}return this.i=c.join("&")};function Zs(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function gI(c,g){g&&!c.j&&(mi(c),c.i=null,c.g.forEach(function(w,z){var H=z.toLowerCase();z!=H&&(Y0(this,z),J0(this,H,w))},c)),c.j=g}function mI(c,g){const w=new Ar;if(a.Image){const z=new Image;z.onload=m(yi,w,"TestLoadImage: loaded",!0,g,z),z.onerror=m(yi,w,"TestLoadImage: error",!1,g,z),z.onabort=m(yi,w,"TestLoadImage: abort",!1,g,z),z.ontimeout=m(yi,w,"TestLoadImage: timeout",!1,g,z),a.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=c}else g(!1)}function yI(c,g){const w=new Ar,z=new AbortController,H=setTimeout(()=>{z.abort(),yi(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:z.signal}).then(K=>{clearTimeout(H),K.ok?yi(w,"TestPingServer: ok",!0,g):yi(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),yi(w,"TestPingServer: error",!1,g)})}function yi(c,g,w,z,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),z(w)}catch{}}function vI(){this.g=new tn}function wI(c,g,w){const z=w||"";try{W0(c,function(H,K){let ee=H;u(H)&&(ee=en(H)),g.push(z+K+"="+encodeURIComponent(ee))})}catch(H){throw g.push(z+"type="+encodeURIComponent("_badmap")),H}}function Ac(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ac,$n),Ac.prototype.g=function(){return new Rc(this.l,this.j)},Ac.prototype.i=function(c){return function(){return c}}({});function Rc(c,g){Re.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Rc,Re),t=Rc.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Na(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Z0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Z0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ra(this):Na(this),this.readyState==3&&Z0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ra(this))},t.Qa=function(c){this.g&&(this.response=c,Ra(this))},t.ga=function(){this.g&&Ra(this)};function Ra(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Na(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function Na(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ey(c){let g="";return V(c,function(w,z){g+=z,g+=":",g+=w,g+=`\r
`}),g}function Nh(c,g,w){e:{for(z in w){var z=!1;break e}z=!0}z||(w=ey(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):Be(c,g,w))}function et(c){Re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(et,Re);var _I=/^https?$/i,xI=["POST","PUT"];t=et.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,w,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ss.g(),this.v=this.o?ui(this.o):ui(ss),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){ty(this,K);return}if(c=w||"",w=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var H in z)w.set(H,z[H]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const K of z.keys())w.set(K,z.get(K));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xI,g,void 0))||z||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ee]of w)this.g.setRequestHeader(K,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{iy(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){ty(this,K)}};function ty(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ny(c),Nc(c)}function ny(c){c.A||(c.A=!0,Le(c,"complete"),Le(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Le(this,"complete"),Le(this,"abort"),Nc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nc(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ry(this):this.bb())},t.bb=function(){ry(this)};function ry(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Lr(c)!=4||c.Z()!=2)){if(c.u&&Lr(c)==4)Gt(c.Ea,0,c);else if(Le(c,"readystatechange"),Lr(c)==4){c.h=!1;try{const ee=c.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var z;if(z=ee===0){var H=String(c.D).match(K0)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),z=!_I.test(H?H.toLowerCase():"")}w=z}if(w)Le(c,"complete"),Le(c,"success");else{c.m=6;try{var K=2<Lr(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",ny(c)}}finally{Nc(c)}}}}function Nc(c,g){if(c.g){iy(c);const w=c.g,z=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Le(c,"ready");try{w.onreadystatechange=z}catch{}}}function iy(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Lr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),gn(g)}};function sy(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function EI(c){const g={};c=(c.g&&2<=Lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<c.length;z++){if(v(c[z]))continue;var w=C(c[z]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=g[H]||[];g[H]=K,K.push(w)}I(g,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function oy(c){this.Aa=0,this.i=[],this.j=new Ar,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pa("baseRetryDelayMs",5e3,c),this.cb=Pa("retryDelaySeedMs",1e4,c),this.Wa=Pa("forwardChannelMaxRetries",2,c),this.wa=Pa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new st(c&&c.concurrentRequestLimit),this.Da=new vI,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=oy.prototype,t.la=8,t.G=1,t.connect=function(c,g,w,z){pt(0),this.W=c,this.H=g||{},w&&z!==void 0&&(this.H.OSID=w,this.H.OAID=z),this.F=this.X,this.I=gy(this,null,this.W),Dc(this)};function Ph(c){if(ay(c),c.G==3){var g=c.U++,w=zr(c.I);if(Be(w,"SID",c.K),Be(w,"RID",g),Be(w,"TYPE","terminate"),Da(c,w),g=new An(c,c.j,g),g.L=2,g.v=kc(zr(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=g.v,w=!0),w||(g.g=my(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Pr(g)}py(c)}function Pc(c){c.g&&(zh(c),c.g.cancel(),c.g=null)}function ay(c){Pc(c),c.u&&(a.clearTimeout(c.u),c.u=null),zc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Dc(c){if(!ur(c.h)&&!c.s){c.s=!0;var g=c.Ga;B||U(),$||(B(),$=!0),M.add(g,c),c.B=0}}function bI(c,g){return Dr(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=kr(f(c.Ga,c,g),fy(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new An(this,this.j,c);let K=this.o;if(this.S&&(K?(K=E(K),x(K,this.S)):K=this.S),this.m!==null||this.O||(H.H=K,K=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var z=this.i[w];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(g+=z,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=cy(this,H,g),w=zr(this.I),Be(w,"RID",c),Be(w,"CVER",22),this.D&&Be(w,"X-HTTP-Session-Id",this.D),Da(this,w),K&&(this.O?g="headers="+encodeURIComponent(String(ey(K)))+"&"+g:this.m&&Nh(w,this.m,K)),Ia(this.h,H),this.Ua&&Be(w,"TYPE","init"),this.P?(Be(w,"$req",g),Be(w,"SID","null"),H.T=!0,os(H,w,null)):os(H,w,g),this.G=2}}else this.G==3&&(c?ly(this,c):this.i.length==0||ur(this.h)||ly(this))};function ly(c,g){var w;g?w=g.l:w=c.U++;const z=zr(c.I);Be(z,"SID",c.K),Be(z,"RID",w),Be(z,"AID",c.T),Da(c,z),c.m&&c.o&&Nh(z,c.m,c.o),w=new An(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=cy(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ia(c.h,w),os(w,z,g)}function Da(c,g){c.H&&V(c.H,function(w,z){Be(g,z,w)}),c.l&&W0({},function(w,z){Be(g,z,w)})}function cy(c,g,w){w=Math.min(c.i.length,w);var z=c.l?f(c.l.Na,c.l,c):null;e:{var H=c.i;let K=-1;for(;;){const ee=["count="+w];K==-1?0<w?(K=H[0].g,ee.push("ofs="+K)):K=0:ee.push("ofs="+K);let Me=!0;for(let kt=0;kt<w;kt++){let Ne=H[kt].g;const Mt=H[kt].map;if(Ne-=K,0>Ne)K=Math.max(0,H[kt].g-100),Me=!1;else try{wI(Mt,ee,"req"+Ne+"_")}catch{z&&z(Mt)}}if(Me){z=ee.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,z}function uy(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;B||U(),$||(B(),$=!0),M.add(g,c),c.v=0}}function Dh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=kr(f(c.Fa,c),fy(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,dy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=kr(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Pc(this),dy(this))};function zh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function dy(c){c.g=new An(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=zr(c.qa);Be(g,"RID","rpc"),Be(g,"SID",c.K),Be(g,"AID",c.T),Be(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(g,"TO",c.ja),Be(g,"TYPE","xmlhttp"),Da(c,g),c.m&&c.o&&Nh(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=kc(zr(g)),w.m=null,w.P=!0,Xs(w,c)}t.Za=function(){this.C!=null&&(this.C=null,Pc(this),Dh(this),pt(19))};function zc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function hy(c,g){var w=null;if(c.g==g){zc(c),zh(c),c.g=null;var z=2}else if(Js(c.h,g))w=g.D,H0(c.h,g),z=1;else return;if(c.G!=0){if(g.o)if(z==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var H=c.B;z=Ir(),Le(z,new Bn(z,w)),Dc(c)}else uy(c);else if(H=g.s,H==3||H==0&&0<g.X||!(z==1&&bI(c,g)||z==2&&Dh(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),H){case 1:cs(c,5);break;case 4:cs(c,10);break;case 3:cs(c,6);break;default:cs(c,2)}}}function fy(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function cs(c,g){if(c.j.info("Error code "+g),g==2){var w=f(c.fb,c),z=c.Xa;const H=!z;z=new ls(z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ic(z,"https"),kc(z),H?mI(z.toString(),w):yI(z.toString(),w)}else pt(2);c.G=0,c.l&&c.l.sa(g),py(c),ay(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function py(c){if(c.G=0,c.ka=[],c.l){const g=q0(c.h);(g.length!=0||c.i.length!=0)&&(P(c.ka,g),P(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function gy(c,g,w){var z=w instanceof ls?zr(w):new ls(w);if(z.g!="")g&&(z.g=g+"."+z.g),Cc(z,z.s);else{var H=a.location;z=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;var K=new ls(null);z&&Ic(K,z),g&&(K.g=g),H&&Cc(K,H),w&&(K.l=w),z=K}return w=c.D,g=c.ya,w&&g&&Be(z,w,g),Be(z,"VER",c.la),Da(c,z),z}function my(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new et(new Ac({eb:w})):new et(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yy(){}t=yy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(c,g){return new yn(c,g)};function yn(c,g){Re.call(this),this.g=new oy(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!v(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new eo(this)}b(yn,Re),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Ph(this.g)},yn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=en(c),c=w);g.i.push(new ze(g.Ya++,c)),g.G==3&&Dc(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,Ph(this.g),delete this.g,yn.aa.N.call(this)};function vy(c){di.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}b(vy,di);function wy(){mn.call(this),this.status=1}b(wy,mn);function eo(c){this.g=c}b(eo,yy),eo.prototype.ua=function(){Le(this.g,"a")},eo.prototype.ta=function(c){Le(this.g,new vy(c))},eo.prototype.sa=function(c){Le(this.g,new wy)},eo.prototype.ra=function(){Le(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,wS=function(){return new Lc},vS=function(){return Ir()},yS=Un,sg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hi.NO_ERROR=0,hi.TIMEOUT=8,hi.HTTP_ERROR=6,Mu=hi,is.COMPLETE="complete",mS=is,lr.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Re.prototype.listen=Re.prototype.K,rl=lr,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,gS=et}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const c_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new ph("@firebase/firestore");function Ka(){return Os.logLevel}function le(t,...e){if(Os.logLevel<=Se.DEBUG){const n=e.map(n0);Os.debug(`Firestore (${ma}): ${t}`,...n)}}function si(t,...e){if(Os.logLevel<=Se.ERROR){const n=e.map(n0);Os.error(`Firestore (${ma}): ${t}`,...n)}}function Zo(t,...e){if(Os.logLevel<=Se.WARN){const n=e.map(n0);Os.warn(`Firestore (${ma}): ${t}`,...n)}}function n0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: `+t;throw si(e),new Error(e)}function Ve(t,e){t||fe()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $M{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class FM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UM{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string"),new _S(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string"),new Bt(e)}}class BM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new BM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ve(this.o===void 0);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string"),this.R=n.token,new qM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=KM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function ea(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new yt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new yt(0,0))}static max(){return new ge(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends Jl{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const GM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Jl{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return GM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(qe.fromString(e))}static fromName(e){return new de(qe.fromString(e).popFirst(5))}static empty(){return new de(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new qe(e.slice()))}}function QM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new yt(n+1,0):new yt(n,r));return new Yi(i,de.empty(),e)}function YM(t){return new Yi(t.readTime,t.key,-1)}class Yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yi(ge.min(),de.empty(),-1)}static max(){return new Yi(ge.max(),de.empty(),-1)}}function XM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==JM)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(i=>i?X.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new X((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new X((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function ej(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}r0.oe=-1;function vh(t){return t==null}function Pd(t){return t===0&&1/t==-1/0}function tj(t){return typeof t=="number"&&Number.isInteger(t)&&!Pd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ya(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ES(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Nt.RED,this.left=i??Nt.EMPTY,this.right=s??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d_(this.data.getIterator())}getIteratorFrom(e){return new d_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class d_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new zt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bS("Invalid base64 string: "+s):s}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const nj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(t){if(Ve(!!t),typeof t=="string"){let e=0;const n=nj.exec(t);if(Ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vs(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function s0(t){const e=t.mapValue.fields.__previous_value__;return i0(e)?s0(e):e}function Zl(t){const e=Xi(t.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ec{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu={mapValue:{}};function Ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?i0(t)?4:sj(t)?9007199254740991:ij(t)?10:11:fe()}function Er(t,e){if(t===e)return!0;const n=Ms(t);if(n!==Ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xi(i.timestampValue),a=Xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Vs(i.bytesValue).isEqual(Vs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ot(i.doubleValue),a=ot(s.doubleValue);return o===a?Pd(o)===Pd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ea(t.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(u_(o)!==u_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Er(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function tc(t,e){return(t.values||[]).find(n=>Er(n,e))!==void 0}function ta(t,e){if(t===e)return 0;const n=Ms(t),r=Ms(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ot(s.integerValue||s.doubleValue),l=ot(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return h_(t.timestampValue,e.timestampValue);case 4:return h_(Zl(t),Zl(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Vs(s),l=Vs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Pe(a[u],l[u]);if(d!==0)return d}return Pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Pe(ot(s.latitude),ot(o.latitude));return a!==0?a:Pe(ot(s.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return f_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const h=s.fields||{},f=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,b=(l=f.value)===null||l===void 0?void 0:l.arrayValue,S=Pe(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:f_(m,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===gu.mapValue&&o===gu.mapValue)return 0;if(s===gu.mapValue)return 1;if(o===gu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Pe(l[h],d[h]);if(f!==0)return f;const m=ta(a[l[h]],u[d[h]]);if(m!==0)return m}return Pe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw fe()}}function h_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Xi(t),r=Xi(e),i=Pe(n.seconds,r.seconds);return i!==0?i:Pe(n.nanos,r.nanos)}function f_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ta(n[i],r[i]);if(s)return s}return Pe(n.length,r.length)}function na(t){return og(t)}function og(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=og(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${og(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function p_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ag(t){return!!t&&"integerValue"in t}function o0(t){return!!t&&"arrayValue"in t}function g_(t){return!!t&&"nullValue"in t}function m_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ju(t){return!!t&&"mapValue"in t}function ij(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ya(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ju(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(n)}setAll(e){let n=Pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ju(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ju(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ya(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pn(yl(this.value))}}function SS(t){const e=[];return ya(t.fields,(n,r)=>{const i=new Pt([n]);if(ju(r)){const s=SS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qt(e,0,ge.min(),ge.min(),ge.min(),Pn.empty(),0)}static newFoundDocument(e,n,r,i){return new qt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new qt(e,2,n,ge.min(),ge.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new qt(e,3,n,ge.min(),ge.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.position=e,this.inclusive=n}}function y_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=ta(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function v_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n="asc"){this.field=e,this.dir=n}}function oj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{}class dt extends TS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lj(e,n,r):n==="array-contains"?new dj(e,r):n==="in"?new hj(e,r):n==="not-in"?new fj(e,r):n==="array-contains-any"?new pj(e,r):new dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cj(e,r):new uj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ta(n,this.value)):n!==null&&Ms(this.value)===Ms(n)&&this.matchesComparison(ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends TS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sr(e,n)}matches(e){return IS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function IS(t){return t.op==="and"}function CS(t){return aj(t)&&IS(t)}function aj(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function lg(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+na(t.value);if(CS(t))return t.filters.map(e=>lg(e)).join(",");{const e=t.filters.map(n=>lg(n)).join(",");return`${t.op}(${e})`}}function kS(t,e){return t instanceof dt?function(r,i){return i instanceof dt&&r.op===i.op&&r.field.isEqual(i.field)&&Er(r.value,i.value)}(t,e):t instanceof sr?function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&kS(o,i.filters[a]),!0):!1}(t,e):void fe()}function AS(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${na(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(AS).join(" ,")+"}"}(t):"Filter"}class lj extends dt{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class cj extends dt{constructor(e,n){super(e,"in",n),this.keys=RS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uj extends dt{constructor(e,n){super(e,"not-in",n),this.keys=RS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function RS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class dj extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return o0(n)&&tc(n.arrayValue,this.value)}}class hj extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tc(this.value.arrayValue,n)}}class fj extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!tc(this.value.arrayValue,n)}}class pj extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!o0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function w_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new gj(t,e,n,r,i,s,o)}function a0(t){const e=me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>na(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>na(r)).join(",")),e.ue=n}return e.ue}function l0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v_(t.startAt,e.startAt)&&v_(t.endAt,e.endAt)}function cg(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mj(t,e,n,r,i,s,o,a){return new _c(t,e,n,r,i,s,o,a)}function c0(t){return new _c(t)}function __(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NS(t){return t.collectionGroup!==null}function vl(t){const e=me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zt(Pt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zd(s,r))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new zd(Pt.keyField(),r))}return e.ce}function vr(t){const e=me(t);return e.le||(e.le=yj(e,vl(t))),e.le}function yj(t,e){if(t.limitType==="F")return w_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zd(i.field,s)});const n=t.endAt?new Dd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dd(t.startAt.position,t.startAt.inclusive):null;return w_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ug(t,e){const n=t.filters.concat([e]);return new _c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dg(t,e,n){return new _c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wh(t,e){return l0(vr(t),vr(e))&&t.limitType===e.limitType}function PS(t){return`${a0(vr(t))}|lt:${t.limitType}`}function uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AS(i)).join(", ")}]`),vh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>na(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>na(i)).join(",")),`Target(${r})`}(vr(t))}; limitType=${t.limitType})`}function _h(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of vl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=y_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,vl(r),i)||r.endAt&&!function(o,a,l){const u=y_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,vl(r),i))}(t,e)}function vj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DS(t){return(e,n)=>{let r=!1;for(const i of vl(t)){const s=wj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wj(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ta(l,u):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ES(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Je(de.comparator);function oi(){return _j}const zS=new Je(de.comparator);function il(...t){let e=zS;for(const n of t)e=e.insert(n.key,n);return e}function LS(t){let e=zS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _s(){return wl()}function OS(){return wl()}function wl(){return new va(t=>t.toString(),(t,e)=>t.isEqual(e))}const xj=new Je(de.comparator),Ej=new zt(de.comparator);function xe(...t){let e=Ej;for(const n of t)e=e.add(n);return e}const bj=new zt(Pe);function Sj(){return bj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(e)?"-0":e}}function VS(t){return{integerValue:""+t}}function Tj(t,e){return tj(e)?VS(e):u0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this._=void 0}}function Ij(t,e,n){return t instanceof nc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&i0(s)&&(s=s0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof rc?jS(t,e):t instanceof ic?$S(t,e):function(i,s){const o=MS(i,s),a=x_(o)+x_(i.Pe);return ag(o)&&ag(i.Pe)?VS(a):u0(i.serializer,a)}(t,e)}function Cj(t,e,n){return t instanceof rc?jS(t,e):t instanceof ic?$S(t,e):n}function MS(t,e){return t instanceof Ld?function(r){return ag(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nc extends xh{}class rc extends xh{constructor(e){super(),this.elements=e}}function jS(t,e){const n=FS(e);for(const r of t.elements)n.some(i=>Er(i,r))||n.push(r);return{arrayValue:{values:n}}}class ic extends xh{constructor(e){super(),this.elements=e}}function $S(t,e){let n=FS(e);for(const r of t.elements)n=n.filter(i=>!Er(i,r));return{arrayValue:{values:n}}}class Ld extends xh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function x_(t){return ot(t.integerValue||t.doubleValue)}function FS(t){return o0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.field=e,this.transform=n}}function Aj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof rc&&i instanceof rc||r instanceof ic&&i instanceof ic?ea(r.elements,i.elements,Er):r instanceof Ld&&i instanceof Ld?Er(r.Pe,i.Pe):r instanceof nc&&i instanceof nc}(t.transform,e.transform)}class Rj{constructor(e,n){this.version=e,this.transformResults=n}}class wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eh{}function US(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new d0(t.key,wr.none()):new xc(t.key,t.data,wr.none());{const n=t.data,r=Pn.empty();let i=new zt(Pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qs(t.key,r,new Jn(i.toArray()),wr.none())}}function Nj(t,e,n){t instanceof xc?function(i,s,o){const a=i.value.clone(),l=b_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qs?function(i,s,o){if(!$u(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=b_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(BS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _l(t,e,n,r){return t instanceof xc?function(s,o,a,l){if(!$u(s.precondition,o))return a;const u=s.value.clone(),d=S_(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof qs?function(s,o,a,l){if(!$u(s.precondition,o))return a;const u=S_(s.fieldTransforms,l,o),d=o.data;return d.setAll(BS(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return $u(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Pj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=MS(r.transform,i||null);s!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,s))}return n||null}function E_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ea(r,i,(s,o)=>Aj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xc extends Eh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qs extends Eh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function BS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function b_(t,e,n){const r=new Map;Ve(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Cj(o,a,n[i]))}return r}function S_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Ij(s,o,e))}return r}class d0 extends Eh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dj extends Eh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Nj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_l(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_l(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=US(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,(n,r)=>E_(n,r))&&ea(this.baseMutations,e.baseMutations,(n,r)=>E_(n,r))}}class h0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ve(e.mutations.length===r.length);let i=function(){return xj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new h0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Te;function Vj(t){switch(t){default:return fe();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function HS(t){if(t===void 0)return si("GRPC error has no .code"),Y.UNKNOWN;switch(t){case ct.OK:return Y.OK;case ct.CANCELLED:return Y.CANCELLED;case ct.UNKNOWN:return Y.UNKNOWN;case ct.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case ct.INTERNAL:return Y.INTERNAL;case ct.UNAVAILABLE:return Y.UNAVAILABLE;case ct.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case ct.NOT_FOUND:return Y.NOT_FOUND;case ct.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case ct.ABORTED:return Y.ABORTED;case ct.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case ct.DATA_LOSS:return Y.DATA_LOSS;default:return fe()}}(Te=ct||(ct={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=new Is([4294967295,4294967295],0);function T_(t){const e=Mj().encode(t),n=new pS;return n.update(e),new Uint8Array(n.digest())}function I_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Is([n,r],0),new Is([i,s],0)]}class f0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sl(`Invalid padding: ${n}`);if(r<0)throw new sl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Is.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Is.fromNumber(r)));return i.compare(jj)===1&&(i=new Is([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=T_(e),[r,i]=I_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new f0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=T_(e),[r,i]=I_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bh(ge.min(),i,new Je(Pe),oi(),xe())}}class Ec{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ec(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class qS{constructor(e,n){this.targetId=e,this.me=n}}class WS{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class C_{constructor(){this.fe=0,this.ge=A_(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),n=xe(),r=xe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new Ec(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=A_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $j{constructor(e){this.Le=e,this.Be=new Map,this.ke=oi(),this.qe=k_(),this.Qe=new Je(Pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(cg(s))if(r===0){const o=new de(s.path);this.Ue(n,o,qt.newNoDocument(o,ge.min()))}else Ve(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Vs(r).toUint8Array()}catch(l){if(l instanceof bS)return Zo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new f0(o,i,s)}catch(l){return Zo(l instanceof sl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&cg(a.target)){const l=new de(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,qt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=xe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new bh(e,n,this.Qe,this.ke,r);return this.ke=oi(),this.qe=k_(),this.Qe=new Je(Pe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new C_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new zt(Pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new C_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function k_(){return new Je(de.comparator)}function A_(){return new Je(de.comparator)}const Fj={asc:"ASCENDING",desc:"DESCENDING"},Uj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bj={and:"AND",or:"OR"};class Hj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hg(t,e){return t.useProto3Json||vh(e)?e:{value:e}}function Od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qj(t,e){return Od(t,e.toTimestamp())}function _r(t){return Ve(!!t),ge.fromTimestamp(function(n){const r=Xi(n);return new yt(r.seconds,r.nanos)}(t))}function p0(t,e){return fg(t,e).canonicalString()}function fg(t,e){const n=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GS(t){const e=qe.fromString(t);return Ve(ZS(e)),e}function pg(t,e){return p0(t.databaseId,e.path)}function Nf(t,e){const n=GS(e);if(n.get(1)!==t.databaseId.projectId)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(YS(n))}function QS(t,e){return p0(t.databaseId,e)}function Wj(t){const e=GS(t);return e.length===4?qe.emptyPath():YS(e)}function gg(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YS(t){return Ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function R_(t,e,n){return{name:pg(t,e),fields:n.value.mapValue.fields}}function Kj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Ve(d===void 0||typeof d=="string"),Ot.fromBase64String(d||"")):(Ve(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?Y.UNKNOWN:HS(u.code);return new se(d,u.message||"")}(o);n=new WS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nf(t,r.document.name),s=_r(r.document.updateTime),o=r.document.createTime?_r(r.document.createTime):ge.min(),a=new Pn({mapValue:{fields:r.document.fields}}),l=qt.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Fu(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Nf(t,r.document),s=r.readTime?_r(r.readTime):ge.min(),o=qt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Fu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Nf(t,r.document),s=r.removedTargetIds||[];n=new Fu([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Oj(i,s),a=r.targetId;n=new qS(a,o)}}return n}function Gj(t,e){let n;if(e instanceof xc)n={update:R_(t,e.key,e.value)};else if(e instanceof d0)n={delete:pg(t,e.key)};else if(e instanceof qs)n={update:R_(t,e.key,e.data),updateMask:r9(e.fieldMask)};else{if(!(e instanceof Dj))return fe();n={verify:pg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof nc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ic)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ld)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:qj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function Qj(t,e){return t&&t.length>0?(Ve(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?_r(i.updateTime):_r(s);return o.isEqual(ge.min())&&(o=_r(s)),new Rj(o,i.transformResults||[])}(n,e))):[]}function Yj(t,e){return{documents:[QS(t,e.path)]}}function Xj(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QS(t,i);const s=function(u){if(u.length!==0)return JS(sr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:ho(f.field),direction:e9(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=hg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Jj(t){let e=Wj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ve(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=XS(h);return f instanceof sr&&CS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(b){return new zd(fo(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,vh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Dd(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new Dd(m,f)}(n.endAt)),mj(e,i,o,s,a,"F",l,u)}function Zj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fo(n.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fo(n.unaryFilter.field);return dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fo(n.unaryFilter.field);return dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fo(n.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return dt.create(fo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>XS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function e9(t){return Fj[t]}function t9(t){return Uj[t]}function n9(t){return Bj[t]}function ho(t){return{fieldPath:t.canonicalString()}}function fo(t){return Pt.fromServerFormat(t.fieldPath)}function JS(t){return t instanceof dt?function(n){if(n.op==="=="){if(m_(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(g_(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m_(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(g_(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:t9(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(i=>JS(i));return r.length===1?r[0]:{compositeFilter:{op:n9(n.op),filters:r}}}(t):fe()}function r9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,r,i,s=ge.min(),o=ge.min(),a=Ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.ct=e}}function s9(t){const e=Jj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(){this.un=new a9}addToCollectionParentIndex(e,n){return this.un.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Yi.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class a9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new zt(qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ra(0)}static kn(){return new ra(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(){this.changes=new va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_l(r.mutation,i,Jn.empty(),yt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const i=_s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=il();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=oi();const o=wl(),a=function(){return wl()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof qs)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),_l(d.mutation,u,d.mutation.getFieldMask(),yt.now())):o.set(u.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new c9(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=wl();let i=new Je((o,a)=>o-a),s=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Jn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||xe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=OS();d.forEach(f=>{if(!s.has(f)){const m=US(n.get(f),r.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return X.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):X.resolve(_s());let a=-1,l=s;return o.next(u=>X.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?X.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,xe())).next(d=>({batchId:a,changes:LS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=il();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=il();return this.indexManager.getCollectionParents(e,s).next(a=>X.forEach(a,l=>{const u=function(h,f){return new _c(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,qt.newInvalidDocument(d)))});let a=il();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&_l(d.mutation,u,Jn.empty(),yt.now()),_h(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return X.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_r(i.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:s9(i.bundledQuery),readTime:_r(i.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.overlays=new Je(de.comparator),this.Ir=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_s();return X.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const i=_s(),s=n.length+1,o=new de(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return X.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Je((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=_s(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=_s(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return X.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Lj(n,r));let s=this.Ir.get(n);s===void 0&&(s=xe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.Tr=new zt(xt.Er),this.dr=new zt(xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new xt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new de(new qe([])),r=new xt(n,e),i=new xt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new qe([])),r=new xt(n,e),i=new xt(n,e+1);let s=xe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||Pe(e.wr,n.wr)}static Ar(e,n){return Pe(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new zt(xt.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return X.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),i=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),X.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zt(Pe);return n.forEach(i=>{const s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),X.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const o=new xt(new de(s),0);let a=new zt(Pe);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),X.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return X.forEach(n.mutations,i=>{const s=new xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new xt(n,0),i=this.br.firstAfterOrEqual(r);return X.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e){this.Mr=e,this.docs=function(){return new Je(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=oi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qt.newInvalidDocument(i))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=oi();const o=n.path,a=new de(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||XM(YM(d),r)<=0||(i.has(d.key)||_h(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return X.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new m9(this)}getSize(e){return X.resolve(this.size)}}class m9 extends l9{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e){this.persistence=e,this.Nr=new va(n=>a0(n),l0),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new g0,this.targetCount=0,this.kr=ra.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),X.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ra(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Kn(n),X.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),X.waitFor(s).next(()=>i)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),X.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,n){this.qr={},this.overlays={},this.Qr=new r0(0),this.Kr=!1,this.Kr=!0,this.$r=new f9,this.referenceDelegate=e(this),this.Ur=new y9(this),this.indexManager=new o9,this.remoteDocumentCache=function(i){return new g9(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new i9(n),this.Gr=new d9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new p9(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const i=new w9(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return X.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class w9 extends ZM{constructor(e){super(),this.currentSequenceNumber=e}}class m0{constructor(e){this.persistence=e,this.Jr=new g0,this.Yr=null}static Zr(e){return new m0(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),X.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,r=>{const i=de.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return X.or([()=>X.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=xe(),i=xe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new y0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return eL()?8:ej(Kt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new _9;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ka()<=Se.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Ka()<=Se.DEBUG&&le("QueryEngine","Query:",uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ka()<=Se.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(n))):X.resolve())}Yi(e,n){if(__(n))return X.resolve(null);let r=vr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dg(n,null,"F"),r=vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=xe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,dg(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return __(n)||i.isEqual(ge.min())?X.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?X.resolve(null):(Ka()<=Se.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uo(n)),this.rs(e,o,n,QM(i,-1)).next(a=>a))})}ts(e,n){let r=new zt(DS(e));return n.forEach((i,s)=>{_h(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ka()<=Se.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",uo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Je(Pe),this._s=new va(s=>a0(s),l0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u9(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function b9(t,e,n,r){return new E9(t,e,n,r)}async function eT(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=xe();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function S9(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,f=h.keys();let m=X.resolve();return f.forEach(b=>{m=m.next(()=>d.getEntry(l,b)).next(S=>{const P=u.docVersions.get(b);Ve(P!==null),S.version.compareTo(P)<0&&(h.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),d.addEntry(S)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=xe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tT(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function T9(t,e){const n=me(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ot.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(S,P,y){return S.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,m,d)&&a.push(n.Ur.updateTargetData(s,m))});let l=oi(),u=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(I9(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(ge.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return X.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function I9(t,e,n){let r=xe(),i=xe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=oi();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function C9(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function k9(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,X.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Di(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function mg(t,e,n){const r=me(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!wc(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function N_(t,e,n){const r=me(t);let i=ge.min(),s=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=me(l),f=h._s.get(d);return f!==void 0?X.resolve(h.os.get(f)):h.Ur.getTargetData(u,d)}(r,o,vr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:xe())).next(a=>(A9(r,vj(e),a),{documents:a,Ts:s})))}function A9(t,e,n){let r=t.us.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class P_{constructor(){this.activeTargetIds=Sj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R9{constructor(){this.so=new P_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new P_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function Pf(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class z9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Pf(),l=this.xo(n,r.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(d=>(le("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Zo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=P9[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Pf();return new Promise((o,a)=>{const l=new gS;l.setWithCredentials(!0),l.listenOnce(mS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Mu.NO_ERROR:const d=l.getResponseJson();le(Ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Mu.TIMEOUT:le(Ut,`RPC '${e}' ${s} timed out`),a(new se(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Mu.HTTP_ERROR:const h=l.getStatus();if(le(Ut,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const b=function(P){const y=P.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(y)>=0?y:Y.UNKNOWN}(m.status);a(new se(b,m.message))}else a(new se(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new se(Y.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{le(Ut,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);le(Ut,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Pf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wS(),a=vS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");le(Ut,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,m=!1;const b=new D9({Io:P=>{m?le(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(f||(le(Ut,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),le(Ut,`RPC '${e}' stream ${i} sending:`,P),h.send(P))},To:()=>h.close()}),S=(P,y,v)=>{P.listen(y,T=>{try{v(T)}catch(R){setTimeout(()=>{throw R},0)}})};return S(h,rl.EventType.OPEN,()=>{m||(le(Ut,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),S(h,rl.EventType.CLOSE,()=>{m||(m=!0,le(Ut,`RPC '${e}' stream ${i} transport closed`),b.So())}),S(h,rl.EventType.ERROR,P=>{m||(m=!0,Zo(Ut,`RPC '${e}' stream ${i} transport errored:`,P),b.So(new se(Y.UNAVAILABLE,"The operation could not be completed")))}),S(h,rl.EventType.MESSAGE,P=>{var y;if(!m){const v=P.data[0];Ve(!!v);const T=v,R=T.error||((y=T[0])===null||y===void 0?void 0:y.error);if(R){le(Ut,`RPC '${e}' stream ${i} received error:`,R);const L=R.status;let V=function(_){const x=ct[_];if(x!==void 0)return HS(x)}(L),I=R.message;V===void 0&&(V=Y.INTERNAL,I="Unknown error status: "+L+" with message "+R.message),m=!0,b.So(new se(V,I)),h.close()}else le(Ut,`RPC '${e}' stream ${i} received:`,v),b.bo(v)}}),S(a,yS.STAT_EVENT,P=>{P.stat===sg.PROXY?le(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===sg.NOPROXY&&le(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){return new Hj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(si(n.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new se(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L9 extends rT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Kj(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?_r(o.readTime):ge.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=gg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=cg(l)?{documents:Yj(s,l)}:{query:Xj(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KS(s,o.resumeToken);const u=hg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Od(s,o.snapshotVersion.toTimestamp());const u=hg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Zj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=gg(this.serializer),n.removeTarget=e,this.a_(n)}}class O9 extends rT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Qj(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=gg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Gj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,fg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(Y.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,fg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(Y.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class M9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(si(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=me(l);u.L_.add(4),await bc(u),u.q_.set("Unknown"),u.L_.delete(4),await Th(u)}(this))})}),this.q_=new M9(r,i)}}async function Th(t){if(Ws(t))for(const e of t.B_)await e(!0)}async function bc(t){for(const e of t.B_)await e(!1)}function iT(t,e){const n=me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),x0(n)?_0(n):wa(n).r_()&&w0(n,e))}function v0(t,e){const n=me(t),r=wa(n);n.N_.delete(e),r.r_()&&sT(n,e),n.N_.size===0&&(r.r_()?r.o_():Ws(n)&&n.q_.set("Unknown"))}function w0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wa(t).A_(e)}function sT(t,e){t.Q_.xe(e),wa(t).R_(e)}function _0(t){t.Q_=new $j({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wa(t).start(),t.q_.v_()}function x0(t){return Ws(t)&&!wa(t).n_()&&t.N_.size>0}function Ws(t){return me(t).L_.size===0}function oT(t){t.Q_=void 0}async function $9(t){t.q_.set("Online")}async function F9(t){t.N_.forEach((e,n)=>{w0(t,e)})}async function U9(t,e){oT(t),x0(t)?(t.q_.M_(e),_0(t)):t.q_.set("Unknown")}async function B9(t,e,n){if(t.q_.set("Online"),e instanceof WS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vd(t,r)}else if(e instanceof Fu?t.Q_.Ke(e):e instanceof qS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const r=await tT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Ot.EMPTY_BYTE_STRING,d.snapshotVersion)),sT(s,l);const h=new Di(d.target,l,u,d.sequenceNumber);w0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){le("RemoteStore","Failed to raise snapshot:",r),await Vd(t,r)}}async function Vd(t,e,n){if(!wc(e))throw e;t.L_.add(1),await bc(t),t.q_.set("Offline"),n||(n=()=>tT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Th(t)})}function aT(t,e){return e().catch(n=>Vd(t,n,e))}async function Ih(t){const e=me(t),n=Ji(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;H9(e);)try{const i=await C9(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,q9(e,i)}catch(i){await Vd(e,i)}lT(e)&&cT(e)}function H9(t){return Ws(t)&&t.O_.length<10}function q9(t,e){t.O_.push(e);const n=Ji(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lT(t){return Ws(t)&&!Ji(t).n_()&&t.O_.length>0}function cT(t){Ji(t).start()}async function W9(t){Ji(t).p_()}async function K9(t){const e=Ji(t);for(const n of t.O_)e.m_(n.mutations)}async function G9(t,e,n){const r=t.O_.shift(),i=h0.from(r,e,n);await aT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ih(t)}async function Q9(t,e){e&&Ji(t).V_&&await async function(r,i){if(function(o){return Vj(o)&&o!==Y.ABORTED}(i.code)){const s=r.O_.shift();Ji(r).s_(),await aT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ih(r)}}(t,e),lT(t)&&cT(t)}async function z_(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const r=Ws(n);n.L_.add(3),await bc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Th(n)}async function Y9(t,e){const n=me(t);e?(n.L_.delete(2),await Th(n)):e||(n.L_.add(2),await bc(n),n.q_.set("Unknown"))}function wa(t){return t.K_||(t.K_=function(n,r,i){const s=me(n);return s.w_(),new L9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:$9.bind(null,t),Ro:F9.bind(null,t),mo:U9.bind(null,t),d_:B9.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),x0(t)?_0(t):t.q_.set("Unknown")):(await t.K_.stop(),oT(t))})),t.K_}function Ji(t){return t.U_||(t.U_=function(n,r,i){const s=me(n);return s.w_(),new O9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:W9.bind(null,t),mo:Q9.bind(null,t),f_:K9.bind(null,t),g_:G9.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ih(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new E0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b0(t,e){if(si("AsyncQueue",`${e}: ${t}`),wc(t))return new se(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=il(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new $o(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $o;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.W_=new Je(de.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ia{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ia(e,n,$o.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class J9{constructor(){this.queries=O_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=me(n),s=i.queries;i.queries=O_(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new se(Y.ABORTED,"Firestore shutting down"))}}function O_(){return new va(t=>PS(t),wh)}async function uT(t,e){const n=me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new X9,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=b0(o,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&S0(n)}async function dT(t,e){const n=me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Z9(t,e){const n=me(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&S0(n)}function e6(t,e,n){const r=me(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function S0(t){t.Y_.forEach(e=>{e.next()})}var yg,V_;(V_=yg||(yg={})).ea="default",V_.Cache="cache";class hT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.key=e}}class pT{constructor(e){this.key=e}}class t6{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=DS(e),this.Ra=new $o(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new L_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),m=_h(this.query,h)?h:null,b=!!f&&this.mutatedKeys.has(f.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;f&&m?f.data.isEqual(m.data)?b!==S&&(r.track({type:3,doc:m}),P=!0):this.ga(f,m)||(r.track({type:2,doc:m}),P=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),P=!0):f&&!m&&(r.track({type:1,doc:f}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(m,b){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return S(m)-S(b)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new ia(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new L_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new pT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new fT(r))}),n}ba(e){this.Ta=e.Ts,this.da=xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class n6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class r6{constructor(e){this.key=e,this.va=!1}}class i6{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new va(a=>PS(a),wh),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(de.comparator),this.Na=new Map,this.La=new g0,this.Ba={},this.ka=new Map,this.qa=ra.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function s6(t,e,n=!0){const r=_T(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await gT(r,e,n,!0),i}async function o6(t,e){const n=_T(t);await gT(n,e,!0,!1)}async function gT(t,e,n,r){const i=await k9(t.localStore,vr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await a6(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&iT(t.remoteStore,i),a}async function a6(t,e,n,r,i){t.Ka=(h,f,m)=>async function(S,P,y,v){let T=P.view.ma(y);T.ns&&(T=await N_(S.localStore,P.query,!1).then(({documents:I})=>P.view.ma(I,T)));const R=v&&v.targetChanges.get(P.targetId),L=v&&v.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(T,S.isPrimaryClient,R,L);return j_(S,P.targetId,V.wa),V.snapshot}(t,h,f,m);const s=await N_(t.localStore,e,!0),o=new t6(e,s.Ts),a=o.ma(s.documents),l=Ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);j_(t,n,u.wa);const d=new n6(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function l6(t,e,n){const r=me(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!wh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&v0(r.remoteStore,i.targetId),vg(r,i.targetId)}).catch(vc)):(vg(r,i.targetId),await mg(r.localStore,i.targetId,!0))}async function c6(t,e){const n=me(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),v0(n.remoteStore,r.targetId))}async function u6(t,e,n){const r=y6(t);try{const i=await function(o,a){const l=me(o),u=yt.now(),d=a.reduce((m,b)=>m.add(b.key),xe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=oi(),S=xe();return l.cs.getEntries(m,d).next(P=>{b=P,b.forEach((y,v)=>{v.isValidDocument()||(S=S.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,b)).next(P=>{h=P;const y=[];for(const v of a){const T=Pj(v,h.get(v.key).overlayedDocument);T!=null&&y.push(new qs(v.key,T,SS(T.value.mapValue),wr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,y,a)}).next(P=>{f=P;const y=P.applyToLocalDocumentSet(h,S);return l.documentOverlayCache.saveOverlays(m,P.batchId,y)})}).then(()=>({batchId:f.batchId,changes:LS(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Je(Pe)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Sc(r,i.changes),await Ih(r.remoteStore)}catch(i){const s=b0(i,"Failed to persist write");n.reject(s)}}async function mT(t,e){const n=me(t);try{const r=await T9(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ve(o.va):i.removedDocuments.size>0&&(Ve(o.va),o.va=!1))}),await Sc(n,r,e)}catch(r){await vc(r)}}function M_(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=me(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(u=!0)}),u&&S0(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d6(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Je(de.comparator);o=o.insert(s,qt.newNoDocument(s,ge.min()));const a=xe().add(s),l=new bh(ge.min(),new Map,new Je(Pe),o,a);await mT(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),T0(r)}else await mg(r.localStore,e,!1).then(()=>vg(r,e,n)).catch(vc)}async function h6(t,e){const n=me(t),r=e.batch.batchId;try{const i=await S9(n.localStore,e);vT(n,r,null),yT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sc(n,i)}catch(i){await vc(i)}}async function f6(t,e,n){const r=me(t);try{const i=await function(o,a){const l=me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Ve(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);vT(r,e,n),yT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sc(r,i)}catch(i){await vc(i)}}function yT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vT(t,e,n){const r=me(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||wT(t,r)})}function wT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(v0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),T0(t))}function j_(t,e,n){for(const r of n)r instanceof fT?(t.La.addReference(r.key,e),p6(t,r)):r instanceof pT?(le("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||wT(t,r.key)):fe()}function p6(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(r),T0(t))}function T0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(qe.fromString(e)),r=t.qa.next();t.Na.set(r,new r6(n)),t.Oa=t.Oa.insert(n,r),iT(t.remoteStore,new Di(vr(c0(n.path)),r,"TargetPurposeLimboResolution",r0.oe))}}async function Sc(t,e,n){const r=me(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=y0.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const d=me(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>X.forEach(u,f=>X.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>X.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!wc(h))throw h;le("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),b=m.snapshotVersion,S=m.withLastLimboFreeSnapshotVersion(b);d.os=d.os.insert(f,S)}}}(r.localStore,s))}async function g6(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const r=await eT(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new se(Y.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sc(n,r.hs)}}function m6(t,e){const n=me(t),r=n.Na.get(e);if(r&&r.va)return xe().add(r.key);{let i=xe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function _T(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d6.bind(null,e),e.Ca.d_=Z9.bind(null,e.eventManager),e.Ca.$a=e6.bind(null,e.eventManager),e}function y6(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f6.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return b9(this.persistence,new x9,e.initialUser,this.serializer)}Ga(e){return new v9(m0.Zr,this.serializer)}Wa(e){return new R9}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class wg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>M_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=g6.bind(null,this.syncEngine),await Y9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new J9}()}createDatastore(e){const n=Sh(e.databaseInfo.databaseId),r=function(s){return new z9(s)}(e.databaseInfo);return function(s,o,a,l){return new V9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new j9(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>M_(this.syncEngine,n,0),function(){return D_.D()?new D_:new N9}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new i6(i,s,o,a,l,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=me(i);le("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await bc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}wg.provider={build:()=>new wg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=xS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{le("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(le("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=b0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zf(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await w6(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>z_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>z_(e.remoteStore,i)),t._onlineComponents=e}async function w6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await zf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Y.FAILED_PRECONDITION||i.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await zf(t,new Md)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await zf(t,new Md);return t._offlineComponents}async function ET(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await $_(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await $_(t,new wg))),t._onlineComponents}function _6(t){return ET(t).then(e=>e.syncEngine)}async function bT(t){const e=await ET(t),n=e.eventManager;return n.onListen=s6.bind(null,e.syncEngine),n.onUnlisten=l6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=c6.bind(null,e.syncEngine),n}function x6(t,e,n={}){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new xT({next:f=>{d.Za(),o.enqueueAndForget(()=>dT(s,h));const m=f.docs.has(a);!m&&f.fromCache?u.reject(new se(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?u.reject(new se(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new hT(c0(a.path),d,{includeMetadataChanges:!0,_a:!0});return uT(s,h)}(await bT(t),t.asyncQueue,e,n,r)),r.promise}function E6(t,e,n={}){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new xT({next:f=>{d.Za(),o.enqueueAndForget(()=>dT(s,h)),f.fromCache&&l.source==="server"?u.reject(new se(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new hT(a,d,{includeMetadataChanges:!0,_a:!0});return uT(s,h)}(await bT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e,n){if(!n)throw new se(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function b6(t,e,n,r){if(e===!0&&r===!0)throw new se(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U_(t){if(!de.isDocumentKey(t))throw new se(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function B_(t){if(de.isDocumentKey(t))throw new se(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ch(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function Zi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ch(t);throw new se(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ST((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $M;switch(r.type){case"firstParty":return new HM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=F_.get(n);r&&(le("ComponentProvider","Removing Datastore"),F_.delete(n),r.terminate())}(this),Promise.resolve()}}function S6(t,e,n,r={}){var i;const s=(t=Zi(t,kh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Bt.MOCK_USER;else{a=Gz(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new se(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Bt(u)}t._authCredentials=new FM(new _S(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _a(this.firestore,e,this._query)}}class un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class Wi extends _a{constructor(e,n,r){super(e,n,c0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new de(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function T6(t,e,...n){if(t=Tt(t),TT("collection","path",e),t instanceof kh){const r=qe.fromString(e,...n);return B_(r),new Wi(t,null,r)}{if(!(t instanceof un||t instanceof Wi))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return B_(r),new Wi(t.firestore,null,r)}}function Lf(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=xS.newId()),TT("doc","path",e),t instanceof kh){const r=qe.fromString(e,...n);return U_(r),new un(t,null,new de(r))}{if(!(t instanceof un||t instanceof Wi))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return U_(r),new un(t.firestore,t instanceof Wi?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nT(this,"async_queue_retry"),this.Vu=()=>{const r=Df();r&&le("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Df();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wc(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw si("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=E0.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Tc extends kh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new q_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q_(e),this._firestoreClient=void 0,await e}}}function I6(t,e){const n=typeof t=="object"?t:Hm(),r=typeof t=="string"?t:"(default)",i=Hs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Wz("firestore");s&&S6(i,...s)}return i}function I0(t){if(t._terminated)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||C6(t),t._firestoreClient}function C6(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new rj(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ST(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new v6(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(Ot.fromBase64String(e))}catch(n){throw new se(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sa(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=/^__.*__$/;class A6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new xc(e,this.data,n,this.fieldTransforms)}}function IT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class N0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new N0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(IT(this.Cu)&&k6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class R6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sh(e)}Qu(e,n,r,i=!1){return new N0({Cu:e,methodName:n,qu:r,path:Pt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function CT(t){const e=t._freezeSettings(),n=Sh(t._databaseId);return new R6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N6(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);RT("Data must be an object, but it was:",o,r);const a=kT(r,o);let l,u;if(s.merge)l=new Jn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=D6(e,h,n);if(!o.contains(f))throw new se(Y.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);L6(d,f)||d.push(f)}l=new Jn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new A6(new Pn(a),l,u)}class P0 extends k0{_toFieldTransform(e){return new kj(e.path,new nc)}isEqual(e){return e instanceof P0}}function P6(t,e,n,r=!1){return D0(n,t.Qu(r?4:3,e))}function D0(t,e){if(AT(t=Tt(t)))return RT("Unsupported field value:",e,t),kT(t,e);if(t instanceof k0)return function(r,i){if(!IT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=D0(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=yt.fromDate(r);return{timestampValue:Od(i.serializer,s)}}if(r instanceof yt){const s=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Od(i.serializer,s)}}if(r instanceof A0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sa)return{bytesValue:KS(i.serializer,r._byteString)};if(r instanceof un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:p0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof R0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return u0(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ch(r)}`)}(t,e)}function kT(t,e){const n={};return ES(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(t,(r,i)=>{const s=D0(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function AT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof A0||t instanceof sa||t instanceof un||t instanceof k0||t instanceof R0)}function RT(t,e,n){if(!AT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ch(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function D6(t,e,n){if((e=Tt(e))instanceof C0)return e._internalPath;if(typeof e=="string")return NT(t,e);throw jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const z6=new RegExp("[~\\*/\\[\\]]");function NT(t,e,n){if(e.search(z6)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new C0(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new se(Y.INVALID_ARGUMENT,a+t+l)}function L6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(DT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class O6 extends PT{data(){return super.data()}}function DT(t,e){return typeof e=="string"?NT(t,e):e instanceof C0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z0{}class M6 extends z0{}function j6(t,e,...n){let r=[];e instanceof z0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof O0).length,a=s.filter(l=>l instanceof L0).length;if(o>1||o>0&&a>0)throw new se(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class L0 extends M6{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new L0(e,n,r)}_apply(e){const n=this._parse(e);return zT(e._query,n),new _a(e.firestore,e.converter,ug(e._query,n))}_parse(e){const n=CT(e.firestore);return function(s,o,a,l,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new se(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){K_(h,d);const m=[];for(const b of h)m.push(W_(l,s,b));f={arrayValue:{values:m}}}else f=W_(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||K_(h,d),f=P6(a,o,h,d==="in"||d==="not-in");return dt.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class O0 extends z0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new O0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)zT(o,l),o=ug(o,l)}(e._query,n),new _a(e.firestore,e.converter,ug(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function W_(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new se(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NS(e)&&n.indexOf("/")!==-1)throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!de.isDocumentKey(r))throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return p_(t,new de(r))}if(n instanceof un)return p_(t,n._key);throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(n)}.`)}function K_(t,e){if(!Array.isArray(t)||t.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zT(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $6{convertValue(e,n="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ya(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ot(o.doubleValue));return new R0(s)}convertGeoPoint(e){return new A0(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=s0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Xi(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);Ve(ZS(r));const i=new ec(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(n)||si(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LT extends PT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(DT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Uu extends LT{data(e={}){return super.data(e)}}class U6{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ol(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uu(this._firestore,this._userDataWriter,r.key,r,new ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ol(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ol(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:B6(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function B6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(t){t=Zi(t,un);const e=Zi(t.firestore,Tc);return x6(I0(e),t._key).then(n=>G6(e,t,n))}class OT extends $6{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function q6(t){t=Zi(t,_a);const e=Zi(t.firestore,Tc),n=I0(e),r=new OT(e);return V6(t._query),E6(n,t._query).then(i=>new U6(e,r,t,i))}function W6(t,e,n){t=Zi(t,un);const r=Zi(t.firestore,Tc),i=F6(t.converter,e,n);return VT(r,[N6(CT(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wr.none())])}function K6(t){return VT(Zi(t.firestore,Tc),[new d0(t._key,wr.none())])}function VT(t,e){return function(r,i){const s=new Yr;return r.asyncQueue.enqueueAndForget(async()=>u6(await _6(r),i,s)),s.promise}(I0(t),e)}function G6(t,e,n){const r=n.docs.get(e._key),i=new OT(t);return new LT(t,i,e._key,r,new ol(n.hasPendingWrites,n.fromCache),e.converter)}function Q6(){return new P0("serverTimestamp")}(function(e,n=!0){(function(i){ma=i})(pa),xr(new ir("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Tc(new UM(r.getProvider("auth-internal")),new WM(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),On(c_,"4.7.3",e),On(c_,"4.7.3","esm2017")})();const MT="@firebase/installations",V0="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=1e4,$T=`w:${V0}`,FT="FIS_v2",Y6="https://firebaseinstallations.googleapis.com/v1",X6=60*60*1e3,J6="installations",Z6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},js=new Bs(J6,Z6,e$);function UT(t){return t instanceof ar&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT({projectId:t}){return`${Y6}/projects/${t}/installations`}function HT(t){return{token:t.token,requestStatus:2,expiresIn:n$(t.expiresIn),creationTime:Date.now()}}async function qT(t,e){const r=(await e.json()).error;return js.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function WT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function t$(t,{refreshToken:e}){const n=WT(t);return n.append("Authorization",r$(e)),n}async function KT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function n$(t){return Number(t.replace("s","000"))}function r$(t){return`${FT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i$({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=BT(t),i=WT(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:FT,appId:t.appId,sdkVersion:$T},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await KT(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:HT(u.authToken)}}else throw await qT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o$=/^[cdef][\w-]{21}$/,_g="";function a$(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=l$(t);return o$.test(n)?n:_g}catch{return _g}}function l$(t){return s$(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new Map;function YT(t,e){const n=Ah(t);XT(n,e),c$(n,e)}function XT(t,e){const n=QT.get(t);if(n)for(const r of n)r(e)}function c$(t,e){const n=u$();n&&n.postMessage({key:t,fid:e}),d$()}let xs=null;function u$(){return!xs&&"BroadcastChannel"in self&&(xs=new BroadcastChannel("[Firebase] FID Change"),xs.onmessage=t=>{XT(t.data.key,t.data.fid)}),xs}function d$(){QT.size===0&&xs&&(xs.close(),xs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$="firebase-installations-database",f$=1,$s="firebase-installations-store";let Of=null;function M0(){return Of||(Of=N2(h$,f$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($s)}}})),Of}async function $d(t,e){const n=Ah(t),i=(await M0()).transaction($s,"readwrite"),s=i.objectStore($s),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&YT(t,e.fid),e}async function JT(t){const e=Ah(t),r=(await M0()).transaction($s,"readwrite");await r.objectStore($s).delete(e),await r.done}async function Rh(t,e){const n=Ah(t),i=(await M0()).transaction($s,"readwrite"),s=i.objectStore($s),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&YT(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0(t){let e;const n=await Rh(t.appConfig,r=>{const i=p$(r),s=g$(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===_g?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function p$(t){const e=t||{fid:a$(),registrationStatus:0};return ZT(e)}function g$(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(js.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=m$(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:y$(t)}:{installationEntry:e}}async function m$(t,e){try{const n=await i$(t,e);return $d(t.appConfig,n)}catch(n){throw UT(n)&&n.customData.serverCode===409?await JT(t.appConfig):await $d(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function y$(t){let e=await G_(t.appConfig);for(;e.registrationStatus===1;)await GT(100),e=await G_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await j0(t);return r||n}return e}function G_(t){return Rh(t,e=>{if(!e)throw js.create("installation-not-found");return ZT(e)})}function ZT(t){return v$(t)?{fid:t.fid,registrationStatus:0}:t}function v$(t){return t.registrationStatus===1&&t.registrationTime+jT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w$({appConfig:t,heartbeatServiceProvider:e},n){const r=_$(t,n),i=t$(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:$T,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await KT(()=>fetch(r,a));if(l.ok){const u=await l.json();return HT(u)}else throw await qT("Generate Auth Token",l)}function _$(t,{fid:e}){return`${BT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(t,e=!1){let n;const r=await Rh(t.appConfig,s=>{if(!eI(s))throw js.create("not-registered");const o=s.authToken;if(!e&&b$(o))return s;if(o.requestStatus===1)return n=x$(t,e),s;{if(!navigator.onLine)throw js.create("app-offline");const a=T$(s);return n=E$(t,a),a}});return n?await n:r.authToken}async function x$(t,e){let n=await Q_(t.appConfig);for(;n.authToken.requestStatus===1;)await GT(100),n=await Q_(t.appConfig);const r=n.authToken;return r.requestStatus===0?$0(t,e):r}function Q_(t){return Rh(t,e=>{if(!eI(e))throw js.create("not-registered");const n=e.authToken;return I$(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function E$(t,e){try{const n=await w$(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await $d(t.appConfig,r),n}catch(n){if(UT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await JT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await $d(t.appConfig,r)}throw n}}function eI(t){return t!==void 0&&t.registrationStatus===2}function b$(t){return t.requestStatus===2&&!S$(t)}function S$(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+X6}function T$(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function I$(t){return t.requestStatus===1&&t.requestTime+jT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C$(t){const e=t,{installationEntry:n,registrationPromise:r}=await j0(e);return r?r.catch(console.error):$0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k$(t,e=!1){const n=t;return await A$(n),(await $0(n,e)).token}async function A$(t){const{registrationPromise:e}=await j0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$(t){if(!t||!t.options)throw Vf("App Configuration");if(!t.name)throw Vf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Vf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Vf(t){return js.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="installations",N$="installations-internal",P$=t=>{const e=t.getProvider("app").getImmediate(),n=R$(e),r=Hs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},D$=t=>{const e=t.getProvider("app").getImmediate(),n=Hs(e,tI).getImmediate();return{getId:()=>C$(n),getToken:i=>k$(n,i)}};function z$(){xr(new ir(tI,P$,"PUBLIC")),xr(new ir(N$,D$,"PRIVATE"))}z$();On(MT,V0);On(MT,V0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="analytics",L$="firebase_id",O$="origin",V$=60*1e3,M$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",F0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new ph("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sn=new Bs("analytics","Analytics",j$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(t){if(!t.startsWith(F0)){const e=Sn.create("invalid-gtag-resource",{gtagURL:t});return dn.warn(e.message),""}return t}function nI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function F$(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function U$(t,e){const n=F$("firebase-js-sdk-policy",{createScriptURL:$$}),r=document.createElement("script"),i=`${F0}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function B$(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function H$(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await nI(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){dn.error(a)}t("config",i,s)}async function q$(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await nI(n);for(const l of o){const u=a.find(h=>h.measurementId===l),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){dn.error(s)}}function W$(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await q$(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await H$(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){dn.error(a)}}return i}function K$(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=W$(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function G$(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(F0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$=30,Y$=1e3;class X${constructor(e={},n=Y$){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const rI=new X$;function J$(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Z$(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:J$(r)},s=M$.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Sn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function eF(t,e=rI,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Sn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Sn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new rF;return setTimeout(async()=>{a.abort()},V$),iI({appId:r,apiKey:i,measurementId:s},o,a,e)}async function iI(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=rI){var s;const{appId:o,measurementId:a}=t;try{await tF(r,e)}catch(l){if(a)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await Z$(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!nF(u)){if(i.deleteThrottleMetadata(o),a)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?zw(n,i.intervalMillis,Q$):zw(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,h),dn.debug(`Calling attemptFetch again in ${d} millis`),iI(t,h,r,i)}}function tF(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nF(t){if(!(t instanceof ar)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class rF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iF(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sF(){if(C2())try{await k2()}catch(t){return dn.warn(Sn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return dn.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function oF(t,e,n,r,i,s,o){var a;const l=eF(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>dn.error(m)),e.push(l);const u=sF().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,u]);G$(s)||U$(s,d.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[O$]="firebase",f.update=!0,h!=null&&(f[L$]=h),i("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.app=e}_delete(){return delete xl[this.app.options.appId],Promise.resolve()}}let xl={},Y_=[];const X_={};let Mf="dataLayer",lF="gtag",J_,sI,Z_=!1;function cF(){const t=[];if(I2()&&t.push("This is a browser extension environment."),tL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Sn.create("invalid-analytics-context",{errorInfo:e});dn.warn(n.message)}}function uF(t,e,n){cF();const r=t.options.appId;if(!r)throw Sn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sn.create("no-api-key");if(xl[r]!=null)throw Sn.create("already-exists",{id:r});if(!Z_){B$(Mf);const{wrappedGtag:s,gtagCore:o}=K$(xl,Y_,X_,Mf,lF);sI=s,J_=o,Z_=!0}return xl[r]=oF(t,Y_,X_,e,J_,Mf,n),new aF(t)}function dF(t=Hm()){t=Tt(t);const e=Hs(t,Fd);return e.isInitialized()?e.getImmediate():hF(t)}function hF(t,e={}){const n=Hs(t,Fd);if(n.isInitialized()){const i=n.getImmediate();if(Ql(e,n.getOptions()))return i;throw Sn.create("already-initialized")}return n.initialize({options:e})}function fF(t,e,n,r){t=Tt(t),iF(sI,xl[t.app.options.appId],e,n,r).catch(i=>dn.error(i))}const ex="@firebase/analytics",tx="0.10.8";function pF(){xr(new ir(Fd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return uF(r,i,n)},"PUBLIC")),xr(new ir("analytics-internal",t,"PRIVATE")),On(ex,tx),On(ex,tx,"esm2017");function t(e){try{const n=e.getProvider(Fd).getImmediate();return{logEvent:(r,i,s)=>fF(n,r,i,s)}}catch(n){throw Sn.create("interop-component-reg-failed",{reason:n})}}}pF();const gF={apiKey:"AIzaSyBRvglSh40aRJFOA9SNxoyBhNjslW_7p8k",authDomain:"detective-board-b108b.firebaseapp.com",projectId:"detective-board-b108b",storageBucket:"detective-board-b108b.firebasestorage.app",messagingSenderId:"140107009046",appId:"1:140107009046:web:49e3c650ea0e90a5f2b937",measurementId:"G-TBJ91VEM4Y"},U0=P2(gF);dF(U0);const oa=OM(U0),yu=I6(U0),mF=new $r,oI=D.createContext();function B0(){return D.useContext(oI)}function yF({children:t}){const[e,n]=D.useState(null),[r,i]=D.useState(!0);D.useEffect(()=>SV(oa,a=>{n(a),i(!1)}),[]);const s={currentUser:e};return p.jsx(oI.Provider,{value:s,children:!r&&t})}const vF=({onSwitchToSignUp:t,onForgotPassword:e,isDarkMode:n})=>{const[r,i]=D.useState(""),[s,o]=D.useState(""),[a,l]=D.useState(""),u=async h=>{h.preventDefault(),l("");try{await wV(oa,r,s)}catch(f){console.error(f),l("Error: "+f.message)}},d=async()=>{l("");try{await qV(oa,mF)}catch(h){console.error(h),l("Error Google: "+h.message)}};return p.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[p.jsxs("form",{onSubmit:u,className:`shadow-xl rounded-lg px-8 pt-6 pb-8 mb-4 border transition-colors duration-300 ${n?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"}`,children:[p.jsx("h2",{className:`text-2xl font-bold mb-6 text-center font-mono ${n?"text-white":"text-gray-800"}`,children:"INICIAR SESIN"}),a&&p.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:a}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"text-zinc-400":"text-gray-600"}`,htmlFor:"login-email",children:"Correo"}),p.jsxs("div",{className:"relative",children:[p.jsx(Vm,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${n?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"login-email",type:"email",placeholder:"detective@agencia.com",value:r,onChange:h=>i(h.target.value),required:!0})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"text-zinc-400":"text-gray-600"}`,htmlFor:"login-password",children:"Contrasea"}),p.jsxs("div",{className:"relative",children:[p.jsx(Xo,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${n?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"login-password",type:"password",placeholder:"",value:s,onChange:h=>o(h.target.value),required:!0})]})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase transition-transform active:scale-95",type:"submit",children:"Entrar"}),p.jsxs("div",{className:"relative flex py-1 items-center",children:[p.jsx("div",{className:`flex-grow border-t ${n?"border-zinc-600":"border-gray-300"}`}),p.jsx("span",{className:`flex-shrink mx-2 text-xs ${n?"text-zinc-500":"text-gray-400"}`,children:"O"}),p.jsx("div",{className:`flex-grow border-t ${n?"border-zinc-600":"border-gray-300"}`})]}),p.jsxs("button",{onClick:d,type:"button",className:`flex items-center justify-center gap-3 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-all active:scale-95 ${n?"bg-white text-gray-700 hover:bg-gray-100":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[p.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),p.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),p.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),p.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}),p.jsx("div",{className:"text-center mt-6",children:p.jsx("a",{onClick:e,className:"inline-block align-baseline font-bold text-sm text-blue-400 hover:text-blue-300 cursor-pointer",children:"Olvidaste tu contrasea?"})})]}),p.jsxs("p",{className:`text-center text-xs ${n?"text-zinc-500":"text-gray-500"}`,children:["No tienes cuenta?"," ",p.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Regstrate aqu."})]})]})},wF=({onSwitchToLogin:t,isDarkMode:e})=>{const[n,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(""),[l,u]=D.useState(""),[d,h]=D.useState(""),f=async m=>{if(m.preventDefault(),o!==l)return h("Las contraseas no coinciden.");h("");try{const b=await vV(oa,i,o);await xV(b.user,{displayName:n})}catch(b){console.error(b),b.code==="auth/email-already-in-use"?h("Este correo ya est en uso."):b.code==="auth/weak-password"?h("La contrasea es muy dbil (mnimo 6 caracteres)."):h("Error: "+b.message)}};return p.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[p.jsxs("form",{onSubmit:f,className:`shadow-xl rounded-lg px-8 pt-6 pb-8 mb-4 border transition-colors duration-300 ${e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"}`,children:[p.jsx("h2",{className:`text-2xl font-bold mb-6 text-center font-mono ${e?"text-white":"text-gray-800"}`,children:"CREAR CUENTA"}),d&&p.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:d}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"signup-name",children:"Nombre"}),p.jsxs("div",{className:"relative",children:[p.jsx(Mm,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"signup-name",type:"text",placeholder:"Sherlock Holmes",value:n,onChange:m=>r(m.target.value),required:!0})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"signup-email",children:"Correo"}),p.jsxs("div",{className:"relative",children:[p.jsx(Vm,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"signup-email",type:"email",placeholder:"detective@agencia.com",value:i,onChange:m=>s(m.target.value),required:!0})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"signup-password",children:"Contrasea"}),p.jsxs("div",{className:"relative",children:[p.jsx(Xo,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"signup-password",type:"password",placeholder:"",value:o,onChange:m=>a(m.target.value),required:!0})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"signup-confirm-password",children:"Confirmar Contrasea"}),p.jsxs("div",{className:"relative",children:[p.jsx(Xo,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"signup-confirm-password",type:"password",placeholder:"",value:l,onChange:m=>u(m.target.value),required:!0})]})]}),p.jsx("div",{className:"flex flex-col gap-4",children:p.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase transition-transform active:scale-95",type:"submit",children:"Registrarse"})})]}),p.jsxs("p",{className:`text-center text-xs ${e?"text-zinc-500":"text-gray-500"}`,children:["Ya tienes una cuenta?"," ",p.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Inicia sesin."})]})]})},_F=({onSwitchToLogin:t,isDarkMode:e})=>{const[n,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(""),l=async u=>{u.preventDefault(),a(""),s("");try{await yV(oa,n),s("Revisa tu correo! Se ha enviado un enlace para restablecer tu contrasea.")}catch{a("Error al enviar el correo. Verifica que la direccin sea correcta.")}};return p.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[p.jsxs("form",{onSubmit:l,className:`shadow-xl rounded-lg px-8 pt-6 pb-8 mb-4 border transition-colors duration-300 ${e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"}`,children:[p.jsx("h2",{className:`text-2xl font-bold mb-6 text-center font-mono ${e?"text-white":"text-gray-800"}`,children:"RECUPERAR CONTRASEA"}),o&&p.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:o}),i&&p.jsx("p",{className:"bg-green-900/50 text-green-300 text-xs p-3 rounded mb-4",children:i}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-sm font-bold mb-2 ${e?"text-zinc-400":"text-gray-600"}`,htmlFor:"reset-email",children:"Correo Electrnico"}),p.jsxs("div",{className:"relative",children:[p.jsx(Vm,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${e?"text-zinc-500":"text-gray-400"}`,size:16}),p.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 pl-10 pr-3 leading-tight focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${e?"bg-zinc-700 border-zinc-600 text-white placeholder-zinc-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"}`,id:"reset-email",type:"email",placeholder:"detective@agencia.com",value:n,onChange:u=>r(u.target.value),required:!0})]})]}),p.jsx("div",{className:"flex flex-col gap-4",children:p.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase transition-transform active:scale-95",type:"submit",children:"Enviar Enlace"})})]}),p.jsx("p",{className:`text-center text-xs ${e?"text-zinc-500":"text-gray-500"}`,children:p.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Volver a Iniciar Sesin"})})]})},xF=()=>{const[t,e]=D.useState("login"),[n,r]=D.useState(!0),i=()=>{switch(t){case"signup":return p.jsx(wF,{onSwitchToLogin:()=>e("login"),isDarkMode:n});case"forgot":return p.jsx(_F,{onSwitchToLogin:()=>e("login"),isDarkMode:n});case"login":default:return p.jsx(vF,{onSwitchToSignUp:()=>e("signup"),onForgotPassword:()=>e("forgot"),isDarkMode:n})}};return p.jsxs("div",{className:`w-screen h-screen flex flex-col items-center justify-center p-4 transition-colors duration-500 ${n?"bg-zinc-900":"bg-gray-100"}`,children:[p.jsx("button",{onClick:()=>r(!n),className:`absolute top-4 right-4 p-2 rounded-full transition-colors ${n?"bg-zinc-800 text-yellow-400 hover:bg-zinc-700":"bg-white text-gray-600 hover:bg-gray-200 shadow-sm"}`,children:n?p.jsx(a2,{size:20}):p.jsx(n2,{size:20})}),p.jsx("h1",{className:`text-5xl font-black font-mono mb-8 tracking-[0.2em] uppercase text-center ${n?"text-zinc-500":"text-zinc-400"}`,children:"DETECTIVE BOARD"}),p.jsx("div",{className:"w-full flex justify-center animate-in fade-in slide-in-from-bottom-8 duration-500",children:i()},t)]})},EF=()=>{const{currentUser:t}=B0(),e=D.useCallback(async(s,o)=>{if(!(!t||!s))try{const a=Lf(yu,"users",t.uid,"boards",s),l=JSON.parse(JSON.stringify(o));await W6(a,{...l,updatedAt:Q6(),ownerId:t.uid},{merge:!0})}catch(a){console.error("Error al guardar en Firestore:",a)}},[t]),n=D.useCallback(async s=>{if(!t||!s)return null;try{const o=Lf(yu,"users",t.uid,"boards",s),a=await H6(o);return a.exists()?a.data():null}catch(o){return console.error("Error al cargar de Firestore:",o),null}},[t]),r=D.useCallback(async()=>{if(!t)return[];try{const s=T6(yu,"users",t.uid,"boards"),o=j6(s);return(await q6(o)).docs.map(l=>({id:l.id,...l.data()}))}catch(s){return console.error("Error al obtener tableros:",s),[]}},[t]),i=D.useCallback(async s=>{t&&await K6(Lf(yu,"users",t.uid,"boards",s))},[t]);return{saveBoard:e,loadBoard:n,getBoards:r,deleteBoard:i}},bF=()=>{var Pr,as,gi;const t=D.useRef(null),{currentUser:e}=B0(),[n,r]=D.useState(!1),[i,s,o]=O5([]),[a,l,u]=V5([]),[d,h]=D.useState(null),[f,m]=D.useState(!1),[b,S]=D.useState(null),[P,y]=D.useState(null),[v,T]=D.useState(null),[R,L]=D.useState({isOpen:!1,title:"",message:"",onConfirm:null,isDanger:!1}),[V,I]=D.useState(!1),[E,_]=D.useState(!1),[x,C]=D.useState(null),[A,k]=D.useState(null),[N,j]=D.useState(!1),O=D.useRef(!1),{saveBoard:B,loadBoard:$,getBoards:M}=EF(),{connectionColor:U,setConnectionColor:W,connectionLineType:F,setConnectionLineType:Q,isInteractive:G,setIsInteractive:Z,isDarkMode:te,setIsDarkMode:ue,searchTerm:ae,setSearchTerm:ve,isSidebarOpen:pe,setIsSidebarOpen:Ie,isZenMode:Ce,setIsZenMode:$e,bgType:De,setBgType:ke,toggleBackground:rt}=Vz("cork"),{nodeTypes:Ee,edgeTypes:ne,proOptions:be,connectionLineStyle:vt,nodeColor:fn}=Rz({connectionColor:U}),{takeSnapshot:it,undo:Vt,redo:Ct,clearHistory:lt,onNodesChangeWithHistory:Re,onEdgesChangeWithHistory:Le,animateAndRemoveNode:wt,animateAndRemoveEdge:Gt}=Pz({nodes:i,edges:a,setNodes:s,setEdges:l,onNodesChange:o,onEdgesChange:u}),{boards:Qt,setBoards:Ze,trash:ft,currentBoardId:Ke,setCurrentBoardId:pn,handleSwitchBoard:en,handleCreateBoard:gn,handleDeleteBoard:tn,handleRestoreBoard:$n,handlePermanentDelete:ui,handleRenameBoard:lr,handleReorderBoards:Fn,handleCloneBoard:di}=lz({nodes:i,edges:a,bgType:De,setNodes:s,setEdges:l,setBgType:ke,reactFlowInstance:d,clearHistory:lt,setCaseManagerOpen:r,setConfirmModal:L,lastSaved:P});D.useEffect(()=>{(async()=>{if(e)try{const ce=await M();if(ce.length>0){const Fe=ce.map(ze=>{var st,ur;return{...ze,createdAt:(st=ze.createdAt)!=null&&st.toMillis?ze.createdAt.toMillis():ze.createdAt||Date.now(),lastModified:(ur=ze.updatedAt)!=null&&ur.toMillis?ze.updatedAt.toMillis():ze.updatedAt||Date.now()}}).sort((ze,st)=>st.lastModified-ze.lastModified);Ze(Fe),(!Ke||!Fe.find(ze=>ze.id===Ke))&&pn(Fe[0].id)}else console.log("No se encontraron tableros remotos.")}catch(ce){console.error("Error sincronizando tableros:",ce)}})()},[e,M,Ze,pn]),D.useEffect(()=>{(async()=>{if(Ke){j(!0),O.current=!1;try{const ce=await $(Ke);ce?(s(ce.nodes||[]),l(ce.edges||[]),ce.bgType&&ke(ce.bgType),O.current=!0):(s([]),l([]),O.current=!0)}catch(ce){console.error("Error cargando tablero:",ce)}finally{j(!1)}}})()},[Ke,$,s,l,ke]),D.useEffect(()=>{if(N||!O.current)return;const ye=setTimeout(()=>{var ce;Ke&&(B(Ke,{nodes:i,edges:a,bgType:De,name:((ce=Qt.find(Fe=>Fe.id===Ke))==null?void 0:ce.name)||"Caso Sin Nombre"}),y(new Date))},2e3);return()=>clearTimeout(ye)},[i,a,De,Ke,B,Qt,N]),D.useEffect(()=>{const ye=ce=>{ce.preventDefault(),ce.returnValue=""};return window.addEventListener("beforeunload",ye),()=>window.removeEventListener("beforeunload",ye)},[]),f3({isInteractive:G,reactFlowInstance:d,takeSnapshot:it,setNodes:s});const{onConnect:mn,onEdgeContextMenu:Un,onEdgeClick:Ks,onPaneClick:Ir,onNodeDoubleClick:Gs,onNodeDragStart:Cr,onMoveStart:Qs,onMoveEnd:pt,selectionRect:Bn,handleRightPointerDown:kr}=zz({isInteractive:G,reactFlowInstance:d,reactFlowWrapper:t,setEdges:l,setNodes:s,connectionLineType:F,connectionColor:U,takeSnapshot:it,setEditingNode:S,setEditingEdge:C,setInputModalOpen:_,setEditModalOpen:m,setMenu:T});D.useEffect(()=>{const ye=ce=>{ce.key==="Escape"&&Ce&&$e(!1)};return window.addEventListener("keydown",ye),()=>window.removeEventListener("keydown",ye)},[Ce]);const{handleSaveNode:Ar,handleDeleteNode:xa,duplicateSelected:Ea,handleConnectionColorChange:cr,handleConnectionLineTypeChange:ba,handleEdgeDelete:Sa,handleInputModalConfirm:hi}=Mz({reactFlowInstance:d,setNodes:s,setEdges:l,takeSnapshot:it,animateAndRemoveNode:wt,animateAndRemoveEdge:Gt,setEditModalOpen:m,setEditingNode:S,setEditingEdge:C,setInputModalOpen:_,setConnectionColor:W,setConnectionLineType:Q,setPendingStampNodeId:k}),{onDragOver:is,onDrop:ss}=uz({isInteractive:G,reactFlowInstance:d,setNodes:s,takeSnapshot:it,setPendingStampNodeId:k,setInputModalOpen:_,setEditingEdge:C,setEditingNode:S}),{onSave:Rr,onLoad:An,onClear:Ys}=Lz({reactFlowInstance:d,boards:Qt,currentBoardId:Ke,bgType:De,setBoards:Ze,setNodes:s,setEdges:l,setBgType:ke,handleSwitchBoard:en,clearHistory:lt,takeSnapshot:it,setConfirmModal:L}),{navigateSearch:fi}=Oz({searchTerm:ae,setNodes:s,reactFlowInstance:d}),pi=q.useCallback(()=>{it(),s(ye=>{const ce=ye.filter(ze=>ze.selected);if(ce.length===0)return ye;const Fe=ce.some(ze=>!ze.data.locked);return ye.map(ze=>ze.selected?{...ze,data:{...ze.data,locked:Fe},draggable:!Fe}:ze)})},[s,it]);D.useEffect(()=>{const ye=ce=>{["INPUT","TEXTAREA","SELECT"].includes(ce.target.tagName)||ce.target.isContentEditable||(ce.ctrlKey||ce.metaKey)&&ce.shiftKey&&ce.key.toLowerCase()==="l"&&(ce.preventDefault(),pi())};return window.addEventListener("keydown",ye),()=>window.removeEventListener("keydown",ye)},[pi]),D.useEffect(()=>{const ye=i.filter(ce=>ce.selected).map(ce=>ce.id);l(ce=>{let Fe=!1;const ze=ce.map(st=>{var Js;const ur=ye.includes(st.source)||ye.includes(st.target),Dr=(Js=st.className)==null?void 0:Js.includes("animated-flow");if(ur&&!Dr){Fe=!0;const Ia=(st.className||"").replace("quick-draw","").trim();return{...st,className:`${Ia} animated-flow`.trim()}}else if(!ur&&Dr)return Fe=!0,{...st,className:(st.className||"").replace("animated-flow","").trim()};return st});return Fe?ze:ce})},[i,l]),D.useEffect(()=>{if(a.some(ce=>{var Fe;return(Fe=ce.className)==null?void 0:Fe.includes("quick-draw")})){const ce=setTimeout(()=>{l(Fe=>Fe.map(ze=>{var st;return(st=ze.className)!=null&&st.includes("quick-draw")?{...ze,className:ze.className.replace("quick-draw","").trim()}:ze}))},1e3);return()=>clearTimeout(ce)}},[a,l]);const{isExporting:os,onExport:Xs}=oz({reactFlowWrapper:t,reactFlowInstance:d,boards:Qt,currentBoardId:Ke,bgType:De,isDarkMode:te,setNodes:s});cz({onSave:Rr,undo:Vt,redo:Ct,duplicateSelected:Ea,navigateSearch:fi,reactFlowInstance:d,edges:a,setEdges:l,takeSnapshot:it,connectionLineType:F,connectionColor:U});const Nr=Qt.find(ye=>ye.id===Ke),Ta=async()=>{try{await TV(oa)}catch(ye){console.error("Error al cerrar sesin",ye)}};return p.jsx("div",{className:`flex h-screen w-screen transition-colors duration-500 ease-in-out ${te?"bg-[#1a1a1a]":"bg-gray-50 light-mode"}`,children:p.jsx(w2.Provider,{value:te,children:p.jsxs(Pm,{children:[!Ce&&p.jsx(t3,{connectionColor:U,setConnectionColor:cr,connectionLineType:F,setConnectionLineType:ba,lastSaved:P,onSave:Rr,onLoad:An,onClear:Ys,onHelp:()=>I(!0),isDarkMode:te,toggleTheme:()=>ue(!te),searchTerm:ae,setSearchTerm:ve,onExport:Xs,isOpen:pe,onToggle:()=>Ie(!pe),onOpenCaseManager:()=>r(!0),currentBoardName:Nr==null?void 0:Nr.name,onToggleZen:()=>$e(!0),onNextMatch:()=>fi("next"),onPrevMatch:()=>fi("prev"),onToggleBg:rt,onLogout:Ta,currentUser:e,isSyncing:N}),p.jsxs("div",{className:"flex-grow h-full relative overflow-hidden",ref:t,style:{"--connection-color":U},onPointerDown:kr,onContextMenu:ye=>ye.preventDefault(),children:[p.jsx(h3,{isZenMode:Ce,setIsZenMode:$e,undo:Vt,redo:Ct,isDarkMode:te}),p.jsxs(Ub,{nodes:i,edges:a,onNodesChange:Re,onEdgesChange:Le,onConnect:mn,onInit:h,onDrop:ss,onDragOver:is,onNodeDoubleClick:Gs,onEdgeClick:Ks,onEdgeContextMenu:Un,onPaneClick:Ir,nodeTypes:Ee,edgeTypes:ne,fitView:!0,className:`${De==="cork"?"cork-pattern":De==="blackboard"?"blackboard-pattern":"graph-paper-pattern"} ${G?"":"board-locked"} ${te?"":"light-mode"}`,connectionLineType:F,connectionLineStyle:vt,nodesDraggable:G,proOptions:be,elevateNodesOnSelect:!1,nodesConnectable:G,elementsSelectable:G,panOnDrag:G,zoomOnScroll:G,zoomOnPinch:G,panOnScroll:G,zoomOnDoubleClick:G,onNodeDragStart:Cr,onMoveStart:Qs,onMoveEnd:pt,connectionRadius:30,children:[!Ce&&p.jsx(eD,{showInteractive:!0,onInteractiveChange:Z,fitViewOptions:{duration:800,padding:.2},style:{left:pe?"340px":"10px",transition:"left 0.2s ease-in-out"}}),!Ce&&p.jsx(K5,{nodeColor:fn,maskColor:te?"rgba(0, 0, 0, 0.6)":"rgba(0, 0, 0, 0.1)",className:te?"bg-zinc-900 border border-zinc-800":"bg-white border border-gray-200 shadow-md"}),p.jsx(oD,{gap:20,size:1,color:te?"#444":"#aaa",variant:"dots",className:"opacity-20"}),v&&p.jsx(a3,{onClick:Ir,...v,onHide:()=>T(null),takeSnapshot:it,setNodes:s}),i.length===0&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10 select-none",children:p.jsxs("div",{className:`text-center ${te?"opacity-10":"opacity-20"}`,children:[p.jsx("h1",{className:"text-5xl md:text-7xl font-black text-zinc-500 font-mono mb-4 tracking-[0.2em] uppercase",children:"CONFIDENCIAL"}),p.jsx("p",{className:"text-sm text-zinc-500 font-mono uppercase tracking-widest",children:"Arrastra evidencia o haz doble clic"})]})}),p.jsx("svg",{style:{position:"absolute",top:0,left:0,width:0,height:0,pointerEvents:"none"},children:p.jsx("defs",{children:p.jsxs("filter",{id:"yarn-texture",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[p.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.8",numOctaves:"3",result:"noise"}),p.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"1.5"})]})})})]}),p.jsx("div",{className:"absolute inset-0 pointer-events-none z-[5] bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.6)_100%)]"}),os&&p.jsxs("div",{className:"absolute inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center backdrop-blur-sm animate-in fade-in duration-200 cursor-wait",children:[p.jsx("div",{className:"w-16 h-16 border-4 border-red-600 border-t-transparent rounded-full animate-spin mb-4"}),p.jsx("h2",{className:"text-xl font-bold text-white font-mono tracking-widest animate-pulse",children:"REVELANDO EVIDENCIA..."}),p.jsx("p",{className:"text-zinc-400 text-xs font-mono mt-2",children:"Procesando fotografa del tablero completo."})]}),Bn&&Bn.isDragging&&p.jsx("div",{className:"absolute z-50 pointer-events-none",style:{left:`${Bn.x}px`,top:`${Bn.y}px`,width:`${Bn.width}px`,height:`${Bn.height}px`,border:"2px dashed #3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)"}})]}),p.jsx(n3,{isOpen:f,onClose:()=>m(!1),node:b,onSave:Ar,onDelete:xa,isDarkMode:te}),p.jsx(l3,{isOpen:R.isOpen,onClose:()=>L(ye=>({...ye,isOpen:!1})),onConfirm:R.onConfirm,title:R.title,message:R.message,isDanger:R.isDanger,confirmText:R.confirmText,cancelText:R.cancelText,isDarkMode:te}),p.jsx(c3,{isOpen:V,onClose:()=>I(!1),isDarkMode:te}),p.jsx(u3,{isOpen:E,onClose:()=>{_(!1),C(null),S(null),k(null)},onConfirm:(ye,ce,Fe)=>hi(ye,ce,Fe,x,b,A),onDelete:()=>{A?(it(),s(ye=>ye.map(ce=>ce.id===A?{...ce,data:{...ce.data,status:null}}:ce)),_(!1),k(null)):Sa(x,b)},title:x?"EDITAR CONEXIN":A?"CREAR SELLO":"EDITAR ZONA",initialValue:x?x.label||"":A?"":((Pr=b==null?void 0:b.data)==null?void 0:Pr.label)||"",initialColor:x?((as=x.style)==null?void 0:as.stroke)||"#dc2626":A?"#dc2626":((gi=b==null?void 0:b.style)==null?void 0:gi.borderColor)||"#71717a",initialType:x==null?void 0:x.type,showTypeSelector:!!x,colorLabel:x?"Color del Hilo":A?"Color del Sello":"Color de Zona",placeholder:A?"Texto del sello (ej: CONFIRMADO)":"Escribe una etiqueta...",isDarkMode:te}),p.jsx(d3,{isOpen:n,onClose:()=>r(!1),boards:Qt,currentBoardId:Ke,onSwitch:en,onCreate:gn,onDelete:tn,onRename:lr,onClone:di,onReorder:Fn,trash:ft,onRestore:$n,onPermanentDelete:ui,isDarkMode:te})]})})})},SF=()=>{const{currentUser:t}=B0();return D.useEffect(()=>{document.title="Detective Board";const e="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%23dc2626%22%20stroke-width%3D%222.5%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Ccircle%20cx%3D%2211%22%20cy%3D%2211%22%20r%3D%228%22%3E%3C%2Fcircle%3E%3Cline%20x1%3D%2221%22%20y1%3D%2221%22%20x2%3D%2216.65%22%20y2%3D%2216.65%22%3E%3C%2Fline%3E%3C%2Fsvg%3E";let n=document.querySelector("link[rel~='icon']");n||(n=document.createElement("link"),n.rel="icon",document.head.appendChild(n)),n.href=e},[]),t?p.jsx(bF,{}):p.jsx(xF,{})};jf.createRoot(document.getElementById("root")).render(p.jsx(q.StrictMode,{children:p.jsx(yF,{children:p.jsx(SF,{})})}));
