(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();function cu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sc={exports:{}},$i={},kc={exports:{}},Ne={};var s0;function sy(){if(s0)return Ne;s0=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function x(_){return _===null||typeof _!="object"?null:(_=v&&_[v]||_["@@iterator"],typeof _=="function"?_:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function z(_,P,ne){this.props=_,this.context=P,this.refs=k,this.updater=ne||w}z.prototype.isReactComponent={},z.prototype.setState=function(_,P){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,P,"setState")},z.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function E(){}E.prototype=z.prototype;function T(_,P,ne){this.props=_,this.context=P,this.refs=k,this.updater=ne||w}var U=T.prototype=new E;U.constructor=T,C(U,z.prototype),U.isPureReactComponent=!0;var R=Array.isArray,O=Object.prototype.hasOwnProperty,H={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function Y(_,P,ne){var te,oe={},ae=null,de=null;if(P!=null)for(te in P.ref!==void 0&&(de=P.ref),P.key!==void 0&&(ae=""+P.key),P)O.call(P,te)&&!Z.hasOwnProperty(te)&&(oe[te]=P[te]);var se=arguments.length-2;if(se===1)oe.children=ne;else if(1<se){for(var ye=Array(se),Se=0;Se<se;Se++)ye[Se]=arguments[Se+2];oe.children=ye}if(_&&_.defaultProps)for(te in se=_.defaultProps,se)oe[te]===void 0&&(oe[te]=se[te]);return{$$typeof:t,type:_,key:ae,ref:de,props:oe,_owner:H.current}}function L(_,P){return{$$typeof:t,type:_.type,key:P,ref:_.ref,props:_.props,_owner:_._owner}}function A(_){return typeof _=="object"&&_!==null&&_.$$typeof===t}function V(_){var P={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(ne){return P[ne]})}var I=/\/+/g;function Q(_,P){return typeof _=="object"&&_!==null&&_.key!=null?V(""+_.key):P.toString(36)}function S(_,P,ne,te,oe){var ae=typeof _;(ae==="undefined"||ae==="boolean")&&(_=null);var de=!1;if(_===null)de=!0;else switch(ae){case"string":case"number":de=!0;break;case"object":switch(_.$$typeof){case t:case r:de=!0}}if(de)return de=_,oe=oe(de),_=te===""?"."+Q(de,0):te,R(oe)?(ne="",_!=null&&(ne=_.replace(I,"$&/")+"/"),S(oe,P,ne,"",function(Se){return Se})):oe!=null&&(A(oe)&&(oe=L(oe,ne+(!oe.key||de&&de.key===oe.key?"":(""+oe.key).replace(I,"$&/")+"/")+_)),P.push(oe)),1;if(de=0,te=te===""?".":te+":",R(_))for(var se=0;se<_.length;se++){ae=_[se];var ye=te+Q(ae,se);de+=S(ae,P,ne,ye,oe)}else if(ye=x(_),typeof ye=="function")for(_=ye.call(_),se=0;!(ae=_.next()).done;)ae=ae.value,ye=te+Q(ae,se++),de+=S(ae,P,ne,ye,oe);else if(ae==="object")throw P=String(_),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return de}function X(_,P,ne){if(_==null)return _;var te=[],oe=0;return S(_,te,"","",function(ae){return P.call(ne,ae,oe++)}),te}function j(_){if(_._status===-1){var P=_._result;P=P(),P.then(function(ne){(_._status===0||_._status===-1)&&(_._status=1,_._result=ne)},function(ne){(_._status===0||_._status===-1)&&(_._status=2,_._result=ne)}),_._status===-1&&(_._status=0,_._result=P)}if(_._status===1)return _._result.default;throw _._result}var q={current:null},F={transition:null},M={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:F,ReactCurrentOwner:H};function B(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:X,forEach:function(_,P,ne){X(_,function(){P.apply(this,arguments)},ne)},count:function(_){var P=0;return X(_,function(){P++}),P},toArray:function(_){return X(_,function(P){return P})||[]},only:function(_){if(!A(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},Ne.Component=z,Ne.Fragment=i,Ne.Profiler=a,Ne.PureComponent=T,Ne.StrictMode=l,Ne.Suspense=p,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,Ne.act=B,Ne.cloneElement=function(_,P,ne){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var te=C({},_.props),oe=_.key,ae=_.ref,de=_._owner;if(P!=null){if(P.ref!==void 0&&(ae=P.ref,de=H.current),P.key!==void 0&&(oe=""+P.key),_.type&&_.type.defaultProps)var se=_.type.defaultProps;for(ye in P)O.call(P,ye)&&!Z.hasOwnProperty(ye)&&(te[ye]=P[ye]===void 0&&se!==void 0?se[ye]:P[ye])}var ye=arguments.length-2;if(ye===1)te.children=ne;else if(1<ye){se=Array(ye);for(var Se=0;Se<ye;Se++)se[Se]=arguments[Se+2];te.children=se}return{$$typeof:t,type:_.type,key:oe,ref:ae,props:te,_owner:de}},Ne.createContext=function(_){return _={$$typeof:d,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:c,_context:_},_.Consumer=_},Ne.createElement=Y,Ne.createFactory=function(_){var P=Y.bind(null,_);return P.type=_,P},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(_){return{$$typeof:f,render:_}},Ne.isValidElement=A,Ne.lazy=function(_){return{$$typeof:y,_payload:{_status:-1,_result:_},_init:j}},Ne.memo=function(_,P){return{$$typeof:m,type:_,compare:P===void 0?null:P}},Ne.startTransition=function(_){var P=F.transition;F.transition={};try{_()}finally{F.transition=P}},Ne.unstable_act=B,Ne.useCallback=function(_,P){return q.current.useCallback(_,P)},Ne.useContext=function(_){return q.current.useContext(_)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(_){return q.current.useDeferredValue(_)},Ne.useEffect=function(_,P){return q.current.useEffect(_,P)},Ne.useId=function(){return q.current.useId()},Ne.useImperativeHandle=function(_,P,ne){return q.current.useImperativeHandle(_,P,ne)},Ne.useInsertionEffect=function(_,P){return q.current.useInsertionEffect(_,P)},Ne.useLayoutEffect=function(_,P){return q.current.useLayoutEffect(_,P)},Ne.useMemo=function(_,P){return q.current.useMemo(_,P)},Ne.useReducer=function(_,P,ne){return q.current.useReducer(_,P,ne)},Ne.useRef=function(_){return q.current.useRef(_)},Ne.useState=function(_){return q.current.useState(_)},Ne.useSyncExternalStore=function(_,P,ne){return q.current.useSyncExternalStore(_,P,ne)},Ne.useTransition=function(){return q.current.useTransition()},Ne.version="18.3.1",Ne}var a0;function Zi(){return a0||(a0=1,kc.exports=sy()),kc.exports}var c0;function ay(){if(c0)return $i;c0=1;var t=Zi(),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(f,p,m){var y,v={},x=null,w=null;m!==void 0&&(x=""+m),p.key!==void 0&&(x=""+p.key),p.ref!==void 0&&(w=p.ref);for(y in p)l.call(p,y)&&!c.hasOwnProperty(y)&&(v[y]=p[y]);if(f&&f.defaultProps)for(y in p=f.defaultProps,p)v[y]===void 0&&(v[y]=p[y]);return{$$typeof:r,type:f,key:x,ref:w,props:v,_owner:a.current}}return $i.Fragment=i,$i.jsx=d,$i.jsxs=d,$i}var u0;function cy(){return u0||(u0=1,Sc.exports=ay()),Sc.exports}var g=cy(),N=Zi();const ee=cu(N);var is={},Ec={exports:{}},Lt={},Cc={exports:{}},Nc={};var d0;function uy(){return d0||(d0=1,(function(t){function r(F,M){var B=F.length;F.push(M);e:for(;0<B;){var _=B-1>>>1,P=F[_];if(0<a(P,M))F[_]=M,F[B]=P,B=_;else break e}}function i(F){return F.length===0?null:F[0]}function l(F){if(F.length===0)return null;var M=F[0],B=F.pop();if(B!==M){F[0]=B;e:for(var _=0,P=F.length,ne=P>>>1;_<ne;){var te=2*(_+1)-1,oe=F[te],ae=te+1,de=F[ae];if(0>a(oe,B))ae<P&&0>a(de,oe)?(F[_]=de,F[ae]=B,_=ae):(F[_]=oe,F[te]=B,_=te);else if(ae<P&&0>a(de,B))F[_]=de,F[ae]=B,_=ae;else break e}}return M}function a(F,M){var B=F.sortIndex-M.sortIndex;return B!==0?B:F.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var p=[],m=[],y=1,v=null,x=3,w=!1,C=!1,k=!1,z=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(F){for(var M=i(m);M!==null;){if(M.callback===null)l(m);else if(M.startTime<=F)l(m),M.sortIndex=M.expirationTime,r(p,M);else break;M=i(m)}}function R(F){if(k=!1,U(F),!C)if(i(p)!==null)C=!0,j(O);else{var M=i(m);M!==null&&q(R,M.startTime-F)}}function O(F,M){C=!1,k&&(k=!1,E(Y),Y=-1),w=!0;var B=x;try{for(U(M),v=i(p);v!==null&&(!(v.expirationTime>M)||F&&!V());){var _=v.callback;if(typeof _=="function"){v.callback=null,x=v.priorityLevel;var P=_(v.expirationTime<=M);M=t.unstable_now(),typeof P=="function"?v.callback=P:v===i(p)&&l(p),U(M)}else l(p);v=i(p)}if(v!==null)var ne=!0;else{var te=i(m);te!==null&&q(R,te.startTime-M),ne=!1}return ne}finally{v=null,x=B,w=!1}}var H=!1,Z=null,Y=-1,L=5,A=-1;function V(){return!(t.unstable_now()-A<L)}function I(){if(Z!==null){var F=t.unstable_now();A=F;var M=!0;try{M=Z(!0,F)}finally{M?Q():(H=!1,Z=null)}}else H=!1}var Q;if(typeof T=="function")Q=function(){T(I)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,X=S.port2;S.port1.onmessage=I,Q=function(){X.postMessage(null)}}else Q=function(){z(I,0)};function j(F){Z=F,H||(H=!0,Q())}function q(F,M){Y=z(function(){F(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){C||w||(C=!0,j(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return i(p)},t.unstable_next=function(F){switch(x){case 1:case 2:case 3:var M=3;break;default:M=x}var B=x;x=M;try{return F()}finally{x=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,M){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var B=x;x=F;try{return M()}finally{x=B}},t.unstable_scheduleCallback=function(F,M,B){var _=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?_+B:_):B=_,F){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=B+P,F={id:y++,callback:M,priorityLevel:F,startTime:B,expirationTime:P,sortIndex:-1},B>_?(F.sortIndex=B,r(m,F),i(p)===null&&F===i(m)&&(k?(E(Y),Y=-1):k=!0,q(R,B-_))):(F.sortIndex=P,r(p,F),C||w||(C=!0,j(O))),F},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(F){var M=x;return function(){var B=x;x=M;try{return F.apply(this,arguments)}finally{x=B}}}})(Nc)),Nc}var f0;function dy(){return f0||(f0=1,Cc.exports=uy()),Cc.exports}var h0;function fy(){if(h0)return Lt;h0=1;var t=Zi(),r=dy();function i(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,a={};function c(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(a[e]=n,e=0;e<n.length;e++)l.add(n[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function x(e){return p.call(v,e)?!0:p.call(y,e)?!1:m.test(e)?v[e]=!0:(y[e]=!0,!1)}function w(e,n,o,s){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,n,o,s){if(n===null||typeof n>"u"||w(e,n,o,s))return!0;if(s)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function k(e,n,o,s,u,h,b){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=o,this.propertyName=e,this.type=n,this.sanitizeURL=h,this.removeEmptyString=b}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new k(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];z[n]=new k(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new k(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new k(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new k(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){z[e]=new k(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){z[e]=new k(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){z[e]=new k(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){z[e]=new k(e,5,!1,e.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(E,T);z[n]=new k(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(E,T);z[n]=new k(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(E,T);z[n]=new k(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){z[e]=new k(e,1,!1,e.toLowerCase(),null,!1,!1)}),z.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){z[e]=new k(e,1,!1,e.toLowerCase(),null,!0,!0)});function U(e,n,o,s){var u=z.hasOwnProperty(n)?z[n]:null;(u!==null?u.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(C(n,o,u,s)&&(o=null),s||u===null?x(n)&&(o===null?e.removeAttribute(n):e.setAttribute(n,""+o)):u.mustUseProperty?e[u.propertyName]=o===null?u.type===3?!1:"":o:(n=u.attributeName,s=u.attributeNamespace,o===null?e.removeAttribute(n):(u=u.type,o=u===3||u===4&&o===!0?"":""+o,s?e.setAttributeNS(s,n,o):e.setAttribute(n,o))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),H=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),V=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),F=Symbol.iterator;function M(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var B=Object.assign,_;function P(e){if(_===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);_=n&&n[1]||""}return`
`+_+e}var ne=!1;function te(e,n){if(!e||ne)return"";ne=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(J){var s=J}Reflect.construct(e,[],n)}else{try{n.call()}catch(J){s=J}e.call(n.prototype)}else{try{throw Error()}catch(J){s=J}e()}}catch(J){if(J&&s&&typeof J.stack=="string"){for(var u=J.stack.split(`
`),h=s.stack.split(`
`),b=u.length-1,$=h.length-1;1<=b&&0<=$&&u[b]!==h[$];)$--;for(;1<=b&&0<=$;b--,$--)if(u[b]!==h[$]){if(b!==1||$!==1)do if(b--,$--,0>$||u[b]!==h[$]){var D=`
`+u[b].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=b&&0<=$);break}}}finally{ne=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?P(e):""}function oe(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=te(e.type,!1),e;case 11:return e=te(e.type.render,!1),e;case 1:return e=te(e.type,!0),e;default:return""}}function ae(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case H:return"Portal";case L:return"Profiler";case Y:return"StrictMode";case Q:return"Suspense";case S:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return n=e.displayName||null,n!==null?n:ae(e.type)||"Memo";case j:n=e._payload,e=e._init;try{return ae(e(n))}catch{}}return null}function de(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(n);case 8:return n===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ye(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Se(e){var n=ye(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,h=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(b){s=""+b,h.call(this,b)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(b){s=""+b},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function je(e){e._valueTracker||(e._valueTracker=Se(e))}function Ae(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),s="";return e&&(s=ye(e)?e.checked?"true":"false":e.value),e=s,e!==o?(n.setValue(e),!0):!1}function Oe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function He(e,n){var o=n.checked;return B({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function Me(e,n){var o=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;o=se(n.value!=null?n.value:o),e._wrapperState={initialChecked:s,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Pe(e,n){n=n.checked,n!=null&&U(e,"checked",n,!1)}function Ce(e,n){Pe(e,n);var o=se(n.value),s=n.type;if(o!=null)s==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?_e(e,n.type,o):n.hasOwnProperty("defaultValue")&&_e(e,n.type,se(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function ue(e,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,o||n===e.value||(e.value=n),e.defaultValue=n}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function _e(e,n,o){(n!=="number"||Oe(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var Qe=Array.isArray;function pt(e,n,o,s){if(e=e.options,n){n={};for(var u=0;u<o.length;u++)n["$"+o[u]]=!0;for(o=0;o<e.length;o++)u=n.hasOwnProperty("$"+e[o].value),e[o].selected!==u&&(e[o].selected=u),u&&s&&(e[o].defaultSelected=!0)}else{for(o=""+se(o),n=null,u=0;u<e.length;u++){if(e[u].value===o){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function zt(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(i(91));return B({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _t(e,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(i(92));if(Qe(o)){if(1<o.length)throw Error(i(93));o=o[0]}n=o}n==null&&(n=""),o=n}e._wrapperState={initialValue:se(o)}}function lt(e,n){var o=se(n.value),s=se(n.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),n.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),s!=null&&(e.defaultValue=""+s)}function nt(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function st(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qe(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?st(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rt,kt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,s,u){MSApp.execUnsafeLocalFunction(function(){return e(n,o,s,u)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(rt=rt||document.createElement("div"),rt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=rt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Ot(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var Ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jt=["Webkit","ms","Moz","O"];Object.keys(Ue).forEach(function(e){jt.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Ue[n]=Ue[e]})});function Kt(e,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||Ue.hasOwnProperty(e)&&Ue[e]?(""+n).trim():n+"px"}function Gt(e,n){e=e.style;for(var o in n)if(n.hasOwnProperty(o)){var s=o.indexOf("--")===0,u=Kt(o,n[o],s);o==="float"&&(o="cssFloat"),s?e.setProperty(o,u):e[o]=u}}var En=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xt(e,n){if(n){if(En[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(i(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(i(61))}if(n.style!=null&&typeof n.style!="object")throw Error(i(62))}}function Ht(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pn=null;function Cn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cn=null,Qt=null,un=null;function Jt(e){if(e=mi(e)){if(typeof cn!="function")throw Error(i(280));var n=e.stateNode;n&&(n=wl(n),cn(e.stateNode,e.type,n))}}function dn(e){Qt?un?un.push(e):un=[e]:Qt=e}function Gr(){if(Qt){var e=Qt,n=un;if(un=Qt=null,Jt(e),n)for(e=0;e<n.length;e++)Jt(n[e])}}function Qr(e,n){return e(n)}function Jr(){}var Nr=!1;function eo(e,n,o){if(Nr)return e(n,o);Nr=!0;try{return Qr(e,n,o)}finally{Nr=!1,(Qt!==null||un!==null)&&(Jr(),Gr())}}function Mn(e,n){var o=e.stateNode;if(o===null)return null;var s=wl(o);if(s===null)return null;o=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(i(231,n,typeof o));return o}var zr=!1;if(f)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){zr=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{zr=!1}function qo(e,n,o,s,u,h,b,$,D){var J=Array.prototype.slice.call(arguments,3);try{n.apply(o,J)}catch(ie){this.onError(ie)}}var An=!1,In=null,Qn=!1,_r=null,jr={onError:function(e){An=!0,In=e}};function to(e,n,o,s,u,h,b,$,D){An=!1,In=null,qo.apply(jr,arguments)}function no(e,n,o,s,u,h,b,$,D){if(to.apply(this,arguments),An){if(An){var J=In;An=!1,In=null}else throw Error(i(198));Qn||(Qn=!0,_r=J)}}function fn(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function ro(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Re(e){if(fn(e)!==e)throw Error(i(188))}function Ee(e){var n=e.alternate;if(!n){if(n=fn(e),n===null)throw Error(i(188));return n!==e?null:e}for(var o=e,s=n;;){var u=o.return;if(u===null)break;var h=u.alternate;if(h===null){if(s=u.return,s!==null){o=s;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===o)return Re(u),e;if(h===s)return Re(u),n;h=h.sibling}throw Error(i(188))}if(o.return!==s.return)o=u,s=h;else{for(var b=!1,$=u.child;$;){if($===o){b=!0,o=u,s=h;break}if($===s){b=!0,s=u,o=h;break}$=$.sibling}if(!b){for($=h.child;$;){if($===o){b=!0,o=h,s=u;break}if($===s){b=!0,s=h,o=u;break}$=$.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==s)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?e:n}function Et(e){return e=Ee(e),e!==null?Je(e):null}function Je(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Je(e);if(n!==null)return n;e=e.sibling}return null}var Ft=r.unstable_scheduleCallback,Rr=r.unstable_cancelCallback,$r=r.unstable_shouldYield,Zo=r.unstable_requestPaint,We=r.unstable_now,Vs=r.unstable_getCurrentPriorityLevel,Ko=r.unstable_ImmediatePriority,Ji=r.unstable_UserBlockingPriority,oo=r.unstable_NormalPriority,el=r.unstable_LowPriority,tl=r.unstable_IdlePriority,io=null,en=null;function Go(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(io,e,void 0,(e.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Cg,kg=Math.log,Eg=Math.LN2;function Cg(e){return e>>>=0,e===0?32:31-(kg(e)/Eg|0)|0}var nl=64,rl=4194304;function Qo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ol(e,n){var o=e.pendingLanes;if(o===0)return 0;var s=0,u=e.suspendedLanes,h=e.pingedLanes,b=o&268435455;if(b!==0){var $=b&~u;$!==0?s=Qo($):(h&=b,h!==0&&(s=Qo(h)))}else b=o&~u,b!==0?s=Qo(b):h!==0&&(s=Qo(h));if(s===0)return 0;if(n!==0&&n!==s&&(n&u)===0&&(u=s&-s,h=n&-n,u>=h||u===16&&(h&4194240)!==0))return n;if((s&4)!==0&&(s|=o&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=s;0<n;)o=31-hn(n),u=1<<o,s|=e[o],n&=~u;return s}function Ng(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zg(e,n){for(var o=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes;0<h;){var b=31-hn(h),$=1<<b,D=u[b];D===-1?(($&o)===0||($&s)!==0)&&(u[b]=Ng($,n)):D<=n&&(e.expiredLanes|=$),h&=~$}}function Us(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Iu(){var e=nl;return nl<<=1,(nl&4194240)===0&&(nl=64),e}function Bs(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function Jo(e,n,o){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-hn(n),e[n]=o}function _g(e,n){var o=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<o;){var u=31-hn(o),h=1<<u;n[u]=0,s[u]=-1,e[u]=-1,o&=~h}}function Ws(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var s=31-hn(o),u=1<<s;u&n|e[s]&n&&(e[s]|=n),o&=~u}}var Le=0;function Du(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ou,Xs,Hu,Fu,Vu,Ys=!1,il=[],Jn=null,er=null,tr=null,ei=new Map,ti=new Map,nr=[],jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uu(e,n){switch(e){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":ei.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(n.pointerId)}}function ni(e,n,o,s,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:o,eventSystemFlags:s,nativeEvent:h,targetContainers:[u]},n!==null&&(n=mi(n),n!==null&&Xs(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function Rg(e,n,o,s,u){switch(n){case"focusin":return Jn=ni(Jn,e,n,o,s,u),!0;case"dragenter":return er=ni(er,e,n,o,s,u),!0;case"mouseover":return tr=ni(tr,e,n,o,s,u),!0;case"pointerover":var h=u.pointerId;return ei.set(h,ni(ei.get(h)||null,e,n,o,s,u)),!0;case"gotpointercapture":return h=u.pointerId,ti.set(h,ni(ti.get(h)||null,e,n,o,s,u)),!0}return!1}function Bu(e){var n=Tr(e.target);if(n!==null){var o=fn(n);if(o!==null){if(n=o.tag,n===13){if(n=ro(o),n!==null){e.blockedOn=n,Vu(e.priority,function(){Hu(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ll(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=Zs(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var s=new o.constructor(o.type,o);Pn=s,o.target.dispatchEvent(s),Pn=null}else return n=mi(o),n!==null&&Xs(n),e.blockedOn=o,!1;n.shift()}return!0}function Wu(e,n,o){ll(e)&&o.delete(n)}function $g(){Ys=!1,Jn!==null&&ll(Jn)&&(Jn=null),er!==null&&ll(er)&&(er=null),tr!==null&&ll(tr)&&(tr=null),ei.forEach(Wu),ti.forEach(Wu)}function ri(e,n){e.blockedOn===n&&(e.blockedOn=null,Ys||(Ys=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,$g)))}function oi(e){function n(u){return ri(u,e)}if(0<il.length){ri(il[0],e);for(var o=1;o<il.length;o++){var s=il[o];s.blockedOn===e&&(s.blockedOn=null)}}for(Jn!==null&&ri(Jn,e),er!==null&&ri(er,e),tr!==null&&ri(tr,e),ei.forEach(n),ti.forEach(n),o=0;o<nr.length;o++)s=nr[o],s.blockedOn===e&&(s.blockedOn=null);for(;0<nr.length&&(o=nr[0],o.blockedOn===null);)Bu(o),o.blockedOn===null&&nr.shift()}var lo=R.ReactCurrentBatchConfig,sl=!0;function Tg(e,n,o,s){var u=Le,h=lo.transition;lo.transition=null;try{Le=1,qs(e,n,o,s)}finally{Le=u,lo.transition=h}}function Pg(e,n,o,s){var u=Le,h=lo.transition;lo.transition=null;try{Le=4,qs(e,n,o,s)}finally{Le=u,lo.transition=h}}function qs(e,n,o,s){if(sl){var u=Zs(e,n,o,s);if(u===null)fa(e,n,s,al,o),Uu(e,s);else if(Rg(u,e,n,o,s))s.stopPropagation();else if(Uu(e,s),n&4&&-1<jg.indexOf(e)){for(;u!==null;){var h=mi(u);if(h!==null&&Ou(h),h=Zs(e,n,o,s),h===null&&fa(e,n,s,al,o),h===u)break;u=h}u!==null&&s.stopPropagation()}else fa(e,n,s,null,o)}}var al=null;function Zs(e,n,o,s){if(al=null,e=Cn(s),e=Tr(e),e!==null)if(n=fn(e),n===null)e=null;else if(o=n.tag,o===13){if(e=ro(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return al=e,null}function Xu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vs()){case Ko:return 1;case Ji:return 4;case oo:case el:return 16;case tl:return 536870912;default:return 16}default:return 16}}var rr=null,Ks=null,cl=null;function Yu(){if(cl)return cl;var e,n=Ks,o=n.length,s,u="value"in rr?rr.value:rr.textContent,h=u.length;for(e=0;e<o&&n[e]===u[e];e++);var b=o-e;for(s=1;s<=b&&n[o-s]===u[h-s];s++);return cl=u.slice(e,1<s?1-s:void 0)}function ul(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function dl(){return!0}function qu(){return!1}function Vt(e){function n(o,s,u,h,b){this._reactName=o,this._targetInst=u,this.type=s,this.nativeEvent=h,this.target=b,this.currentTarget=null;for(var $ in e)e.hasOwnProperty($)&&(o=e[$],this[$]=o?o(h):h[$]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?dl:qu,this.isPropagationStopped=qu,this}return B(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),n}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=Vt(so),ii=B({},so,{view:0,detail:0}),Mg=Vt(ii),Qs,Js,li,fl=B({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==li&&(li&&e.type==="mousemove"?(Qs=e.screenX-li.screenX,Js=e.screenY-li.screenY):Js=Qs=0,li=e),Qs)},movementY:function(e){return"movementY"in e?e.movementY:Js}}),Zu=Vt(fl),Lg=B({},fl,{dataTransfer:0}),Ag=Vt(Lg),Ig=B({},ii,{relatedTarget:0}),ea=Vt(Ig),Dg=B({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),Og=Vt(Dg),Hg=B({},so,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fg=Vt(Hg),Vg=B({},so,{data:0}),Ku=Vt(Vg),Ug={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Wg[e])?!!n[e]:!1}function ta(){return Xg}var Yg=B({},ii,{key:function(e){if(e.key){var n=Ug[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ul(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(e){return e.type==="keypress"?ul(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ul(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qg=Vt(Yg),Zg=B({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=Vt(Zg),Kg=B({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),Gg=Vt(Kg),Qg=B({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jg=Vt(Qg),em=B({},fl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tm=Vt(em),nm=[9,13,27,32],na=f&&"CompositionEvent"in window,si=null;f&&"documentMode"in document&&(si=document.documentMode);var rm=f&&"TextEvent"in window&&!si,Qu=f&&(!na||si&&8<si&&11>=si),Ju=" ",ed=!1;function td(e,n){switch(e){case"keyup":return nm.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ao=!1;function om(e,n){switch(e){case"compositionend":return nd(n);case"keypress":return n.which!==32?null:(ed=!0,Ju);case"textInput":return e=n.data,e===Ju&&ed?null:e;default:return null}}function im(e,n){if(ao)return e==="compositionend"||!na&&td(e,n)?(e=Yu(),cl=Ks=rr=null,ao=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Qu&&n.locale!=="ko"?null:n.data;default:return null}}var lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!lm[e.type]:n==="textarea"}function od(e,n,o,s){dn(s),n=yl(n,"onChange"),0<n.length&&(o=new Gs("onChange","change",null,o,s),e.push({event:o,listeners:n}))}var ai=null,ci=null;function sm(e){Sd(e,0)}function hl(e){var n=po(e);if(Ae(n))return e}function am(e,n){if(e==="change")return n}var id=!1;if(f){var ra;if(f){var oa="oninput"in document;if(!oa){var ld=document.createElement("div");ld.setAttribute("oninput","return;"),oa=typeof ld.oninput=="function"}ra=oa}else ra=!1;id=ra&&(!document.documentMode||9<document.documentMode)}function sd(){ai&&(ai.detachEvent("onpropertychange",ad),ci=ai=null)}function ad(e){if(e.propertyName==="value"&&hl(ci)){var n=[];od(n,ci,e,Cn(e)),eo(sm,n)}}function cm(e,n,o){e==="focusin"?(sd(),ai=n,ci=o,ai.attachEvent("onpropertychange",ad)):e==="focusout"&&sd()}function um(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hl(ci)}function dm(e,n){if(e==="click")return hl(n)}function fm(e,n){if(e==="input"||e==="change")return hl(n)}function hm(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var pn=typeof Object.is=="function"?Object.is:hm;function ui(e,n){if(pn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),s=Object.keys(n);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var u=o[s];if(!p.call(n,u)||!pn(e[u],n[u]))return!1}return!0}function cd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ud(e,n){var o=cd(e);e=0;for(var s;o;){if(o.nodeType===3){if(s=e+o.textContent.length,e<=n&&s>=n)return{node:o,offset:n-e};e=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=cd(o)}}function dd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?dd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function fd(){for(var e=window,n=Oe();n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=Oe(e.document)}return n}function ia(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function pm(e){var n=fd(),o=e.focusedElem,s=e.selectionRange;if(n!==o&&o&&o.ownerDocument&&dd(o.ownerDocument.documentElement,o)){if(s!==null&&ia(o)){if(n=s.start,e=s.end,e===void 0&&(e=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(e,o.value.length);else if(e=(n=o.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var u=o.textContent.length,h=Math.min(s.start,u);s=s.end===void 0?h:Math.min(s.end,u),!e.extend&&h>s&&(u=s,s=h,h=u),u=ud(o,h);var b=ud(o,s);u&&b&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==b.node||e.focusOffset!==b.offset)&&(n=n.createRange(),n.setStart(u.node,u.offset),e.removeAllRanges(),h>s?(e.addRange(n),e.extend(b.node,b.offset)):(n.setEnd(b.node,b.offset),e.addRange(n)))}}for(n=[],e=o;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)e=n[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gm=f&&"documentMode"in document&&11>=document.documentMode,co=null,la=null,di=null,sa=!1;function hd(e,n,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;sa||co==null||co!==Oe(s)||(s=co,"selectionStart"in s&&ia(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),di&&ui(di,s)||(di=s,s=yl(la,"onSelect"),0<s.length&&(n=new Gs("onSelect","select",null,n,o),e.push({event:n,listeners:s}),n.target=co)))}function pl(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var uo={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},aa={},pd={};f&&(pd=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function gl(e){if(aa[e])return aa[e];if(!uo[e])return e;var n=uo[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in pd)return aa[e]=n[o];return e}var gd=gl("animationend"),md=gl("animationiteration"),yd=gl("animationstart"),xd=gl("transitionend"),vd=new Map,wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(e,n){vd.set(e,n),c(n,[e])}for(var ca=0;ca<wd.length;ca++){var ua=wd[ca],mm=ua.toLowerCase(),ym=ua[0].toUpperCase()+ua.slice(1);or(mm,"on"+ym)}or(gd,"onAnimationEnd"),or(md,"onAnimationIteration"),or(yd,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(xd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xm=new Set("cancel close invalid load scroll toggle".split(" ").concat(fi));function bd(e,n,o){var s=e.type||"unknown-event";e.currentTarget=o,no(s,n,void 0,e),e.currentTarget=null}function Sd(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var s=e[o],u=s.event;s=s.listeners;e:{var h=void 0;if(n)for(var b=s.length-1;0<=b;b--){var $=s[b],D=$.instance,J=$.currentTarget;if($=$.listener,D!==h&&u.isPropagationStopped())break e;bd(u,$,J),h=D}else for(b=0;b<s.length;b++){if($=s[b],D=$.instance,J=$.currentTarget,$=$.listener,D!==h&&u.isPropagationStopped())break e;bd(u,$,J),h=D}}}if(Qn)throw e=_r,Qn=!1,_r=null,e}function Fe(e,n){var o=n[xa];o===void 0&&(o=n[xa]=new Set);var s=e+"__bubble";o.has(s)||(kd(n,e,2,!1),o.add(s))}function da(e,n,o){var s=0;n&&(s|=4),kd(o,e,s,n)}var ml="_reactListening"+Math.random().toString(36).slice(2);function hi(e){if(!e[ml]){e[ml]=!0,l.forEach(function(o){o!=="selectionchange"&&(xm.has(o)||da(o,!1,e),da(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ml]||(n[ml]=!0,da("selectionchange",!1,n))}}function kd(e,n,o,s){switch(Xu(n)){case 1:var u=Tg;break;case 4:u=Pg;break;default:u=qs}o=u.bind(null,n,o,e),u=void 0,!zr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(n,o,{capture:!0,passive:u}):e.addEventListener(n,o,!0):u!==void 0?e.addEventListener(n,o,{passive:u}):e.addEventListener(n,o,!1)}function fa(e,n,o,s,u){var h=s;if((n&1)===0&&(n&2)===0&&s!==null)e:for(;;){if(s===null)return;var b=s.tag;if(b===3||b===4){var $=s.stateNode.containerInfo;if($===u||$.nodeType===8&&$.parentNode===u)break;if(b===4)for(b=s.return;b!==null;){var D=b.tag;if((D===3||D===4)&&(D=b.stateNode.containerInfo,D===u||D.nodeType===8&&D.parentNode===u))return;b=b.return}for(;$!==null;){if(b=Tr($),b===null)return;if(D=b.tag,D===5||D===6){s=h=b;continue e}$=$.parentNode}}s=s.return}eo(function(){var J=h,ie=Cn(o),le=[];e:{var re=vd.get(e);if(re!==void 0){var fe=Gs,ge=e;switch(e){case"keypress":if(ul(o)===0)break e;case"keydown":case"keyup":fe=qg;break;case"focusin":ge="focus",fe=ea;break;case"focusout":ge="blur",fe=ea;break;case"beforeblur":case"afterblur":fe=ea;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Gg;break;case gd:case md:case yd:fe=Og;break;case xd:fe=Jg;break;case"scroll":fe=Mg;break;case"wheel":fe=tm;break;case"copy":case"cut":case"paste":fe=Fg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Gu}var xe=(n&4)!==0,Ge=!xe&&e==="scroll",K=xe?re!==null?re+"Capture":null:re;xe=[];for(var W=J,G;W!==null;){G=W;var ce=G.stateNode;if(G.tag===5&&ce!==null&&(G=ce,K!==null&&(ce=Mn(W,K),ce!=null&&xe.push(pi(W,ce,G)))),Ge)break;W=W.return}0<xe.length&&(re=new fe(re,ge,null,o,ie),le.push({event:re,listeners:xe}))}}if((n&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",re&&o!==Pn&&(ge=o.relatedTarget||o.fromElement)&&(Tr(ge)||ge[Dn]))break e;if((fe||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,fe?(ge=o.relatedTarget||o.toElement,fe=J,ge=ge?Tr(ge):null,ge!==null&&(Ge=fn(ge),ge!==Ge||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=J),fe!==ge)){if(xe=Zu,ce="onMouseLeave",K="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(xe=Gu,ce="onPointerLeave",K="onPointerEnter",W="pointer"),Ge=fe==null?re:po(fe),G=ge==null?re:po(ge),re=new xe(ce,W+"leave",fe,o,ie),re.target=Ge,re.relatedTarget=G,ce=null,Tr(ie)===J&&(xe=new xe(K,W+"enter",ge,o,ie),xe.target=G,xe.relatedTarget=Ge,ce=xe),Ge=ce,fe&&ge)t:{for(xe=fe,K=ge,W=0,G=xe;G;G=fo(G))W++;for(G=0,ce=K;ce;ce=fo(ce))G++;for(;0<W-G;)xe=fo(xe),W--;for(;0<G-W;)K=fo(K),G--;for(;W--;){if(xe===K||K!==null&&xe===K.alternate)break t;xe=fo(xe),K=fo(K)}xe=null}else xe=null;fe!==null&&Ed(le,re,fe,xe,!1),ge!==null&&Ge!==null&&Ed(le,Ge,ge,xe,!0)}}e:{if(re=J?po(J):window,fe=re.nodeName&&re.nodeName.toLowerCase(),fe==="select"||fe==="input"&&re.type==="file")var ve=am;else if(rd(re))if(id)ve=fm;else{ve=um;var we=cm}else(fe=re.nodeName)&&fe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(ve=dm);if(ve&&(ve=ve(e,J))){od(le,ve,o,ie);break e}we&&we(e,re,J),e==="focusout"&&(we=re._wrapperState)&&we.controlled&&re.type==="number"&&_e(re,"number",re.value)}switch(we=J?po(J):window,e){case"focusin":(rd(we)||we.contentEditable==="true")&&(co=we,la=J,di=null);break;case"focusout":di=la=co=null;break;case"mousedown":sa=!0;break;case"contextmenu":case"mouseup":case"dragend":sa=!1,hd(le,o,ie);break;case"selectionchange":if(gm)break;case"keydown":case"keyup":hd(le,o,ie)}var be;if(na)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else ao?td(e,o)&&(ke="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(Qu&&o.locale!=="ko"&&(ao||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&ao&&(be=Yu()):(rr=ie,Ks="value"in rr?rr.value:rr.textContent,ao=!0)),we=yl(J,ke),0<we.length&&(ke=new Ku(ke,e,null,o,ie),le.push({event:ke,listeners:we}),be?ke.data=be:(be=nd(o),be!==null&&(ke.data=be)))),(be=rm?om(e,o):im(e,o))&&(J=yl(J,"onBeforeInput"),0<J.length&&(ie=new Ku("onBeforeInput","beforeinput",null,o,ie),le.push({event:ie,listeners:J}),ie.data=be))}Sd(le,n)})}function pi(e,n,o){return{instance:e,listener:n,currentTarget:o}}function yl(e,n){for(var o=n+"Capture",s=[];e!==null;){var u=e,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=Mn(e,o),h!=null&&s.unshift(pi(e,h,u)),h=Mn(e,n),h!=null&&s.push(pi(e,h,u))),e=e.return}return s}function fo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ed(e,n,o,s,u){for(var h=n._reactName,b=[];o!==null&&o!==s;){var $=o,D=$.alternate,J=$.stateNode;if(D!==null&&D===s)break;$.tag===5&&J!==null&&($=J,u?(D=Mn(o,h),D!=null&&b.unshift(pi(o,D,$))):u||(D=Mn(o,h),D!=null&&b.push(pi(o,D,$)))),o=o.return}b.length!==0&&e.push({event:n,listeners:b})}var vm=/\r\n?/g,wm=/\u0000|\uFFFD/g;function Cd(e){return(typeof e=="string"?e:""+e).replace(vm,`
`).replace(wm,"")}function xl(e,n,o){if(n=Cd(n),Cd(e)!==n&&o)throw Error(i(425))}function vl(){}var ha=null,pa=null;function ga(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ma=typeof setTimeout=="function"?setTimeout:void 0,bm=typeof clearTimeout=="function"?clearTimeout:void 0,Nd=typeof Promise=="function"?Promise:void 0,Sm=typeof queueMicrotask=="function"?queueMicrotask:typeof Nd<"u"?function(e){return Nd.resolve(null).then(e).catch(km)}:ma;function km(e){setTimeout(function(){throw e})}function ya(e,n){var o=n,s=0;do{var u=o.nextSibling;if(e.removeChild(o),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0){e.removeChild(u),oi(n);return}s--}else o!=="$"&&o!=="$?"&&o!=="$!"||s++;o=u}while(o);oi(n)}function ir(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function zd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return e;n--}else o==="/$"&&n++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),Nn="__reactFiber$"+ho,gi="__reactProps$"+ho,Dn="__reactContainer$"+ho,xa="__reactEvents$"+ho,Em="__reactListeners$"+ho,Cm="__reactHandles$"+ho;function Tr(e){var n=e[Nn];if(n)return n;for(var o=e.parentNode;o;){if(n=o[Dn]||o[Nn]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=zd(e);e!==null;){if(o=e[Nn])return o;e=zd(e)}return n}e=o,o=e.parentNode}return null}function mi(e){return e=e[Nn]||e[Dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function po(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function wl(e){return e[gi]||null}var va=[],go=-1;function lr(e){return{current:e}}function Ve(e){0>go||(e.current=va[go],va[go]=null,go--)}function De(e,n){go++,va[go]=e.current,e.current=n}var sr={},vt=lr(sr),Rt=lr(!1),Pr=sr;function mo(e,n){var o=e.type.contextTypes;if(!o)return sr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in o)u[h]=n[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),u}function $t(e){return e=e.childContextTypes,e!=null}function bl(){Ve(Rt),Ve(vt)}function _d(e,n,o){if(vt.current!==sr)throw Error(i(168));De(vt,n),De(Rt,o)}function jd(e,n,o){var s=e.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return o;s=s.getChildContext();for(var u in s)if(!(u in n))throw Error(i(108,de(e)||"Unknown",u));return B({},o,s)}function Sl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sr,Pr=vt.current,De(vt,e),De(Rt,Rt.current),!0}function Rd(e,n,o){var s=e.stateNode;if(!s)throw Error(i(169));o?(e=jd(e,n,Pr),s.__reactInternalMemoizedMergedChildContext=e,Ve(Rt),Ve(vt),De(vt,e)):Ve(Rt),De(Rt,o)}var On=null,kl=!1,wa=!1;function $d(e){On===null?On=[e]:On.push(e)}function Nm(e){kl=!0,$d(e)}function ar(){if(!wa&&On!==null){wa=!0;var e=0,n=Le;try{var o=On;for(Le=1;e<o.length;e++){var s=o[e];do s=s(!0);while(s!==null)}On=null,kl=!1}catch(u){throw On!==null&&(On=On.slice(e+1)),Ft(Ko,ar),u}finally{Le=n,wa=!1}}return null}var yo=[],xo=0,El=null,Cl=0,tn=[],nn=0,Mr=null,Hn=1,Fn="";function Lr(e,n){yo[xo++]=Cl,yo[xo++]=El,El=e,Cl=n}function Td(e,n,o){tn[nn++]=Hn,tn[nn++]=Fn,tn[nn++]=Mr,Mr=e;var s=Hn;e=Fn;var u=32-hn(s)-1;s&=~(1<<u),o+=1;var h=32-hn(n)+u;if(30<h){var b=u-u%5;h=(s&(1<<b)-1).toString(32),s>>=b,u-=b,Hn=1<<32-hn(n)+u|o<<u|s,Fn=h+e}else Hn=1<<h|o<<u|s,Fn=e}function ba(e){e.return!==null&&(Lr(e,1),Td(e,1,0))}function Sa(e){for(;e===El;)El=yo[--xo],yo[xo]=null,Cl=yo[--xo],yo[xo]=null;for(;e===Mr;)Mr=tn[--nn],tn[nn]=null,Fn=tn[--nn],tn[nn]=null,Hn=tn[--nn],tn[nn]=null}var Ut=null,Bt=null,Be=!1,gn=null;function Pd(e,n){var o=sn(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=e,n=e.deletions,n===null?(e.deletions=[o],e.flags|=16):n.push(o)}function Md(e,n){switch(e.tag){case 5:var o=e.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Ut=e,Bt=ir(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Ut=e,Bt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Mr!==null?{id:Hn,overflow:Fn}:null,e.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=sn(18,null,null,0),o.stateNode=n,o.return=e,e.child=o,Ut=e,Bt=null,!0):!1;default:return!1}}function ka(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ea(e){if(Be){var n=Bt;if(n){var o=n;if(!Md(e,n)){if(ka(e))throw Error(i(418));n=ir(o.nextSibling);var s=Ut;n&&Md(e,n)?Pd(s,o):(e.flags=e.flags&-4097|2,Be=!1,Ut=e)}}else{if(ka(e))throw Error(i(418));e.flags=e.flags&-4097|2,Be=!1,Ut=e}}}function Ld(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ut=e}function Nl(e){if(e!==Ut)return!1;if(!Be)return Ld(e),Be=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!ga(e.type,e.memoizedProps)),n&&(n=Bt)){if(ka(e))throw Ad(),Error(i(418));for(;n;)Pd(e,n),n=ir(n.nextSibling)}if(Ld(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(n===0){Bt=ir(e.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}e=e.nextSibling}Bt=null}}else Bt=Ut?ir(e.stateNode.nextSibling):null;return!0}function Ad(){for(var e=Bt;e;)e=ir(e.nextSibling)}function vo(){Bt=Ut=null,Be=!1}function Ca(e){gn===null?gn=[e]:gn.push(e)}var zm=R.ReactCurrentBatchConfig;function yi(e,n,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(i(309));var s=o.stateNode}if(!s)throw Error(i(147,e));var u=s,h=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===h?n.ref:(n=function(b){var $=u.refs;b===null?delete $[h]:$[h]=b},n._stringRef=h,n)}if(typeof e!="string")throw Error(i(284));if(!o._owner)throw Error(i(290,e))}return e}function zl(e,n){throw e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Id(e){var n=e._init;return n(e._payload)}function Dd(e){function n(K,W){if(e){var G=K.deletions;G===null?(K.deletions=[W],K.flags|=16):G.push(W)}}function o(K,W){if(!e)return null;for(;W!==null;)n(K,W),W=W.sibling;return null}function s(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function u(K,W){return K=mr(K,W),K.index=0,K.sibling=null,K}function h(K,W,G){return K.index=G,e?(G=K.alternate,G!==null?(G=G.index,G<W?(K.flags|=2,W):G):(K.flags|=2,W)):(K.flags|=1048576,W)}function b(K){return e&&K.alternate===null&&(K.flags|=2),K}function $(K,W,G,ce){return W===null||W.tag!==6?(W=mc(G,K.mode,ce),W.return=K,W):(W=u(W,G),W.return=K,W)}function D(K,W,G,ce){var ve=G.type;return ve===Z?ie(K,W,G.props.children,ce,G.key):W!==null&&(W.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===j&&Id(ve)===W.type)?(ce=u(W,G.props),ce.ref=yi(K,W,G),ce.return=K,ce):(ce=Gl(G.type,G.key,G.props,null,K.mode,ce),ce.ref=yi(K,W,G),ce.return=K,ce)}function J(K,W,G,ce){return W===null||W.tag!==4||W.stateNode.containerInfo!==G.containerInfo||W.stateNode.implementation!==G.implementation?(W=yc(G,K.mode,ce),W.return=K,W):(W=u(W,G.children||[]),W.return=K,W)}function ie(K,W,G,ce,ve){return W===null||W.tag!==7?(W=Ur(G,K.mode,ce,ve),W.return=K,W):(W=u(W,G),W.return=K,W)}function le(K,W,G){if(typeof W=="string"&&W!==""||typeof W=="number")return W=mc(""+W,K.mode,G),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case O:return G=Gl(W.type,W.key,W.props,null,K.mode,G),G.ref=yi(K,null,W),G.return=K,G;case H:return W=yc(W,K.mode,G),W.return=K,W;case j:var ce=W._init;return le(K,ce(W._payload),G)}if(Qe(W)||M(W))return W=Ur(W,K.mode,G,null),W.return=K,W;zl(K,W)}return null}function re(K,W,G,ce){var ve=W!==null?W.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ve!==null?null:$(K,W,""+G,ce);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case O:return G.key===ve?D(K,W,G,ce):null;case H:return G.key===ve?J(K,W,G,ce):null;case j:return ve=G._init,re(K,W,ve(G._payload),ce)}if(Qe(G)||M(G))return ve!==null?null:ie(K,W,G,ce,null);zl(K,G)}return null}function fe(K,W,G,ce,ve){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return K=K.get(G)||null,$(W,K,""+ce,ve);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case O:return K=K.get(ce.key===null?G:ce.key)||null,D(W,K,ce,ve);case H:return K=K.get(ce.key===null?G:ce.key)||null,J(W,K,ce,ve);case j:var we=ce._init;return fe(K,W,G,we(ce._payload),ve)}if(Qe(ce)||M(ce))return K=K.get(G)||null,ie(W,K,ce,ve,null);zl(W,ce)}return null}function ge(K,W,G,ce){for(var ve=null,we=null,be=W,ke=W=0,ut=null;be!==null&&ke<G.length;ke++){be.index>ke?(ut=be,be=null):ut=be.sibling;var Te=re(K,be,G[ke],ce);if(Te===null){be===null&&(be=ut);break}e&&be&&Te.alternate===null&&n(K,be),W=h(Te,W,ke),we===null?ve=Te:we.sibling=Te,we=Te,be=ut}if(ke===G.length)return o(K,be),Be&&Lr(K,ke),ve;if(be===null){for(;ke<G.length;ke++)be=le(K,G[ke],ce),be!==null&&(W=h(be,W,ke),we===null?ve=be:we.sibling=be,we=be);return Be&&Lr(K,ke),ve}for(be=s(K,be);ke<G.length;ke++)ut=fe(be,K,ke,G[ke],ce),ut!==null&&(e&&ut.alternate!==null&&be.delete(ut.key===null?ke:ut.key),W=h(ut,W,ke),we===null?ve=ut:we.sibling=ut,we=ut);return e&&be.forEach(function(yr){return n(K,yr)}),Be&&Lr(K,ke),ve}function xe(K,W,G,ce){var ve=M(G);if(typeof ve!="function")throw Error(i(150));if(G=ve.call(G),G==null)throw Error(i(151));for(var we=ve=null,be=W,ke=W=0,ut=null,Te=G.next();be!==null&&!Te.done;ke++,Te=G.next()){be.index>ke?(ut=be,be=null):ut=be.sibling;var yr=re(K,be,Te.value,ce);if(yr===null){be===null&&(be=ut);break}e&&be&&yr.alternate===null&&n(K,be),W=h(yr,W,ke),we===null?ve=yr:we.sibling=yr,we=yr,be=ut}if(Te.done)return o(K,be),Be&&Lr(K,ke),ve;if(be===null){for(;!Te.done;ke++,Te=G.next())Te=le(K,Te.value,ce),Te!==null&&(W=h(Te,W,ke),we===null?ve=Te:we.sibling=Te,we=Te);return Be&&Lr(K,ke),ve}for(be=s(K,be);!Te.done;ke++,Te=G.next())Te=fe(be,K,ke,Te.value,ce),Te!==null&&(e&&Te.alternate!==null&&be.delete(Te.key===null?ke:Te.key),W=h(Te,W,ke),we===null?ve=Te:we.sibling=Te,we=Te);return e&&be.forEach(function(ly){return n(K,ly)}),Be&&Lr(K,ke),ve}function Ge(K,W,G,ce){if(typeof G=="object"&&G!==null&&G.type===Z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case O:e:{for(var ve=G.key,we=W;we!==null;){if(we.key===ve){if(ve=G.type,ve===Z){if(we.tag===7){o(K,we.sibling),W=u(we,G.props.children),W.return=K,K=W;break e}}else if(we.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===j&&Id(ve)===we.type){o(K,we.sibling),W=u(we,G.props),W.ref=yi(K,we,G),W.return=K,K=W;break e}o(K,we);break}else n(K,we);we=we.sibling}G.type===Z?(W=Ur(G.props.children,K.mode,ce,G.key),W.return=K,K=W):(ce=Gl(G.type,G.key,G.props,null,K.mode,ce),ce.ref=yi(K,W,G),ce.return=K,K=ce)}return b(K);case H:e:{for(we=G.key;W!==null;){if(W.key===we)if(W.tag===4&&W.stateNode.containerInfo===G.containerInfo&&W.stateNode.implementation===G.implementation){o(K,W.sibling),W=u(W,G.children||[]),W.return=K,K=W;break e}else{o(K,W);break}else n(K,W);W=W.sibling}W=yc(G,K.mode,ce),W.return=K,K=W}return b(K);case j:return we=G._init,Ge(K,W,we(G._payload),ce)}if(Qe(G))return ge(K,W,G,ce);if(M(G))return xe(K,W,G,ce);zl(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,W!==null&&W.tag===6?(o(K,W.sibling),W=u(W,G),W.return=K,K=W):(o(K,W),W=mc(G,K.mode,ce),W.return=K,K=W),b(K)):o(K,W)}return Ge}var wo=Dd(!0),Od=Dd(!1),_l=lr(null),jl=null,bo=null,Na=null;function za(){Na=bo=jl=null}function _a(e){var n=_l.current;Ve(_l),e._currentValue=n}function ja(e,n,o){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===o)break;e=e.return}}function So(e,n){jl=e,Na=bo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Tt=!0),e.firstContext=null)}function rn(e){var n=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:n,next:null},bo===null){if(jl===null)throw Error(i(308));bo=e,jl.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return n}var Ar=null;function Ra(e){Ar===null?Ar=[e]:Ar.push(e)}function Hd(e,n,o,s){var u=n.interleaved;return u===null?(o.next=o,Ra(n)):(o.next=u.next,u.next=o),n.interleaved=o,Vn(e,s)}function Vn(e,n){e.lanes|=n;var o=e.alternate;for(o!==null&&(o.lanes|=n),o=e,e=e.return;e!==null;)e.childLanes|=n,o=e.alternate,o!==null&&(o.childLanes|=n),o=e,e=e.return;return o.tag===3?o.stateNode:null}var cr=!1;function $a(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Un(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ur(e,n,o){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,($e&2)!==0){var u=s.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),s.pending=n,Vn(e,o)}return u=s.interleaved,u===null?(n.next=n,Ra(s)):(n.next=u.next,u.next=n),s.interleaved=n,Vn(e,o)}function Rl(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var s=n.lanes;s&=e.pendingLanes,o|=s,n.lanes=o,Ws(e,o)}}function Vd(e,n){var o=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var u=null,h=null;if(o=o.firstBaseUpdate,o!==null){do{var b={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};h===null?u=h=b:h=h.next=b,o=o.next}while(o!==null);h===null?u=h=n:h=h.next=n}else u=h=n;o={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}function $l(e,n,o,s){var u=e.updateQueue;cr=!1;var h=u.firstBaseUpdate,b=u.lastBaseUpdate,$=u.shared.pending;if($!==null){u.shared.pending=null;var D=$,J=D.next;D.next=null,b===null?h=J:b.next=J,b=D;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,$=ie.lastBaseUpdate,$!==b&&($===null?ie.firstBaseUpdate=J:$.next=J,ie.lastBaseUpdate=D))}if(h!==null){var le=u.baseState;b=0,ie=J=D=null,$=h;do{var re=$.lane,fe=$.eventTime;if((s&re)===re){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var ge=e,xe=$;switch(re=n,fe=o,xe.tag){case 1:if(ge=xe.payload,typeof ge=="function"){le=ge.call(fe,le,re);break e}le=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=xe.payload,re=typeof ge=="function"?ge.call(fe,le,re):ge,re==null)break e;le=B({},le,re);break e;case 2:cr=!0}}$.callback!==null&&$.lane!==0&&(e.flags|=64,re=u.effects,re===null?u.effects=[$]:re.push($))}else fe={eventTime:fe,lane:re,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ie===null?(J=ie=fe,D=le):ie=ie.next=fe,b|=re;if($=$.next,$===null){if($=u.shared.pending,$===null)break;re=$,$=re.next,re.next=null,u.lastBaseUpdate=re,u.shared.pending=null}}while(!0);if(ie===null&&(D=le),u.baseState=D,u.firstBaseUpdate=J,u.lastBaseUpdate=ie,n=u.shared.interleaved,n!==null){u=n;do b|=u.lane,u=u.next;while(u!==n)}else h===null&&(u.shared.lanes=0);Or|=b,e.lanes=b,e.memoizedState=le}}function Ud(e,n,o){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var s=e[n],u=s.callback;if(u!==null){if(s.callback=null,s=o,typeof u!="function")throw Error(i(191,u));u.call(s)}}}var xi={},zn=lr(xi),vi=lr(xi),wi=lr(xi);function Ir(e){if(e===xi)throw Error(i(174));return e}function Ta(e,n){switch(De(wi,n),De(vi,e),De(zn,xi),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:qe(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=qe(n,e)}Ve(zn),De(zn,n)}function ko(){Ve(zn),Ve(vi),Ve(wi)}function Bd(e){Ir(wi.current);var n=Ir(zn.current),o=qe(n,e.type);n!==o&&(De(vi,e),De(zn,o))}function Pa(e){vi.current===e&&(Ve(zn),Ve(vi))}var Xe=lr(0);function Tl(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ma=[];function La(){for(var e=0;e<Ma.length;e++)Ma[e]._workInProgressVersionPrimary=null;Ma.length=0}var Pl=R.ReactCurrentDispatcher,Aa=R.ReactCurrentBatchConfig,Dr=0,Ye=null,ot=null,at=null,Ml=!1,bi=!1,Si=0,_m=0;function wt(){throw Error(i(321))}function Ia(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!pn(e[o],n[o]))return!1;return!0}function Da(e,n,o,s,u,h){if(Dr=h,Ye=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Pl.current=e===null||e.memoizedState===null?Tm:Pm,e=o(s,u),bi){h=0;do{if(bi=!1,Si=0,25<=h)throw Error(i(301));h+=1,at=ot=null,n.updateQueue=null,Pl.current=Mm,e=o(s,u)}while(bi)}if(Pl.current=Il,n=ot!==null&&ot.next!==null,Dr=0,at=ot=Ye=null,Ml=!1,n)throw Error(i(300));return e}function Oa(){var e=Si!==0;return Si=0,e}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Ye.memoizedState=at=e:at=at.next=e,at}function on(){if(ot===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var n=at===null?Ye.memoizedState:at.next;if(n!==null)at=n,ot=e;else{if(e===null)throw Error(i(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},at===null?Ye.memoizedState=at=e:at=at.next=e}return at}function ki(e,n){return typeof n=="function"?n(e):n}function Ha(e){var n=on(),o=n.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=e;var s=ot,u=s.baseQueue,h=o.pending;if(h!==null){if(u!==null){var b=u.next;u.next=h.next,h.next=b}s.baseQueue=u=h,o.pending=null}if(u!==null){h=u.next,s=s.baseState;var $=b=null,D=null,J=h;do{var ie=J.lane;if((Dr&ie)===ie)D!==null&&(D=D.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),s=J.hasEagerState?J.eagerState:e(s,J.action);else{var le={lane:ie,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};D===null?($=D=le,b=s):D=D.next=le,Ye.lanes|=ie,Or|=ie}J=J.next}while(J!==null&&J!==h);D===null?b=s:D.next=$,pn(s,n.memoizedState)||(Tt=!0),n.memoizedState=s,n.baseState=b,n.baseQueue=D,o.lastRenderedState=s}if(e=o.interleaved,e!==null){u=e;do h=u.lane,Ye.lanes|=h,Or|=h,u=u.next;while(u!==e)}else u===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Fa(e){var n=on(),o=n.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=e;var s=o.dispatch,u=o.pending,h=n.memoizedState;if(u!==null){o.pending=null;var b=u=u.next;do h=e(h,b.action),b=b.next;while(b!==u);pn(h,n.memoizedState)||(Tt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),o.lastRenderedState=h}return[h,s]}function Wd(){}function Xd(e,n){var o=Ye,s=on(),u=n(),h=!pn(s.memoizedState,u);if(h&&(s.memoizedState=u,Tt=!0),s=s.queue,Va(Zd.bind(null,o,s,e),[e]),s.getSnapshot!==n||h||at!==null&&at.memoizedState.tag&1){if(o.flags|=2048,Ei(9,qd.bind(null,o,s,u,n),void 0,null),ct===null)throw Error(i(349));(Dr&30)!==0||Yd(o,n,u)}return u}function Yd(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=Ye.updateQueue,n===null?(n={lastEffect:null,stores:null},Ye.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function qd(e,n,o,s){n.value=o,n.getSnapshot=s,Kd(n)&&Gd(e)}function Zd(e,n,o){return o(function(){Kd(n)&&Gd(e)})}function Kd(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!pn(e,o)}catch{return!0}}function Gd(e){var n=Vn(e,1);n!==null&&vn(n,e,1,-1)}function Qd(e){var n=_n();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:e},n.queue=e,e=e.dispatch=$m.bind(null,Ye,e),[n.memoizedState,e]}function Ei(e,n,o,s){return e={tag:e,create:n,destroy:o,deps:s,next:null},n=Ye.updateQueue,n===null?(n={lastEffect:null,stores:null},Ye.updateQueue=n,n.lastEffect=e.next=e):(o=n.lastEffect,o===null?n.lastEffect=e.next=e:(s=o.next,o.next=e,e.next=s,n.lastEffect=e)),e}function Jd(){return on().memoizedState}function Ll(e,n,o,s){var u=_n();Ye.flags|=e,u.memoizedState=Ei(1|n,o,void 0,s===void 0?null:s)}function Al(e,n,o,s){var u=on();s=s===void 0?null:s;var h=void 0;if(ot!==null){var b=ot.memoizedState;if(h=b.destroy,s!==null&&Ia(s,b.deps)){u.memoizedState=Ei(n,o,h,s);return}}Ye.flags|=e,u.memoizedState=Ei(1|n,o,h,s)}function ef(e,n){return Ll(8390656,8,e,n)}function Va(e,n){return Al(2048,8,e,n)}function tf(e,n){return Al(4,2,e,n)}function nf(e,n){return Al(4,4,e,n)}function rf(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function of(e,n,o){return o=o!=null?o.concat([e]):null,Al(4,4,rf.bind(null,n,e),o)}function Ua(){}function lf(e,n){var o=on();n=n===void 0?null:n;var s=o.memoizedState;return s!==null&&n!==null&&Ia(n,s[1])?s[0]:(o.memoizedState=[e,n],e)}function sf(e,n){var o=on();n=n===void 0?null:n;var s=o.memoizedState;return s!==null&&n!==null&&Ia(n,s[1])?s[0]:(e=e(),o.memoizedState=[e,n],e)}function af(e,n,o){return(Dr&21)===0?(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=o):(pn(o,n)||(o=Iu(),Ye.lanes|=o,Or|=o,e.baseState=!0),n)}function jm(e,n){var o=Le;Le=o!==0&&4>o?o:4,e(!0);var s=Aa.transition;Aa.transition={};try{e(!1),n()}finally{Le=o,Aa.transition=s}}function cf(){return on().memoizedState}function Rm(e,n,o){var s=pr(e);if(o={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null},uf(e))df(n,o);else if(o=Hd(e,n,o,s),o!==null){var u=Nt();vn(o,e,s,u),ff(o,n,s)}}function $m(e,n,o){var s=pr(e),u={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null};if(uf(e))df(n,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var b=n.lastRenderedState,$=h(b,o);if(u.hasEagerState=!0,u.eagerState=$,pn($,b)){var D=n.interleaved;D===null?(u.next=u,Ra(n)):(u.next=D.next,D.next=u),n.interleaved=u;return}}catch{}o=Hd(e,n,u,s),o!==null&&(u=Nt(),vn(o,e,s,u),ff(o,n,s))}}function uf(e){var n=e.alternate;return e===Ye||n!==null&&n===Ye}function df(e,n){bi=Ml=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function ff(e,n,o){if((o&4194240)!==0){var s=n.lanes;s&=e.pendingLanes,o|=s,n.lanes=o,Ws(e,o)}}var Il={readContext:rn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},Tm={readContext:rn,useCallback:function(e,n){return _n().memoizedState=[e,n===void 0?null:n],e},useContext:rn,useEffect:ef,useImperativeHandle:function(e,n,o){return o=o!=null?o.concat([e]):null,Ll(4194308,4,rf.bind(null,n,e),o)},useLayoutEffect:function(e,n){return Ll(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ll(4,2,e,n)},useMemo:function(e,n){var o=_n();return n=n===void 0?null:n,e=e(),o.memoizedState=[e,n],e},useReducer:function(e,n,o){var s=_n();return n=o!==void 0?o(n):n,s.memoizedState=s.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Rm.bind(null,Ye,e),[s.memoizedState,e]},useRef:function(e){var n=_n();return e={current:e},n.memoizedState=e},useState:Qd,useDebugValue:Ua,useDeferredValue:function(e){return _n().memoizedState=e},useTransition:function(){var e=Qd(!1),n=e[0];return e=jm.bind(null,e[1]),_n().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,o){var s=Ye,u=_n();if(Be){if(o===void 0)throw Error(i(407));o=o()}else{if(o=n(),ct===null)throw Error(i(349));(Dr&30)!==0||Yd(s,n,o)}u.memoizedState=o;var h={value:o,getSnapshot:n};return u.queue=h,ef(Zd.bind(null,s,h,e),[e]),s.flags|=2048,Ei(9,qd.bind(null,s,h,o,n),void 0,null),o},useId:function(){var e=_n(),n=ct.identifierPrefix;if(Be){var o=Fn,s=Hn;o=(s&~(1<<32-hn(s)-1)).toString(32)+o,n=":"+n+"R"+o,o=Si++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=_m++,n=":"+n+"r"+o.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Pm={readContext:rn,useCallback:lf,useContext:rn,useEffect:Va,useImperativeHandle:of,useInsertionEffect:tf,useLayoutEffect:nf,useMemo:sf,useReducer:Ha,useRef:Jd,useState:function(){return Ha(ki)},useDebugValue:Ua,useDeferredValue:function(e){var n=on();return af(n,ot.memoizedState,e)},useTransition:function(){var e=Ha(ki)[0],n=on().memoizedState;return[e,n]},useMutableSource:Wd,useSyncExternalStore:Xd,useId:cf,unstable_isNewReconciler:!1},Mm={readContext:rn,useCallback:lf,useContext:rn,useEffect:Va,useImperativeHandle:of,useInsertionEffect:tf,useLayoutEffect:nf,useMemo:sf,useReducer:Fa,useRef:Jd,useState:function(){return Fa(ki)},useDebugValue:Ua,useDeferredValue:function(e){var n=on();return ot===null?n.memoizedState=e:af(n,ot.memoizedState,e)},useTransition:function(){var e=Fa(ki)[0],n=on().memoizedState;return[e,n]},useMutableSource:Wd,useSyncExternalStore:Xd,useId:cf,unstable_isNewReconciler:!1};function mn(e,n){if(e&&e.defaultProps){n=B({},n),e=e.defaultProps;for(var o in e)n[o]===void 0&&(n[o]=e[o]);return n}return n}function Ba(e,n,o,s){n=e.memoizedState,o=o(s,n),o=o==null?n:B({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Dl={isMounted:function(e){return(e=e._reactInternals)?fn(e)===e:!1},enqueueSetState:function(e,n,o){e=e._reactInternals;var s=Nt(),u=pr(e),h=Un(s,u);h.payload=n,o!=null&&(h.callback=o),n=ur(e,h,u),n!==null&&(vn(n,e,u,s),Rl(n,e,u))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var s=Nt(),u=pr(e),h=Un(s,u);h.tag=1,h.payload=n,o!=null&&(h.callback=o),n=ur(e,h,u),n!==null&&(vn(n,e,u,s),Rl(n,e,u))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=Nt(),s=pr(e),u=Un(o,s);u.tag=2,n!=null&&(u.callback=n),n=ur(e,u,s),n!==null&&(vn(n,e,s,o),Rl(n,e,s))}};function hf(e,n,o,s,u,h,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,b):n.prototype&&n.prototype.isPureReactComponent?!ui(o,s)||!ui(u,h):!0}function pf(e,n,o){var s=!1,u=sr,h=n.contextType;return typeof h=="object"&&h!==null?h=rn(h):(u=$t(n)?Pr:vt.current,s=n.contextTypes,h=(s=s!=null)?mo(e,u):sr),n=new n(o,h),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Dl,e.stateNode=n,n._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=h),n}function gf(e,n,o,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,s),n.state!==e&&Dl.enqueueReplaceState(n,n.state,null)}function Wa(e,n,o,s){var u=e.stateNode;u.props=o,u.state=e.memoizedState,u.refs={},$a(e);var h=n.contextType;typeof h=="object"&&h!==null?u.context=rn(h):(h=$t(n)?Pr:vt.current,u.context=mo(e,h)),u.state=e.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Ba(e,n,h,o),u.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(n=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),n!==u.state&&Dl.enqueueReplaceState(u,u.state,null),$l(e,o,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Eo(e,n){try{var o="",s=n;do o+=oe(s),s=s.return;while(s);var u=o}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:n,stack:u,digest:null}}function Xa(e,n,o){return{value:e,source:null,stack:o??null,digest:n??null}}function Ya(e,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var Lm=typeof WeakMap=="function"?WeakMap:Map;function mf(e,n,o){o=Un(-1,o),o.tag=3,o.payload={element:null};var s=n.value;return o.callback=function(){Wl||(Wl=!0,ac=s),Ya(e,n)},o}function yf(e,n,o){o=Un(-1,o),o.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=n.value;o.payload=function(){return s(u)},o.callback=function(){Ya(e,n)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(o.callback=function(){Ya(e,n),typeof s!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var b=n.stack;this.componentDidCatch(n.value,{componentStack:b!==null?b:""})}),o}function xf(e,n,o){var s=e.pingCache;if(s===null){s=e.pingCache=new Lm;var u=new Set;s.set(n,u)}else u=s.get(n),u===void 0&&(u=new Set,s.set(n,u));u.has(o)||(u.add(o),e=Zm.bind(null,e,n,o),n.then(e,e))}function vf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function wf(e,n,o,s,u){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=Un(-1,1),n.tag=2,ur(o,n,1))),o.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var Am=R.ReactCurrentOwner,Tt=!1;function Ct(e,n,o,s){n.child=e===null?Od(n,null,o,s):wo(n,e.child,o,s)}function bf(e,n,o,s,u){o=o.render;var h=n.ref;return So(n,u),s=Da(e,n,o,s,h,u),o=Oa(),e!==null&&!Tt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,Bn(e,n,u)):(Be&&o&&ba(n),n.flags|=1,Ct(e,n,s,u),n.child)}function Sf(e,n,o,s,u){if(e===null){var h=o.type;return typeof h=="function"&&!gc(h)&&h.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=h,kf(e,n,h,s,u)):(e=Gl(o.type,null,s,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,(e.lanes&u)===0){var b=h.memoizedProps;if(o=o.compare,o=o!==null?o:ui,o(b,s)&&e.ref===n.ref)return Bn(e,n,u)}return n.flags|=1,e=mr(h,s),e.ref=n.ref,e.return=n,n.child=e}function kf(e,n,o,s,u){if(e!==null){var h=e.memoizedProps;if(ui(h,s)&&e.ref===n.ref)if(Tt=!1,n.pendingProps=s=h,(e.lanes&u)!==0)(e.flags&131072)!==0&&(Tt=!0);else return n.lanes=e.lanes,Bn(e,n,u)}return qa(e,n,o,s,u)}function Ef(e,n,o){var s=n.pendingProps,u=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(No,Wt),Wt|=o;else{if((o&1073741824)===0)return e=h!==null?h.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,De(No,Wt),Wt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:o,De(No,Wt),Wt|=s}else h!==null?(s=h.baseLanes|o,n.memoizedState=null):s=o,De(No,Wt),Wt|=s;return Ct(e,n,u,o),n.child}function Cf(e,n){var o=n.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function qa(e,n,o,s,u){var h=$t(o)?Pr:vt.current;return h=mo(n,h),So(n,u),o=Da(e,n,o,s,h,u),s=Oa(),e!==null&&!Tt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,Bn(e,n,u)):(Be&&s&&ba(n),n.flags|=1,Ct(e,n,o,u),n.child)}function Nf(e,n,o,s,u){if($t(o)){var h=!0;Sl(n)}else h=!1;if(So(n,u),n.stateNode===null)Hl(e,n),pf(n,o,s),Wa(n,o,s,u),s=!0;else if(e===null){var b=n.stateNode,$=n.memoizedProps;b.props=$;var D=b.context,J=o.contextType;typeof J=="object"&&J!==null?J=rn(J):(J=$t(o)?Pr:vt.current,J=mo(n,J));var ie=o.getDerivedStateFromProps,le=typeof ie=="function"||typeof b.getSnapshotBeforeUpdate=="function";le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($!==s||D!==J)&&gf(n,b,s,J),cr=!1;var re=n.memoizedState;b.state=re,$l(n,s,b,u),D=n.memoizedState,$!==s||re!==D||Rt.current||cr?(typeof ie=="function"&&(Ba(n,o,ie,s),D=n.memoizedState),($=cr||hf(n,o,$,s,re,D,J))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(n.flags|=4194308)):(typeof b.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=D),b.props=s,b.state=D,b.context=J,s=$):(typeof b.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{b=n.stateNode,Fd(e,n),$=n.memoizedProps,J=n.type===n.elementType?$:mn(n.type,$),b.props=J,le=n.pendingProps,re=b.context,D=o.contextType,typeof D=="object"&&D!==null?D=rn(D):(D=$t(o)?Pr:vt.current,D=mo(n,D));var fe=o.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($!==le||re!==D)&&gf(n,b,s,D),cr=!1,re=n.memoizedState,b.state=re,$l(n,s,b,u);var ge=n.memoizedState;$!==le||re!==ge||Rt.current||cr?(typeof fe=="function"&&(Ba(n,o,fe,s),ge=n.memoizedState),(J=cr||hf(n,o,J,s,re,ge,D)||!1)?(ie||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(s,ge,D),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(s,ge,D)),typeof b.componentDidUpdate=="function"&&(n.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof b.componentDidUpdate!="function"||$===e.memoizedProps&&re===e.memoizedState||(n.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||$===e.memoizedProps&&re===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=ge),b.props=s,b.state=ge,b.context=D,s=J):(typeof b.componentDidUpdate!="function"||$===e.memoizedProps&&re===e.memoizedState||(n.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||$===e.memoizedProps&&re===e.memoizedState||(n.flags|=1024),s=!1)}return Za(e,n,o,s,h,u)}function Za(e,n,o,s,u,h){Cf(e,n);var b=(n.flags&128)!==0;if(!s&&!b)return u&&Rd(n,o,!1),Bn(e,n,h);s=n.stateNode,Am.current=n;var $=b&&typeof o.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,e!==null&&b?(n.child=wo(n,e.child,null,h),n.child=wo(n,null,$,h)):Ct(e,n,$,h),n.memoizedState=s.state,u&&Rd(n,o,!0),n.child}function zf(e){var n=e.stateNode;n.pendingContext?_d(e,n.pendingContext,n.pendingContext!==n.context):n.context&&_d(e,n.context,!1),Ta(e,n.containerInfo)}function _f(e,n,o,s,u){return vo(),Ca(u),n.flags|=256,Ct(e,n,o,s),n.child}var Ka={dehydrated:null,treeContext:null,retryLane:0};function Ga(e){return{baseLanes:e,cachePool:null,transitions:null}}function jf(e,n,o){var s=n.pendingProps,u=Xe.current,h=!1,b=(n.flags&128)!==0,$;if(($=b)||($=e!==null&&e.memoizedState===null?!1:(u&2)!==0),$?(h=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),De(Xe,u&1),e===null)return Ea(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(b=s.children,e=s.fallback,h?(s=n.mode,h=n.child,b={mode:"hidden",children:b},(s&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=b):h=Ql(b,s,0,null),e=Ur(e,s,o,null),h.return=n,e.return=n,h.sibling=e,n.child=h,n.child.memoizedState=Ga(o),n.memoizedState=Ka,e):Qa(n,b));if(u=e.memoizedState,u!==null&&($=u.dehydrated,$!==null))return Im(e,n,b,s,$,u,o);if(h){h=s.fallback,b=n.mode,u=e.child,$=u.sibling;var D={mode:"hidden",children:s.children};return(b&1)===0&&n.child!==u?(s=n.child,s.childLanes=0,s.pendingProps=D,n.deletions=null):(s=mr(u,D),s.subtreeFlags=u.subtreeFlags&14680064),$!==null?h=mr($,h):(h=Ur(h,b,o,null),h.flags|=2),h.return=n,s.return=n,s.sibling=h,n.child=s,s=h,h=n.child,b=e.child.memoizedState,b=b===null?Ga(o):{baseLanes:b.baseLanes|o,cachePool:null,transitions:b.transitions},h.memoizedState=b,h.childLanes=e.childLanes&~o,n.memoizedState=Ka,s}return h=e.child,e=h.sibling,s=mr(h,{mode:"visible",children:s.children}),(n.mode&1)===0&&(s.lanes=o),s.return=n,s.sibling=null,e!==null&&(o=n.deletions,o===null?(n.deletions=[e],n.flags|=16):o.push(e)),n.child=s,n.memoizedState=null,s}function Qa(e,n){return n=Ql({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Ol(e,n,o,s){return s!==null&&Ca(s),wo(n,e.child,null,o),e=Qa(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Im(e,n,o,s,u,h,b){if(o)return n.flags&256?(n.flags&=-257,s=Xa(Error(i(422))),Ol(e,n,b,s)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(h=s.fallback,u=n.mode,s=Ql({mode:"visible",children:s.children},u,0,null),h=Ur(h,u,b,null),h.flags|=2,s.return=n,h.return=n,s.sibling=h,n.child=s,(n.mode&1)!==0&&wo(n,e.child,null,b),n.child.memoizedState=Ga(b),n.memoizedState=Ka,h);if((n.mode&1)===0)return Ol(e,n,b,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var $=s.dgst;return s=$,h=Error(i(419)),s=Xa(h,s,void 0),Ol(e,n,b,s)}if($=(b&e.childLanes)!==0,Tt||$){if(s=ct,s!==null){switch(b&-b){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(s.suspendedLanes|b))!==0?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,Vn(e,u),vn(s,e,u,-1))}return pc(),s=Xa(Error(i(421))),Ol(e,n,b,s)}return u.data==="$?"?(n.flags|=128,n.child=e.child,n=Km.bind(null,e),u._reactRetry=n,null):(e=h.treeContext,Bt=ir(u.nextSibling),Ut=n,Be=!0,gn=null,e!==null&&(tn[nn++]=Hn,tn[nn++]=Fn,tn[nn++]=Mr,Hn=e.id,Fn=e.overflow,Mr=n),n=Qa(n,s.children),n.flags|=4096,n)}function Rf(e,n,o){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),ja(e.return,n,o)}function Ja(e,n,o,s,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:u}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=o,h.tailMode=u)}function $f(e,n,o){var s=n.pendingProps,u=s.revealOrder,h=s.tail;if(Ct(e,n,s.children,o),s=Xe.current,(s&2)!==0)s=s&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rf(e,o,n);else if(e.tag===19)Rf(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(De(Xe,s),(n.mode&1)===0)n.memoizedState=null;else switch(u){case"forwards":for(o=n.child,u=null;o!==null;)e=o.alternate,e!==null&&Tl(e)===null&&(u=o),o=o.sibling;o=u,o===null?(u=n.child,n.child=null):(u=o.sibling,o.sibling=null),Ja(n,!1,u,o,h);break;case"backwards":for(o=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&Tl(e)===null){n.child=u;break}e=u.sibling,u.sibling=o,o=u,u=e}Ja(n,!0,o,null,h);break;case"together":Ja(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Hl(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Bn(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Or|=n.lanes,(o&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,o=mr(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=mr(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function Dm(e,n,o){switch(n.tag){case 3:zf(n),vo();break;case 5:Bd(n);break;case 1:$t(n.type)&&Sl(n);break;case 4:Ta(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,u=n.memoizedProps.value;De(_l,s._currentValue),s._currentValue=u;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(De(Xe,Xe.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?jf(e,n,o):(De(Xe,Xe.current&1),e=Bn(e,n,o),e!==null?e.sibling:null);De(Xe,Xe.current&1);break;case 19:if(s=(o&n.childLanes)!==0,(e.flags&128)!==0){if(s)return $f(e,n,o);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),De(Xe,Xe.current),s)break;return null;case 22:case 23:return n.lanes=0,Ef(e,n,o)}return Bn(e,n,o)}var Tf,ec,Pf,Mf;Tf=function(e,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},ec=function(){},Pf=function(e,n,o,s){var u=e.memoizedProps;if(u!==s){e=n.stateNode,Ir(zn.current);var h=null;switch(o){case"input":u=He(e,u),s=He(e,s),h=[];break;case"select":u=B({},u,{value:void 0}),s=B({},s,{value:void 0}),h=[];break;case"textarea":u=zt(e,u),s=zt(e,s),h=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=vl)}xt(o,s);var b;o=null;for(J in u)if(!s.hasOwnProperty(J)&&u.hasOwnProperty(J)&&u[J]!=null)if(J==="style"){var $=u[J];for(b in $)$.hasOwnProperty(b)&&(o||(o={}),o[b]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(a.hasOwnProperty(J)?h||(h=[]):(h=h||[]).push(J,null));for(J in s){var D=s[J];if($=u?.[J],s.hasOwnProperty(J)&&D!==$&&(D!=null||$!=null))if(J==="style")if($){for(b in $)!$.hasOwnProperty(b)||D&&D.hasOwnProperty(b)||(o||(o={}),o[b]="");for(b in D)D.hasOwnProperty(b)&&$[b]!==D[b]&&(o||(o={}),o[b]=D[b])}else o||(h||(h=[]),h.push(J,o)),o=D;else J==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,$=$?$.__html:void 0,D!=null&&$!==D&&(h=h||[]).push(J,D)):J==="children"?typeof D!="string"&&typeof D!="number"||(h=h||[]).push(J,""+D):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(a.hasOwnProperty(J)?(D!=null&&J==="onScroll"&&Fe("scroll",e),h||$===D||(h=[])):(h=h||[]).push(J,D))}o&&(h=h||[]).push("style",o);var J=h;(n.updateQueue=J)&&(n.flags|=4)}},Mf=function(e,n,o,s){o!==s&&(n.flags|=4)};function Ci(e,n){if(!Be)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function bt(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,s=0;if(n)for(var u=e.child;u!==null;)o|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)o|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=o,n}function Om(e,n,o){var s=n.pendingProps;switch(Sa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(n),null;case 1:return $t(n.type)&&bl(),bt(n),null;case 3:return s=n.stateNode,ko(),Ve(Rt),Ve(vt),La(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Nl(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gn!==null&&(dc(gn),gn=null))),ec(e,n),bt(n),null;case 5:Pa(n);var u=Ir(wi.current);if(o=n.type,e!==null&&n.stateNode!=null)Pf(e,n,o,s,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(i(166));return bt(n),null}if(e=Ir(zn.current),Nl(n)){s=n.stateNode,o=n.type;var h=n.memoizedProps;switch(s[Nn]=n,s[gi]=h,e=(n.mode&1)!==0,o){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(u=0;u<fi.length;u++)Fe(fi[u],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Me(s,h),Fe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},Fe("invalid",s);break;case"textarea":_t(s,h),Fe("invalid",s)}xt(o,h),u=null;for(var b in h)if(h.hasOwnProperty(b)){var $=h[b];b==="children"?typeof $=="string"?s.textContent!==$&&(h.suppressHydrationWarning!==!0&&xl(s.textContent,$,e),u=["children",$]):typeof $=="number"&&s.textContent!==""+$&&(h.suppressHydrationWarning!==!0&&xl(s.textContent,$,e),u=["children",""+$]):a.hasOwnProperty(b)&&$!=null&&b==="onScroll"&&Fe("scroll",s)}switch(o){case"input":je(s),ue(s,h,!0);break;case"textarea":je(s),nt(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=vl)}s=u,n.updateQueue=s,s!==null&&(n.flags|=4)}else{b=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=st(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=b.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=b.createElement(o,{is:s.is}):(e=b.createElement(o),o==="select"&&(b=e,s.multiple?b.multiple=!0:s.size&&(b.size=s.size))):e=b.createElementNS(e,o),e[Nn]=n,e[gi]=s,Tf(e,n,!1,!1),n.stateNode=e;e:{switch(b=Ht(o,s),o){case"dialog":Fe("cancel",e),Fe("close",e),u=s;break;case"iframe":case"object":case"embed":Fe("load",e),u=s;break;case"video":case"audio":for(u=0;u<fi.length;u++)Fe(fi[u],e);u=s;break;case"source":Fe("error",e),u=s;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),u=s;break;case"details":Fe("toggle",e),u=s;break;case"input":Me(e,s),u=He(e,s),Fe("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=B({},s,{value:void 0}),Fe("invalid",e);break;case"textarea":_t(e,s),u=zt(e,s),Fe("invalid",e);break;default:u=s}xt(o,u),$=u;for(h in $)if($.hasOwnProperty(h)){var D=$[h];h==="style"?Gt(e,D):h==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&kt(e,D)):h==="children"?typeof D=="string"?(o!=="textarea"||D!=="")&&Ot(e,D):typeof D=="number"&&Ot(e,""+D):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(a.hasOwnProperty(h)?D!=null&&h==="onScroll"&&Fe("scroll",e):D!=null&&U(e,h,D,b))}switch(o){case"input":je(e),ue(e,s,!1);break;case"textarea":je(e),nt(e);break;case"option":s.value!=null&&e.setAttribute("value",""+se(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?pt(e,!!s.multiple,h,!1):s.defaultValue!=null&&pt(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=vl)}switch(o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return bt(n),null;case 6:if(e&&n.stateNode!=null)Mf(e,n,e.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(i(166));if(o=Ir(wi.current),Ir(zn.current),Nl(n)){if(s=n.stateNode,o=n.memoizedProps,s[Nn]=n,(h=s.nodeValue!==o)&&(e=Ut,e!==null))switch(e.tag){case 3:xl(s.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xl(s.nodeValue,o,(e.mode&1)!==0)}h&&(n.flags|=4)}else s=(o.nodeType===9?o:o.ownerDocument).createTextNode(s),s[Nn]=n,n.stateNode=s}return bt(n),null;case 13:if(Ve(Xe),s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&Bt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Ad(),vo(),n.flags|=98560,h=!1;else if(h=Nl(n),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Nn]=n}else vo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;bt(n),h=!1}else gn!==null&&(dc(gn),gn=null),h=!0;if(!h)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Xe.current&1)!==0?it===0&&(it=3):pc())),n.updateQueue!==null&&(n.flags|=4),bt(n),null);case 4:return ko(),ec(e,n),e===null&&hi(n.stateNode.containerInfo),bt(n),null;case 10:return _a(n.type._context),bt(n),null;case 17:return $t(n.type)&&bl(),bt(n),null;case 19:if(Ve(Xe),h=n.memoizedState,h===null)return bt(n),null;if(s=(n.flags&128)!==0,b=h.rendering,b===null)if(s)Ci(h,!1);else{if(it!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(b=Tl(e),b!==null){for(n.flags|=128,Ci(h,!1),s=b.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=o,o=n.child;o!==null;)h=o,e=s,h.flags&=14680066,b=h.alternate,b===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,e=b.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return De(Xe,Xe.current&1|2),n.child}e=e.sibling}h.tail!==null&&We()>zo&&(n.flags|=128,s=!0,Ci(h,!1),n.lanes=4194304)}else{if(!s)if(e=Tl(b),e!==null){if(n.flags|=128,s=!0,o=e.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Ci(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!Be)return bt(n),null}else 2*We()-h.renderingStartTime>zo&&o!==1073741824&&(n.flags|=128,s=!0,Ci(h,!1),n.lanes=4194304);h.isBackwards?(b.sibling=n.child,n.child=b):(o=h.last,o!==null?o.sibling=b:n.child=b,h.last=b)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=We(),n.sibling=null,o=Xe.current,De(Xe,s?o&1|2:o&1),n):(bt(n),null);case 22:case 23:return hc(),s=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(n.flags|=8192),s&&(n.mode&1)!==0?(Wt&1073741824)!==0&&(bt(n),n.subtreeFlags&6&&(n.flags|=8192)):bt(n),null;case 24:return null;case 25:return null}throw Error(i(156,n.tag))}function Hm(e,n){switch(Sa(n),n.tag){case 1:return $t(n.type)&&bl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ko(),Ve(Rt),Ve(vt),La(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Pa(n),null;case 13:if(Ve(Xe),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));vo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ve(Xe),null;case 4:return ko(),null;case 10:return _a(n.type._context),null;case 22:case 23:return hc(),null;case 24:return null;default:return null}}var Fl=!1,St=!1,Fm=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Co(e,n){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(s){Ze(e,n,s)}else o.current=null}function tc(e,n,o){try{o()}catch(s){Ze(e,n,s)}}var Lf=!1;function Vm(e,n){if(ha=sl,e=fd(),ia(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var u=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break e}var b=0,$=-1,D=-1,J=0,ie=0,le=e,re=null;t:for(;;){for(var fe;le!==o||u!==0&&le.nodeType!==3||($=b+u),le!==h||s!==0&&le.nodeType!==3||(D=b+s),le.nodeType===3&&(b+=le.nodeValue.length),(fe=le.firstChild)!==null;)re=le,le=fe;for(;;){if(le===e)break t;if(re===o&&++J===u&&($=b),re===h&&++ie===s&&(D=b),(fe=le.nextSibling)!==null)break;le=re,re=le.parentNode}le=fe}o=$===-1||D===-1?null:{start:$,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(pa={focusedElem:e,selectionRange:o},sl=!1,pe=n;pe!==null;)if(n=pe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,pe=e;else for(;pe!==null;){n=pe;try{var ge=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var xe=ge.memoizedProps,Ge=ge.memoizedState,K=n.stateNode,W=K.getSnapshotBeforeUpdate(n.elementType===n.type?xe:mn(n.type,xe),Ge);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var G=n.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ce){Ze(n,n.return,ce)}if(e=n.sibling,e!==null){e.return=n.return,pe=e;break}pe=n.return}return ge=Lf,Lf=!1,ge}function Ni(e,n,o){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var h=u.destroy;u.destroy=void 0,h!==void 0&&tc(n,o,h)}u=u.next}while(u!==s)}}function Vl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var s=o.create;o.destroy=s()}o=o.next}while(o!==n)}}function nc(e){var n=e.ref;if(n!==null){var o=e.stateNode;e.tag,e=o,typeof n=="function"?n(e):n.current=e}}function Af(e){var n=e.alternate;n!==null&&(e.alternate=null,Af(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Nn],delete n[gi],delete n[xa],delete n[Em],delete n[Cm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function If(e){return e.tag===5||e.tag===3||e.tag===4}function Df(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||If(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rc(e,n,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(e,n):o.insertBefore(e,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(e,o)):(n=o,n.appendChild(e)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=vl));else if(s!==4&&(e=e.child,e!==null))for(rc(e,n,o),e=e.sibling;e!==null;)rc(e,n,o),e=e.sibling}function oc(e,n,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(oc(e,n,o),e=e.sibling;e!==null;)oc(e,n,o),e=e.sibling}var gt=null,yn=!1;function dr(e,n,o){for(o=o.child;o!==null;)Of(e,n,o),o=o.sibling}function Of(e,n,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(io,o)}catch{}switch(o.tag){case 5:St||Co(o,n);case 6:var s=gt,u=yn;gt=null,dr(e,n,o),gt=s,yn=u,gt!==null&&(yn?(e=gt,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):gt.removeChild(o.stateNode));break;case 18:gt!==null&&(yn?(e=gt,o=o.stateNode,e.nodeType===8?ya(e.parentNode,o):e.nodeType===1&&ya(e,o),oi(e)):ya(gt,o.stateNode));break;case 4:s=gt,u=yn,gt=o.stateNode.containerInfo,yn=!0,dr(e,n,o),gt=s,yn=u;break;case 0:case 11:case 14:case 15:if(!St&&(s=o.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var h=u,b=h.destroy;h=h.tag,b!==void 0&&((h&2)!==0||(h&4)!==0)&&tc(o,n,b),u=u.next}while(u!==s)}dr(e,n,o);break;case 1:if(!St&&(Co(o,n),s=o.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=o.memoizedProps,s.state=o.memoizedState,s.componentWillUnmount()}catch($){Ze(o,n,$)}dr(e,n,o);break;case 21:dr(e,n,o);break;case 22:o.mode&1?(St=(s=St)||o.memoizedState!==null,dr(e,n,o),St=s):dr(e,n,o);break;default:dr(e,n,o)}}function Hf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new Fm),n.forEach(function(s){var u=Gm.bind(null,e,s);o.has(s)||(o.add(s),s.then(u,u))})}}function xn(e,n){var o=n.deletions;if(o!==null)for(var s=0;s<o.length;s++){var u=o[s];try{var h=e,b=n,$=b;e:for(;$!==null;){switch($.tag){case 5:gt=$.stateNode,yn=!1;break e;case 3:gt=$.stateNode.containerInfo,yn=!0;break e;case 4:gt=$.stateNode.containerInfo,yn=!0;break e}$=$.return}if(gt===null)throw Error(i(160));Of(h,b,u),gt=null,yn=!1;var D=u.alternate;D!==null&&(D.return=null),u.return=null}catch(J){Ze(u,n,J)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Ff(n,e),n=n.sibling}function Ff(e,n){var o=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xn(n,e),jn(e),s&4){try{Ni(3,e,e.return),Vl(3,e)}catch(xe){Ze(e,e.return,xe)}try{Ni(5,e,e.return)}catch(xe){Ze(e,e.return,xe)}}break;case 1:xn(n,e),jn(e),s&512&&o!==null&&Co(o,o.return);break;case 5:if(xn(n,e),jn(e),s&512&&o!==null&&Co(o,o.return),e.flags&32){var u=e.stateNode;try{Ot(u,"")}catch(xe){Ze(e,e.return,xe)}}if(s&4&&(u=e.stateNode,u!=null)){var h=e.memoizedProps,b=o!==null?o.memoizedProps:h,$=e.type,D=e.updateQueue;if(e.updateQueue=null,D!==null)try{$==="input"&&h.type==="radio"&&h.name!=null&&Pe(u,h),Ht($,b);var J=Ht($,h);for(b=0;b<D.length;b+=2){var ie=D[b],le=D[b+1];ie==="style"?Gt(u,le):ie==="dangerouslySetInnerHTML"?kt(u,le):ie==="children"?Ot(u,le):U(u,ie,le,J)}switch($){case"input":Ce(u,h);break;case"textarea":lt(u,h);break;case"select":var re=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var fe=h.value;fe!=null?pt(u,!!h.multiple,fe,!1):re!==!!h.multiple&&(h.defaultValue!=null?pt(u,!!h.multiple,h.defaultValue,!0):pt(u,!!h.multiple,h.multiple?[]:"",!1))}u[gi]=h}catch(xe){Ze(e,e.return,xe)}}break;case 6:if(xn(n,e),jn(e),s&4){if(e.stateNode===null)throw Error(i(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch(xe){Ze(e,e.return,xe)}}break;case 3:if(xn(n,e),jn(e),s&4&&o!==null&&o.memoizedState.isDehydrated)try{oi(n.containerInfo)}catch(xe){Ze(e,e.return,xe)}break;case 4:xn(n,e),jn(e);break;case 13:xn(n,e),jn(e),u=e.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(sc=We())),s&4&&Hf(e);break;case 22:if(ie=o!==null&&o.memoizedState!==null,e.mode&1?(St=(J=St)||ie,xn(n,e),St=J):xn(n,e),jn(e),s&8192){if(J=e.memoizedState!==null,(e.stateNode.isHidden=J)&&!ie&&(e.mode&1)!==0)for(pe=e,ie=e.child;ie!==null;){for(le=pe=ie;pe!==null;){switch(re=pe,fe=re.child,re.tag){case 0:case 11:case 14:case 15:Ni(4,re,re.return);break;case 1:Co(re,re.return);var ge=re.stateNode;if(typeof ge.componentWillUnmount=="function"){s=re,o=re.return;try{n=s,ge.props=n.memoizedProps,ge.state=n.memoizedState,ge.componentWillUnmount()}catch(xe){Ze(s,o,xe)}}break;case 5:Co(re,re.return);break;case 22:if(re.memoizedState!==null){Bf(le);continue}}fe!==null?(fe.return=re,pe=fe):Bf(le)}ie=ie.sibling}e:for(ie=null,le=e;;){if(le.tag===5){if(ie===null){ie=le;try{u=le.stateNode,J?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):($=le.stateNode,D=le.memoizedProps.style,b=D!=null&&D.hasOwnProperty("display")?D.display:null,$.style.display=Kt("display",b))}catch(xe){Ze(e,e.return,xe)}}}else if(le.tag===6){if(ie===null)try{le.stateNode.nodeValue=J?"":le.memoizedProps}catch(xe){Ze(e,e.return,xe)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===e)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===e)break e;for(;le.sibling===null;){if(le.return===null||le.return===e)break e;ie===le&&(ie=null),le=le.return}ie===le&&(ie=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:xn(n,e),jn(e),s&4&&Hf(e);break;case 21:break;default:xn(n,e),jn(e)}}function jn(e){var n=e.flags;if(n&2){try{e:{for(var o=e.return;o!==null;){if(If(o)){var s=o;break e}o=o.return}throw Error(i(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&(Ot(u,""),s.flags&=-33);var h=Df(e);oc(e,h,u);break;case 3:case 4:var b=s.stateNode.containerInfo,$=Df(e);rc(e,$,b);break;default:throw Error(i(161))}}catch(D){Ze(e,e.return,D)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Um(e,n,o){pe=e,Vf(e)}function Vf(e,n,o){for(var s=(e.mode&1)!==0;pe!==null;){var u=pe,h=u.child;if(u.tag===22&&s){var b=u.memoizedState!==null||Fl;if(!b){var $=u.alternate,D=$!==null&&$.memoizedState!==null||St;$=Fl;var J=St;if(Fl=b,(St=D)&&!J)for(pe=u;pe!==null;)b=pe,D=b.child,b.tag===22&&b.memoizedState!==null?Wf(u):D!==null?(D.return=b,pe=D):Wf(u);for(;h!==null;)pe=h,Vf(h),h=h.sibling;pe=u,Fl=$,St=J}Uf(e)}else(u.subtreeFlags&8772)!==0&&h!==null?(h.return=u,pe=h):Uf(e)}}function Uf(e){for(;pe!==null;){var n=pe;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:St||Vl(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!St)if(o===null)s.componentDidMount();else{var u=n.elementType===n.type?o.memoizedProps:mn(n.type,o.memoizedProps);s.componentDidUpdate(u,o.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=n.updateQueue;h!==null&&Ud(n,h,s);break;case 3:var b=n.updateQueue;if(b!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}Ud(n,b,o)}break;case 5:var $=n.stateNode;if(o===null&&n.flags&4){o=$;var D=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&o.focus();break;case"img":D.src&&(o.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var J=n.alternate;if(J!==null){var ie=J.memoizedState;if(ie!==null){var le=ie.dehydrated;le!==null&&oi(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}St||n.flags&512&&nc(n)}catch(re){Ze(n,n.return,re)}}if(n===e){pe=null;break}if(o=n.sibling,o!==null){o.return=n.return,pe=o;break}pe=n.return}}function Bf(e){for(;pe!==null;){var n=pe;if(n===e){pe=null;break}var o=n.sibling;if(o!==null){o.return=n.return,pe=o;break}pe=n.return}}function Wf(e){for(;pe!==null;){var n=pe;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{Vl(4,n)}catch(D){Ze(n,o,D)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var u=n.return;try{s.componentDidMount()}catch(D){Ze(n,u,D)}}var h=n.return;try{nc(n)}catch(D){Ze(n,h,D)}break;case 5:var b=n.return;try{nc(n)}catch(D){Ze(n,b,D)}}}catch(D){Ze(n,n.return,D)}if(n===e){pe=null;break}var $=n.sibling;if($!==null){$.return=n.return,pe=$;break}pe=n.return}}var Bm=Math.ceil,Ul=R.ReactCurrentDispatcher,ic=R.ReactCurrentOwner,ln=R.ReactCurrentBatchConfig,$e=0,ct=null,et=null,mt=0,Wt=0,No=lr(0),it=0,zi=null,Or=0,Bl=0,lc=0,_i=null,Pt=null,sc=0,zo=1/0,Wn=null,Wl=!1,ac=null,fr=null,Xl=!1,hr=null,Yl=0,ji=0,cc=null,ql=-1,Zl=0;function Nt(){return($e&6)!==0?We():ql!==-1?ql:ql=We()}function pr(e){return(e.mode&1)===0?1:($e&2)!==0&&mt!==0?mt&-mt:zm.transition!==null?(Zl===0&&(Zl=Iu()),Zl):(e=Le,e!==0||(e=window.event,e=e===void 0?16:Xu(e.type)),e)}function vn(e,n,o,s){if(50<ji)throw ji=0,cc=null,Error(i(185));Jo(e,o,s),(($e&2)===0||e!==ct)&&(e===ct&&(($e&2)===0&&(Bl|=o),it===4&&gr(e,mt)),Mt(e,s),o===1&&$e===0&&(n.mode&1)===0&&(zo=We()+500,kl&&ar()))}function Mt(e,n){var o=e.callbackNode;zg(e,n);var s=ol(e,e===ct?mt:0);if(s===0)o!==null&&Rr(o),e.callbackNode=null,e.callbackPriority=0;else if(n=s&-s,e.callbackPriority!==n){if(o!=null&&Rr(o),n===1)e.tag===0?Nm(Yf.bind(null,e)):$d(Yf.bind(null,e)),Sm(function(){($e&6)===0&&ar()}),o=null;else{switch(Du(s)){case 1:o=Ko;break;case 4:o=Ji;break;case 16:o=oo;break;case 536870912:o=tl;break;default:o=oo}o=t0(o,Xf.bind(null,e))}e.callbackPriority=n,e.callbackNode=o}}function Xf(e,n){if(ql=-1,Zl=0,($e&6)!==0)throw Error(i(327));var o=e.callbackNode;if(_o()&&e.callbackNode!==o)return null;var s=ol(e,e===ct?mt:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||n)n=Kl(e,s);else{n=s;var u=$e;$e|=2;var h=Zf();(ct!==e||mt!==n)&&(Wn=null,zo=We()+500,Fr(e,n));do try{Ym();break}catch($){qf(e,$)}while(!0);za(),Ul.current=h,$e=u,et!==null?n=0:(ct=null,mt=0,n=it)}if(n!==0){if(n===2&&(u=Us(e),u!==0&&(s=u,n=uc(e,u))),n===1)throw o=zi,Fr(e,0),gr(e,s),Mt(e,We()),o;if(n===6)gr(e,s);else{if(u=e.current.alternate,(s&30)===0&&!Wm(u)&&(n=Kl(e,s),n===2&&(h=Us(e),h!==0&&(s=h,n=uc(e,h))),n===1))throw o=zi,Fr(e,0),gr(e,s),Mt(e,We()),o;switch(e.finishedWork=u,e.finishedLanes=s,n){case 0:case 1:throw Error(i(345));case 2:Vr(e,Pt,Wn);break;case 3:if(gr(e,s),(s&130023424)===s&&(n=sc+500-We(),10<n)){if(ol(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){Nt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=ma(Vr.bind(null,e,Pt,Wn),n);break}Vr(e,Pt,Wn);break;case 4:if(gr(e,s),(s&4194240)===s)break;for(n=e.eventTimes,u=-1;0<s;){var b=31-hn(s);h=1<<b,b=n[b],b>u&&(u=b),s&=~h}if(s=u,s=We()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Bm(s/1960))-s,10<s){e.timeoutHandle=ma(Vr.bind(null,e,Pt,Wn),s);break}Vr(e,Pt,Wn);break;case 5:Vr(e,Pt,Wn);break;default:throw Error(i(329))}}}return Mt(e,We()),e.callbackNode===o?Xf.bind(null,e):null}function uc(e,n){var o=_i;return e.current.memoizedState.isDehydrated&&(Fr(e,n).flags|=256),e=Kl(e,n),e!==2&&(n=Pt,Pt=o,n!==null&&dc(n)),e}function dc(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function Wm(e){for(var n=e;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var s=0;s<o.length;s++){var u=o[s],h=u.getSnapshot;u=u.value;try{if(!pn(h(),u))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function gr(e,n){for(n&=~lc,n&=~Bl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var o=31-hn(n),s=1<<o;e[o]=-1,n&=~s}}function Yf(e){if(($e&6)!==0)throw Error(i(327));_o();var n=ol(e,0);if((n&1)===0)return Mt(e,We()),null;var o=Kl(e,n);if(e.tag!==0&&o===2){var s=Us(e);s!==0&&(n=s,o=uc(e,s))}if(o===1)throw o=zi,Fr(e,0),gr(e,n),Mt(e,We()),o;if(o===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Vr(e,Pt,Wn),Mt(e,We()),null}function fc(e,n){var o=$e;$e|=1;try{return e(n)}finally{$e=o,$e===0&&(zo=We()+500,kl&&ar())}}function Hr(e){hr!==null&&hr.tag===0&&($e&6)===0&&_o();var n=$e;$e|=1;var o=ln.transition,s=Le;try{if(ln.transition=null,Le=1,e)return e()}finally{Le=s,ln.transition=o,$e=n,($e&6)===0&&ar()}}function hc(){Wt=No.current,Ve(No)}function Fr(e,n){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,bm(o)),et!==null)for(o=et.return;o!==null;){var s=o;switch(Sa(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&bl();break;case 3:ko(),Ve(Rt),Ve(vt),La();break;case 5:Pa(s);break;case 4:ko();break;case 13:Ve(Xe);break;case 19:Ve(Xe);break;case 10:_a(s.type._context);break;case 22:case 23:hc()}o=o.return}if(ct=e,et=e=mr(e.current,null),mt=Wt=n,it=0,zi=null,lc=Bl=Or=0,Pt=_i=null,Ar!==null){for(n=0;n<Ar.length;n++)if(o=Ar[n],s=o.interleaved,s!==null){o.interleaved=null;var u=s.next,h=o.pending;if(h!==null){var b=h.next;h.next=u,s.next=b}o.pending=s}Ar=null}return e}function qf(e,n){do{var o=et;try{if(za(),Pl.current=Il,Ml){for(var s=Ye.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Ml=!1}if(Dr=0,at=ot=Ye=null,bi=!1,Si=0,ic.current=null,o===null||o.return===null){it=1,zi=n,et=null;break}e:{var h=e,b=o.return,$=o,D=n;if(n=mt,$.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=D,ie=$,le=ie.tag;if((ie.mode&1)===0&&(le===0||le===11||le===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=vf(b);if(fe!==null){fe.flags&=-257,wf(fe,b,$,h,n),fe.mode&1&&xf(h,J,n),n=fe,D=J;var ge=n.updateQueue;if(ge===null){var xe=new Set;xe.add(D),n.updateQueue=xe}else ge.add(D);break e}else{if((n&1)===0){xf(h,J,n),pc();break e}D=Error(i(426))}}else if(Be&&$.mode&1){var Ge=vf(b);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),wf(Ge,b,$,h,n),Ca(Eo(D,$));break e}}h=D=Eo(D,$),it!==4&&(it=2),_i===null?_i=[h]:_i.push(h),h=b;do{switch(h.tag){case 3:h.flags|=65536,n&=-n,h.lanes|=n;var K=mf(h,D,n);Vd(h,K);break e;case 1:$=D;var W=h.type,G=h.stateNode;if((h.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(fr===null||!fr.has(G)))){h.flags|=65536,n&=-n,h.lanes|=n;var ce=yf(h,$,n);Vd(h,ce);break e}}h=h.return}while(h!==null)}Gf(o)}catch(ve){n=ve,et===o&&o!==null&&(et=o=o.return);continue}break}while(!0)}function Zf(){var e=Ul.current;return Ul.current=Il,e===null?Il:e}function pc(){(it===0||it===3||it===2)&&(it=4),ct===null||(Or&268435455)===0&&(Bl&268435455)===0||gr(ct,mt)}function Kl(e,n){var o=$e;$e|=2;var s=Zf();(ct!==e||mt!==n)&&(Wn=null,Fr(e,n));do try{Xm();break}catch(u){qf(e,u)}while(!0);if(za(),$e=o,Ul.current=s,et!==null)throw Error(i(261));return ct=null,mt=0,it}function Xm(){for(;et!==null;)Kf(et)}function Ym(){for(;et!==null&&!$r();)Kf(et)}function Kf(e){var n=e0(e.alternate,e,Wt);e.memoizedProps=e.pendingProps,n===null?Gf(e):et=n,ic.current=null}function Gf(e){var n=e;do{var o=n.alternate;if(e=n.return,(n.flags&32768)===0){if(o=Om(o,n,Wt),o!==null){et=o;return}}else{if(o=Hm(o,n),o!==null){o.flags&=32767,et=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,et=null;return}}if(n=n.sibling,n!==null){et=n;return}et=n=e}while(n!==null);it===0&&(it=5)}function Vr(e,n,o){var s=Le,u=ln.transition;try{ln.transition=null,Le=1,qm(e,n,o,s)}finally{ln.transition=u,Le=s}return null}function qm(e,n,o,s){do _o();while(hr!==null);if(($e&6)!==0)throw Error(i(327));o=e.finishedWork;var u=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var h=o.lanes|o.childLanes;if(_g(e,h),e===ct&&(et=ct=null,mt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Xl||(Xl=!0,t0(oo,function(){return _o(),null})),h=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||h){h=ln.transition,ln.transition=null;var b=Le;Le=1;var $=$e;$e|=4,ic.current=null,Vm(e,o),Ff(o,e),pm(pa),sl=!!ha,pa=ha=null,e.current=o,Um(o),Zo(),$e=$,Le=b,ln.transition=h}else e.current=o;if(Xl&&(Xl=!1,hr=e,Yl=u),h=e.pendingLanes,h===0&&(fr=null),Go(o.stateNode),Mt(e,We()),n!==null)for(s=e.onRecoverableError,o=0;o<n.length;o++)u=n[o],s(u.value,{componentStack:u.stack,digest:u.digest});if(Wl)throw Wl=!1,e=ac,ac=null,e;return(Yl&1)!==0&&e.tag!==0&&_o(),h=e.pendingLanes,(h&1)!==0?e===cc?ji++:(ji=0,cc=e):ji=0,ar(),null}function _o(){if(hr!==null){var e=Du(Yl),n=ln.transition,o=Le;try{if(ln.transition=null,Le=16>e?16:e,hr===null)var s=!1;else{if(e=hr,hr=null,Yl=0,($e&6)!==0)throw Error(i(331));var u=$e;for($e|=4,pe=e.current;pe!==null;){var h=pe,b=h.child;if((pe.flags&16)!==0){var $=h.deletions;if($!==null){for(var D=0;D<$.length;D++){var J=$[D];for(pe=J;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:Ni(8,ie,h)}var le=ie.child;if(le!==null)le.return=ie,pe=le;else for(;pe!==null;){ie=pe;var re=ie.sibling,fe=ie.return;if(Af(ie),ie===J){pe=null;break}if(re!==null){re.return=fe,pe=re;break}pe=fe}}}var ge=h.alternate;if(ge!==null){var xe=ge.child;if(xe!==null){ge.child=null;do{var Ge=xe.sibling;xe.sibling=null,xe=Ge}while(xe!==null)}}pe=h}}if((h.subtreeFlags&2064)!==0&&b!==null)b.return=h,pe=b;else e:for(;pe!==null;){if(h=pe,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Ni(9,h,h.return)}var K=h.sibling;if(K!==null){K.return=h.return,pe=K;break e}pe=h.return}}var W=e.current;for(pe=W;pe!==null;){b=pe;var G=b.child;if((b.subtreeFlags&2064)!==0&&G!==null)G.return=b,pe=G;else e:for(b=W;pe!==null;){if($=pe,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Vl(9,$)}}catch(ve){Ze($,$.return,ve)}if($===b){pe=null;break e}var ce=$.sibling;if(ce!==null){ce.return=$.return,pe=ce;break e}pe=$.return}}if($e=u,ar(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(io,e)}catch{}s=!0}return s}finally{Le=o,ln.transition=n}}return!1}function Qf(e,n,o){n=Eo(o,n),n=mf(e,n,1),e=ur(e,n,1),n=Nt(),e!==null&&(Jo(e,1,n),Mt(e,n))}function Ze(e,n,o){if(e.tag===3)Qf(e,e,o);else for(;n!==null;){if(n.tag===3){Qf(n,e,o);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(fr===null||!fr.has(s))){e=Eo(o,e),e=yf(n,e,1),n=ur(n,e,1),e=Nt(),n!==null&&(Jo(n,1,e),Mt(n,e));break}}n=n.return}}function Zm(e,n,o){var s=e.pingCache;s!==null&&s.delete(n),n=Nt(),e.pingedLanes|=e.suspendedLanes&o,ct===e&&(mt&o)===o&&(it===4||it===3&&(mt&130023424)===mt&&500>We()-sc?Fr(e,0):lc|=o),Mt(e,n)}function Jf(e,n){n===0&&((e.mode&1)===0?n=1:(n=rl,rl<<=1,(rl&130023424)===0&&(rl=4194304)));var o=Nt();e=Vn(e,n),e!==null&&(Jo(e,n,o),Mt(e,o))}function Km(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),Jf(e,o)}function Gm(e,n){var o=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(o=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}s!==null&&s.delete(n),Jf(e,o)}var e0;e0=function(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps||Rt.current)Tt=!0;else{if((e.lanes&o)===0&&(n.flags&128)===0)return Tt=!1,Dm(e,n,o);Tt=(e.flags&131072)!==0}else Tt=!1,Be&&(n.flags&1048576)!==0&&Td(n,Cl,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;Hl(e,n),e=n.pendingProps;var u=mo(n,vt.current);So(n,o),u=Da(null,n,s,e,u,o);var h=Oa();return n.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,$t(s)?(h=!0,Sl(n)):h=!1,n.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,$a(n),u.updater=Dl,n.stateNode=u,u._reactInternals=n,Wa(n,s,e,o),n=Za(null,n,s,!0,h,o)):(n.tag=0,Be&&h&&ba(n),Ct(null,n,u,o),n=n.child),n;case 16:s=n.elementType;e:{switch(Hl(e,n),e=n.pendingProps,u=s._init,s=u(s._payload),n.type=s,u=n.tag=Jm(s),e=mn(s,e),u){case 0:n=qa(null,n,s,e,o);break e;case 1:n=Nf(null,n,s,e,o);break e;case 11:n=bf(null,n,s,e,o);break e;case 14:n=Sf(null,n,s,mn(s.type,e),o);break e}throw Error(i(306,s,""))}return n;case 0:return s=n.type,u=n.pendingProps,u=n.elementType===s?u:mn(s,u),qa(e,n,s,u,o);case 1:return s=n.type,u=n.pendingProps,u=n.elementType===s?u:mn(s,u),Nf(e,n,s,u,o);case 3:e:{if(zf(n),e===null)throw Error(i(387));s=n.pendingProps,h=n.memoizedState,u=h.element,Fd(e,n),$l(n,s,null,o);var b=n.memoizedState;if(s=b.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){u=Eo(Error(i(423)),n),n=_f(e,n,s,o,u);break e}else if(s!==u){u=Eo(Error(i(424)),n),n=_f(e,n,s,o,u);break e}else for(Bt=ir(n.stateNode.containerInfo.firstChild),Ut=n,Be=!0,gn=null,o=Od(n,null,s,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(vo(),s===u){n=Bn(e,n,o);break e}Ct(e,n,s,o)}n=n.child}return n;case 5:return Bd(n),e===null&&Ea(n),s=n.type,u=n.pendingProps,h=e!==null?e.memoizedProps:null,b=u.children,ga(s,u)?b=null:h!==null&&ga(s,h)&&(n.flags|=32),Cf(e,n),Ct(e,n,b,o),n.child;case 6:return e===null&&Ea(n),null;case 13:return jf(e,n,o);case 4:return Ta(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=wo(n,null,s,o):Ct(e,n,s,o),n.child;case 11:return s=n.type,u=n.pendingProps,u=n.elementType===s?u:mn(s,u),bf(e,n,s,u,o);case 7:return Ct(e,n,n.pendingProps,o),n.child;case 8:return Ct(e,n,n.pendingProps.children,o),n.child;case 12:return Ct(e,n,n.pendingProps.children,o),n.child;case 10:e:{if(s=n.type._context,u=n.pendingProps,h=n.memoizedProps,b=u.value,De(_l,s._currentValue),s._currentValue=b,h!==null)if(pn(h.value,b)){if(h.children===u.children&&!Rt.current){n=Bn(e,n,o);break e}}else for(h=n.child,h!==null&&(h.return=n);h!==null;){var $=h.dependencies;if($!==null){b=h.child;for(var D=$.firstContext;D!==null;){if(D.context===s){if(h.tag===1){D=Un(-1,o&-o),D.tag=2;var J=h.updateQueue;if(J!==null){J=J.shared;var ie=J.pending;ie===null?D.next=D:(D.next=ie.next,ie.next=D),J.pending=D}}h.lanes|=o,D=h.alternate,D!==null&&(D.lanes|=o),ja(h.return,o,n),$.lanes|=o;break}D=D.next}}else if(h.tag===10)b=h.type===n.type?null:h.child;else if(h.tag===18){if(b=h.return,b===null)throw Error(i(341));b.lanes|=o,$=b.alternate,$!==null&&($.lanes|=o),ja(b,o,n),b=h.sibling}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===n){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}Ct(e,n,u.children,o),n=n.child}return n;case 9:return u=n.type,s=n.pendingProps.children,So(n,o),u=rn(u),s=s(u),n.flags|=1,Ct(e,n,s,o),n.child;case 14:return s=n.type,u=mn(s,n.pendingProps),u=mn(s.type,u),Sf(e,n,s,u,o);case 15:return kf(e,n,n.type,n.pendingProps,o);case 17:return s=n.type,u=n.pendingProps,u=n.elementType===s?u:mn(s,u),Hl(e,n),n.tag=1,$t(s)?(e=!0,Sl(n)):e=!1,So(n,o),pf(n,s,u),Wa(n,s,u,o),Za(null,n,s,!0,e,o);case 19:return $f(e,n,o);case 22:return Ef(e,n,o)}throw Error(i(156,n.tag))};function t0(e,n){return Ft(e,n)}function Qm(e,n,o,s){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,n,o,s){return new Qm(e,n,o,s)}function gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jm(e){if(typeof e=="function")return gc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===I)return 11;if(e===X)return 14}return 2}function mr(e,n){var o=e.alternate;return o===null?(o=sn(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Gl(e,n,o,s,u,h){var b=2;if(s=e,typeof e=="function")gc(e)&&(b=1);else if(typeof e=="string")b=5;else e:switch(e){case Z:return Ur(o.children,u,h,n);case Y:b=8,u|=8;break;case L:return e=sn(12,o,n,u|2),e.elementType=L,e.lanes=h,e;case Q:return e=sn(13,o,n,u),e.elementType=Q,e.lanes=h,e;case S:return e=sn(19,o,n,u),e.elementType=S,e.lanes=h,e;case q:return Ql(o,u,h,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:b=10;break e;case V:b=9;break e;case I:b=11;break e;case X:b=14;break e;case j:b=16,s=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return n=sn(b,o,n,u),n.elementType=e,n.type=s,n.lanes=h,n}function Ur(e,n,o,s){return e=sn(7,e,s,n),e.lanes=o,e}function Ql(e,n,o,s){return e=sn(22,e,s,n),e.elementType=q,e.lanes=o,e.stateNode={isHidden:!1},e}function mc(e,n,o){return e=sn(6,e,null,n),e.lanes=o,e}function yc(e,n,o){return n=sn(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ey(e,n,o,s,u){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bs(0),this.expirationTimes=Bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bs(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function xc(e,n,o,s,u,h,b,$,D){return e=new ey(e,n,o,$,D),n===1?(n=1,h===!0&&(n|=8)):n=0,h=sn(3,null,null,n),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},$a(h),e}function ty(e,n,o){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:s==null?null:""+s,children:e,containerInfo:n,implementation:o}}function n0(e){if(!e)return sr;e=e._reactInternals;e:{if(fn(e)!==e||e.tag!==1)throw Error(i(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if($t(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(i(171))}if(e.tag===1){var o=e.type;if($t(o))return jd(e,o,n)}return n}function r0(e,n,o,s,u,h,b,$,D){return e=xc(o,s,!0,e,u,h,b,$,D),e.context=n0(null),o=e.current,s=Nt(),u=pr(o),h=Un(s,u),h.callback=n??null,ur(o,h,u),e.current.lanes=u,Jo(e,u,s),Mt(e,s),e}function Jl(e,n,o,s){var u=n.current,h=Nt(),b=pr(u);return o=n0(o),n.context===null?n.context=o:n.pendingContext=o,n=Un(h,b),n.payload={element:e},s=s===void 0?null:s,s!==null&&(n.callback=s),e=ur(u,n,b),e!==null&&(vn(e,u,b,h),Rl(e,u,b)),b}function es(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function o0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function vc(e,n){o0(e,n),(e=e.alternate)&&o0(e,n)}function ny(){return null}var i0=typeof reportError=="function"?reportError:function(e){console.error(e)};function wc(e){this._internalRoot=e}ts.prototype.render=wc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));Jl(e,n,null,null)},ts.prototype.unmount=wc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Hr(function(){Jl(null,e,null,null)}),n[Dn]=null}};function ts(e){this._internalRoot=e}ts.prototype.unstable_scheduleHydration=function(e){if(e){var n=Fu();e={blockedOn:null,target:e,priority:n};for(var o=0;o<nr.length&&n!==0&&n<nr[o].priority;o++);nr.splice(o,0,e),o===0&&Bu(e)}};function bc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ns(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function l0(){}function ry(e,n,o,s,u){if(u){if(typeof s=="function"){var h=s;s=function(){var J=es(b);h.call(J)}}var b=r0(n,s,e,0,null,!1,!1,"",l0);return e._reactRootContainer=b,e[Dn]=b.current,hi(e.nodeType===8?e.parentNode:e),Hr(),b}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var $=s;s=function(){var J=es(D);$.call(J)}}var D=xc(e,0,!1,null,null,!1,!1,"",l0);return e._reactRootContainer=D,e[Dn]=D.current,hi(e.nodeType===8?e.parentNode:e),Hr(function(){Jl(n,D,o,s)}),D}function rs(e,n,o,s,u){var h=o._reactRootContainer;if(h){var b=h;if(typeof u=="function"){var $=u;u=function(){var D=es(b);$.call(D)}}Jl(n,b,e,u)}else b=ry(o,n,e,u,s);return es(b)}Ou=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var o=Qo(n.pendingLanes);o!==0&&(Ws(n,o|1),Mt(n,We()),($e&6)===0&&(zo=We()+500,ar()))}break;case 13:Hr(function(){var s=Vn(e,1);if(s!==null){var u=Nt();vn(s,e,1,u)}}),vc(e,1)}},Xs=function(e){if(e.tag===13){var n=Vn(e,134217728);if(n!==null){var o=Nt();vn(n,e,134217728,o)}vc(e,134217728)}},Hu=function(e){if(e.tag===13){var n=pr(e),o=Vn(e,n);if(o!==null){var s=Nt();vn(o,e,n,s)}vc(e,n)}},Fu=function(){return Le},Vu=function(e,n){var o=Le;try{return Le=e,n()}finally{Le=o}},cn=function(e,n,o){switch(n){case"input":if(Ce(e,o),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var s=o[n];if(s!==e&&s.form===e.form){var u=wl(s);if(!u)throw Error(i(90));Ae(s),Ce(s,u)}}}break;case"textarea":lt(e,o);break;case"select":n=o.value,n!=null&&pt(e,!!o.multiple,n,!1)}},Qr=fc,Jr=Hr;var oy={usingClientEntryPoint:!1,Events:[mi,po,wl,dn,Gr,fc]},Ri={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iy={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Et(e),e===null?null:e.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||ny,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var os=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!os.isDisabled&&os.supportsFiber)try{io=os.inject(iy),en=os}catch{}}return Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oy,Lt.createPortal=function(e,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bc(n))throw Error(i(200));return ty(e,n,null,o)},Lt.createRoot=function(e,n){if(!bc(e))throw Error(i(299));var o=!1,s="",u=i0;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),n=xc(e,1,!1,null,null,o,!1,s,u),e[Dn]=n.current,hi(e.nodeType===8?e.parentNode:e),new wc(n)},Lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Et(n),e=e===null?null:e.stateNode,e},Lt.flushSync=function(e){return Hr(e)},Lt.hydrate=function(e,n,o){if(!ns(n))throw Error(i(200));return rs(null,e,n,!0,o)},Lt.hydrateRoot=function(e,n,o){if(!bc(e))throw Error(i(405));var s=o!=null&&o.hydratedSources||null,u=!1,h="",b=i0;if(o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(b=o.onRecoverableError)),n=r0(n,null,e,1,o??null,u,!1,h,b),e[Dn]=n.current,hi(e),s)for(e=0;e<s.length;e++)o=s[e],u=o._getVersion,u=u(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,u]:n.mutableSourceEagerHydrationData.push(o,u);return new ts(n)},Lt.render=function(e,n,o){if(!ns(n))throw Error(i(200));return rs(null,e,n,!1,o)},Lt.unmountComponentAtNode=function(e){if(!ns(e))throw Error(i(40));return e._reactRootContainer?(Hr(function(){rs(null,null,e,!1,function(){e._reactRootContainer=null,e[Dn]=null})}),!0):!1},Lt.unstable_batchedUpdates=fc,Lt.unstable_renderSubtreeIntoContainer=function(e,n,o,s){if(!ns(o))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return rs(e,n,o,!1,s)},Lt.version="18.3.1-next-f1338f8080-20240426",Lt}var p0;function kh(){if(p0)return Ec.exports;p0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Ec.exports=fy(),Ec.exports}var g0;function hy(){if(g0)return is;g0=1;var t=kh();return is.createRoot=t.createRoot,is.hydrateRoot=t.hydrateRoot,is}var py=hy();const gy=cu(py);function ht(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let i=0,l;i<t.length;i++)(l=ht(t[i]))!==""&&(r+=(r&&" ")+l);else for(let i in t)t[i]&&(r+=(r&&" ")+i);return r}var zc={exports:{}},_c={},jc={exports:{}},Rc={};var m0;function my(){if(m0)return Rc;m0=1;var t=Zi();function r(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var i=typeof Object.is=="function"?Object.is:r,l=t.useState,a=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue;function f(v,x){var w=x(),C=l({inst:{value:w,getSnapshot:x}}),k=C[0].inst,z=C[1];return c(function(){k.value=w,k.getSnapshot=x,p(k)&&z({inst:k})},[v,w,x]),a(function(){return p(k)&&z({inst:k}),v(function(){p(k)&&z({inst:k})})},[v]),d(w),w}function p(v){var x=v.getSnapshot;v=v.value;try{var w=x();return!i(v,w)}catch{return!0}}function m(v,x){return x()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return Rc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,Rc}var y0;function yy(){return y0||(y0=1,jc.exports=my()),jc.exports}var x0;function xy(){if(x0)return _c;x0=1;var t=Zi(),r=yy();function i(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var l=typeof Object.is=="function"?Object.is:i,a=r.useSyncExternalStore,c=t.useRef,d=t.useEffect,f=t.useMemo,p=t.useDebugValue;return _c.useSyncExternalStoreWithSelector=function(m,y,v,x,w){var C=c(null);if(C.current===null){var k={hasValue:!1,value:null};C.current=k}else k=C.current;C=f(function(){function E(H){if(!T){if(T=!0,U=H,H=x(H),w!==void 0&&k.hasValue){var Z=k.value;if(w(Z,H))return R=Z}return R=H}if(Z=R,l(U,H))return Z;var Y=x(H);return w!==void 0&&w(Z,Y)?(U=H,Z):(U=H,R=Y)}var T=!1,U,R,O=v===void 0?null:v;return[function(){return E(y())},O===null?void 0:function(){return E(O())}]},[y,v,x,w]);var z=a(m,C[0],C[1]);return d(function(){k.hasValue=!0,k.value=z},[z]),p(z),z},_c}var v0;function vy(){return v0||(v0=1,zc.exports=xy()),zc.exports}var wy=vy();const by=cu(wy),Sy={},w0=t=>{let r;const i=new Set,l=(y,v)=>{const x=typeof y=="function"?y(r):y;if(!Object.is(x,r)){const w=r;r=v??(typeof x!="object"||x===null)?x:Object.assign({},r,x),i.forEach(C=>C(r,w))}},a=()=>r,p={setState:l,getState:a,getInitialState:()=>m,subscribe:y=>(i.add(y),()=>i.delete(y)),destroy:()=>{(Sy?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},m=r=t(l,a,p);return p},ky=t=>t?w0(t):w0,{useDebugValue:Ey}=ee,{useSyncExternalStoreWithSelector:Cy}=by,Ny=t=>t;function Eh(t,r=Ny,i){const l=Cy(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,i);return Ey(l),l}const b0=(t,r)=>{const i=ky(t),l=(a,c=r)=>Eh(i,a,c);return Object.assign(l,i),l},zy=(t,r)=>t?b0(t,r):b0;function ft(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[l,a]of t)if(!Object.is(a,r.get(l)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const l of t)if(!r.has(l))return!1;return!0}const i=Object.keys(t);if(i.length!==Object.keys(r).length)return!1;for(const l of i)if(!Object.prototype.hasOwnProperty.call(r,l)||!Object.is(t[l],r[l]))return!1;return!0}var _y={value:()=>{}};function Ms(){for(var t=0,r=arguments.length,i={},l;t<r;++t){if(!(l=arguments[t]+"")||l in i||/[\s.]/.test(l))throw new Error("illegal type: "+l);i[l]=[]}return new xs(i)}function xs(t){this._=t}function jy(t,r){return t.trim().split(/^|\s+/).map(function(i){var l="",a=i.indexOf(".");if(a>=0&&(l=i.slice(a+1),i=i.slice(0,a)),i&&!r.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:l}})}xs.prototype=Ms.prototype={constructor:xs,on:function(t,r){var i=this._,l=jy(t+"",i),a,c=-1,d=l.length;if(arguments.length<2){for(;++c<d;)if((a=(t=l[c]).type)&&(a=Ry(i[a],t.name)))return a;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++c<d;)if(a=(t=l[c]).type)i[a]=S0(i[a],t.name,r);else if(r==null)for(a in i)i[a]=S0(i[a],t.name,null);return this},copy:function(){var t={},r=this._;for(var i in r)t[i]=r[i].slice();return new xs(t)},call:function(t,r){if((a=arguments.length-2)>0)for(var i=new Array(a),l=0,a,c;l<a;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],l=0,a=c.length;l<a;++l)c[l].value.apply(r,i)},apply:function(t,r,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var l=this._[t],a=0,c=l.length;a<c;++a)l[a].value.apply(r,i)}};function Ry(t,r){for(var i=0,l=t.length,a;i<l;++i)if((a=t[i]).name===r)return a.value}function S0(t,r,i){for(var l=0,a=t.length;l<a;++l)if(t[l].name===r){t[l]=_y,t=t.slice(0,l).concat(t.slice(l+1));break}return i!=null&&t.push({name:r,value:i}),t}var Bc="http://www.w3.org/1999/xhtml";const k0={svg:"http://www.w3.org/2000/svg",xhtml:Bc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ls(t){var r=t+="",i=r.indexOf(":");return i>=0&&(r=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),k0.hasOwnProperty(r)?{space:k0[r],local:t}:t}function $y(t){return function(){var r=this.ownerDocument,i=this.namespaceURI;return i===Bc&&r.documentElement.namespaceURI===Bc?r.createElement(t):r.createElementNS(i,t)}}function Ty(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ch(t){var r=Ls(t);return(r.local?Ty:$y)(r)}function Py(){}function uu(t){return t==null?Py:function(){return this.querySelector(t)}}function My(t){typeof t!="function"&&(t=uu(t));for(var r=this._groups,i=r.length,l=new Array(i),a=0;a<i;++a)for(var c=r[a],d=c.length,f=l[a]=new Array(d),p,m,y=0;y<d;++y)(p=c[y])&&(m=t.call(p,p.__data__,y,c))&&("__data__"in p&&(m.__data__=p.__data__),f[y]=m);return new Zt(l,this._parents)}function Ly(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ay(){return[]}function Nh(t){return t==null?Ay:function(){return this.querySelectorAll(t)}}function Iy(t){return function(){return Ly(t.apply(this,arguments))}}function Dy(t){typeof t=="function"?t=Iy(t):t=Nh(t);for(var r=this._groups,i=r.length,l=[],a=[],c=0;c<i;++c)for(var d=r[c],f=d.length,p,m=0;m<f;++m)(p=d[m])&&(l.push(t.call(p,p.__data__,m,d)),a.push(p));return new Zt(l,a)}function zh(t){return function(){return this.matches(t)}}function _h(t){return function(r){return r.matches(t)}}var Oy=Array.prototype.find;function Hy(t){return function(){return Oy.call(this.children,t)}}function Fy(){return this.firstElementChild}function Vy(t){return this.select(t==null?Fy:Hy(typeof t=="function"?t:_h(t)))}var Uy=Array.prototype.filter;function By(){return Array.from(this.children)}function Wy(t){return function(){return Uy.call(this.children,t)}}function Xy(t){return this.selectAll(t==null?By:Wy(typeof t=="function"?t:_h(t)))}function Yy(t){typeof t!="function"&&(t=zh(t));for(var r=this._groups,i=r.length,l=new Array(i),a=0;a<i;++a)for(var c=r[a],d=c.length,f=l[a]=[],p,m=0;m<d;++m)(p=c[m])&&t.call(p,p.__data__,m,c)&&f.push(p);return new Zt(l,this._parents)}function jh(t){return new Array(t.length)}function qy(){return new Zt(this._enter||this._groups.map(jh),this._parents)}function Ss(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}Ss.prototype={constructor:Ss,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Zy(t){return function(){return t}}function Ky(t,r,i,l,a,c){for(var d=0,f,p=r.length,m=c.length;d<m;++d)(f=r[d])?(f.__data__=c[d],l[d]=f):i[d]=new Ss(t,c[d]);for(;d<p;++d)(f=r[d])&&(a[d]=f)}function Gy(t,r,i,l,a,c,d){var f,p,m=new Map,y=r.length,v=c.length,x=new Array(y),w;for(f=0;f<y;++f)(p=r[f])&&(x[f]=w=d.call(p,p.__data__,f,r)+"",m.has(w)?a[f]=p:m.set(w,p));for(f=0;f<v;++f)w=d.call(t,c[f],f,c)+"",(p=m.get(w))?(l[f]=p,p.__data__=c[f],m.delete(w)):i[f]=new Ss(t,c[f]);for(f=0;f<y;++f)(p=r[f])&&m.get(x[f])===p&&(a[f]=p)}function Qy(t){return t.__data__}function Jy(t,r){if(!arguments.length)return Array.from(this,Qy);var i=r?Gy:Ky,l=this._parents,a=this._groups;typeof t!="function"&&(t=Zy(t));for(var c=a.length,d=new Array(c),f=new Array(c),p=new Array(c),m=0;m<c;++m){var y=l[m],v=a[m],x=v.length,w=ex(t.call(y,y&&y.__data__,m,l)),C=w.length,k=f[m]=new Array(C),z=d[m]=new Array(C),E=p[m]=new Array(x);i(y,v,k,z,E,w,r);for(var T=0,U=0,R,O;T<C;++T)if(R=k[T]){for(T>=U&&(U=T+1);!(O=z[U])&&++U<C;);R._next=O||null}}return d=new Zt(d,l),d._enter=f,d._exit=p,d}function ex(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function tx(){return new Zt(this._exit||this._groups.map(jh),this._parents)}function nx(t,r,i){var l=this.enter(),a=this,c=this.exit();return typeof t=="function"?(l=t(l),l&&(l=l.selection())):l=l.append(t+""),r!=null&&(a=r(a),a&&(a=a.selection())),i==null?c.remove():i(c),l&&a?l.merge(a).order():a}function rx(t){for(var r=t.selection?t.selection():t,i=this._groups,l=r._groups,a=i.length,c=l.length,d=Math.min(a,c),f=new Array(a),p=0;p<d;++p)for(var m=i[p],y=l[p],v=m.length,x=f[p]=new Array(v),w,C=0;C<v;++C)(w=m[C]||y[C])&&(x[C]=w);for(;p<a;++p)f[p]=i[p];return new Zt(f,this._parents)}function ox(){for(var t=this._groups,r=-1,i=t.length;++r<i;)for(var l=t[r],a=l.length-1,c=l[a],d;--a>=0;)(d=l[a])&&(c&&d.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(d,c),c=d);return this}function ix(t){t||(t=lx);function r(v,x){return v&&x?t(v.__data__,x.__data__):!v-!x}for(var i=this._groups,l=i.length,a=new Array(l),c=0;c<l;++c){for(var d=i[c],f=d.length,p=a[c]=new Array(f),m,y=0;y<f;++y)(m=d[y])&&(p[y]=m);p.sort(r)}return new Zt(a,this._parents).order()}function lx(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function sx(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ax(){return Array.from(this)}function cx(){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var l=t[r],a=0,c=l.length;a<c;++a){var d=l[a];if(d)return d}return null}function ux(){let t=0;for(const r of this)++t;return t}function dx(){return!this.node()}function fx(t){for(var r=this._groups,i=0,l=r.length;i<l;++i)for(var a=r[i],c=0,d=a.length,f;c<d;++c)(f=a[c])&&t.call(f,f.__data__,c,a);return this}function hx(t){return function(){this.removeAttribute(t)}}function px(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gx(t,r){return function(){this.setAttribute(t,r)}}function mx(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function yx(t,r){return function(){var i=r.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function xx(t,r){return function(){var i=r.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function vx(t,r){var i=Ls(t);if(arguments.length<2){var l=this.node();return i.local?l.getAttributeNS(i.space,i.local):l.getAttribute(i)}return this.each((r==null?i.local?px:hx:typeof r=="function"?i.local?xx:yx:i.local?mx:gx)(i,r))}function Rh(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function wx(t){return function(){this.style.removeProperty(t)}}function bx(t,r,i){return function(){this.style.setProperty(t,r,i)}}function Sx(t,r,i){return function(){var l=r.apply(this,arguments);l==null?this.style.removeProperty(t):this.style.setProperty(t,l,i)}}function kx(t,r,i){return arguments.length>1?this.each((r==null?wx:typeof r=="function"?Sx:bx)(t,r,i??"")):Vo(this.node(),t)}function Vo(t,r){return t.style.getPropertyValue(r)||Rh(t).getComputedStyle(t,null).getPropertyValue(r)}function Ex(t){return function(){delete this[t]}}function Cx(t,r){return function(){this[t]=r}}function Nx(t,r){return function(){var i=r.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function zx(t,r){return arguments.length>1?this.each((r==null?Ex:typeof r=="function"?Nx:Cx)(t,r)):this.node()[t]}function $h(t){return t.trim().split(/^|\s+/)}function du(t){return t.classList||new Th(t)}function Th(t){this._node=t,this._names=$h(t.getAttribute("class")||"")}Th.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ph(t,r){for(var i=du(t),l=-1,a=r.length;++l<a;)i.add(r[l])}function Mh(t,r){for(var i=du(t),l=-1,a=r.length;++l<a;)i.remove(r[l])}function _x(t){return function(){Ph(this,t)}}function jx(t){return function(){Mh(this,t)}}function Rx(t,r){return function(){(r.apply(this,arguments)?Ph:Mh)(this,t)}}function $x(t,r){var i=$h(t+"");if(arguments.length<2){for(var l=du(this.node()),a=-1,c=i.length;++a<c;)if(!l.contains(i[a]))return!1;return!0}return this.each((typeof r=="function"?Rx:r?_x:jx)(i,r))}function Tx(){this.textContent=""}function Px(t){return function(){this.textContent=t}}function Mx(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Lx(t){return arguments.length?this.each(t==null?Tx:(typeof t=="function"?Mx:Px)(t)):this.node().textContent}function Ax(){this.innerHTML=""}function Ix(t){return function(){this.innerHTML=t}}function Dx(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function Ox(t){return arguments.length?this.each(t==null?Ax:(typeof t=="function"?Dx:Ix)(t)):this.node().innerHTML}function Hx(){this.nextSibling&&this.parentNode.appendChild(this)}function Fx(){return this.each(Hx)}function Vx(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ux(){return this.each(Vx)}function Bx(t){var r=typeof t=="function"?t:Ch(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function Wx(){return null}function Xx(t,r){var i=typeof t=="function"?t:Ch(t),l=r==null?Wx:typeof r=="function"?r:uu(r);return this.select(function(){return this.insertBefore(i.apply(this,arguments),l.apply(this,arguments)||null)})}function Yx(){var t=this.parentNode;t&&t.removeChild(this)}function qx(){return this.each(Yx)}function Zx(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Kx(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Gx(t){return this.select(t?Kx:Zx)}function Qx(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Jx(t){return function(r){t.call(this,r,this.__data__)}}function e1(t){return t.trim().split(/^|\s+/).map(function(r){var i="",l=r.indexOf(".");return l>=0&&(i=r.slice(l+1),r=r.slice(0,l)),{type:r,name:i}})}function t1(t){return function(){var r=this.__on;if(r){for(var i=0,l=-1,a=r.length,c;i<a;++i)c=r[i],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):r[++l]=c;++l?r.length=l:delete this.__on}}}function n1(t,r,i){return function(){var l=this.__on,a,c=Jx(r);if(l){for(var d=0,f=l.length;d<f;++d)if((a=l[d]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=c,a.options=i),a.value=r;return}}this.addEventListener(t.type,c,i),a={type:t.type,name:t.name,value:r,listener:c,options:i},l?l.push(a):this.__on=[a]}}function r1(t,r,i){var l=e1(t+""),a,c=l.length,d;if(arguments.length<2){var f=this.node().__on;if(f){for(var p=0,m=f.length,y;p<m;++p)for(a=0,y=f[p];a<c;++a)if((d=l[a]).type===y.type&&d.name===y.name)return y.value}return}for(f=r?n1:t1,a=0;a<c;++a)this.each(f(l[a],r,i));return this}function Lh(t,r,i){var l=Rh(t),a=l.CustomEvent;typeof a=="function"?a=new a(r,i):(a=l.document.createEvent("Event"),i?(a.initEvent(r,i.bubbles,i.cancelable),a.detail=i.detail):a.initEvent(r,!1,!1)),t.dispatchEvent(a)}function o1(t,r){return function(){return Lh(this,t,r)}}function i1(t,r){return function(){return Lh(this,t,r.apply(this,arguments))}}function l1(t,r){return this.each((typeof r=="function"?i1:o1)(t,r))}function*s1(){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var l=t[r],a=0,c=l.length,d;a<c;++a)(d=l[a])&&(yield d)}var Ah=[null];function Zt(t,r){this._groups=t,this._parents=r}function Ki(){return new Zt([[document.documentElement]],Ah)}function a1(){return this}Zt.prototype=Ki.prototype={constructor:Zt,select:My,selectAll:Dy,selectChild:Vy,selectChildren:Xy,filter:Yy,data:Jy,enter:qy,exit:tx,join:nx,merge:rx,selection:a1,order:ox,sort:ix,call:sx,nodes:ax,node:cx,size:ux,empty:dx,each:fx,attr:vx,style:kx,property:zx,classed:$x,text:Lx,html:Ox,raise:Fx,lower:Ux,append:Bx,insert:Xx,remove:qx,clone:Gx,datum:Qx,on:r1,dispatch:l1,[Symbol.iterator]:s1};function Yt(t){return typeof t=="string"?new Zt([[document.querySelector(t)]],[document.documentElement]):new Zt([[t]],Ah)}function c1(t){let r;for(;r=t.sourceEvent;)t=r;return t}function wn(t,r){if(t=c1(t),r===void 0&&(r=t.currentTarget),r){var i=r.ownerSVGElement||r;if(i.createSVGPoint){var l=i.createSVGPoint();return l.x=t.clientX,l.y=t.clientY,l=l.matrixTransform(r.getScreenCTM().inverse()),[l.x,l.y]}if(r.getBoundingClientRect){var a=r.getBoundingClientRect();return[t.clientX-a.left-r.clientLeft,t.clientY-a.top-r.clientTop]}}return[t.pageX,t.pageY]}const u1={passive:!1},Hi={capture:!0,passive:!1};function $c(t){t.stopImmediatePropagation()}function Io(t){t.preventDefault(),t.stopImmediatePropagation()}function Ih(t){var r=t.document.documentElement,i=Yt(t).on("dragstart.drag",Io,Hi);"onselectstart"in r?i.on("selectstart.drag",Io,Hi):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Dh(t,r){var i=t.document.documentElement,l=Yt(t).on("dragstart.drag",null);r&&(l.on("click.drag",Io,Hi),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in i?l.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const ls=t=>()=>t;function Wc(t,{sourceEvent:r,subject:i,target:l,identifier:a,active:c,x:d,y:f,dx:p,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Wc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function d1(t){return!t.ctrlKey&&!t.button}function f1(){return this.parentNode}function h1(t,r){return r??{x:t.x,y:t.y}}function p1(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oh(){var t=d1,r=f1,i=h1,l=p1,a={},c=Ms("start","drag","end"),d=0,f,p,m,y,v=0;function x(R){R.on("mousedown.drag",w).filter(l).on("touchstart.drag",z).on("touchmove.drag",E,u1).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(R,O){if(!(y||!t.call(this,R,O))){var H=U(this,r.call(this,R,O),R,O,"mouse");H&&(Yt(R.view).on("mousemove.drag",C,Hi).on("mouseup.drag",k,Hi),Ih(R.view),$c(R),m=!1,f=R.clientX,p=R.clientY,H("start",R))}}function C(R){if(Io(R),!m){var O=R.clientX-f,H=R.clientY-p;m=O*O+H*H>v}a.mouse("drag",R)}function k(R){Yt(R.view).on("mousemove.drag mouseup.drag",null),Dh(R.view,m),Io(R),a.mouse("end",R)}function z(R,O){if(t.call(this,R,O)){var H=R.changedTouches,Z=r.call(this,R,O),Y=H.length,L,A;for(L=0;L<Y;++L)(A=U(this,Z,R,O,H[L].identifier,H[L]))&&($c(R),A("start",R,H[L]))}}function E(R){var O=R.changedTouches,H=O.length,Z,Y;for(Z=0;Z<H;++Z)(Y=a[O[Z].identifier])&&(Io(R),Y("drag",R,O[Z]))}function T(R){var O=R.changedTouches,H=O.length,Z,Y;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),Z=0;Z<H;++Z)(Y=a[O[Z].identifier])&&($c(R),Y("end",R,O[Z]))}function U(R,O,H,Z,Y,L){var A=c.copy(),V=wn(L||H,O),I,Q,S;if((S=i.call(R,new Wc("beforestart",{sourceEvent:H,target:x,identifier:Y,active:d,x:V[0],y:V[1],dx:0,dy:0,dispatch:A}),Z))!=null)return I=S.x-V[0]||0,Q=S.y-V[1]||0,function X(j,q,F){var M=V,B;switch(j){case"start":a[Y]=X,B=d++;break;case"end":delete a[Y],--d;case"drag":V=wn(F||q,O),B=d;break}A.call(j,R,new Wc(j,{sourceEvent:q,subject:S,target:x,identifier:Y,active:B,x:V[0]+I,y:V[1]+Q,dx:V[0]-M[0],dy:V[1]-M[1],dispatch:A}),Z)}}return x.filter=function(R){return arguments.length?(t=typeof R=="function"?R:ls(!!R),x):t},x.container=function(R){return arguments.length?(r=typeof R=="function"?R:ls(R),x):r},x.subject=function(R){return arguments.length?(i=typeof R=="function"?R:ls(R),x):i},x.touchable=function(R){return arguments.length?(l=typeof R=="function"?R:ls(!!R),x):l},x.on=function(){var R=c.on.apply(c,arguments);return R===c?x:R},x.clickDistance=function(R){return arguments.length?(v=(R=+R)*R,x):Math.sqrt(v)},x}function fu(t,r,i){t.prototype=r.prototype=i,i.constructor=t}function Hh(t,r){var i=Object.create(t.prototype);for(var l in r)i[l]=r[l];return i}function Gi(){}var Fi=.7,ks=1/Fi,Do="\\s*([+-]?\\d+)\\s*",Vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g1=/^#([0-9a-f]{3,8})$/,m1=new RegExp(`^rgb\\(${Do},${Do},${Do}\\)$`),y1=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),x1=new RegExp(`^rgba\\(${Do},${Do},${Do},${Vi}\\)$`),v1=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${Vi}\\)$`),w1=new RegExp(`^hsl\\(${Vi},${Rn},${Rn}\\)$`),b1=new RegExp(`^hsla\\(${Vi},${Rn},${Rn},${Vi}\\)$`),E0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fu(Gi,Ui,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:C0,formatHex:C0,formatHex8:S1,formatHsl:k1,formatRgb:N0,toString:N0});function C0(){return this.rgb().formatHex()}function S1(){return this.rgb().formatHex8()}function k1(){return Fh(this).formatHsl()}function N0(){return this.rgb().formatRgb()}function Ui(t){var r,i;return t=(t+"").trim().toLowerCase(),(r=g1.exec(t))?(i=r[1].length,r=parseInt(r[1],16),i===6?z0(r):i===3?new At(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):i===8?ss(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):i===4?ss(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=m1.exec(t))?new At(r[1],r[2],r[3],1):(r=y1.exec(t))?new At(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=x1.exec(t))?ss(r[1],r[2],r[3],r[4]):(r=v1.exec(t))?ss(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=w1.exec(t))?R0(r[1],r[2]/100,r[3]/100,1):(r=b1.exec(t))?R0(r[1],r[2]/100,r[3]/100,r[4]):E0.hasOwnProperty(t)?z0(E0[t]):t==="transparent"?new At(NaN,NaN,NaN,0):null}function z0(t){return new At(t>>16&255,t>>8&255,t&255,1)}function ss(t,r,i,l){return l<=0&&(t=r=i=NaN),new At(t,r,i,l)}function E1(t){return t instanceof Gi||(t=Ui(t)),t?(t=t.rgb(),new At(t.r,t.g,t.b,t.opacity)):new At}function Xc(t,r,i,l){return arguments.length===1?E1(t):new At(t,r,i,l??1)}function At(t,r,i,l){this.r=+t,this.g=+r,this.b=+i,this.opacity=+l}fu(At,Xc,Hh(Gi,{brighter(t){return t=t==null?ks:Math.pow(ks,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Fi:Math.pow(Fi,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new At(Yr(this.r),Yr(this.g),Yr(this.b),Es(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_0,formatHex:_0,formatHex8:C1,formatRgb:j0,toString:j0}));function _0(){return`#${Wr(this.r)}${Wr(this.g)}${Wr(this.b)}`}function C1(){return`#${Wr(this.r)}${Wr(this.g)}${Wr(this.b)}${Wr((isNaN(this.opacity)?1:this.opacity)*255)}`}function j0(){const t=Es(this.opacity);return`${t===1?"rgb(":"rgba("}${Yr(this.r)}, ${Yr(this.g)}, ${Yr(this.b)}${t===1?")":`, ${t})`}`}function Es(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wr(t){return t=Yr(t),(t<16?"0":"")+t.toString(16)}function R0(t,r,i,l){return l<=0?t=r=i=NaN:i<=0||i>=1?t=r=NaN:r<=0&&(t=NaN),new bn(t,r,i,l)}function Fh(t){if(t instanceof bn)return new bn(t.h,t.s,t.l,t.opacity);if(t instanceof Gi||(t=Ui(t)),!t)return new bn;if(t instanceof bn)return t;t=t.rgb();var r=t.r/255,i=t.g/255,l=t.b/255,a=Math.min(r,i,l),c=Math.max(r,i,l),d=NaN,f=c-a,p=(c+a)/2;return f?(r===c?d=(i-l)/f+(i<l)*6:i===c?d=(l-r)/f+2:d=(r-i)/f+4,f/=p<.5?c+a:2-c-a,d*=60):f=p>0&&p<1?0:d,new bn(d,f,p,t.opacity)}function N1(t,r,i,l){return arguments.length===1?Fh(t):new bn(t,r,i,l??1)}function bn(t,r,i,l){this.h=+t,this.s=+r,this.l=+i,this.opacity=+l}fu(bn,N1,Hh(Gi,{brighter(t){return t=t==null?ks:Math.pow(ks,t),new bn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Fi:Math.pow(Fi,t),new bn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,l=i+(i<.5?i:1-i)*r,a=2*i-l;return new At(Tc(t>=240?t-240:t+120,a,l),Tc(t,a,l),Tc(t<120?t+240:t-120,a,l),this.opacity)},clamp(){return new bn($0(this.h),as(this.s),as(this.l),Es(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Es(this.opacity);return`${t===1?"hsl(":"hsla("}${$0(this.h)}, ${as(this.s)*100}%, ${as(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $0(t){return t=(t||0)%360,t<0?t+360:t}function as(t){return Math.max(0,Math.min(1,t||0))}function Tc(t,r,i){return(t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r)*255}const Vh=t=>()=>t;function z1(t,r){return function(i){return t+i*r}}function _1(t,r,i){return t=Math.pow(t,i),r=Math.pow(r,i)-t,i=1/i,function(l){return Math.pow(t+l*r,i)}}function j1(t){return(t=+t)==1?Uh:function(r,i){return i-r?_1(r,i,t):Vh(isNaN(r)?i:r)}}function Uh(t,r){var i=r-t;return i?z1(t,i):Vh(isNaN(t)?r:t)}const T0=(function t(r){var i=j1(r);function l(a,c){var d=i((a=Xc(a)).r,(c=Xc(c)).r),f=i(a.g,c.g),p=i(a.b,c.b),m=Uh(a.opacity,c.opacity);return function(y){return a.r=d(y),a.g=f(y),a.b=p(y),a.opacity=m(y),a+""}}return l.gamma=t,l})(1);function vr(t,r){return t=+t,r=+r,function(i){return t*(1-i)+r*i}}var Yc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pc=new RegExp(Yc.source,"g");function R1(t){return function(){return t}}function $1(t){return function(r){return t(r)+""}}function T1(t,r){var i=Yc.lastIndex=Pc.lastIndex=0,l,a,c,d=-1,f=[],p=[];for(t=t+"",r=r+"";(l=Yc.exec(t))&&(a=Pc.exec(r));)(c=a.index)>i&&(c=r.slice(i,c),f[d]?f[d]+=c:f[++d]=c),(l=l[0])===(a=a[0])?f[d]?f[d]+=a:f[++d]=a:(f[++d]=null,p.push({i:d,x:vr(l,a)})),i=Pc.lastIndex;return i<r.length&&(c=r.slice(i),f[d]?f[d]+=c:f[++d]=c),f.length<2?p[0]?$1(p[0].x):R1(r):(r=p.length,function(m){for(var y=0,v;y<r;++y)f[(v=p[y]).i]=v.x(m);return f.join("")})}var P0=180/Math.PI,qc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bh(t,r,i,l,a,c){var d,f,p;return(d=Math.sqrt(t*t+r*r))&&(t/=d,r/=d),(p=t*i+r*l)&&(i-=t*p,l-=r*p),(f=Math.sqrt(i*i+l*l))&&(i/=f,l/=f,p/=f),t*l<r*i&&(t=-t,r=-r,p=-p,d=-d),{translateX:a,translateY:c,rotate:Math.atan2(r,t)*P0,skewX:Math.atan(p)*P0,scaleX:d,scaleY:f}}var cs;function P1(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?qc:Bh(r.a,r.b,r.c,r.d,r.e,r.f)}function M1(t){return t==null||(cs||(cs=document.createElementNS("http://www.w3.org/2000/svg","g")),cs.setAttribute("transform",t),!(t=cs.transform.baseVal.consolidate()))?qc:(t=t.matrix,Bh(t.a,t.b,t.c,t.d,t.e,t.f))}function Wh(t,r,i,l){function a(m){return m.length?m.pop()+" ":""}function c(m,y,v,x,w,C){if(m!==v||y!==x){var k=w.push("translate(",null,r,null,i);C.push({i:k-4,x:vr(m,v)},{i:k-2,x:vr(y,x)})}else(v||x)&&w.push("translate("+v+r+x+i)}function d(m,y,v,x){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),x.push({i:v.push(a(v)+"rotate(",null,l)-2,x:vr(m,y)})):y&&v.push(a(v)+"rotate("+y+l)}function f(m,y,v,x){m!==y?x.push({i:v.push(a(v)+"skewX(",null,l)-2,x:vr(m,y)}):y&&v.push(a(v)+"skewX("+y+l)}function p(m,y,v,x,w,C){if(m!==v||y!==x){var k=w.push(a(w)+"scale(",null,",",null,")");C.push({i:k-4,x:vr(m,v)},{i:k-2,x:vr(y,x)})}else(v!==1||x!==1)&&w.push(a(w)+"scale("+v+","+x+")")}return function(m,y){var v=[],x=[];return m=t(m),y=t(y),c(m.translateX,m.translateY,y.translateX,y.translateY,v,x),d(m.rotate,y.rotate,v,x),f(m.skewX,y.skewX,v,x),p(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,x),m=y=null,function(w){for(var C=-1,k=x.length,z;++C<k;)v[(z=x[C]).i]=z.x(w);return v.join("")}}}var L1=Wh(P1,"px, ","px)","deg)"),A1=Wh(M1,", ",")",")"),I1=1e-12;function M0(t){return((t=Math.exp(t))+1/t)/2}function D1(t){return((t=Math.exp(t))-1/t)/2}function O1(t){return((t=Math.exp(2*t))-1)/(t+1)}const H1=(function t(r,i,l){function a(c,d){var f=c[0],p=c[1],m=c[2],y=d[0],v=d[1],x=d[2],w=y-f,C=v-p,k=w*w+C*C,z,E;if(k<I1)E=Math.log(x/m)/r,z=function(Z){return[f+Z*w,p+Z*C,m*Math.exp(r*Z*E)]};else{var T=Math.sqrt(k),U=(x*x-m*m+l*k)/(2*m*i*T),R=(x*x-m*m-l*k)/(2*x*i*T),O=Math.log(Math.sqrt(U*U+1)-U),H=Math.log(Math.sqrt(R*R+1)-R);E=(H-O)/r,z=function(Z){var Y=Z*E,L=M0(O),A=m/(i*T)*(L*O1(r*Y+O)-D1(O));return[f+A*w,p+A*C,m*L/M0(r*Y+O)]}}return z.duration=E*1e3*r/Math.SQRT2,z}return a.rho=function(c){var d=Math.max(.001,+c),f=d*d,p=f*f;return t(d,f,p)},a})(Math.SQRT2,2,4);var Uo=0,Ii=0,Ti=0,Xh=1e3,Cs,Di,Ns=0,Zr=0,As=0,Bi=typeof performance=="object"&&performance.now?performance:Date,Yh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function hu(){return Zr||(Yh(F1),Zr=Bi.now()+As)}function F1(){Zr=0}function zs(){this._call=this._time=this._next=null}zs.prototype=qh.prototype={constructor:zs,restart:function(t,r,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?hu():+i)+(r==null?0:+r),!this._next&&Di!==this&&(Di?Di._next=this:Cs=this,Di=this),this._call=t,this._time=i,Zc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zc())}};function qh(t,r,i){var l=new zs;return l.restart(t,r,i),l}function V1(){hu(),++Uo;for(var t=Cs,r;t;)(r=Zr-t._time)>=0&&t._call.call(void 0,r),t=t._next;--Uo}function L0(){Zr=(Ns=Bi.now())+As,Uo=Ii=0;try{V1()}finally{Uo=0,B1(),Zr=0}}function U1(){var t=Bi.now(),r=t-Ns;r>Xh&&(As-=r,Ns=t)}function B1(){for(var t,r=Cs,i,l=1/0;r;)r._call?(l>r._time&&(l=r._time),t=r,r=r._next):(i=r._next,r._next=null,r=t?t._next=i:Cs=i);Di=t,Zc(l)}function Zc(t){if(!Uo){Ii&&(Ii=clearTimeout(Ii));var r=t-Zr;r>24?(t<1/0&&(Ii=setTimeout(L0,t-Bi.now()-As)),Ti&&(Ti=clearInterval(Ti))):(Ti||(Ns=Bi.now(),Ti=setInterval(U1,Xh)),Uo=1,Yh(L0))}}function A0(t,r,i){var l=new zs;return r=r==null?0:+r,l.restart(a=>{l.stop(),t(a+r)},r,i),l}var W1=Ms("start","end","cancel","interrupt"),X1=[],Zh=0,I0=1,Kc=2,vs=3,D0=4,Gc=5,ws=6;function Is(t,r,i,l,a,c){var d=t.__transition;if(!d)t.__transition={};else if(i in d)return;Y1(t,i,{name:r,index:l,group:a,on:W1,tween:X1,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:Zh})}function pu(t,r){var i=kn(t,r);if(i.state>Zh)throw new Error("too late; already scheduled");return i}function $n(t,r){var i=kn(t,r);if(i.state>vs)throw new Error("too late; already running");return i}function kn(t,r){var i=t.__transition;if(!i||!(i=i[r]))throw new Error("transition not found");return i}function Y1(t,r,i){var l=t.__transition,a;l[r]=i,i.timer=qh(c,0,i.time);function c(m){i.state=I0,i.timer.restart(d,i.delay,i.time),i.delay<=m&&d(m-i.delay)}function d(m){var y,v,x,w;if(i.state!==I0)return p();for(y in l)if(w=l[y],w.name===i.name){if(w.state===vs)return A0(d);w.state===D0?(w.state=ws,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete l[y]):+y<r&&(w.state=ws,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete l[y])}if(A0(function(){i.state===vs&&(i.state=D0,i.timer.restart(f,i.delay,i.time),f(m))}),i.state=Kc,i.on.call("start",t,t.__data__,i.index,i.group),i.state===Kc){for(i.state=vs,a=new Array(x=i.tween.length),y=0,v=-1;y<x;++y)(w=i.tween[y].value.call(t,t.__data__,i.index,i.group))&&(a[++v]=w);a.length=v+1}}function f(m){for(var y=m<i.duration?i.ease.call(null,m/i.duration):(i.timer.restart(p),i.state=Gc,1),v=-1,x=a.length;++v<x;)a[v].call(t,y);i.state===Gc&&(i.on.call("end",t,t.__data__,i.index,i.group),p())}function p(){i.state=ws,i.timer.stop(),delete l[r];for(var m in l)return;delete t.__transition}}function bs(t,r){var i=t.__transition,l,a,c=!0,d;if(i){r=r==null?null:r+"";for(d in i){if((l=i[d]).name!==r){c=!1;continue}a=l.state>Kc&&l.state<Gc,l.state=ws,l.timer.stop(),l.on.call(a?"interrupt":"cancel",t,t.__data__,l.index,l.group),delete i[d]}c&&delete t.__transition}}function q1(t){return this.each(function(){bs(this,t)})}function Z1(t,r){var i,l;return function(){var a=$n(this,t),c=a.tween;if(c!==i){l=i=c;for(var d=0,f=l.length;d<f;++d)if(l[d].name===r){l=l.slice(),l.splice(d,1);break}}a.tween=l}}function K1(t,r,i){var l,a;if(typeof i!="function")throw new Error;return function(){var c=$n(this,t),d=c.tween;if(d!==l){a=(l=d).slice();for(var f={name:r,value:i},p=0,m=a.length;p<m;++p)if(a[p].name===r){a[p]=f;break}p===m&&a.push(f)}c.tween=a}}function G1(t,r){var i=this._id;if(t+="",arguments.length<2){for(var l=kn(this.node(),i).tween,a=0,c=l.length,d;a<c;++a)if((d=l[a]).name===t)return d.value;return null}return this.each((r==null?Z1:K1)(i,t,r))}function gu(t,r,i){var l=t._id;return t.each(function(){var a=$n(this,l);(a.value||(a.value={}))[r]=i.apply(this,arguments)}),function(a){return kn(a,l).value[r]}}function Kh(t,r){var i;return(typeof r=="number"?vr:r instanceof Ui?T0:(i=Ui(r))?(r=i,T0):T1)(t,r)}function Q1(t){return function(){this.removeAttribute(t)}}function J1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ev(t,r,i){var l,a=i+"",c;return function(){var d=this.getAttribute(t);return d===a?null:d===l?c:c=r(l=d,i)}}function tv(t,r,i){var l,a=i+"",c;return function(){var d=this.getAttributeNS(t.space,t.local);return d===a?null:d===l?c:c=r(l=d,i)}}function nv(t,r,i){var l,a,c;return function(){var d,f=i(this),p;return f==null?void this.removeAttribute(t):(d=this.getAttribute(t),p=f+"",d===p?null:d===l&&p===a?c:(a=p,c=r(l=d,f)))}}function rv(t,r,i){var l,a,c;return function(){var d,f=i(this),p;return f==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),p=f+"",d===p?null:d===l&&p===a?c:(a=p,c=r(l=d,f)))}}function ov(t,r){var i=Ls(t),l=i==="transform"?A1:Kh;return this.attrTween(t,typeof r=="function"?(i.local?rv:nv)(i,l,gu(this,"attr."+t,r)):r==null?(i.local?J1:Q1)(i):(i.local?tv:ev)(i,l,r))}function iv(t,r){return function(i){this.setAttribute(t,r.call(this,i))}}function lv(t,r){return function(i){this.setAttributeNS(t.space,t.local,r.call(this,i))}}function sv(t,r){var i,l;function a(){var c=r.apply(this,arguments);return c!==l&&(i=(l=c)&&lv(t,c)),i}return a._value=r,a}function av(t,r){var i,l;function a(){var c=r.apply(this,arguments);return c!==l&&(i=(l=c)&&iv(t,c)),i}return a._value=r,a}function cv(t,r){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;var l=Ls(t);return this.tween(i,(l.local?sv:av)(l,r))}function uv(t,r){return function(){pu(this,t).delay=+r.apply(this,arguments)}}function dv(t,r){return r=+r,function(){pu(this,t).delay=r}}function fv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?uv:dv)(r,t)):kn(this.node(),r).delay}function hv(t,r){return function(){$n(this,t).duration=+r.apply(this,arguments)}}function pv(t,r){return r=+r,function(){$n(this,t).duration=r}}function gv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?hv:pv)(r,t)):kn(this.node(),r).duration}function mv(t,r){if(typeof r!="function")throw new Error;return function(){$n(this,t).ease=r}}function yv(t){var r=this._id;return arguments.length?this.each(mv(r,t)):kn(this.node(),r).ease}function xv(t,r){return function(){var i=r.apply(this,arguments);if(typeof i!="function")throw new Error;$n(this,t).ease=i}}function vv(t){if(typeof t!="function")throw new Error;return this.each(xv(this._id,t))}function wv(t){typeof t!="function"&&(t=zh(t));for(var r=this._groups,i=r.length,l=new Array(i),a=0;a<i;++a)for(var c=r[a],d=c.length,f=l[a]=[],p,m=0;m<d;++m)(p=c[m])&&t.call(p,p.__data__,m,c)&&f.push(p);return new Kn(l,this._parents,this._name,this._id)}function bv(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,i=t._groups,l=r.length,a=i.length,c=Math.min(l,a),d=new Array(l),f=0;f<c;++f)for(var p=r[f],m=i[f],y=p.length,v=d[f]=new Array(y),x,w=0;w<y;++w)(x=p[w]||m[w])&&(v[w]=x);for(;f<l;++f)d[f]=r[f];return new Kn(d,this._parents,this._name,this._id)}function Sv(t){return(t+"").trim().split(/^|\s+/).every(function(r){var i=r.indexOf(".");return i>=0&&(r=r.slice(0,i)),!r||r==="start"})}function kv(t,r,i){var l,a,c=Sv(r)?pu:$n;return function(){var d=c(this,t),f=d.on;f!==l&&(a=(l=f).copy()).on(r,i),d.on=a}}function Ev(t,r){var i=this._id;return arguments.length<2?kn(this.node(),i).on.on(t):this.each(kv(i,t,r))}function Cv(t){return function(){var r=this.parentNode;for(var i in this.__transition)if(+i!==t)return;r&&r.removeChild(this)}}function Nv(){return this.on("end.remove",Cv(this._id))}function zv(t){var r=this._name,i=this._id;typeof t!="function"&&(t=uu(t));for(var l=this._groups,a=l.length,c=new Array(a),d=0;d<a;++d)for(var f=l[d],p=f.length,m=c[d]=new Array(p),y,v,x=0;x<p;++x)(y=f[x])&&(v=t.call(y,y.__data__,x,f))&&("__data__"in y&&(v.__data__=y.__data__),m[x]=v,Is(m[x],r,i,x,m,kn(y,i)));return new Kn(c,this._parents,r,i)}function _v(t){var r=this._name,i=this._id;typeof t!="function"&&(t=Nh(t));for(var l=this._groups,a=l.length,c=[],d=[],f=0;f<a;++f)for(var p=l[f],m=p.length,y,v=0;v<m;++v)if(y=p[v]){for(var x=t.call(y,y.__data__,v,p),w,C=kn(y,i),k=0,z=x.length;k<z;++k)(w=x[k])&&Is(w,r,i,k,x,C);c.push(x),d.push(y)}return new Kn(c,d,r,i)}var jv=Ki.prototype.constructor;function Rv(){return new jv(this._groups,this._parents)}function $v(t,r){var i,l,a;return function(){var c=Vo(this,t),d=(this.style.removeProperty(t),Vo(this,t));return c===d?null:c===i&&d===l?a:a=r(i=c,l=d)}}function Gh(t){return function(){this.style.removeProperty(t)}}function Tv(t,r,i){var l,a=i+"",c;return function(){var d=Vo(this,t);return d===a?null:d===l?c:c=r(l=d,i)}}function Pv(t,r,i){var l,a,c;return function(){var d=Vo(this,t),f=i(this),p=f+"";return f==null&&(p=f=(this.style.removeProperty(t),Vo(this,t))),d===p?null:d===l&&p===a?c:(a=p,c=r(l=d,f))}}function Mv(t,r){var i,l,a,c="style."+r,d="end."+c,f;return function(){var p=$n(this,t),m=p.on,y=p.value[c]==null?f||(f=Gh(r)):void 0;(m!==i||a!==y)&&(l=(i=m).copy()).on(d,a=y),p.on=l}}function Lv(t,r,i){var l=(t+="")=="transform"?L1:Kh;return r==null?this.styleTween(t,$v(t,l)).on("end.style."+t,Gh(t)):typeof r=="function"?this.styleTween(t,Pv(t,l,gu(this,"style."+t,r))).each(Mv(this._id,t)):this.styleTween(t,Tv(t,l,r),i).on("end.style."+t,null)}function Av(t,r,i){return function(l){this.style.setProperty(t,r.call(this,l),i)}}function Iv(t,r,i){var l,a;function c(){var d=r.apply(this,arguments);return d!==a&&(l=(a=d)&&Av(t,d,i)),l}return c._value=r,c}function Dv(t,r,i){var l="style."+(t+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(r==null)return this.tween(l,null);if(typeof r!="function")throw new Error;return this.tween(l,Iv(t,r,i??""))}function Ov(t){return function(){this.textContent=t}}function Hv(t){return function(){var r=t(this);this.textContent=r??""}}function Fv(t){return this.tween("text",typeof t=="function"?Hv(gu(this,"text",t)):Ov(t==null?"":t+""))}function Vv(t){return function(r){this.textContent=t.call(this,r)}}function Uv(t){var r,i;function l(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Vv(a)),r}return l._value=t,l}function Bv(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Uv(t))}function Wv(){for(var t=this._name,r=this._id,i=Qh(),l=this._groups,a=l.length,c=0;c<a;++c)for(var d=l[c],f=d.length,p,m=0;m<f;++m)if(p=d[m]){var y=kn(p,r);Is(p,t,i,m,d,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Kn(l,this._parents,t,i)}function Xv(){var t,r,i=this,l=i._id,a=i.size();return new Promise(function(c,d){var f={value:d},p={value:function(){--a===0&&c()}};i.each(function(){var m=$n(this,l),y=m.on;y!==t&&(r=(t=y).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(p)),m.on=r}),a===0&&c()})}var Yv=0;function Kn(t,r,i,l){this._groups=t,this._parents=r,this._name=i,this._id=l}function Qh(){return++Yv}var Xn=Ki.prototype;Kn.prototype={constructor:Kn,select:zv,selectAll:_v,selectChild:Xn.selectChild,selectChildren:Xn.selectChildren,filter:wv,merge:bv,selection:Rv,transition:Wv,call:Xn.call,nodes:Xn.nodes,node:Xn.node,size:Xn.size,empty:Xn.empty,each:Xn.each,on:Ev,attr:ov,attrTween:cv,style:Lv,styleTween:Dv,text:Fv,textTween:Bv,remove:Nv,tween:G1,delay:fv,duration:gv,ease:yv,easeVarying:vv,end:Xv,[Symbol.iterator]:Xn[Symbol.iterator]};function qv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Zv={time:null,delay:0,duration:250,ease:qv};function Kv(t,r){for(var i;!(i=t.__transition)||!(i=i[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return i}function Gv(t){var r,i;t instanceof Kn?(r=t._id,t=t._name):(r=Qh(),(i=Zv).time=hu(),t=t==null?null:t+"");for(var l=this._groups,a=l.length,c=0;c<a;++c)for(var d=l[c],f=d.length,p,m=0;m<f;++m)(p=d[m])&&Is(p,t,r,m,d,i||Kv(p,r));return new Kn(l,this._parents,t,r)}Ki.prototype.interrupt=q1;Ki.prototype.transition=Gv;const us=t=>()=>t;function Qv(t,{sourceEvent:r,target:i,transform:l,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:a}})}function qn(t,r,i){this.k=t,this.x=r,this.y=i}qn.prototype={constructor:qn,scale:function(t){return t===1?this:new qn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new qn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zn=new qn(1,0,0);qn.prototype;function Mc(t){t.stopImmediatePropagation()}function Pi(t){t.preventDefault(),t.stopImmediatePropagation()}function Jv(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ew(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function O0(){return this.__zoom||Zn}function tw(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function nw(){return navigator.maxTouchPoints||"ontouchstart"in this}function rw(t,r,i){var l=t.invertX(r[0][0])-i[0][0],a=t.invertX(r[1][0])-i[1][0],c=t.invertY(r[0][1])-i[0][1],d=t.invertY(r[1][1])-i[1][1];return t.translate(a>l?(l+a)/2:Math.min(0,l)||Math.max(0,a),d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d))}function Jh(){var t=Jv,r=ew,i=rw,l=tw,a=nw,c=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,p=H1,m=Ms("start","zoom","end"),y,v,x,w=500,C=150,k=0,z=10;function E(S){S.property("__zoom",O0).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",A).filter(a).on("touchstart.zoom",V).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(S,X,j,q){var F=S.selection?S.selection():S;F.property("__zoom",O0),S!==F?O(S,X,j,q):F.interrupt().each(function(){H(this,arguments).event(q).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},E.scaleBy=function(S,X,j,q){E.scaleTo(S,function(){var F=this.__zoom.k,M=typeof X=="function"?X.apply(this,arguments):X;return F*M},j,q)},E.scaleTo=function(S,X,j,q){E.transform(S,function(){var F=r.apply(this,arguments),M=this.__zoom,B=j==null?R(F):typeof j=="function"?j.apply(this,arguments):j,_=M.invert(B),P=typeof X=="function"?X.apply(this,arguments):X;return i(U(T(M,P),B,_),F,d)},j,q)},E.translateBy=function(S,X,j,q){E.transform(S,function(){return i(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof j=="function"?j.apply(this,arguments):j),r.apply(this,arguments),d)},null,q)},E.translateTo=function(S,X,j,q,F){E.transform(S,function(){var M=r.apply(this,arguments),B=this.__zoom,_=q==null?R(M):typeof q=="function"?q.apply(this,arguments):q;return i(Zn.translate(_[0],_[1]).scale(B.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof j=="function"?-j.apply(this,arguments):-j),M,d)},q,F)};function T(S,X){return X=Math.max(c[0],Math.min(c[1],X)),X===S.k?S:new qn(X,S.x,S.y)}function U(S,X,j){var q=X[0]-j[0]*S.k,F=X[1]-j[1]*S.k;return q===S.x&&F===S.y?S:new qn(S.k,q,F)}function R(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function O(S,X,j,q){S.on("start.zoom",function(){H(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(q).end()}).tween("zoom",function(){var F=this,M=arguments,B=H(F,M).event(q),_=r.apply(F,M),P=j==null?R(_):typeof j=="function"?j.apply(F,M):j,ne=Math.max(_[1][0]-_[0][0],_[1][1]-_[0][1]),te=F.__zoom,oe=typeof X=="function"?X.apply(F,M):X,ae=p(te.invert(P).concat(ne/te.k),oe.invert(P).concat(ne/oe.k));return function(de){if(de===1)de=oe;else{var se=ae(de),ye=ne/se[2];de=new qn(ye,P[0]-se[0]*ye,P[1]-se[1]*ye)}B.zoom(null,de)}})}function H(S,X,j){return!j&&S.__zooming||new Z(S,X)}function Z(S,X){this.that=S,this.args=X,this.active=0,this.sourceEvent=null,this.extent=r.apply(S,X),this.taps=0}Z.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,X){return this.mouse&&S!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var X=Yt(this.that).datum();m.call(S,this.that,new Qv(S,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:m}),X)}};function Y(S,...X){if(!t.apply(this,arguments))return;var j=H(this,X).event(S),q=this.__zoom,F=Math.max(c[0],Math.min(c[1],q.k*Math.pow(2,l.apply(this,arguments)))),M=wn(S);if(j.wheel)(j.mouse[0][0]!==M[0]||j.mouse[0][1]!==M[1])&&(j.mouse[1]=q.invert(j.mouse[0]=M)),clearTimeout(j.wheel);else{if(q.k===F)return;j.mouse=[M,q.invert(M)],bs(this),j.start()}Pi(S),j.wheel=setTimeout(B,C),j.zoom("mouse",i(U(T(q,F),j.mouse[0],j.mouse[1]),j.extent,d));function B(){j.wheel=null,j.end()}}function L(S,...X){if(x||!t.apply(this,arguments))return;var j=S.currentTarget,q=H(this,X,!0).event(S),F=Yt(S.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",ne,!0),M=wn(S,j),B=S.clientX,_=S.clientY;Ih(S.view),Mc(S),q.mouse=[M,this.__zoom.invert(M)],bs(this),q.start();function P(te){if(Pi(te),!q.moved){var oe=te.clientX-B,ae=te.clientY-_;q.moved=oe*oe+ae*ae>k}q.event(te).zoom("mouse",i(U(q.that.__zoom,q.mouse[0]=wn(te,j),q.mouse[1]),q.extent,d))}function ne(te){F.on("mousemove.zoom mouseup.zoom",null),Dh(te.view,q.moved),Pi(te),q.event(te).end()}}function A(S,...X){if(t.apply(this,arguments)){var j=this.__zoom,q=wn(S.changedTouches?S.changedTouches[0]:S,this),F=j.invert(q),M=j.k*(S.shiftKey?.5:2),B=i(U(T(j,M),q,F),r.apply(this,X),d);Pi(S),f>0?Yt(this).transition().duration(f).call(O,B,q,S):Yt(this).call(E.transform,B,q,S)}}function V(S,...X){if(t.apply(this,arguments)){var j=S.touches,q=j.length,F=H(this,X,S.changedTouches.length===q).event(S),M,B,_,P;for(Mc(S),B=0;B<q;++B)_=j[B],P=wn(_,this),P=[P,this.__zoom.invert(P),_.identifier],F.touch0?!F.touch1&&F.touch0[2]!==P[2]&&(F.touch1=P,F.taps=0):(F.touch0=P,M=!0,F.taps=1+!!y);y&&(y=clearTimeout(y)),M&&(F.taps<2&&(v=P[0],y=setTimeout(function(){y=null},w)),bs(this),F.start())}}function I(S,...X){if(this.__zooming){var j=H(this,X).event(S),q=S.changedTouches,F=q.length,M,B,_,P;for(Pi(S),M=0;M<F;++M)B=q[M],_=wn(B,this),j.touch0&&j.touch0[2]===B.identifier?j.touch0[0]=_:j.touch1&&j.touch1[2]===B.identifier&&(j.touch1[0]=_);if(B=j.that.__zoom,j.touch1){var ne=j.touch0[0],te=j.touch0[1],oe=j.touch1[0],ae=j.touch1[1],de=(de=oe[0]-ne[0])*de+(de=oe[1]-ne[1])*de,se=(se=ae[0]-te[0])*se+(se=ae[1]-te[1])*se;B=T(B,Math.sqrt(de/se)),_=[(ne[0]+oe[0])/2,(ne[1]+oe[1])/2],P=[(te[0]+ae[0])/2,(te[1]+ae[1])/2]}else if(j.touch0)_=j.touch0[0],P=j.touch0[1];else return;j.zoom("touch",i(U(B,_,P),j.extent,d))}}function Q(S,...X){if(this.__zooming){var j=H(this,X).event(S),q=S.changedTouches,F=q.length,M,B;for(Mc(S),x&&clearTimeout(x),x=setTimeout(function(){x=null},w),M=0;M<F;++M)B=q[M],j.touch0&&j.touch0[2]===B.identifier?delete j.touch0:j.touch1&&j.touch1[2]===B.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(B=wn(B,this),Math.hypot(v[0]-B[0],v[1]-B[1])<z)){var _=Yt(this).on("dblclick.zoom");_&&_.apply(this,arguments)}}}return E.wheelDelta=function(S){return arguments.length?(l=typeof S=="function"?S:us(+S),E):l},E.filter=function(S){return arguments.length?(t=typeof S=="function"?S:us(!!S),E):t},E.touchable=function(S){return arguments.length?(a=typeof S=="function"?S:us(!!S),E):a},E.extent=function(S){return arguments.length?(r=typeof S=="function"?S:us([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),E):r},E.scaleExtent=function(S){return arguments.length?(c[0]=+S[0],c[1]=+S[1],E):[c[0],c[1]]},E.translateExtent=function(S){return arguments.length?(d[0][0]=+S[0][0],d[1][0]=+S[1][0],d[0][1]=+S[0][1],d[1][1]=+S[1][1],E):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},E.constrain=function(S){return arguments.length?(i=S,E):i},E.duration=function(S){return arguments.length?(f=+S,E):f},E.interpolate=function(S){return arguments.length?(p=S,E):p},E.on=function(){var S=m.on.apply(m,arguments);return S===m?E:S},E.clickDistance=function(S){return arguments.length?(k=(S=+S)*S,E):Math.sqrt(k)},E.tapDistance=function(S){return arguments.length?(z=+S,E):z},E}var _s=kh();const Ds=N.createContext(null),ow=Ds.Provider,Gn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,r)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?r.targetHandle:r.sourceHandle}", edge id: ${r.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ep=Gn.error001();function Ie(t,r){const i=N.useContext(Ds);if(i===null)throw new Error(ep);return Eh(i,t,r)}const tt=()=>{const t=N.useContext(Ds);if(t===null)throw new Error(ep);return N.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},iw=t=>t.userSelectionActive?"none":"all";function mu({position:t,children:r,className:i,style:l,...a}){const c=Ie(iw),d=`${t}`.split("-");return ee.createElement("div",{className:ht(["react-flow__panel",i,...d]),style:{...l,pointerEvents:c},...a},r)}function lw({proOptions:t,position:r="bottom-right"}){return t?.hideAttribution?null:ee.createElement(mu,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ee.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const sw=({x:t,y:r,label:i,labelStyle:l={},labelShowBg:a=!0,labelBgStyle:c={},labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:p,className:m,...y})=>{const v=N.useRef(null),[x,w]=N.useState({x:0,y:0,width:0,height:0}),C=ht(["react-flow__edge-textwrapper",m]);return N.useEffect(()=>{if(v.current){const k=v.current.getBBox();w({x:k.x,y:k.y,width:k.width,height:k.height})}},[i]),typeof i>"u"||!i?null:ee.createElement("g",{transform:`translate(${t-x.width/2} ${r-x.height/2})`,className:C,visibility:x.width?"visible":"hidden",...y},a&&ee.createElement("rect",{width:x.width+2*d[0],x:-d[0],y:-d[1],height:x.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:f,ry:f}),ee.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:v,style:l},i),p)};var aw=N.memo(sw);const yu=t=>({width:t.offsetWidth,height:t.offsetHeight}),Er=(t,r=0,i=1)=>Math.min(Math.max(t,r),i),xu=(t={x:0,y:0},r)=>({x:Er(t.x,r[0][0],r[1][0]),y:Er(t.y,r[0][1],r[1][1])}),H0=(t,r,i)=>t<r?Er(Math.abs(t-r),1,50)/50:t>i?-Er(Math.abs(t-i),1,50)/50:0,tp=(t,r)=>{const i=H0(t.x,35,r.width-35)*20,l=H0(t.y,35,r.height-35)*20;return[i,l]},np=t=>t.getRootNode?.()||window?.document,rp=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),Wi=({x:t,y:r,width:i,height:l})=>({x:t,y:r,x2:t+i,y2:r+l}),op=({x:t,y:r,x2:i,y2:l})=>({x:t,y:r,width:i-t,height:l-r}),F0=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),cw=(t,r)=>op(rp(Wi(t),Wi(r))),Qc=(t,r)=>{const i=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),l=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(i*l)},uw=t=>an(t.width)&&an(t.height)&&an(t.x)&&an(t.y),an=t=>!isNaN(t)&&isFinite(t),Ke=Symbol.for("internals"),ip=["Enter"," ","Escape"],dw=(t,r)=>{},fw=t=>"nativeEvent"in t;function Jc(t){const i=(fw(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(i?.nodeName)||i?.hasAttribute("contenteditable")||!!i?.closest(".nokey")}const lp=t=>"clientX"in t,Sr=(t,r)=>{const i=lp(t),l=i?t.clientX:t.touches?.[0].clientX,a=i?t.clientY:t.touches?.[0].clientY;return{x:l-(r?.left??0),y:a-(r?.top??0)}},js=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Bo=({id:t,path:r,labelX:i,labelY:l,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:x,interactionWidth:w=20})=>ee.createElement(ee.Fragment,null,ee.createElement("path",{id:t,style:y,d:r,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:x}),w&&ee.createElement("path",{d:r,fill:"none",strokeOpacity:0,strokeWidth:w,className:"react-flow__edge-interaction"}),a&&an(i)&&an(l)?ee.createElement(aw,{x:i,y:l,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m}):null);Bo.displayName="BaseEdge";function Mi(t,r,i){return i===void 0?i:l=>{const a=r().edges.find(c=>c.id===t);a&&i(l,{...a})}}function sp({sourceX:t,sourceY:r,targetX:i,targetY:l}){const a=Math.abs(i-t)/2,c=i<t?i+a:i-a,d=Math.abs(l-r)/2,f=l<r?l+d:l-d;return[c,f,a,d]}function ap({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:a,sourceControlY:c,targetControlX:d,targetControlY:f}){const p=t*.125+a*.375+d*.375+i*.125,m=r*.125+c*.375+f*.375+l*.125,y=Math.abs(p-t),v=Math.abs(m-r);return[p,m,y,v]}var Kr;(function(t){t.Strict="strict",t.Loose="loose"})(Kr||(Kr={}));var Xr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Xr||(Xr={}));var Xi;(function(t){t.Partial="partial",t.Full="full"})(Xi||(Xi={}));var br;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(br||(br={}));var Rs;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Rs||(Rs={}));var me;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(me||(me={}));function V0({pos:t,x1:r,y1:i,x2:l,y2:a}){return t===me.Left||t===me.Right?[.5*(r+l),i]:[r,.5*(i+a)]}function cp({sourceX:t,sourceY:r,sourcePosition:i=me.Bottom,targetX:l,targetY:a,targetPosition:c=me.Top}){const[d,f]=V0({pos:i,x1:t,y1:r,x2:l,y2:a}),[p,m]=V0({pos:c,x1:l,y1:a,x2:t,y2:r}),[y,v,x,w]=ap({sourceX:t,sourceY:r,targetX:l,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:p,targetControlY:m});return[`M${t},${r} C${d},${f} ${p},${m} ${l},${a}`,y,v,x,w]}const vu=N.memo(({sourceX:t,sourceY:r,targetX:i,targetY:l,sourcePosition:a=me.Bottom,targetPosition:c=me.Top,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:x,markerEnd:w,markerStart:C,interactionWidth:k})=>{const[z,E,T]=cp({sourceX:t,sourceY:r,sourcePosition:a,targetX:i,targetY:l,targetPosition:c});return ee.createElement(Bo,{path:z,labelX:E,labelY:T,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:x,markerEnd:w,markerStart:C,interactionWidth:k})});vu.displayName="SimpleBezierEdge";const U0={[me.Left]:{x:-1,y:0},[me.Right]:{x:1,y:0},[me.Top]:{x:0,y:-1},[me.Bottom]:{x:0,y:1}},hw=({source:t,sourcePosition:r=me.Bottom,target:i})=>r===me.Left||r===me.Right?t.x<i.x?{x:1,y:0}:{x:-1,y:0}:t.y<i.y?{x:0,y:1}:{x:0,y:-1},B0=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function pw({source:t,sourcePosition:r=me.Bottom,target:i,targetPosition:l=me.Top,center:a,offset:c}){const d=U0[r],f=U0[l],p={x:t.x+d.x*c,y:t.y+d.y*c},m={x:i.x+f.x*c,y:i.y+f.y*c},y=hw({source:p,sourcePosition:r,target:m}),v=y.x!==0?"x":"y",x=y[v];let w=[],C,k;const z={x:0,y:0},E={x:0,y:0},[T,U,R,O]=sp({sourceX:t.x,sourceY:t.y,targetX:i.x,targetY:i.y});if(d[v]*f[v]===-1){C=a.x??T,k=a.y??U;const Z=[{x:C,y:p.y},{x:C,y:m.y}],Y=[{x:p.x,y:k},{x:m.x,y:k}];d[v]===x?w=v==="x"?Z:Y:w=v==="x"?Y:Z}else{const Z=[{x:p.x,y:m.y}],Y=[{x:m.x,y:p.y}];if(v==="x"?w=d.x===x?Y:Z:w=d.y===x?Z:Y,r===l){const Q=Math.abs(t[v]-i[v]);if(Q<=c){const S=Math.min(c-1,c-Q);d[v]===x?z[v]=(p[v]>t[v]?-1:1)*S:E[v]=(m[v]>i[v]?-1:1)*S}}if(r!==l){const Q=v==="x"?"y":"x",S=d[v]===f[Q],X=p[Q]>m[Q],j=p[Q]<m[Q];(d[v]===1&&(!S&&X||S&&j)||d[v]!==1&&(!S&&j||S&&X))&&(w=v==="x"?Z:Y)}const L={x:p.x+z.x,y:p.y+z.y},A={x:m.x+E.x,y:m.y+E.y},V=Math.max(Math.abs(L.x-w[0].x),Math.abs(A.x-w[0].x)),I=Math.max(Math.abs(L.y-w[0].y),Math.abs(A.y-w[0].y));V>=I?(C=(L.x+A.x)/2,k=w[0].y):(C=w[0].x,k=(L.y+A.y)/2)}return[[t,{x:p.x+z.x,y:p.y+z.y},...w,{x:m.x+E.x,y:m.y+E.y},i],C,k,R,O]}function gw(t,r,i,l){const a=Math.min(B0(t,r)/2,B0(r,i)/2,l),{x:c,y:d}=r;if(t.x===c&&c===i.x||t.y===d&&d===i.y)return`L${c} ${d}`;if(t.y===d){const m=t.x<i.x?-1:1,y=t.y<i.y?1:-1;return`L ${c+a*m},${d}Q ${c},${d} ${c},${d+a*y}`}const f=t.x<i.x?1:-1,p=t.y<i.y?-1:1;return`L ${c},${d+a*p}Q ${c},${d} ${c+a*f},${d}`}function Yi({sourceX:t,sourceY:r,sourcePosition:i=me.Bottom,targetX:l,targetY:a,targetPosition:c=me.Top,borderRadius:d=5,centerX:f,centerY:p,offset:m=20}){const[y,v,x,w,C]=pw({source:{x:t,y:r},sourcePosition:i,target:{x:l,y:a},targetPosition:c,center:{x:f,y:p},offset:m});return[y.reduce((z,E,T)=>{let U="";return T>0&&T<y.length-1?U=gw(y[T-1],E,y[T+1],d):U=`${T===0?"M":"L"}${E.x} ${E.y}`,z+=U,z},""),v,x,w,C]}const Os=N.memo(({sourceX:t,sourceY:r,targetX:i,targetY:l,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,sourcePosition:v=me.Bottom,targetPosition:x=me.Top,markerEnd:w,markerStart:C,pathOptions:k,interactionWidth:z})=>{const[E,T,U]=Yi({sourceX:t,sourceY:r,sourcePosition:v,targetX:i,targetY:l,targetPosition:x,borderRadius:k?.borderRadius,offset:k?.offset});return ee.createElement(Bo,{path:E,labelX:T,labelY:U,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:C,interactionWidth:z})});Os.displayName="SmoothStepEdge";const wu=N.memo(t=>ee.createElement(Os,{...t,pathOptions:N.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));wu.displayName="StepEdge";function up({sourceX:t,sourceY:r,targetX:i,targetY:l}){const[a,c,d,f]=sp({sourceX:t,sourceY:r,targetX:i,targetY:l});return[`M ${t},${r}L ${i},${l}`,a,c,d,f]}const bu=N.memo(({sourceX:t,sourceY:r,targetX:i,targetY:l,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:x,interactionWidth:w})=>{const[C,k,z]=up({sourceX:t,sourceY:r,targetX:i,targetY:l});return ee.createElement(Bo,{path:C,labelX:k,labelY:z,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:x,interactionWidth:w})});bu.displayName="StraightEdge";function ds(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function W0({pos:t,x1:r,y1:i,x2:l,y2:a,c}){switch(t){case me.Left:return[r-ds(r-l,c),i];case me.Right:return[r+ds(l-r,c),i];case me.Top:return[r,i-ds(i-a,c)];case me.Bottom:return[r,i+ds(a-i,c)]}}function Su({sourceX:t,sourceY:r,sourcePosition:i=me.Bottom,targetX:l,targetY:a,targetPosition:c=me.Top,curvature:d=.25}){const[f,p]=W0({pos:i,x1:t,y1:r,x2:l,y2:a,c:d}),[m,y]=W0({pos:c,x1:l,y1:a,x2:t,y2:r,c:d}),[v,x,w,C]=ap({sourceX:t,sourceY:r,targetX:l,targetY:a,sourceControlX:f,sourceControlY:p,targetControlX:m,targetControlY:y});return[`M${t},${r} C${f},${p} ${m},${y} ${l},${a}`,v,x,w,C]}const $s=N.memo(({sourceX:t,sourceY:r,targetX:i,targetY:l,sourcePosition:a=me.Bottom,targetPosition:c=me.Top,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:x,markerEnd:w,markerStart:C,pathOptions:k,interactionWidth:z})=>{const[E,T,U]=Su({sourceX:t,sourceY:r,sourcePosition:a,targetX:i,targetY:l,targetPosition:c,curvature:k?.curvature});return ee.createElement(Bo,{path:E,labelX:T,labelY:U,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:x,markerEnd:w,markerStart:C,interactionWidth:z})});$s.displayName="BezierEdge";const ku=N.createContext(null),mw=ku.Provider;ku.Consumer;const dp=()=>N.useContext(ku),yw=t=>"id"in t&&"source"in t&&"target"in t,xw=({source:t,sourceHandle:r,target:i,targetHandle:l})=>`reactflow__edge-${t}${r||""}-${i}${l||""}`,eu=(t,r)=>typeof t>"u"?"":typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(l=>`${l}=${t[l]}`).join("&")}`,vw=(t,r)=>r.some(i=>i.source===t.source&&i.target===t.target&&(i.sourceHandle===t.sourceHandle||!i.sourceHandle&&!t.sourceHandle)&&(i.targetHandle===t.targetHandle||!i.targetHandle&&!t.targetHandle)),fp=(t,r)=>{if(!t.source||!t.target)return r;let i;return yw(t)?i={...t}:i={...t,id:xw(t)},vw(i,r)?r:r.concat(i)},tu=({x:t,y:r},[i,l,a],c,[d,f])=>{const p={x:(t-i)/a,y:(r-l)/a};return c?{x:d*Math.round(p.x/d),y:f*Math.round(p.y/f)}:p},hp=({x:t,y:r},[i,l,a])=>({x:t*a+i,y:r*a+l}),qr=(t,r=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const i=(t.width??0)*r[0],l=(t.height??0)*r[1],a={x:t.position.x-i,y:t.position.y-l};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-i,y:t.positionAbsolute.y-l}:a}},Qi=(t,r=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const i=t.reduce((l,a)=>{const{x:c,y:d}=qr(a,r).positionAbsolute;return rp(l,Wi({x:c,y:d,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return op(i)},pp=(t,r,[i,l,a]=[0,0,1],c=!1,d=!1,f=[0,0])=>{const p={x:(r.x-i)/a,y:(r.y-l)/a,width:r.width/a,height:r.height/a},m=[];return t.forEach(y=>{const{width:v,height:x,selectable:w=!0,hidden:C=!1}=y;if(d&&!w||C)return!1;const{positionAbsolute:k}=qr(y,f),z={x:k.x,y:k.y,width:v||0,height:x||0},E=Qc(p,z),T=typeof v>"u"||typeof x>"u"||v===null||x===null,U=c&&E>0,R=(v||0)*(x||0);(T||U||E>=R||y.dragging)&&m.push(y)}),m},gp=(t,r)=>{const i=t.map(l=>l.id);return r.filter(l=>i.includes(l.source)||i.includes(l.target))},mp=(t,r,i,l,a,c=.1)=>{const d=r/(t.width*(1+c)),f=i/(t.height*(1+c)),p=Math.min(d,f),m=Er(p,l,a),y=t.x+t.width/2,v=t.y+t.height/2,x=r/2-y*m,w=i/2-v*m;return{x,y:w,zoom:m}},Br=(t,r=0)=>t.transition().duration(r);function X0(t,r,i,l){return(r[i]||[]).reduce((a,c)=>(`${t.id}-${c.id}-${i}`!==l&&a.push({id:c.id||null,type:i,nodeId:t.id,x:(t.positionAbsolute?.x??0)+c.x+c.width/2,y:(t.positionAbsolute?.y??0)+c.y+c.height/2}),a),[])}function ww(t,r,i,l,a,c){const{x:d,y:f}=Sr(t),m=r.elementsFromPoint(d,f).find(C=>C.classList.contains("react-flow__handle"));if(m){const C=m.getAttribute("data-nodeid");if(C){const k=Eu(void 0,m),z=m.getAttribute("data-handleid"),E=c({nodeId:C,id:z,type:k});if(E){const T=a.find(U=>U.nodeId===C&&U.type===k&&U.id===z);return{handle:{id:z,type:k,nodeId:C,x:T?.x||i.x,y:T?.y||i.y},validHandleResult:E}}}}let y=[],v=1/0;if(a.forEach(C=>{const k=Math.sqrt((C.x-i.x)**2+(C.y-i.y)**2);if(k<=l){const z=c(C);k<=v&&(k<v?y=[{handle:C,validHandleResult:z}]:k===v&&y.push({handle:C,validHandleResult:z}),v=k)}}),!y.length)return{handle:null,validHandleResult:yp()};if(y.length===1)return y[0];const x=y.some(({validHandleResult:C})=>C.isValid),w=y.some(({handle:C})=>C.type==="target");return y.find(({handle:C,validHandleResult:k})=>w?C.type==="target":x?k.isValid:!0)||y[0]}const bw={source:null,target:null,sourceHandle:null,targetHandle:null},yp=()=>({handleDomNode:null,isValid:!1,connection:bw,endHandle:null});function xp(t,r,i,l,a,c,d){const f=a==="target",p=d.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),m={...yp(),handleDomNode:p};if(p){const y=Eu(void 0,p),v=p.getAttribute("data-nodeid"),x=p.getAttribute("data-handleid"),w=p.classList.contains("connectable"),C=p.classList.contains("connectableend"),k={source:f?v:i,sourceHandle:f?x:l,target:f?i:v,targetHandle:f?l:x};m.connection=k,w&&C&&(r===Kr.Strict?f&&y==="source"||!f&&y==="target":v!==i||x!==l)&&(m.endHandle={nodeId:v,handleId:x,type:y},m.isValid=c(k))}return m}function Sw({nodes:t,nodeId:r,handleId:i,handleType:l}){return t.reduce((a,c)=>{if(c[Ke]){const{handleBounds:d}=c[Ke];let f=[],p=[];d&&(f=X0(c,d,"source",`${r}-${i}-${l}`),p=X0(c,d,"target",`${r}-${i}-${l}`)),a.push(...f,...p)}return a},[])}function Eu(t,r){return t||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function Lc(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function kw(t,r){let i=null;return r?i="valid":t&&!r&&(i="invalid"),i}function vp({event:t,handleId:r,nodeId:i,onConnect:l,isTarget:a,getState:c,setState:d,isValidConnection:f,edgeUpdaterType:p,onReconnectEnd:m}){const y=np(t.target),{connectionMode:v,domNode:x,autoPanOnConnect:w,connectionRadius:C,onConnectStart:k,panBy:z,getNodes:E,cancelConnection:T}=c();let U=0,R;const{x:O,y:H}=Sr(t),Z=y?.elementFromPoint(O,H),Y=Eu(p,Z),L=x?.getBoundingClientRect();if(!L||!Y)return;let A,V=Sr(t,L),I=!1,Q=null,S=!1,X=null;const j=Sw({nodes:E(),nodeId:i,handleId:r,handleType:Y}),q=()=>{if(!w)return;const[B,_]=tp(V,L);z({x:B,y:_}),U=requestAnimationFrame(q)};d({connectionPosition:V,connectionStatus:null,connectionNodeId:i,connectionHandleId:r,connectionHandleType:Y,connectionStartHandle:{nodeId:i,handleId:r,type:Y},connectionEndHandle:null}),k?.(t,{nodeId:i,handleId:r,handleType:Y});function F(B){const{transform:_}=c();V=Sr(B,L);const{handle:P,validHandleResult:ne}=ww(B,y,tu(V,_,!1,[1,1]),C,j,te=>xp(te,v,i,r,a?"target":"source",f,y));if(R=P,I||(q(),I=!0),X=ne.handleDomNode,Q=ne.connection,S=ne.isValid,d({connectionPosition:R&&S?hp({x:R.x,y:R.y},_):V,connectionStatus:kw(!!R,S),connectionEndHandle:ne.endHandle}),!R&&!S&&!X)return Lc(A);Q.source!==Q.target&&X&&(Lc(A),A=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",S),X.classList.toggle("react-flow__handle-valid",S))}function M(B){(R||X)&&Q&&S&&l?.(Q),c().onConnectEnd?.(B),p&&m?.(B),Lc(A),T(),cancelAnimationFrame(U),I=!1,S=!1,Q=null,X=null,y.removeEventListener("mousemove",F),y.removeEventListener("mouseup",M),y.removeEventListener("touchmove",F),y.removeEventListener("touchend",M)}y.addEventListener("mousemove",F),y.addEventListener("mouseup",M),y.addEventListener("touchmove",F),y.addEventListener("touchend",M)}const Y0=()=>!0,Ew=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Cw=(t,r,i)=>l=>{const{connectionStartHandle:a,connectionEndHandle:c,connectionClickStartHandle:d}=l;return{connecting:a?.nodeId===t&&a?.handleId===r&&a?.type===i||c?.nodeId===t&&c?.handleId===r&&c?.type===i,clickConnecting:d?.nodeId===t&&d?.handleId===r&&d?.type===i}},wp=N.forwardRef(({type:t="source",position:r=me.Top,isValidConnection:i,isConnectable:l=!0,isConnectableStart:a=!0,isConnectableEnd:c=!0,id:d,onConnect:f,children:p,className:m,onMouseDown:y,onTouchStart:v,...x},w)=>{const C=d||null,k=t==="target",z=tt(),E=dp(),{connectOnClick:T,noPanClassName:U}=Ie(Ew,ft),{connecting:R,clickConnecting:O}=Ie(Cw(E,C,t),ft);E||z.getState().onError?.("010",Gn.error010());const H=L=>{const{defaultEdgeOptions:A,onConnect:V,hasDefaultEdges:I}=z.getState(),Q={...A,...L};if(I){const{edges:S,setEdges:X}=z.getState();X(fp(Q,S))}V?.(Q),f?.(Q)},Z=L=>{if(!E)return;const A=lp(L);a&&(A&&L.button===0||!A)&&vp({event:L,handleId:C,nodeId:E,onConnect:H,isTarget:k,getState:z.getState,setState:z.setState,isValidConnection:i||z.getState().isValidConnection||Y0}),A?y?.(L):v?.(L)},Y=L=>{const{onClickConnectStart:A,onClickConnectEnd:V,connectionClickStartHandle:I,connectionMode:Q,isValidConnection:S}=z.getState();if(!E||!I&&!a)return;if(!I){A?.(L,{nodeId:E,handleId:C,handleType:t}),z.setState({connectionClickStartHandle:{nodeId:E,type:t,handleId:C}});return}const X=np(L.target),j=i||S||Y0,{connection:q,isValid:F}=xp({nodeId:E,id:C,type:t},Q,I.nodeId,I.handleId||null,I.type,j,X);F&&H(q),V?.(L),z.setState({connectionClickStartHandle:null})};return ee.createElement("div",{"data-handleid":C,"data-nodeid":E,"data-handlepos":r,"data-id":`${E}-${C}-${t}`,className:ht(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",U,m,{source:!k,target:k,connectable:l,connectablestart:a,connectableend:c,connecting:O,connectionindicator:l&&(a&&!R||c&&R)}]),onMouseDown:Z,onTouchStart:Z,onClick:T?Y:void 0,ref:w,...x},p)});wp.displayName="Handle";var Dt=N.memo(wp);const bp=({data:t,isConnectable:r,targetPosition:i=me.Top,sourcePosition:l=me.Bottom})=>ee.createElement(ee.Fragment,null,ee.createElement(Dt,{type:"target",position:i,isConnectable:r}),t?.label,ee.createElement(Dt,{type:"source",position:l,isConnectable:r}));bp.displayName="DefaultNode";var nu=N.memo(bp);const Sp=({data:t,isConnectable:r,sourcePosition:i=me.Bottom})=>ee.createElement(ee.Fragment,null,t?.label,ee.createElement(Dt,{type:"source",position:i,isConnectable:r}));Sp.displayName="InputNode";var kp=N.memo(Sp);const Ep=({data:t,isConnectable:r,targetPosition:i=me.Top})=>ee.createElement(ee.Fragment,null,ee.createElement(Dt,{type:"target",position:i,isConnectable:r}),t?.label);Ep.displayName="OutputNode";var Cp=N.memo(Ep);const Cu=()=>null;Cu.displayName="GroupNode";const Nw=t=>({selectedNodes:t.getNodes().filter(r=>r.selected),selectedEdges:t.edges.filter(r=>r.selected).map(r=>({...r}))}),fs=t=>t.id;function zw(t,r){return ft(t.selectedNodes.map(fs),r.selectedNodes.map(fs))&&ft(t.selectedEdges.map(fs),r.selectedEdges.map(fs))}const Np=N.memo(({onSelectionChange:t})=>{const r=tt(),{selectedNodes:i,selectedEdges:l}=Ie(Nw,zw);return N.useEffect(()=>{const a={nodes:i,edges:l};t?.(a),r.getState().onSelectionChange.forEach(c=>c(a))},[i,l,t]),null});Np.displayName="SelectionListener";const _w=t=>!!t.onSelectionChange;function jw({onSelectionChange:t}){const r=Ie(_w);return t||r?ee.createElement(Np,{onSelectionChange:t}):null}const Rw=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function jo(t,r){N.useEffect(()=>{typeof t<"u"&&r(t)},[t])}function ze(t,r,i){N.useEffect(()=>{typeof r<"u"&&i({[t]:r})},[r])}const $w=({nodes:t,edges:r,defaultNodes:i,defaultEdges:l,onConnect:a,onConnectStart:c,onConnectEnd:d,onClickConnectStart:f,onClickConnectEnd:p,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:x,edgesUpdatable:w,elevateNodesOnSelect:C,minZoom:k,maxZoom:z,nodeExtent:E,onNodesChange:T,onEdgesChange:U,elementsSelectable:R,connectionMode:O,snapGrid:H,snapToGrid:Z,translateExtent:Y,connectOnClick:L,defaultEdgeOptions:A,fitView:V,fitViewOptions:I,onNodesDelete:Q,onEdgesDelete:S,onNodeDrag:X,onNodeDragStart:j,onNodeDragStop:q,onSelectionDrag:F,onSelectionDragStart:M,onSelectionDragStop:B,noPanClassName:_,nodeOrigin:P,rfId:ne,autoPanOnConnect:te,autoPanOnNodeDrag:oe,onError:ae,connectionRadius:de,isValidConnection:se,nodeDragThreshold:ye})=>{const{setNodes:Se,setEdges:je,setDefaultNodesAndEdges:Ae,setMinZoom:Oe,setMaxZoom:He,setTranslateExtent:Me,setNodeExtent:Pe,reset:Ce}=Ie(Rw,ft),ue=tt();return N.useEffect(()=>{const _e=l?.map(Qe=>({...Qe,...A}));return Ae(i,_e),()=>{Ce()}},[]),ze("defaultEdgeOptions",A,ue.setState),ze("connectionMode",O,ue.setState),ze("onConnect",a,ue.setState),ze("onConnectStart",c,ue.setState),ze("onConnectEnd",d,ue.setState),ze("onClickConnectStart",f,ue.setState),ze("onClickConnectEnd",p,ue.setState),ze("nodesDraggable",m,ue.setState),ze("nodesConnectable",y,ue.setState),ze("nodesFocusable",v,ue.setState),ze("edgesFocusable",x,ue.setState),ze("edgesUpdatable",w,ue.setState),ze("elementsSelectable",R,ue.setState),ze("elevateNodesOnSelect",C,ue.setState),ze("snapToGrid",Z,ue.setState),ze("snapGrid",H,ue.setState),ze("onNodesChange",T,ue.setState),ze("onEdgesChange",U,ue.setState),ze("connectOnClick",L,ue.setState),ze("fitViewOnInit",V,ue.setState),ze("fitViewOnInitOptions",I,ue.setState),ze("onNodesDelete",Q,ue.setState),ze("onEdgesDelete",S,ue.setState),ze("onNodeDrag",X,ue.setState),ze("onNodeDragStart",j,ue.setState),ze("onNodeDragStop",q,ue.setState),ze("onSelectionDrag",F,ue.setState),ze("onSelectionDragStart",M,ue.setState),ze("onSelectionDragStop",B,ue.setState),ze("noPanClassName",_,ue.setState),ze("nodeOrigin",P,ue.setState),ze("rfId",ne,ue.setState),ze("autoPanOnConnect",te,ue.setState),ze("autoPanOnNodeDrag",oe,ue.setState),ze("onError",ae,ue.setState),ze("connectionRadius",de,ue.setState),ze("isValidConnection",se,ue.setState),ze("nodeDragThreshold",ye,ue.setState),jo(t,Se),jo(r,je),jo(k,Oe),jo(z,He),jo(Y,Me),jo(E,Pe),null},q0={display:"none"},Tw={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},zp="react-flow__node-desc",_p="react-flow__edge-desc",Pw="react-flow__aria-live",Mw=t=>t.ariaLiveMessage;function Lw({rfId:t}){const r=Ie(Mw);return ee.createElement("div",{id:`${Pw}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Tw},r)}function Aw({rfId:t,disableKeyboardA11y:r}){return ee.createElement(ee.Fragment,null,ee.createElement("div",{id:`${zp}-${t}`,style:q0},"Press enter or space to select a node.",!r&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ee.createElement("div",{id:`${_p}-${t}`,style:q0},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!r&&ee.createElement(Lw,{rfId:t}))}var qi=(t=null,r={actInsideInputWithModifier:!0})=>{const[i,l]=N.useState(!1),a=N.useRef(!1),c=N.useRef(new Set([])),[d,f]=N.useMemo(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,x)=>v.concat(...x),[]);return[m,y]}return[[],[]]},[t]);return N.useEffect(()=>{const p=typeof document<"u"?document:null,m=r?.target||p;if(t!==null){const y=w=>{if(a.current=w.ctrlKey||w.metaKey||w.shiftKey,(!a.current||a.current&&!r.actInsideInputWithModifier)&&Jc(w))return!1;const k=K0(w.code,f);c.current.add(w[k]),Z0(d,c.current,!1)&&(w.preventDefault(),l(!0))},v=w=>{if((!a.current||a.current&&!r.actInsideInputWithModifier)&&Jc(w))return!1;const k=K0(w.code,f);Z0(d,c.current,!0)?(l(!1),c.current.clear()):c.current.delete(w[k]),w.key==="Meta"&&c.current.clear(),a.current=!1},x=()=>{c.current.clear(),l(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",x),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",x)}}},[t,l]),i};function Z0(t,r,i){return t.filter(l=>i||l.length===r.size).some(l=>l.every(a=>r.has(a)))}function K0(t,r){return r.includes(t)?"code":"key"}function jp(t,r,i,l){const a=t.parentNode||t.parentId;if(!a)return i;const c=r.get(a),d=qr(c,l);return jp(c,r,{x:(i.x??0)+d.x,y:(i.y??0)+d.y,z:(c[Ke]?.z??0)>(i.z??0)?c[Ke]?.z??0:i.z??0},l)}function Rp(t,r,i){t.forEach(l=>{const a=l.parentNode||l.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||i?.[l.id]){const{x:c,y:d,z:f}=jp(l,t,{...l.position,z:l[Ke]?.z??0},r);l.positionAbsolute={x:c,y:d},l[Ke].z=f,i?.[l.id]&&(l[Ke].isParent=!0)}})}function Ac(t,r,i,l){const a=new Map,c={},d=l?1e3:0;return t.forEach(f=>{const p=(an(f.zIndex)?f.zIndex:0)+(f.selected?d:0),m=r.get(f.id),y={...f,positionAbsolute:{x:f.position.x,y:f.position.y}},v=f.parentNode||f.parentId;v&&(c[v]=!0);const x=m?.type&&m?.type!==f.type;Object.defineProperty(y,Ke,{enumerable:!1,value:{handleBounds:x?void 0:m?.[Ke]?.handleBounds,z:p}}),a.set(f.id,y)}),Rp(a,i,c),a}function $p(t,r={}){const{getNodes:i,width:l,height:a,minZoom:c,maxZoom:d,d3Zoom:f,d3Selection:p,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=t(),x=r.initial&&!m&&y;if(f&&p&&(x||!r.initial)){const C=i().filter(z=>{const E=r.includeHiddenNodes?z.width&&z.height:!z.hidden;return r.nodes?.length?E&&r.nodes.some(T=>T.id===z.id):E}),k=C.every(z=>z.width&&z.height);if(C.length>0&&k){const z=Qi(C,v),{x:E,y:T,zoom:U}=mp(z,l,a,r.minZoom??c,r.maxZoom??d,r.padding??.1),R=Zn.translate(E,T).scale(U);return typeof r.duration=="number"&&r.duration>0?f.transform(Br(p,r.duration),R):f.transform(p,R),!0}}return!1}function Iw(t,r){return t.forEach(i=>{const l=r.get(i.id);l&&r.set(l.id,{...l,[Ke]:l[Ke],selected:i.selected})}),new Map(r)}function Dw(t,r){return r.map(i=>{const l=t.find(a=>a.id===i.id);return l&&(i.selected=l.selected),i})}function hs({changedNodes:t,changedEdges:r,get:i,set:l}){const{nodeInternals:a,edges:c,onNodesChange:d,onEdgesChange:f,hasDefaultNodes:p,hasDefaultEdges:m}=i();t?.length&&(p&&l({nodeInternals:Iw(t,a)}),d?.(t)),r?.length&&(m&&l({edges:Dw(r,c)}),f?.(r))}const Ro=()=>{},Ow={zoomIn:Ro,zoomOut:Ro,zoomTo:Ro,getZoom:()=>1,setViewport:Ro,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ro,fitBounds:Ro,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Hw=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Fw=()=>{const t=tt(),{d3Zoom:r,d3Selection:i}=Ie(Hw,ft);return N.useMemo(()=>i&&r?{zoomIn:a=>r.scaleBy(Br(i,a?.duration),1.2),zoomOut:a=>r.scaleBy(Br(i,a?.duration),1/1.2),zoomTo:(a,c)=>r.scaleTo(Br(i,c?.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,c)=>{const[d,f,p]=t.getState().transform,m=Zn.translate(a.x??d,a.y??f).scale(a.zoom??p);r.transform(Br(i,c?.duration),m)},getViewport:()=>{const[a,c,d]=t.getState().transform;return{x:a,y:c,zoom:d}},fitView:a=>$p(t.getState,a),setCenter:(a,c,d)=>{const{width:f,height:p,maxZoom:m}=t.getState(),y=typeof d?.zoom<"u"?d.zoom:m,v=f/2-a*y,x=p/2-c*y,w=Zn.translate(v,x).scale(y);r.transform(Br(i,d?.duration),w)},fitBounds:(a,c)=>{const{width:d,height:f,minZoom:p,maxZoom:m}=t.getState(),{x:y,y:v,zoom:x}=mp(a,d,f,p,m,c?.padding??.1),w=Zn.translate(y,v).scale(x);r.transform(Br(i,c?.duration),w)},project:a=>{const{transform:c,snapToGrid:d,snapGrid:f}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),tu(a,c,d,f)},screenToFlowPosition:a=>{const{transform:c,snapToGrid:d,snapGrid:f,domNode:p}=t.getState();if(!p)return a;const{x:m,y}=p.getBoundingClientRect(),v={x:a.x-m,y:a.y-y};return tu(v,c,d,f)},flowToScreenPosition:a=>{const{transform:c,domNode:d}=t.getState();if(!d)return a;const{x:f,y:p}=d.getBoundingClientRect(),m=hp(a,c);return{x:m.x+f,y:m.y+p}},viewportInitialized:!0}:Ow,[r,i])};function Tn(){const t=Fw(),r=tt(),i=N.useCallback(()=>r.getState().getNodes().map(k=>({...k})),[]),l=N.useCallback(k=>r.getState().nodeInternals.get(k),[]),a=N.useCallback(()=>{const{edges:k=[]}=r.getState();return k.map(z=>({...z}))},[]),c=N.useCallback(k=>{const{edges:z=[]}=r.getState();return z.find(E=>E.id===k)},[]),d=N.useCallback(k=>{const{getNodes:z,setNodes:E,hasDefaultNodes:T,onNodesChange:U}=r.getState(),R=z(),O=typeof k=="function"?k(R):k;if(T)E(O);else if(U){const H=O.length===0?R.map(Z=>({type:"remove",id:Z.id})):O.map(Z=>({item:Z,type:"reset"}));U(H)}},[]),f=N.useCallback(k=>{const{edges:z=[],setEdges:E,hasDefaultEdges:T,onEdgesChange:U}=r.getState(),R=typeof k=="function"?k(z):k;if(T)E(R);else if(U){const O=R.length===0?z.map(H=>({type:"remove",id:H.id})):R.map(H=>({item:H,type:"reset"}));U(O)}},[]),p=N.useCallback(k=>{const z=Array.isArray(k)?k:[k],{getNodes:E,setNodes:T,hasDefaultNodes:U,onNodesChange:R}=r.getState();if(U){const H=[...E(),...z];T(H)}else if(R){const O=z.map(H=>({item:H,type:"add"}));R(O)}},[]),m=N.useCallback(k=>{const z=Array.isArray(k)?k:[k],{edges:E=[],setEdges:T,hasDefaultEdges:U,onEdgesChange:R}=r.getState();if(U)T([...E,...z]);else if(R){const O=z.map(H=>({item:H,type:"add"}));R(O)}},[]),y=N.useCallback(()=>{const{getNodes:k,edges:z=[],transform:E}=r.getState(),[T,U,R]=E;return{nodes:k().map(O=>({...O})),edges:z.map(O=>({...O})),viewport:{x:T,y:U,zoom:R}}},[]),v=N.useCallback(({nodes:k,edges:z})=>{const{nodeInternals:E,getNodes:T,edges:U,hasDefaultNodes:R,hasDefaultEdges:O,onNodesDelete:H,onEdgesDelete:Z,onNodesChange:Y,onEdgesChange:L}=r.getState(),A=(k||[]).map(X=>X.id),V=(z||[]).map(X=>X.id),I=T().reduce((X,j)=>{const q=j.parentNode||j.parentId,F=!A.includes(j.id)&&q&&X.find(B=>B.id===q);return(typeof j.deletable!="boolean"||j.deletable)&&(A.includes(j.id)||F)&&X.push(j),X},[]),Q=U.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),S=Q.filter(X=>V.includes(X.id));if(I||S){const X=gp(I,Q),j=[...S,...X],q=j.reduce((F,M)=>(F.includes(M.id)||F.push(M.id),F),[]);if((O||R)&&(O&&r.setState({edges:U.filter(F=>!q.includes(F.id))}),R&&(I.forEach(F=>{E.delete(F.id)}),r.setState({nodeInternals:new Map(E)}))),q.length>0&&(Z?.(j),L&&L(q.map(F=>({id:F,type:"remove"})))),I.length>0&&(H?.(I),Y)){const F=I.map(M=>({id:M.id,type:"remove"}));Y(F)}}},[]),x=N.useCallback(k=>{const z=uw(k),E=z?null:r.getState().nodeInternals.get(k.id);return!z&&!E?[null,null,z]:[z?k:F0(E),E,z]},[]),w=N.useCallback((k,z=!0,E)=>{const[T,U,R]=x(k);return T?(E||r.getState().getNodes()).filter(O=>{if(!R&&(O.id===U.id||!O.positionAbsolute))return!1;const H=F0(O),Z=Qc(H,T);return z&&Z>0||Z>=T.width*T.height}):[]},[]),C=N.useCallback((k,z,E=!0)=>{const[T]=x(k);if(!T)return!1;const U=Qc(T,z);return E&&U>0||U>=T.width*T.height},[]);return N.useMemo(()=>({...t,getNodes:i,getNode:l,getEdges:a,getEdge:c,setNodes:d,setEdges:f,addNodes:p,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:w,isNodeIntersecting:C}),[t,i,l,a,c,d,f,p,m,y,v,w,C])}const Vw={actInsideInputWithModifier:!1};var Uw=({deleteKeyCode:t,multiSelectionKeyCode:r})=>{const i=tt(),{deleteElements:l}=Tn(),a=qi(t,Vw),c=qi(r);N.useEffect(()=>{if(a){const{edges:d,getNodes:f}=i.getState(),p=f().filter(y=>y.selected),m=d.filter(y=>y.selected);l({nodes:p,edges:m}),i.setState({nodesSelectionActive:!1})}},[a]),N.useEffect(()=>{i.setState({multiSelectionActive:c})},[c])};function Bw(t){const r=tt();N.useEffect(()=>{let i;const l=()=>{if(!t.current)return;const a=yu(t.current);(a.height===0||a.width===0)&&r.getState().onError?.("004",Gn.error004()),r.setState({width:a.width||500,height:a.height||500})};return l(),window.addEventListener("resize",l),t.current&&(i=new ResizeObserver(()=>l()),i.observe(t.current)),()=>{window.removeEventListener("resize",l),i&&t.current&&i.unobserve(t.current)}},[])}const Nu={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ww=(t,r)=>t.x!==r.x||t.y!==r.y||t.zoom!==r.k,ps=t=>({x:t.x,y:t.y,zoom:t.k}),$o=(t,r)=>t.target.closest(`.${r}`),G0=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),Q0=t=>{const r=t.ctrlKey&&js()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r},Xw=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Yw=({onMove:t,onMoveStart:r,onMoveEnd:i,onPaneContextMenu:l,zoomOnScroll:a=!0,zoomOnPinch:c=!0,panOnScroll:d=!1,panOnScrollSpeed:f=.5,panOnScrollMode:p=Xr.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:x,translateExtent:w,minZoom:C,maxZoom:k,zoomActivationKeyCode:z,preventScrolling:E=!0,children:T,noWheelClassName:U,noPanClassName:R})=>{const O=N.useRef(),H=tt(),Z=N.useRef(!1),Y=N.useRef(!1),L=N.useRef(null),A=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:V,d3Selection:I,d3ZoomHandler:Q,userSelectionActive:S}=Ie(Xw,ft),X=qi(z),j=N.useRef(0),q=N.useRef(!1),F=N.useRef();return Bw(L),N.useEffect(()=>{if(L.current){const M=L.current.getBoundingClientRect(),B=Jh().scaleExtent([C,k]).translateExtent(w),_=Yt(L.current).call(B),P=Zn.translate(x.x,x.y).scale(Er(x.zoom,C,k)),ne=[[0,0],[M.width,M.height]],te=B.constrain()(P,ne,w);B.transform(_,te),B.wheelDelta(Q0),H.setState({d3Zoom:B,d3Selection:_,d3ZoomHandler:_.on("wheel.zoom"),transform:[te.x,te.y,te.k],domNode:L.current.closest(".react-flow")})}},[]),N.useEffect(()=>{I&&V&&(d&&!X&&!S?I.on("wheel.zoom",M=>{if($o(M,U))return!1;M.preventDefault(),M.stopImmediatePropagation();const B=I.property("__zoom").k||1;if(M.ctrlKey&&c){const se=wn(M),ye=Q0(M),Se=B*Math.pow(2,ye);V.scaleTo(I,Se,se,M);return}const _=M.deltaMode===1?20:1;let P=p===Xr.Vertical?0:M.deltaX*_,ne=p===Xr.Horizontal?0:M.deltaY*_;!js()&&M.shiftKey&&p!==Xr.Vertical&&(P=M.deltaY*_,ne=0),V.translateBy(I,-(P/B)*f,-(ne/B)*f,{internal:!0});const te=ps(I.property("__zoom")),{onViewportChangeStart:oe,onViewportChange:ae,onViewportChangeEnd:de}=H.getState();clearTimeout(F.current),q.current||(q.current=!0,r?.(M,te),oe?.(te)),q.current&&(t?.(M,te),ae?.(te),F.current=setTimeout(()=>{i?.(M,te),de?.(te),q.current=!1},150))},{passive:!1}):typeof Q<"u"&&I.on("wheel.zoom",function(M,B){if(!E&&M.type==="wheel"&&!M.ctrlKey||$o(M,U))return null;M.preventDefault(),Q.call(this,M,B)},{passive:!1}))},[S,d,p,I,V,Q,X,c,E,U,r,t,i]),N.useEffect(()=>{V&&V.on("start",M=>{if(!M.sourceEvent||M.sourceEvent.internal)return null;j.current=M.sourceEvent?.button;const{onViewportChangeStart:B}=H.getState(),_=ps(M.transform);Z.current=!0,A.current=_,M.sourceEvent?.type==="mousedown"&&H.setState({paneDragging:!0}),B?.(_),r?.(M.sourceEvent,_)})},[V,r]),N.useEffect(()=>{V&&(S&&!Z.current?V.on("zoom",null):S||V.on("zoom",M=>{const{onViewportChange:B}=H.getState();if(H.setState({transform:[M.transform.x,M.transform.y,M.transform.k]}),Y.current=!!(l&&G0(v,j.current??0)),(t||B)&&!M.sourceEvent?.internal){const _=ps(M.transform);B?.(_),t?.(M.sourceEvent,_)}}))},[S,V,t,v,l]),N.useEffect(()=>{V&&V.on("end",M=>{if(!M.sourceEvent||M.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=H.getState();if(Z.current=!1,H.setState({paneDragging:!1}),l&&G0(v,j.current??0)&&!Y.current&&l(M.sourceEvent),Y.current=!1,(i||B)&&Ww(A.current,M.transform)){const _=ps(M.transform);A.current=_,clearTimeout(O.current),O.current=setTimeout(()=>{B?.(_),i?.(M.sourceEvent,_)},d?150:0)}})},[V,d,v,i,l]),N.useEffect(()=>{V&&V.filter(M=>{const B=X||a,_=c&&M.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&M.button===1&&M.type==="mousedown"&&($o(M,"react-flow__node")||$o(M,"react-flow__edge")))return!0;if(!v&&!B&&!d&&!m&&!c||S||!m&&M.type==="dblclick"||$o(M,U)&&M.type==="wheel"||$o(M,R)&&(M.type!=="wheel"||d&&M.type==="wheel"&&!X)||!c&&M.ctrlKey&&M.type==="wheel"||!B&&!d&&!_&&M.type==="wheel"||!v&&(M.type==="mousedown"||M.type==="touchstart")||Array.isArray(v)&&!v.includes(M.button)&&M.type==="mousedown")return!1;const P=Array.isArray(v)&&v.includes(M.button)||!M.button||M.button<=1;return(!M.ctrlKey||M.type==="wheel")&&P})},[S,V,a,c,d,m,v,y,X]),ee.createElement("div",{className:"react-flow__renderer",ref:L,style:Nu},T)},qw=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Zw(){const{userSelectionActive:t,userSelectionRect:r}=Ie(qw,ft);return t&&r?ee.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}function J0(t,r){const i=r.parentNode||r.parentId,l=t.find(a=>a.id===i);if(l){const a=r.position.x+r.width-l.width,c=r.position.y+r.height-l.height;if(a>0||c>0||r.position.x<0||r.position.y<0){if(l.style={...l.style},l.style.width=l.style.width??l.width,l.style.height=l.style.height??l.height,a>0&&(l.style.width+=a),c>0&&(l.style.height+=c),r.position.x<0){const d=Math.abs(r.position.x);l.position.x=l.position.x-d,l.style.width+=d,r.position.x=0}if(r.position.y<0){const d=Math.abs(r.position.y);l.position.y=l.position.y-d,l.style.height+=d,r.position.y=0}l.width=l.style.width,l.height=l.style.height}}}function Tp(t,r){if(t.some(l=>l.type==="reset"))return t.filter(l=>l.type==="reset").map(l=>l.item);const i=t.filter(l=>l.type==="add").map(l=>l.item);return r.reduce((l,a)=>{const c=t.filter(f=>f.id===a.id);if(c.length===0)return l.push(a),l;const d={...a};for(const f of c)if(f)switch(f.type){case"select":{d.selected=f.selected;break}case"position":{typeof f.position<"u"&&(d.position=f.position),typeof f.positionAbsolute<"u"&&(d.positionAbsolute=f.positionAbsolute),typeof f.dragging<"u"&&(d.dragging=f.dragging),d.expandParent&&J0(l,d);break}case"dimensions":{typeof f.dimensions<"u"&&(d.width=f.dimensions.width,d.height=f.dimensions.height),typeof f.updateStyle<"u"&&(d.style={...d.style||{},...f.dimensions}),typeof f.resizing=="boolean"&&(d.resizing=f.resizing),d.expandParent&&J0(l,d);break}case"remove":return l}return l.push(d),l},i)}function Pp(t,r){return Tp(t,r)}function Kw(t,r){return Tp(t,r)}const wr=(t,r)=>({id:t,type:"select",selected:r});function Ao(t,r){return t.reduce((i,l)=>{const a=r.includes(l.id);return!l.selected&&a?(l.selected=!0,i.push(wr(l.id,!0))):l.selected&&!a&&(l.selected=!1,i.push(wr(l.id,!1))),i},[])}const Ic=(t,r)=>i=>{i.target===r.current&&t?.(i)},Gw=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Mp=N.memo(({isSelecting:t,selectionMode:r=Xi.Full,panOnDrag:i,onSelectionStart:l,onSelectionEnd:a,onPaneClick:c,onPaneContextMenu:d,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const x=N.useRef(null),w=tt(),C=N.useRef(0),k=N.useRef(0),z=N.useRef(),{userSelectionActive:E,elementsSelectable:T,dragging:U}=Ie(Gw,ft),R=()=>{w.setState({userSelectionActive:!1,userSelectionRect:null}),C.current=0,k.current=0},O=Q=>{c?.(Q),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},H=Q=>{if(Array.isArray(i)&&i?.includes(2)){Q.preventDefault();return}d?.(Q)},Z=f?Q=>f(Q):void 0,Y=Q=>{const{resetSelectedElements:S,domNode:X}=w.getState();if(z.current=X?.getBoundingClientRect(),!T||!t||Q.button!==0||Q.target!==x.current||!z.current)return;const{x:j,y:q}=Sr(Q,z.current);S(),w.setState({userSelectionRect:{width:0,height:0,startX:j,startY:q,x:j,y:q}}),l?.(Q)},L=Q=>{const{userSelectionRect:S,nodeInternals:X,edges:j,transform:q,onNodesChange:F,onEdgesChange:M,nodeOrigin:B,getNodes:_}=w.getState();if(!t||!z.current||!S)return;w.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=Sr(Q,z.current),ne=S.startX??0,te=S.startY??0,oe={...S,x:P.x<ne?P.x:ne,y:P.y<te?P.y:te,width:Math.abs(P.x-ne),height:Math.abs(P.y-te)},ae=_(),de=pp(X,oe,q,r===Xi.Partial,!0,B),se=gp(de,j).map(Se=>Se.id),ye=de.map(Se=>Se.id);if(C.current!==ye.length){C.current=ye.length;const Se=Ao(ae,ye);Se.length&&F?.(Se)}if(k.current!==se.length){k.current=se.length;const Se=Ao(j,se);Se.length&&M?.(Se)}w.setState({userSelectionRect:oe})},A=Q=>{if(Q.button!==0)return;const{userSelectionRect:S}=w.getState();!E&&S&&Q.target===x.current&&O?.(Q),w.setState({nodesSelectionActive:C.current>0}),R(),a?.(Q)},V=Q=>{E&&(w.setState({nodesSelectionActive:C.current>0}),a?.(Q)),R()},I=T&&(t||E);return ee.createElement("div",{className:ht(["react-flow__pane",{dragging:U,selection:t}]),onClick:I?void 0:Ic(O,x),onContextMenu:Ic(H,x),onWheel:Ic(Z,x),onMouseEnter:I?void 0:p,onMouseDown:I?Y:void 0,onMouseMove:I?L:m,onMouseUp:I?A:void 0,onMouseLeave:I?V:y,ref:x,style:Nu},v,ee.createElement(Zw,null))});Mp.displayName="Pane";function Lp(t,r){const i=t.parentNode||t.parentId;if(!i)return!1;const l=r.get(i);return l?l.selected?!0:Lp(l,r):!1}function eh(t,r,i){let l=t;do{if(l?.matches(r))return!0;if(l===i.current)return!1;l=l.parentElement}while(l);return!1}function Qw(t,r,i,l){return Array.from(t.values()).filter(a=>(a.selected||a.id===l)&&(!a.parentNode||a.parentId||!Lp(a,t))&&(a.draggable||r&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:i.x-(a.positionAbsolute?.x??0),y:i.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function Jw(t,r){return!r||r==="parent"?r:[r[0],[r[1][0]-(t.width||0),r[1][1]-(t.height||0)]]}function Ap(t,r,i,l,a=[0,0],c){const d=Jw(t,t.extent||l);let f=d;const p=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(p&&t.width&&t.height){const v=i.get(p),{x,y:w}=qr(v,a).positionAbsolute;f=v&&an(x)&&an(w)&&an(v.width)&&an(v.height)?[[x+t.width*a[0],w+t.height*a[1]],[x+v.width-t.width+t.width*a[0],w+v.height-t.height+t.height*a[1]]]:f}else c?.("005",Gn.error005()),f=d;else if(t.extent&&p&&t.extent!=="parent"){const v=i.get(p),{x,y:w}=qr(v,a).positionAbsolute;f=[[t.extent[0][0]+x,t.extent[0][1]+w],[t.extent[1][0]+x,t.extent[1][1]+w]]}let m={x:0,y:0};if(p){const v=i.get(p);m=qr(v,a).positionAbsolute}const y=f&&f!=="parent"?xu(r,f):r;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function Dc({nodeId:t,dragItems:r,nodeInternals:i}){const l=r.map(a=>({...i.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?l.find(a=>a.id===t):l[0],l]}const th=(t,r,i,l)=>{const a=r.querySelectorAll(t);if(!a||!a.length)return null;const c=Array.from(a),d=r.getBoundingClientRect(),f={x:d.width*l[0],y:d.height*l[1]};return c.map(p=>{const m=p.getBoundingClientRect();return{id:p.getAttribute("data-handleid"),position:p.getAttribute("data-handlepos"),x:(m.left-d.left-f.x)/i,y:(m.top-d.top-f.y)/i,...yu(p)}})};function Li(t,r,i){return i===void 0?i:l=>{const a=r().nodeInternals.get(t);a&&i(l,{...a})}}function ru({id:t,store:r,unselect:i=!1,nodeRef:l}){const{addSelectedNodes:a,unselectNodesAndEdges:c,multiSelectionActive:d,nodeInternals:f,onError:p}=r.getState(),m=f.get(t);if(!m){p?.("012",Gn.error012(t));return}r.setState({nodesSelectionActive:!1}),m.selected?(i||m.selected&&d)&&(c({nodes:[m],edges:[]}),requestAnimationFrame(()=>l?.current?.blur())):a([t])}function Ip(){const t=tt();return N.useCallback(({sourceEvent:i})=>{const{transform:l,snapGrid:a,snapToGrid:c}=t.getState(),d=i.touches?i.touches[0].clientX:i.clientX,f=i.touches?i.touches[0].clientY:i.clientY,p={x:(d-l[0])/l[2],y:(f-l[1])/l[2]};return{xSnapped:c?a[0]*Math.round(p.x/a[0]):p.x,ySnapped:c?a[1]*Math.round(p.y/a[1]):p.y,...p}},[])}function Oc(t){return(r,i,l)=>t?.(r,l)}function Dp({nodeRef:t,disabled:r=!1,noDragClassName:i,handleSelector:l,nodeId:a,isSelectable:c,selectNodesOnDrag:d}){const f=tt(),[p,m]=N.useState(!1),y=N.useRef([]),v=N.useRef({x:null,y:null}),x=N.useRef(0),w=N.useRef(null),C=N.useRef({x:0,y:0}),k=N.useRef(null),z=N.useRef(!1),E=N.useRef(!1),T=N.useRef(!1),U=Ip();return N.useEffect(()=>{if(t?.current){const R=Yt(t.current),O=({x:Y,y:L})=>{const{nodeInternals:A,onNodeDrag:V,onSelectionDrag:I,updateNodePositions:Q,nodeExtent:S,snapGrid:X,snapToGrid:j,nodeOrigin:q,onError:F}=f.getState();v.current={x:Y,y:L};let M=!1,B={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&S){const P=Qi(y.current,q);B=Wi(P)}if(y.current=y.current.map(P=>{const ne={x:Y-P.distance.x,y:L-P.distance.y};j&&(ne.x=X[0]*Math.round(ne.x/X[0]),ne.y=X[1]*Math.round(ne.y/X[1]));const te=[[S[0][0],S[0][1]],[S[1][0],S[1][1]]];y.current.length>1&&S&&!P.extent&&(te[0][0]=P.positionAbsolute.x-B.x+S[0][0],te[1][0]=P.positionAbsolute.x+(P.width??0)-B.x2+S[1][0],te[0][1]=P.positionAbsolute.y-B.y+S[0][1],te[1][1]=P.positionAbsolute.y+(P.height??0)-B.y2+S[1][1]);const oe=Ap(P,ne,A,te,q,F);return M=M||P.position.x!==oe.position.x||P.position.y!==oe.position.y,P.position=oe.position,P.positionAbsolute=oe.positionAbsolute,P}),!M)return;Q(y.current,!0,!0),m(!0);const _=a?V:Oc(I);if(_&&k.current){const[P,ne]=Dc({nodeId:a,dragItems:y.current,nodeInternals:A});_(k.current,P,ne)}},H=()=>{if(!w.current)return;const[Y,L]=tp(C.current,w.current);if(Y!==0||L!==0){const{transform:A,panBy:V}=f.getState();v.current.x=(v.current.x??0)-Y/A[2],v.current.y=(v.current.y??0)-L/A[2],V({x:Y,y:L})&&O(v.current)}x.current=requestAnimationFrame(H)},Z=Y=>{const{nodeInternals:L,multiSelectionActive:A,nodesDraggable:V,unselectNodesAndEdges:I,onNodeDragStart:Q,onSelectionDragStart:S}=f.getState();E.current=!0;const X=a?Q:Oc(S);(!d||!c)&&!A&&a&&(L.get(a)?.selected||I()),a&&c&&d&&ru({id:a,store:f,nodeRef:t});const j=U(Y);if(v.current=j,y.current=Qw(L,V,j,a),X&&y.current){const[q,F]=Dc({nodeId:a,dragItems:y.current,nodeInternals:L});X(Y.sourceEvent,q,F)}};if(r)R.on(".drag",null);else{const Y=Oh().on("start",L=>{const{domNode:A,nodeDragThreshold:V}=f.getState();V===0&&Z(L),T.current=!1;const I=U(L);v.current=I,w.current=A?.getBoundingClientRect()||null,C.current=Sr(L.sourceEvent,w.current)}).on("drag",L=>{const A=U(L),{autoPanOnNodeDrag:V,nodeDragThreshold:I}=f.getState();if(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1&&(T.current=!0),!T.current){if(!z.current&&E.current&&V&&(z.current=!0,H()),!E.current){const Q=A.xSnapped-(v?.current?.x??0),S=A.ySnapped-(v?.current?.y??0);Math.sqrt(Q*Q+S*S)>I&&Z(L)}(v.current.x!==A.xSnapped||v.current.y!==A.ySnapped)&&y.current&&E.current&&(k.current=L.sourceEvent,C.current=Sr(L.sourceEvent,w.current),O(A))}}).on("end",L=>{if(!(!E.current||T.current)&&(m(!1),z.current=!1,E.current=!1,cancelAnimationFrame(x.current),y.current)){const{updateNodePositions:A,nodeInternals:V,onNodeDragStop:I,onSelectionDragStop:Q}=f.getState(),S=a?I:Oc(Q);if(A(y.current,!1,!1),S){const[X,j]=Dc({nodeId:a,dragItems:y.current,nodeInternals:V});S(L.sourceEvent,X,j)}}}).filter(L=>{const A=L.target;return!L.button&&(!i||!eh(A,`.${i}`,t))&&(!l||eh(A,l,t))});return R.call(Y),()=>{R.on(".drag",null)}}}},[t,r,i,l,c,f,a,d,U]),p}function Op(){const t=tt();return N.useCallback(i=>{const{nodeInternals:l,nodeExtent:a,updateNodePositions:c,getNodes:d,snapToGrid:f,snapGrid:p,onError:m,nodesDraggable:y}=t.getState(),v=d().filter(T=>T.selected&&(T.draggable||y&&typeof T.draggable>"u")),x=f?p[0]:5,w=f?p[1]:5,C=i.isShiftPressed?4:1,k=i.x*x*C,z=i.y*w*C,E=v.map(T=>{if(T.positionAbsolute){const U={x:T.positionAbsolute.x+k,y:T.positionAbsolute.y+z};f&&(U.x=p[0]*Math.round(U.x/p[0]),U.y=p[1]*Math.round(U.y/p[1]));const{positionAbsolute:R,position:O}=Ap(T,U,l,a,void 0,m);T.position=O,T.positionAbsolute=R}return T});c(E,!0,!1)},[])}const Oo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ai=t=>{const r=({id:i,type:l,data:a,xPos:c,yPos:d,xPosOrigin:f,yPosOrigin:p,selected:m,onClick:y,onMouseEnter:v,onMouseMove:x,onMouseLeave:w,onContextMenu:C,onDoubleClick:k,style:z,className:E,isDraggable:T,isSelectable:U,isConnectable:R,isFocusable:O,selectNodesOnDrag:H,sourcePosition:Z,targetPosition:Y,hidden:L,resizeObserver:A,dragHandle:V,zIndex:I,isParent:Q,noDragClassName:S,noPanClassName:X,initialized:j,disableKeyboardA11y:q,ariaLabel:F,rfId:M,hasHandleBounds:B})=>{const _=tt(),P=N.useRef(null),ne=N.useRef(null),te=N.useRef(Z),oe=N.useRef(Y),ae=N.useRef(l),de=U||T||y||v||x||w,se=Op(),ye=Li(i,_.getState,v),Se=Li(i,_.getState,x),je=Li(i,_.getState,w),Ae=Li(i,_.getState,C),Oe=Li(i,_.getState,k),He=Ce=>{const{nodeDragThreshold:ue}=_.getState();if(U&&(!H||!T||ue>0)&&ru({id:i,store:_,nodeRef:P}),y){const _e=_.getState().nodeInternals.get(i);_e&&y(Ce,{..._e})}},Me=Ce=>{if(!Jc(Ce)&&!q)if(ip.includes(Ce.key)&&U){const ue=Ce.key==="Escape";ru({id:i,store:_,unselect:ue,nodeRef:P})}else T&&m&&Object.prototype.hasOwnProperty.call(Oo,Ce.key)&&(_.setState({ariaLiveMessage:`Moved selected node ${Ce.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~c}, y: ${~~d}`}),se({x:Oo[Ce.key].x,y:Oo[Ce.key].y,isShiftPressed:Ce.shiftKey}))};N.useEffect(()=>()=>{ne.current&&(A?.unobserve(ne.current),ne.current=null)},[]),N.useEffect(()=>{if(P.current&&!L){const Ce=P.current;(!j||!B||ne.current!==Ce)&&(ne.current&&A?.unobserve(ne.current),A?.observe(Ce),ne.current=Ce)}},[L,j,B]),N.useEffect(()=>{const Ce=ae.current!==l,ue=te.current!==Z,_e=oe.current!==Y;P.current&&(Ce||ue||_e)&&(Ce&&(ae.current=l),ue&&(te.current=Z),_e&&(oe.current=Y),_.getState().updateNodeDimensions([{id:i,nodeElement:P.current,forceUpdate:!0}]))},[i,l,Z,Y]);const Pe=Dp({nodeRef:P,disabled:L||!T,noDragClassName:S,handleSelector:V,nodeId:i,isSelectable:U,selectNodesOnDrag:H});return L?null:ee.createElement("div",{className:ht(["react-flow__node",`react-flow__node-${l}`,{[X]:T},E,{selected:m,selectable:U,parent:Q,dragging:Pe}]),ref:P,style:{zIndex:I,transform:`translate(${f}px,${p}px)`,pointerEvents:de?"all":"none",visibility:j?"visible":"hidden",...z},"data-id":i,"data-testid":`rf__node-${i}`,onMouseEnter:ye,onMouseMove:Se,onMouseLeave:je,onContextMenu:Ae,onClick:He,onDoubleClick:Oe,onKeyDown:O?Me:void 0,tabIndex:O?0:void 0,role:O?"button":void 0,"aria-describedby":q?void 0:`${zp}-${M}`,"aria-label":F},ee.createElement(mw,{value:i},ee.createElement(t,{id:i,data:a,type:l,xPos:c,yPos:d,selected:m,isConnectable:R,sourcePosition:Z,targetPosition:Y,dragging:Pe,dragHandle:V,zIndex:I})))};return r.displayName="NodeWrapper",N.memo(r)};const e2=t=>{const r=t.getNodes().filter(i=>i.selected);return{...Qi(r,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function t2({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:i}){const l=tt(),{width:a,height:c,x:d,y:f,transformString:p,userSelectionActive:m}=Ie(e2,ft),y=Op(),v=N.useRef(null);if(N.useEffect(()=>{i||v.current?.focus({preventScroll:!0})},[i]),Dp({nodeRef:v}),m||!a||!c)return null;const x=t?C=>{const k=l.getState().getNodes().filter(z=>z.selected);t(C,k)}:void 0,w=C=>{Object.prototype.hasOwnProperty.call(Oo,C.key)&&y({x:Oo[C.key].x,y:Oo[C.key].y,isShiftPressed:C.shiftKey})};return ee.createElement("div",{className:ht(["react-flow__nodesselection","react-flow__container",r]),style:{transform:p}},ee.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:i?void 0:-1,onKeyDown:i?void 0:w,style:{width:a,height:c,top:f,left:d}}))}var n2=N.memo(t2);const r2=t=>t.nodesSelectionActive,Hp=({children:t,onPaneClick:r,onPaneMouseEnter:i,onPaneMouseMove:l,onPaneMouseLeave:a,onPaneContextMenu:c,onPaneScroll:d,deleteKeyCode:f,onMove:p,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:x,selectionMode:w,onSelectionStart:C,onSelectionEnd:k,multiSelectionKeyCode:z,panActivationKeyCode:E,zoomActivationKeyCode:T,elementsSelectable:U,zoomOnScroll:R,zoomOnPinch:O,panOnScroll:H,panOnScrollSpeed:Z,panOnScrollMode:Y,zoomOnDoubleClick:L,panOnDrag:A,defaultViewport:V,translateExtent:I,minZoom:Q,maxZoom:S,preventScrolling:X,onSelectionContextMenu:j,noWheelClassName:q,noPanClassName:F,disableKeyboardA11y:M})=>{const B=Ie(r2),_=qi(v),P=qi(E),ne=P||A,te=P||H,oe=_||x&&ne!==!0;return Uw({deleteKeyCode:f,multiSelectionKeyCode:z}),ee.createElement(Yw,{onMove:p,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:c,elementsSelectable:U,zoomOnScroll:R,zoomOnPinch:O,panOnScroll:te,panOnScrollSpeed:Z,panOnScrollMode:Y,zoomOnDoubleClick:L,panOnDrag:!_&&ne,defaultViewport:V,translateExtent:I,minZoom:Q,maxZoom:S,zoomActivationKeyCode:T,preventScrolling:X,noWheelClassName:q,noPanClassName:F},ee.createElement(Mp,{onSelectionStart:C,onSelectionEnd:k,onPaneClick:r,onPaneMouseEnter:i,onPaneMouseMove:l,onPaneMouseLeave:a,onPaneContextMenu:c,onPaneScroll:d,panOnDrag:ne,isSelecting:!!oe,selectionMode:w},t,B&&ee.createElement(n2,{onSelectionContextMenu:j,noPanClassName:F,disableKeyboardA11y:M})))};Hp.displayName="FlowRenderer";var o2=N.memo(Hp);function i2(t){return Ie(N.useCallback(i=>t?pp(i.nodeInternals,{x:0,y:0,width:i.width,height:i.height},i.transform,!0):i.getNodes(),[t]))}function l2(t){const r={input:Ai(t.input||kp),default:Ai(t.default||nu),output:Ai(t.output||Cp),group:Ai(t.group||Cu)},i={},l=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,c)=>(a[c]=Ai(t[c]||nu),a),i);return{...r,...l}}const s2=({x:t,y:r,width:i,height:l,origin:a})=>!i||!l?{x:t,y:r}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:r}:{x:t-i*a[0],y:r-l*a[1]},a2=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Fp=t=>{const{nodesDraggable:r,nodesConnectable:i,nodesFocusable:l,elementsSelectable:a,updateNodeDimensions:c,onError:d}=Ie(a2,ft),f=i2(t.onlyRenderVisibleElements),p=N.useRef(),m=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const x=v.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));c(x)});return p.current=y,y},[]);return N.useEffect(()=>()=>{p?.current?.disconnect()},[]),ee.createElement("div",{className:"react-flow__nodes",style:Nu},f.map(y=>{let v=y.type||"default";t.nodeTypes[v]||(d?.("003",Gn.error003(v)),v="default");const x=t.nodeTypes[v]||t.nodeTypes.default,w=!!(y.draggable||r&&typeof y.draggable>"u"),C=!!(y.selectable||a&&typeof y.selectable>"u"),k=!!(y.connectable||i&&typeof y.connectable>"u"),z=!!(y.focusable||l&&typeof y.focusable>"u"),E=t.nodeExtent?xu(y.positionAbsolute,t.nodeExtent):y.positionAbsolute,T=E?.x??0,U=E?.y??0,R=s2({x:T,y:U,width:y.width??0,height:y.height??0,origin:t.nodeOrigin});return ee.createElement(x,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||me.Bottom,targetPosition:y.targetPosition||me.Top,hidden:y.hidden,xPos:T,yPos:U,xPosOrigin:R.x,yPosOrigin:R.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!y.selected,isDraggable:w,isSelectable:C,isConnectable:k,isFocusable:z,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[Ke]?.z??0,isParent:!!y[Ke]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!y.width&&!!y.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Ke]?.handleBounds})}))};Fp.displayName="NodeRenderer";var c2=N.memo(Fp);const u2=(t,r,i)=>i===me.Left?t-r:i===me.Right?t+r:t,d2=(t,r,i)=>i===me.Top?t-r:i===me.Bottom?t+r:t,nh="react-flow__edgeupdater",rh=({position:t,centerX:r,centerY:i,radius:l=10,onMouseDown:a,onMouseEnter:c,onMouseOut:d,type:f})=>ee.createElement("circle",{onMouseDown:a,onMouseEnter:c,onMouseOut:d,className:ht([nh,`${nh}-${f}`]),cx:u2(r,l,t),cy:d2(i,l,t),r:l,stroke:"transparent",fill:"transparent"}),f2=()=>!0;var To=t=>{const r=({id:i,className:l,type:a,data:c,onClick:d,onEdgeDoubleClick:f,selected:p,animated:m,label:y,labelStyle:v,labelShowBg:x,labelBgStyle:w,labelBgPadding:C,labelBgBorderRadius:k,style:z,source:E,target:T,sourceX:U,sourceY:R,targetX:O,targetY:H,sourcePosition:Z,targetPosition:Y,elementsSelectable:L,hidden:A,sourceHandleId:V,targetHandleId:I,onContextMenu:Q,onMouseEnter:S,onMouseMove:X,onMouseLeave:j,reconnectRadius:q,onReconnect:F,onReconnectStart:M,onReconnectEnd:B,markerEnd:_,markerStart:P,rfId:ne,ariaLabel:te,isFocusable:oe,isReconnectable:ae,pathOptions:de,interactionWidth:se,disableKeyboardA11y:ye})=>{const Se=N.useRef(null),[je,Ae]=N.useState(!1),[Oe,He]=N.useState(!1),Me=tt(),Pe=N.useMemo(()=>`url('#${eu(P,ne)}')`,[P,ne]),Ce=N.useMemo(()=>`url('#${eu(_,ne)}')`,[_,ne]);if(A)return null;const ue=Ue=>{const{edges:jt,addSelectedEdges:Kt,unselectNodesAndEdges:Gt,multiSelectionActive:En}=Me.getState(),xt=jt.find(Ht=>Ht.id===i);xt&&(L&&(Me.setState({nodesSelectionActive:!1}),xt.selected&&En?(Gt({nodes:[],edges:[xt]}),Se.current?.blur()):Kt([i])),d&&d(Ue,xt))},_e=Mi(i,Me.getState,f),Qe=Mi(i,Me.getState,Q),pt=Mi(i,Me.getState,S),zt=Mi(i,Me.getState,X),_t=Mi(i,Me.getState,j),lt=(Ue,jt)=>{if(Ue.button!==0)return;const{edges:Kt,isValidConnection:Gt}=Me.getState(),En=jt?T:E,xt=(jt?I:V)||null,Ht=jt?"target":"source",Pn=Gt||f2,Cn=jt,cn=Kt.find(Jt=>Jt.id===i);He(!0),M?.(Ue,cn,Ht);const Qt=Jt=>{He(!1),B?.(Jt,cn,Ht)};vp({event:Ue,handleId:xt,nodeId:En,onConnect:Jt=>F?.(cn,Jt),isTarget:Cn,getState:Me.getState,setState:Me.setState,isValidConnection:Pn,edgeUpdaterType:Ht,onReconnectEnd:Qt})},nt=Ue=>lt(Ue,!0),st=Ue=>lt(Ue,!1),qe=()=>Ae(!0),rt=()=>Ae(!1),kt=!L&&!d,Ot=Ue=>{if(!ye&&ip.includes(Ue.key)&&L){const{unselectNodesAndEdges:jt,addSelectedEdges:Kt,edges:Gt}=Me.getState();Ue.key==="Escape"?(Se.current?.blur(),jt({edges:[Gt.find(xt=>xt.id===i)]})):Kt([i])}};return ee.createElement("g",{className:ht(["react-flow__edge",`react-flow__edge-${a}`,l,{selected:p,animated:m,inactive:kt,updating:je}]),onClick:ue,onDoubleClick:_e,onContextMenu:Qe,onMouseEnter:pt,onMouseMove:zt,onMouseLeave:_t,onKeyDown:oe?Ot:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${i}`,"aria-label":te===null?void 0:te||`Edge from ${E} to ${T}`,"aria-describedby":oe?`${_p}-${ne}`:void 0,ref:Se},!Oe&&ee.createElement(t,{id:i,source:E,target:T,selected:p,animated:m,label:y,labelStyle:v,labelShowBg:x,labelBgStyle:w,labelBgPadding:C,labelBgBorderRadius:k,data:c,style:z,sourceX:U,sourceY:R,targetX:O,targetY:H,sourcePosition:Z,targetPosition:Y,sourceHandleId:V,targetHandleId:I,markerStart:Pe,markerEnd:Ce,pathOptions:de,interactionWidth:se}),ae&&ee.createElement(ee.Fragment,null,(ae==="source"||ae===!0)&&ee.createElement(rh,{position:Z,centerX:U,centerY:R,radius:q,onMouseDown:nt,onMouseEnter:qe,onMouseOut:rt,type:"source"}),(ae==="target"||ae===!0)&&ee.createElement(rh,{position:Y,centerX:O,centerY:H,radius:q,onMouseDown:st,onMouseEnter:qe,onMouseOut:rt,type:"target"})))};return r.displayName="EdgeWrapper",N.memo(r)};function h2(t){const r={default:To(t.default||$s),straight:To(t.bezier||bu),step:To(t.step||wu),smoothstep:To(t.step||Os),simplebezier:To(t.simplebezier||vu)},i={},l=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,c)=>(a[c]=To(t[c]||$s),a),i);return{...r,...l}}function oh(t,r,i=null){const l=(i?.x||0)+r.x,a=(i?.y||0)+r.y,c=i?.width||r.width,d=i?.height||r.height;switch(t){case me.Top:return{x:l+c/2,y:a};case me.Right:return{x:l+c,y:a+d/2};case me.Bottom:return{x:l+c/2,y:a+d};case me.Left:return{x:l,y:a+d/2}}}function ih(t,r){return t?t.length===1||!r?t[0]:r&&t.find(i=>i.id===r)||null:null}const p2=(t,r,i,l,a,c)=>{const d=oh(i,t,r),f=oh(c,l,a);return{sourceX:d.x,sourceY:d.y,targetX:f.x,targetY:f.y}};function g2({sourcePos:t,targetPos:r,sourceWidth:i,sourceHeight:l,targetWidth:a,targetHeight:c,width:d,height:f,transform:p}){const m={x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x+i,r.x+a),y2:Math.max(t.y+l,r.y+c)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Wi({x:(0-p[0])/p[2],y:(0-p[1])/p[2],width:d/p[2],height:f/p[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),x=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*x)>0}function lh(t){const r=t?.[Ke]?.handleBounds||null,i=r&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},r,!!i]}const m2=[{level:0,isMaxLevel:!0,edges:[]}];function y2(t,r,i=!1){let l=-1;const a=t.reduce((d,f)=>{const p=an(f.zIndex);let m=p?f.zIndex:0;if(i){const y=r.get(f.target),v=r.get(f.source),x=f.selected||y?.selected||v?.selected,w=Math.max(v?.[Ke]?.z||0,y?.[Ke]?.z||0,1e3);m=(p?f.zIndex:0)+(x?w:0)}return d[m]?d[m].push(f):d[m]=[f],l=m>l?m:l,d},{}),c=Object.entries(a).map(([d,f])=>{const p=+d;return{edges:f,level:p,isMaxLevel:p===l}});return c.length===0?m2:c}function x2(t,r,i){const l=Ie(N.useCallback(a=>t?a.edges.filter(c=>{const d=r.get(c.source),f=r.get(c.target);return d?.width&&d?.height&&f?.width&&f?.height&&g2({sourcePos:d.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:d.width,sourceHeight:d.height,targetWidth:f.width,targetHeight:f.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,r]));return y2(l,r,i)}const v2=({color:t="none",strokeWidth:r=1})=>ee.createElement("polyline",{style:{stroke:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),w2=({color:t="none",strokeWidth:r=1})=>ee.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),sh={[Rs.Arrow]:v2,[Rs.ArrowClosed]:w2};function b2(t){const r=tt();return N.useMemo(()=>Object.prototype.hasOwnProperty.call(sh,t)?sh[t]:(r.getState().onError?.("009",Gn.error009(t)),null),[t])}const S2=({id:t,type:r,color:i,width:l=12.5,height:a=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const p=b2(r);return p?ee.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${l}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:f,refX:"0",refY:"0"},ee.createElement(p,{color:i,strokeWidth:d})):null},k2=({defaultColor:t,rfId:r})=>i=>{const l=[];return i.edges.reduce((a,c)=>([c.markerStart,c.markerEnd].forEach(d=>{if(d&&typeof d=="object"){const f=eu(d,r);l.includes(f)||(a.push({id:f,color:d.color||t,...d}),l.push(f))}}),a),[]).sort((a,c)=>a.id.localeCompare(c.id))},Vp=({defaultColor:t,rfId:r})=>{const i=Ie(N.useCallback(k2({defaultColor:t,rfId:r}),[t,r]),(l,a)=>!(l.length!==a.length||l.some((c,d)=>c.id!==a[d].id)));return ee.createElement("defs",null,i.map(l=>ee.createElement(S2,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient})))};Vp.displayName="MarkerDefinitions";var E2=N.memo(Vp);const C2=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Up=({defaultMarkerColor:t,onlyRenderVisibleElements:r,elevateEdgesOnSelect:i,rfId:l,edgeTypes:a,noPanClassName:c,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:p,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:x,onReconnectStart:w,onReconnectEnd:C,reconnectRadius:k,children:z,disableKeyboardA11y:E})=>{const{edgesFocusable:T,edgesUpdatable:U,elementsSelectable:R,width:O,height:H,connectionMode:Z,nodeInternals:Y,onError:L}=Ie(C2,ft),A=x2(r,Y,i);return O?ee.createElement(ee.Fragment,null,A.map(({level:V,edges:I,isMaxLevel:Q})=>ee.createElement("svg",{key:V,style:{zIndex:V},width:O,height:H,className:"react-flow__edges react-flow__container"},Q&&ee.createElement(E2,{defaultColor:t,rfId:l}),ee.createElement("g",null,I.map(S=>{const[X,j,q]=lh(Y.get(S.source)),[F,M,B]=lh(Y.get(S.target));if(!q||!B)return null;let _=S.type||"default";a[_]||(L?.("011",Gn.error011(_)),_="default");const P=a[_]||a.default,ne=Z===Kr.Strict?M.target:(M.target??[]).concat(M.source??[]),te=ih(j.source,S.sourceHandle),oe=ih(ne,S.targetHandle),ae=te?.position||me.Bottom,de=oe?.position||me.Top,se=!!(S.focusable||T&&typeof S.focusable>"u"),ye=S.reconnectable||S.updatable,Se=typeof x<"u"&&(ye||U&&typeof ye>"u");if(!te||!oe)return L?.("008",Gn.error008(te,S)),null;const{sourceX:je,sourceY:Ae,targetX:Oe,targetY:He}=p2(X,te,ae,F,oe,de);return ee.createElement(P,{key:S.id,id:S.id,className:ht([S.className,c]),type:_,data:S.data,selected:!!S.selected,animated:!!S.animated,hidden:!!S.hidden,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,style:S.style,source:S.source,target:S.target,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerEnd:S.markerEnd,markerStart:S.markerStart,sourceX:je,sourceY:Ae,targetX:Oe,targetY:He,sourcePosition:ae,targetPosition:de,elementsSelectable:R,onContextMenu:d,onMouseEnter:f,onMouseMove:p,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:x,onReconnectStart:w,onReconnectEnd:C,reconnectRadius:k,rfId:l,ariaLabel:S.ariaLabel,isFocusable:se,isReconnectable:Se,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth,disableKeyboardA11y:E})})))),z):null};Up.displayName="EdgeRenderer";var N2=N.memo(Up);const z2=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function _2({children:t}){const r=Ie(z2);return ee.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:r}},t)}function j2(t){const r=Tn(),i=N.useRef(!1);N.useEffect(()=>{!i.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),i.current=!0)},[t,r.viewportInitialized])}const R2={[me.Left]:me.Right,[me.Right]:me.Left,[me.Top]:me.Bottom,[me.Bottom]:me.Top},Bp=({nodeId:t,handleType:r,style:i,type:l=br.Bezier,CustomComponent:a,connectionStatus:c})=>{const{fromNode:d,handleId:f,toX:p,toY:m,connectionMode:y}=Ie(N.useCallback(H=>({fromNode:H.nodeInternals.get(t),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2],connectionMode:H.connectionMode}),[t]),ft),v=d?.[Ke]?.handleBounds;let x=v?.[r];if(y===Kr.Loose&&(x=x||v?.[r==="source"?"target":"source"]),!d||!x)return null;const w=f?x.find(H=>H.id===f):x[0],C=w?w.x+w.width/2:(d.width??0)/2,k=w?w.y+w.height/2:d.height??0,z=(d.positionAbsolute?.x??0)+C,E=(d.positionAbsolute?.y??0)+k,T=w?.position,U=T?R2[T]:null;if(!T||!U)return null;if(a)return ee.createElement(a,{connectionLineType:l,connectionLineStyle:i,fromNode:d,fromHandle:w,fromX:z,fromY:E,toX:p,toY:m,fromPosition:T,toPosition:U,connectionStatus:c});let R="";const O={sourceX:z,sourceY:E,sourcePosition:T,targetX:p,targetY:m,targetPosition:U};return l===br.Bezier?[R]=Su(O):l===br.Step?[R]=Yi({...O,borderRadius:0}):l===br.SmoothStep?[R]=Yi(O):l===br.SimpleBezier?[R]=cp(O):R=`M${z},${E} ${p},${m}`,ee.createElement("path",{d:R,fill:"none",className:"react-flow__connection-path",style:i})};Bp.displayName="ConnectionLine";const $2=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function T2({containerStyle:t,style:r,type:i,component:l}){const{nodeId:a,handleType:c,nodesConnectable:d,width:f,height:p,connectionStatus:m}=Ie($2,ft);return!(a&&c&&f&&d)?null:ee.createElement("svg",{style:t,width:f,height:p,className:"react-flow__edges react-flow__connectionline react-flow__container"},ee.createElement("g",{className:ht(["react-flow__connection",m])},ee.createElement(Bp,{nodeId:a,handleType:c,style:r,type:i,CustomComponent:l,connectionStatus:m})))}function ah(t,r){return N.useRef(null),tt(),N.useMemo(()=>r(t),[t])}const Wp=({nodeTypes:t,edgeTypes:r,onMove:i,onMoveStart:l,onMoveEnd:a,onInit:c,onNodeClick:d,onEdgeClick:f,onNodeDoubleClick:p,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:x,onNodeContextMenu:w,onSelectionContextMenu:C,onSelectionStart:k,onSelectionEnd:z,connectionLineType:E,connectionLineStyle:T,connectionLineComponent:U,connectionLineContainerStyle:R,selectionKeyCode:O,selectionOnDrag:H,selectionMode:Z,multiSelectionKeyCode:Y,panActivationKeyCode:L,zoomActivationKeyCode:A,deleteKeyCode:V,onlyRenderVisibleElements:I,elementsSelectable:Q,selectNodesOnDrag:S,defaultViewport:X,translateExtent:j,minZoom:q,maxZoom:F,preventScrolling:M,defaultMarkerColor:B,zoomOnScroll:_,zoomOnPinch:P,panOnScroll:ne,panOnScrollSpeed:te,panOnScrollMode:oe,zoomOnDoubleClick:ae,panOnDrag:de,onPaneClick:se,onPaneMouseEnter:ye,onPaneMouseMove:Se,onPaneMouseLeave:je,onPaneScroll:Ae,onPaneContextMenu:Oe,onEdgeContextMenu:He,onEdgeMouseEnter:Me,onEdgeMouseMove:Pe,onEdgeMouseLeave:Ce,onReconnect:ue,onReconnectStart:_e,onReconnectEnd:Qe,reconnectRadius:pt,noDragClassName:zt,noWheelClassName:_t,noPanClassName:lt,elevateEdgesOnSelect:nt,disableKeyboardA11y:st,nodeOrigin:qe,nodeExtent:rt,rfId:kt})=>{const Ot=ah(t,l2),Ue=ah(r,h2);return j2(c),ee.createElement(o2,{onPaneClick:se,onPaneMouseEnter:ye,onPaneMouseMove:Se,onPaneMouseLeave:je,onPaneContextMenu:Oe,onPaneScroll:Ae,deleteKeyCode:V,selectionKeyCode:O,selectionOnDrag:H,selectionMode:Z,onSelectionStart:k,onSelectionEnd:z,multiSelectionKeyCode:Y,panActivationKeyCode:L,zoomActivationKeyCode:A,elementsSelectable:Q,onMove:i,onMoveStart:l,onMoveEnd:a,zoomOnScroll:_,zoomOnPinch:P,zoomOnDoubleClick:ae,panOnScroll:ne,panOnScrollSpeed:te,panOnScrollMode:oe,panOnDrag:de,defaultViewport:X,translateExtent:j,minZoom:q,maxZoom:F,onSelectionContextMenu:C,preventScrolling:M,noDragClassName:zt,noWheelClassName:_t,noPanClassName:lt,disableKeyboardA11y:st},ee.createElement(_2,null,ee.createElement(N2,{edgeTypes:Ue,onEdgeClick:f,onEdgeDoubleClick:m,onlyRenderVisibleElements:I,onEdgeContextMenu:He,onEdgeMouseEnter:Me,onEdgeMouseMove:Pe,onEdgeMouseLeave:Ce,onReconnect:ue,onReconnectStart:_e,onReconnectEnd:Qe,reconnectRadius:pt,defaultMarkerColor:B,noPanClassName:lt,elevateEdgesOnSelect:!!nt,disableKeyboardA11y:st,rfId:kt},ee.createElement(T2,{style:T,type:E,component:U,containerStyle:R})),ee.createElement("div",{className:"react-flow__edgelabel-renderer"}),ee.createElement(c2,{nodeTypes:Ot,onNodeClick:d,onNodeDoubleClick:p,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:x,onNodeContextMenu:w,selectNodesOnDrag:S,onlyRenderVisibleElements:I,noPanClassName:lt,noDragClassName:zt,disableKeyboardA11y:st,nodeOrigin:qe,nodeExtent:rt,rfId:kt})))};Wp.displayName="GraphView";var P2=N.memo(Wp);const ou=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],xr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ou,nodeExtent:ou,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Kr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:dw,isValidConnection:void 0},M2=()=>zy((t,r)=>({...xr,setNodes:i=>{const{nodeInternals:l,nodeOrigin:a,elevateNodesOnSelect:c}=r();t({nodeInternals:Ac(i,l,a,c)})},getNodes:()=>Array.from(r().nodeInternals.values()),setEdges:i=>{const{defaultEdgeOptions:l={}}=r();t({edges:i.map(a=>({...l,...a}))})},setDefaultNodesAndEdges:(i,l)=>{const a=typeof i<"u",c=typeof l<"u",d=a?Ac(i,new Map,r().nodeOrigin,r().elevateNodesOnSelect):new Map;t({nodeInternals:d,edges:c?l:[],hasDefaultNodes:a,hasDefaultEdges:c})},updateNodeDimensions:i=>{const{onNodesChange:l,nodeInternals:a,fitViewOnInit:c,fitViewOnInitDone:d,fitViewOnInitOptions:f,domNode:p,nodeOrigin:m}=r(),y=p?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:x}=new window.DOMMatrixReadOnly(v.transform),w=i.reduce((k,z)=>{const E=a.get(z.id);if(E?.hidden)a.set(E.id,{...E,[Ke]:{...E[Ke],handleBounds:void 0}});else if(E){const T=yu(z.nodeElement);T.width&&T.height&&(E.width!==T.width||E.height!==T.height||z.forceUpdate)&&(a.set(E.id,{...E,[Ke]:{...E[Ke],handleBounds:{source:th(".source",z.nodeElement,x,m),target:th(".target",z.nodeElement,x,m)}},...T}),k.push({id:E.id,type:"dimensions",dimensions:T}))}return k},[]);Rp(a,m);const C=d||c&&!d&&$p(r,{initial:!0,...f});t({nodeInternals:new Map(a),fitViewOnInitDone:C}),w?.length>0&&l?.(w)},updateNodePositions:(i,l=!0,a=!1)=>{const{triggerNodeChanges:c}=r(),d=i.map(f=>{const p={id:f.id,type:"position",dragging:a};return l&&(p.positionAbsolute=f.positionAbsolute,p.position=f.position),p});c(d)},triggerNodeChanges:i=>{const{onNodesChange:l,nodeInternals:a,hasDefaultNodes:c,nodeOrigin:d,getNodes:f,elevateNodesOnSelect:p}=r();if(i?.length){if(c){const m=Pp(i,f()),y=Ac(m,a,d,p);t({nodeInternals:y})}l?.(i)}},addSelectedNodes:i=>{const{multiSelectionActive:l,edges:a,getNodes:c}=r();let d,f=null;l?d=i.map(p=>wr(p,!0)):(d=Ao(c(),i),f=Ao(a,[])),hs({changedNodes:d,changedEdges:f,get:r,set:t})},addSelectedEdges:i=>{const{multiSelectionActive:l,edges:a,getNodes:c}=r();let d,f=null;l?d=i.map(p=>wr(p,!0)):(d=Ao(a,i),f=Ao(c(),[])),hs({changedNodes:f,changedEdges:d,get:r,set:t})},unselectNodesAndEdges:({nodes:i,edges:l}={})=>{const{edges:a,getNodes:c}=r(),d=i||c(),f=l||a,p=d.map(y=>(y.selected=!1,wr(y.id,!1))),m=f.map(y=>wr(y.id,!1));hs({changedNodes:p,changedEdges:m,get:r,set:t})},setMinZoom:i=>{const{d3Zoom:l,maxZoom:a}=r();l?.scaleExtent([i,a]),t({minZoom:i})},setMaxZoom:i=>{const{d3Zoom:l,minZoom:a}=r();l?.scaleExtent([a,i]),t({maxZoom:i})},setTranslateExtent:i=>{r().d3Zoom?.translateExtent(i),t({translateExtent:i})},resetSelectedElements:()=>{const{edges:i,getNodes:l}=r(),c=l().filter(f=>f.selected).map(f=>wr(f.id,!1)),d=i.filter(f=>f.selected).map(f=>wr(f.id,!1));hs({changedNodes:c,changedEdges:d,get:r,set:t})},setNodeExtent:i=>{const{nodeInternals:l}=r();l.forEach(a=>{a.positionAbsolute=xu(a.position,i)}),t({nodeExtent:i,nodeInternals:new Map(l)})},panBy:i=>{const{transform:l,width:a,height:c,d3Zoom:d,d3Selection:f,translateExtent:p}=r();if(!d||!f||!i.x&&!i.y)return!1;const m=Zn.translate(l[0]+i.x,l[1]+i.y).scale(l[2]),y=[[0,0],[a,c]],v=d?.constrain()(m,y,p);return d.transform(f,v),l[0]!==v.x||l[1]!==v.y||l[2]!==v.k},cancelConnection:()=>t({connectionNodeId:xr.connectionNodeId,connectionHandleId:xr.connectionHandleId,connectionHandleType:xr.connectionHandleType,connectionStatus:xr.connectionStatus,connectionStartHandle:xr.connectionStartHandle,connectionEndHandle:xr.connectionEndHandle}),reset:()=>t({...xr})}),Object.is),zu=({children:t})=>{const r=N.useRef(null);return r.current||(r.current=M2()),ee.createElement(ow,{value:r.current},t)};zu.displayName="ReactFlowProvider";const Xp=({children:t})=>N.useContext(Ds)?ee.createElement(ee.Fragment,null,t):ee.createElement(zu,null,t);Xp.displayName="ReactFlowWrapper";const L2={input:kp,default:nu,output:Cp,group:Cu},A2={default:$s,straight:bu,step:wu,smoothstep:Os,simplebezier:vu},I2=[0,0],D2=[15,15],O2={x:0,y:0,zoom:1},H2={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Yp=N.forwardRef(({nodes:t,edges:r,defaultNodes:i,defaultEdges:l,className:a,nodeTypes:c=L2,edgeTypes:d=A2,onNodeClick:f,onEdgeClick:p,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:x,onConnect:w,onConnectStart:C,onConnectEnd:k,onClickConnectStart:z,onClickConnectEnd:E,onNodeMouseEnter:T,onNodeMouseMove:U,onNodeMouseLeave:R,onNodeContextMenu:O,onNodeDoubleClick:H,onNodeDragStart:Z,onNodeDrag:Y,onNodeDragStop:L,onNodesDelete:A,onEdgesDelete:V,onSelectionChange:I,onSelectionDragStart:Q,onSelectionDrag:S,onSelectionDragStop:X,onSelectionContextMenu:j,onSelectionStart:q,onSelectionEnd:F,connectionMode:M=Kr.Strict,connectionLineType:B=br.Bezier,connectionLineStyle:_,connectionLineComponent:P,connectionLineContainerStyle:ne,deleteKeyCode:te="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:ae=!1,selectionMode:de=Xi.Full,panActivationKeyCode:se="Space",multiSelectionKeyCode:ye=js()?"Meta":"Control",zoomActivationKeyCode:Se=js()?"Meta":"Control",snapToGrid:je=!1,snapGrid:Ae=D2,onlyRenderVisibleElements:Oe=!1,selectNodesOnDrag:He=!0,nodesDraggable:Me,nodesConnectable:Pe,nodesFocusable:Ce,nodeOrigin:ue=I2,edgesFocusable:_e,edgesUpdatable:Qe,elementsSelectable:pt,defaultViewport:zt=O2,minZoom:_t=.5,maxZoom:lt=2,translateExtent:nt=ou,preventScrolling:st=!0,nodeExtent:qe,defaultMarkerColor:rt="#b1b1b7",zoomOnScroll:kt=!0,zoomOnPinch:Ot=!0,panOnScroll:Ue=!1,panOnScrollSpeed:jt=.5,panOnScrollMode:Kt=Xr.Free,zoomOnDoubleClick:Gt=!0,panOnDrag:En=!0,onPaneClick:xt,onPaneMouseEnter:Ht,onPaneMouseMove:Pn,onPaneMouseLeave:Cn,onPaneScroll:cn,onPaneContextMenu:Qt,children:un,onEdgeContextMenu:Jt,onEdgeDoubleClick:dn,onEdgeMouseEnter:Gr,onEdgeMouseMove:Qr,onEdgeMouseLeave:Jr,onEdgeUpdate:Nr,onEdgeUpdateStart:eo,onEdgeUpdateEnd:Mn,onReconnect:zr,onReconnectStart:Ln,onReconnectEnd:qo,reconnectRadius:An=10,edgeUpdaterRadius:In=10,onNodesChange:Qn,onEdgesChange:_r,noDragClassName:jr="nodrag",noWheelClassName:to="nowheel",noPanClassName:no="nopan",fitView:fn=!1,fitViewOptions:ro,connectOnClick:Re=!0,attributionPosition:Ee,proOptions:Et,defaultEdgeOptions:Je,elevateNodesOnSelect:Ft=!0,elevateEdgesOnSelect:Rr=!1,disableKeyboardA11y:$r=!1,autoPanOnConnect:Zo=!0,autoPanOnNodeDrag:We=!0,connectionRadius:Vs=20,isValidConnection:Ko,onError:Ji,style:oo,id:el,nodeDragThreshold:tl,...io},en)=>{const Go=el||"1";return ee.createElement("div",{...io,style:{...oo,...H2},ref:en,className:ht(["react-flow",a]),"data-testid":"rf__wrapper",id:el},ee.createElement(Xp,null,ee.createElement(P2,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:x,onNodeClick:f,onEdgeClick:p,onNodeMouseEnter:T,onNodeMouseMove:U,onNodeMouseLeave:R,onNodeContextMenu:O,onNodeDoubleClick:H,nodeTypes:c,edgeTypes:d,connectionLineType:B,connectionLineStyle:_,connectionLineComponent:P,connectionLineContainerStyle:ne,selectionKeyCode:oe,selectionOnDrag:ae,selectionMode:de,deleteKeyCode:te,multiSelectionKeyCode:ye,panActivationKeyCode:se,zoomActivationKeyCode:Se,onlyRenderVisibleElements:Oe,selectNodesOnDrag:He,defaultViewport:zt,translateExtent:nt,minZoom:_t,maxZoom:lt,preventScrolling:st,zoomOnScroll:kt,zoomOnPinch:Ot,zoomOnDoubleClick:Gt,panOnScroll:Ue,panOnScrollSpeed:jt,panOnScrollMode:Kt,panOnDrag:En,onPaneClick:xt,onPaneMouseEnter:Ht,onPaneMouseMove:Pn,onPaneMouseLeave:Cn,onPaneScroll:cn,onPaneContextMenu:Qt,onSelectionContextMenu:j,onSelectionStart:q,onSelectionEnd:F,onEdgeContextMenu:Jt,onEdgeDoubleClick:dn,onEdgeMouseEnter:Gr,onEdgeMouseMove:Qr,onEdgeMouseLeave:Jr,onReconnect:zr??Nr,onReconnectStart:Ln??eo,onReconnectEnd:qo??Mn,reconnectRadius:An??In,defaultMarkerColor:rt,noDragClassName:jr,noWheelClassName:to,noPanClassName:no,elevateEdgesOnSelect:Rr,rfId:Go,disableKeyboardA11y:$r,nodeOrigin:ue,nodeExtent:qe}),ee.createElement($w,{nodes:t,edges:r,defaultNodes:i,defaultEdges:l,onConnect:w,onConnectStart:C,onConnectEnd:k,onClickConnectStart:z,onClickConnectEnd:E,nodesDraggable:Me,nodesConnectable:Pe,nodesFocusable:Ce,edgesFocusable:_e,edgesUpdatable:Qe,elementsSelectable:pt,elevateNodesOnSelect:Ft,minZoom:_t,maxZoom:lt,nodeExtent:qe,onNodesChange:Qn,onEdgesChange:_r,snapToGrid:je,snapGrid:Ae,connectionMode:M,translateExtent:nt,connectOnClick:Re,defaultEdgeOptions:Je,fitView:fn,fitViewOptions:ro,onNodesDelete:A,onEdgesDelete:V,onNodeDragStart:Z,onNodeDrag:Y,onNodeDragStop:L,onSelectionDrag:S,onSelectionDragStart:Q,onSelectionDragStop:X,noPanClassName:no,nodeOrigin:ue,rfId:Go,autoPanOnConnect:Zo,autoPanOnNodeDrag:We,onError:Ji,connectionRadius:Vs,isValidConnection:Ko,nodeDragThreshold:tl}),ee.createElement(jw,{onSelectionChange:I}),un,ee.createElement(lw,{proOptions:Et,position:Ee}),ee.createElement(Aw,{rfId:Go,disableKeyboardA11y:$r})))});Yp.displayName="ReactFlow";const F2=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function V2({children:t}){const r=Ie(F2);return r?_s.createPortal(t,r):null}function qp(t){return r=>{const[i,l]=N.useState(r),a=N.useCallback(c=>l(d=>t(c,d)),[]);return[i,l,a]}}const U2=qp(Pp),B2=qp(Kw),Zp=({id:t,x:r,y:i,width:l,height:a,style:c,color:d,strokeColor:f,strokeWidth:p,className:m,borderRadius:y,shapeRendering:v,onClick:x,selected:w})=>{const{background:C,backgroundColor:k}=c||{},z=d||C||k;return ee.createElement("rect",{className:ht(["react-flow__minimap-node",{selected:w},m]),x:r,y:i,rx:y,ry:y,width:l,height:a,fill:z,stroke:f,strokeWidth:p,shapeRendering:v,onClick:x?E=>x(E,t):void 0})};Zp.displayName="MiniMapNode";var W2=N.memo(Zp);const X2=t=>t.nodeOrigin,Y2=t=>t.getNodes().filter(r=>!r.hidden&&r.width&&r.height),Hc=t=>t instanceof Function?t:()=>t;function q2({nodeStrokeColor:t="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:l=5,nodeStrokeWidth:a=2,nodeComponent:c=W2,onClick:d}){const f=Ie(Y2,ft),p=Ie(X2),m=Hc(r),y=Hc(t),v=Hc(i),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return ee.createElement(ee.Fragment,null,f.map(w=>{const{x:C,y:k}=qr(w,p).positionAbsolute;return ee.createElement(c,{key:w.id,x:C,y:k,width:w.width,height:w.height,style:w.style,selected:w.selected,className:v(w),color:m(w),borderRadius:l,strokeColor:y(w),strokeWidth:a,shapeRendering:x,onClick:d,id:w.id})}))}var Z2=N.memo(q2);const K2=200,G2=150,Q2=t=>{const r=t.getNodes(),i={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:i,boundingRect:r.length>0?cw(Qi(r,t.nodeOrigin),i):i,rfId:t.rfId}},J2="react-flow__minimap-desc";function Kp({style:t,className:r,nodeStrokeColor:i="transparent",nodeColor:l="#e2e2e2",nodeClassName:a="",nodeBorderRadius:c=5,nodeStrokeWidth:d=2,nodeComponent:f,maskColor:p="rgb(240, 240, 240, 0.6)",maskStrokeColor:m="none",maskStrokeWidth:y=1,position:v="bottom-right",onClick:x,onNodeClick:w,pannable:C=!1,zoomable:k=!1,ariaLabel:z="React Flow mini map",inversePan:E=!1,zoomStep:T=10,offsetScale:U=5}){const R=tt(),O=N.useRef(null),{boundingRect:H,viewBB:Z,rfId:Y}=Ie(Q2,ft),L=t?.width??K2,A=t?.height??G2,V=H.width/L,I=H.height/A,Q=Math.max(V,I),S=Q*L,X=Q*A,j=U*Q,q=H.x-(S-H.width)/2-j,F=H.y-(X-H.height)/2-j,M=S+j*2,B=X+j*2,_=`${J2}-${Y}`,P=N.useRef(0);P.current=Q,N.useEffect(()=>{if(O.current){const oe=Yt(O.current),ae=ye=>{const{transform:Se,d3Selection:je,d3Zoom:Ae}=R.getState();if(ye.sourceEvent.type!=="wheel"||!je||!Ae)return;const Oe=-ye.sourceEvent.deltaY*(ye.sourceEvent.deltaMode===1?.05:ye.sourceEvent.deltaMode?1:.002)*T,He=Se[2]*Math.pow(2,Oe);Ae.scaleTo(je,He)},de=ye=>{const{transform:Se,d3Selection:je,d3Zoom:Ae,translateExtent:Oe,width:He,height:Me}=R.getState();if(ye.sourceEvent.type!=="mousemove"||!je||!Ae)return;const Pe=P.current*Math.max(1,Se[2])*(E?-1:1),Ce={x:Se[0]-ye.sourceEvent.movementX*Pe,y:Se[1]-ye.sourceEvent.movementY*Pe},ue=[[0,0],[He,Me]],_e=Zn.translate(Ce.x,Ce.y).scale(Se[2]),Qe=Ae.constrain()(_e,ue,Oe);Ae.transform(je,Qe)},se=Jh().on("zoom",C?de:null).on("zoom.wheel",k?ae:null);return oe.call(se),()=>{oe.on("zoom",null)}}},[C,k,E,T]);const ne=x?oe=>{const ae=wn(oe);x(oe,{x:ae[0],y:ae[1]})}:void 0,te=w?(oe,ae)=>{const de=R.getState().nodeInternals.get(ae);w(oe,de)}:void 0;return ee.createElement(mu,{position:v,style:t,className:ht(["react-flow__minimap",r]),"data-testid":"rf__minimap"},ee.createElement("svg",{width:L,height:A,viewBox:`${q} ${F} ${M} ${B}`,role:"img","aria-labelledby":_,ref:O,onClick:ne},z&&ee.createElement("title",{id:_},z),ee.createElement(Z2,{onClick:te,nodeColor:l,nodeStrokeColor:i,nodeBorderRadius:c,nodeClassName:a,nodeStrokeWidth:d,nodeComponent:f}),ee.createElement("path",{className:"react-flow__minimap-mask",d:`M${q-j},${F-j}h${M+j*2}v${B+j*2}h${-M-j*2}z
        M${Z.x},${Z.y}h${Z.width}v${Z.height}h${-Z.width}z`,fill:p,fillRule:"evenodd",stroke:m,strokeWidth:y,pointerEvents:"none"})))}Kp.displayName="MiniMap";var eb=N.memo(Kp);function tb(){return ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ee.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function nb(){return ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ee.createElement("path",{d:"M0 0h32v4.2H0z"}))}function rb(){return ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ee.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function ob(){return ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ee.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function ib(){return ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ee.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Oi=({children:t,className:r,...i})=>ee.createElement("button",{type:"button",className:ht(["react-flow__controls-button",r]),...i},t);Oi.displayName="ControlButton";const lb=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Gp=({style:t,showZoom:r=!0,showFitView:i=!0,showInteractive:l=!0,fitViewOptions:a,onZoomIn:c,onZoomOut:d,onFitView:f,onInteractiveChange:p,className:m,children:y,position:v="bottom-left"})=>{const x=tt(),[w,C]=N.useState(!1),{isInteractive:k,minZoomReached:z,maxZoomReached:E}=Ie(lb,ft),{zoomIn:T,zoomOut:U,fitView:R}=Tn();if(N.useEffect(()=>{C(!0)},[]),!w)return null;const O=()=>{T(),c?.()},H=()=>{U(),d?.()},Z=()=>{R(a),f?.()},Y=()=>{x.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),p?.(!k)};return ee.createElement(mu,{className:ht(["react-flow__controls",m]),position:v,style:t,"data-testid":"rf__controls"},r&&ee.createElement(ee.Fragment,null,ee.createElement(Oi,{onClick:O,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:E},ee.createElement(tb,null)),ee.createElement(Oi,{onClick:H,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:z},ee.createElement(nb,null))),i&&ee.createElement(Oi,{className:"react-flow__controls-fitview",onClick:Z,title:"fit view","aria-label":"fit view"},ee.createElement(rb,null)),l&&ee.createElement(Oi,{className:"react-flow__controls-interactive",onClick:Y,title:"toggle interactivity","aria-label":"toggle interactivity"},k?ee.createElement(ib,null):ee.createElement(ob,null)),y)};Gp.displayName="Controls";var sb=N.memo(Gp),Sn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Sn||(Sn={}));function ab({color:t,dimensions:r,lineWidth:i}){return ee.createElement("path",{stroke:t,strokeWidth:i,d:`M${r[0]/2} 0 V${r[1]} M0 ${r[1]/2} H${r[0]}`})}function cb({color:t,radius:r}){return ee.createElement("circle",{cx:r,cy:r,r,fill:t})}const ub={[Sn.Dots]:"#91919a",[Sn.Lines]:"#eee",[Sn.Cross]:"#e2e2e2"},db={[Sn.Dots]:1,[Sn.Lines]:1,[Sn.Cross]:6},fb=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Qp({id:t,variant:r=Sn.Dots,gap:i=20,size:l,lineWidth:a=1,offset:c=2,color:d,style:f,className:p}){const m=N.useRef(null),{transform:y,patternId:v}=Ie(fb,ft),x=d||ub[r],w=l||db[r],C=r===Sn.Dots,k=r===Sn.Cross,z=Array.isArray(i)?i:[i,i],E=[z[0]*y[2]||1,z[1]*y[2]||1],T=w*y[2],U=k?[T,T]:E,R=C?[T/c,T/c]:[U[0]/c,U[1]/c];return ee.createElement("svg",{className:ht(["react-flow__background",p]),style:{...f,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},ee.createElement("pattern",{id:v+t,x:y[0]%E[0],y:y[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R[0]},-${R[1]})`},C?ee.createElement(cb,{color:x,radius:T/c}):ee.createElement(ab,{dimensions:U,color:x,lineWidth:a})),ee.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}Qp.displayName="Background";var hb=N.memo(Qp),Ho;(function(t){t.Line="line",t.Handle="handle"})(Ho||(Ho={}));function pb({width:t,prevWidth:r,height:i,prevHeight:l,invertX:a,invertY:c}){const d=t-r,f=i-l,p=[d>0?1:d<0?-1:0,f>0?1:f<0?-1:0];return d&&a&&(p[0]=p[0]*-1),f&&c&&(p[1]=p[1]*-1),p}const Jp={width:0,height:0,x:0,y:0},gb={...Jp,pointerX:0,pointerY:0,aspectRatio:1};function mb({nodeId:t,position:r,variant:i=Ho.Handle,className:l,style:a={},children:c,color:d,minWidth:f=10,minHeight:p=10,maxWidth:m=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:v=!1,shouldResize:x,onResizeStart:w,onResize:C,onResizeEnd:k}){const z=dp(),E=typeof t=="string"?t:z,T=tt(),U=N.useRef(null),R=N.useRef(gb),O=N.useRef(Jp),H=Ip(),Z=i===Ho.Line?"right":"bottom-right",Y=r??Z;N.useEffect(()=>{if(!U.current||!E)return;const I=Yt(U.current),Q=Y.includes("right")||Y.includes("left"),S=Y.includes("bottom")||Y.includes("top"),X=Y.includes("left"),j=Y.includes("top"),q=Oh().on("start",F=>{const M=T.getState().nodeInternals.get(E),{xSnapped:B,ySnapped:_}=H(F);O.current={width:M?.width??0,height:M?.height??0,x:M?.position.x??0,y:M?.position.y??0},R.current={...O.current,pointerX:B,pointerY:_,aspectRatio:O.current.width/O.current.height},w?.(F,{...O.current})}).on("drag",F=>{const{nodeInternals:M,triggerNodeChanges:B}=T.getState(),{xSnapped:_,ySnapped:P}=H(F),ne=M.get(E);if(ne){const te=[],{pointerX:oe,pointerY:ae,width:de,height:se,x:ye,y:Se,aspectRatio:je}=R.current,{x:Ae,y:Oe,width:He,height:Me}=O.current,Pe=Math.floor(Q?_-oe:0),Ce=Math.floor(S?P-ae:0);let ue=Er(de+(X?-Pe:Pe),f,m),_e=Er(se+(j?-Ce:Ce),p,y);if(v){const nt=ue/_e,st=Q&&S,qe=Q&&!S,rt=S&&!Q;ue=nt<=je&&st||rt?_e*je:ue,_e=nt>je&&st||qe?ue/je:_e,ue>=m?(ue=m,_e=m/je):ue<=f&&(ue=f,_e=f/je),_e>=y?(_e=y,ue=y*je):_e<=p&&(_e=p,ue=p*je)}const Qe=ue!==He,pt=_e!==Me;if(X||j){const nt=X?ye-(ue-de):ye,st=j?Se-(_e-se):Se,qe=nt!==Ae&&Qe,rt=st!==Oe&&pt;if(qe||rt){const kt={id:ne.id,type:"position",position:{x:qe?nt:Ae,y:rt?st:Oe}};te.push(kt),O.current.x=kt.position.x,O.current.y=kt.position.y}}if(Qe||pt){const nt={id:E,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:ue,height:_e}};te.push(nt),O.current.width=ue,O.current.height=_e}if(te.length===0)return;const zt=pb({width:O.current.width,prevWidth:He,height:O.current.height,prevHeight:Me,invertX:X,invertY:j}),_t={...O.current,direction:zt};if(x?.(F,_t)===!1)return;C?.(F,_t),B(te)}}).on("end",F=>{const M={id:E,type:"dimensions",resizing:!1};k?.(F,{...O.current}),T.getState().triggerNodeChanges([M])});return I.call(q),()=>{I.on(".drag",null)}},[E,Y,f,p,m,y,v,H,w,C,k]);const L=Y.split("-"),A=i===Ho.Line?"borderColor":"backgroundColor",V=d?{...a,[A]:d}:a;return ee.createElement("div",{className:ht(["react-flow__resize-control","nodrag",...L,i,l]),ref:U,style:V},c)}var ch=N.memo(mb);const yb=["top-left","top-right","bottom-left","bottom-right"],xb=["top","right","bottom","left"];function Wo({nodeId:t,isVisible:r=!0,handleClassName:i,handleStyle:l,lineClassName:a,lineStyle:c,color:d,minWidth:f=10,minHeight:p=10,maxWidth:m=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:v=!1,shouldResize:x,onResizeStart:w,onResize:C,onResizeEnd:k}){return r?ee.createElement(ee.Fragment,null,xb.map(z=>ee.createElement(ch,{key:z,className:a,style:c,nodeId:t,position:z,variant:Ho.Line,color:d,minWidth:f,minHeight:p,maxWidth:m,maxHeight:y,onResizeStart:w,keepAspectRatio:v,shouldResize:x,onResize:C,onResizeEnd:k})),yb.map(z=>ee.createElement(ch,{key:z,className:i,style:l,nodeId:t,position:z,color:d,minWidth:f,minHeight:p,maxWidth:m,maxHeight:y,onResizeStart:w,keepAspectRatio:v,shouldResize:x,onResize:C,onResizeEnd:k}))):null}var vb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,r)=>{const i=N.forwardRef(({color:l="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:f="",children:p,...m},y)=>N.createElement("svg",{ref:y,...vb,width:a,height:a,stroke:l,strokeWidth:d?Number(c)*24/Number(a):c,className:["lucide",`lucide-${wb(t)}`,f].join(" "),...m},[...r.map(([v,x])=>N.createElement(v,x)),...Array.isArray(p)?p:[p]]));return i.displayName=`${t}`,i};const iu=he("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const eg=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const bb=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);const Sb=he("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const kb=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);const uh=he("BoxSelect",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]);const tg=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Eb=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const ng=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Cb=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Nb=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const zb=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const _b=he("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);const jb=he("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]);const Rb=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const rg=he("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);const $b=he("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);const Tb=he("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);const Pb=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const _u=he("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);const Mb=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const og=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const ju=he("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Lb=he("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);const Ab=he("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const dh=he("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);const Ib=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const Db=he("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const lu=he("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Ru=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const Yn=he("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);const Ob=he("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const $u=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const Tu=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const ig=he("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Hb=he("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);const Fb=he("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);const lg=he("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Vb=he("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const Ub=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Fc=he("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);const Bb=he("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);const Wb=he("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const Xb=he("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);const Yb=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const qb=he("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Xo=he("PinOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12",key:"13x2n8"}],["path",{d:"M15 9.34V6h1a2 2 0 0 0 0-4H7.89",key:"reo3ki"}]]);const Yo=he("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);const Zb=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const fh=he("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);const Kb=he("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);const sg=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Gb=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Qb=he("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);const Jb=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const ag=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const cg=he("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);const eS=he("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);const tS=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const ug=he("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);const nS=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const su=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const dg=he("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);const rS=he("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);const oS=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const fg=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const iS=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Cr=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const lS=he("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const sS=he("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),aS=({connectionColor:t="#dc2626",setConnectionColor:r=()=>{},connectionLineType:i,setConnectionLineType:l,lastSaved:a,onSave:c,onLoad:d,onClear:f,onHelp:p,isDarkMode:m,toggleTheme:y,searchTerm:v,setSearchTerm:x,onExport:w,isOpen:C,onToggle:k,onOpenCaseManager:z,currentBoardName:E,onToggleZen:T,onNextMatch:U,onPrevMatch:R,onToggleBg:O})=>{const H=N.useRef(null),[Z,Y]=N.useState(()=>{try{const I=localStorage.getItem("sidebar-sections");return I?JSON.parse(I):{evidence:!0,connection:!0,extras:!0,zones:!0}}catch{return{evidence:!0,connection:!0,extras:!0,zones:!0}}});N.useEffect(()=>{localStorage.setItem("sidebar-sections",JSON.stringify(Z))},[Z]);const L=I=>{Y(Q=>({...Q,[I]:!Q[I]}))},A=()=>{const I=Object.values(Z).some(Q=>Q);Y(Object.keys(Z).reduce((Q,S)=>({...Q,[S]:!I}),{}))},V=(I,Q,S)=>{I.dataTransfer.setData("application/reactflow",Q),I.dataTransfer.setData("application/category",S),I.dataTransfer.effectAllowed="move"};return g.jsxs("div",{className:`absolute top-0 left-0 h-full z-50 transition-transform duration-300 ease-in-out ${C?"translate-x-0":"-translate-x-full"}`,children:[g.jsxs("aside",{className:`h-full w-80 border-r flex flex-col shadow-2xl backdrop-blur-xl transition-colors duration-500 ease-in-out ${m?"bg-zinc-900/95 border-zinc-800":"bg-white/90 border-gray-200"}`,children:[g.jsxs("div",{className:`p-3 border-b transition-colors duration-500 ${m?"border-zinc-800":"border-gray-200"}`,children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("div",{children:g.jsxs("h1",{className:"text-lg font-bold text-red-500 tracking-widest uppercase leading-tight",children:["Detective",g.jsx("br",{}),"Board"]})}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:A,className:`p-2 rounded-full ${m?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:Object.values(Z).some(I=>I)?"Colapsar todo":"Expandir todo",children:Object.values(Z).some(I=>I)?g.jsx(jb,{size:16}):g.jsx(_b,{size:16})}),g.jsx("button",{onClick:T,className:`p-2 rounded-full ${m?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Modo Zen (Pantalla Completa)",children:g.jsx(Hb,{size:16})}),g.jsx("button",{onClick:O,className:`p-2 rounded-full ${m?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Cambiar Fondo (Corcho/Pizarra/Papel)",children:g.jsx(Wb,{size:16})}),g.jsx("button",{onClick:y,className:`p-2 rounded-full ${m?"bg-zinc-800 text-yellow-400 hover:bg-zinc-700":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Cambiar tema",children:m?g.jsx(nS,{size:16}):g.jsx(Ub,{size:16})})]})]}),E&&g.jsxs("div",{className:"mt-2 px-2 py-1 bg-zinc-100/5 rounded border border-zinc-500/20",children:[g.jsx("p",{className:"text-xs text-zinc-500 font-mono uppercase mb-0",children:"Expediente:"}),g.jsx("p",{className:`text-xs font-bold font-mono truncate w-full ${m?"text-yellow-500":"text-yellow-700"}`,title:E,children:E})]})]}),g.jsx("div",{className:"px-3 pt-2 pb-1",children:g.jsxs("div",{className:`flex items-center px-2 py-1.5 rounded border transition-colors duration-500 ${m?"bg-zinc-950 border-zinc-800":"bg-white border-gray-300"}`,children:[g.jsx(ag,{size:12,className:"text-zinc-500 mr-2"}),g.jsx("input",{type:"text",name:"search",placeholder:"Buscar pistas...",value:v,onChange:I=>x(I.target.value),className:`bg-transparent w-full text-xs outline-none font-mono ${m?"text-zinc-300 placeholder-zinc-600":"text-zinc-700 placeholder-zinc-400"}`}),v&&g.jsxs("div",{className:"flex gap-1 ml-1 border-l border-zinc-700 pl-1",children:[g.jsx("button",{type:"button",onClick:I=>{I.preventDefault(),R()},className:"p-0.5 hover:text-white text-zinc-500 transition-colors",title:"Anterior",children:g.jsx(kb,{size:12})}),g.jsx("button",{type:"button",onClick:I=>{I.preventDefault(),U()},className:"p-0.5 hover:text-white text-zinc-500 transition-colors",title:"Siguiente",children:g.jsx(bb,{size:12})})]})]})}),g.jsxs("div",{className:"p-3 space-y-2 overflow-y-auto",children:[g.jsx(gs,{title:"Evidencia",icon:Lb,isDarkMode:m,isOpen:Z.evidence,onToggle:()=>L("evidence"),children:g.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[g.jsx(dt,{onDragStart:V,type:"evidence",category:"person",icon:fg,label:"Sospechoso",color:"border-blue-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"evidence",category:"place",icon:ig,label:"Lugar",color:"border-green-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"evidence",category:"clue",icon:ju,label:"Pista",color:"border-yellow-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"evidence",category:"event",icon:tg,label:"Evento",color:"border-red-500",isDarkMode:m,compact:!0})]})}),g.jsxs(gs,{title:"Configuracin de Hilo",icon:iu,isDarkMode:m,isOpen:Z.connection,onToggle:()=>L("connection"),children:[g.jsx("div",{className:"flex items-center justify-center gap-3 mb-2 px-1 py-0.5",children:[{color:"#dc2626",label:"Rojo"},{color:"#3b82f6",label:"Azul"},{color:"#22c55e",label:"Verde"},{color:"#eab308",label:"Amarillo"},{color:"#a855f7",label:"Morado"}].map(I=>g.jsx("button",{onClick:()=>r(I.color),className:`w-5 h-5 rounded-full border-2 transition-all ${t===I.color?"border-white scale-100 ring-1 ring-zinc-500":"border-transparent hover:scale-100"}`,style:{backgroundColor:I.color},title:I.label},I.color))}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>l("straight"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${i==="straight"?m?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":m?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Recta",children:g.jsx(lg,{size:14})}),g.jsx("button",{onClick:()=>l("default"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${i==="default"?m?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":m?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Curva",children:g.jsx(iu,{size:14})}),g.jsx("button",{onClick:()=>l("step"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${i==="step"?m?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":m?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Escalonada",children:g.jsx(rg,{size:14})})]})]}),g.jsx(gs,{title:"Extras",icon:Ob,isDarkMode:m,isOpen:Z.extras,onToggle:()=>L("extras"),children:g.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[g.jsx(dt,{onDragStart:V,type:"note",category:"note",icon:ug,label:"Nota",color:"border-yellow-400",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"text",category:"text",icon:dg,label:"Texto",color:"border-zinc-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"image",category:"image",icon:Ru,label:"Imagen",color:"border-purple-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"url",category:"url",icon:$u,label:"URL",color:"border-blue-500",isDarkMode:m,compact:!0})]})}),g.jsx(gs,{title:"Zonas y Sellos",icon:uh,isDarkMode:m,isOpen:Z.zones,onToggle:()=>L("zones"),children:g.jsxs("div",{className:"space-y-2",children:[g.jsx(dt,{onDragStart:V,type:"zone",category:"zone",icon:uh,label:"Zona de Grupo",color:"border-zinc-600",isDarkMode:m}),g.jsxs("div",{className:"grid grid-cols-3 gap-1.5 pt-1",children:[g.jsx(dt,{onDragStart:V,type:"stamp",category:"solved",icon:Eb,label:"Resuelto",color:"border-green-600",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"stamp",category:"discarded",icon:iS,label:"Descartado",color:"border-red-600",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"stamp",category:"key",icon:tS,label:"Clave",color:"border-yellow-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"stamp",category:"question",icon:lu,label:"?",color:"border-blue-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"stamp",category:"important",icon:eg,label:"!",color:"border-orange-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"stamp",category:"verify",icon:og,label:"Ojo",color:"border-purple-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"stamp",category:"danger",icon:cg,label:"Peligro",color:"border-red-600",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"stamp",category:"confidential",icon:Tu,label:"Top",color:"border-zinc-500",isDarkMode:m,compact:!0}),g.jsx(dt,{onDragStart:V,type:"stamp",category:"custom",icon:Xb,label:"Personalizado",color:"border-zinc-400",isDarkMode:m,compact:!0})]})]})})]}),g.jsxs("div",{className:`mt-auto p-3 border-t space-y-2 transition-colors duration-500 ${m?"border-zinc-800":"border-gray-200"}`,children:[g.jsxs("button",{onClick:z,title:"Abrir gestor de expedientes",className:`w-full py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 ${m?"bg-yellow-900/20 text-yellow-500 border-yellow-900/50 hover:bg-yellow-900/40":"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100"}`,children:[g.jsx(Ab,{size:14})," Gestionar Casos"]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[g.jsxs("button",{onClick:c,className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${m?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Guardar (JSON)",children:[g.jsx(Jb,{size:16,className:"mb-1"}),g.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Guardar"})]}),g.jsxs("button",{onClick:()=>H.current.click(),className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${m?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Cargar (JSON)",children:[g.jsx(oS,{size:16,className:"mb-1"}),g.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Cargar"})]}),g.jsxs("button",{onClick:w,className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${m?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Exportar (PNG)",children:[g.jsx(Pb,{size:16,className:"mb-1"}),g.jsx("span",{className:"text-[9px] font-bold uppercase",children:"PNG"})]})]}),g.jsx("input",{type:"file",name:"file-upload",ref:H,onChange:d,className:"hidden",accept:".json"}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsxs("button",{onClick:f,title:"Borrar todo el contenido",className:`py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 ${m?"bg-red-900/20 text-red-500 border-red-900/50 hover:bg-red-900/40":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"}`,children:[g.jsx(su,{size:14})," Limpiar"]}),g.jsxs("button",{onClick:p,title:"Ver atajos de teclado",className:`py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 ${m?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,children:[g.jsx(lu,{size:14})," Ayuda"]})]}),a&&g.jsxs("div",{className:`text-[10px] text-center mt-2 font-mono ${m?"text-zinc-600":"text-gray-400"}`,children:["Guardado: ",a.toLocaleTimeString()]})]})]}),g.jsx("button",{onClick:k,className:`absolute top-6 -right-8 p-1.5 rounded-r-md shadow-md border-y border-r cursor-pointer flex items-center justify-center transition-colors duration-500 ${m?"bg-zinc-900 border-zinc-800 text-zinc-400 hover:text-white":"bg-white border-gray-200 text-zinc-600 hover:text-black"}`,title:C?"Ocultar barra lateral":"Mostrar barra lateral",children:C?g.jsx(Nb,{size:16}):g.jsx(zb,{size:16})})]})},gs=({title:t,icon:r,isDarkMode:i,children:l,isOpen:a,onToggle:c})=>g.jsxs("div",{className:`p-2 rounded-lg border transition-all duration-200 ${i?"bg-zinc-950/50 border-zinc-800":"bg-white border-gray-200 shadow-sm"}`,children:[g.jsxs("button",{onClick:c,className:`w-full text-xs font-bold uppercase flex items-center justify-between gap-2 ${i?"text-zinc-500 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(r,{size:10})," ",t]}),g.jsx("div",{className:`transition-transform duration-300 ${a?"rotate-0":"-rotate-90"}`,children:g.jsx(Cb,{size:12})})]}),g.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${a?"grid-rows-[1fr] opacity-100 mt-2":"grid-rows-[0fr] opacity-0 mt-0"}`,children:g.jsx("div",{className:"overflow-hidden",children:l})})]}),dt=({onDragStart:t,type:r,category:i,icon:l,label:a,color:c,isDarkMode:d,compact:f})=>g.jsxs("div",{className:`${f?"flex flex-col items-center justify-center p-2 gap-1 text-center":"flex items-center gap-3 p-3"} rounded cursor-grab border-l-4 ${c.replace("border-","border-l-")} transition-all ${f?"hover:scale-105":"hover:translate-x-2"} ${d?"bg-zinc-800/40 border-y border-r border-zinc-800 hover:bg-zinc-800":"bg-white border-y border-r border-gray-200 hover:bg-gray-50 shadow-sm"}`,onDragStart:p=>t(p,r,i),draggable:!0,title:a,children:[g.jsx(l,{size:f?16:18,className:c.replace("border-","text-")}),g.jsx("span",{className:`${f?"text-[10px]":"text-sm"} font-bold font-mono ${d?"text-zinc-300":"text-zinc-700"}`,children:a})]}),cS=({isOpen:t,onClose:r,node:i,onSave:l,onDelete:a,isDarkMode:c})=>{const[d,f]=N.useState(""),[p,m]=N.useState(""),[y,v]=N.useState(""),[x,w]=N.useState("clue"),[C,k]=N.useState(!1);if(N.useEffect(()=>{i&&(f(i.data.label||""),m(i.data.description||""),v(i.data.image||""),w(i.data.category||"clue"),k(!1))},[i]),!t)return null;if(C)return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm",children:g.jsxs("div",{className:`${c?"bg-zinc-900":"bg-white"} border border-red-900/50 p-6 rounded-lg w-96 shadow-2xl animate-in fade-in zoom-in duration-200 text-center`,children:[g.jsx("h2",{className:"text-xl font-bold text-red-500 font-mono tracking-wider mb-4",children:"ELIMINAR EVIDENCIA?"}),g.jsx("p",{className:`${c?"text-zinc-400":"text-gray-600"} text-sm font-mono mb-6`,children:"Esta accin es irreversible. Ests seguro?"}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsx("button",{onClick:()=>k(!1),className:`px-4 py-2 ${c?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:"Cancelar"}),g.jsx("button",{onClick:()=>a(i.id),className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Confirmar"})]})]})});const z=E=>{E.preventDefault(),l(i.id,{...i.data,label:d,description:p,image:y,category:x}),r()};return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm",children:g.jsxs("div",{className:`${c?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-96 shadow-2xl animate-in fade-in zoom-in duration-200`,children:[g.jsxs("div",{className:`flex justify-between items-center mb-4 border-b ${c?"border-zinc-800":"border-gray-200"} pb-2`,children:[g.jsx("h2",{className:"text-xl font-bold text-red-500 font-mono tracking-wider",children:"EDITAR EVIDENCIA"}),g.jsx("button",{onClick:r,className:`${c?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:g.jsx(Cr,{size:20})})]}),g.jsxs("form",{onSubmit:z,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"evidence-category",className:`block text-xs font-bold ${c?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Categora"}),g.jsxs("select",{id:"evidence-category",name:"evidence-category",value:x,onChange:E=>w(E.target.value),className:`w-full ${c?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all text-sm`,children:[g.jsx("option",{value:"person",children:"Sospechoso"}),g.jsx("option",{value:"place",children:"Lugar"}),g.jsx("option",{value:"clue",children:"Pista"}),g.jsx("option",{value:"event",children:"Evento"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"evidence-title",className:`block text-xs font-bold ${c?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Ttulo"}),g.jsx("input",{id:"evidence-title",type:"text",name:"evidence-title",value:d,onChange:E=>f(E.target.value),className:`w-full ${c?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all`,autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"evidence-description",className:`block text-xs font-bold ${c?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Descripcin"}),g.jsx("textarea",{id:"evidence-description",name:"evidence-description",value:p,onChange:E=>m(E.target.value),rows:4,className:`w-full ${c?"bg-zinc-950 border-zinc-800 text-gray-300":"bg-gray-50 border-gray-300 text-gray-700"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono text-sm resize-none transition-all`})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"evidence-image-url",className:`block text-xs font-bold ${c?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Imagen (URL o Local)"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{id:"evidence-image-url",type:"text",name:"evidence-image-url",value:y,onChange:E=>v(E.target.value),placeholder:"https://...",className:`w-full ${c?"bg-zinc-950 border-zinc-800 text-gray-400":"bg-gray-50 border-gray-300 text-gray-600"} border p-2 rounded focus:border-red-900 outline-none font-mono text-xs`}),g.jsx("div",{className:`text-[10px] ${c?"text-zinc-600":"text-gray-400"} text-center font-mono uppercase tracking-widest`,children:"- O -"}),g.jsxs("label",{className:`flex items-center justify-center w-full p-2 ${c?"bg-zinc-950 border-zinc-800 hover:border-zinc-600 hover:text-zinc-200":"bg-gray-50 border-gray-300 hover:border-gray-400 hover:text-gray-800"} border border-dashed rounded cursor-pointer transition-colors group`,children:[g.jsx("span",{className:`text-xs ${c?"text-zinc-500 group-hover:text-zinc-300":"text-gray-500 group-hover:text-gray-700"} font-mono uppercase`,children:"Subir archivo local"}),g.jsx("input",{type:"file",name:"evidence-image-file",className:"hidden",accept:"image/*",onChange:E=>{const T=E.target.files[0];if(T){const U=new FileReader;U.onload=R=>v(R.target.result),U.readAsDataURL(T)}}})]})]})]}),i.data.status&&g.jsx("div",{className:`flex justify-end pt-2 border-t ${c?"border-zinc-800":"border-gray-200"}`,children:g.jsxs("button",{type:"button",onClick:()=>{l(i.id,{...i.data,status:null}),r()},className:"text-[10px] flex items-center gap-1 text-orange-500 hover:text-orange-400 uppercase font-bold tracking-wider",children:[g.jsx(_u,{size:12})," Quitar Sello"]})}),g.jsxs("div",{className:`flex justify-between items-center mt-6 pt-4 border-t ${c?"border-zinc-800":"border-gray-200"}`,children:[g.jsx("button",{type:"button",onClick:()=>k(!0),className:"text-red-600 hover:text-red-500 text-xs font-bold uppercase tracking-wider transition-colors",children:"Eliminar"}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"button",onClick:r,className:`px-4 py-2 ${c?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-800"} text-xs font-bold uppercase tracking-wider transition-colors`,children:"Cancelar"}),g.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Guardar"})]})]})]})]})})};let ms;const uS=new Uint8Array(16);function dS(){if(!ms&&(ms=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ms))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ms(uS)}const yt=[];for(let t=0;t<256;++t)yt.push((t+256).toString(16).slice(1));function fS(t,r=0){return yt[t[r+0]]+yt[t[r+1]]+yt[t[r+2]]+yt[t[r+3]]+"-"+yt[t[r+4]]+yt[t[r+5]]+"-"+yt[t[r+6]]+yt[t[r+7]]+"-"+yt[t[r+8]]+yt[t[r+9]]+"-"+yt[t[r+10]]+yt[t[r+11]]+yt[t[r+12]]+yt[t[r+13]]+yt[t[r+14]]+yt[t[r+15]]}const hS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hh={randomUUID:hS};function qt(t,r,i){if(hh.randomUUID&&!t)return hh.randomUUID();t=t||{};const l=t.random||(t.rng||dS)();return l[6]=l[6]&15|64,l[8]=l[8]&63|128,fS(l)}function pS({top:t,left:r,right:i,bottom:l,clientX:a,clientY:c,onHide:d,takeSnapshot:f,setNodes:p}){const{screenToFlowPosition:m,setCenter:y,getZoom:v}=Tn(),x=C=>{C.stopPropagation();const{x:k,y:z}=m({x:a,y:c});y(k,z,{zoom:v(),duration:800}),d()},w=N.useCallback((C,k,z)=>{const E=m({x:a,y:c}),T={id:qt(),type:C,position:E,data:{label:z,category:k}};f(),p(U=>U.concat(T)),d()},[a,c,m,f,p,d]);return g.jsxs("div",{style:{top:t,left:r,right:i,bottom:l},className:"absolute z-50 bg-zinc-800 border border-zinc-700 shadow-xl rounded-md overflow-hidden min-w-[150px] flex flex-col animate-in fade-in zoom-in duration-100",children:[g.jsxs("button",{onClick:x,className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors border-b border-zinc-700",children:[g.jsx(Tb,{size:14,className:"text-blue-400"})," Centrar Vista"]}),g.jsxs("button",{onClick:()=>w("note","note","Nota"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx(ug,{size:14,className:"text-yellow-500"})," Aadir Nota"]}),g.jsxs("button",{onClick:()=>w("text","text","Texto"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx(dg,{size:14,className:"text-zinc-400"})," Aadir Texto"]}),g.jsxs("button",{onClick:()=>w("image","image","Imagen"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx(Ru,{size:14,className:"text-purple-500"})," Aadir Imagen"]}),g.jsxs("button",{onClick:()=>w("url","url","Enlace"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx($u,{size:14,className:"text-blue-400"})," Aadir URL"]})]})}const gS=({isOpen:t,onClose:r,onConfirm:i,title:l,message:a,confirmText:c="Confirmar",cancelText:d="Cancelar",isDanger:f=!1,isDarkMode:p})=>t?g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[300] backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:`${p?"bg-zinc-900":"bg-white"} border ${f?"border-red-900/50":p?"border-zinc-700":"border-gray-200"} p-6 rounded-lg w-96 shadow-2xl animate-in zoom-in duration-200 text-center`,children:[g.jsx("h2",{className:`text-xl font-bold ${f?"text-red-500":p?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-4`,children:l}),g.jsx("p",{className:`${p?"text-zinc-400":"text-gray-600"} text-sm font-mono mb-6`,children:a}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsx("button",{onClick:r,className:`px-4 py-2 ${p?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:d}),g.jsx("button",{onClick:()=>{i&&i(),r()},className:`px-6 py-2 ${f?"bg-red-900/80 hover:bg-red-800 text-red-100 border-red-900":"bg-blue-900/80 hover:bg-blue-800 text-blue-100 border-blue-900"} text-xs font-bold uppercase tracking-wider rounded shadow-lg border transition-all`,children:c})]})]})}):null,mS=({isOpen:t,onClose:r,isDarkMode:i})=>{if(!t)return null;const l=[{key:"Doble Clic (Nodo)",desc:"Editar contenido de la evidencia",icon:Fc},{key:"Doble Clic (Hilo)",desc:"Aadir/Editar etiqueta de relacin",icon:Fc},{key:"Clic (Hilo)",desc:"Cambiar estilo (Slido / Punteado)",icon:Fc},{key:"Backspace",desc:"Eliminar elementos seleccionados",icon:Yn},{key:"Ctrl + D",desc:"Duplicar nodos seleccionados",icon:Yn},{key:"Ctrl + Z",desc:"Deshacer accin",icon:Yn},{key:"Ctrl + Y",desc:"Rehacer accin",icon:Yn},{key:"Ctrl + S",desc:"Guardar tablero manualmente",icon:Yn},{key:"Ctrl + V",desc:"Pegar imagen del portapapeles",icon:Yn},{key:"F3 / Shift + F3",desc:"Navegar resultados de bsqueda",icon:Yn},{key:"Shift + C",desc:"Conectar nodos seleccionados",icon:Yn},{key:"Ctrl + Shift + L",desc:"Bloquear/Desbloquear seleccin",icon:Tu}];return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:`${i?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-[500px] shadow-2xl animate-in zoom-in duration-200 relative`,children:[g.jsx("button",{onClick:r,className:`absolute top-4 right-4 ${i?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:g.jsx(Cr,{size:20})}),g.jsxs("h2",{className:`text-xl font-bold ${i?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-6 flex items-center gap-2`,children:[g.jsx(Yn,{className:"text-red-500"})," ATAJOS DE TECLADO"]}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:l.map((a,c)=>g.jsxs("div",{className:`flex items-center justify-between p-2 rounded border transition-colors ${i?"bg-zinc-950/50 border-zinc-800/50 hover:border-zinc-700":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(a.icon,{size:14,className:i?"text-zinc-500":"text-gray-400"}),g.jsx("span",{className:`${i?"text-zinc-300":"text-gray-700"} text-sm font-mono`,children:a.desc})]}),g.jsx("span",{className:"text-xs font-bold text-red-400 bg-red-900/10 px-2 py-1 rounded border border-red-900/20 font-mono",children:a.key})]},c))})]})})},yS=({isOpen:t,onClose:r,onConfirm:i,onDelete:l,title:a,initialValue:c="",initialColor:d="#dc2626",initialType:f,showTypeSelector:p=!1,colorLabel:m="Color",placeholder:y="Escribe una relacin...",isDarkMode:v})=>{const[x,w]=N.useState(c),[C,k]=N.useState(d),[z,E]=N.useState(f||"default");if(N.useEffect(()=>{t&&(w(c),k(d),f&&E(f))},[t,c,d,f]),!t)return null;const T=[{color:"#dc2626",label:"Rojo"},{color:"#3b82f6",label:"Azul"},{color:"#22c55e",label:"Verde"},{color:"#eab308",label:"Amarillo"},{color:"#a855f7",label:"Morado"}],U=R=>{R.preventDefault(),i(x,C,z),r()};return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:`${v?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-96 shadow-2xl animate-in zoom-in duration-200`,children:[g.jsx("h2",{className:`text-xl font-bold ${v?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-4`,children:a}),g.jsxs("form",{onSubmit:U,children:[g.jsx("input",{type:"text",name:"input-value",value:x,onChange:R=>w(R.target.value),className:`w-full ${v?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all mb-4`,autoFocus:!0,placeholder:y}),p&&g.jsxs("div",{className:"mb-4",children:[g.jsx("span",{className:`block text-xs font-bold ${v?"text-zinc-500":"text-gray-500"} uppercase mb-2 font-mono`,children:"Tipo de Conexin"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>E("straight"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${z==="straight"?v?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Recta",children:g.jsx(lg,{size:16})}),g.jsx("button",{type:"button",onClick:()=>E("default"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${z==="default"?v?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Curva",children:g.jsx(iu,{size:16})}),g.jsx("button",{type:"button",onClick:()=>E("step"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${z==="step"?v?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Escalonada",children:g.jsx(rg,{size:16})})]})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("span",{className:`block text-xs font-bold ${v?"text-zinc-500":"text-gray-500"} uppercase mb-2 font-mono`,children:m}),g.jsx("div",{className:"flex gap-3",children:T.map(R=>g.jsx("button",{type:"button",onClick:()=>k(R.color),className:`w-6 h-6 rounded-full border-2 transition-all ${C===R.color?(v?"border-white ring-zinc-400":"border-gray-800 ring-gray-400")+" scale-110 ring-1":"border-transparent hover:scale-110"}`,style:{backgroundColor:R.color},title:R.label},R.color))})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[l?g.jsx("button",{type:"button",onClick:l,className:"text-red-600 hover:text-red-500 text-xs font-bold uppercase tracking-wider transition-colors",children:"Eliminar"}):g.jsx("div",{}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"button",onClick:r,className:`px-4 py-2 ${v?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:"Cancelar"}),g.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Guardar"})]})]})]})]})})},xS=({isOpen:t,onClose:r,boards:i,currentBoardId:l,onSwitch:a,onCreate:c,onDelete:d,onRename:f,onClone:p,onReorder:m,trash:y,onRestore:v,onPermanentDelete:x,isDarkMode:w})=>{const[C,k]=N.useState(null),[z,E]=N.useState(""),[T,U]=N.useState(!1),[R,O]=N.useState(""),[H,Z]=N.useState(null),[Y,L]=N.useState(""),[A,V]=N.useState("manual"),[I,Q]=N.useState(!1),S=N.useMemo(()=>{let ne=(I?y:i).filter(te=>te.name.toLowerCase().includes(Y.toLowerCase()));return A==="name"?ne.sort((te,oe)=>te.name.localeCompare(oe.name)):A==="created"?ne.sort((te,oe)=>oe.createdAt-te.createdAt):A==="modified"?ne.sort((te,oe)=>(oe.lastModified||0)-(te.lastModified||0)):ne},[i,y,Y,A,I]),X=A==="manual"&&!Y&&!I,j=(P,ne)=>{P.dataTransfer.setData("boardIndex",ne),P.dataTransfer.effectAllowed="move"},q=P=>{P.preventDefault(),P.dataTransfer.dropEffect="move"},F=(P,ne)=>{P.preventDefault();const te=parseInt(P.dataTransfer.getData("boardIndex"));if(isNaN(te)||te===ne)return;const oe=[...i],[ae]=oe.splice(te,1);oe.splice(ne,0,ae),m(oe)};if(!t)return null;const M=P=>{k(P.id),E(P.name)},B=()=>{z.trim()&&f(C,z),k(null)},_=()=>{R.trim()&&(c(R),O(""),U(!1))};return g.jsx("div",{className:"fixed inset-0 bg-black/90 z-[200] flex items-center justify-center backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:`${w?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border w-[900px] h-[600px] rounded-lg shadow-2xl flex flex-col overflow-hidden`,children:[g.jsxs("div",{className:`p-6 border-b ${w?"border-zinc-800 bg-zinc-950":"border-gray-200 bg-gray-50"} flex justify-between items-center z-50 relative`,children:[g.jsxs("div",{children:[g.jsxs("h2",{className:`text-2xl font-bold ${w?"text-zinc-100":"text-gray-800"} font-mono tracking-widest flex items-center gap-3 uppercase`,children:[I?g.jsx(fh,{className:"text-red-500",size:28}):g.jsx(dh,{className:"text-yellow-600",size:28}),I?"PAPELERA DE RECICLAJE":"ARCHIVOS DE CASO"]}),g.jsx("p",{className:`${w?"text-zinc-500":"text-gray-500"} text-xs font-mono mt-1`,children:I?"Restaura casos eliminados o brralos definitivamente":"Selecciona un expediente para investigar"})]}),g.jsx("button",{onClick:r,className:`${w?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:g.jsx(Cr,{size:24})})]}),g.jsxs("div",{className:`px-6 py-3 border-b flex gap-4 items-center justify-between ${w?"border-zinc-800 bg-zinc-900/50":"border-gray-200 bg-gray-50/50"}`,children:[g.jsxs("div",{className:`flex-1 flex items-center px-3 py-1.5 rounded border ${w?"bg-zinc-950 border-zinc-700":"bg-white border-gray-300"}`,children:[g.jsx(ag,{size:14,className:w?"text-zinc-500":"text-gray-400"}),g.jsx("input",{type:"text",name:"case-search",placeholder:"Buscar expediente...",value:Y,onChange:P=>L(P.target.value),className:`ml-2 bg-transparent w-full text-xs outline-none font-mono ${w?"text-zinc-300 placeholder-zinc-600":"text-zinc-700 placeholder-zinc-400"}`})]}),g.jsxs("button",{onClick:()=>Q(!I),className:`flex items-center gap-2 px-3 py-1.5 rounded border text-xs font-bold uppercase transition-colors ${I?w?"bg-red-900/30 border-red-800 text-red-400":"bg-red-50 border-red-200 text-red-600":w?"bg-zinc-900 border-zinc-700 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-600 hover:text-black"}`,children:[I?g.jsx(dh,{size:14}):g.jsx(fh,{size:14}),I?"Ver Archivos":"Papelera"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Sb,{size:14,className:w?"text-zinc-500":"text-gray-400"}),g.jsxs("select",{name:"sort-cases",value:A,onChange:P=>V(P.target.value),className:`text-xs font-mono p-1.5 rounded border outline-none cursor-pointer ${w?"bg-zinc-950 border-zinc-700 text-zinc-300":"bg-white border-gray-300 text-zinc-700"}`,children:[g.jsx("option",{value:"manual",children:"Manual (Arrastrar)"}),g.jsx("option",{value:"name",children:"Nombre (A-Z)"}),g.jsx("option",{value:"created",children:"Creado (Reciente)"}),g.jsx("option",{value:"modified",children:"Modificado (Reciente)"})]})]})]}),g.jsx("div",{className:`flex-1 p-8 overflow-y-auto overflow-x-hidden ${w?"bg-zinc-900/50":"bg-gray-100"}`,children:g.jsxs("div",{className:"flex flex-wrap justify-center items-start gap-y-12 pl-8 pb-12 pt-[2px]",children:[!Y&&!I&&(T?g.jsx("div",{className:"relative w-56 h-40 -ml-12 first:ml-0 z-50 transition-all duration-300 shadow-2xl transform scale-105",children:g.jsxs("div",{className:`flex flex-col items-center justify-center h-full border-2 border-dashed border-yellow-600/50 bg-yellow-900/10 rounded-lg p-4 animate-in zoom-in duration-200 ${w?"bg-zinc-900":"bg-white"}`,children:[g.jsx("span",{className:"text-yellow-500 font-mono text-xs font-bold mb-2",children:"NOMBRE DEL CASO"}),g.jsx("input",{type:"text",name:"new-case-name",autoFocus:!0,value:R,onChange:P=>O(P.target.value),onKeyDown:P=>{P.key==="Enter"&&_(),P.key==="Escape"&&U(!1)},placeholder:"Ej: El Robo del Siglo",className:`${w?"bg-zinc-950 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"} border text-xs p-2 w-full rounded outline-none focus:border-yellow-600 font-mono text-center mb-2`}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>U(!1),className:`${w?"text-zinc-500 hover:text-white hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 hover:bg-gray-200"} text-[10px] uppercase font-bold px-2 py-1 rounded`,children:"Cancelar"}),g.jsx("button",{onClick:_,className:"text-zinc-900 bg-yellow-600 hover:bg-yellow-500 text-[10px] uppercase font-bold px-3 py-1 rounded",children:"Crear"})]})]})}):g.jsx("button",{onClick:()=>{U(!0),O(`Caso #${i.length+1}`)},className:"relative w-56 h-40 -ml-12 first:ml-0 transition-all duration-300 group",style:{zIndex:H==="new"?50:0,transform:H==="new"?"translateY(-1rem) scale(1.05) rotate(0deg)":"rotate(-3deg)"},onMouseEnter:()=>Z("new"),onMouseLeave:()=>Z(null),children:g.jsxs("div",{className:`flex flex-col items-center justify-center h-full border-2 border-dashed rounded-lg shadow-lg ${w?"border-zinc-700 hover:border-zinc-500 bg-zinc-800/50":"border-gray-300 hover:border-gray-400 bg-white"}`,children:[g.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 transition-all group-hover:scale-110 ${w?"bg-zinc-800 group-hover:bg-zinc-700":"bg-gray-200 group-hover:bg-gray-300"}`,children:g.jsx(Zb,{className:w?"text-zinc-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-800"})}),g.jsx("span",{className:`${w?"text-zinc-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-800"} font-mono text-sm font-bold`,children:"NUEVO CASO"})]})})),S.map((P,ne)=>{const te=H===P.id,oe=l===P.id,ae=P.isDeleting,de=ne%3===0?"2deg":ne%3===1?"-1deg":"3deg";return g.jsx("div",{draggable:X,onDragStart:se=>j(se,ne),onDragOver:q,onDrop:se=>F(se,ne),className:"relative w-56 h-40 -ml-12 transition-all duration-300 ease-out cursor-pointer group",style:{zIndex:te?50:ne+1,transform:te?"translateY(-1.5rem) scale(1.1) rotate(0deg)":`rotate(${de})`,animation:ae?"delete-burn 0.5s ease-in-out forwards":"none",pointerEvents:ae?"none":"auto"},onMouseEnter:()=>Z(P.id),onMouseLeave:()=>Z(null),onClick:()=>{C!==P.id&&!I&&a(P.id)},children:g.jsxs("div",{className:`relative flex flex-col h-full border-2 rounded-lg overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.5)] transition-colors duration-300
                    ${oe?w?"border-yellow-500 bg-yellow-900/40":"border-yellow-500 bg-yellow-100":w?I?"border-zinc-700 bg-zinc-900/50":"border-yellow-900/40 bg-yellow-950/30 hover:border-yellow-700 hover:bg-yellow-900/20":I?"border-gray-300 bg-gray-100":"border-yellow-200 bg-yellow-50 hover:border-yellow-300 hover:bg-yellow-100"}
                `,children:[X&&te&&g.jsx("div",{className:"absolute top-2 right-2 text-yellow-600/50",children:g.jsx(Db,{size:16})}),g.jsx("div",{className:`absolute top-0 left-0 w-24 h-6 rounded-br-lg border-b-2 border-r-2 shadow-sm transition-colors duration-300
                        ${oe?"bg-yellow-500 border-yellow-500":w?I?"bg-zinc-800 border-zinc-700":"bg-yellow-900/40 border-yellow-900/40 group-hover:bg-yellow-800 group-hover:border-yellow-700":I?"bg-gray-300 border-gray-300":"bg-yellow-200 border-yellow-200 group-hover:bg-yellow-300 group-hover:border-yellow-300"}
                    `}),g.jsxs("div",{className:"flex-1 p-4 pt-8 flex flex-col items-center justify-between text-center",children:[g.jsxs("div",{children:[g.jsx(ju,{size:32,className:`mb-2 drop-shadow-md transition-colors duration-300 ${oe?w?"text-yellow-400":"text-yellow-600":w?"text-yellow-800/60 group-hover:text-yellow-600":"text-yellow-300 group-hover:text-yellow-500"}`}),C===P.id?g.jsxs("div",{className:"flex items-center gap-1 w-full",onClick:se=>se.stopPropagation(),children:[g.jsx("input",{type:"text",name:"edit-case-name",value:z,onChange:se=>E(se.target.value),className:`${w?"bg-zinc-950 border-zinc-600 text-white":"bg-white border-gray-300 text-gray-900"} border text-xs p-1 w-full rounded outline-none focus:border-yellow-600 font-mono`,autoFocus:!0,onKeyDown:se=>se.key==="Enter"&&B()}),g.jsx("button",{onClick:B,className:"text-green-500 hover:text-green-400",children:g.jsx(ng,{size:14})})]}):g.jsx("h3",{className:`font-mono font-bold text-sm line-clamp-2 ${l===P.id?w?"text-yellow-100":"text-yellow-800":w?I?"text-zinc-500 line-through":"text-zinc-300":I?"text-gray-400 line-through":"text-gray-700"}`,onDoubleClick:se=>{I||(se.stopPropagation(),M(P))},children:P.name})]}),g.jsxs("div",{className:`text-[10px] ${w?"text-zinc-500":"text-gray-500"} font-mono w-full`,children:[P.lastModified&&g.jsxs("p",{children:["Modif: ",new Date(P.lastModified).toLocaleString([],{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),g.jsxs("p",{className:`${w?"text-zinc-600":"text-gray-400"}`,children:["Creado: ",new Date(P.createdAt).toLocaleDateString()]})]})]}),g.jsx("div",{className:`absolute bottom-2 right-2 flex gap-1 ${I?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity z-50`,onClick:se=>se.stopPropagation(),children:I?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:se=>{se.stopPropagation(),v(P.id)},className:`p-1.5 rounded border ${w?"bg-zinc-900 text-green-500 hover:text-green-400 hover:bg-zinc-950 border-zinc-700":"bg-white text-green-600 hover:text-green-700 hover:bg-gray-50 border-gray-200"}`,title:"Restaurar Caso",children:g.jsx(sg,{size:12})}),g.jsx("button",{onClick:se=>{se.stopPropagation(),x(P.id)},className:`p-1.5 rounded border ${w?"bg-zinc-900 text-zinc-500 hover:text-red-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-red-600 hover:bg-gray-50 border-gray-200"}`,title:"Eliminar Definitivamente",children:g.jsx(su,{size:12})})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:se=>{se.preventDefault(),se.stopPropagation(),p(P.id)},className:`p-1.5 rounded border ${w?"bg-zinc-900 text-zinc-500 hover:text-green-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-green-600 hover:bg-gray-50 border-gray-200"}`,title:"Clonar Caso",children:g.jsx(Rb,{size:12})}),g.jsx("button",{onClick:se=>{se.stopPropagation(),M(P)},className:`p-1.5 rounded border ${w?"bg-zinc-900 text-zinc-500 hover:text-blue-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-blue-600 hover:bg-gray-50 border-gray-200"}`,title:"Renombrar Caso",children:g.jsx(qb,{size:12})}),i.length>1&&g.jsx("button",{onClick:se=>{se.stopPropagation(),d(P.id)},className:`p-1.5 rounded border ${w?"bg-zinc-900 text-zinc-500 hover:text-red-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-red-600 hover:bg-gray-50 border-gray-200"}`,title:"Mover a Papelera",children:g.jsx(su,{size:12})})]})})]})},P.id)})]})}),g.jsx("div",{className:`p-4 border-t text-center z-50 relative ${w?"bg-zinc-950 border-zinc-800":"bg-gray-50 border-gray-200"}`,children:g.jsx("p",{className:`${w?"text-zinc-600":"text-gray-400"} text-[10px] font-mono`,children:"CONFIDENCIAL - SOLO PARA USO OFICIAL"})})]})})},vS=({isZenMode:t,setIsZenMode:r,undo:i,redo:l,isDarkMode:a})=>g.jsxs("div",{className:"absolute top-4 right-4 z-50 flex gap-2",children:[!t&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:i,className:`px-4 py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 shadow-lg ${a?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-zinc-700":"bg-white text-zinc-600 border-gray-300 hover:bg-gray-100"}`,title:"Deshacer (Ctrl+Z)",children:[g.jsx(rS,{size:14})," Deshacer"]}),g.jsxs("button",{onClick:l,className:`px-4 py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 shadow-lg ${a?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-zinc-700":"bg-white text-zinc-600 border-gray-300 hover:bg-gray-100"}`,title:"Rehacer (Ctrl+Y)",children:[g.jsx(Kb,{size:14})," Rehacer"]})]}),t&&g.jsxs("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-black/50 hover:bg-black/80 text-white border border-white/20 rounded backdrop-blur-sm flex items-center gap-2 transition-all animate-in fade-in",title:"Salir de Modo Zen (Esc)",children:[g.jsx(Fb,{size:14})," Salir"]})]}),wS=({nodes:t,edges:r,bgType:i,currentBoardId:l,setLastSaved:a})=>{N.useEffect(()=>{const c=setTimeout(()=>{try{localStorage.setItem(`board-${l}-nodes`,JSON.stringify(t)),localStorage.setItem(`board-${l}-edges`,JSON.stringify(r)),localStorage.setItem(`board-${l}-bg`,i),a(new Date)}catch(d){console.error("Error guardando en localStorage:",d)}},1e3);return()=>clearTimeout(c)},[t,r,i,l,a])},Pu=(t,r)=>{if(!t||!t.type.startsWith("image/"))return;const i=new FileReader;i.onload=l=>{const a=new Image;a.onload=()=>{let d=a.width,f=a.height;if(d>400||f>400){const v=d/f;d>f?(d=400,f=400/v):(f=400,d=400*v)}const p=document.createElement("canvas");p.width=d,p.height=f,p.getContext("2d").drawImage(a,0,0,d,f);const y=p.toDataURL("image/jpeg",.7);r(y,d,f)},a.src=l.target.result},i.readAsDataURL(t)},bS=({isInteractive:t,reactFlowInstance:r,takeSnapshot:i,setNodes:l})=>{N.useEffect(()=>{const a=c=>{if(!t||!r)return;const d=c.clipboardData.items;for(const f of d)if(f.type.indexOf("image")!==-1){const p=f.getAsFile();Pu(p,(m,y,v)=>{const x=r.screenToFlowPosition({x:window.innerWidth/2,y:window.innerHeight/2}),w={id:qt(),type:"image",position:x,data:{label:"Imagen Pegada",image:m},style:{width:y,height:v}};i(),l(C=>C.concat(w))})}};return window.addEventListener("paste",a),()=>window.removeEventListener("paste",a)},[r,t,i,l])};function SS(t,r){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const i=document.implementation.createHTMLDocument(),l=i.createElement("base"),a=i.createElement("a");return i.head.appendChild(l),i.body.appendChild(a),r&&(l.href=r),a.href=t,a.href}const kS=(()=>{let t=0;const r=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${r()}${t}`)})();function kr(t){const r=[];for(let i=0,l=t.length;i<l;i++)r.push(t[i]);return r}let Po=null;function hg(t={}){return Po||(t.includeStyleProperties?(Po=t.includeStyleProperties,Po):(Po=kr(window.getComputedStyle(document.documentElement)),Po))}function Ts(t,r){const l=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(r);return l?parseFloat(l.replace("px","")):0}function ES(t){const r=Ts(t,"border-left-width"),i=Ts(t,"border-right-width");return t.clientWidth+r+i}function CS(t){const r=Ts(t,"border-top-width"),i=Ts(t,"border-bottom-width");return t.clientHeight+r+i}function pg(t,r={}){const i=r.width||ES(t),l=r.height||CS(t);return{width:i,height:l}}function NS(){let t,r;try{r=process}catch{}const i=r&&r.env?r.env.devicePixelRatio:null;return i&&(t=parseInt(i,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Xt=16384;function zS(t){(t.width>Xt||t.height>Xt)&&(t.width>Xt&&t.height>Xt?t.width>t.height?(t.height*=Xt/t.width,t.width=Xt):(t.width*=Xt/t.height,t.height=Xt):t.width>Xt?(t.height*=Xt/t.width,t.width=Xt):(t.width*=Xt/t.height,t.height=Xt))}function Ps(t){return new Promise((r,i)=>{const l=new Image;l.onload=()=>{l.decode().then(()=>{requestAnimationFrame(()=>r(l))})},l.onerror=i,l.crossOrigin="anonymous",l.decoding="async",l.src=t})}async function _S(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(r=>`data:image/svg+xml;charset=utf-8,${r}`)}async function jS(t,r,i){const l="http://www.w3.org/2000/svg",a=document.createElementNS(l,"svg"),c=document.createElementNS(l,"foreignObject");return a.setAttribute("width",`${r}`),a.setAttribute("height",`${i}`),a.setAttribute("viewBox",`0 0 ${r} ${i}`),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("externalResourcesRequired","true"),a.appendChild(c),c.appendChild(t),_S(a)}const It=(t,r)=>{if(t instanceof r)return!0;const i=Object.getPrototypeOf(t);return i===null?!1:i.constructor.name===r.name||It(i,r)};function RS(t){const r=t.getPropertyValue("content");return`${t.cssText} content: '${r.replace(/'|"/g,"")}';`}function $S(t,r){return hg(r).map(i=>{const l=t.getPropertyValue(i),a=t.getPropertyPriority(i);return`${i}: ${l}${a?" !important":""};`}).join(" ")}function TS(t,r,i,l){const a=`.${t}:${r}`,c=i.cssText?RS(i):$S(i,l);return document.createTextNode(`${a}{${c}}`)}function ph(t,r,i,l){const a=window.getComputedStyle(t,i),c=a.getPropertyValue("content");if(c===""||c==="none")return;const d=kS();try{r.className=`${r.className} ${d}`}catch{return}const f=document.createElement("style");f.appendChild(TS(d,i,a,l)),r.appendChild(f)}function PS(t,r,i){ph(t,r,":before",i),ph(t,r,":after",i)}const gh="application/font-woff",mh="image/jpeg",MS={woff:gh,woff2:gh,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:mh,jpeg:mh,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function LS(t){const r=/\.([^./]*?)$/g.exec(t);return r?r[1]:""}function Mu(t){const r=LS(t).toLowerCase();return MS[r]||""}function AS(t){return t.split(/,/)[1]}function au(t){return t.search(/^(data:)/)!==-1}function IS(t,r){return`data:${r};base64,${t}`}async function gg(t,r,i){const l=await fetch(t,r);if(l.status===404)throw new Error(`Resource "${l.url}" not found`);const a=await l.blob();return new Promise((c,d)=>{const f=new FileReader;f.onerror=d,f.onloadend=()=>{try{c(i({res:l,result:f.result}))}catch(p){d(p)}},f.readAsDataURL(a)})}const Vc={};function DS(t,r,i){let l=t.replace(/\?.*/,"");return i&&(l=t),/ttf|otf|eot|woff2?/i.test(l)&&(l=l.replace(/.*\//,"")),r?`[${r}]${l}`:l}async function Lu(t,r,i){const l=DS(t,r,i.includeQueryParams);if(Vc[l]!=null)return Vc[l];i.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let a;try{const c=await gg(t,i.fetchRequestInit,({res:d,result:f})=>(r||(r=d.headers.get("Content-Type")||""),AS(f)));a=IS(c,r)}catch(c){a=i.imagePlaceholder||"";let d=`Failed to fetch resource: ${t}`;c&&(d=typeof c=="string"?c:c.message),d&&console.warn(d)}return Vc[l]=a,a}async function OS(t){const r=t.toDataURL();return r==="data:,"?t.cloneNode(!1):Ps(r)}async function HS(t,r){if(t.currentSrc){const c=document.createElement("canvas"),d=c.getContext("2d");c.width=t.clientWidth,c.height=t.clientHeight,d?.drawImage(t,0,0,c.width,c.height);const f=c.toDataURL();return Ps(f)}const i=t.poster,l=Mu(i),a=await Lu(i,l,r);return Ps(a)}async function FS(t,r){var i;try{if(!((i=t?.contentDocument)===null||i===void 0)&&i.body)return await Hs(t.contentDocument.body,r,!0)}catch{}return t.cloneNode(!1)}async function VS(t,r){return It(t,HTMLCanvasElement)?OS(t):It(t,HTMLVideoElement)?HS(t,r):It(t,HTMLIFrameElement)?FS(t,r):t.cloneNode(mg(t))}const US=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",mg=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function BS(t,r,i){var l,a;if(mg(r))return r;let c=[];return US(t)&&t.assignedNodes?c=kr(t.assignedNodes()):It(t,HTMLIFrameElement)&&(!((l=t.contentDocument)===null||l===void 0)&&l.body)?c=kr(t.contentDocument.body.childNodes):c=kr(((a=t.shadowRoot)!==null&&a!==void 0?a:t).childNodes),c.length===0||It(t,HTMLVideoElement)||await c.reduce((d,f)=>d.then(()=>Hs(f,i)).then(p=>{p&&r.appendChild(p)}),Promise.resolve()),r}function WS(t,r,i){const l=r.style;if(!l)return;const a=window.getComputedStyle(t);a.cssText?(l.cssText=a.cssText,l.transformOrigin=a.transformOrigin):hg(i).forEach(c=>{let d=a.getPropertyValue(c);c==="font-size"&&d.endsWith("px")&&(d=`${Math.floor(parseFloat(d.substring(0,d.length-2)))-.1}px`),It(t,HTMLIFrameElement)&&c==="display"&&d==="inline"&&(d="block"),c==="d"&&r.getAttribute("d")&&(d=`path(${r.getAttribute("d")})`),l.setProperty(c,d,a.getPropertyPriority(c))})}function XS(t,r){It(t,HTMLTextAreaElement)&&(r.innerHTML=t.value),It(t,HTMLInputElement)&&r.setAttribute("value",t.value)}function YS(t,r){if(It(t,HTMLSelectElement)){const l=Array.from(r.children).find(a=>t.value===a.getAttribute("value"));l&&l.setAttribute("selected","")}}function qS(t,r,i){return It(r,Element)&&(WS(t,r,i),PS(t,r,i),XS(t,r),YS(t,r)),r}async function ZS(t,r){const i=t.querySelectorAll?t.querySelectorAll("use"):[];if(i.length===0)return t;const l={};for(let c=0;c<i.length;c++){const f=i[c].getAttribute("xlink:href");if(f){const p=t.querySelector(f),m=document.querySelector(f);!p&&m&&!l[f]&&(l[f]=await Hs(m,r,!0))}}const a=Object.values(l);if(a.length){const c="http://www.w3.org/1999/xhtml",d=document.createElementNS(c,"svg");d.setAttribute("xmlns",c),d.style.position="absolute",d.style.width="0",d.style.height="0",d.style.overflow="hidden",d.style.display="none";const f=document.createElementNS(c,"defs");d.appendChild(f);for(let p=0;p<a.length;p++)f.appendChild(a[p]);t.appendChild(d)}return t}async function Hs(t,r,i){return!i&&r.filter&&!r.filter(t)?null:Promise.resolve(t).then(l=>VS(l,r)).then(l=>BS(t,l,r)).then(l=>qS(t,l,r)).then(l=>ZS(l,r))}const yg=/url\((['"]?)([^'"]+?)\1\)/g,KS=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,GS=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function QS(t){const r=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${r})(['"]?\\))`,"g")}function JS(t){const r=[];return t.replace(yg,(i,l,a)=>(r.push(a),i)),r.filter(i=>!au(i))}async function ek(t,r,i,l,a){try{const c=i?SS(r,i):r,d=Mu(r);let f;return a||(f=await Lu(c,d,l)),t.replace(QS(r),`$1${f}$3`)}catch{}return t}function tk(t,{preferredFontFormat:r}){return r?t.replace(GS,i=>{for(;;){const[l,,a]=KS.exec(i)||[];if(!a)return"";if(a===r)return`src: ${l};`}}):t}function xg(t){return t.search(yg)!==-1}async function vg(t,r,i){if(!xg(t))return t;const l=tk(t,i);return JS(l).reduce((c,d)=>c.then(f=>ek(f,d,r,i)),Promise.resolve(l))}async function Mo(t,r,i){var l;const a=(l=r.style)===null||l===void 0?void 0:l.getPropertyValue(t);if(a){const c=await vg(a,null,i);return r.style.setProperty(t,c,r.style.getPropertyPriority(t)),!0}return!1}async function nk(t,r){await Mo("background",t,r)||await Mo("background-image",t,r),await Mo("mask",t,r)||await Mo("-webkit-mask",t,r)||await Mo("mask-image",t,r)||await Mo("-webkit-mask-image",t,r)}async function rk(t,r){const i=It(t,HTMLImageElement);if(!(i&&!au(t.src))&&!(It(t,SVGImageElement)&&!au(t.href.baseVal)))return;const l=i?t.src:t.href.baseVal,a=await Lu(l,Mu(l),r);await new Promise((c,d)=>{t.onload=c,t.onerror=r.onImageErrorHandler?(...p)=>{try{c(r.onImageErrorHandler(...p))}catch(m){d(m)}}:d;const f=t;f.decode&&(f.decode=c),f.loading==="lazy"&&(f.loading="eager"),i?(t.srcset="",t.src=a):t.href.baseVal=a})}async function ok(t,r){const l=kr(t.childNodes).map(a=>wg(a,r));await Promise.all(l).then(()=>t)}async function wg(t,r){It(t,Element)&&(await nk(t,r),await rk(t,r),await ok(t,r))}function ik(t,r){const{style:i}=t;r.backgroundColor&&(i.backgroundColor=r.backgroundColor),r.width&&(i.width=`${r.width}px`),r.height&&(i.height=`${r.height}px`);const l=r.style;return l!=null&&Object.keys(l).forEach(a=>{i[a]=l[a]}),t}const yh={};async function xh(t){let r=yh[t];if(r!=null)return r;const l=await(await fetch(t)).text();return r={url:t,cssText:l},yh[t]=r,r}async function vh(t,r){let i=t.cssText;const l=/url\(["']?([^"')]+)["']?\)/g,c=(i.match(/url\([^)]+\)/g)||[]).map(async d=>{let f=d.replace(l,"$1");return f.startsWith("https://")||(f=new URL(f,t.url).href),gg(f,r.fetchRequestInit,({result:p})=>(i=i.replace(d,`url(${p})`),[d,p]))});return Promise.all(c).then(()=>i)}function wh(t){if(t==null)return[];const r=[],i=/(\/\*[\s\S]*?\*\/)/gi;let l=t.replace(i,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const p=a.exec(l);if(p===null)break;r.push(p[0])}l=l.replace(a,"");const c=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,d="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",f=new RegExp(d,"gi");for(;;){let p=c.exec(l);if(p===null){if(p=f.exec(l),p===null)break;c.lastIndex=f.lastIndex}else f.lastIndex=c.lastIndex;r.push(p[0])}return r}async function lk(t,r){const i=[],l=[];return t.forEach(a=>{if("cssRules"in a)try{kr(a.cssRules||[]).forEach((c,d)=>{if(c.type===CSSRule.IMPORT_RULE){let f=d+1;const p=c.href,m=xh(p).then(y=>vh(y,r)).then(y=>wh(y).forEach(v=>{try{a.insertRule(v,v.startsWith("@import")?f+=1:a.cssRules.length)}catch(x){console.error("Error inserting rule from remote css",{rule:v,error:x})}})).catch(y=>{console.error("Error loading remote css",y.toString())});l.push(m)}})}catch(c){const d=t.find(f=>f.href==null)||document.styleSheets[0];a.href!=null&&l.push(xh(a.href).then(f=>vh(f,r)).then(f=>wh(f).forEach(p=>{d.insertRule(p,d.cssRules.length)})).catch(f=>{console.error("Error loading remote stylesheet",f)})),console.error("Error inlining remote css file",c)}}),Promise.all(l).then(()=>(t.forEach(a=>{if("cssRules"in a)try{kr(a.cssRules||[]).forEach(c=>{i.push(c)})}catch(c){console.error(`Error while reading CSS rules from ${a.href}`,c)}}),i))}function sk(t){return t.filter(r=>r.type===CSSRule.FONT_FACE_RULE).filter(r=>xg(r.style.getPropertyValue("src")))}async function ak(t,r){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const i=kr(t.ownerDocument.styleSheets),l=await lk(i,r);return sk(l)}function bg(t){return t.trim().replace(/["']/g,"")}function ck(t){const r=new Set;function i(l){(l.style.fontFamily||getComputedStyle(l).fontFamily).split(",").forEach(c=>{r.add(bg(c))}),Array.from(l.children).forEach(c=>{c instanceof HTMLElement&&i(c)})}return i(t),r}async function uk(t,r){const i=await ak(t,r),l=ck(t);return(await Promise.all(i.filter(c=>l.has(bg(c.style.fontFamily))).map(c=>{const d=c.parentStyleSheet?c.parentStyleSheet.href:null;return vg(c.cssText,d,r)}))).join(`
`)}async function dk(t,r){const i=r.fontEmbedCSS!=null?r.fontEmbedCSS:r.skipFonts?null:await uk(t,r);if(i){const l=document.createElement("style"),a=document.createTextNode(i);l.appendChild(a),t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l)}}async function fk(t,r={}){const{width:i,height:l}=pg(t,r),a=await Hs(t,r,!0);return await dk(a,r),await wg(a,r),ik(a,r),await jS(a,i,l)}async function hk(t,r={}){const{width:i,height:l}=pg(t,r),a=await fk(t,r),c=await Ps(a),d=document.createElement("canvas"),f=d.getContext("2d"),p=r.pixelRatio||NS(),m=r.canvasWidth||i,y=r.canvasHeight||l;return d.width=m*p,d.height=y*p,r.skipAutoScale||zS(d),d.style.width=`${m}`,d.style.height=`${y}`,r.backgroundColor&&(f.fillStyle=r.backgroundColor,f.fillRect(0,0,d.width,d.height)),f.drawImage(c,0,0,d.width,d.height),d}async function bh(t,r={}){return(await hk(t,r)).toDataURL()}const pk=({reactFlowWrapper:t,reactFlowInstance:r,boards:i,currentBoardId:l,bgType:a,isDarkMode:c,setNodes:d})=>{const[f,p]=N.useState(!1),m=N.useCallback(async()=>{if(t.current===null||!r||!d)return;p(!0),await new Promise(j=>setTimeout(j,100));const{x:y,y:v,zoom:x}=r.getViewport(),w=r.getNodes(),C=w.filter(j=>j.selected),k=C.map(j=>j.id);k.length>0&&(d(j=>j.map(q=>({...q,selected:!1}))),await new Promise(j=>setTimeout(j,50)));const z=C.length>0?C:w;if(z.length===0){p(!1),k.length>0&&d(j=>j.map(q=>({...q,selected:k.includes(q.id)})));return}const E=Qi(z),T=100,U=E.width+T*2,R=E.height+T*2,O=-E.x+T,H=-E.y+T;r.setViewport({x:O,y:H,zoom:1}),await new Promise(j=>setTimeout(j,1e3)),document.fonts&&await document.fonts.ready;const Y=t.current.querySelector(".react-flow");if(!Y){p(!1),k.length>0&&d(j=>j.map(q=>({...q,selected:k.includes(q.id)})));return}const L=i.find(j=>j.id===l),V=(L?L.name:"Tablero sin nombre").toUpperCase(),I=Math.max(16,Math.min(72,U*.04)),Q=I*.5;let S={};a==="cork"?S={backgroundColor:c?"#18181b":"#e5e5e5",backgroundImage:c?"radial-gradient(rgba(255,255,255,0.05) 1px, transparent 1px), radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px)":"radial-gradient(#999 1px, transparent 1px), radial-gradient(#999 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:"0 0, 20px 20px"}:a==="blackboard"?S={backgroundColor:c?"#27272a":"#ffffff",backgroundImage:c?"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)":"radial-gradient(#e5e7eb 2px, transparent 2px)",backgroundSize:c?"100px 100px":"30px 30px"}:S={backgroundColor:c?"#1e293b":"#f0f9ff",backgroundImage:c?"linear-gradient(#334155 1px, transparent 1px), linear-gradient(90deg, #334155 1px, transparent 1px)":"linear-gradient(#cbd5e1 1px, transparent 1px), linear-gradient(90deg, #cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"};const X={pixelRatio:2,skipAutoScale:!0,backgroundColor:S.backgroundColor,width:U,height:R,style:{width:`${U}px`,height:`${R}px`,overflow:"visible",fontFamily:"'Courier Prime', monospace",...S},imagePlaceholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",filter:j=>!(j.classList&&(j.classList.contains("react-flow__controls")||j.classList.contains("react-flow__minimap")||j.classList.contains("react-flow__attribution")))};try{let j;try{j=await bh(Y,{...X,useCORS:!0})}catch(ae){console.warn("Error exportando con CORS, reintentando sin CORS...",ae),await new Promise(de=>setTimeout(de,1e3)),j=await bh(Y,{...X,useCORS:!1})}const q=document.createElement("canvas"),F=X.pixelRatio||1;q.width=U*F,q.height=R*F;const M=q.getContext("2d"),B=new Image;await new Promise((ae,de)=>{B.onload=ae,B.onerror=de,B.src=j}),M.drawImage(B,0,0);const _=I*F;M.font=`bold ${_}px "Courier Prime", monospace`,M.fillStyle=c?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",M.shadowColor=c?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.2)",M.shadowBlur=3*F,M.shadowOffsetX=1*F,M.shadowOffsetY=1*F,M.textAlign="right",M.textBaseline="bottom";const P=Q*F;M.fillText(V,q.width-P,q.height-P),j=q.toDataURL("image/png");const ne=document.createElement("a"),te=i.find(ae=>ae.id===l),oe=te?te.name.replace(/[^a-z0-9\u00C0-\u017F\s-_]/gi,""):"caso-detective";ne.download=`${oe}.png`,ne.href=j,ne.click()}catch(j){console.error("Error al exportar",j),alert("Error al generar la imagen. Si utilizas imgenes externas (URL), es posible que tengan restricciones de seguridad (CORS).")}finally{r.setViewport({x:y,y:v,zoom:x}),k.length>0&&d(j=>j.map(q=>({...q,selected:k.includes(q.id)}))),p(!1)}},[t,c,r,i,l,a,d]);return{isExporting:f,onExport:m}},gk="default-case",Fo=(t,r=[])=>{let i=localStorage.getItem(`board-${t}-nodes`),l=localStorage.getItem(`board-${t}-edges`),a=localStorage.getItem(`board-${t}-bg`);return!i&&t===gk&&(i=localStorage.getItem("detective-board-nodes"),l=localStorage.getItem("detective-board-edges")),{nodes:i?JSON.parse(i):r,edges:l?JSON.parse(l):[],bgType:a||"cork"}},ys="default-case",mk=({nodes:t,edges:r,bgType:i,setNodes:l,setEdges:a,setBgType:c,reactFlowInstance:d,clearHistory:f,setCaseManagerOpen:p,setConfirmModal:m,lastSaved:y})=>{const[v,x]=N.useState(()=>{try{const L=localStorage.getItem("detective-boards-list");return L?JSON.parse(L):localStorage.getItem("detective-board-nodes")?[{id:ys,name:"Caso #001: Principal",createdAt:Date.now(),lastModified:Date.now()}]:[{id:ys,name:"Caso #001: Nuevo",createdAt:Date.now(),lastModified:Date.now()}]}catch{return[{id:ys,name:"Caso #001: Nuevo",createdAt:Date.now(),lastModified:Date.now()}]}}),[w,C]=N.useState(()=>{try{const L=localStorage.getItem("detective-boards-trash");return L?JSON.parse(L):[]}catch{return[]}}),[k,z]=N.useState(()=>localStorage.getItem("detective-current-board-id")||ys);N.useEffect(()=>{localStorage.setItem("detective-boards-list",JSON.stringify(v))},[v]),N.useEffect(()=>{localStorage.setItem("detective-boards-trash",JSON.stringify(w))},[w]),N.useEffect(()=>{localStorage.setItem("detective-current-board-id",k)},[k]),N.useEffect(()=>{y&&x(L=>L.map(A=>A.id===k?{...A,lastModified:y.getTime()}:A))},[y,k]),N.useEffect(()=>{const L=v.find(A=>A.id===k);L&&(document.title=`${L.name} | Detective Board`)},[k,v]);const E=N.useCallback(L=>{localStorage.setItem(`board-${k}-nodes`,JSON.stringify(t)),localStorage.setItem(`board-${k}-edges`,JSON.stringify(r)),localStorage.setItem(`board-${k}-bg`,i);const A=Fo(L);l(A.nodes),a(A.edges),c(A.bgType),z(L),f(),p(!1),d&&setTimeout(()=>{d.fitView({duration:800,padding:.2})},100)},[k,t,r,i,l,a,c,f,d,p]),T=L=>{if(!L)return;const A=qt(),V={id:A,name:L,createdAt:Date.now(),lastModified:Date.now()};x(I=>[...I,V]),E(A)},U=L=>{v.length<=1||m({isOpen:!0,title:"MOVER A PAPELERA?",message:"El caso se mover a la papelera. Podrs restaurarlo si lo necesitas.",isDanger:!0,confirmText:"Mover",onConfirm:()=>{x(A=>A.map(V=>V.id===L?{...V,isDeleting:!0}:V)),setTimeout(()=>{const A=v.find(I=>I.id===L),V=v.filter(I=>I.id!==L);if(A){const{isDeleting:I,...Q}=A;C(S=>[{...Q,deletedAt:Date.now()},...S])}if(x(V),k===L){const I=V[0].id,Q=Fo(I);l(Q.nodes),a(Q.edges),c(Q.bgType),z(I),f(),d&&setTimeout(()=>{d.fitView({duration:800,padding:.2})},100)}},500)}})},R=N.useCallback(L=>{const A=w.find(V=>V.id===L);A&&(C(V=>V.filter(I=>I.id!==L)),x(V=>[...V,{...A,isDeleting:!1}]))},[w]),O=N.useCallback(L=>{m({isOpen:!0,title:"ELIMINAR DEFINITIVAMENTE?",message:"Esta accin es irreversible. Los datos del caso se borrarn del disco para siempre.",isDanger:!0,confirmText:"Eliminar",onConfirm:()=>{C(A=>A.filter(V=>V.id!==L)),localStorage.removeItem(`board-${L}-nodes`),localStorage.removeItem(`board-${L}-edges`),localStorage.removeItem(`board-${L}-bg`)}})},[]),H=(L,A)=>{x(V=>V.map(I=>I.id===L?{...I,name:A}:I))},Z=N.useCallback(L=>{x(L)},[]),Y=N.useCallback(L=>{const A=v.find(V=>V.id===L);A&&m({isOpen:!0,title:"CLONAR CASO?",message:`Deseas crear una copia del expediente "${A.name}"?`,confirmText:"Clonar",onConfirm:()=>{let V,I,Q;if(L===k)V=t,I=r,Q=i;else{const j=Fo(L);V=j.nodes,I=j.edges,Q=j.bgType}const S=qt(),X={id:S,name:`${A.name} (Copia)`,createdAt:Date.now(),lastModified:Date.now()};localStorage.setItem(`board-${S}-nodes`,JSON.stringify(V)),localStorage.setItem(`board-${S}-edges`,JSON.stringify(I)),localStorage.setItem(`board-${S}-bg`,Q),x(j=>{const q=j.findIndex(M=>M.id===L),F=[...j];return F.splice(q+1,0,X),F}),E(S)}})},[v,E,k,t,r,i,m]);return N.useEffect(()=>{v.length>0&&!v.find(L=>L.id===k)&&E(v[0].id)},[v,k,E]),{boards:v,setBoards:x,trash:w,currentBoardId:k,setCurrentBoardId:z,handleSwitchBoard:E,handleCreateBoard:T,handleDeleteBoard:U,handleRestoreBoard:R,handlePermanentDelete:O,handleRenameBoard:H,handleReorderBoards:Z,handleCloneBoard:Y}},yk=({onSave:t,undo:r,redo:i,duplicateSelected:l,navigateSearch:a,reactFlowInstance:c,edges:d,setEdges:f,takeSnapshot:p,connectionLineType:m,connectionColor:y})=>{N.useEffect(()=>{const v=x=>{if((x.ctrlKey||x.metaKey)&&x.key==="s"&&(x.preventDefault(),t()),(x.ctrlKey||x.metaKey)&&x.key==="z"&&(x.preventDefault(),x.shiftKey?i():r()),(x.ctrlKey||x.metaKey)&&x.key==="y"&&(x.preventDefault(),i()),(x.ctrlKey||x.metaKey)&&x.key==="d"&&(x.preventDefault(),l()),x.key==="F3"&&(x.preventDefault(),x.shiftKey?a("prev"):a("next")),x.shiftKey&&x.key.toLowerCase()==="c"){if(x.preventDefault(),!c)return;const w=c.getNodes().filter(C=>C.selected);if(w.length>=2){w.sort((k,z)=>k.position.x-z.position.x);const C=[];for(let k=0;k<w.length-1;k++){const z=w[k],E=w[k+1];d.some(U=>U.source===z.id&&U.target===E.id||U.source===E.id&&U.target===z.id)||C.push({id:qt(),source:z.id,target:E.id,type:m,style:{stroke:y,strokeWidth:2},className:"quick-draw"})}C.length>0&&(p(),f(k=>k.concat(C)))}}};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[t,r,i,l,a,d,m,y,c,f,p])},xk=({isInteractive:t,reactFlowInstance:r,setNodes:i,takeSnapshot:l,setPendingStampNodeId:a,setInputModalOpen:c,setEditingEdge:d,setEditingNode:f})=>{const p=N.useCallback(y=>{if(y.preventDefault(),!t){y.dataTransfer.dropEffect="none";return}y.dataTransfer.dropEffect="move"},[t]),m=N.useCallback(y=>{if(y.preventDefault(),!t)return;if(y.dataTransfer.files&&y.dataTransfer.files.length>0){const z=y.dataTransfer.files[0];Pu(z,(E,T,U)=>{const R=r.screenToFlowPosition({x:y.clientX,y:y.clientY}),O={id:qt(),type:"image",position:R,data:{label:"Imagen",image:E},style:{width:T,height:U}};l(),i(H=>H.concat(O))});return}const v=y.dataTransfer.getData("text/uri-list")||y.dataTransfer.getData("text/plain");if(v&&(v.startsWith("data:image")||v.startsWith("http"))){const z=r.screenToFlowPosition({x:y.clientX,y:y.clientY}),E={id:qt(),type:"image",position:z,data:{label:"Imagen Extrada",image:v},style:{width:300,height:300}};l(),i(T=>T.concat(E));return}const x=y.dataTransfer.getData("application/reactflow"),w=y.dataTransfer.getData("application/category");if(typeof x>"u"||!x)return;if(x==="stamp"){const z=y.dataTransfer.getData("application/category"),E=z==="custom",T=r.screenToFlowPosition({x:y.clientX,y:y.clientY}),R=r.getIntersectingNodes({x:T.x,y:T.y,width:1,height:1}).slice().reverse().find(O=>O.type==="evidence"||O.type==="note"||O.type==="image");if(R){if(E){a(R.id),c(!0),d(null),f(null);return}l(),i(O=>O.map(H=>H.id===R.id?{...H,data:{...H.data,status:z}}:H))}return}if(x==="zone"){const z=r.screenToFlowPosition({x:y.clientX,y:y.clientY}),E={id:qt(),type:"zone",position:z,data:{label:"ZONA SEGURA"},style:{width:300,height:300,backgroundColor:"rgba(113, 113, 122, 0.05)",borderColor:"#71717a"}};l(),i(T=>[E,...T]);return}if(x==="url"){const z=r.screenToFlowPosition({x:y.clientX,y:y.clientY}),E={id:qt(),type:"url",position:z,data:{url:"",label:"Nuevo Enlace"},style:{width:300,height:250}};l(),i(T=>T.concat(E));return}const C=r.screenToFlowPosition({x:y.clientX,y:y.clientY}),k={id:qt(),type:x,position:C,data:{label:`Nuevo ${w}`,category:w,description:"Doble click para editar..."}};l(),i(z=>z.concat(k))},[r,i,t,l,a,c,d,f]);return{onDragOver:p,onDrop:m}},Au=({status:t})=>{if(typeof t=="object"&&t.type==="custom")return g.jsx("div",{className:"border-4 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif",borderColor:t.color,color:t.color,backgroundColor:`${t.color}30`},children:t.label});switch(t){case"solved":return g.jsx("div",{className:"border-4 border-green-600 text-green-600 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-green-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"RESUELTO"});case"discarded":return g.jsx("div",{className:"border-4 border-red-600 text-red-600 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-red-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"DESCARTADO"});case"key":return g.jsx("div",{className:"border-4 border-yellow-500 text-yellow-500 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-yellow-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"CLAVE"});case"question":return g.jsx("div",{className:"border-4 border-blue-500 text-blue-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-blue-950/30",children:g.jsx(lu,{size:40,strokeWidth:3})});case"important":return g.jsx("div",{className:"border-4 border-orange-500 text-orange-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-orange-950/30",children:g.jsx(eg,{size:40,strokeWidth:3})});case"verify":return g.jsx("div",{className:"border-4 border-purple-500 text-purple-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-purple-950/30",children:g.jsx(og,{size:40,strokeWidth:3})});case"danger":return g.jsx("div",{className:"border-4 border-red-600 text-red-600 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-red-950/30",children:g.jsx(cg,{size:40,strokeWidth:3})});case"confidential":return g.jsx("div",{className:"border-4 border-zinc-500 text-zinc-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-zinc-950/30",children:g.jsx(Tu,{size:40,strokeWidth:3})});default:return null}},Sh={person:{color:"border-blue-500",icon:fg,dark:{bg:"bg-gradient-to-br from-blue-900 to-blue-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-blue-50 to-blue-100",text:"text-blue-900/70",title:"text-blue-950",border:"border-black/10"}},place:{color:"border-green-500",icon:ig,dark:{bg:"bg-gradient-to-br from-green-900 to-green-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-green-50 to-green-100",text:"text-green-900/70",title:"text-green-950",border:"border-black/10"}},clue:{color:"border-orange-500",icon:ju,dark:{bg:"bg-gradient-to-br from-orange-900 to-orange-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-orange-50 to-orange-100",text:"text-orange-900/70",title:"text-orange-950",border:"border-black/10"}},event:{color:"border-red-500",icon:tg,dark:{bg:"bg-gradient-to-br from-red-900 to-red-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-red-50 to-red-100",text:"text-red-900/70",title:"text-red-950",border:"border-black/10"}}},vk=({id:t,data:r,selected:i,isDarkMode:l})=>{const a=Sh[r.category]||Sh.clue,c=l?a.dark:a.light,d=a.icon,{setNodes:f}=Tn(),p=!!r.locked,[m,y]=N.useState(!1),v=N.useMemo(()=>Math.floor(Math.random()*40)-20,[r.status]),x=w=>{w.stopPropagation(),f(C=>C.map(k=>{if(k.id===t){const z=!!k.data.locked;return{...k,draggable:!0,data:{...k.data,locked:!z}}}return k}))};return g.jsxs("div",{className:`
        relative h-full w-full shadow-[0_10px_20px_-5px_rgba(0,0,0,0.6)] rounded-sm border-l-4 transition-all duration-300 ease-out group
        ${a.color} ${c.bg}
        ${i?"ring-2 ring-white scale-105 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.9)] z-50":"hover:scale-105 hover:-translate-y-1 hover:shadow-[0_20px_40px_-5px_rgba(0,0,0,0.8)] hover:z-40"}
        ${p?"nodrag":""} ${r.isDeleting?"deleting-default":""}
      `,children:[g.jsx(Wo,{color:"#ef4444",isVisible:i&&!p,minWidth:250,minHeight:150,handleStyle:{width:15,height:15}}),(i||p)&&g.jsx("button",{onClick:x,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${p?"bg-red-900 border-red-700 text-red-200":l?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:p?g.jsx(Yo,{size:12}):g.jsx(Xo,{size:12})}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(Dt,{type:"target",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(Dt,{type:"source",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),r.status&&g.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${v}deg)`},children:g.jsx(Au,{status:r.status},JSON.stringify(r.status))}),g.jsxs("div",{className:"p-3 flex flex-col gap-2 h-full w-full overflow-hidden",children:[g.jsxs("div",{className:`flex items-center justify-between border-b ${c.border} pb-2`,children:[g.jsx("span",{className:`text-xs uppercase tracking-widest ${c.text} font-bold`,children:r.category}),g.jsx(d,{size:16,className:c.text})]}),r.image&&g.jsx("div",{className:`nodrag w-full h-32 overflow-hidden rounded-sm border ${c.border} sepia-[.5] cursor-zoom-in hover:sepia-0 transition-all`,onClick:w=>{w.stopPropagation(),y(!0)},children:g.jsx("img",{src:r.image,alt:"evidence",className:"w-full h-full object-cover"})}),m&&_s.createPortal(g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center p-8 cursor-zoom-out backdrop-blur-sm animate-in fade-in duration-200",onClick:w=>{w.stopPropagation(),y(!1)},children:g.jsx("img",{src:r.image,alt:"Evidence HD",className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm"})}),document.body),g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-bold ${c.title} leading-tight font-mono`,children:r.label}),g.jsx("p",{className:`text-xs ${c.text} mt-1 font-mono leading-relaxed`,children:r.description})]})]})]})},wk=N.memo(vk),Uc={yellow:{bg:"from-yellow-100 to-yellow-300",btn:"bg-yellow-500"},green:{bg:"from-green-100 to-green-300",btn:"bg-green-500"},blue:{bg:"from-blue-100 to-blue-300",btn:"bg-blue-500"},red:{bg:"from-red-100 to-red-300",btn:"bg-red-500"},purple:{bg:"from-purple-100 to-purple-300",btn:"bg-purple-500"}},bk=({id:t,data:r,selected:i,isDarkMode:l})=>{const{deleteElements:a,setNodes:c}=Tn(),d=!!r.locked,f=Uc[r.color]||Uc.yellow,p=N.useMemo(()=>Math.floor(Math.random()*40)-20,[r.status]),m=x=>{x.stopPropagation(),c(w=>w.map(C=>{if(C.id===t){const k=!!C.data.locked;return{...C,draggable:!0,data:{...C.data,locked:!k}}}return C}))},y=x=>{c(w=>w.map(C=>C.id===t?{...C,data:{...C.data,color:x}}:C))},v=()=>{c(x=>x.map(w=>w.id===t?{...w,data:{...w.data,status:null}}:w))};return g.jsxs(g.Fragment,{children:[g.jsx(Wo,{color:"#eab308",isVisible:i&&!d,minWidth:150,minHeight:150,handleStyle:{width:15,height:15}}),i&&g.jsx("button",{onClick:()=>{a({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:g.jsx(Cr,{size:12})}),(i||d)&&g.jsx("button",{onClick:m,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${d?"bg-red-900 border-red-700 text-red-200":"bg-yellow-500 border-yellow-700 text-white hover:bg-yellow-600"}`,children:d?g.jsx(Yo,{size:12}):g.jsx(Xo,{size:12})}),i&&!d&&g.jsxs("div",{className:`nodrag absolute -bottom-8 left-1/2 transform -translate-x-1/2 flex gap-1 p-1.5 rounded-full shadow-xl border z-50 backdrop-blur-sm ${l?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[Object.entries(Uc).map(([x,w])=>g.jsx("button",{onClick:()=>y(x),className:`w-4 h-4 rounded-full ${w.btn} border border-white/20 hover:scale-125 transition-transform`},x)),r.status&&g.jsx("button",{onClick:v,className:`w-4 h-4 rounded-full flex items-center justify-center border border-white/20 hover:scale-125 transition-transform ml-1 ${l?"bg-zinc-700 text-zinc-400 hover:text-white":"bg-gray-200 text-gray-500 hover:text-black"}`,title:"Quitar Sello",children:g.jsx(_u,{size:10})})]}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(Dt,{type:"target",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(Dt,{type:"source",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),r.status&&g.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${p}deg)`},children:g.jsx(Au,{status:r.status},JSON.stringify(r.status))}),g.jsxs("div",{className:`relative h-full w-full bg-gradient-to-br ${f.bg} shadow-[5px_5px_15px_rgba(0,0,0,0.5)] rotate-1 p-4 note-rough border-t border-l border-white/50 flex flex-col transition-all duration-300 ease-out hover:scale-105 hover:-translate-y-1 hover:shadow-[10px_15px_25px_rgba(0,0,0,0.6)] overflow-hidden ${d?"nodrag":""} ${r.isDeleting?"deleting-note":""}`,children:[g.jsx("div",{className:"absolute inset-0 paper-texture pointer-events-none opacity-50 mix-blend-multiply"}),g.jsx("textarea",{name:"note-content",className:"nodrag relative z-10 w-full h-full bg-transparent resize-none outline-none text-gray-800 placeholder-yellow-600/50 text-lg leading-relaxed",placeholder:"Escribe una nota...",defaultValue:r.label,onChange:x=>r.label=x.target.value,style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", sans-serif'}})]})]})},Sk=N.memo(bk),kk=({isOpen:t,onClose:r,imageSrc:i,onCropComplete:l})=>{const[a,c]=N.useState(1),[d,f]=N.useState({x:0,y:0}),[p,m]=N.useState(!1),[y,v]=N.useState({x:0,y:0}),x=N.useRef(null),w=N.useRef(null);if(N.useEffect(()=>{t&&(c(1),f({x:0,y:0}))},[t,i]),!t||!i)return null;const C=T=>{m(!0),v({x:T.clientX-d.x,y:T.clientY-d.y})},k=T=>{p&&f({x:T.clientX-y.x,y:T.clientY-y.y})},z=()=>{m(!1)},E=()=>{const T=document.createElement("canvas"),U=T.getContext("2d"),R=w.current,O=x.current,H=R.clientWidth,Z=R.clientHeight;T.width=H,T.height=Z;const Y=H/2,L=Z/2;U.translate(Y+d.x,L+d.y),U.scale(a,a),U.drawImage(O,-O.naturalWidth/2,-O.naturalHeight/2),l(T.toDataURL("image/jpeg",.9)),r()};return g.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center p-4 animate-in fade-in duration-200 select-none",onMouseUp:z,onMouseLeave:z,children:[g.jsxs("div",{className:"w-full max-w-lg flex justify-between items-center mb-4",children:[g.jsxs("h2",{className:"text-zinc-100 font-mono font-bold text-lg flex items-center gap-2",children:[g.jsx(Bb,{size:18})," AJUSTAR RECORTE"]}),g.jsx("button",{onClick:r,className:"text-zinc-400 hover:text-white",children:g.jsx(Cr,{})})]}),g.jsxs("div",{ref:w,className:"relative w-[400px] h-[400px] bg-zinc-900 overflow-hidden border-2 border-dashed border-zinc-500 cursor-move shadow-2xl rounded-sm",onMouseDown:C,onMouseMove:k,children:[g.jsx("img",{ref:x,src:i,alt:"Crop target",className:"absolute max-w-none origin-center pointer-events-none",style:{left:"50%",top:"50%",transform:`translate(-50%, -50%) translate(${d.x}px, ${d.y}px) scale(${a})`}}),g.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-30",children:[g.jsx("div",{className:"w-full h-1/3 border-b border-white/50 absolute top-0"}),g.jsx("div",{className:"w-full h-1/3 border-b border-white/50 absolute top-1/3"}),g.jsx("div",{className:"h-full w-1/3 border-r border-white/50 absolute left-0"}),g.jsx("div",{className:"h-full w-1/3 border-r border-white/50 absolute left-1/3"})]})]}),g.jsxs("div",{className:"mt-6 flex items-center gap-4 w-full max-w-md bg-zinc-900 p-4 rounded-lg border border-zinc-800",children:[g.jsx(sS,{size:20,className:"text-zinc-400"}),g.jsx("input",{type:"range",name:"crop-scale",min:"0.1",max:"3",step:"0.05",value:a,onChange:T=>c(parseFloat(T.target.value)),className:"w-full accent-red-600 h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer"}),g.jsx(lS,{size:20,className:"text-zinc-400"})]}),g.jsxs("div",{className:"mt-6 flex gap-4",children:[g.jsx("button",{onClick:r,className:"px-6 py-2 border border-zinc-600 text-zinc-300 hover:text-white rounded font-bold uppercase text-xs tracking-wider transition-colors",children:"Cancelar"}),g.jsxs("button",{onClick:E,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded font-bold uppercase text-xs tracking-wider shadow-lg flex items-center gap-2 transition-colors",children:[g.jsx(ng,{size:16})," Aplicar"]})]})]})},Ek=({id:t,data:r,selected:i,isDarkMode:l})=>{const[a,c]=N.useState(r.image),[d,f]=N.useState(!1),[p,m]=N.useState(!1),[y,v]=N.useState(!1),[x,w]=N.useState(r.filters||{brightness:100,contrast:100,grayscale:0,sepia:0}),{deleteElements:C,setNodes:k,getNode:z}=Tn(),E=!!r.locked,T=N.useMemo(()=>Math.floor(Math.random()*40)-20,[r.status]);N.useEffect(()=>{r.filters&&w(r.filters)},[r.filters]),N.useEffect(()=>{if(r.image&&r.image.startsWith("http")){const A=new Image;A.crossOrigin="Anonymous",A.src=r.image,A.onload=()=>{try{const V=document.createElement("canvas");V.width=A.width,V.height=A.height,V.getContext("2d").drawImage(A,0,0);const Q=V.toDataURL("image/jpeg");Q.length>100&&(c(Q),k(S=>S.map(X=>X.id===t?{...X,data:{...X.data,image:Q}}:X)))}catch{}}}},[]);const U=A=>{A.stopPropagation(),k(V=>V.map(I=>{if(I.id===t){const Q=!!I.data.locked;return{...I,draggable:!0,data:{...I.data,locked:!Q}}}return I}))},R=A=>{const V=A.target.files[0];V&&Pu(V,(I,Q,S)=>{c(I),k(X=>X.map(j=>j.id===t?{...j,data:{...j.data,image:I},style:{...j.style,width:Q,height:S}}:j))})},O=A=>{if(!a)return;const V=new Image;V.src=a,V.onload=()=>{const I=document.createElement("canvas");I.width=V.height,I.height=V.width;const Q=I.getContext("2d");Q.translate(I.width/2,I.height/2),Q.rotate(A==="right"?90*Math.PI/180:-90*Math.PI/180),Q.drawImage(V,-V.width/2,-V.height/2);const S=I.toDataURL();c(S);const X=z(t),j=X?.style?.width,q=X?.style?.height;k(F=>F.map(M=>M.id===t?{...M,data:{...M.data,image:S},style:{...M.style,width:q,height:j}}:M))}},H=()=>{m(!0)},Z=A=>{c(A),k(V=>V.map(I=>I.id===t?{...I,data:{...I.data,image:A},style:{...I.style,width:300,height:300}}:I))},Y=()=>{k(A=>A.map(V=>V.id===t?{...V,data:{...V.data,status:null}}:V))},L=(A,V)=>{const I={...x,[A]:V};w(I),k(Q=>Q.map(S=>S.id===t?{...S,data:{...S.data,filters:I}}:S))};return g.jsxs(g.Fragment,{children:[g.jsx(Wo,{color:"#ef4444",isVisible:i&&!E,minWidth:100,minHeight:100,handleStyle:{width:15,height:15}}),i&&g.jsx("button",{onClick:()=>{C({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:g.jsx(Cr,{size:12})}),(i||E)&&g.jsx("button",{onClick:U,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${E?"bg-red-900 border-red-700 text-red-200":l?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:E?g.jsx(Yo,{size:12}):g.jsx(Xo,{size:12})}),i&&!E&&a&&g.jsxs("div",{className:`nodrag absolute -bottom-9 left-1/2 transform -translate-x-1/2 flex gap-1 p-1.5 rounded-full shadow-xl border z-50 backdrop-blur-sm items-center ${l?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[g.jsx("button",{onClick:()=>v(!y),className:`p-1.5 rounded-full transition-colors ${y?"bg-blue-600 text-white":l?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Filtros",children:g.jsx(eS,{size:14})}),g.jsx("div",{className:`w-px h-4 mx-0.5 ${l?"bg-zinc-700":"bg-gray-300"}`}),g.jsx("button",{onClick:()=>O("left"),className:`p-1.5 rounded-full transition-colors ${l?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Rotar Izquierda",children:g.jsx(Gb,{size:14})}),g.jsx("button",{onClick:H,className:`p-1.5 rounded-full transition-colors ${l?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Recortar",children:g.jsx($b,{size:14})}),g.jsx("button",{onClick:()=>O("right"),className:`p-1.5 rounded-full transition-colors ${l?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Rotar Derecha",children:g.jsx(Qb,{size:14})}),r.status&&g.jsx("button",{onClick:Y,className:`p-1.5 text-red-500 hover:text-red-400 rounded-full transition-colors ${l?"hover:bg-zinc-700":"hover:bg-gray-200"}`,title:"Quitar Sello",children:g.jsx(_u,{size:14})})]}),y&&i&&!E&&g.jsxs("div",{className:`nodrag absolute -bottom-44 left-1/2 transform -translate-x-1/2 p-3 rounded-lg border z-50 w-48 backdrop-blur-sm flex flex-col gap-2 shadow-2xl animate-in fade-in slide-in-from-bottom-2 ${l?"bg-zinc-900/95 border-zinc-700":"bg-white/95 border-gray-200"}`,children:[g.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${l?"text-zinc-400":"text-zinc-600"}`,children:[g.jsx("span",{children:"Brillo"})," ",g.jsxs("span",{children:[x.brightness,"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"200",value:x.brightness,onChange:A=>L("brightness",parseInt(A.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${l?"bg-zinc-700":"bg-gray-300"}`}),g.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${l?"text-zinc-400":"text-zinc-600"}`,children:[g.jsx("span",{children:"Contraste"})," ",g.jsxs("span",{children:[x.contrast,"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"200",value:x.contrast,onChange:A=>L("contrast",parseInt(A.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${l?"bg-zinc-700":"bg-gray-300"}`}),g.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${l?"text-zinc-400":"text-zinc-600"}`,children:[g.jsx("span",{children:"B/N"})," ",g.jsxs("span",{children:[x.grayscale,"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"100",value:x.grayscale,onChange:A=>L("grayscale",parseInt(A.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${l?"bg-zinc-700":"bg-gray-300"}`}),g.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${l?"text-zinc-400":"text-zinc-600"}`,children:[g.jsx("span",{children:"Sepia"})," ",g.jsxs("span",{children:[x.sepia,"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"100",value:x.sepia,onChange:A=>L("sepia",parseInt(A.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${l?"bg-zinc-700":"bg-gray-300"}`})]}),g.jsx("div",{className:"tape-visual"}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(Dt,{type:"target",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(Dt,{type:"source",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),r.status&&g.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${T}deg)`},children:g.jsx(Au,{status:r.status},JSON.stringify(r.status))}),g.jsx("div",{className:`h-full w-full ${a?"bg-zinc-100 p-2 pb-10 rotate-1 hover:rotate-0":l?"bg-zinc-900/50 border-zinc-700 hover:border-zinc-500":"bg-gray-200/50 border-gray-400 hover:border-gray-500"} shadow-[0_10px_20px_-5px_rgba(0,0,0,0.7)] flex items-center justify-center overflow-hidden rounded-sm relative group transition-all duration-300 ease-out hover:scale-105 hover:-translate-y-1 hover:shadow-[0_25px_50px_-12px_rgba(0,0,0,0.9)] ${E?"nodrag":""} ${r.isDeleting?"deleting-image":""} border-2 border-dashed`,children:a?g.jsxs("div",{className:"w-full h-full cursor-zoom-in",onClick:A=>{A.stopPropagation(),f(!0)},children:[g.jsx("img",{src:a,alt:"evidence",className:"w-full h-full object-cover border border-zinc-200",style:{filter:`brightness(${x.brightness}%) contrast(${x.contrast}%) grayscale(${x.grayscale}%) sepia(${x.sepia}%)`}}),g.jsx("div",{className:"absolute bottom-0 left-0 w-full h-10 flex items-center justify-center px-2",children:g.jsx("input",{type:"text",name:"image-caption",className:"nodrag w-full bg-transparent text-center text-zinc-800 text-xs outline-none placeholder-zinc-400/50 border-none p-0",placeholder:"",defaultValue:r.caption,onChange:A=>r.caption=A.target.value,onClick:A=>A.stopPropagation(),style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", cursive'}})})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full p-2 gap-1",children:[g.jsxs("label",{className:`nodrag cursor-pointer flex flex-col items-center gap-1 transition-colors ${l?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,children:[g.jsx(Ru,{size:24}),g.jsx("span",{className:"text-[10px] font-mono uppercase text-center",children:"Subir Local"}),g.jsx("input",{type:"file",name:"upload-image",className:"hidden",accept:"image/*",onChange:R})]}),g.jsx("div",{className:`text-[10px] font-mono ${l?"text-zinc-600":"text-zinc-400"}`,children:"- O -"}),g.jsx("input",{type:"text",name:"image-url",placeholder:"Pegar URL...",className:`nodrag w-full border text-[10px] p-1 rounded outline-none focus:border-purple-500 font-mono text-center ${l?"bg-zinc-950 border-zinc-700 text-zinc-300":"bg-white border-gray-300 text-zinc-700"}`,onKeyDown:A=>{if(A.key==="Enter"){const V=A.currentTarget.value;c(V),r.image=V;const I=new Image;I.crossOrigin="Anonymous",I.onload=()=>{try{const Q=document.createElement("canvas");Q.width=I.width,Q.height=I.height,Q.getContext("2d").drawImage(I,0,0);const X=Q.toDataURL("image/jpeg");c(X),k(j=>j.map(q=>q.id===t?{...q,data:{...q.data,image:X}}:q))}catch(Q){console.warn("CORS blocked",Q)}},I.src=V}}})]})}),d&&_s.createPortal(g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center p-8 cursor-zoom-out backdrop-blur-sm animate-in fade-in duration-200",onClick:A=>{A.stopPropagation(),f(!1)},children:g.jsx("img",{src:a,alt:"Evidence HD",className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm",style:{filter:`brightness(${x.brightness}%) contrast(${x.contrast}%) grayscale(${x.grayscale}%) sepia(${x.sepia}%)`}})}),document.body),p&&_s.createPortal(g.jsx(kk,{isOpen:p,onClose:()=>m(!1),imageSrc:a,onCropComplete:Z}),document.body)]})},Ck=N.memo(Ek),Nk=({id:t,data:r,selected:i,isDarkMode:l})=>{const{deleteElements:a,setNodes:c}=Tn(),d=!!r.locked,f=v=>{v.stopPropagation(),c(x=>x.map(w=>{if(w.id===t){const C=!!w.data.locked;return{...w,draggable:!0,data:{...w.data,locked:!C}}}return w}))},p=(v,x)=>{c(w=>w.map(C=>C.id===t?{...C,data:{...C.data,[v]:x}}:C))},m=["#e5e5e5","#18181b","#ef4444","#3b82f6","#22c55e","#eab308"],y=[{label:"S",val:"14px"},{label:"M",val:"24px"},{label:"L",val:"36px"},{label:"XL",val:"48px"}];return g.jsxs(g.Fragment,{children:[g.jsx(Wo,{color:"#71717a",isVisible:i&&!d,minWidth:100,minHeight:30,handleStyle:{width:15,height:15}}),i&&g.jsx("button",{onClick:()=>{a({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:g.jsx(Cr,{size:12})}),(i||d)&&g.jsx("button",{onClick:f,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${d?"bg-red-900 border-red-700 text-red-200":l?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:d?g.jsx(Yo,{size:12}):g.jsx(Xo,{size:12})}),i&&!d&&g.jsxs("div",{className:`nodrag absolute -bottom-10 left-1/2 transform -translate-x-1/2 flex flex-col gap-1 p-1.5 rounded-lg shadow-xl border z-50 backdrop-blur-sm items-center ${l?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[g.jsx("div",{className:"flex gap-1",children:m.map(v=>g.jsx("button",{onClick:()=>p("color",v),className:"w-4 h-4 rounded-full border border-white/20 hover:scale-125 transition-transform",style:{backgroundColor:v}},v))}),g.jsx("div",{className:`flex gap-1 border-t pt-1 mt-0.5 ${l?"border-white/10":"border-black/10"}`,children:y.map(v=>g.jsx("button",{onClick:()=>p("fontSize",v.val),className:`text-[8px] px-1 font-mono border rounded ${l?"text-zinc-300 hover:text-white border-zinc-700 bg-zinc-800 hover:bg-zinc-700":"text-zinc-600 hover:text-black border-gray-300 bg-gray-100 hover:bg-gray-200"}`,children:v.label},v.label))})]}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(Dt,{type:"target",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(Dt,{type:"source",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),g.jsx("div",{className:`h-full w-full p-2 flex items-center justify-center overflow-hidden border border-transparent hover:border-zinc-700/50 rounded transition-colors ${d?"nodrag":""} ${r.isDeleting?"deleting-default":""}`,children:g.jsx("textarea",{name:"text-content",className:`nodrag w-full h-full bg-transparent resize-none outline-none font-bold text-center p-2 ${r.color?"":"text-node-content text-gray-200"}`,placeholder:"Escribe un ttulo...",defaultValue:r.label,onChange:v=>r.label=v.target.value,style:{fontFamily:'"Courier Prime", monospace',color:r.color,fontSize:r.fontSize||"24px"}})})]})},zk=N.memo(Nk),_k=({id:t,data:r,selected:i,style:l,isDarkMode:a})=>{const{setNodes:c}=Tn(),d=l?.borderColor||"#71717a",f=l?.backgroundColor||(a?"rgba(113, 113, 122, 0.05)":"rgba(100, 116, 139, 0.05)"),p=!!r.locked,m=y=>{y.stopPropagation(),c(v=>v.map(x=>{if(x.id===t){const w=!!x.data.locked;return{...x,draggable:w,data:{...x.data,locked:!w}}}return x}))};return g.jsxs(g.Fragment,{children:[g.jsx(Wo,{color:d,isVisible:i&&!p,minWidth:150,minHeight:150}),(i||p)&&g.jsx("button",{onClick:m,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${p?"bg-red-900 border-red-700 text-red-200":a?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:p?g.jsx(Yo,{size:12}):g.jsx(Xo,{size:12})}),g.jsx("div",{className:`h-full w-full border-2 border-dashed rounded-xl transition-colors ${p?"nodrag":""} ${r.isDeleting?"deleting-zone":""}`,style:{borderColor:d,backgroundColor:f},children:g.jsx("div",{className:`absolute -top-3 left-4 px-2 py-0.5 rounded text-[10px] font-mono uppercase tracking-widest select-none whitespace-nowrap shadow-sm ${a?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-white border border-gray-300 text-gray-600"}`,children:r.label})})]})},jk=N.memo(_k),Rk=({id:t,data:r,selected:i,isDarkMode:l})=>{const{deleteElements:a,setNodes:c}=Tn(),[d,f]=N.useState(r.url||""),[p,m]=N.useState(!r.url),y=!!r.showIframe,[v,x]=N.useState(!1),[w,C]=N.useState(0),[k,z]=N.useState(null),[E,T]=N.useState(!0),[U,R]=N.useState(!1),O=!!r.locked,H=N.useMemo(()=>{if(!r.url)return"";try{const S=new URL(r.url);if(S.hostname.includes("youtube.com")||S.hostname.includes("youtu.be")){let j=null;if(S.hostname.includes("youtu.be"))j=S.pathname.slice(1);else if(S.searchParams.has("v"))j=S.searchParams.get("v");else if(S.pathname.startsWith("/embed/"))return r.url;if(j)return`https://www.youtube-nocookie.com/embed/${j}?rel=0&modestbranding=1&iv_load_policy=3&controls=1&playsinline=1&loop=1&playlist=${j}`}}catch{}return r.url},[r.url]),Z=r.url?`https://s.wordpress.com/mshots/v1/${encodeURIComponent(r.url)}?w=400&v=${w}`:null,Y=Z?`https://wsrv.nl/?url=${encodeURIComponent(Z)}`:null;N.useEffect(()=>{if(z(null),!Y)return;(X=>{const j=new Image;j.crossOrigin="Anonymous",j.referrerPolicy="no-referrer",j.src=X,j.onload=()=>{try{const q=document.createElement("canvas");q.width=j.width,q.height=j.height,q.getContext("2d").drawImage(j,0,0);const M=q.toDataURL("image/jpeg");z(M),T(!1)}catch{T(!1),R(!0)}},j.onerror=()=>{T(!1),R(!0)}})(Y)},[Y]);const L=S=>{S.stopPropagation(),c(X=>X.map(j=>{if(j.id===t){const q=!!j.data.locked;return{...j,draggable:q,data:{...j.data,locked:!q}}}return j}))},A=()=>{let S=d;S&&!S.startsWith("http")&&(S="https://"+S),c(X=>X.map(j=>j.id===t?{...j,data:{...j.data,url:S,showIframe:!1}}:j)),m(!1),x(!1),R(!1),T(!0)},V=()=>{m(!0),x(!1),R(!1),T(!0)},I=S=>{S.stopPropagation(),C(X=>X+1),x(!1),R(!1),T(!0)},Q=()=>{const S=!y;x(!1),c(X=>X.map(j=>j.id===t?{...j,data:{...j.data,showIframe:S}}:j))};return g.jsxs(g.Fragment,{children:[g.jsx(Wo,{color:"#3b82f6",isVisible:i&&!O,minWidth:200,minHeight:100}),i&&g.jsx("button",{onClick:()=>a({nodes:[{id:t}]}),className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:g.jsx(Cr,{size:12})}),(i||O)&&g.jsx("button",{onClick:L,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${O?"bg-red-900 border-red-700 text-red-200":l?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:O?g.jsx(Yo,{size:12}):g.jsx(Xo,{size:12})}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(Dt,{type:"target",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(Dt,{type:"source",position:me.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),g.jsxs("div",{className:`relative w-full h-full rounded-lg overflow-hidden border-2 transition-all shadow-lg flex flex-col ${l?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} ${O?"nodrag":""} ${r.isDeleting?"deleting-default":""}`,children:[g.jsxs("div",{className:`h-8 flex items-center px-2 gap-2 border-b ${l?"bg-zinc-800 border-zinc-700":"bg-gray-100 border-gray-200"}`,children:[g.jsx(Ib,{size:14,className:"text-blue-500"}),g.jsx("span",{className:`text-[10px] font-mono truncate flex-1 ${l?"text-zinc-400":"text-gray-600"}`,children:r.url?new URL(r.url).hostname:"ENLACE WEB"}),!p&&g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:Q,className:`text-zinc-500 transition-colors ${y?"text-blue-500":"hover:text-blue-500"}`,title:y?"Ver miniatura":"Ver interactivo",children:g.jsx(Vb,{size:12})}),g.jsx("button",{onClick:I,className:"text-zinc-500 hover:text-green-500 transition-colors",title:"Actualizar miniatura",children:g.jsx(sg,{size:12})}),g.jsx("button",{onClick:V,className:"text-zinc-500 hover:text-blue-500 transition-colors",children:g.jsx(Yb,{size:12})})]})]}),g.jsx("div",{className:"flex-1 relative bg-black/5 group",children:p?g.jsxs("div",{className:"p-4 flex flex-col gap-2 h-full justify-center",children:[g.jsx("input",{type:"text",name:"url-input",value:d,onChange:S=>f(S.target.value),placeholder:"https://ejemplo.com",className:`nodrag w-full text-xs p-2 rounded border outline-none font-mono ${l?"bg-zinc-950 border-zinc-700 text-white":"bg-white border-gray-300 text-black"}`,onKeyDown:S=>S.key==="Enter"&&A()}),g.jsx("button",{onClick:A,className:"bg-blue-600 text-white text-xs py-1 rounded hover:bg-blue-500 font-bold uppercase",children:"Guardar"})]}):g.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[g.jsx("div",{className:"flex-1 relative overflow-hidden bg-zinc-200 dark:bg-zinc-800 min-h-0",children:y?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`absolute top-0 left-0 w-full py-1 px-2 flex flex-col gap-1 items-center justify-center z-20 ${l?"bg-zinc-950/80":"bg-white/80"} backdrop-blur-[2px]`,children:g.jsx("span",{className:`text-[9px] leading-tight text-center select-none ${l?"text-zinc-400":"text-zinc-600"}`,children:"Si no carga, el sitio bloquea la conexin."})}),g.jsx("iframe",{src:H,className:"w-full h-full border-none relative z-10 bg-white",title:"Embedded Content",loading:"lazy",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-presentation allow-modals allow-popups-to-escape-sandbox",onError:S=>{console.warn("Error loading iframe:",r.url),S.target.style.display="none"}},w)]}):g.jsxs(g.Fragment,{children:[E&&r.url&&g.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center z-20",children:g.jsx("div",{className:"w-6 h-6 border-2 border-zinc-400 border-t-transparent rounded-full animate-spin"})}),k&&!U&&g.jsx("img",{src:k,alt:"Preview",className:"w-full h-full object-cover opacity-90 hover:opacity-100 transition-opacity"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(!r.url||U)&&g.jsx($u,{size:32,className:"text-zinc-400"})})]})}),g.jsxs("a",{href:r.url,target:"_blank",rel:"noopener",draggable:"false",onDragStart:S=>S.preventDefault(),className:`nodrag h-10 shrink-0 flex items-center justify-center gap-2 text-xs font-bold uppercase transition-colors z-10 relative ${l?"bg-zinc-800 hover:bg-zinc-700 text-blue-400":"bg-gray-200 hover:bg-gray-300 text-zinc-900"}`,children:[g.jsx(Mb,{size:14})," Visitar Sitio"]})]})})]})]})},$k=N.memo(Rk),Fs=({id:t,sourceX:r,sourceY:i,targetX:l,targetY:a,sourcePosition:c,targetPosition:d,style:f={},markerEnd:p,label:m,type:y,className:v})=>{let x="",w=0,C=0;const k={sourceX:r,sourceY:i,targetX:l,targetY:a,sourcePosition:c,targetPosition:d};return y==="straight"?[x,w,C]=up(k):y==="step"?[x,w,C]=Yi({...k,borderRadius:0}):y==="smoothstep"?[x,w,C]=Yi(k):[x,w,C]=Su(k),g.jsxs(g.Fragment,{children:[g.jsx(Bo,{path:x,markerEnd:p,style:f,className:v}),m&&g.jsx(V2,{children:g.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${w}px,${C}px)`,pointerEvents:"all"},className:"nodrag nopan",children:g.jsx("div",{className:"custom-edge-label",children:m})})})]})},Tk=t=>g.jsx(Fs,{...t,type:"straight"}),Pk=t=>g.jsx(Fs,{...t,type:"step"}),Mk=t=>g.jsx(Fs,{...t,type:"smoothstep"}),Lk=t=>g.jsx(Fs,{...t,type:"default"}),Sg=N.createContext(!0),Lo=t=>r=>{const i=N.useContext(Sg);return N.createElement(t,{...r,isDarkMode:i})},Ak={evidence:Lo(wk),note:Lo(Sk),image:Lo(Ck),text:Lo(zk),zone:Lo(jk),url:Lo($k)},Ik={default:Lk,straight:Tk,step:Pk,smoothstep:Mk},Dk=({connectionColor:t})=>{const r=N.useMemo(()=>({hideAttribution:!0}),[]),i=N.useMemo(()=>({stroke:t,strokeWidth:2}),[t]),l=N.useCallback(a=>{switch(a.type){case"evidence":switch(a.data.category){case"person":return"#3b82f6";case"place":return"#22c55e";case"clue":return"#f97316";case"event":return"#ef4444";default:return"#ef4444"}case"note":return"#eab308";case"image":return"#a855f7";case"text":return"#71717a";default:return"#ef4444"}},[]);return{nodeTypes:Ak,edgeTypes:Ik,proOptions:r,connectionLineStyle:i,nodeColor:l}},Ok=(t,r,i,l)=>{const[a,c]=N.useState([]),[d,f]=N.useState([]),p=N.useCallback(()=>{c(x=>[...x,{nodes:t,edges:r}]),f([])},[t,r]),m=N.useCallback(()=>{if(a.length===0)return;const x=a[a.length-1],w=a.slice(0,a.length-1);f(C=>[{nodes:t,edges:r},...C]),c(w),i(x.nodes),l(x.edges)},[a,t,r,i,l]),y=N.useCallback(()=>{if(d.length===0)return;const x=d[0],w=d.slice(1);c(C=>[...C,{nodes:t,edges:r}]),f(w),i(x.nodes),l(x.edges)},[d,t,r,i,l]),v=N.useCallback(()=>{c([]),f([])},[]);return{takeSnapshot:p,undo:m,redo:y,clearHistory:v,canUndo:a.length>0,canRedo:d.length>0}},Hk=({nodes:t,edges:r,setNodes:i,setEdges:l,onNodesChange:a,onEdgesChange:c})=>{const{takeSnapshot:d,undo:f,redo:p,clearHistory:m}=Ok(t,r,i,l),y=N.useCallback(C=>{i(k=>{const z=k.find(E=>E.id===C);return!z||z.data?.isDeleting?k:(setTimeout(()=>{i(E=>{const T=E.find(U=>U.id===C);return T&&T.data?.isDeleting?E.filter(U=>U.id!==C):E}),l(E=>E.filter(T=>T.source!==C&&T.target!==C))},500),k.map(E=>E.id===C?{...E,data:{...E.data,isDeleting:!0}}:E))})},[i,l]),v=N.useCallback(C=>{l(k=>{const z=k.find(E=>E.id===C);return!z||z.className?.includes("deleting-edge")?k:(setTimeout(()=>{l(E=>E.filter(T=>T.id!==C))},300),k.map(E=>E.id===C?{...E,className:`${E.className||""} deleting-edge`}:E))})},[l]),x=N.useCallback(C=>{const k=C.filter(E=>E.type!=="remove"),z=C.filter(E=>E.type==="remove");z.length>0&&(d(),z.forEach(E=>y(E.id))),k.length>0&&a(k)},[a,d,y]),w=N.useCallback(C=>{const k=C.filter(E=>E.type!=="remove"),z=C.filter(E=>E.type==="remove");z.length>0&&(d(),z.forEach(E=>v(E.id))),k.length>0&&c(k)},[c,d,v]);return{takeSnapshot:d,undo:f,redo:p,clearHistory:m,onNodesChangeWithHistory:x,onEdgesChangeWithHistory:w,animateAndRemoveNode:y,animateAndRemoveEdge:v}},Fk=(t,r,i,l,a)=>{const[c,d]=N.useState(null),f=N.useRef(null),p=N.useCallback(m=>{if(m.button!==2||!i||m.target.closest(".react-flow__node")||m.target.closest(".react-flow__edge")||m.target.closest(".react-flow__controls")||m.target.closest(".react-flow__minimap"))return;m.preventDefault();const{left:y,top:v}=t.current.getBoundingClientRect(),x=m.clientX-y,w=m.clientY-v;f.current={startX:x,startY:w,x,y:w,width:0,height:0,isDragging:!1};const C=z=>{if(z.buttons===0){k(z);return}if(!f.current||!t.current)return;const E=t.current.getBoundingClientRect(),T=z.clientX-E.left,U=z.clientY-E.top,R=Math.min(f.current.startX,T),O=Math.min(f.current.startY,U),H=Math.abs(T-f.current.startX),Z=Math.abs(U-f.current.startY);(H>5||Z>5)&&(f.current={...f.current,x:R,y:O,width:H,height:Z,isDragging:!0},d({...f.current}))},k=z=>{window.removeEventListener("pointermove",C),window.removeEventListener("pointerup",k),window.removeEventListener("pointercancel",k);const E=f.current?.isDragging,T=f.current;if(f.current=null,d(null),!E)l(z);else if(T&&r){const U=t.current.getBoundingClientRect(),R=r.screenToFlowPosition({x:U.left+T.x,y:U.top+T.y}),O=r.screenToFlowPosition({x:U.left+T.x+T.width,y:U.top+T.y+T.height}),H={x:Math.min(R.x,O.x),y:Math.min(R.y,O.y),width:Math.abs(O.x-R.x),height:Math.abs(O.y-R.y)},Z=r.getNodes().filter(Y=>{const L=Y.width??Y.measured?.width??200,A=Y.height??Y.measured?.height??150,V=Y.positionAbsolute?.x??Y.position.x,I=Y.positionAbsolute?.y??Y.position.y;return H.x<V+L&&H.x+H.width>V&&H.y<I+A&&H.y+H.height>I});a(Y=>Y.map(L=>({...L,selected:Z.some(A=>A.id===L.id)||z.shiftKey&&L.selected})))}};window.addEventListener("pointermove",C),window.addEventListener("pointerup",k),window.addEventListener("pointercancel",k)},[i,l,r,a,t]);return{selectionRect:c,handleRightPointerDown:p}},Vk=({isInteractive:t,reactFlowInstance:r,reactFlowWrapper:i,setEdges:l,setNodes:a,connectionLineType:c,connectionColor:d,takeSnapshot:f,setEditingNode:p,setEditingEdge:m,setInputModalOpen:y,setEditModalOpen:v,setMenu:x})=>{const w=N.useCallback(Y=>{f(),l(L=>fp({...Y,type:c,style:{stroke:d,strokeWidth:2}},L))},[l,d,f,c]),C=N.useCallback((Y,L)=>{Y.preventDefault(),Y.stopPropagation(),t&&(p(null),m(L),y(!0))},[t,p,m,y]),k=N.useCallback((Y,L)=>{t&&(f(),l(A=>A.map(V=>{if(V.id===L.id){const I=V.style?.strokeDasharray;return{...V,style:{...V.style,strokeDasharray:I?void 0:"10,10"}}}return V})))},[l,t,f]),z=N.useCallback(()=>x(null),[x]),E=N.useCallback(Y=>{if(Y.preventDefault(),!t)return;const L=i.current.getBoundingClientRect();x({top:Y.clientY<L.bottom-200?Y.clientY-L.top:void 0,left:Y.clientX<L.right-200?Y.clientX-L.left:void 0,right:Y.clientX>=L.right-200?L.width-(Y.clientX-L.left):void 0,bottom:Y.clientY>=L.bottom-200?L.height-(Y.clientY-L.top):void 0,clientX:Y.clientX,clientY:Y.clientY})},[t,i,x]),{selectionRect:T,handleRightPointerDown:U}=Fk(i,r,t,E,a),R=N.useCallback((Y,L)=>{L.type==="evidence"?(p(L),v(!0)):L.type==="zone"&&(m(null),p(L),y(!0))},[p,v,m,y]),O=N.useCallback((Y,L)=>{f(),L.type!=="zone"&&a(A=>{const V=A.findIndex(S=>S.id===L.id);if(V===A.length-1)return A;const I=[...A],[Q]=I.splice(V,1);return I.push(Q),I})},[f,a]),H=N.useCallback(()=>{i.current&&i.current.classList.add("is-moving")},[i]),Z=N.useCallback(()=>{i.current&&i.current.classList.remove("is-moving")},[i]);return{onConnect:w,onEdgeContextMenu:C,onEdgeClick:k,onPaneClick:z,onPaneContextMenu:E,onNodeDoubleClick:R,onNodeDragStart:O,onMoveStart:H,onMoveEnd:Z,selectionRect:T,handleRightPointerDown:U}},Uk=({reactFlowInstance:t,boards:r,currentBoardId:i,bgType:l,setBoards:a,setNodes:c,setEdges:d,setBgType:f,handleSwitchBoard:p,clearHistory:m,takeSnapshot:y,setConfirmModal:v})=>{const x=N.useCallback(()=>{if(t){const z={...t.toObject(),bgType:l},E=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),T=URL.createObjectURL(E),U=document.createElement("a");U.href=T;const R=r.find(H=>H.id===i),O=R?R.name.replace(/[^a-z0-9\u00C0-\u017F\s-_]/gi,""):"caso-detective";U.download=`${O}.json`,U.click(),URL.revokeObjectURL(T)}},[t,r,i,l]),w=N.useCallback(k=>{const z=k.target.files[0];if(!z)return;const E=z.name.replace(/\.json$/i,""),T=new FileReader;T.onload=U=>{try{const R=JSON.parse(U.target.result);if(R&&(R.nodes||R.edges)){const O=R.nodes||[],H=R.edges||[],Z=R.bgType||"cork",Y=r.find(L=>L.name===E);if(Y)v({isOpen:!0,title:"SOBRESCRIBIR CASO?",message:`Ya existe un caso llamado "${E}". Deseas sobrescribir sus datos con este archivo?`,confirmText:"Sobrescribir",cancelText:"Cancelar",isDanger:!0,onConfirm:()=>{localStorage.setItem(`board-${Y.id}-nodes`,JSON.stringify(O)),localStorage.setItem(`board-${Y.id}-edges`,JSON.stringify(H)),localStorage.setItem(`board-${Y.id}-bg`,Z),Y.id===i?(c(O),d(H),f(Z),m()):p(Y.id)}});else{const L=qt(),A={id:L,name:E,createdAt:Date.now(),lastModified:Date.now()};localStorage.setItem(`board-${L}-nodes`,JSON.stringify(O)),localStorage.setItem(`board-${L}-edges`,JSON.stringify(H)),localStorage.setItem(`board-${L}-bg`,Z),a(V=>[...V,A]),p(L)}}}catch(R){console.error("Error al cargar el caso",R),alert("El archivo no es vlido.")}},T.readAsText(z),k.target.value=""},[r,i,c,d,f,p,a,v,m]),C=N.useCallback(()=>{v({isOpen:!0,title:"LIMPIAR TABLERO?",message:"Ests seguro de que quieres eliminar todo el contenido del tablero? Esta accin no se puede deshacer.",onConfirm:()=>{y(),c([]),d([])},isDanger:!0})},[y,c,d,v]);return{onSave:x,onLoad:w,onClear:C}},Bk=({searchTerm:t,setNodes:r,reactFlowInstance:i})=>(N.useEffect(()=>{if(r(a=>a.map(c=>{if(!t)return{...c,style:{...c.style,opacity:1}};const d=c.data.label?.toLowerCase()||"",f=c.data.description?.toLowerCase()||"",p=d.includes(t.toLowerCase())||f.includes(t.toLowerCase());return{...c,style:{...c.style,opacity:p?1:.1}}})),t&&t.length>1&&i){const c=i.getNodes().find(d=>{const f=d.data.label?.toLowerCase()||"",p=d.data.description?.toLowerCase()||"";return f.includes(t.toLowerCase())||p.includes(t.toLowerCase())});c&&i.setCenter(c.position.x+(c.width||0)/2,c.position.y+(c.height||0)/2,{zoom:1.5,duration:800})}},[t,r,i]),{navigateSearch:N.useCallback(a=>{if(!t||!i)return;const d=i.getNodes().filter(x=>{const w=x.data.label?.toLowerCase()||"",C=x.data.description?.toLowerCase()||"";return w.includes(t.toLowerCase())||C.includes(t.toLowerCase())});if(d.length===0)return;const f=d.findIndex(x=>x.selected);let p=a==="next"?f+1:f-1;p>=d.length&&(p=0),p<0&&(p=d.length-1);const m=d[p];r(x=>x.map(w=>({...w,selected:w.id===m.id})));const y=m.width||150,v=m.height||50;i.setCenter(m.position.x+y/2,m.position.y+v/2,{zoom:1.5,duration:600})},[t,i,r])}),Wk=t=>{const[r,i]=N.useState("#dc2626"),[l,a]=N.useState("straight"),[c,d]=N.useState(!0),[f,p]=N.useState(!0),[m,y]=N.useState(""),[v,x]=N.useState(!0),[w,C]=N.useState(!1),[k,z]=N.useState(t),E=N.useCallback(()=>{const T=["cork","blackboard","paper"];z(U=>T[(T.indexOf(U)+1)%T.length])},[]);return{connectionColor:r,setConnectionColor:i,connectionLineType:l,setConnectionLineType:a,isInteractive:c,setIsInteractive:d,isDarkMode:f,setIsDarkMode:p,searchTerm:m,setSearchTerm:y,isSidebarOpen:v,setIsSidebarOpen:x,isZenMode:w,setIsZenMode:C,bgType:k,setBgType:z,toggleBackground:E}},Xk=({reactFlowInstance:t,setNodes:r,setEdges:i,takeSnapshot:l,animateAndRemoveNode:a,animateAndRemoveEdge:c,setEditModalOpen:d,setEditingNode:f,setEditingEdge:p,setInputModalOpen:m,setConnectionColor:y,setConnectionLineType:v,setPendingStampNodeId:x})=>{const w=N.useCallback((O,H)=>{l(),r(Z=>Z.map(Y=>Y.id===O?{...Y,data:H}:Y))},[r,l]),C=N.useCallback(O=>{l(),a(O),d(!1),f(null)},[a,l,d,f]),k=N.useCallback(()=>{if(!t)return;const O=t.getNodes().filter(H=>H.selected);if(O.length>0){l();const H=new Map,Z=O.map(A=>{const V=qt();return H.set(A.id,V),{...A,id:V,position:{x:A.position.x+50,y:A.position.y+50},selected:!0,data:{...A.data}}}),L=t.getEdges().filter(A=>H.has(A.source)&&H.has(A.target)).map(A=>({...A,id:qt(),source:H.get(A.source),target:H.get(A.target),selected:!0}));r(A=>A.map(V=>({...V,selected:!1})).concat(Z)),i(A=>A.map(V=>({...V,selected:!1})).concat(L))}},[t,r,i,l]),z=N.useCallback(O=>{y(O),i(H=>H.map(Z=>Z.selected?{...Z,style:{...Z.style,stroke:O}}:Z))},[i,y]),E=N.useCallback(O=>{v(O),i(H=>H.map(Z=>Z.selected?{...Z,type:O}:Z))},[i,v]),T=N.useCallback((O,H,Z,Y)=>{Y&&(l(),i(L=>L.map(A=>A.id===Y.id?{...A,label:O,type:Z||A.type,style:{...A.style,stroke:H},labelStyle:void 0,labelBgStyle:void 0}:A)),p(null))},[i,l,p]),U=N.useCallback((O,H)=>{O?(l(),c(O.id),p(null),m(!1)):H&&H.type==="zone"&&(C(H.id),m(!1))},[c,C,l,p,m]),R=N.useCallback((O,H,Z,Y,L,A)=>{Y?T(O,H,Z,Y):L&&L.type==="zone"?(l(),r(V=>V.map(I=>I.id===L.id?{...I,data:{...I.data,label:O},style:{...I.style,borderColor:H,backgroundColor:`${H}10`}}:I)),f(null),m(!1)):A&&(l(),r(V=>V.map(I=>I.id===A?{...I,data:{...I.data,status:{type:"custom",label:O||"SELLO",color:H}}}:I)),x(null),m(!1))},[T,r,l,f,m,x]);return{handleSaveNode:w,handleDeleteNode:C,duplicateSelected:k,handleConnectionColorChange:z,handleConnectionLineTypeChange:E,handleEdgeLabelSave:T,handleEdgeDelete:U,handleInputModalConfirm:R}},Yk=()=>{const t=N.useRef(null);N.useEffect(()=>{document.title="Detective Board";const Re="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%23dc2626%22%20stroke-width%3D%222.5%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Ccircle%20cx%3D%2211%22%20cy%3D%2211%22%20r%3D%228%22%3E%3C%2Fcircle%3E%3Cline%20x1%3D%2221%22%20y1%3D%2221%22%20x2%3D%2216.65%22%20y2%3D%2216.65%22%3E%3C%2Fline%3E%3C%2Fsvg%3E";let Ee=document.querySelector("link[rel~='icon']");Ee||(Ee=document.createElement("link"),Ee.rel="icon",document.head.appendChild(Ee)),Ee.href=Re},[]);const[r,i]=N.useState(!1),l=N.useRef(localStorage.getItem("detective-current-board-id")||"default-case"),[a,c,d]=U2(Fo(l.current).nodes),[f,p,m]=B2(Fo(l.current).edges),[y,v]=N.useState(null),[x,w]=N.useState(!1),[C,k]=N.useState(null),[z,E]=N.useState(null),[T,U]=N.useState(null),[R,O]=N.useState({isOpen:!1,title:"",message:"",onConfirm:null,isDanger:!1}),[H,Z]=N.useState(!1),[Y,L]=N.useState(!1),[A,V]=N.useState(null),[I,Q]=N.useState(null),{connectionColor:S,setConnectionColor:X,connectionLineType:j,setConnectionLineType:q,isInteractive:F,setIsInteractive:M,isDarkMode:B,setIsDarkMode:_,searchTerm:P,setSearchTerm:ne,isSidebarOpen:te,setIsSidebarOpen:oe,isZenMode:ae,setIsZenMode:de,bgType:se,setBgType:ye,toggleBackground:Se}=Wk(Fo(l.current).bgType),{nodeTypes:je,edgeTypes:Ae,proOptions:Oe,connectionLineStyle:He,nodeColor:Me}=Dk({connectionColor:S}),{takeSnapshot:Pe,undo:Ce,redo:ue,clearHistory:_e,onNodesChangeWithHistory:Qe,onEdgesChangeWithHistory:pt,animateAndRemoveNode:zt,animateAndRemoveEdge:_t}=Hk({nodes:a,edges:f,setNodes:c,setEdges:p,onNodesChange:d,onEdgesChange:m}),{boards:lt,setBoards:nt,trash:st,currentBoardId:qe,handleSwitchBoard:rt,handleCreateBoard:kt,handleDeleteBoard:Ot,handleRestoreBoard:Ue,handlePermanentDelete:jt,handleRenameBoard:Kt,handleReorderBoards:Gt,handleCloneBoard:En}=mk({nodes:a,edges:f,bgType:se,setNodes:c,setEdges:p,setBgType:ye,reactFlowInstance:y,clearHistory:_e,setCaseManagerOpen:i,setConfirmModal:O,lastSaved:z});wS({nodes:a,edges:f,bgType:se,currentBoardId:qe,setLastSaved:E}),N.useEffect(()=>{const Re=Ee=>{Ee.preventDefault(),Ee.returnValue=""};return window.addEventListener("beforeunload",Re),()=>window.removeEventListener("beforeunload",Re)},[]),bS({isInteractive:F,reactFlowInstance:y,takeSnapshot:Pe,setNodes:c});const{onConnect:xt,onEdgeContextMenu:Ht,onEdgeClick:Pn,onPaneClick:Cn,onNodeDoubleClick:cn,onNodeDragStart:Qt,onMoveStart:un,onMoveEnd:Jt,selectionRect:dn,handleRightPointerDown:Gr}=Vk({isInteractive:F,reactFlowInstance:y,reactFlowWrapper:t,setEdges:p,setNodes:c,connectionLineType:j,connectionColor:S,takeSnapshot:Pe,setEditingNode:k,setEditingEdge:V,setInputModalOpen:L,setEditModalOpen:w,setMenu:U});N.useEffect(()=>{const Re=Ee=>{Ee.key==="Escape"&&ae&&de(!1)};return window.addEventListener("keydown",Re),()=>window.removeEventListener("keydown",Re)},[ae]);const{handleSaveNode:Qr,handleDeleteNode:Jr,duplicateSelected:Nr,handleConnectionColorChange:eo,handleConnectionLineTypeChange:Mn,handleEdgeDelete:zr,handleInputModalConfirm:Ln}=Xk({reactFlowInstance:y,setNodes:c,setEdges:p,takeSnapshot:Pe,animateAndRemoveNode:zt,animateAndRemoveEdge:_t,setEditModalOpen:w,setEditingNode:k,setEditingEdge:V,setInputModalOpen:L,setConnectionColor:X,setConnectionLineType:q,setPendingStampNodeId:Q}),{onDragOver:qo,onDrop:An}=xk({isInteractive:F,reactFlowInstance:y,setNodes:c,takeSnapshot:Pe,setPendingStampNodeId:Q,setInputModalOpen:L,setEditingEdge:V,setEditingNode:k}),{onSave:In,onLoad:Qn,onClear:_r}=Uk({reactFlowInstance:y,boards:lt,currentBoardId:qe,bgType:se,setBoards:nt,setNodes:c,setEdges:p,setBgType:ye,handleSwitchBoard:rt,clearHistory:_e,takeSnapshot:Pe,setConfirmModal:O}),{navigateSearch:jr}=Bk({searchTerm:P,setNodes:c,reactFlowInstance:y}),to=ee.useCallback(()=>{Pe(),c(Re=>{const Ee=Re.filter(Je=>Je.selected);if(Ee.length===0)return Re;const Et=Ee.some(Je=>!Je.data.locked);return Re.map(Je=>Je.selected?{...Je,data:{...Je.data,locked:Et},draggable:!Et}:Je)})},[c,Pe]);N.useEffect(()=>{const Re=Ee=>{["INPUT","TEXTAREA","SELECT"].includes(Ee.target.tagName)||Ee.target.isContentEditable||(Ee.ctrlKey||Ee.metaKey)&&Ee.shiftKey&&Ee.key.toLowerCase()==="l"&&(Ee.preventDefault(),to())};return window.addEventListener("keydown",Re),()=>window.removeEventListener("keydown",Re)},[to]),N.useEffect(()=>{const Re=a.filter(Ee=>Ee.selected).map(Ee=>Ee.id);p(Ee=>{let Et=!1;const Je=Ee.map(Ft=>{const Rr=Re.includes(Ft.source)||Re.includes(Ft.target),$r=Ft.className?.includes("animated-flow");if(Rr&&!$r){Et=!0;const Zo=(Ft.className||"").replace("quick-draw","").trim();return{...Ft,className:`${Zo} animated-flow`.trim()}}else if(!Rr&&$r)return Et=!0,{...Ft,className:(Ft.className||"").replace("animated-flow","").trim()};return Ft});return Et?Je:Ee})},[a,p]),N.useEffect(()=>{if(f.some(Ee=>Ee.className?.includes("quick-draw"))){const Ee=setTimeout(()=>{p(Et=>Et.map(Je=>Je.className?.includes("quick-draw")?{...Je,className:Je.className.replace("quick-draw","").trim()}:Je))},1e3);return()=>clearTimeout(Ee)}},[f,p]);const{isExporting:no,onExport:fn}=pk({reactFlowWrapper:t,reactFlowInstance:y,boards:lt,currentBoardId:qe,bgType:se,isDarkMode:B,setNodes:c});yk({onSave:In,undo:Ce,redo:ue,duplicateSelected:Nr,navigateSearch:jr,reactFlowInstance:y,edges:f,setEdges:p,takeSnapshot:Pe,connectionLineType:j,connectionColor:S});const ro=lt.find(Re=>Re.id===qe);return g.jsx("div",{className:`flex h-screen w-screen transition-colors duration-500 ease-in-out ${B?"bg-[#1a1a1a]":"bg-gray-50 light-mode"}`,children:g.jsx(Sg.Provider,{value:B,children:g.jsxs(zu,{children:[!ae&&g.jsx(aS,{connectionColor:S,setConnectionColor:eo,connectionLineType:j,setConnectionLineType:Mn,lastSaved:z,onSave:In,onLoad:Qn,onClear:_r,onHelp:()=>Z(!0),isDarkMode:B,toggleTheme:()=>_(!B),searchTerm:P,setSearchTerm:ne,onExport:fn,isOpen:te,onToggle:()=>oe(!te),onOpenCaseManager:()=>i(!0),currentBoardName:ro?.name,onToggleZen:()=>de(!0),onNextMatch:()=>jr("next"),onPrevMatch:()=>jr("prev"),onToggleBg:Se}),g.jsxs("div",{className:"flex-grow h-full relative overflow-hidden",ref:t,style:{"--connection-color":S},onPointerDown:Gr,onContextMenu:Re=>Re.preventDefault(),children:[g.jsx(vS,{isZenMode:ae,setIsZenMode:de,undo:Ce,redo:ue,isDarkMode:B}),g.jsxs(Yp,{nodes:a,edges:f,onNodesChange:Qe,onEdgesChange:pt,onConnect:xt,onInit:v,onDrop:An,onDragOver:qo,onNodeDoubleClick:cn,onEdgeClick:Pn,onEdgeContextMenu:Ht,onPaneClick:Cn,nodeTypes:je,edgeTypes:Ae,fitView:!0,className:`${se==="cork"?"cork-pattern":se==="blackboard"?"blackboard-pattern":"graph-paper-pattern"} ${F?"":"board-locked"} ${B?"":"light-mode"}`,connectionLineType:j,connectionLineStyle:He,nodesDraggable:F,proOptions:Oe,elevateNodesOnSelect:!1,nodesConnectable:F,elementsSelectable:F,panOnDrag:F,zoomOnScroll:F,zoomOnPinch:F,panOnScroll:F,zoomOnDoubleClick:F,onNodeDragStart:Qt,onMoveStart:un,onMoveEnd:Jt,connectionRadius:30,children:[!ae&&g.jsx(sb,{showInteractive:!0,onInteractiveChange:M,fitViewOptions:{duration:800,padding:.2},style:{left:te?"340px":"10px",transition:"left 0.2s ease-in-out"}}),!ae&&g.jsx(eb,{nodeColor:Me,maskColor:B?"rgba(0, 0, 0, 0.6)":"rgba(0, 0, 0, 0.1)",className:B?"bg-zinc-900 border border-zinc-800":"bg-white border border-gray-200 shadow-md"}),g.jsx(hb,{gap:20,size:1,color:B?"#444":"#aaa",variant:"dots",className:"opacity-20"}),T&&g.jsx(pS,{onClick:Cn,...T,onHide:()=>U(null),takeSnapshot:Pe,setNodes:c}),a.length===0&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10 select-none",children:g.jsxs("div",{className:`text-center ${B?"opacity-10":"opacity-20"}`,children:[g.jsx("h1",{className:"text-5xl md:text-7xl font-black text-zinc-500 font-mono mb-4 tracking-[0.2em] uppercase",children:"CONFIDENCIAL"}),g.jsx("p",{className:"text-sm text-zinc-500 font-mono uppercase tracking-widest",children:"Arrastra evidencia o haz doble clic"})]})}),g.jsx("svg",{style:{position:"absolute",top:0,left:0,width:0,height:0,pointerEvents:"none"},children:g.jsx("defs",{children:g.jsxs("filter",{id:"yarn-texture",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[g.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.8",numOctaves:"3",result:"noise"}),g.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"1.5"})]})})})]}),g.jsx("div",{className:"absolute inset-0 pointer-events-none z-[5] bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.6)_100%)]"}),no&&g.jsxs("div",{className:"absolute inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center backdrop-blur-sm animate-in fade-in duration-200 cursor-wait",children:[g.jsx("div",{className:"w-16 h-16 border-4 border-red-600 border-t-transparent rounded-full animate-spin mb-4"}),g.jsx("h2",{className:"text-xl font-bold text-white font-mono tracking-widest animate-pulse",children:"REVELANDO EVIDENCIA..."}),g.jsx("p",{className:"text-zinc-400 text-xs font-mono mt-2",children:"Procesando fotografa del tablero completo."})]}),dn&&dn.isDragging&&g.jsx("div",{className:"absolute z-50 pointer-events-none",style:{left:`${dn.x}px`,top:`${dn.y}px`,width:`${dn.width}px`,height:`${dn.height}px`,border:"2px dashed #3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)"}})]}),g.jsx(cS,{isOpen:x,onClose:()=>w(!1),node:C,onSave:Qr,onDelete:Jr,isDarkMode:B}),g.jsx(gS,{isOpen:R.isOpen,onClose:()=>O(Re=>({...Re,isOpen:!1})),onConfirm:R.onConfirm,title:R.title,message:R.message,isDanger:R.isDanger,confirmText:R.confirmText,cancelText:R.cancelText,isDarkMode:B}),g.jsx(mS,{isOpen:H,onClose:()=>Z(!1),isDarkMode:B}),g.jsx(yS,{isOpen:Y,onClose:()=>{L(!1),V(null),k(null),Q(null)},onConfirm:(Re,Ee,Et)=>Ln(Re,Ee,Et,A,C,I),onDelete:()=>{I?(Pe(),c(Re=>Re.map(Ee=>Ee.id===I?{...Ee,data:{...Ee.data,status:null}}:Ee)),L(!1),Q(null)):zr(A,C)},title:A?"EDITAR CONEXIN":I?"CREAR SELLO":"EDITAR ZONA",initialValue:A?A.label||"":I?"":C?.data?.label||"",initialColor:A?A.style?.stroke||"#dc2626":I?"#dc2626":C?.style?.borderColor||"#71717a",initialType:A?.type,showTypeSelector:!!A,colorLabel:A?"Color del Hilo":I?"Color del Sello":"Color de Zona",placeholder:I?"Texto del sello (ej: CONFIRMADO)":"Escribe una etiqueta...",isDarkMode:B}),g.jsx(xS,{isOpen:r,onClose:()=>i(!1),boards:lt,currentBoardId:qe,onSwitch:rt,onCreate:kt,onDelete:Ot,onRename:Kt,onClone:En,onReorder:Gt,trash:st,onRestore:Ue,onPermanentDelete:jt,isDarkMode:B})]})})})};gy.createRoot(document.getElementById("root")).render(g.jsx(ee.StrictMode,{children:g.jsx(Yk,{})}));
