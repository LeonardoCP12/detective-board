(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Z_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ex={exports:{}},Md={},tx={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.element"),_I=Symbol.for("react.portal"),xI=Symbol.for("react.fragment"),EI=Symbol.for("react.strict_mode"),bI=Symbol.for("react.profiler"),SI=Symbol.for("react.provider"),TI=Symbol.for("react.context"),II=Symbol.for("react.forward_ref"),CI=Symbol.for("react.suspense"),kI=Symbol.for("react.memo"),AI=Symbol.for("react.lazy"),yy=Symbol.iterator;function RI(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var nx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rx=Object.assign,ix={};function ta(t,e,n){this.props=t,this.context=e,this.refs=ix,this.updater=n||nx}ta.prototype.isReactComponent={};ta.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ta.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sx(){}sx.prototype=ta.prototype;function _g(t,e,n){this.props=t,this.context=e,this.refs=ix,this.updater=n||nx}var xg=_g.prototype=new sx;xg.constructor=_g;rx(xg,ta.prototype);xg.isPureReactComponent=!0;var vy=Array.isArray,ox=Object.prototype.hasOwnProperty,Eg={current:null},ax={key:!0,ref:!0,__self:!0,__source:!0};function lx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ox.call(e,r)&&!ax.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Zl,type:t,key:s,ref:o,props:i,_owner:Eg.current}}function NI(t,e){return{$$typeof:Zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zl}function PI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wy=/\/+/g;function Oh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PI(""+t.key):e.toString(36)}function pu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zl:case _I:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Oh(o,0):r,vy(i)?(n="",t!=null&&(n=t.replace(wy,"$&/")+"/"),pu(i,e,n,"",function(u){return u})):i!=null&&(bg(i)&&(i=NI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(wy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Oh(s,a);o+=pu(s,e,n,l,i)}else if(l=RI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Oh(s,a++),o+=pu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dc(t,e,n){if(t==null)return t;var r=[],i=0;return pu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function DI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},gu={transition:null},LI={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:gu,ReactCurrentOwner:Eg};function cx(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Dc,forEach:function(t,e,n){Dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dc(t,function(){e++}),e},toArray:function(t){return Dc(t,function(e){return e})||[]},only:function(t){if(!bg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=ta;xe.Fragment=xI;xe.Profiler=bI;xe.PureComponent=_g;xe.StrictMode=EI;xe.Suspense=CI;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LI;xe.act=cx;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Eg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ox.call(e,l)&&!ax.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Zl,type:t.type,key:i,ref:s,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:TI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SI,_context:t},t.Consumer=t};xe.createElement=lx;xe.createFactory=function(t){var e=lx.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:II,render:t}};xe.isValidElement=bg;xe.lazy=function(t){return{$$typeof:AI,_payload:{_status:-1,_result:t},_init:DI}};xe.memo=function(t,e){return{$$typeof:kI,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=gu.transition;gu.transition={};try{t()}finally{gu.transition=e}};xe.unstable_act=cx;xe.useCallback=function(t,e){return Qt.current.useCallback(t,e)};xe.useContext=function(t){return Qt.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};xe.useEffect=function(t,e){return Qt.current.useEffect(t,e)};xe.useId=function(){return Qt.current.useId()};xe.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Qt.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};xe.useRef=function(t){return Qt.current.useRef(t)};xe.useState=function(t){return Qt.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Qt.current.useTransition()};xe.version="18.3.1";tx.exports=xe;var L=tx.exports;const W=Z_(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OI=L,zI=Symbol.for("react.element"),VI=Symbol.for("react.fragment"),MI=Object.prototype.hasOwnProperty,jI=OI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$I={key:!0,ref:!0,__self:!0,__source:!0};function ux(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)MI.call(e,r)&&!$I.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zI,type:t,key:s,ref:o,props:i,_owner:jI.current}}Md.Fragment=VI;Md.jsx=ux;Md.jsxs=ux;ex.exports=Md;var g=ex.exports,Mf={},dx={exports:{}},Sn={},hx={exports:{}},fx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,V){var U=$.length;$.push(V);e:for(;0<U;){var q=U-1>>>1,F=$[q];if(0<i(F,V))$[q]=V,$[U]=F,U=q;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var V=$[0],U=$.pop();if(U!==V){$[0]=U;e:for(var q=0,F=$.length,G=F>>>1;q<G;){var Y=2*(q+1)-1,Z=$[Y],ie=Y+1,ce=$[ie];if(0>i(Z,U))ie<F&&0>i(ce,Z)?($[q]=ce,$[ie]=U,q=ie):($[q]=Z,$[Y]=U,q=Y);else if(ie<F&&0>i(ce,U))$[q]=ce,$[ie]=U,q=ie;else break e}}return V}function i($,V){var U=$.sortIndex-V.sortIndex;return U!==0?U:$.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,m=!1,S=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=$)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(u)}}function R($){if(b=!1,I($),!S)if(n(l)!==null)S=!0,z(O);else{var V=n(u);V!==null&&B(R,V.startTime-$)}}function O($,V){S=!1,b&&(b=!1,y(x),x=-1),m=!0;var U=f;try{for(I(V),h=n(l);h!==null&&(!(h.expirationTime>V)||$&&!k());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var F=q(h.expirationTime<=V);V=t.unstable_now(),typeof F=="function"?h.callback=F:h===n(l)&&r(l),I(V)}else r(l);h=n(l)}if(h!==null)var G=!0;else{var Y=n(u);Y!==null&&B(R,Y.startTime-V),G=!1}return G}finally{h=null,f=U,m=!1}}var M=!1,C=null,x=-1,w=5,E=-1;function k(){return!(t.unstable_now()-E<w)}function A(){if(C!==null){var $=t.unstable_now();E=$;var V=!0;try{V=C(!0,$)}finally{V?T():(M=!1,C=null)}}else M=!1}var T;if(typeof v=="function")T=function(){v(A)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,j=P.port2;P.port1.onmessage=A,T=function(){j.postMessage(null)}}else T=function(){N(A,0)};function z($){C=$,M||(M=!0,T())}function B($,V){x=N(function(){$(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||m||(S=!0,z(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var U=f;f=V;try{return $()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,V){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var U=f;f=$;try{return V()}finally{f=U}},t.unstable_scheduleCallback=function($,V,U){var q=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?q+U:q):U=q,$){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=U+F,$={id:d++,callback:V,priorityLevel:$,startTime:U,expirationTime:F,sortIndex:-1},U>q?($.sortIndex=U,e(u,$),n(l)===null&&$===n(u)&&(b?(y(x),x=-1):b=!0,B(R,U-q))):($.sortIndex=F,e(l,$),S||m||(S=!0,z(O))),$},t.unstable_shouldYield=k,t.unstable_wrapCallback=function($){var V=f;return function(){var U=f;f=V;try{return $.apply(this,arguments)}finally{f=U}}}})(fx);hx.exports=fx;var FI=hx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI=L,En=FI;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var px=new Set,pl={};function js(t,e){Mo(t,e),Mo(t+"Capture",e)}function Mo(t,e){for(pl[t]=e,t=0;t<e.length;t++)px.add(e[t])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jf=Object.prototype.hasOwnProperty,BI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_y={},xy={};function HI(t){return jf.call(xy,t)?!0:jf.call(_y,t)?!1:BI.test(t)?xy[t]=!0:(_y[t]=!0,!1)}function qI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WI(t,e,n,r){if(e===null||typeof e>"u"||qI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sg=/[\-:]([a-z])/g;function Tg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sg,Tg);Rt[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sg,Tg);Rt[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sg,Tg);Rt[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ig(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WI(e,n,i,r)&&(n=null),r||i===null?HI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ri=UI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lc=Symbol.for("react.element"),uo=Symbol.for("react.portal"),ho=Symbol.for("react.fragment"),Cg=Symbol.for("react.strict_mode"),$f=Symbol.for("react.profiler"),gx=Symbol.for("react.provider"),mx=Symbol.for("react.context"),kg=Symbol.for("react.forward_ref"),Ff=Symbol.for("react.suspense"),Uf=Symbol.for("react.suspense_list"),Ag=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),yx=Symbol.for("react.offscreen"),Ey=Symbol.iterator;function Ia(t){return t===null||typeof t!="object"?null:(t=Ey&&t[Ey]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,zh;function $a(t){if(zh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zh=e&&e[1]||""}return`
`+zh+t}var Vh=!1;function Mh(t,e){if(!t||Vh)return"";Vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$a(t):""}function KI(t){switch(t.tag){case 5:return $a(t.type);case 16:return $a("Lazy");case 13:return $a("Suspense");case 19:return $a("SuspenseList");case 0:case 2:case 15:return t=Mh(t.type,!1),t;case 11:return t=Mh(t.type.render,!1),t;case 1:return t=Mh(t.type,!0),t;default:return""}}function Bf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ho:return"Fragment";case uo:return"Portal";case $f:return"Profiler";case Cg:return"StrictMode";case Ff:return"Suspense";case Uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mx:return(t.displayName||"Context")+".Consumer";case gx:return(t._context.displayName||"Context")+".Provider";case kg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ag:return e=t.displayName||null,e!==null?e:Bf(t.type)||"Memo";case xi:e=t._payload,t=t._init;try{return Bf(t(e))}catch{}}return null}function GI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bf(e);case 8:return e===Cg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QI(t){var e=vx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oc(t){t._valueTracker||(t._valueTracker=QI(t))}function wx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ju(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hf(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function by(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _x(t,e){e=e.checked,e!=null&&Ig(t,"checked",e,!1)}function qf(t,e){_x(t,e);var n=Ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wf(t,e.type,Ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wf(t,e,n){(e!=="number"||ju(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function So(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Kf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ty(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Fa(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ki(n)}}function xx(t,e){var n=Ki(e.value),r=Ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Iy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ex(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ex(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zc,bx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zc=zc||document.createElement("div"),zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YI=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(t){YI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Za[e]=Za[t]})});function Sx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Za.hasOwnProperty(t)&&Za[t]?(""+e).trim():e+"px"}function Tx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Sx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var XI=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qf(t,e){if(e){if(XI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Yf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xf=null;function Rg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jf=null,To=null,Io=null;function Cy(t){if(t=nc(t)){if(typeof Jf!="function")throw Error(J(280));var e=t.stateNode;e&&(e=Bd(e),Jf(t.stateNode,t.type,e))}}function Ix(t){To?Io?Io.push(t):Io=[t]:To=t}function Cx(){if(To){var t=To,e=Io;if(Io=To=null,Cy(t),e)for(t=0;t<e.length;t++)Cy(e[t])}}function kx(t,e){return t(e)}function Ax(){}var jh=!1;function Rx(t,e,n){if(jh)return t(e,n);jh=!0;try{return kx(t,e,n)}finally{jh=!1,(To!==null||Io!==null)&&(Ax(),Cx())}}function ml(t,e){var n=t.stateNode;if(n===null)return null;var r=Bd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Zf=!1;if(Kr)try{var Ca={};Object.defineProperty(Ca,"passive",{get:function(){Zf=!0}}),window.addEventListener("test",Ca,Ca),window.removeEventListener("test",Ca,Ca)}catch{Zf=!1}function JI(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var el=!1,$u=null,Fu=!1,ep=null,ZI={onError:function(t){el=!0,$u=t}};function eC(t,e,n,r,i,s,o,a,l){el=!1,$u=null,JI.apply(ZI,arguments)}function tC(t,e,n,r,i,s,o,a,l){if(eC.apply(this,arguments),el){if(el){var u=$u;el=!1,$u=null}else throw Error(J(198));Fu||(Fu=!0,ep=u)}}function $s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ky(t){if($s(t)!==t)throw Error(J(188))}function nC(t){var e=t.alternate;if(!e){if(e=$s(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ky(i),t;if(s===r)return ky(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function Px(t){return t=nC(t),t!==null?Dx(t):null}function Dx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dx(t);if(e!==null)return e;t=t.sibling}return null}var Lx=En.unstable_scheduleCallback,Ay=En.unstable_cancelCallback,rC=En.unstable_shouldYield,iC=En.unstable_requestPaint,it=En.unstable_now,sC=En.unstable_getCurrentPriorityLevel,Ng=En.unstable_ImmediatePriority,Ox=En.unstable_UserBlockingPriority,Uu=En.unstable_NormalPriority,oC=En.unstable_LowPriority,zx=En.unstable_IdlePriority,jd=null,mr=null;function aC(t){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(jd,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:uC,lC=Math.log,cC=Math.LN2;function uC(t){return t>>>=0,t===0?32:31-(lC(t)/cC|0)|0}var Vc=64,Mc=4194304;function Ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ua(a):(s&=o,s!==0&&(r=Ua(s)))}else o=n&~i,o!==0?r=Ua(o):s!==0&&(r=Ua(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),i=1<<n,r|=t[n],e&=~i;return r}function dC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-tr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=dC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function tp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vx(){var t=Vc;return Vc<<=1,!(Vc&4194240)&&(Vc=64),t}function $h(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function fC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-tr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Pg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function Mx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jx,Dg,$x,Fx,Ux,np=!1,jc=[],Li=null,Oi=null,zi=null,yl=new Map,vl=new Map,Ti=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ry(t,e){switch(t){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":yl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(e.pointerId)}}function ka(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nc(e),e!==null&&Dg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gC(t,e,n,r,i){switch(e){case"focusin":return Li=ka(Li,t,e,n,r,i),!0;case"dragenter":return Oi=ka(Oi,t,e,n,r,i),!0;case"mouseover":return zi=ka(zi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return yl.set(s,ka(yl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vl.set(s,ka(vl.get(s)||null,t,e,n,r,i)),!0}return!1}function Bx(t){var e=hs(t.target);if(e!==null){var n=$s(e);if(n!==null){if(e=n.tag,e===13){if(e=Nx(n),e!==null){t.blockedOn=e,Ux(t.priority,function(){$x(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xf=r,n.target.dispatchEvent(r),Xf=null}else return e=nc(n),e!==null&&Dg(e),t.blockedOn=n,!1;e.shift()}return!0}function Ny(t,e,n){mu(t)&&n.delete(e)}function mC(){np=!1,Li!==null&&mu(Li)&&(Li=null),Oi!==null&&mu(Oi)&&(Oi=null),zi!==null&&mu(zi)&&(zi=null),yl.forEach(Ny),vl.forEach(Ny)}function Aa(t,e){t.blockedOn===e&&(t.blockedOn=null,np||(np=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,mC)))}function wl(t){function e(i){return Aa(i,t)}if(0<jc.length){Aa(jc[0],t);for(var n=1;n<jc.length;n++){var r=jc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Li!==null&&Aa(Li,t),Oi!==null&&Aa(Oi,t),zi!==null&&Aa(zi,t),yl.forEach(e),vl.forEach(e),n=0;n<Ti.length;n++)r=Ti[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ti.length&&(n=Ti[0],n.blockedOn===null);)Bx(n),n.blockedOn===null&&Ti.shift()}var Co=ri.ReactCurrentBatchConfig,Hu=!0;function yC(t,e,n,r){var i=De,s=Co.transition;Co.transition=null;try{De=1,Lg(t,e,n,r)}finally{De=i,Co.transition=s}}function vC(t,e,n,r){var i=De,s=Co.transition;Co.transition=null;try{De=4,Lg(t,e,n,r)}finally{De=i,Co.transition=s}}function Lg(t,e,n,r){if(Hu){var i=rp(t,e,n,r);if(i===null)Yh(t,e,r,qu,n),Ry(t,r);else if(gC(i,t,e,n,r))r.stopPropagation();else if(Ry(t,r),e&4&&-1<pC.indexOf(t)){for(;i!==null;){var s=nc(i);if(s!==null&&jx(s),s=rp(t,e,n,r),s===null&&Yh(t,e,r,qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yh(t,e,r,null,n)}}var qu=null;function rp(t,e,n,r){if(qu=null,t=Rg(r),t=hs(t),t!==null)if(e=$s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qu=t,null}function Hx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sC()){case Ng:return 1;case Ox:return 4;case Uu:case oC:return 16;case zx:return 536870912;default:return 16}default:return 16}}var Ni=null,Og=null,yu=null;function qx(){if(yu)return yu;var t,e=Og,n=e.length,r,i="value"in Ni?Ni.value:Ni.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return yu=i.slice(t,1<r?1-r:void 0)}function vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $c(){return!0}function Py(){return!1}function Tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$c:Py,this.isPropagationStopped=Py,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$c)},persist:function(){},isPersistent:$c}),e}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zg=Tn(na),tc=Ye({},na,{view:0,detail:0}),wC=Tn(tc),Fh,Uh,Ra,$d=Ye({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ra&&(Ra&&t.type==="mousemove"?(Fh=t.screenX-Ra.screenX,Uh=t.screenY-Ra.screenY):Uh=Fh=0,Ra=t),Fh)},movementY:function(t){return"movementY"in t?t.movementY:Uh}}),Dy=Tn($d),_C=Ye({},$d,{dataTransfer:0}),xC=Tn(_C),EC=Ye({},tc,{relatedTarget:0}),Bh=Tn(EC),bC=Ye({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),SC=Tn(bC),TC=Ye({},na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IC=Tn(TC),CC=Ye({},na,{data:0}),Ly=Tn(CC),kC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RC[t])?!!e[t]:!1}function Vg(){return NC}var PC=Ye({},tc,{key:function(t){if(t.key){var e=kC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vg,charCode:function(t){return t.type==="keypress"?vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DC=Tn(PC),LC=Ye({},$d,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oy=Tn(LC),OC=Ye({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vg}),zC=Tn(OC),VC=Ye({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),MC=Tn(VC),jC=Ye({},$d,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$C=Tn(jC),FC=[9,13,27,32],Mg=Kr&&"CompositionEvent"in window,tl=null;Kr&&"documentMode"in document&&(tl=document.documentMode);var UC=Kr&&"TextEvent"in window&&!tl,Wx=Kr&&(!Mg||tl&&8<tl&&11>=tl),zy=" ",Vy=!1;function Kx(t,e){switch(t){case"keyup":return FC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fo=!1;function BC(t,e){switch(t){case"compositionend":return Gx(e);case"keypress":return e.which!==32?null:(Vy=!0,zy);case"textInput":return t=e.data,t===zy&&Vy?null:t;default:return null}}function HC(t,e){if(fo)return t==="compositionend"||!Mg&&Kx(t,e)?(t=qx(),yu=Og=Ni=null,fo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wx&&e.locale!=="ko"?null:e.data;default:return null}}var qC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function My(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qC[t.type]:e==="textarea"}function Qx(t,e,n,r){Ix(r),e=Wu(e,"onChange"),0<e.length&&(n=new zg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nl=null,_l=null;function WC(t){o1(t,0)}function Fd(t){var e=mo(t);if(wx(e))return t}function KC(t,e){if(t==="change")return e}var Yx=!1;if(Kr){var Hh;if(Kr){var qh="oninput"in document;if(!qh){var jy=document.createElement("div");jy.setAttribute("oninput","return;"),qh=typeof jy.oninput=="function"}Hh=qh}else Hh=!1;Yx=Hh&&(!document.documentMode||9<document.documentMode)}function $y(){nl&&(nl.detachEvent("onpropertychange",Xx),_l=nl=null)}function Xx(t){if(t.propertyName==="value"&&Fd(_l)){var e=[];Qx(e,_l,t,Rg(t)),Rx(WC,e)}}function GC(t,e,n){t==="focusin"?($y(),nl=e,_l=n,nl.attachEvent("onpropertychange",Xx)):t==="focusout"&&$y()}function QC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fd(_l)}function YC(t,e){if(t==="click")return Fd(e)}function XC(t,e){if(t==="input"||t==="change")return Fd(e)}function JC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sr=typeof Object.is=="function"?Object.is:JC;function xl(t,e){if(sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jf.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function Fy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uy(t,e){var n=Fy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fy(n)}}function Jx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zx(){for(var t=window,e=ju();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ju(t.document)}return e}function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZC(t){var e=Zx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jx(n.ownerDocument.documentElement,n)){if(r!==null&&jg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Uy(n,s);var o=Uy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ek=Kr&&"documentMode"in document&&11>=document.documentMode,po=null,ip=null,rl=null,sp=!1;function By(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sp||po==null||po!==ju(r)||(r=po,"selectionStart"in r&&jg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&xl(rl,r)||(rl=r,r=Wu(ip,"onSelect"),0<r.length&&(e=new zg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=po)))}function Fc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var go={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},Wh={},e1={};Kr&&(e1=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function Ud(t){if(Wh[t])return Wh[t];if(!go[t])return t;var e=go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in e1)return Wh[t]=e[n];return t}var t1=Ud("animationend"),n1=Ud("animationiteration"),r1=Ud("animationstart"),i1=Ud("transitionend"),s1=new Map,Hy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){s1.set(t,e),js(e,[t])}for(var Kh=0;Kh<Hy.length;Kh++){var Gh=Hy[Kh],tk=Gh.toLowerCase(),nk=Gh[0].toUpperCase()+Gh.slice(1);es(tk,"on"+nk)}es(t1,"onAnimationEnd");es(n1,"onAnimationIteration");es(r1,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(i1,"onTransitionEnd");Mo("onMouseEnter",["mouseout","mouseover"]);Mo("onMouseLeave",["mouseout","mouseover"]);Mo("onPointerEnter",["pointerout","pointerover"]);Mo("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function qy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tC(r,e,void 0,t),t.currentTarget=null}function o1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;qy(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;qy(i,a,u),s=l}}}if(Fu)throw t=ep,Fu=!1,ep=null,t}function Ue(t,e){var n=e[up];n===void 0&&(n=e[up]=new Set);var r=t+"__bubble";n.has(r)||(a1(e,t,2,!1),n.add(r))}function Qh(t,e,n){var r=0;e&&(r|=4),a1(n,t,r,e)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function El(t){if(!t[Uc]){t[Uc]=!0,px.forEach(function(n){n!=="selectionchange"&&(rk.has(n)||Qh(n,!1,t),Qh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uc]||(e[Uc]=!0,Qh("selectionchange",!1,e))}}function a1(t,e,n,r){switch(Hx(e)){case 1:var i=yC;break;case 4:i=vC;break;default:i=Lg}n=i.bind(null,e,n,t),i=void 0,!Zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Yh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=hs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Rx(function(){var u=s,d=Rg(n),h=[];e:{var f=s1.get(t);if(f!==void 0){var m=zg,S=t;switch(t){case"keypress":if(vu(n)===0)break e;case"keydown":case"keyup":m=DC;break;case"focusin":S="focus",m=Bh;break;case"focusout":S="blur",m=Bh;break;case"beforeblur":case"afterblur":m=Bh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Dy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=xC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=zC;break;case t1:case n1:case r1:m=SC;break;case i1:m=MC;break;case"scroll":m=wC;break;case"wheel":m=$C;break;case"copy":case"cut":case"paste":m=IC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Oy}var b=(e&4)!==0,N=!b&&t==="scroll",y=b?f!==null?f+"Capture":null:f;b=[];for(var v=u,I;v!==null;){I=v;var R=I.stateNode;if(I.tag===5&&R!==null&&(I=R,y!==null&&(R=ml(v,y),R!=null&&b.push(bl(v,R,I)))),N)break;v=v.return}0<b.length&&(f=new m(f,S,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Xf&&(S=n.relatedTarget||n.fromElement)&&(hs(S)||S[Gr]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(S=n.relatedTarget||n.toElement,m=u,S=S?hs(S):null,S!==null&&(N=$s(S),S!==N||S.tag!==5&&S.tag!==6)&&(S=null)):(m=null,S=u),m!==S)){if(b=Dy,R="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=Oy,R="onPointerLeave",y="onPointerEnter",v="pointer"),N=m==null?f:mo(m),I=S==null?f:mo(S),f=new b(R,v+"leave",m,n,d),f.target=N,f.relatedTarget=I,R=null,hs(d)===u&&(b=new b(y,v+"enter",S,n,d),b.target=I,b.relatedTarget=N,R=b),N=R,m&&S)t:{for(b=m,y=S,v=0,I=b;I;I=Zs(I))v++;for(I=0,R=y;R;R=Zs(R))I++;for(;0<v-I;)b=Zs(b),v--;for(;0<I-v;)y=Zs(y),I--;for(;v--;){if(b===y||y!==null&&b===y.alternate)break t;b=Zs(b),y=Zs(y)}b=null}else b=null;m!==null&&Wy(h,f,m,b,!1),S!==null&&N!==null&&Wy(h,N,S,b,!0)}}e:{if(f=u?mo(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var O=KC;else if(My(f))if(Yx)O=XC;else{O=QC;var M=GC}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=YC);if(O&&(O=O(t,u))){Qx(h,O,n,d);break e}M&&M(t,f,u),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&Wf(f,"number",f.value)}switch(M=u?mo(u):window,t){case"focusin":(My(M)||M.contentEditable==="true")&&(po=M,ip=u,rl=null);break;case"focusout":rl=ip=po=null;break;case"mousedown":sp=!0;break;case"contextmenu":case"mouseup":case"dragend":sp=!1,By(h,n,d);break;case"selectionchange":if(ek)break;case"keydown":case"keyup":By(h,n,d)}var C;if(Mg)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else fo?Kx(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Wx&&n.locale!=="ko"&&(fo||x!=="onCompositionStart"?x==="onCompositionEnd"&&fo&&(C=qx()):(Ni=d,Og="value"in Ni?Ni.value:Ni.textContent,fo=!0)),M=Wu(u,x),0<M.length&&(x=new Ly(x,t,null,n,d),h.push({event:x,listeners:M}),C?x.data=C:(C=Gx(n),C!==null&&(x.data=C)))),(C=UC?BC(t,n):HC(t,n))&&(u=Wu(u,"onBeforeInput"),0<u.length&&(d=new Ly("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}o1(h,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ml(t,n),s!=null&&r.unshift(bl(t,s,i)),s=ml(t,e),s!=null&&r.push(bl(t,s,i))),t=t.return}return r}function Zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ml(n,s),l!=null&&o.unshift(bl(n,l,a))):i||(l=ml(n,s),l!=null&&o.push(bl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ik=/\r\n?/g,sk=/\u0000|\uFFFD/g;function Ky(t){return(typeof t=="string"?t:""+t).replace(ik,`
`).replace(sk,"")}function Bc(t,e,n){if(e=Ky(e),Ky(t)!==e&&n)throw Error(J(425))}function Ku(){}var op=null,ap=null;function lp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cp=typeof setTimeout=="function"?setTimeout:void 0,ok=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,ak=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(t){return Gy.resolve(null).then(t).catch(lk)}:cp;function lk(t){setTimeout(function(){throw t})}function Xh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wl(e)}function Vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ra=Math.random().toString(36).slice(2),gr="__reactFiber$"+ra,Sl="__reactProps$"+ra,Gr="__reactContainer$"+ra,up="__reactEvents$"+ra,ck="__reactListeners$"+ra,uk="__reactHandles$"+ra;function hs(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gr]||n[gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qy(t);t!==null;){if(n=t[gr])return n;t=Qy(t)}return e}t=n,n=t.parentNode}return null}function nc(t){return t=t[gr]||t[Gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function Bd(t){return t[Sl]||null}var dp=[],yo=-1;function ts(t){return{current:t}}function He(t){0>yo||(t.current=dp[yo],dp[yo]=null,yo--)}function je(t,e){yo++,dp[yo]=t.current,t.current=e}var Gi={},Bt=ts(Gi),nn=ts(!1),Ts=Gi;function jo(t,e){var n=t.type.contextTypes;if(!n)return Gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rn(t){return t=t.childContextTypes,t!=null}function Gu(){He(nn),He(Bt)}function Yy(t,e,n){if(Bt.current!==Gi)throw Error(J(168));je(Bt,e),je(nn,n)}function l1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,GI(t)||"Unknown",i));return Ye({},n,r)}function Qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,Ts=Bt.current,je(Bt,t),je(nn,nn.current),!0}function Xy(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=l1(t,e,Ts),r.__reactInternalMemoizedMergedChildContext=t,He(nn),He(Bt),je(Bt,t)):He(nn),je(nn,n)}var Or=null,Hd=!1,Jh=!1;function c1(t){Or===null?Or=[t]:Or.push(t)}function dk(t){Hd=!0,c1(t)}function ns(){if(!Jh&&Or!==null){Jh=!0;var t=0,e=De;try{var n=Or;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Or=null,Hd=!1}catch(i){throw Or!==null&&(Or=Or.slice(t+1)),Lx(Ng,ns),i}finally{De=e,Jh=!1}}return null}var vo=[],wo=0,Yu=null,Xu=0,Rn=[],Nn=0,Is=null,Vr=1,Mr="";function ls(t,e){vo[wo++]=Xu,vo[wo++]=Yu,Yu=t,Xu=e}function u1(t,e,n){Rn[Nn++]=Vr,Rn[Nn++]=Mr,Rn[Nn++]=Is,Is=t;var r=Vr;t=Mr;var i=32-tr(r)-1;r&=~(1<<i),n+=1;var s=32-tr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vr=1<<32-tr(e)+i|n<<i|r,Mr=s+t}else Vr=1<<s|n<<i|r,Mr=t}function $g(t){t.return!==null&&(ls(t,1),u1(t,1,0))}function Fg(t){for(;t===Yu;)Yu=vo[--wo],vo[wo]=null,Xu=vo[--wo],vo[wo]=null;for(;t===Is;)Is=Rn[--Nn],Rn[Nn]=null,Mr=Rn[--Nn],Rn[Nn]=null,Vr=Rn[--Nn],Rn[Nn]=null}var _n=null,wn=null,Ke=!1,Xn=null;function d1(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,wn=Vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:Vr,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,wn=null,!0):!1;default:return!1}}function hp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fp(t){if(Ke){var e=wn;if(e){var n=e;if(!Jy(t,e)){if(hp(t))throw Error(J(418));e=Vi(n.nextSibling);var r=_n;e&&Jy(t,e)?d1(r,n):(t.flags=t.flags&-4097|2,Ke=!1,_n=t)}}else{if(hp(t))throw Error(J(418));t.flags=t.flags&-4097|2,Ke=!1,_n=t}}}function Zy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function Hc(t){if(t!==_n)return!1;if(!Ke)return Zy(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lp(t.type,t.memoizedProps)),e&&(e=wn)){if(hp(t))throw h1(),Error(J(418));for(;e;)d1(t,e),e=Vi(e.nextSibling)}if(Zy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=_n?Vi(t.stateNode.nextSibling):null;return!0}function h1(){for(var t=wn;t;)t=Vi(t.nextSibling)}function $o(){wn=_n=null,Ke=!1}function Ug(t){Xn===null?Xn=[t]:Xn.push(t)}var hk=ri.ReactCurrentBatchConfig;function Na(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function qc(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ev(t){var e=t._init;return e(t._payload)}function f1(t){function e(y,v){if(t){var I=y.deletions;I===null?(y.deletions=[v],y.flags|=16):I.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Fi(y,v),y.index=0,y.sibling=null,y}function s(y,v,I){return y.index=I,t?(I=y.alternate,I!==null?(I=I.index,I<v?(y.flags|=2,v):I):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,I,R){return v===null||v.tag!==6?(v=of(I,y.mode,R),v.return=y,v):(v=i(v,I),v.return=y,v)}function l(y,v,I,R){var O=I.type;return O===ho?d(y,v,I.props.children,R,I.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===xi&&ev(O)===v.type)?(R=i(v,I.props),R.ref=Na(y,v,I),R.return=y,R):(R=Tu(I.type,I.key,I.props,null,y.mode,R),R.ref=Na(y,v,I),R.return=y,R)}function u(y,v,I,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=af(I,y.mode,R),v.return=y,v):(v=i(v,I.children||[]),v.return=y,v)}function d(y,v,I,R,O){return v===null||v.tag!==7?(v=xs(I,y.mode,R,O),v.return=y,v):(v=i(v,I),v.return=y,v)}function h(y,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=of(""+v,y.mode,I),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lc:return I=Tu(v.type,v.key,v.props,null,y.mode,I),I.ref=Na(y,null,v),I.return=y,I;case uo:return v=af(v,y.mode,I),v.return=y,v;case xi:var R=v._init;return h(y,R(v._payload),I)}if(Fa(v)||Ia(v))return v=xs(v,y.mode,I,null),v.return=y,v;qc(y,v)}return null}function f(y,v,I,R){var O=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(y,v,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Lc:return I.key===O?l(y,v,I,R):null;case uo:return I.key===O?u(y,v,I,R):null;case xi:return O=I._init,f(y,v,O(I._payload),R)}if(Fa(I)||Ia(I))return O!==null?null:d(y,v,I,R,null);qc(y,I)}return null}function m(y,v,I,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(I)||null,a(v,y,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Lc:return y=y.get(R.key===null?I:R.key)||null,l(v,y,R,O);case uo:return y=y.get(R.key===null?I:R.key)||null,u(v,y,R,O);case xi:var M=R._init;return m(y,v,I,M(R._payload),O)}if(Fa(R)||Ia(R))return y=y.get(I)||null,d(v,y,R,O,null);qc(v,R)}return null}function S(y,v,I,R){for(var O=null,M=null,C=v,x=v=0,w=null;C!==null&&x<I.length;x++){C.index>x?(w=C,C=null):w=C.sibling;var E=f(y,C,I[x],R);if(E===null){C===null&&(C=w);break}t&&C&&E.alternate===null&&e(y,C),v=s(E,v,x),M===null?O=E:M.sibling=E,M=E,C=w}if(x===I.length)return n(y,C),Ke&&ls(y,x),O;if(C===null){for(;x<I.length;x++)C=h(y,I[x],R),C!==null&&(v=s(C,v,x),M===null?O=C:M.sibling=C,M=C);return Ke&&ls(y,x),O}for(C=r(y,C);x<I.length;x++)w=m(C,y,x,I[x],R),w!==null&&(t&&w.alternate!==null&&C.delete(w.key===null?x:w.key),v=s(w,v,x),M===null?O=w:M.sibling=w,M=w);return t&&C.forEach(function(k){return e(y,k)}),Ke&&ls(y,x),O}function b(y,v,I,R){var O=Ia(I);if(typeof O!="function")throw Error(J(150));if(I=O.call(I),I==null)throw Error(J(151));for(var M=O=null,C=v,x=v=0,w=null,E=I.next();C!==null&&!E.done;x++,E=I.next()){C.index>x?(w=C,C=null):w=C.sibling;var k=f(y,C,E.value,R);if(k===null){C===null&&(C=w);break}t&&C&&k.alternate===null&&e(y,C),v=s(k,v,x),M===null?O=k:M.sibling=k,M=k,C=w}if(E.done)return n(y,C),Ke&&ls(y,x),O;if(C===null){for(;!E.done;x++,E=I.next())E=h(y,E.value,R),E!==null&&(v=s(E,v,x),M===null?O=E:M.sibling=E,M=E);return Ke&&ls(y,x),O}for(C=r(y,C);!E.done;x++,E=I.next())E=m(C,y,x,E.value,R),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?x:E.key),v=s(E,v,x),M===null?O=E:M.sibling=E,M=E);return t&&C.forEach(function(A){return e(y,A)}),Ke&&ls(y,x),O}function N(y,v,I,R){if(typeof I=="object"&&I!==null&&I.type===ho&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Lc:e:{for(var O=I.key,M=v;M!==null;){if(M.key===O){if(O=I.type,O===ho){if(M.tag===7){n(y,M.sibling),v=i(M,I.props.children),v.return=y,y=v;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===xi&&ev(O)===M.type){n(y,M.sibling),v=i(M,I.props),v.ref=Na(y,M,I),v.return=y,y=v;break e}n(y,M);break}else e(y,M);M=M.sibling}I.type===ho?(v=xs(I.props.children,y.mode,R,I.key),v.return=y,y=v):(R=Tu(I.type,I.key,I.props,null,y.mode,R),R.ref=Na(y,v,I),R.return=y,y=R)}return o(y);case uo:e:{for(M=I.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(y,v.sibling),v=i(v,I.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=af(I,y.mode,R),v.return=y,y=v}return o(y);case xi:return M=I._init,N(y,v,M(I._payload),R)}if(Fa(I))return S(y,v,I,R);if(Ia(I))return b(y,v,I,R);qc(y,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,I),v.return=y,y=v):(n(y,v),v=of(I,y.mode,R),v.return=y,y=v),o(y)):n(y,v)}return N}var Fo=f1(!0),p1=f1(!1),Ju=ts(null),Zu=null,_o=null,Bg=null;function Hg(){Bg=_o=Zu=null}function qg(t){var e=Ju.current;He(Ju),t._currentValue=e}function pp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ko(t,e){Zu=t,Bg=_o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Bg!==t)if(t={context:t,memoizedValue:e,next:null},_o===null){if(Zu===null)throw Error(J(308));_o=t,Zu.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var fs=null;function Wg(t){fs===null?fs=[t]:fs.push(t)}function g1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Wg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qr(t,r)}function Qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ei=!1;function Kg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qr(t,n)}return i=r.interleaved,i===null?(e.next=e,Wg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qr(t,n)}function wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pg(t,n)}}function tv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ed(t,e,n,r){var i=t.updateQueue;Ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,b=a;switch(f=e,m=n,b.tag){case 1:if(S=b.payload,typeof S=="function"){h=S.call(m,h,f);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=b.payload,f=typeof S=="function"?S.call(m,h,f):S,f==null)break e;h=Ye({},h,f);break e;case 2:Ei=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ks|=o,t.lanes=o,t.memoizedState=h}}function nv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var rc={},yr=ts(rc),Tl=ts(rc),Il=ts(rc);function ps(t){if(t===rc)throw Error(J(174));return t}function Gg(t,e){switch(je(Il,e),je(Tl,t),je(yr,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gf(e,t)}He(yr),je(yr,e)}function Uo(){He(yr),He(Tl),He(Il)}function y1(t){ps(Il.current);var e=ps(yr.current),n=Gf(e,t.type);e!==n&&(je(Tl,t),je(yr,n))}function Qg(t){Tl.current===t&&(He(yr),He(Tl))}var Ge=ts(0);function td(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zh=[];function Yg(){for(var t=0;t<Zh.length;t++)Zh[t]._workInProgressVersionPrimary=null;Zh.length=0}var _u=ri.ReactCurrentDispatcher,ef=ri.ReactCurrentBatchConfig,Cs=0,Qe=null,pt=null,wt=null,nd=!1,il=!1,Cl=0,fk=0;function Vt(){throw Error(J(321))}function Xg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function Jg(t,e,n,r,i,s){if(Cs=s,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_u.current=t===null||t.memoizedState===null?yk:vk,t=n(r,i),il){s=0;do{if(il=!1,Cl=0,25<=s)throw Error(J(301));s+=1,wt=pt=null,e.updateQueue=null,_u.current=wk,t=n(r,i)}while(il)}if(_u.current=rd,e=pt!==null&&pt.next!==null,Cs=0,wt=pt=Qe=null,nd=!1,e)throw Error(J(300));return t}function Zg(){var t=Cl!==0;return Cl=0,t}function pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Qe.memoizedState=wt=t:wt=wt.next=t,wt}function Mn(){if(pt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?Qe.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(J(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Qe.memoizedState=wt=t:wt=wt.next=t}return wt}function kl(t,e){return typeof e=="function"?e(t):e}function tf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=pt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Cs&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Qe.lanes|=d,ks|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,sr(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qe.lanes|=s,ks|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);sr(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function v1(){}function w1(t,e){var n=Qe,r=Mn(),i=e(),s=!sr(r.memoizedState,i);if(s&&(r.memoizedState=i,en=!0),r=r.queue,em(E1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Al(9,x1.bind(null,n,r,i,e),void 0,null),_t===null)throw Error(J(349));Cs&30||_1(n,e,i)}return i}function _1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function x1(t,e,n,r){e.value=n,e.getSnapshot=r,b1(e)&&S1(t)}function E1(t,e,n){return n(function(){b1(e)&&S1(t)})}function b1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch{return!0}}function S1(t){var e=Qr(t,1);e!==null&&nr(e,t,1,-1)}function rv(t){var e=pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:t},e.queue=t,t=t.dispatch=mk.bind(null,Qe,t),[e.memoizedState,t]}function Al(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T1(){return Mn().memoizedState}function xu(t,e,n,r){var i=pr();Qe.flags|=t,i.memoizedState=Al(1|e,n,void 0,r===void 0?null:r)}function qd(t,e,n,r){var i=Mn();r=r===void 0?null:r;var s=void 0;if(pt!==null){var o=pt.memoizedState;if(s=o.destroy,r!==null&&Xg(r,o.deps)){i.memoizedState=Al(e,n,s,r);return}}Qe.flags|=t,i.memoizedState=Al(1|e,n,s,r)}function iv(t,e){return xu(8390656,8,t,e)}function em(t,e){return qd(2048,8,t,e)}function I1(t,e){return qd(4,2,t,e)}function C1(t,e){return qd(4,4,t,e)}function k1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A1(t,e,n){return n=n!=null?n.concat([t]):null,qd(4,4,k1.bind(null,e,t),n)}function tm(){}function R1(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function N1(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function P1(t,e,n){return Cs&21?(sr(n,e)||(n=Vx(),Qe.lanes|=n,ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function pk(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=ef.transition;ef.transition={};try{t(!1),e()}finally{De=n,ef.transition=r}}function D1(){return Mn().memoizedState}function gk(t,e,n){var r=$i(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},L1(t))O1(e,n);else if(n=g1(t,e,n,r),n!==null){var i=Gt();nr(n,t,r,i),z1(n,e,r)}}function mk(t,e,n){var r=$i(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(L1(t))O1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,sr(a,o)){var l=e.interleaved;l===null?(i.next=i,Wg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=g1(t,e,i,r),n!==null&&(i=Gt(),nr(n,t,r,i),z1(n,e,r))}}function L1(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function O1(t,e){il=nd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pg(t,n)}}var rd={readContext:Vn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},yk={readContext:Vn,useCallback:function(t,e){return pr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:iv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xu(4194308,4,k1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xu(4194308,4,t,e)},useInsertionEffect:function(t,e){return xu(4,2,t,e)},useMemo:function(t,e){var n=pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gk.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=pr();return t={current:t},e.memoizedState=t},useState:rv,useDebugValue:tm,useDeferredValue:function(t){return pr().memoizedState=t},useTransition:function(){var t=rv(!1),e=t[0];return t=pk.bind(null,t[1]),pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=pr();if(Ke){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),_t===null)throw Error(J(349));Cs&30||_1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,iv(E1.bind(null,r,s,t),[t]),r.flags|=2048,Al(9,x1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=pr(),e=_t.identifierPrefix;if(Ke){var n=Mr,r=Vr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vk={readContext:Vn,useCallback:R1,useContext:Vn,useEffect:em,useImperativeHandle:A1,useInsertionEffect:I1,useLayoutEffect:C1,useMemo:N1,useReducer:tf,useRef:T1,useState:function(){return tf(kl)},useDebugValue:tm,useDeferredValue:function(t){var e=Mn();return P1(e,pt.memoizedState,t)},useTransition:function(){var t=tf(kl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:v1,useSyncExternalStore:w1,useId:D1,unstable_isNewReconciler:!1},wk={readContext:Vn,useCallback:R1,useContext:Vn,useEffect:em,useImperativeHandle:A1,useInsertionEffect:I1,useLayoutEffect:C1,useMemo:N1,useReducer:nf,useRef:T1,useState:function(){return nf(kl)},useDebugValue:tm,useDeferredValue:function(t){var e=Mn();return pt===null?e.memoizedState=t:P1(e,pt.memoizedState,t)},useTransition:function(){var t=nf(kl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:v1,useSyncExternalStore:w1,useId:D1,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wd={isMounted:function(t){return(t=t._reactInternals)?$s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gt(),i=$i(t),s=Br(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mi(t,s,i),e!==null&&(nr(e,t,i,r),wu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gt(),i=$i(t),s=Br(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mi(t,s,i),e!==null&&(nr(e,t,i,r),wu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gt(),r=$i(t),i=Br(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mi(t,i,r),e!==null&&(nr(e,t,r,n),wu(e,t,r))}};function sv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xl(n,r)||!xl(i,s):!0}function V1(t,e,n){var r=!1,i=Gi,s=e.contextType;return typeof s=="object"&&s!==null?s=Vn(s):(i=rn(e)?Ts:Bt.current,r=e.contextTypes,s=(r=r!=null)?jo(t,i):Gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ov(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wd.enqueueReplaceState(e,e.state,null)}function mp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Kg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vn(s):(s=rn(e)?Ts:Bt.current,i.context=jo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wd.enqueueReplaceState(i,i.state,null),ed(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bo(t,e){try{var n="",r=e;do n+=KI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function rf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _k=typeof WeakMap=="function"?WeakMap:Map;function M1(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sd||(sd=!0,Cp=r),yp(t,e)},n}function j1(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){yp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){yp(t,e),typeof r!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function av(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _k;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Lk.bind(null,t,e,n),e.then(t,t))}function lv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Mi(n,e,1))),n.lanes|=1),t)}var xk=ri.ReactCurrentOwner,en=!1;function Kt(t,e,n,r){e.child=t===null?p1(e,null,n,r):Fo(e,t.child,n,r)}function uv(t,e,n,r,i){n=n.render;var s=e.ref;return ko(e,i),r=Jg(t,e,n,r,s,i),n=Zg(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yr(t,e,i)):(Ke&&n&&$g(e),e.flags|=1,Kt(t,e,r,i),e.child)}function dv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!cm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$1(t,e,s,r,i)):(t=Tu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xl,n(o,r)&&t.ref===e.ref)return Yr(t,e,i)}return e.flags|=1,t=Fi(s,r),t.ref=e.ref,t.return=e,e.child=t}function $1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xl(s,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Yr(t,e,i)}return vp(t,e,n,r,i)}function F1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Eo,mn),mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Eo,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,je(Eo,mn),mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,je(Eo,mn),mn|=r;return Kt(t,e,i,n),e.child}function U1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vp(t,e,n,r,i){var s=rn(n)?Ts:Bt.current;return s=jo(e,s),ko(e,i),n=Jg(t,e,n,r,s,i),r=Zg(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yr(t,e,i)):(Ke&&r&&$g(e),e.flags|=1,Kt(t,e,n,i),e.child)}function hv(t,e,n,r,i){if(rn(n)){var s=!0;Qu(e)}else s=!1;if(ko(e,i),e.stateNode===null)Eu(t,e),V1(e,n,r),mp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vn(u):(u=rn(n)?Ts:Bt.current,u=jo(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ov(e,o,r,u),Ei=!1;var f=e.memoizedState;o.state=f,ed(e,r,o,i),l=e.memoizedState,a!==r||f!==l||nn.current||Ei?(typeof d=="function"&&(gp(e,n,d,r),l=e.memoizedState),(a=Ei||sv(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,m1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Gn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vn(l):(l=rn(n)?Ts:Bt.current,l=jo(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&ov(e,o,r,l),Ei=!1,f=e.memoizedState,o.state=f,ed(e,r,o,i);var S=e.memoizedState;a!==h||f!==S||nn.current||Ei?(typeof m=="function"&&(gp(e,n,m,r),S=e.memoizedState),(u=Ei||sv(e,n,u,r,f,S,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return wp(t,e,n,r,s,i)}function wp(t,e,n,r,i,s){U1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Xy(e,n,!1),Yr(t,e,s);r=e.stateNode,xk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fo(e,t.child,null,s),e.child=Fo(e,null,a,s)):Kt(t,e,a,s),e.memoizedState=r.state,i&&Xy(e,n,!0),e.child}function B1(t){var e=t.stateNode;e.pendingContext?Yy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yy(t,e.context,!1),Gg(t,e.containerInfo)}function fv(t,e,n,r,i){return $o(),Ug(i),e.flags|=256,Kt(t,e,n,r),e.child}var _p={dehydrated:null,treeContext:null,retryLane:0};function xp(t){return{baseLanes:t,cachePool:null,transitions:null}}function H1(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(Ge,i&1),t===null)return fp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qd(o,r,0,null),t=xs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xp(n),e.memoizedState=_p,t):nm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ek(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fi(a,s):(s=xs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_p,r}return s=t.child,t=s.sibling,r=Fi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nm(t,e){return e=Qd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wc(t,e,n,r){return r!==null&&Ug(r),Fo(e,t.child,null,n),t=nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ek(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=rf(Error(J(422))),Wc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qd({mode:"visible",children:r.children},i,0,null),s=xs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fo(e,t.child,null,o),e.child.memoizedState=xp(o),e.memoizedState=_p,s);if(!(e.mode&1))return Wc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(J(419)),r=rf(s,r,void 0),Wc(t,e,o,r)}if(a=(o&t.childLanes)!==0,en||a){if(r=_t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qr(t,i),nr(r,t,i,-1))}return lm(),r=rf(Error(J(421))),Wc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ok.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,wn=Vi(i.nextSibling),_n=e,Ke=!0,Xn=null,t!==null&&(Rn[Nn++]=Vr,Rn[Nn++]=Mr,Rn[Nn++]=Is,Vr=t.id,Mr=t.overflow,Is=e),e=nm(e,r.children),e.flags|=4096,e)}function pv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pp(t.return,e,n)}function sf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function q1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pv(t,n,e);else if(t.tag===19)pv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&td(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),sf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&td(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}sf(e,!0,n,null,s);break;case"together":sf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Eu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bk(t,e,n){switch(e.tag){case 3:B1(e),$o();break;case 5:y1(e);break;case 1:rn(e.type)&&Qu(e);break;case 4:Gg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(Ju,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?H1(t,e,n):(je(Ge,Ge.current&1),t=Yr(t,e,n),t!==null?t.sibling:null);je(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return q1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,F1(t,e,n)}return Yr(t,e,n)}var W1,Ep,K1,G1;W1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ep=function(){};K1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ps(yr.current);var s=null;switch(n){case"input":i=Hf(t,i),r=Hf(t,r),s=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),s=[];break;case"textarea":i=Kf(t,i),r=Kf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ku)}Qf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(pl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ue("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};G1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pa(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Sk(t,e,n){var r=e.pendingProps;switch(Fg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return rn(e.type)&&Gu(),Mt(e),null;case 3:return r=e.stateNode,Uo(),He(nn),He(Bt),Yg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Rp(Xn),Xn=null))),Ep(t,e),Mt(e),null;case 5:Qg(e);var i=ps(Il.current);if(n=e.type,t!==null&&e.stateNode!=null)K1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Mt(e),null}if(t=ps(yr.current),Hc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[gr]=e,r[Sl]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<Ba.length;i++)Ue(Ba[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":by(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":Ty(r,s),Ue("invalid",r)}Qf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bc(r.textContent,a,t),i=["children",""+a]):pl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Oc(r),Sy(r,s,!0);break;case"textarea":Oc(r),Iy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ku)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ex(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gr]=e,t[Sl]=r,W1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yf(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ba.length;i++)Ue(Ba[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":by(t,r),i=Hf(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":Ty(t,r),i=Kf(t,r),Ue("invalid",t);break;default:i=r}Qf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Tx(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bx(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gl(t,l):typeof l=="number"&&gl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ue("scroll",t):l!=null&&Ig(t,s,l,o))}switch(n){case"input":Oc(t),Sy(t,r,!1);break;case"textarea":Oc(t),Iy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ki(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?So(t,!!r.multiple,s,!1):r.defaultValue!=null&&So(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ku)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)G1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=ps(Il.current),ps(yr.current),Hc(e)){if(r=e.stateNode,n=e.memoizedProps,r[gr]=e,(s=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:Bc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gr]=e,e.stateNode=r}return Mt(e),null;case 13:if(He(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&wn!==null&&e.mode&1&&!(e.flags&128))h1(),$o(),e.flags|=98560,s=!1;else if(s=Hc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[gr]=e}else $o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),s=!1}else Xn!==null&&(Rp(Xn),Xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?gt===0&&(gt=3):lm())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Uo(),Ep(t,e),t===null&&El(e.stateNode.containerInfo),Mt(e),null;case 10:return qg(e.type._context),Mt(e),null;case 17:return rn(e.type)&&Gu(),Mt(e),null;case 19:if(He(Ge),s=e.memoizedState,s===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Pa(s,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=td(t),o!==null){for(e.flags|=128,Pa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&it()>Ho&&(e.flags|=128,r=!0,Pa(s,!1),e.lanes=4194304)}else{if(!r)if(t=td(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ke)return Mt(e),null}else 2*it()-s.renderingStartTime>Ho&&n!==1073741824&&(e.flags|=128,r=!0,Pa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=it(),e.sibling=null,n=Ge.current,je(Ge,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function Tk(t,e){switch(Fg(e),e.tag){case 1:return rn(e.type)&&Gu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Uo(),He(nn),He(Bt),Yg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qg(e),null;case 13:if(He(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));$o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(Ge),null;case 4:return Uo(),null;case 10:return qg(e.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var Kc=!1,Ft=!1,Ik=typeof WeakSet=="function"?WeakSet:Set,re=null;function xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function bp(t,e,n){try{n()}catch(r){et(t,e,r)}}var gv=!1;function Ck(t,e){if(op=Hu,t=Zx(),jg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ap={focusedElem:t,selectionRange:n},Hu=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var b=S.memoizedProps,N=S.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?b:Gn(e.type,b),N);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(R){et(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return S=gv,gv=!1,S}function sl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bp(e,n,s)}i=i.next}while(i!==r)}}function Kd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q1(t){var e=t.alternate;e!==null&&(t.alternate=null,Q1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[Sl],delete e[up],delete e[ck],delete e[uk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Y1(t){return t.tag===5||t.tag===3||t.tag===4}function mv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Y1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ku));else if(r!==4&&(t=t.child,t!==null))for(Tp(t,e,n),t=t.sibling;t!==null;)Tp(t,e,n),t=t.sibling}function Ip(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ip(t,e,n),t=t.sibling;t!==null;)Ip(t,e,n),t=t.sibling}var Tt=null,Qn=!1;function vi(t,e,n){for(n=n.child;n!==null;)X1(t,e,n),n=n.sibling}function X1(t,e,n){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(jd,n)}catch{}switch(n.tag){case 5:Ft||xo(n,e);case 6:var r=Tt,i=Qn;Tt=null,vi(t,e,n),Tt=r,Qn=i,Tt!==null&&(Qn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(Qn?(t=Tt,n=n.stateNode,t.nodeType===8?Xh(t.parentNode,n):t.nodeType===1&&Xh(t,n),wl(t)):Xh(Tt,n.stateNode));break;case 4:r=Tt,i=Qn,Tt=n.stateNode.containerInfo,Qn=!0,vi(t,e,n),Tt=r,Qn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bp(n,e,o),i=i.next}while(i!==r)}vi(t,e,n);break;case 1:if(!Ft&&(xo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){et(n,e,a)}vi(t,e,n);break;case 21:vi(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,vi(t,e,n),Ft=r):vi(t,e,n);break;default:vi(t,e,n)}}function yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ik),e.forEach(function(r){var i=zk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tt=a.stateNode,Qn=!1;break e;case 3:Tt=a.stateNode.containerInfo,Qn=!0;break e;case 4:Tt=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(Tt===null)throw Error(J(160));X1(s,o,i),Tt=null,Qn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){et(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J1(e,t),e=e.sibling}function J1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),fr(t),r&4){try{sl(3,t,t.return),Kd(3,t)}catch(b){et(t,t.return,b)}try{sl(5,t,t.return)}catch(b){et(t,t.return,b)}}break;case 1:Kn(e,t),fr(t),r&512&&n!==null&&xo(n,n.return);break;case 5:if(Kn(e,t),fr(t),r&512&&n!==null&&xo(n,n.return),t.flags&32){var i=t.stateNode;try{gl(i,"")}catch(b){et(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_x(i,s),Yf(a,o);var u=Yf(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Tx(i,h):d==="dangerouslySetInnerHTML"?bx(i,h):d==="children"?gl(i,h):Ig(i,d,h,u)}switch(a){case"input":qf(i,s);break;case"textarea":xx(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?So(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?So(i,!!s.multiple,s.defaultValue,!0):So(i,!!s.multiple,s.multiple?[]:"",!1))}i[Sl]=s}catch(b){et(t,t.return,b)}}break;case 6:if(Kn(e,t),fr(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){et(t,t.return,b)}}break;case 3:if(Kn(e,t),fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wl(e.containerInfo)}catch(b){et(t,t.return,b)}break;case 4:Kn(e,t),fr(t);break;case 13:Kn(e,t),fr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sm=it())),r&4&&yv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(u=Ft)||d,Kn(e,t),Ft=u):Kn(e,t),fr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(re=t,d=t.child;d!==null;){for(h=re=d;re!==null;){switch(f=re,m=f.child,f.tag){case 0:case 11:case 14:case 15:sl(4,f,f.return);break;case 1:xo(f,f.return);var S=f.stateNode;if(typeof S.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(b){et(r,n,b)}}break;case 5:xo(f,f.return);break;case 22:if(f.memoizedState!==null){wv(h);continue}}m!==null?(m.return=f,re=m):wv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Sx("display",o))}catch(b){et(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){et(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kn(e,t),fr(t),r&4&&yv(t);break;case 21:break;default:Kn(e,t),fr(t)}}function fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Y1(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gl(i,""),r.flags&=-33);var s=mv(t);Ip(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=mv(t);Tp(t,a,o);break;default:throw Error(J(161))}}catch(l){et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kk(t,e,n){re=t,Z1(t)}function Z1(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Kc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=Kc;var u=Ft;if(Kc=o,(Ft=l)&&!u)for(re=i;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?_v(i):l!==null?(l.return=o,re=l):_v(i);for(;s!==null;)re=s,Z1(s),s=s.sibling;re=i,Kc=a,Ft=u}vv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):vv(t)}}function vv(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Kd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&wl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Ft||e.flags&512&&Sp(e)}catch(f){et(e,e.return,f)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function wv(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function _v(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kd(4,e)}catch(l){et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){et(e,i,l)}}var s=e.return;try{Sp(e)}catch(l){et(e,s,l)}break;case 5:var o=e.return;try{Sp(e)}catch(l){et(e,o,l)}}}catch(l){et(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var Ak=Math.ceil,id=ri.ReactCurrentDispatcher,rm=ri.ReactCurrentOwner,On=ri.ReactCurrentBatchConfig,Ce=0,_t=null,at=null,kt=0,mn=0,Eo=ts(0),gt=0,Rl=null,ks=0,Gd=0,im=0,ol=null,Zt=null,sm=0,Ho=1/0,Lr=null,sd=!1,Cp=null,ji=null,Gc=!1,Pi=null,od=0,al=0,kp=null,bu=-1,Su=0;function Gt(){return Ce&6?it():bu!==-1?bu:bu=it()}function $i(t){return t.mode&1?Ce&2&&kt!==0?kt&-kt:hk.transition!==null?(Su===0&&(Su=Vx()),Su):(t=De,t!==0||(t=window.event,t=t===void 0?16:Hx(t.type)),t):1}function nr(t,e,n,r){if(50<al)throw al=0,kp=null,Error(J(185));ec(t,n,r),(!(Ce&2)||t!==_t)&&(t===_t&&(!(Ce&2)&&(Gd|=n),gt===4&&Ii(t,kt)),sn(t,r),n===1&&Ce===0&&!(e.mode&1)&&(Ho=it()+500,Hd&&ns()))}function sn(t,e){var n=t.callbackNode;hC(t,e);var r=Bu(t,t===_t?kt:0);if(r===0)n!==null&&Ay(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ay(n),e===1)t.tag===0?dk(xv.bind(null,t)):c1(xv.bind(null,t)),ak(function(){!(Ce&6)&&ns()}),n=null;else{switch(Mx(r)){case 1:n=Ng;break;case 4:n=Ox;break;case 16:n=Uu;break;case 536870912:n=zx;break;default:n=Uu}n=aE(n,eE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eE(t,e){if(bu=-1,Su=0,Ce&6)throw Error(J(327));var n=t.callbackNode;if(Ao()&&t.callbackNode!==n)return null;var r=Bu(t,t===_t?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ad(t,r);else{e=r;var i=Ce;Ce|=2;var s=nE();(_t!==t||kt!==e)&&(Lr=null,Ho=it()+500,_s(t,e));do try{Pk();break}catch(a){tE(t,a)}while(!0);Hg(),id.current=s,Ce=i,at!==null?e=0:(_t=null,kt=0,e=gt)}if(e!==0){if(e===2&&(i=tp(t),i!==0&&(r=i,e=Ap(t,i))),e===1)throw n=Rl,_s(t,0),Ii(t,r),sn(t,it()),n;if(e===6)Ii(t,r);else{if(i=t.current.alternate,!(r&30)&&!Rk(i)&&(e=ad(t,r),e===2&&(s=tp(t),s!==0&&(r=s,e=Ap(t,s))),e===1))throw n=Rl,_s(t,0),Ii(t,r),sn(t,it()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:cs(t,Zt,Lr);break;case 3:if(Ii(t,r),(r&130023424)===r&&(e=sm+500-it(),10<e)){if(Bu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cp(cs.bind(null,t,Zt,Lr),e);break}cs(t,Zt,Lr);break;case 4:if(Ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-tr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ak(r/1960))-r,10<r){t.timeoutHandle=cp(cs.bind(null,t,Zt,Lr),r);break}cs(t,Zt,Lr);break;case 5:cs(t,Zt,Lr);break;default:throw Error(J(329))}}}return sn(t,it()),t.callbackNode===n?eE.bind(null,t):null}function Ap(t,e){var n=ol;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=ad(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Rp(e)),t}function Rp(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function Rk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!sr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ii(t,e){for(e&=~im,e&=~Gd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function xv(t){if(Ce&6)throw Error(J(327));Ao();var e=Bu(t,0);if(!(e&1))return sn(t,it()),null;var n=ad(t,e);if(t.tag!==0&&n===2){var r=tp(t);r!==0&&(e=r,n=Ap(t,r))}if(n===1)throw n=Rl,_s(t,0),Ii(t,e),sn(t,it()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,Zt,Lr),sn(t,it()),null}function om(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Ho=it()+500,Hd&&ns())}}function As(t){Pi!==null&&Pi.tag===0&&!(Ce&6)&&Ao();var e=Ce;Ce|=1;var n=On.transition,r=De;try{if(On.transition=null,De=1,t)return t()}finally{De=r,On.transition=n,Ce=e,!(Ce&6)&&ns()}}function am(){mn=Eo.current,He(Eo)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ok(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(Fg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gu();break;case 3:Uo(),He(nn),He(Bt),Yg();break;case 5:Qg(r);break;case 4:Uo();break;case 13:He(Ge);break;case 19:He(Ge);break;case 10:qg(r.type._context);break;case 22:case 23:am()}n=n.return}if(_t=t,at=t=Fi(t.current,null),kt=mn=e,gt=0,Rl=null,im=Gd=ks=0,Zt=ol=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}fs=null}return t}function tE(t,e){do{var n=at;try{if(Hg(),_u.current=rd,nd){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nd=!1}if(Cs=0,wt=pt=Qe=null,il=!1,Cl=0,rm.current=null,n===null||n.return===null){gt=1,Rl=e,at=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=lv(o);if(m!==null){m.flags&=-257,cv(m,o,a,s,e),m.mode&1&&av(s,u,e),e=m,l=u;var S=e.updateQueue;if(S===null){var b=new Set;b.add(l),e.updateQueue=b}else S.add(l);break e}else{if(!(e&1)){av(s,u,e),lm();break e}l=Error(J(426))}}else if(Ke&&a.mode&1){var N=lv(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),cv(N,o,a,s,e),Ug(Bo(l,a));break e}}s=l=Bo(l,a),gt!==4&&(gt=2),ol===null?ol=[s]:ol.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=M1(s,l,e);tv(s,y);break e;case 1:a=l;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ji===null||!ji.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=j1(s,a,e);tv(s,R);break e}}s=s.return}while(s!==null)}iE(n)}catch(O){e=O,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function nE(){var t=id.current;return id.current=rd,t===null?rd:t}function lm(){(gt===0||gt===3||gt===2)&&(gt=4),_t===null||!(ks&268435455)&&!(Gd&268435455)||Ii(_t,kt)}function ad(t,e){var n=Ce;Ce|=2;var r=nE();(_t!==t||kt!==e)&&(Lr=null,_s(t,e));do try{Nk();break}catch(i){tE(t,i)}while(!0);if(Hg(),Ce=n,id.current=r,at!==null)throw Error(J(261));return _t=null,kt=0,gt}function Nk(){for(;at!==null;)rE(at)}function Pk(){for(;at!==null&&!rC();)rE(at)}function rE(t){var e=oE(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?iE(t):at=e,rm.current=null}function iE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Tk(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,at=null;return}}else if(n=Sk(n,e,mn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);gt===0&&(gt=5)}function cs(t,e,n){var r=De,i=On.transition;try{On.transition=null,De=1,Dk(t,e,n,r)}finally{On.transition=i,De=r}return null}function Dk(t,e,n,r){do Ao();while(Pi!==null);if(Ce&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(fC(t,s),t===_t&&(at=_t=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gc||(Gc=!0,aE(Uu,function(){return Ao(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=On.transition,On.transition=null;var o=De;De=1;var a=Ce;Ce|=4,rm.current=null,Ck(t,n),J1(n,t),ZC(ap),Hu=!!op,ap=op=null,t.current=n,kk(n),iC(),Ce=a,De=o,On.transition=s}else t.current=n;if(Gc&&(Gc=!1,Pi=t,od=i),s=t.pendingLanes,s===0&&(ji=null),aC(n.stateNode),sn(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(sd)throw sd=!1,t=Cp,Cp=null,t;return od&1&&t.tag!==0&&Ao(),s=t.pendingLanes,s&1?t===kp?al++:(al=0,kp=t):al=0,ns(),null}function Ao(){if(Pi!==null){var t=Mx(od),e=On.transition,n=De;try{if(On.transition=null,De=16>t?16:t,Pi===null)var r=!1;else{if(t=Pi,Pi=null,od=0,Ce&6)throw Error(J(331));var i=Ce;for(Ce|=4,re=t.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(re=u;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:sl(8,d,s)}var h=d.child;if(h!==null)h.return=d,re=h;else for(;re!==null;){d=re;var f=d.sibling,m=d.return;if(Q1(d),d===u){re=null;break}if(f!==null){f.return=m,re=f;break}re=m}}}var S=s.alternate;if(S!==null){var b=S.child;if(b!==null){S.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sl(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,re=y;break e}re=s.return}}var v=t.current;for(re=v;re!==null;){o=re;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,re=I;else e:for(o=v;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kd(9,a)}}catch(O){et(a,a.return,O)}if(a===o){re=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,re=R;break e}re=a.return}}if(Ce=i,ns(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(jd,t)}catch{}r=!0}return r}finally{De=n,On.transition=e}}return!1}function Ev(t,e,n){e=Bo(n,e),e=M1(t,e,1),t=Mi(t,e,1),e=Gt(),t!==null&&(ec(t,1,e),sn(t,e))}function et(t,e,n){if(t.tag===3)Ev(t,t,n);else for(;e!==null;){if(e.tag===3){Ev(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ji===null||!ji.has(r))){t=Bo(n,t),t=j1(e,t,1),e=Mi(e,t,1),t=Gt(),e!==null&&(ec(e,1,t),sn(e,t));break}}e=e.return}}function Lk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gt(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(kt&n)===n&&(gt===4||gt===3&&(kt&130023424)===kt&&500>it()-sm?_s(t,0):im|=n),sn(t,e)}function sE(t,e){e===0&&(t.mode&1?(e=Mc,Mc<<=1,!(Mc&130023424)&&(Mc=4194304)):e=1);var n=Gt();t=Qr(t,e),t!==null&&(ec(t,e,n),sn(t,n))}function Ok(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sE(t,n)}function zk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),sE(t,n)}var oE;oE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,bk(t,e,n);en=!!(t.flags&131072)}else en=!1,Ke&&e.flags&1048576&&u1(e,Xu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Eu(t,e),t=e.pendingProps;var i=jo(e,Bt.current);ko(e,n),i=Jg(null,e,r,t,i,n);var s=Zg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(s=!0,Qu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kg(e),i.updater=Wd,e.stateNode=i,i._reactInternals=e,mp(e,r,t,n),e=wp(null,e,r,!0,s,n)):(e.tag=0,Ke&&s&&$g(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Eu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Mk(r),t=Gn(r,t),i){case 0:e=vp(null,e,r,t,n);break e;case 1:e=hv(null,e,r,t,n);break e;case 11:e=uv(null,e,r,t,n);break e;case 14:e=dv(null,e,r,Gn(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),vp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),hv(t,e,r,i,n);case 3:e:{if(B1(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,m1(t,e),ed(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bo(Error(J(423)),e),e=fv(t,e,r,n,i);break e}else if(r!==i){i=Bo(Error(J(424)),e),e=fv(t,e,r,n,i);break e}else for(wn=Vi(e.stateNode.containerInfo.firstChild),_n=e,Ke=!0,Xn=null,n=p1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($o(),r===i){e=Yr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return y1(e),t===null&&fp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,lp(r,i)?o=null:s!==null&&lp(r,s)&&(e.flags|=32),U1(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&fp(e),null;case 13:return H1(t,e,n);case 4:return Gg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fo(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),uv(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,je(Ju,r._currentValue),r._currentValue=o,s!==null)if(sr(s.value,o)){if(s.children===i.children&&!nn.current){e=Yr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Br(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),pp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),pp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ko(e,n),i=Vn(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=Gn(r,e.pendingProps),i=Gn(r.type,i),dv(t,e,r,i,n);case 15:return $1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),Eu(t,e),e.tag=1,rn(r)?(t=!0,Qu(e)):t=!1,ko(e,n),V1(e,r,i),mp(e,r,i,n),wp(null,e,r,!0,t,n);case 19:return q1(t,e,n);case 22:return F1(t,e,n)}throw Error(J(156,e.tag))};function aE(t,e){return Lx(t,e)}function Vk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new Vk(t,e,n,r)}function cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mk(t){if(typeof t=="function")return cm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kg)return 11;if(t===Ag)return 14}return 2}function Fi(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")cm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ho:return xs(n.children,i,s,e);case Cg:o=8,i|=8;break;case $f:return t=Dn(12,n,e,i|2),t.elementType=$f,t.lanes=s,t;case Ff:return t=Dn(13,n,e,i),t.elementType=Ff,t.lanes=s,t;case Uf:return t=Dn(19,n,e,i),t.elementType=Uf,t.lanes=s,t;case yx:return Qd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gx:o=10;break e;case mx:o=9;break e;case kg:o=11;break e;case Ag:o=14;break e;case xi:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Dn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xs(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function Qd(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=yx,t.lanes=n,t.stateNode={isHidden:!1},t}function of(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function af(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$h(0),this.expirationTimes=$h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$h(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function um(t,e,n,r,i,s,o,a,l){return t=new jk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kg(s),t}function $k(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lE(t){if(!t)return Gi;t=t._reactInternals;e:{if($s(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(rn(n))return l1(t,n,e)}return e}function cE(t,e,n,r,i,s,o,a,l){return t=um(n,r,!0,t,i,s,o,a,l),t.context=lE(null),n=t.current,r=Gt(),i=$i(n),s=Br(r,i),s.callback=e??null,Mi(n,s,i),t.current.lanes=i,ec(t,i,r),sn(t,r),t}function Yd(t,e,n,r){var i=e.current,s=Gt(),o=$i(i);return n=lE(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mi(i,e,o),t!==null&&(nr(t,i,o,s),wu(t,i,o)),o}function ld(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dm(t,e){bv(t,e),(t=t.alternate)&&bv(t,e)}function Fk(){return null}var uE=typeof reportError=="function"?reportError:function(t){console.error(t)};function hm(t){this._internalRoot=t}Xd.prototype.render=hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Yd(t,e,null,null)};Xd.prototype.unmount=hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;As(function(){Yd(null,t,null,null)}),e[Gr]=null}};function Xd(t){this._internalRoot=t}Xd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ti.length&&e!==0&&e<Ti[n].priority;n++);Ti.splice(n,0,t),n===0&&Bx(t)}};function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sv(){}function Uk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ld(o);s.call(u)}}var o=cE(e,r,t,0,null,!1,!1,"",Sv);return t._reactRootContainer=o,t[Gr]=o.current,El(t.nodeType===8?t.parentNode:t),As(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ld(l);a.call(u)}}var l=um(t,0,!1,null,null,!1,!1,"",Sv);return t._reactRootContainer=l,t[Gr]=l.current,El(t.nodeType===8?t.parentNode:t),As(function(){Yd(e,l,n,r)}),l}function Zd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ld(o);a.call(l)}}Yd(e,o,t,i)}else o=Uk(n,e,t,i,r);return ld(o)}jx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ua(e.pendingLanes);n!==0&&(Pg(e,n|1),sn(e,it()),!(Ce&6)&&(Ho=it()+500,ns()))}break;case 13:As(function(){var r=Qr(t,1);if(r!==null){var i=Gt();nr(r,t,1,i)}}),dm(t,1)}};Dg=function(t){if(t.tag===13){var e=Qr(t,134217728);if(e!==null){var n=Gt();nr(e,t,134217728,n)}dm(t,134217728)}};$x=function(t){if(t.tag===13){var e=$i(t),n=Qr(t,e);if(n!==null){var r=Gt();nr(n,t,e,r)}dm(t,e)}};Fx=function(){return De};Ux=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};Jf=function(t,e,n){switch(e){case"input":if(qf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bd(r);if(!i)throw Error(J(90));wx(r),qf(r,i)}}}break;case"textarea":xx(t,n);break;case"select":e=n.value,e!=null&&So(t,!!n.multiple,e,!1)}};kx=om;Ax=As;var Bk={usingClientEntryPoint:!1,Events:[nc,mo,Bd,Ix,Cx,om]},Da={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hk={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Px(t),t===null?null:t.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||Fk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{jd=Qc.inject(Hk),mr=Qc}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bk;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(e))throw Error(J(200));return $k(t,e,null,n)};Sn.createRoot=function(t,e){if(!fm(t))throw Error(J(299));var n=!1,r="",i=uE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=um(t,1,!1,null,null,n,!1,r,i),t[Gr]=e.current,El(t.nodeType===8?t.parentNode:t),new hm(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Px(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return As(t)};Sn.hydrate=function(t,e,n){if(!Jd(e))throw Error(J(200));return Zd(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!fm(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=uE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cE(e,null,t,1,n??null,i,!1,s,o),t[Gr]=e.current,El(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xd(e)};Sn.render=function(t,e,n){if(!Jd(e))throw Error(J(200));return Zd(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!Jd(t))throw Error(J(40));return t._reactRootContainer?(As(function(){Zd(null,null,t,!1,function(){t._reactRootContainer=null,t[Gr]=null})}),!0):!1};Sn.unstable_batchedUpdates=om;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jd(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Zd(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function dE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dE)}catch(t){console.error(t)}}dE(),dx.exports=Sn;var Nl=dx.exports,Tv=Nl;Mf.createRoot=Tv.createRoot,Mf.hydrateRoot=Tv.hydrateRoot;function Et(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Et(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var hE={exports:{}},fE={},pE={exports:{}},gE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qo=L;function qk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wk=typeof Object.is=="function"?Object.is:qk,Kk=qo.useState,Gk=qo.useEffect,Qk=qo.useLayoutEffect,Yk=qo.useDebugValue;function Xk(t,e){var n=e(),r=Kk({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Qk(function(){i.value=n,i.getSnapshot=e,lf(i)&&s({inst:i})},[t,n,e]),Gk(function(){return lf(i)&&s({inst:i}),t(function(){lf(i)&&s({inst:i})})},[t]),Yk(n),n}function lf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wk(t,n)}catch{return!0}}function Jk(t,e){return e()}var Zk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jk:Xk;gE.useSyncExternalStore=qo.useSyncExternalStore!==void 0?qo.useSyncExternalStore:Zk;pE.exports=gE;var eA=pE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh=L,tA=eA;function nA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rA=typeof Object.is=="function"?Object.is:nA,iA=tA.useSyncExternalStore,sA=eh.useRef,oA=eh.useEffect,aA=eh.useMemo,lA=eh.useDebugValue;fE.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=sA(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=aA(function(){function l(m){if(!u){if(u=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var S=o.value;if(i(S,m))return h=S}return h=m}if(S=h,rA(d,m))return S;var b=r(m);return i!==void 0&&i(S,b)?(d=m,S):(d=m,h=b)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=iA(t,s[0],s[1]);return oA(function(){o.hasValue=!0,o.value=a},[a]),lA(a),a};hE.exports=fE;var cA=hE.exports;const uA=Z_(cA),dA={},Iv=t=>{let e;const n=new Set,r=(d,h)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(S=>S(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(dA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,l);return l},hA=t=>t?Iv(t):Iv,{useDebugValue:fA}=W,{useSyncExternalStoreWithSelector:pA}=uA,gA=t=>t;function mE(t,e=gA,n){const r=pA(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return fA(r),r}const Cv=(t,e)=>{const n=hA(t),r=(i,s=e)=>mE(n,i,s);return Object.assign(r,n),r},mA=(t,e)=>t?Cv(t,e):Cv;function xt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var yA={value:()=>{}};function th(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Iu(n)}function Iu(t){this._=t}function vA(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Iu.prototype=th.prototype={constructor:Iu,on:function(t,e){var n=this._,r=vA(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=wA(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=kv(n[i],t.name,e);else if(e==null)for(i in n)n[i]=kv(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Iu(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function wA(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function kv(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=yA,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Np="http://www.w3.org/1999/xhtml";const Av={svg:"http://www.w3.org/2000/svg",xhtml:Np,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nh(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Av.hasOwnProperty(e)?{space:Av[e],local:t}:t}function _A(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Np&&e.documentElement.namespaceURI===Np?e.createElement(t):e.createElementNS(n,t)}}function xA(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function yE(t){var e=nh(t);return(e.local?xA:_A)(e)}function EA(){}function pm(t){return t==null?EA:function(){return this.querySelector(t)}}function bA(t){typeof t!="function"&&(t=pm(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,u,d=0;d<o;++d)(l=s[d])&&(u=t.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),a[d]=u);return new bn(r,this._parents)}function SA(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function TA(){return[]}function vE(t){return t==null?TA:function(){return this.querySelectorAll(t)}}function IA(t){return function(){return SA(t.apply(this,arguments))}}function CA(t){typeof t=="function"?t=IA(t):t=vE(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new bn(r,i)}function wE(t){return function(){return this.matches(t)}}function _E(t){return function(e){return e.matches(t)}}var kA=Array.prototype.find;function AA(t){return function(){return kA.call(this.children,t)}}function RA(){return this.firstElementChild}function NA(t){return this.select(t==null?RA:AA(typeof t=="function"?t:_E(t)))}var PA=Array.prototype.filter;function DA(){return Array.from(this.children)}function LA(t){return function(){return PA.call(this.children,t)}}function OA(t){return this.selectAll(t==null?DA:LA(typeof t=="function"?t:_E(t)))}function zA(t){typeof t!="function"&&(t=wE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new bn(r,this._parents)}function xE(t){return new Array(t.length)}function VA(){return new bn(this._enter||this._groups.map(xE),this._parents)}function cd(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}cd.prototype={constructor:cd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function MA(t){return function(){return t}}function jA(t,e,n,r,i,s){for(var o=0,a,l=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new cd(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function $A(t,e,n,r,i,s,o){var a,l,u=new Map,d=e.length,h=s.length,f=new Array(d),m;for(a=0;a<d;++a)(l=e[a])&&(f[a]=m=o.call(l,l.__data__,a,e)+"",u.has(m)?i[a]=l:u.set(m,l));for(a=0;a<h;++a)m=o.call(t,s[a],a,s)+"",(l=u.get(m))?(r[a]=l,l.__data__=s[a],u.delete(m)):n[a]=new cd(t,s[a]);for(a=0;a<d;++a)(l=e[a])&&u.get(f[a])===l&&(i[a]=l)}function FA(t){return t.__data__}function UA(t,e){if(!arguments.length)return Array.from(this,FA);var n=e?$A:jA,r=this._parents,i=this._groups;typeof t!="function"&&(t=MA(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var d=r[u],h=i[u],f=h.length,m=BA(t.call(d,d&&d.__data__,u,r)),S=m.length,b=a[u]=new Array(S),N=o[u]=new Array(S),y=l[u]=new Array(f);n(d,h,b,N,y,m,e);for(var v=0,I=0,R,O;v<S;++v)if(R=b[v]){for(v>=I&&(I=v+1);!(O=N[I])&&++I<S;);R._next=O||null}}return o=new bn(o,r),o._enter=a,o._exit=l,o}function BA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function HA(){return new bn(this._exit||this._groups.map(xE),this._parents)}function qA(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function WA(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],d=r[l],h=u.length,f=a[l]=new Array(h),m,S=0;S<h;++S)(m=u[S]||d[S])&&(f[S]=m);for(;l<i;++l)a[l]=n[l];return new bn(a,this._parents)}function KA(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function GA(t){t||(t=QA);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,d=0;d<a;++d)(u=o[d])&&(l[d]=u);l.sort(e)}return new bn(i,this._parents).order()}function QA(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function YA(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function XA(){return Array.from(this)}function JA(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function ZA(){let t=0;for(const e of this)++t;return t}function eR(){return!this.node()}function tR(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function nR(t){return function(){this.removeAttribute(t)}}function rR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iR(t,e){return function(){this.setAttribute(t,e)}}function sR(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function oR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function aR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function lR(t,e){var n=nh(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?rR:nR:typeof e=="function"?n.local?aR:oR:n.local?sR:iR)(n,e))}function EE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function cR(t){return function(){this.style.removeProperty(t)}}function uR(t,e,n){return function(){this.style.setProperty(t,e,n)}}function dR(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function hR(t,e,n){return arguments.length>1?this.each((e==null?cR:typeof e=="function"?dR:uR)(t,e,n??"")):Wo(this.node(),t)}function Wo(t,e){return t.style.getPropertyValue(e)||EE(t).getComputedStyle(t,null).getPropertyValue(e)}function fR(t){return function(){delete this[t]}}function pR(t,e){return function(){this[t]=e}}function gR(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function mR(t,e){return arguments.length>1?this.each((e==null?fR:typeof e=="function"?gR:pR)(t,e)):this.node()[t]}function bE(t){return t.trim().split(/^|\s+/)}function gm(t){return t.classList||new SE(t)}function SE(t){this._node=t,this._names=bE(t.getAttribute("class")||"")}SE.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function TE(t,e){for(var n=gm(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function IE(t,e){for(var n=gm(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function yR(t){return function(){TE(this,t)}}function vR(t){return function(){IE(this,t)}}function wR(t,e){return function(){(e.apply(this,arguments)?TE:IE)(this,t)}}function _R(t,e){var n=bE(t+"");if(arguments.length<2){for(var r=gm(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?wR:e?yR:vR)(n,e))}function xR(){this.textContent=""}function ER(t){return function(){this.textContent=t}}function bR(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function SR(t){return arguments.length?this.each(t==null?xR:(typeof t=="function"?bR:ER)(t)):this.node().textContent}function TR(){this.innerHTML=""}function IR(t){return function(){this.innerHTML=t}}function CR(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function kR(t){return arguments.length?this.each(t==null?TR:(typeof t=="function"?CR:IR)(t)):this.node().innerHTML}function AR(){this.nextSibling&&this.parentNode.appendChild(this)}function RR(){return this.each(AR)}function NR(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function PR(){return this.each(NR)}function DR(t){var e=typeof t=="function"?t:yE(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function LR(){return null}function OR(t,e){var n=typeof t=="function"?t:yE(t),r=e==null?LR:typeof e=="function"?e:pm(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zR(){var t=this.parentNode;t&&t.removeChild(this)}function VR(){return this.each(zR)}function MR(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jR(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $R(t){return this.select(t?jR:MR)}function FR(t){return arguments.length?this.property("__data__",t):this.node().__data__}function UR(t){return function(e){t.call(this,e,this.__data__)}}function BR(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function HR(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function qR(t,e,n){return function(){var r=this.__on,i,s=UR(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function WR(t,e,n){var r=BR(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,d;l<u;++l)for(i=0,d=a[l];i<s;++i)if((o=r[i]).type===d.type&&o.name===d.name)return d.value}return}for(a=e?qR:HR,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function CE(t,e,n){var r=EE(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function KR(t,e){return function(){return CE(this,t,e)}}function GR(t,e){return function(){return CE(this,t,e.apply(this,arguments))}}function QR(t,e){return this.each((typeof e=="function"?GR:KR)(t,e))}function*YR(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var kE=[null];function bn(t,e){this._groups=t,this._parents=e}function ic(){return new bn([[document.documentElement]],kE)}function XR(){return this}bn.prototype=ic.prototype={constructor:bn,select:bA,selectAll:CA,selectChild:NA,selectChildren:OA,filter:zA,data:UA,enter:VA,exit:HA,join:qA,merge:WA,selection:XR,order:KA,sort:GA,call:YA,nodes:XA,node:JA,size:ZA,empty:eR,each:tR,attr:lR,style:hR,property:mR,classed:_R,text:SR,html:kR,raise:RR,lower:PR,append:DR,insert:OR,remove:VR,clone:$R,datum:FR,on:WR,dispatch:QR,[Symbol.iterator]:YR};function yn(t){return typeof t=="string"?new bn([[document.querySelector(t)]],[document.documentElement]):new bn([[t]],kE)}function JR(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Yn(t,e){if(t=JR(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const ZR={passive:!1},Pl={capture:!0,passive:!1};function cf(t){t.stopImmediatePropagation()}function Ro(t){t.preventDefault(),t.stopImmediatePropagation()}function AE(t){var e=t.document.documentElement,n=yn(t).on("dragstart.drag",Ro,Pl);"onselectstart"in e?n.on("selectstart.drag",Ro,Pl):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function RE(t,e){var n=t.document.documentElement,r=yn(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ro,Pl),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Yc=t=>()=>t;function Pp(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Pp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function eN(t){return!t.ctrlKey&&!t.button}function tN(){return this.parentNode}function nN(t,e){return e??{x:t.x,y:t.y}}function rN(){return navigator.maxTouchPoints||"ontouchstart"in this}function NE(){var t=eN,e=tN,n=nN,r=rN,i={},s=th("start","drag","end"),o=0,a,l,u,d,h=0;function f(R){R.on("mousedown.drag",m).filter(r).on("touchstart.drag",N).on("touchmove.drag",y,ZR).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(R,O){if(!(d||!t.call(this,R,O))){var M=I(this,e.call(this,R,O),R,O,"mouse");M&&(yn(R.view).on("mousemove.drag",S,Pl).on("mouseup.drag",b,Pl),AE(R.view),cf(R),u=!1,a=R.clientX,l=R.clientY,M("start",R))}}function S(R){if(Ro(R),!u){var O=R.clientX-a,M=R.clientY-l;u=O*O+M*M>h}i.mouse("drag",R)}function b(R){yn(R.view).on("mousemove.drag mouseup.drag",null),RE(R.view,u),Ro(R),i.mouse("end",R)}function N(R,O){if(t.call(this,R,O)){var M=R.changedTouches,C=e.call(this,R,O),x=M.length,w,E;for(w=0;w<x;++w)(E=I(this,C,R,O,M[w].identifier,M[w]))&&(cf(R),E("start",R,M[w]))}}function y(R){var O=R.changedTouches,M=O.length,C,x;for(C=0;C<M;++C)(x=i[O[C].identifier])&&(Ro(R),x("drag",R,O[C]))}function v(R){var O=R.changedTouches,M=O.length,C,x;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<M;++C)(x=i[O[C].identifier])&&(cf(R),x("end",R,O[C]))}function I(R,O,M,C,x,w){var E=s.copy(),k=Yn(w||M,O),A,T,P;if((P=n.call(R,new Pp("beforestart",{sourceEvent:M,target:f,identifier:x,active:o,x:k[0],y:k[1],dx:0,dy:0,dispatch:E}),C))!=null)return A=P.x-k[0]||0,T=P.y-k[1]||0,function j(z,B,$){var V=k,U;switch(z){case"start":i[x]=j,U=o++;break;case"end":delete i[x],--o;case"drag":k=Yn($||B,O),U=o;break}E.call(z,R,new Pp(z,{sourceEvent:B,subject:P,target:f,identifier:x,active:U,x:k[0]+A,y:k[1]+T,dx:k[0]-V[0],dy:k[1]-V[1],dispatch:E}),C)}}return f.filter=function(R){return arguments.length?(t=typeof R=="function"?R:Yc(!!R),f):t},f.container=function(R){return arguments.length?(e=typeof R=="function"?R:Yc(R),f):e},f.subject=function(R){return arguments.length?(n=typeof R=="function"?R:Yc(R),f):n},f.touchable=function(R){return arguments.length?(r=typeof R=="function"?R:Yc(!!R),f):r},f.on=function(){var R=s.on.apply(s,arguments);return R===s?f:R},f.clickDistance=function(R){return arguments.length?(h=(R=+R)*R,f):Math.sqrt(h)},f}function mm(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function PE(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function sc(){}var Dl=.7,ud=1/Dl,No="\\s*([+-]?\\d+)\\s*",Ll="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iN=/^#([0-9a-f]{3,8})$/,sN=new RegExp(`^rgb\\(${No},${No},${No}\\)$`),oN=new RegExp(`^rgb\\(${vr},${vr},${vr}\\)$`),aN=new RegExp(`^rgba\\(${No},${No},${No},${Ll}\\)$`),lN=new RegExp(`^rgba\\(${vr},${vr},${vr},${Ll}\\)$`),cN=new RegExp(`^hsl\\(${Ll},${vr},${vr}\\)$`),uN=new RegExp(`^hsla\\(${Ll},${vr},${vr},${Ll}\\)$`),Rv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mm(sc,Ol,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Nv,formatHex:Nv,formatHex8:dN,formatHsl:hN,formatRgb:Pv,toString:Pv});function Nv(){return this.rgb().formatHex()}function dN(){return this.rgb().formatHex8()}function hN(){return DE(this).formatHsl()}function Pv(){return this.rgb().formatRgb()}function Ol(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=iN.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Dv(e):n===3?new tn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Xc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Xc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=sN.exec(t))?new tn(e[1],e[2],e[3],1):(e=oN.exec(t))?new tn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=aN.exec(t))?Xc(e[1],e[2],e[3],e[4]):(e=lN.exec(t))?Xc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=cN.exec(t))?zv(e[1],e[2]/100,e[3]/100,1):(e=uN.exec(t))?zv(e[1],e[2]/100,e[3]/100,e[4]):Rv.hasOwnProperty(t)?Dv(Rv[t]):t==="transparent"?new tn(NaN,NaN,NaN,0):null}function Dv(t){return new tn(t>>16&255,t>>8&255,t&255,1)}function Xc(t,e,n,r){return r<=0&&(t=e=n=NaN),new tn(t,e,n,r)}function fN(t){return t instanceof sc||(t=Ol(t)),t?(t=t.rgb(),new tn(t.r,t.g,t.b,t.opacity)):new tn}function Dp(t,e,n,r){return arguments.length===1?fN(t):new tn(t,e,n,r??1)}function tn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}mm(tn,Dp,PE(sc,{brighter(t){return t=t==null?ud:Math.pow(ud,t),new tn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Dl:Math.pow(Dl,t),new tn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new tn(Es(this.r),Es(this.g),Es(this.b),dd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lv,formatHex:Lv,formatHex8:pN,formatRgb:Ov,toString:Ov}));function Lv(){return`#${gs(this.r)}${gs(this.g)}${gs(this.b)}`}function pN(){return`#${gs(this.r)}${gs(this.g)}${gs(this.b)}${gs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ov(){const t=dd(this.opacity);return`${t===1?"rgb(":"rgba("}${Es(this.r)}, ${Es(this.g)}, ${Es(this.b)}${t===1?")":`, ${t})`}`}function dd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Es(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gs(t){return t=Es(t),(t<16?"0":"")+t.toString(16)}function zv(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Jn(t,e,n,r)}function DE(t){if(t instanceof Jn)return new Jn(t.h,t.s,t.l,t.opacity);if(t instanceof sc||(t=Ol(t)),!t)return new Jn;if(t instanceof Jn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Jn(o,a,l,t.opacity)}function gN(t,e,n,r){return arguments.length===1?DE(t):new Jn(t,e,n,r??1)}function Jn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}mm(Jn,gN,PE(sc,{brighter(t){return t=t==null?ud:Math.pow(ud,t),new Jn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dl:Math.pow(Dl,t),new Jn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new tn(uf(t>=240?t-240:t+120,i,r),uf(t,i,r),uf(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Jn(Vv(this.h),Jc(this.s),Jc(this.l),dd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=dd(this.opacity);return`${t===1?"hsl(":"hsla("}${Vv(this.h)}, ${Jc(this.s)*100}%, ${Jc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vv(t){return t=(t||0)%360,t<0?t+360:t}function Jc(t){return Math.max(0,Math.min(1,t||0))}function uf(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const LE=t=>()=>t;function mN(t,e){return function(n){return t+n*e}}function yN(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function vN(t){return(t=+t)==1?OE:function(e,n){return n-e?yN(e,n,t):LE(isNaN(e)?n:e)}}function OE(t,e){var n=e-t;return n?mN(t,n):LE(isNaN(t)?e:t)}const Mv=function t(e){var n=vN(e);function r(i,s){var o=n((i=Dp(i)).r,(s=Dp(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=OE(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function bi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Lp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,df=new RegExp(Lp.source,"g");function wN(t){return function(){return t}}function _N(t){return function(e){return t(e)+""}}function xN(t,e){var n=Lp.lastIndex=df.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Lp.exec(t))&&(i=df.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:bi(r,i)})),n=df.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?_N(l[0].x):wN(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)a[(h=l[d]).i]=h.x(u);return a.join("")})}var jv=180/Math.PI,Op={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zE(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*jv,skewX:Math.atan(l)*jv,scaleX:o,scaleY:a}}var Zc;function EN(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Op:zE(e.a,e.b,e.c,e.d,e.e,e.f)}function bN(t){return t==null||(Zc||(Zc=document.createElementNS("http://www.w3.org/2000/svg","g")),Zc.setAttribute("transform",t),!(t=Zc.transform.baseVal.consolidate()))?Op:(t=t.matrix,zE(t.a,t.b,t.c,t.d,t.e,t.f))}function VE(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,d,h,f,m,S){if(u!==h||d!==f){var b=m.push("translate(",null,e,null,n);S.push({i:b-4,x:bi(u,h)},{i:b-2,x:bi(d,f)})}else(h||f)&&m.push("translate("+h+e+f+n)}function o(u,d,h,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:bi(u,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(u,d,h,f){u!==d?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:bi(u,d)}):d&&h.push(i(h)+"skewX("+d+r)}function l(u,d,h,f,m,S){if(u!==h||d!==f){var b=m.push(i(m)+"scale(",null,",",null,")");S.push({i:b-4,x:bi(u,h)},{i:b-2,x:bi(d,f)})}else(h!==1||f!==1)&&m.push(i(m)+"scale("+h+","+f+")")}return function(u,d){var h=[],f=[];return u=t(u),d=t(d),s(u.translateX,u.translateY,d.translateX,d.translateY,h,f),o(u.rotate,d.rotate,h,f),a(u.skewX,d.skewX,h,f),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,f),u=d=null,function(m){for(var S=-1,b=f.length,N;++S<b;)h[(N=f[S]).i]=N.x(m);return h.join("")}}}var SN=VE(EN,"px, ","px)","deg)"),TN=VE(bN,", ",")",")"),IN=1e-12;function $v(t){return((t=Math.exp(t))+1/t)/2}function CN(t){return((t=Math.exp(t))-1/t)/2}function kN(t){return((t=Math.exp(2*t))-1)/(t+1)}const AN=function t(e,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],d=o[0],h=o[1],f=o[2],m=d-a,S=h-l,b=m*m+S*S,N,y;if(b<IN)y=Math.log(f/u)/e,N=function(C){return[a+C*m,l+C*S,u*Math.exp(e*C*y)]};else{var v=Math.sqrt(b),I=(f*f-u*u+r*b)/(2*u*n*v),R=(f*f-u*u-r*b)/(2*f*n*v),O=Math.log(Math.sqrt(I*I+1)-I),M=Math.log(Math.sqrt(R*R+1)-R);y=(M-O)/e,N=function(C){var x=C*y,w=$v(O),E=u/(n*v)*(w*kN(e*x+O)-CN(O));return[a+E*m,l+E*S,u*w/$v(e*x+O)]}}return N.duration=y*1e3*e/Math.SQRT2,N}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i}(Math.SQRT2,2,4);var Ko=0,Ha=0,La=0,ME=1e3,hd,qa,fd=0,Rs=0,rh=0,zl=typeof performance=="object"&&performance.now?performance:Date,jE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ym(){return Rs||(jE(RN),Rs=zl.now()+rh)}function RN(){Rs=0}function pd(){this._call=this._time=this._next=null}pd.prototype=$E.prototype={constructor:pd,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ym():+n)+(e==null?0:+e),!this._next&&qa!==this&&(qa?qa._next=this:hd=this,qa=this),this._call=t,this._time=n,zp()},stop:function(){this._call&&(this._call=null,this._time=1/0,zp())}};function $E(t,e,n){var r=new pd;return r.restart(t,e,n),r}function NN(){ym(),++Ko;for(var t=hd,e;t;)(e=Rs-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ko}function Fv(){Rs=(fd=zl.now())+rh,Ko=Ha=0;try{NN()}finally{Ko=0,DN(),Rs=0}}function PN(){var t=zl.now(),e=t-fd;e>ME&&(rh-=e,fd=t)}function DN(){for(var t,e=hd,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:hd=n);qa=t,zp(r)}function zp(t){if(!Ko){Ha&&(Ha=clearTimeout(Ha));var e=t-Rs;e>24?(t<1/0&&(Ha=setTimeout(Fv,t-zl.now()-rh)),La&&(La=clearInterval(La))):(La||(fd=zl.now(),La=setInterval(PN,ME)),Ko=1,jE(Fv))}}function Uv(t,e,n){var r=new pd;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var LN=th("start","end","cancel","interrupt"),ON=[],FE=0,Bv=1,Vp=2,Cu=3,Hv=4,Mp=5,ku=6;function ih(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;zN(t,n,{name:e,index:r,group:i,on:LN,tween:ON,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:FE})}function vm(t,e){var n=lr(t,e);if(n.state>FE)throw new Error("too late; already scheduled");return n}function Tr(t,e){var n=lr(t,e);if(n.state>Cu)throw new Error("too late; already running");return n}function lr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function zN(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=$E(s,0,n.time);function s(u){n.state=Bv,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,h,f,m;if(n.state!==Bv)return l();for(d in r)if(m=r[d],m.name===n.name){if(m.state===Cu)return Uv(o);m.state===Hv?(m.state=ku,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[d]):+d<e&&(m.state=ku,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[d])}if(Uv(function(){n.state===Cu&&(n.state=Hv,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Vp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Vp){for(n.state=Cu,i=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(m=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=m);i.length=h+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Mp,1),h=-1,f=i.length;++h<f;)i[h].call(t,d);n.state===Mp&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ku,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Au(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Vp&&r.state<Mp,r.state=ku,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function VN(t){return this.each(function(){Au(this,t)})}function MN(t,e){var n,r;return function(){var i=Tr(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function jN(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Tr(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function $N(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=lr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?MN:jN)(n,t,e))}function wm(t,e,n){var r=t._id;return t.each(function(){var i=Tr(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return lr(i,r).value[e]}}function UE(t,e){var n;return(typeof e=="number"?bi:e instanceof Ol?Mv:(n=Ol(e))?(e=n,Mv):xN)(t,e)}function FN(t){return function(){this.removeAttribute(t)}}function UN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function BN(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function HN(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function qN(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function WN(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function KN(t,e){var n=nh(t),r=n==="transform"?TN:UE;return this.attrTween(t,typeof e=="function"?(n.local?WN:qN)(n,r,wm(this,"attr."+t,e)):e==null?(n.local?UN:FN)(n):(n.local?HN:BN)(n,r,e))}function GN(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function QN(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function YN(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&QN(t,s)),n}return i._value=e,i}function XN(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&GN(t,s)),n}return i._value=e,i}function JN(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=nh(t);return this.tween(n,(r.local?YN:XN)(r,e))}function ZN(t,e){return function(){vm(this,t).delay=+e.apply(this,arguments)}}function eP(t,e){return e=+e,function(){vm(this,t).delay=e}}function tP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ZN:eP)(e,t)):lr(this.node(),e).delay}function nP(t,e){return function(){Tr(this,t).duration=+e.apply(this,arguments)}}function rP(t,e){return e=+e,function(){Tr(this,t).duration=e}}function iP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nP:rP)(e,t)):lr(this.node(),e).duration}function sP(t,e){if(typeof e!="function")throw new Error;return function(){Tr(this,t).ease=e}}function oP(t){var e=this._id;return arguments.length?this.each(sP(e,t)):lr(this.node(),e).ease}function aP(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Tr(this,t).ease=n}}function lP(t){if(typeof t!="function")throw new Error;return this.each(aP(this._id,t))}function cP(t){typeof t!="function"&&(t=wE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new Xr(r,this._parents,this._name,this._id)}function uP(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],u=n[a],d=l.length,h=o[a]=new Array(d),f,m=0;m<d;++m)(f=l[m]||u[m])&&(h[m]=f);for(;a<r;++a)o[a]=e[a];return new Xr(o,this._parents,this._name,this._id)}function dP(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function hP(t,e,n){var r,i,s=dP(e)?vm:Tr;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function fP(t,e){var n=this._id;return arguments.length<2?lr(this.node(),n).on.on(t):this.each(hP(n,t,e))}function pP(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function gP(){return this.on("end.remove",pP(this._id))}function mP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=pm(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),d,h,f=0;f<l;++f)(d=a[f])&&(h=t.call(d,d.__data__,f,a))&&("__data__"in d&&(h.__data__=d.__data__),u[f]=h,ih(u[f],e,n,f,u,lr(d,n)));return new Xr(s,this._parents,e,n)}function yP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vE(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var f=t.call(d,d.__data__,h,l),m,S=lr(d,n),b=0,N=f.length;b<N;++b)(m=f[b])&&ih(m,e,n,b,f,S);s.push(f),o.push(d)}return new Xr(s,o,e,n)}var vP=ic.prototype.constructor;function wP(){return new vP(this._groups,this._parents)}function _P(t,e){var n,r,i;return function(){var s=Wo(this,t),o=(this.style.removeProperty(t),Wo(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function BE(t){return function(){this.style.removeProperty(t)}}function xP(t,e,n){var r,i=n+"",s;return function(){var o=Wo(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function EP(t,e,n){var r,i,s;return function(){var o=Wo(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Wo(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function bP(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=Tr(this,t),u=l.on,d=l.value[s]==null?a||(a=BE(e)):void 0;(u!==n||i!==d)&&(r=(n=u).copy()).on(o,i=d),l.on=r}}function SP(t,e,n){var r=(t+="")=="transform"?SN:UE;return e==null?this.styleTween(t,_P(t,r)).on("end.style."+t,BE(t)):typeof e=="function"?this.styleTween(t,EP(t,r,wm(this,"style."+t,e))).each(bP(this._id,t)):this.styleTween(t,xP(t,r,e),n).on("end.style."+t,null)}function TP(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function IP(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&TP(t,o,n)),r}return s._value=e,s}function CP(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,IP(t,e,n??""))}function kP(t){return function(){this.textContent=t}}function AP(t){return function(){var e=t(this);this.textContent=e??""}}function RP(t){return this.tween("text",typeof t=="function"?AP(wm(this,"text",t)):kP(t==null?"":t+""))}function NP(t){return function(e){this.textContent=t.call(this,e)}}function PP(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&NP(i)),e}return r._value=t,r}function DP(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,PP(t))}function LP(){for(var t=this._name,e=this._id,n=HE(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var d=lr(l,e);ih(l,t,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Xr(r,this._parents,t,n)}function OP(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=Tr(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&s()})}var zP=0;function Xr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function HE(){return++zP}var Pr=ic.prototype;Xr.prototype={constructor:Xr,select:mP,selectAll:yP,selectChild:Pr.selectChild,selectChildren:Pr.selectChildren,filter:cP,merge:uP,selection:wP,transition:LP,call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:fP,attr:KN,attrTween:JN,style:SP,styleTween:CP,text:RP,textTween:DP,remove:gP,tween:$N,delay:tP,duration:iP,ease:oP,easeVarying:lP,end:OP,[Symbol.iterator]:Pr[Symbol.iterator]};function VP(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var MP={time:null,delay:0,duration:250,ease:VP};function jP(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $P(t){var e,n;t instanceof Xr?(e=t._id,t=t._name):(e=HE(),(n=MP).time=ym(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&ih(l,t,e,u,o,n||jP(l,e));return new Xr(r,this._parents,t,e)}ic.prototype.interrupt=VN;ic.prototype.transition=$P;const eu=t=>()=>t;function FP(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function jr(t,e,n){this.k=t,this.x=e,this.y=n}jr.prototype={constructor:jr,scale:function(t){return t===1?this:new jr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new jr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hr=new jr(1,0,0);jr.prototype;function hf(t){t.stopImmediatePropagation()}function Oa(t){t.preventDefault(),t.stopImmediatePropagation()}function UP(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function BP(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function qv(){return this.__zoom||Hr}function HP(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function qP(){return navigator.maxTouchPoints||"ontouchstart"in this}function WP(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function qE(){var t=UP,e=BP,n=WP,r=HP,i=qP,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=AN,u=th("start","zoom","end"),d,h,f,m=500,S=150,b=0,N=10;function y(P){P.property("__zoom",qv).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",w).on("dblclick.zoom",E).filter(i).on("touchstart.zoom",k).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(P,j,z,B){var $=P.selection?P.selection():P;$.property("__zoom",qv),P!==$?O(P,j,z,B):$.interrupt().each(function(){M(this,arguments).event(B).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},y.scaleBy=function(P,j,z,B){y.scaleTo(P,function(){var $=this.__zoom.k,V=typeof j=="function"?j.apply(this,arguments):j;return $*V},z,B)},y.scaleTo=function(P,j,z,B){y.transform(P,function(){var $=e.apply(this,arguments),V=this.__zoom,U=z==null?R($):typeof z=="function"?z.apply(this,arguments):z,q=V.invert(U),F=typeof j=="function"?j.apply(this,arguments):j;return n(I(v(V,F),U,q),$,o)},z,B)},y.translateBy=function(P,j,z,B){y.transform(P,function(){return n(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),o)},null,B)},y.translateTo=function(P,j,z,B,$){y.transform(P,function(){var V=e.apply(this,arguments),U=this.__zoom,q=B==null?R(V):typeof B=="function"?B.apply(this,arguments):B;return n(Hr.translate(q[0],q[1]).scale(U.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof z=="function"?-z.apply(this,arguments):-z),V,o)},B,$)};function v(P,j){return j=Math.max(s[0],Math.min(s[1],j)),j===P.k?P:new jr(j,P.x,P.y)}function I(P,j,z){var B=j[0]-z[0]*P.k,$=j[1]-z[1]*P.k;return B===P.x&&$===P.y?P:new jr(P.k,B,$)}function R(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function O(P,j,z,B){P.on("start.zoom",function(){M(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(B).end()}).tween("zoom",function(){var $=this,V=arguments,U=M($,V).event(B),q=e.apply($,V),F=z==null?R(q):typeof z=="function"?z.apply($,V):z,G=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),Y=$.__zoom,Z=typeof j=="function"?j.apply($,V):j,ie=l(Y.invert(F).concat(G/Y.k),Z.invert(F).concat(G/Z.k));return function(ce){if(ce===1)ce=Z;else{var ae=ie(ce),ge=G/ae[2];ce=new jr(ge,F[0]-ae[0]*ge,F[1]-ae[1]*ge)}U.zoom(null,ce)}})}function M(P,j,z){return!z&&P.__zooming||new C(P,j)}function C(P,j){this.that=P,this.args=j,this.active=0,this.sourceEvent=null,this.extent=e.apply(P,j),this.taps=0}C.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,j){return this.mouse&&P!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var j=yn(this.that).datum();u.call(P,this.that,new FP(P,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),j)}};function x(P,...j){if(!t.apply(this,arguments))return;var z=M(this,j).event(P),B=this.__zoom,$=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,r.apply(this,arguments)))),V=Yn(P);if(z.wheel)(z.mouse[0][0]!==V[0]||z.mouse[0][1]!==V[1])&&(z.mouse[1]=B.invert(z.mouse[0]=V)),clearTimeout(z.wheel);else{if(B.k===$)return;z.mouse=[V,B.invert(V)],Au(this),z.start()}Oa(P),z.wheel=setTimeout(U,S),z.zoom("mouse",n(I(v(B,$),z.mouse[0],z.mouse[1]),z.extent,o));function U(){z.wheel=null,z.end()}}function w(P,...j){if(f||!t.apply(this,arguments))return;var z=P.currentTarget,B=M(this,j,!0).event(P),$=yn(P.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",G,!0),V=Yn(P,z),U=P.clientX,q=P.clientY;AE(P.view),hf(P),B.mouse=[V,this.__zoom.invert(V)],Au(this),B.start();function F(Y){if(Oa(Y),!B.moved){var Z=Y.clientX-U,ie=Y.clientY-q;B.moved=Z*Z+ie*ie>b}B.event(Y).zoom("mouse",n(I(B.that.__zoom,B.mouse[0]=Yn(Y,z),B.mouse[1]),B.extent,o))}function G(Y){$.on("mousemove.zoom mouseup.zoom",null),RE(Y.view,B.moved),Oa(Y),B.event(Y).end()}}function E(P,...j){if(t.apply(this,arguments)){var z=this.__zoom,B=Yn(P.changedTouches?P.changedTouches[0]:P,this),$=z.invert(B),V=z.k*(P.shiftKey?.5:2),U=n(I(v(z,V),B,$),e.apply(this,j),o);Oa(P),a>0?yn(this).transition().duration(a).call(O,U,B,P):yn(this).call(y.transform,U,B,P)}}function k(P,...j){if(t.apply(this,arguments)){var z=P.touches,B=z.length,$=M(this,j,P.changedTouches.length===B).event(P),V,U,q,F;for(hf(P),U=0;U<B;++U)q=z[U],F=Yn(q,this),F=[F,this.__zoom.invert(F),q.identifier],$.touch0?!$.touch1&&$.touch0[2]!==F[2]&&($.touch1=F,$.taps=0):($.touch0=F,V=!0,$.taps=1+!!d);d&&(d=clearTimeout(d)),V&&($.taps<2&&(h=F[0],d=setTimeout(function(){d=null},m)),Au(this),$.start())}}function A(P,...j){if(this.__zooming){var z=M(this,j).event(P),B=P.changedTouches,$=B.length,V,U,q,F;for(Oa(P),V=0;V<$;++V)U=B[V],q=Yn(U,this),z.touch0&&z.touch0[2]===U.identifier?z.touch0[0]=q:z.touch1&&z.touch1[2]===U.identifier&&(z.touch1[0]=q);if(U=z.that.__zoom,z.touch1){var G=z.touch0[0],Y=z.touch0[1],Z=z.touch1[0],ie=z.touch1[1],ce=(ce=Z[0]-G[0])*ce+(ce=Z[1]-G[1])*ce,ae=(ae=ie[0]-Y[0])*ae+(ae=ie[1]-Y[1])*ae;U=v(U,Math.sqrt(ce/ae)),q=[(G[0]+Z[0])/2,(G[1]+Z[1])/2],F=[(Y[0]+ie[0])/2,(Y[1]+ie[1])/2]}else if(z.touch0)q=z.touch0[0],F=z.touch0[1];else return;z.zoom("touch",n(I(U,q,F),z.extent,o))}}function T(P,...j){if(this.__zooming){var z=M(this,j).event(P),B=P.changedTouches,$=B.length,V,U;for(hf(P),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),V=0;V<$;++V)U=B[V],z.touch0&&z.touch0[2]===U.identifier?delete z.touch0:z.touch1&&z.touch1[2]===U.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(U=Yn(U,this),Math.hypot(h[0]-U[0],h[1]-U[1])<N)){var q=yn(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return y.wheelDelta=function(P){return arguments.length?(r=typeof P=="function"?P:eu(+P),y):r},y.filter=function(P){return arguments.length?(t=typeof P=="function"?P:eu(!!P),y):t},y.touchable=function(P){return arguments.length?(i=typeof P=="function"?P:eu(!!P),y):i},y.extent=function(P){return arguments.length?(e=typeof P=="function"?P:eu([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),y):e},y.scaleExtent=function(P){return arguments.length?(s[0]=+P[0],s[1]=+P[1],y):[s[0],s[1]]},y.translateExtent=function(P){return arguments.length?(o[0][0]=+P[0][0],o[1][0]=+P[1][0],o[0][1]=+P[0][1],o[1][1]=+P[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(P){return arguments.length?(n=P,y):n},y.duration=function(P){return arguments.length?(a=+P,y):a},y.interpolate=function(P){return arguments.length?(l=P,y):l},y.on=function(){var P=u.on.apply(u,arguments);return P===u?y:P},y.clickDistance=function(P){return arguments.length?(b=(P=+P)*P,y):Math.sqrt(b)},y.tapDistance=function(P){return arguments.length?(N=+P,y):N},y}const sh=L.createContext(null),KP=sh.Provider,Jr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},WE=Jr.error001();function Me(t,e){const n=L.useContext(sh);if(n===null)throw new Error(WE);return mE(n,t,e)}const ct=()=>{const t=L.useContext(sh);if(t===null)throw new Error(WE);return L.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},GP=t=>t.userSelectionActive?"none":"all";function _m({position:t,children:e,className:n,style:r,...i}){const s=Me(GP),o=`${t}`.split("-");return W.createElement("div",{className:Et(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},e)}function QP({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:W.createElement(_m,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},W.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const YP=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...d})=>{const h=L.useRef(null),[f,m]=L.useState({x:0,y:0,width:0,height:0}),S=Et(["react-flow__edge-textwrapper",u]);return L.useEffect(()=>{if(h.current){const b=h.current.getBBox();m({x:b.x,y:b.y,width:b.width,height:b.height})}},[n]),typeof n>"u"||!n?null:W.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:S,visibility:f.width?"visible":"hidden",...d},i&&W.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),W.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:r},n),l)};var XP=L.memo(YP);const xm=t=>({width:t.offsetWidth,height:t.offsetHeight}),Qi=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Em=(t={x:0,y:0},e)=>({x:Qi(t.x,e[0][0],e[1][0]),y:Qi(t.y,e[0][1],e[1][1])}),Wv=(t,e,n)=>t<e?Qi(Math.abs(t-e),1,50)/50:t>n?-Qi(Math.abs(t-n),1,50)/50:0,KE=(t,e)=>{const n=Wv(t.x,35,e.width-35)*20,r=Wv(t.y,35,e.height-35)*20;return[n,r]},GE=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},QE=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Vl=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),YE=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Kv=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),JP=(t,e)=>YE(QE(Vl(t),Vl(e))),jp=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},ZP=t=>Ln(t.width)&&Ln(t.height)&&Ln(t.x)&&Ln(t.y),Ln=t=>!isNaN(t)&&isFinite(t),tt=Symbol.for("internals"),XE=["Enter"," ","Escape"],e4=(t,e)=>{},t4=t=>"nativeEvent"in t;function $p(t){var i,s;const e=t4(t)?t.nativeEvent:t,n=((s=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const JE=t=>"clientX"in t,Ui=(t,e)=>{var s,o;const n=JE(t),r=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,i=n?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},gd=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},ia=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:f,interactionWidth:m=20})=>W.createElement(W.Fragment,null,W.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:f}),m&&W.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),i&&Ln(n)&&Ln(r)?W.createElement(XP,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);ia.displayName="BaseEdge";function za(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(s=>s.id===t);i&&n(r,{...i})}}function ZE({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function eb({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=t*.125+i*.375+o*.375+n*.125,u=e*.125+s*.375+a*.375+r*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var Ns;(function(t){t.Strict="strict",t.Loose="loose"})(Ns||(Ns={}));var ms;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ms||(ms={}));var Ml;(function(t){t.Partial="partial",t.Full="full"})(Ml||(Ml={}));var Ci;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ci||(Ci={}));var md;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(md||(md={}));var oe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(oe||(oe={}));function Gv({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===oe.Left||t===oe.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function tb({sourceX:t,sourceY:e,sourcePosition:n=oe.Bottom,targetX:r,targetY:i,targetPosition:s=oe.Top}){const[o,a]=Gv({pos:n,x1:t,y1:e,x2:r,y2:i}),[l,u]=Gv({pos:s,x1:r,y1:i,x2:t,y2:e}),[d,h,f,m]=eb({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${t},${e} C${o},${a} ${l},${u} ${r},${i}`,d,h,f,m]}const bm=L.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=oe.Bottom,targetPosition:s=oe.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:S,interactionWidth:b})=>{const[N,y,v]=tb({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return W.createElement(ia,{path:N,labelX:y,labelY:v,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:S,interactionWidth:b})});bm.displayName="SimpleBezierEdge";const Qv={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},n4=({source:t,sourcePosition:e=oe.Bottom,target:n})=>e===oe.Left||e===oe.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Yv=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function r4({source:t,sourcePosition:e=oe.Bottom,target:n,targetPosition:r=oe.Top,center:i,offset:s}){const o=Qv[e],a=Qv[r],l={x:t.x+o.x*s,y:t.y+o.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},d=n4({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",f=d[h];let m=[],S,b;const N={x:0,y:0},y={x:0,y:0},[v,I,R,O]=ZE({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*a[h]===-1){S=i.x??v,b=i.y??I;const C=[{x:S,y:l.y},{x:S,y:u.y}],x=[{x:l.x,y:b},{x:u.x,y:b}];o[h]===f?m=h==="x"?C:x:m=h==="x"?x:C}else{const C=[{x:l.x,y:u.y}],x=[{x:u.x,y:l.y}];if(h==="x"?m=o.x===f?x:C:m=o.y===f?C:x,e===r){const T=Math.abs(t[h]-n[h]);if(T<=s){const P=Math.min(s-1,s-T);o[h]===f?N[h]=(l[h]>t[h]?-1:1)*P:y[h]=(u[h]>n[h]?-1:1)*P}}if(e!==r){const T=h==="x"?"y":"x",P=o[h]===a[T],j=l[T]>u[T],z=l[T]<u[T];(o[h]===1&&(!P&&j||P&&z)||o[h]!==1&&(!P&&z||P&&j))&&(m=h==="x"?C:x)}const w={x:l.x+N.x,y:l.y+N.y},E={x:u.x+y.x,y:u.y+y.y},k=Math.max(Math.abs(w.x-m[0].x),Math.abs(E.x-m[0].x)),A=Math.max(Math.abs(w.y-m[0].y),Math.abs(E.y-m[0].y));k>=A?(S=(w.x+E.x)/2,b=m[0].y):(S=m[0].x,b=(w.y+E.y)/2)}return[[t,{x:l.x+N.x,y:l.y+N.y},...m,{x:u.x+y.x,y:u.y+y.y},n],S,b,R,O]}function i4(t,e,n,r){const i=Math.min(Yv(t,e)/2,Yv(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*d}`}const a=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function jl({sourceX:t,sourceY:e,sourcePosition:n=oe.Bottom,targetX:r,targetY:i,targetPosition:s=oe.Top,borderRadius:o=5,centerX:a,centerY:l,offset:u=20}){const[d,h,f,m,S]=r4({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:u});return[d.reduce((N,y,v)=>{let I="";return v>0&&v<d.length-1?I=i4(d[v-1],y,d[v+1],o):I=`${v===0?"M":"L"}${y.x} ${y.y}`,N+=I,N},""),h,f,m,S]}const oh=L.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=oe.Bottom,targetPosition:f=oe.Top,markerEnd:m,markerStart:S,pathOptions:b,interactionWidth:N})=>{const[y,v,I]=jl({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:f,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset});return W.createElement(ia,{path:y,labelX:v,labelY:I,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:S,interactionWidth:N})});oh.displayName="SmoothStepEdge";const Sm=L.memo(t=>{var e;return W.createElement(oh,{...t,pathOptions:L.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});Sm.displayName="StepEdge";function nb({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,a]=ZE({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,a]}const Tm=L.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:f,interactionWidth:m})=>{const[S,b,N]=nb({sourceX:t,sourceY:e,targetX:n,targetY:r});return W.createElement(ia,{path:S,labelX:b,labelY:N,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:f,interactionWidth:m})});Tm.displayName="StraightEdge";function tu(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Xv({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case oe.Left:return[e-tu(e-r,s),n];case oe.Right:return[e+tu(r-e,s),n];case oe.Top:return[e,n-tu(n-i,s)];case oe.Bottom:return[e,n+tu(i-n,s)]}}function Im({sourceX:t,sourceY:e,sourcePosition:n=oe.Bottom,targetX:r,targetY:i,targetPosition:s=oe.Top,curvature:o=.25}){const[a,l]=Xv({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[u,d]=Xv({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,f,m,S]=eb({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${a},${l} ${u},${d} ${r},${i}`,h,f,m,S]}const yd=L.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=oe.Bottom,targetPosition:s=oe.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:S,pathOptions:b,interactionWidth:N})=>{const[y,v,I]=Im({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:b==null?void 0:b.curvature});return W.createElement(ia,{path:y,labelX:v,labelY:I,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:S,interactionWidth:N})});yd.displayName="BezierEdge";const Cm=L.createContext(null),s4=Cm.Provider;Cm.Consumer;const rb=()=>L.useContext(Cm),o4=t=>"id"in t&&"source"in t&&"target"in t,a4=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Fp=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,l4=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),ib=(t,e)=>{if(!t.source||!t.target)return e;let n;return o4(t)?n={...t}:n={...t,id:a4(t)},l4(n,e)?e:e.concat(n)},Up=({x:t,y:e},[n,r,i],s,[o,a])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?{x:o*Math.round(l.x/o),y:a*Math.round(l.y/a)}:l},sb=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),bs=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},oc=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:s,y:o}=bs(i,e).positionAbsolute;return QE(r,Vl({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return YE(n)},ob=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const l={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},u=[];return t.forEach(d=>{const{width:h,height:f,selectable:m=!0,hidden:S=!1}=d;if(o&&!m||S)return!1;const{positionAbsolute:b}=bs(d,a),N={x:b.x,y:b.y,width:h||0,height:f||0},y=jp(l,N),v=typeof h>"u"||typeof f>"u"||h===null||f===null,I=s&&y>0,R=(h||0)*(f||0);(v||I||y>=R||d.dragging)&&u.push(d)}),u},ab=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},lb=(t,e,n,r,i,s=.1)=>{const o=e/(t.width*(1+s)),a=n/(t.height*(1+s)),l=Math.min(o,a),u=Qi(l,r,i),d=t.x+t.width/2,h=t.y+t.height/2,f=e/2-d*u,m=n/2-h*u;return{x:f,y:m,zoom:u}},us=(t,e=0)=>t.transition().duration(e);function Jv(t,e,n,r){return(e[n]||[]).reduce((i,s)=>{var o,a;return`${t.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:t.id,x:(((o=t.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function c4(t,e,n,r,i,s){const{x:o,y:a}=Ui(t),u=e.elementsFromPoint(o,a).find(S=>S.classList.contains("react-flow__handle"));if(u){const S=u.getAttribute("data-nodeid");if(S){const b=km(void 0,u),N=u.getAttribute("data-handleid"),y=s({nodeId:S,id:N,type:b});if(y){const v=i.find(I=>I.nodeId===S&&I.type===b&&I.id===N);return{handle:{id:N,type:b,nodeId:S,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:y}}}}let d=[],h=1/0;if(i.forEach(S=>{const b=Math.sqrt((S.x-n.x)**2+(S.y-n.y)**2);if(b<=r){const N=s(S);b<=h&&(b<h?d=[{handle:S,validHandleResult:N}]:b===h&&d.push({handle:S,validHandleResult:N}),h=b)}}),!d.length)return{handle:null,validHandleResult:cb()};if(d.length===1)return d[0];const f=d.some(({validHandleResult:S})=>S.isValid),m=d.some(({handle:S})=>S.type==="target");return d.find(({handle:S,validHandleResult:b})=>m?S.type==="target":f?b.isValid:!0)||d[0]}const u4={source:null,target:null,sourceHandle:null,targetHandle:null},cb=()=>({handleDomNode:null,isValid:!1,connection:u4,endHandle:null});function ub(t,e,n,r,i,s,o){const a=i==="target",l=o.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...cb(),handleDomNode:l};if(l){const d=km(void 0,l),h=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),S=l.classList.contains("connectableend"),b={source:a?h:n,sourceHandle:a?f:r,target:a?n:h,targetHandle:a?r:f};u.connection=b,m&&S&&(e===Ns.Strict?a&&d==="source"||!a&&d==="target":h!==n||f!==r)&&(u.endHandle={nodeId:h,handleId:f,type:d},u.isValid=s(b))}return u}function d4({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,s)=>{if(s[tt]){const{handleBounds:o}=s[tt];let a=[],l=[];o&&(a=Jv(s,o,"source",`${e}-${n}-${r}`),l=Jv(s,o,"target",`${e}-${n}-${r}`)),i.push(...a,...l)}return i},[])}function km(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function ff(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function h4(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function db({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:u}){const d=GE(t.target),{connectionMode:h,domNode:f,autoPanOnConnect:m,connectionRadius:S,onConnectStart:b,panBy:N,getNodes:y,cancelConnection:v}=s();let I=0,R;const{x:O,y:M}=Ui(t),C=d==null?void 0:d.elementFromPoint(O,M),x=km(l,C),w=f==null?void 0:f.getBoundingClientRect();if(!w||!x)return;let E,k=Ui(t,w),A=!1,T=null,P=!1,j=null;const z=d4({nodes:y(),nodeId:n,handleId:e,handleType:x}),B=()=>{if(!m)return;const[U,q]=KE(k,w);N({x:U,y:q}),I=requestAnimationFrame(B)};o({connectionPosition:k,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:x,connectionStartHandle:{nodeId:n,handleId:e,type:x},connectionEndHandle:null}),b==null||b(t,{nodeId:n,handleId:e,handleType:x});function $(U){const{transform:q}=s();k=Ui(U,w);const{handle:F,validHandleResult:G}=c4(U,d,Up(k,q,!1,[1,1]),S,z,Y=>ub(Y,h,n,e,i?"target":"source",a,d));if(R=F,A||(B(),A=!0),j=G.handleDomNode,T=G.connection,P=G.isValid,o({connectionPosition:R&&P?sb({x:R.x,y:R.y},q):k,connectionStatus:h4(!!R,P),connectionEndHandle:G.endHandle}),!R&&!P&&!j)return ff(E);T.source!==T.target&&j&&(ff(E),E=j,j.classList.add("connecting","react-flow__handle-connecting"),j.classList.toggle("valid",P),j.classList.toggle("react-flow__handle-valid",P))}function V(U){var q,F;(R||j)&&T&&P&&(r==null||r(T)),(F=(q=s()).onConnectEnd)==null||F.call(q,U),l&&(u==null||u(U)),ff(E),v(),cancelAnimationFrame(I),A=!1,P=!1,T=null,j=null,d.removeEventListener("mousemove",$),d.removeEventListener("mouseup",V),d.removeEventListener("touchmove",$),d.removeEventListener("touchend",V)}d.addEventListener("mousemove",$),d.addEventListener("mouseup",V),d.addEventListener("touchmove",$),d.addEventListener("touchend",V)}const Zv=()=>!0,f4=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),p4=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n}},hb=L.forwardRef(({type:t="source",position:e=oe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:u,onMouseDown:d,onTouchStart:h,...f},m)=>{var w,E;const S=o||null,b=t==="target",N=ct(),y=rb(),{connectOnClick:v,noPanClassName:I}=Me(f4,xt),{connecting:R,clickConnecting:O}=Me(p4(y,S,t),xt);y||(E=(w=N.getState()).onError)==null||E.call(w,"010",Jr.error010());const M=k=>{const{defaultEdgeOptions:A,onConnect:T,hasDefaultEdges:P}=N.getState(),j={...A,...k};if(P){const{edges:z,setEdges:B}=N.getState();B(ib(j,z))}T==null||T(j),a==null||a(j)},C=k=>{if(!y)return;const A=JE(k);i&&(A&&k.button===0||!A)&&db({event:k,handleId:S,nodeId:y,onConnect:M,isTarget:b,getState:N.getState,setState:N.setState,isValidConnection:n||N.getState().isValidConnection||Zv}),A?d==null||d(k):h==null||h(k)},x=k=>{const{onClickConnectStart:A,onClickConnectEnd:T,connectionClickStartHandle:P,connectionMode:j,isValidConnection:z}=N.getState();if(!y||!P&&!i)return;if(!P){A==null||A(k,{nodeId:y,handleId:S,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:y,type:t,handleId:S}});return}const B=GE(k.target),$=n||z||Zv,{connection:V,isValid:U}=ub({nodeId:y,id:S,type:t},j,P.nodeId,P.handleId||null,P.type,$,B);U&&M(V),T==null||T(k),N.setState({connectionClickStartHandle:null})};return W.createElement("div",{"data-handleid":S,"data-nodeid":y,"data-handlepos":e,"data-id":`${y}-${S}-${t}`,className:Et(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",I,u,{source:!b,target:b,connectable:r,connectablestart:i,connectableend:s,connecting:O,connectionindicator:r&&(i&&!R||s&&R)}]),onMouseDown:C,onTouchStart:C,onClick:v?x:void 0,ref:m,...f},l)});hb.displayName="Handle";var cn=L.memo(hb);const fb=({data:t,isConnectable:e,targetPosition:n=oe.Top,sourcePosition:r=oe.Bottom})=>W.createElement(W.Fragment,null,W.createElement(cn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,W.createElement(cn,{type:"source",position:r,isConnectable:e}));fb.displayName="DefaultNode";var Bp=L.memo(fb);const pb=({data:t,isConnectable:e,sourcePosition:n=oe.Bottom})=>W.createElement(W.Fragment,null,t==null?void 0:t.label,W.createElement(cn,{type:"source",position:n,isConnectable:e}));pb.displayName="InputNode";var gb=L.memo(pb);const mb=({data:t,isConnectable:e,targetPosition:n=oe.Top})=>W.createElement(W.Fragment,null,W.createElement(cn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);mb.displayName="OutputNode";var yb=L.memo(mb);const Am=()=>null;Am.displayName="GroupNode";const g4=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),nu=t=>t.id;function m4(t,e){return xt(t.selectedNodes.map(nu),e.selectedNodes.map(nu))&&xt(t.selectedEdges.map(nu),e.selectedEdges.map(nu))}const vb=L.memo(({onSelectionChange:t})=>{const e=ct(),{selectedNodes:n,selectedEdges:r}=Me(g4,m4);return L.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(s=>s(i))},[n,r,t]),null});vb.displayName="SelectionListener";const y4=t=>!!t.onSelectionChange;function v4({onSelectionChange:t}){const e=Me(y4);return t||e?W.createElement(vb,{onSelectionChange:t}):null}const w4=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function eo(t,e){L.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function _e(t,e,n){L.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const _4=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:S,minZoom:b,maxZoom:N,nodeExtent:y,onNodesChange:v,onEdgesChange:I,elementsSelectable:R,connectionMode:O,snapGrid:M,snapToGrid:C,translateExtent:x,connectOnClick:w,defaultEdgeOptions:E,fitView:k,fitViewOptions:A,onNodesDelete:T,onEdgesDelete:P,onNodeDrag:j,onNodeDragStart:z,onNodeDragStop:B,onSelectionDrag:$,onSelectionDragStart:V,onSelectionDragStop:U,noPanClassName:q,nodeOrigin:F,rfId:G,autoPanOnConnect:Y,autoPanOnNodeDrag:Z,onError:ie,connectionRadius:ce,isValidConnection:ae,nodeDragThreshold:ge})=>{const{setNodes:pe,setEdges:Ie,setDefaultNodesAndEdges:Oe,setMinZoom:qe,setMaxZoom:$e,setTranslateExtent:Ne,setNodeExtent:nt,reset:me}=Me(w4,xt),te=ct();return L.useEffect(()=>{const Ee=r==null?void 0:r.map(ut=>({...ut,...E}));return Oe(n,Ee),()=>{me()}},[]),_e("defaultEdgeOptions",E,te.setState),_e("connectionMode",O,te.setState),_e("onConnect",i,te.setState),_e("onConnectStart",s,te.setState),_e("onConnectEnd",o,te.setState),_e("onClickConnectStart",a,te.setState),_e("onClickConnectEnd",l,te.setState),_e("nodesDraggable",u,te.setState),_e("nodesConnectable",d,te.setState),_e("nodesFocusable",h,te.setState),_e("edgesFocusable",f,te.setState),_e("edgesUpdatable",m,te.setState),_e("elementsSelectable",R,te.setState),_e("elevateNodesOnSelect",S,te.setState),_e("snapToGrid",C,te.setState),_e("snapGrid",M,te.setState),_e("onNodesChange",v,te.setState),_e("onEdgesChange",I,te.setState),_e("connectOnClick",w,te.setState),_e("fitViewOnInit",k,te.setState),_e("fitViewOnInitOptions",A,te.setState),_e("onNodesDelete",T,te.setState),_e("onEdgesDelete",P,te.setState),_e("onNodeDrag",j,te.setState),_e("onNodeDragStart",z,te.setState),_e("onNodeDragStop",B,te.setState),_e("onSelectionDrag",$,te.setState),_e("onSelectionDragStart",V,te.setState),_e("onSelectionDragStop",U,te.setState),_e("noPanClassName",q,te.setState),_e("nodeOrigin",F,te.setState),_e("rfId",G,te.setState),_e("autoPanOnConnect",Y,te.setState),_e("autoPanOnNodeDrag",Z,te.setState),_e("onError",ie,te.setState),_e("connectionRadius",ce,te.setState),_e("isValidConnection",ae,te.setState),_e("nodeDragThreshold",ge,te.setState),eo(t,pe),eo(e,Ie),eo(b,qe),eo(N,$e),eo(x,Ne),eo(y,nt),null},ew={display:"none"},x4={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},wb="react-flow__node-desc",_b="react-flow__edge-desc",E4="react-flow__aria-live",b4=t=>t.ariaLiveMessage;function S4({rfId:t}){const e=Me(b4);return W.createElement("div",{id:`${E4}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:x4},e)}function T4({rfId:t,disableKeyboardA11y:e}){return W.createElement(W.Fragment,null,W.createElement("div",{id:`${wb}-${t}`,style:ew},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),W.createElement("div",{id:`${_b}-${t}`,style:ew},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&W.createElement(S4,{rfId:t}))}var $l=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=L.useState(!1),i=L.useRef(!1),s=L.useRef(new Set([])),[o,a]=L.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,f)=>h.concat(...f),[]);return[u,d]}return[[],[]]},[t]);return L.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=m=>{if(i.current=m.ctrlKey||m.metaKey||m.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&$p(m))return!1;const b=nw(m.code,a);s.current.add(m[b]),tw(o,s.current,!1)&&(m.preventDefault(),r(!0))},h=m=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&$p(m))return!1;const b=nw(m.code,a);tw(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(m[b]),m.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",f)}}},[t,r]),n};function tw(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function nw(t,e){return e.includes(t)?"code":"key"}function xb(t,e,n,r){var a,l;const i=t.parentNode||t.parentId;if(!i)return n;const s=e.get(i),o=bs(s,r);return xb(s,e,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[tt])==null?void 0:a.z)??0)>(n.z??0)?((l=s[tt])==null?void 0:l.z)??0:n.z??0},r)}function Eb(t,e,n){t.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!t.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:o,y:a,z:l}=xb(r,t,{...r.position,z:((s=r[tt])==null?void 0:s.z)??0},e);r.positionAbsolute={x:o,y:a},r[tt].z=l,n!=null&&n[r.id]&&(r[tt].isParent=!0)}})}function pf(t,e,n,r){const i=new Map,s={},o=r?1e3:0;return t.forEach(a=>{var m;const l=(Ln(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=e.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},h=a.parentNode||a.parentId;h&&(s[h]=!0);const f=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(d,tt,{enumerable:!1,value:{handleBounds:f||(m=u==null?void 0:u[tt])==null?void 0:m.handleBounds,z:l}}),i.set(a.id,d)}),Eb(i,n,s),i}function bb(t,e={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),f=e.initial&&!u&&d;if(a&&l&&(f||!e.initial)){const S=n().filter(N=>{var v;const y=e.includeHiddenNodes?N.width&&N.height:!N.hidden;return(v=e.nodes)!=null&&v.length?y&&e.nodes.some(I=>I.id===N.id):y}),b=S.every(N=>N.width&&N.height);if(S.length>0&&b){const N=oc(S,h),{x:y,y:v,zoom:I}=lb(N,r,i,e.minZoom??s,e.maxZoom??o,e.padding??.1),R=Hr.translate(y,v).scale(I);return typeof e.duration=="number"&&e.duration>0?a.transform(us(l,e.duration),R):a.transform(l,R),!0}}return!1}function I4(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[tt]:r[tt],selected:n.selected})}),new Map(e)}function C4(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function ru({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&r({nodeInternals:I4(t,i)}),o==null||o(t)),e!=null&&e.length&&(u&&r({edges:C4(e,s)}),a==null||a(e))}const to=()=>{},k4={zoomIn:to,zoomOut:to,zoomTo:to,getZoom:()=>1,setViewport:to,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:to,fitBounds:to,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},A4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),R4=()=>{const t=ct(),{d3Zoom:e,d3Selection:n}=Me(A4,xt);return L.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(us(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(us(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>e.scaleTo(us(n,s==null?void 0:s.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,s)=>{const[o,a,l]=t.getState().transform,u=Hr.translate(i.x??o,i.y??a).scale(i.zoom??l);e.transform(us(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,o]=t.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>bb(t.getState,i),setCenter:(i,s,o)=>{const{width:a,height:l,maxZoom:u}=t.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,h=a/2-i*d,f=l/2-s*d,m=Hr.translate(h,f).scale(d);e.transform(us(n,o==null?void 0:o.duration),m)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:f}=lb(i,o,a,l,u,(s==null?void 0:s.padding)??.1),m=Hr.translate(d,h).scale(f);e.transform(us(n,s==null?void 0:s.duration),m)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Up(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:l}=t.getState();if(!l)return i;const{x:u,y:d}=l.getBoundingClientRect(),h={x:i.x-u,y:i.y-d};return Up(h,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=t.getState();if(!o)return i;const{x:a,y:l}=o.getBoundingClientRect(),u=sb(i,s);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:k4,[e,n])};function Ir(){const t=R4(),e=ct(),n=L.useCallback(()=>e.getState().getNodes().map(b=>({...b})),[]),r=L.useCallback(b=>e.getState().nodeInternals.get(b),[]),i=L.useCallback(()=>{const{edges:b=[]}=e.getState();return b.map(N=>({...N}))},[]),s=L.useCallback(b=>{const{edges:N=[]}=e.getState();return N.find(y=>y.id===b)},[]),o=L.useCallback(b=>{const{getNodes:N,setNodes:y,hasDefaultNodes:v,onNodesChange:I}=e.getState(),R=N(),O=typeof b=="function"?b(R):b;if(v)y(O);else if(I){const M=O.length===0?R.map(C=>({type:"remove",id:C.id})):O.map(C=>({item:C,type:"reset"}));I(M)}},[]),a=L.useCallback(b=>{const{edges:N=[],setEdges:y,hasDefaultEdges:v,onEdgesChange:I}=e.getState(),R=typeof b=="function"?b(N):b;if(v)y(R);else if(I){const O=R.length===0?N.map(M=>({type:"remove",id:M.id})):R.map(M=>({item:M,type:"reset"}));I(O)}},[]),l=L.useCallback(b=>{const N=Array.isArray(b)?b:[b],{getNodes:y,setNodes:v,hasDefaultNodes:I,onNodesChange:R}=e.getState();if(I){const M=[...y(),...N];v(M)}else if(R){const O=N.map(M=>({item:M,type:"add"}));R(O)}},[]),u=L.useCallback(b=>{const N=Array.isArray(b)?b:[b],{edges:y=[],setEdges:v,hasDefaultEdges:I,onEdgesChange:R}=e.getState();if(I)v([...y,...N]);else if(R){const O=N.map(M=>({item:M,type:"add"}));R(O)}},[]),d=L.useCallback(()=>{const{getNodes:b,edges:N=[],transform:y}=e.getState(),[v,I,R]=y;return{nodes:b().map(O=>({...O})),edges:N.map(O=>({...O})),viewport:{x:v,y:I,zoom:R}}},[]),h=L.useCallback(({nodes:b,edges:N})=>{const{nodeInternals:y,getNodes:v,edges:I,hasDefaultNodes:R,hasDefaultEdges:O,onNodesDelete:M,onEdgesDelete:C,onNodesChange:x,onEdgesChange:w}=e.getState(),E=(b||[]).map(j=>j.id),k=(N||[]).map(j=>j.id),A=v().reduce((j,z)=>{const B=z.parentNode||z.parentId,$=!E.includes(z.id)&&B&&j.find(U=>U.id===B);return(typeof z.deletable=="boolean"?z.deletable:!0)&&(E.includes(z.id)||$)&&j.push(z),j},[]),T=I.filter(j=>typeof j.deletable=="boolean"?j.deletable:!0),P=T.filter(j=>k.includes(j.id));if(A||P){const j=ab(A,T),z=[...P,...j],B=z.reduce(($,V)=>($.includes(V.id)||$.push(V.id),$),[]);if((O||R)&&(O&&e.setState({edges:I.filter($=>!B.includes($.id))}),R&&(A.forEach($=>{y.delete($.id)}),e.setState({nodeInternals:new Map(y)}))),B.length>0&&(C==null||C(z),w&&w(B.map($=>({id:$,type:"remove"})))),A.length>0&&(M==null||M(A),x)){const $=A.map(V=>({id:V.id,type:"remove"}));x($)}}},[]),f=L.useCallback(b=>{const N=ZP(b),y=N?null:e.getState().nodeInternals.get(b.id);return!N&&!y?[null,null,N]:[N?b:Kv(y),y,N]},[]),m=L.useCallback((b,N=!0,y)=>{const[v,I,R]=f(b);return v?(y||e.getState().getNodes()).filter(O=>{if(!R&&(O.id===I.id||!O.positionAbsolute))return!1;const M=Kv(O),C=jp(M,v);return N&&C>0||C>=v.width*v.height}):[]},[]),S=L.useCallback((b,N,y=!0)=>{const[v]=f(b);if(!v)return!1;const I=jp(v,N);return y&&I>0||I>=v.width*v.height},[]);return L.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:m,isNodeIntersecting:S}),[t,n,r,i,s,o,a,l,u,d,h,m,S])}const N4={actInsideInputWithModifier:!1};var P4=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ct(),{deleteElements:r}=Ir(),i=$l(t,N4),s=$l(e);L.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),l=a().filter(d=>d.selected),u=o.filter(d=>d.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),L.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function D4(t){const e=ct();L.useEffect(()=>{let n;const r=()=>{var s,o;if(!t.current)return;const i=xm(t.current);(i.height===0||i.width===0)&&((o=(s=e.getState()).onError)==null||o.call(s,"004",Jr.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Rm={position:"absolute",width:"100%",height:"100%",top:0,left:0},L4=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,iu=t=>({x:t.x,y:t.y,zoom:t.k}),no=(t,e)=>t.target.closest(`.${e}`),rw=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),iw=t=>{const e=t.ctrlKey&&gd()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},O4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),z4=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=ms.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:f,translateExtent:m,minZoom:S,maxZoom:b,zoomActivationKeyCode:N,preventScrolling:y=!0,children:v,noWheelClassName:I,noPanClassName:R})=>{const O=L.useRef(),M=ct(),C=L.useRef(!1),x=L.useRef(!1),w=L.useRef(null),E=L.useRef({x:0,y:0,zoom:0}),{d3Zoom:k,d3Selection:A,d3ZoomHandler:T,userSelectionActive:P}=Me(O4,xt),j=$l(N),z=L.useRef(0),B=L.useRef(!1),$=L.useRef();return D4(w),L.useEffect(()=>{if(w.current){const V=w.current.getBoundingClientRect(),U=qE().scaleExtent([S,b]).translateExtent(m),q=yn(w.current).call(U),F=Hr.translate(f.x,f.y).scale(Qi(f.zoom,S,b)),G=[[0,0],[V.width,V.height]],Y=U.constrain()(F,G,m);U.transform(q,Y),U.wheelDelta(iw),M.setState({d3Zoom:U,d3Selection:q,d3ZoomHandler:q.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:w.current.closest(".react-flow")})}},[]),L.useEffect(()=>{A&&k&&(o&&!j&&!P?A.on("wheel.zoom",V=>{if(no(V,I))return!1;V.preventDefault(),V.stopImmediatePropagation();const U=A.property("__zoom").k||1;if(V.ctrlKey&&s){const ae=Yn(V),ge=iw(V),pe=U*Math.pow(2,ge);k.scaleTo(A,pe,ae,V);return}const q=V.deltaMode===1?20:1;let F=l===ms.Vertical?0:V.deltaX*q,G=l===ms.Horizontal?0:V.deltaY*q;!gd()&&V.shiftKey&&l!==ms.Vertical&&(F=V.deltaY*q,G=0),k.translateBy(A,-(F/U)*a,-(G/U)*a,{internal:!0});const Y=iu(A.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:ie,onViewportChangeEnd:ce}=M.getState();clearTimeout($.current),B.current||(B.current=!0,e==null||e(V,Y),Z==null||Z(Y)),B.current&&(t==null||t(V,Y),ie==null||ie(Y),$.current=setTimeout(()=>{n==null||n(V,Y),ce==null||ce(Y),B.current=!1},150))},{passive:!1}):typeof T<"u"&&A.on("wheel.zoom",function(V,U){if(!y&&V.type==="wheel"&&!V.ctrlKey||no(V,I))return null;V.preventDefault(),T.call(this,V,U)},{passive:!1}))},[P,o,l,A,k,T,j,s,y,I,e,t,n]),L.useEffect(()=>{k&&k.on("start",V=>{var F,G;if(!V.sourceEvent||V.sourceEvent.internal)return null;z.current=(F=V.sourceEvent)==null?void 0:F.button;const{onViewportChangeStart:U}=M.getState(),q=iu(V.transform);C.current=!0,E.current=q,((G=V.sourceEvent)==null?void 0:G.type)==="mousedown"&&M.setState({paneDragging:!0}),U==null||U(q),e==null||e(V.sourceEvent,q)})},[k,e]),L.useEffect(()=>{k&&(P&&!C.current?k.on("zoom",null):P||k.on("zoom",V=>{var q;const{onViewportChange:U}=M.getState();if(M.setState({transform:[V.transform.x,V.transform.y,V.transform.k]}),x.current=!!(r&&rw(h,z.current??0)),(t||U)&&!((q=V.sourceEvent)!=null&&q.internal)){const F=iu(V.transform);U==null||U(F),t==null||t(V.sourceEvent,F)}}))},[P,k,t,h,r]),L.useEffect(()=>{k&&k.on("end",V=>{if(!V.sourceEvent||V.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=M.getState();if(C.current=!1,M.setState({paneDragging:!1}),r&&rw(h,z.current??0)&&!x.current&&r(V.sourceEvent),x.current=!1,(n||U)&&L4(E.current,V.transform)){const q=iu(V.transform);E.current=q,clearTimeout(O.current),O.current=setTimeout(()=>{U==null||U(q),n==null||n(V.sourceEvent,q)},o?150:0)}})},[k,o,h,n,r]),L.useEffect(()=>{k&&k.filter(V=>{const U=j||i,q=s&&V.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&V.button===1&&V.type==="mousedown"&&(no(V,"react-flow__node")||no(V,"react-flow__edge")))return!0;if(!h&&!U&&!o&&!u&&!s||P||!u&&V.type==="dblclick"||no(V,I)&&V.type==="wheel"||no(V,R)&&(V.type!=="wheel"||o&&V.type==="wheel"&&!j)||!s&&V.ctrlKey&&V.type==="wheel"||!U&&!o&&!q&&V.type==="wheel"||!h&&(V.type==="mousedown"||V.type==="touchstart")||Array.isArray(h)&&!h.includes(V.button)&&V.type==="mousedown")return!1;const F=Array.isArray(h)&&h.includes(V.button)||!V.button||V.button<=1;return(!V.ctrlKey||V.type==="wheel")&&F})},[P,k,i,s,o,u,h,d,j]),W.createElement("div",{className:"react-flow__renderer",ref:w,style:Rm},v)},V4=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function M4(){const{userSelectionActive:t,userSelectionRect:e}=Me(V4,xt);return t&&e?W.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function sw(t,e){const n=e.parentNode||e.parentId,r=t.find(i=>i.id===n);if(r){const i=e.position.x+e.width-r.width,s=e.position.y+e.height-r.height;if(i>0||s>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),e.position.x<0){const o=Math.abs(e.position.x);r.position.x=r.position.x-o,r.style.width+=o,e.position.x=0}if(e.position.y<0){const o=Math.abs(e.position.y);r.position.y=r.position.y-o,r.style.height+=o,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Sb(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const s=t.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&sw(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&sw(r,o);break}case"remove":return r}return r.push(o),r},n)}function Tb(t,e){return Sb(t,e)}function j4(t,e){return Sb(t,e)}const Si=(t,e)=>({id:t,type:"select",selected:e});function bo(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Si(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Si(r.id,!1))),n},[])}const gf=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},$4=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Ib=L.memo(({isSelecting:t,selectionMode:e=Ml.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const f=L.useRef(null),m=ct(),S=L.useRef(0),b=L.useRef(0),N=L.useRef(),{userSelectionActive:y,elementsSelectable:v,dragging:I}=Me($4,xt),R=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,b.current=0},O=T=>{s==null||s(T),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},M=T=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){T.preventDefault();return}o==null||o(T)},C=a?T=>a(T):void 0,x=T=>{const{resetSelectedElements:P,domNode:j}=m.getState();if(N.current=j==null?void 0:j.getBoundingClientRect(),!v||!t||T.button!==0||T.target!==f.current||!N.current)return;const{x:z,y:B}=Ui(T,N.current);P(),m.setState({userSelectionRect:{width:0,height:0,startX:z,startY:B,x:z,y:B}}),r==null||r(T)},w=T=>{const{userSelectionRect:P,nodeInternals:j,edges:z,transform:B,onNodesChange:$,onEdgesChange:V,nodeOrigin:U,getNodes:q}=m.getState();if(!t||!N.current||!P)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const F=Ui(T,N.current),G=P.startX??0,Y=P.startY??0,Z={...P,x:F.x<G?F.x:G,y:F.y<Y?F.y:Y,width:Math.abs(F.x-G),height:Math.abs(F.y-Y)},ie=q(),ce=ob(j,Z,B,e===Ml.Partial,!0,U),ae=ab(ce,z).map(pe=>pe.id),ge=ce.map(pe=>pe.id);if(S.current!==ge.length){S.current=ge.length;const pe=bo(ie,ge);pe.length&&($==null||$(pe))}if(b.current!==ae.length){b.current=ae.length;const pe=bo(z,ae);pe.length&&(V==null||V(pe))}m.setState({userSelectionRect:Z})},E=T=>{if(T.button!==0)return;const{userSelectionRect:P}=m.getState();!y&&P&&T.target===f.current&&(O==null||O(T)),m.setState({nodesSelectionActive:S.current>0}),R(),i==null||i(T)},k=T=>{y&&(m.setState({nodesSelectionActive:S.current>0}),i==null||i(T)),R()},A=v&&(t||y);return W.createElement("div",{className:Et(["react-flow__pane",{dragging:I,selection:t}]),onClick:A?void 0:gf(O,f),onContextMenu:gf(M,f),onWheel:gf(C,f),onMouseEnter:A?void 0:l,onMouseDown:A?x:void 0,onMouseMove:A?w:u,onMouseUp:A?E:void 0,onMouseLeave:A?k:d,ref:f,style:Rm},h,W.createElement(M4,null))});Ib.displayName="Pane";function Cb(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:Cb(r,e):!1}function ow(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function F4(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!Cb(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function U4(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function kb(t,e,n,r,i=[0,0],s){const o=U4(t,t.extent||r);let a=o;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=n.get(l),{x:f,y:m}=bs(h,i).positionAbsolute;a=h&&Ln(f)&&Ln(m)&&Ln(h.width)&&Ln(h.height)?[[f+t.width*i[0],m+t.height*i[1]],[f+h.width-t.width+t.width*i[0],m+h.height-t.height+t.height*i[1]]]:a}else s==null||s("005",Jr.error005()),a=o;else if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:f,y:m}=bs(h,i).positionAbsolute;a=[[t.extent[0][0]+f,t.extent[0][1]+m],[t.extent[1][0]+f,t.extent[1][1]+m]]}let u={x:0,y:0};if(l){const h=n.get(l);u=bs(h,i).positionAbsolute}const d=a&&a!=="parent"?Em(e,a):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function mf({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const aw=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const s=Array.from(i),o=e.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...xm(l)}})};function Va(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function Hp({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:l}=e.getState(),u=a.get(t);if(!u){l==null||l("012",Jr.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):i([t])}function Ab(){const t=ct();return L.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=t.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:s?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function yf(t){return(e,n,r)=>t==null?void 0:t(e,r)}function Rb({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=ct(),[l,u]=L.useState(!1),d=L.useRef([]),h=L.useRef({x:null,y:null}),f=L.useRef(0),m=L.useRef(null),S=L.useRef({x:0,y:0}),b=L.useRef(null),N=L.useRef(!1),y=L.useRef(!1),v=L.useRef(!1),I=Ab();return L.useEffect(()=>{if(t!=null&&t.current){const R=yn(t.current),O=({x,y:w})=>{const{nodeInternals:E,onNodeDrag:k,onSelectionDrag:A,updateNodePositions:T,nodeExtent:P,snapGrid:j,snapToGrid:z,nodeOrigin:B,onError:$}=a.getState();h.current={x,y:w};let V=!1,U={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&P){const F=oc(d.current,B);U=Vl(F)}if(d.current=d.current.map(F=>{const G={x:x-F.distance.x,y:w-F.distance.y};z&&(G.x=j[0]*Math.round(G.x/j[0]),G.y=j[1]*Math.round(G.y/j[1]));const Y=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];d.current.length>1&&P&&!F.extent&&(Y[0][0]=F.positionAbsolute.x-U.x+P[0][0],Y[1][0]=F.positionAbsolute.x+(F.width??0)-U.x2+P[1][0],Y[0][1]=F.positionAbsolute.y-U.y+P[0][1],Y[1][1]=F.positionAbsolute.y+(F.height??0)-U.y2+P[1][1]);const Z=kb(F,G,E,Y,B,$);return V=V||F.position.x!==Z.position.x||F.position.y!==Z.position.y,F.position=Z.position,F.positionAbsolute=Z.positionAbsolute,F}),!V)return;T(d.current,!0,!0),u(!0);const q=i?k:yf(A);if(q&&b.current){const[F,G]=mf({nodeId:i,dragItems:d.current,nodeInternals:E});q(b.current,F,G)}},M=()=>{if(!m.current)return;const[x,w]=KE(S.current,m.current);if(x!==0||w!==0){const{transform:E,panBy:k}=a.getState();h.current.x=(h.current.x??0)-x/E[2],h.current.y=(h.current.y??0)-w/E[2],k({x,y:w})&&O(h.current)}f.current=requestAnimationFrame(M)},C=x=>{var B;const{nodeInternals:w,multiSelectionActive:E,nodesDraggable:k,unselectNodesAndEdges:A,onNodeDragStart:T,onSelectionDragStart:P}=a.getState();y.current=!0;const j=i?T:yf(P);(!o||!s)&&!E&&i&&((B=w.get(i))!=null&&B.selected||A()),i&&s&&o&&Hp({id:i,store:a,nodeRef:t});const z=I(x);if(h.current=z,d.current=F4(w,k,z,i),j&&d.current){const[$,V]=mf({nodeId:i,dragItems:d.current,nodeInternals:w});j(x.sourceEvent,$,V)}};if(e)R.on(".drag",null);else{const x=NE().on("start",w=>{const{domNode:E,nodeDragThreshold:k}=a.getState();k===0&&C(w),v.current=!1;const A=I(w);h.current=A,m.current=(E==null?void 0:E.getBoundingClientRect())||null,S.current=Ui(w.sourceEvent,m.current)}).on("drag",w=>{var T,P;const E=I(w),{autoPanOnNodeDrag:k,nodeDragThreshold:A}=a.getState();if(w.sourceEvent.type==="touchmove"&&w.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!N.current&&y.current&&k&&(N.current=!0,M()),!y.current){const j=E.xSnapped-(((T=h==null?void 0:h.current)==null?void 0:T.x)??0),z=E.ySnapped-(((P=h==null?void 0:h.current)==null?void 0:P.y)??0);Math.sqrt(j*j+z*z)>A&&C(w)}(h.current.x!==E.xSnapped||h.current.y!==E.ySnapped)&&d.current&&y.current&&(b.current=w.sourceEvent,S.current=Ui(w.sourceEvent,m.current),O(E))}}).on("end",w=>{if(!(!y.current||v.current)&&(u(!1),N.current=!1,y.current=!1,cancelAnimationFrame(f.current),d.current)){const{updateNodePositions:E,nodeInternals:k,onNodeDragStop:A,onSelectionDragStop:T}=a.getState(),P=i?A:yf(T);if(E(d.current,!1,!1),P){const[j,z]=mf({nodeId:i,dragItems:d.current,nodeInternals:k});P(w.sourceEvent,j,z)}}}).filter(w=>{const E=w.target;return!w.button&&(!n||!ow(E,`.${n}`,t))&&(!r||ow(E,r,t))});return R.call(x),()=>{R.on(".drag",null)}}}},[t,e,n,r,s,a,i,o,I]),l}function Nb(){const t=ct();return L.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=o().filter(v=>v.selected&&(v.draggable||d&&typeof v.draggable>"u")),f=a?l[0]:5,m=a?l[1]:5,S=n.isShiftPressed?4:1,b=n.x*f*S,N=n.y*m*S,y=h.map(v=>{if(v.positionAbsolute){const I={x:v.positionAbsolute.x+b,y:v.positionAbsolute.y+N};a&&(I.x=l[0]*Math.round(I.x/l[0]),I.y=l[1]*Math.round(I.y/l[1]));const{positionAbsolute:R,position:O}=kb(v,I,r,i,void 0,u);v.position=O,v.positionAbsolute=R}return v});s(y,!0,!1)},[])}const Po={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ma=t=>{const e=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:f,onMouseLeave:m,onContextMenu:S,onDoubleClick:b,style:N,className:y,isDraggable:v,isSelectable:I,isConnectable:R,isFocusable:O,selectNodesOnDrag:M,sourcePosition:C,targetPosition:x,hidden:w,resizeObserver:E,dragHandle:k,zIndex:A,isParent:T,noDragClassName:P,noPanClassName:j,initialized:z,disableKeyboardA11y:B,ariaLabel:$,rfId:V,hasHandleBounds:U})=>{const q=ct(),F=L.useRef(null),G=L.useRef(null),Y=L.useRef(C),Z=L.useRef(x),ie=L.useRef(r),ce=I||v||d||h||f||m,ae=Nb(),ge=Va(n,q.getState,h),pe=Va(n,q.getState,f),Ie=Va(n,q.getState,m),Oe=Va(n,q.getState,S),qe=Va(n,q.getState,b),$e=me=>{const{nodeDragThreshold:te}=q.getState();if(I&&(!M||!v||te>0)&&Hp({id:n,store:q,nodeRef:F}),d){const Ee=q.getState().nodeInternals.get(n);Ee&&d(me,{...Ee})}},Ne=me=>{if(!$p(me)&&!B)if(XE.includes(me.key)&&I){const te=me.key==="Escape";Hp({id:n,store:q,unselect:te,nodeRef:F})}else v&&u&&Object.prototype.hasOwnProperty.call(Po,me.key)&&(q.setState({ariaLiveMessage:`Moved selected node ${me.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),ae({x:Po[me.key].x,y:Po[me.key].y,isShiftPressed:me.shiftKey}))};L.useEffect(()=>()=>{G.current&&(E==null||E.unobserve(G.current),G.current=null)},[]),L.useEffect(()=>{if(F.current&&!w){const me=F.current;(!z||!U||G.current!==me)&&(G.current&&(E==null||E.unobserve(G.current)),E==null||E.observe(me),G.current=me)}},[w,z,U]),L.useEffect(()=>{const me=ie.current!==r,te=Y.current!==C,Ee=Z.current!==x;F.current&&(me||te||Ee)&&(me&&(ie.current=r),te&&(Y.current=C),Ee&&(Z.current=x),q.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,r,C,x]);const nt=Rb({nodeRef:F,disabled:w||!v,noDragClassName:P,handleSelector:k,nodeId:n,isSelectable:I,selectNodesOnDrag:M});return w?null:W.createElement("div",{className:Et(["react-flow__node",`react-flow__node-${r}`,{[j]:v},y,{selected:u,selectable:I,parent:T,dragging:nt}]),ref:F,style:{zIndex:A,transform:`translate(${a}px,${l}px)`,pointerEvents:ce?"all":"none",visibility:z?"visible":"hidden",...N},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ge,onMouseMove:pe,onMouseLeave:Ie,onContextMenu:Oe,onClick:$e,onDoubleClick:qe,onKeyDown:O?Ne:void 0,tabIndex:O?0:void 0,role:O?"button":void 0,"aria-describedby":B?void 0:`${wb}-${V}`,"aria-label":$},W.createElement(s4,{value:n},W.createElement(t,{id:n,data:i,type:r,xPos:s,yPos:o,selected:u,isConnectable:R,sourcePosition:C,targetPosition:x,dragging:nt,dragHandle:k,zIndex:A})))};return e.displayName="NodeWrapper",L.memo(e)};const B4=t=>{const e=t.getNodes().filter(n=>n.selected);return{...oc(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function H4({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=ct(),{width:i,height:s,x:o,y:a,transformString:l,userSelectionActive:u}=Me(B4,xt),d=Nb(),h=L.useRef(null);if(L.useEffect(()=>{var S;n||(S=h.current)==null||S.focus({preventScroll:!0})},[n]),Rb({nodeRef:h}),u||!i||!s)return null;const f=t?S=>{const b=r.getState().getNodes().filter(N=>N.selected);t(S,b)}:void 0,m=S=>{Object.prototype.hasOwnProperty.call(Po,S.key)&&d({x:Po[S.key].x,y:Po[S.key].y,isShiftPressed:S.shiftKey})};return W.createElement("div",{className:Et(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},W.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:i,height:s,top:a,left:o}}))}var q4=L.memo(H4);const W4=t=>t.nodesSelectionActive,Pb=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:f,selectionMode:m,onSelectionStart:S,onSelectionEnd:b,multiSelectionKeyCode:N,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:I,zoomOnScroll:R,zoomOnPinch:O,panOnScroll:M,panOnScrollSpeed:C,panOnScrollMode:x,zoomOnDoubleClick:w,panOnDrag:E,defaultViewport:k,translateExtent:A,minZoom:T,maxZoom:P,preventScrolling:j,onSelectionContextMenu:z,noWheelClassName:B,noPanClassName:$,disableKeyboardA11y:V})=>{const U=Me(W4),q=$l(h),F=$l(y),G=F||E,Y=F||M,Z=q||f&&G!==!0;return P4({deleteKeyCode:a,multiSelectionKeyCode:N}),W.createElement(z4,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:I,zoomOnScroll:R,zoomOnPinch:O,panOnScroll:Y,panOnScrollSpeed:C,panOnScrollMode:x,zoomOnDoubleClick:w,panOnDrag:!q&&G,defaultViewport:k,translateExtent:A,minZoom:T,maxZoom:P,zoomActivationKeyCode:v,preventScrolling:j,noWheelClassName:B,noPanClassName:$},W.createElement(Ib,{onSelectionStart:S,onSelectionEnd:b,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:G,isSelecting:!!Z,selectionMode:m},t,U&&W.createElement(q4,{onSelectionContextMenu:z,noPanClassName:$,disableKeyboardA11y:V})))};Pb.displayName="FlowRenderer";var K4=L.memo(Pb);function G4(t){return Me(L.useCallback(n=>t?ob(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function Q4(t){const e={input:Ma(t.input||gb),default:Ma(t.default||Bp),output:Ma(t.output||yb),group:Ma(t.group||Am)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Ma(t[s]||Bp),i),n);return{...e,...r}}const Y4=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},X4=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Db=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=Me(X4,xt),a=G4(t.onlyRenderVisibleElements),l=L.useRef(),u=L.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const f=h.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(f)});return l.current=d,d},[]);return L.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),W.createElement("div",{className:"react-flow__nodes",style:Rm},a.map(d=>{var O,M,C;let h=d.type||"default";t.nodeTypes[h]||(o==null||o("003",Jr.error003(h)),h="default");const f=t.nodeTypes[h]||t.nodeTypes.default,m=!!(d.draggable||e&&typeof d.draggable>"u"),S=!!(d.selectable||i&&typeof d.selectable>"u"),b=!!(d.connectable||n&&typeof d.connectable>"u"),N=!!(d.focusable||r&&typeof d.focusable>"u"),y=t.nodeExtent?Em(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,v=(y==null?void 0:y.x)??0,I=(y==null?void 0:y.y)??0,R=Y4({x:v,y:I,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return W.createElement(f,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||oe.Bottom,targetPosition:d.targetPosition||oe.Top,hidden:d.hidden,xPos:v,yPos:I,xPosOrigin:R.x,yPosOrigin:R.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:S,isConnectable:b,isFocusable:N,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((O=d[tt])==null?void 0:O.z)??0,isParent:!!((M=d[tt])!=null&&M.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[tt])!=null&&C.handleBounds)})}))};Db.displayName="NodeRenderer";var J4=L.memo(Db);const Z4=(t,e,n)=>n===oe.Left?t-e:n===oe.Right?t+e:t,e5=(t,e,n)=>n===oe.Top?t-e:n===oe.Bottom?t+e:t,lw="react-flow__edgeupdater",cw=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>W.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Et([lw,`${lw}-${a}`]),cx:Z4(e,r,t),cy:e5(n,r,t),r,stroke:"transparent",fill:"transparent"}),t5=()=>!0;var ro=t=>{const e=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:S,labelBgBorderRadius:b,style:N,source:y,target:v,sourceX:I,sourceY:R,targetX:O,targetY:M,sourcePosition:C,targetPosition:x,elementsSelectable:w,hidden:E,sourceHandleId:k,targetHandleId:A,onContextMenu:T,onMouseEnter:P,onMouseMove:j,onMouseLeave:z,reconnectRadius:B,onReconnect:$,onReconnectStart:V,onReconnectEnd:U,markerEnd:q,markerStart:F,rfId:G,ariaLabel:Y,isFocusable:Z,isReconnectable:ie,pathOptions:ce,interactionWidth:ae,disableKeyboardA11y:ge})=>{const pe=L.useRef(null),[Ie,Oe]=L.useState(!1),[qe,$e]=L.useState(!1),Ne=ct(),nt=L.useMemo(()=>`url('#${Fp(F,G)}')`,[F,G]),me=L.useMemo(()=>`url('#${Fp(q,G)}')`,[q,G]);if(E)return null;const te=st=>{var Xt;const{edges:dt,addSelectedEdges:Cn,unselectNodesAndEdges:kn,multiSelectionActive:dn}=Ne.getState(),hn=dt.find($n=>$n.id===n);hn&&(w&&(Ne.setState({nodesSelectionActive:!1}),hn.selected&&dn?(kn({nodes:[],edges:[hn]}),(Xt=pe.current)==null||Xt.blur()):Cn([n])),o&&o(st,hn))},Ee=za(n,Ne.getState,a),ut=za(n,Ne.getState,T),un=za(n,Ne.getState,P),In=za(n,Ne.getState,j),Wt=za(n,Ne.getState,z),Pt=(st,dt)=>{if(st.button!==0)return;const{edges:Cn,isValidConnection:kn}=Ne.getState(),dn=dt?v:y,hn=(dt?A:k)||null,Xt=dt?"target":"source",$n=kn||t5,ai=dt,Fn=Cn.find(fn=>fn.id===n);$e(!0),V==null||V(st,Fn,Xt);const Un=fn=>{$e(!1),U==null||U(fn,Fn,Xt)};db({event:st,handleId:hn,nodeId:dn,onConnect:fn=>$==null?void 0:$(Fn,fn),isTarget:ai,getState:Ne.getState,setState:Ne.setState,isValidConnection:$n,edgeUpdaterType:Xt,onReconnectEnd:Un})},We=st=>Pt(st,!0),ke=st=>Pt(st,!1),Pe=()=>Oe(!0),ze=()=>Oe(!1),Dt=!w&&!o,ur=st=>{var dt;if(!ge&&XE.includes(st.key)&&w){const{unselectNodesAndEdges:Cn,addSelectedEdges:kn,edges:dn}=Ne.getState();st.key==="Escape"?((dt=pe.current)==null||dt.blur(),Cn({edges:[dn.find(Xt=>Xt.id===n)]})):kn([n])}};return W.createElement("g",{className:Et(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:Dt,updating:Ie}]),onClick:te,onDoubleClick:Ee,onContextMenu:ut,onMouseEnter:un,onMouseMove:In,onMouseLeave:Wt,onKeyDown:Z?ur:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${y} to ${v}`,"aria-describedby":Z?`${_b}-${G}`:void 0,ref:pe},!qe&&W.createElement(t,{id:n,source:y,target:v,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:S,labelBgBorderRadius:b,data:s,style:N,sourceX:I,sourceY:R,targetX:O,targetY:M,sourcePosition:C,targetPosition:x,sourceHandleId:k,targetHandleId:A,markerStart:nt,markerEnd:me,pathOptions:ce,interactionWidth:ae}),ie&&W.createElement(W.Fragment,null,(ie==="source"||ie===!0)&&W.createElement(cw,{position:C,centerX:I,centerY:R,radius:B,onMouseDown:We,onMouseEnter:Pe,onMouseOut:ze,type:"source"}),(ie==="target"||ie===!0)&&W.createElement(cw,{position:x,centerX:O,centerY:M,radius:B,onMouseDown:ke,onMouseEnter:Pe,onMouseOut:ze,type:"target"})))};return e.displayName="EdgeWrapper",L.memo(e)};function n5(t){const e={default:ro(t.default||yd),straight:ro(t.bezier||Tm),step:ro(t.step||Sm),smoothstep:ro(t.step||oh),simplebezier:ro(t.simplebezier||bm)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=ro(t[s]||yd),i),n);return{...e,...r}}function uw(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,o=(n==null?void 0:n.height)||e.height;switch(t){case oe.Top:return{x:r+s/2,y:i};case oe.Right:return{x:r+s,y:i+o/2};case oe.Bottom:return{x:r+s/2,y:i+o};case oe.Left:return{x:r,y:i+o/2}}}function dw(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const r5=(t,e,n,r,i,s)=>{const o=uw(n,t,e),a=uw(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function i5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Vl({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:a/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),f=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*f)>0}function hw(t){var r,i,s,o,a;const e=((r=t==null?void 0:t[tt])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const s5=[{level:0,isMaxLevel:!0,edges:[]}];function o5(t,e,n=!1){let r=-1;const i=t.reduce((o,a)=>{var d,h;const l=Ln(a.zIndex);let u=l?a.zIndex:0;if(n){const f=e.get(a.target),m=e.get(a.source),S=a.selected||(f==null?void 0:f.selected)||(m==null?void 0:m.selected),b=Math.max(((d=m==null?void 0:m[tt])==null?void 0:d.z)||0,((h=f==null?void 0:f[tt])==null?void 0:h.z)||0,1e3);u=(l?a.zIndex:0)+(S?b:0)}return o[u]?o[u].push(a):o[u]=[a],r=u>r?u:r,o},{}),s=Object.entries(i).map(([o,a])=>{const l=+o;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?s5:s}function a5(t,e,n){const r=Me(L.useCallback(i=>t?i.edges.filter(s=>{const o=e.get(s.source),a=e.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&i5({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return o5(r,e,n)}const l5=({color:t="none",strokeWidth:e=1})=>W.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),c5=({color:t="none",strokeWidth:e=1})=>W.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),fw={[md.Arrow]:l5,[md.ArrowClosed]:c5};function u5(t){const e=ct();return L.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(fw,t)?fw[t]:((s=(i=e.getState()).onError)==null||s.call(i,"009",Jr.error009(t)),null)},[t])}const d5=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=u5(e);return l?W.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},W.createElement(l,{color:n,strokeWidth:o})):null},h5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Fp(o,e);r.includes(a)||(i.push({id:a,color:o.color||t,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},Lb=({defaultColor:t,rfId:e})=>{const n=Me(L.useCallback(h5({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return W.createElement("defs",null,n.map(r=>W.createElement(d5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Lb.displayName="MarkerDefinitions";var f5=L.memo(Lb);const p5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Ob=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:S,reconnectRadius:b,children:N,disableKeyboardA11y:y})=>{const{edgesFocusable:v,edgesUpdatable:I,elementsSelectable:R,width:O,height:M,connectionMode:C,nodeInternals:x,onError:w}=Me(p5,xt),E=a5(e,x,n);return O?W.createElement(W.Fragment,null,E.map(({level:k,edges:A,isMaxLevel:T})=>W.createElement("svg",{key:k,style:{zIndex:k},width:O,height:M,className:"react-flow__edges react-flow__container"},T&&W.createElement(f5,{defaultColor:t,rfId:r}),W.createElement("g",null,A.map(P=>{const[j,z,B]=hw(x.get(P.source)),[$,V,U]=hw(x.get(P.target));if(!B||!U)return null;let q=P.type||"default";i[q]||(w==null||w("011",Jr.error011(q)),q="default");const F=i[q]||i.default,G=C===Ns.Strict?V.target:(V.target??[]).concat(V.source??[]),Y=dw(z.source,P.sourceHandle),Z=dw(G,P.targetHandle),ie=(Y==null?void 0:Y.position)||oe.Bottom,ce=(Z==null?void 0:Z.position)||oe.Top,ae=!!(P.focusable||v&&typeof P.focusable>"u"),ge=P.reconnectable||P.updatable,pe=typeof f<"u"&&(ge||I&&typeof ge>"u");if(!Y||!Z)return w==null||w("008",Jr.error008(Y,P)),null;const{sourceX:Ie,sourceY:Oe,targetX:qe,targetY:$e}=r5(j,Y,ie,$,Z,ce);return W.createElement(F,{key:P.id,id:P.id,className:Et([P.className,s]),type:q,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:Ie,sourceY:Oe,targetX:qe,targetY:$e,sourcePosition:ie,targetPosition:ce,elementsSelectable:R,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:S,reconnectRadius:b,rfId:r,ariaLabel:P.ariaLabel,isFocusable:ae,isReconnectable:pe,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:y})})))),N):null};Ob.displayName="EdgeRenderer";var g5=L.memo(Ob);const m5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function y5({children:t}){const e=Me(m5);return W.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function v5(t){const e=Ir(),n=L.useRef(!1);L.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const w5={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top},zb=({nodeId:t,handleType:e,style:n,type:r=Ci.Bezier,CustomComponent:i,connectionStatus:s})=>{var M,C,x;const{fromNode:o,handleId:a,toX:l,toY:u,connectionMode:d}=Me(L.useCallback(w=>({fromNode:w.nodeInternals.get(t),handleId:w.connectionHandleId,toX:(w.connectionPosition.x-w.transform[0])/w.transform[2],toY:(w.connectionPosition.y-w.transform[1])/w.transform[2],connectionMode:w.connectionMode}),[t]),xt),h=(M=o==null?void 0:o[tt])==null?void 0:M.handleBounds;let f=h==null?void 0:h[e];if(d===Ns.Loose&&(f=f||(h==null?void 0:h[e==="source"?"target":"source"])),!o||!f)return null;const m=a?f.find(w=>w.id===a):f[0],S=m?m.x+m.width/2:(o.width??0)/2,b=m?m.y+m.height/2:o.height??0,N=(((C=o.positionAbsolute)==null?void 0:C.x)??0)+S,y=(((x=o.positionAbsolute)==null?void 0:x.y)??0)+b,v=m==null?void 0:m.position,I=v?w5[v]:null;if(!v||!I)return null;if(i)return W.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:m,fromX:N,fromY:y,toX:l,toY:u,fromPosition:v,toPosition:I,connectionStatus:s});let R="";const O={sourceX:N,sourceY:y,sourcePosition:v,targetX:l,targetY:u,targetPosition:I};return r===Ci.Bezier?[R]=Im(O):r===Ci.Step?[R]=jl({...O,borderRadius:0}):r===Ci.SmoothStep?[R]=jl(O):r===Ci.SimpleBezier?[R]=tb(O):R=`M${N},${y} ${l},${u}`,W.createElement("path",{d:R,fill:"none",className:"react-flow__connection-path",style:n})};zb.displayName="ConnectionLine";const _5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function x5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:l,connectionStatus:u}=Me(_5,xt);return!(i&&s&&a&&o)?null:W.createElement("svg",{style:t,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},W.createElement("g",{className:Et(["react-flow__connection",u])},W.createElement(zb,{nodeId:i,handleType:s,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function pw(t,e){return L.useRef(null),ct(),L.useMemo(()=>e(t),[t])}const Vb=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:S,onSelectionStart:b,onSelectionEnd:N,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:I,connectionLineContainerStyle:R,selectionKeyCode:O,selectionOnDrag:M,selectionMode:C,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:E,deleteKeyCode:k,onlyRenderVisibleElements:A,elementsSelectable:T,selectNodesOnDrag:P,defaultViewport:j,translateExtent:z,minZoom:B,maxZoom:$,preventScrolling:V,defaultMarkerColor:U,zoomOnScroll:q,zoomOnPinch:F,panOnScroll:G,panOnScrollSpeed:Y,panOnScrollMode:Z,zoomOnDoubleClick:ie,panOnDrag:ce,onPaneClick:ae,onPaneMouseEnter:ge,onPaneMouseMove:pe,onPaneMouseLeave:Ie,onPaneScroll:Oe,onPaneContextMenu:qe,onEdgeContextMenu:$e,onEdgeMouseEnter:Ne,onEdgeMouseMove:nt,onEdgeMouseLeave:me,onReconnect:te,onReconnectStart:Ee,onReconnectEnd:ut,reconnectRadius:un,noDragClassName:In,noWheelClassName:Wt,noPanClassName:Pt,elevateEdgesOnSelect:We,disableKeyboardA11y:ke,nodeOrigin:Pe,nodeExtent:ze,rfId:Dt})=>{const ur=pw(t,Q4),st=pw(e,n5);return v5(s),W.createElement(K4,{onPaneClick:ae,onPaneMouseEnter:ge,onPaneMouseMove:pe,onPaneMouseLeave:Ie,onPaneContextMenu:qe,onPaneScroll:Oe,deleteKeyCode:k,selectionKeyCode:O,selectionOnDrag:M,selectionMode:C,onSelectionStart:b,onSelectionEnd:N,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:E,elementsSelectable:T,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:q,zoomOnPinch:F,zoomOnDoubleClick:ie,panOnScroll:G,panOnScrollSpeed:Y,panOnScrollMode:Z,panOnDrag:ce,defaultViewport:j,translateExtent:z,minZoom:B,maxZoom:$,onSelectionContextMenu:S,preventScrolling:V,noDragClassName:In,noWheelClassName:Wt,noPanClassName:Pt,disableKeyboardA11y:ke},W.createElement(y5,null,W.createElement(g5,{edgeTypes:st,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:A,onEdgeContextMenu:$e,onEdgeMouseEnter:Ne,onEdgeMouseMove:nt,onEdgeMouseLeave:me,onReconnect:te,onReconnectStart:Ee,onReconnectEnd:ut,reconnectRadius:un,defaultMarkerColor:U,noPanClassName:Pt,elevateEdgesOnSelect:!!We,disableKeyboardA11y:ke,rfId:Dt},W.createElement(x5,{style:v,type:y,component:I,containerStyle:R})),W.createElement("div",{className:"react-flow__edgelabel-renderer"}),W.createElement(J4,{nodeTypes:ur,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:P,onlyRenderVisibleElements:A,noPanClassName:Pt,noDragClassName:In,disableKeyboardA11y:ke,nodeOrigin:Pe,nodeExtent:ze,rfId:Dt})))};Vb.displayName="GraphView";var E5=L.memo(Vb);const qp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],wi={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:qp,nodeExtent:qp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ns.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:e4,isValidConnection:void 0},b5=()=>mA((t,e)=>({...wi,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=e();t({nodeInternals:pf(n,r,i,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?pf(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:f}=new window.DOMMatrixReadOnly(h.transform),m=n.reduce((b,N)=>{const y=i.get(N.id);if(y!=null&&y.hidden)i.set(y.id,{...y,[tt]:{...y[tt],handleBounds:void 0}});else if(y){const v=xm(N.nodeElement);!!(v.width&&v.height&&(y.width!==v.width||y.height!==v.height||N.forceUpdate))&&(i.set(y.id,{...y,[tt]:{...y[tt],handleBounds:{source:aw(".source",N.nodeElement,f,u),target:aw(".target",N.nodeElement,f,u)}},...v}),b.push({id:y.id,type:"dimensions",dimensions:v}))}return b},[]);Eb(i,u);const S=o||s&&!o&&bb(e,{initial:!0,...a});t({nodeInternals:new Map(i),fitViewOnInitDone:S}),(m==null?void 0:m.length)>0&&(r==null||r(m))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=e(),o=n.map(a=>{const l={id:a.id,type:"position",dragging:i};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const u=Tb(n,a()),d=pf(u,i,o,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(l=>Si(l,!0)):(o=bo(s(),n),a=bo(i,[])),ru({changedNodes:o,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(l=>Si(l,!0)):(o=bo(i,n),a=bo(s(),[])),ru({changedNodes:a,changedEdges:o,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=e(),o=n||s(),a=r||i,l=o.map(d=>(d.selected=!1,Si(d.id,!1))),u=a.map(d=>Si(d.id,!1));ru({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),s=r().filter(a=>a.selected).map(a=>Si(a.id,!1)),o=n.filter(a=>a.selected).map(a=>Si(a.id,!1));ru({changedNodes:s,changedEdges:o,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=Em(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:l}=e();if(!o||!a||!n.x&&!n.y)return!1;const u=Hr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[i,s]],h=o==null?void 0:o.constrain()(u,d,l);return o.transform(a,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:wi.connectionNodeId,connectionHandleId:wi.connectionHandleId,connectionHandleType:wi.connectionHandleType,connectionStatus:wi.connectionStatus,connectionStartHandle:wi.connectionStartHandle,connectionEndHandle:wi.connectionEndHandle}),reset:()=>t({...wi})}),Object.is),Nm=({children:t})=>{const e=L.useRef(null);return e.current||(e.current=b5()),W.createElement(KP,{value:e.current},t)};Nm.displayName="ReactFlowProvider";const Mb=({children:t})=>L.useContext(sh)?W.createElement(W.Fragment,null,t):W.createElement(Nm,null,t);Mb.displayName="ReactFlowWrapper";const S5={input:gb,default:Bp,output:yb,group:Am},T5={default:yd,straight:Tm,step:Sm,smoothstep:oh,simplebezier:bm},I5=[0,0],C5=[15,15],k5={x:0,y:0,zoom:1},A5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},jb=L.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=S5,edgeTypes:o=T5,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:f,onConnect:m,onConnectStart:S,onConnectEnd:b,onClickConnectStart:N,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:I,onNodeMouseLeave:R,onNodeContextMenu:O,onNodeDoubleClick:M,onNodeDragStart:C,onNodeDrag:x,onNodeDragStop:w,onNodesDelete:E,onEdgesDelete:k,onSelectionChange:A,onSelectionDragStart:T,onSelectionDrag:P,onSelectionDragStop:j,onSelectionContextMenu:z,onSelectionStart:B,onSelectionEnd:$,connectionMode:V=Ns.Strict,connectionLineType:U=Ci.Bezier,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:G,deleteKeyCode:Y="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:ie=!1,selectionMode:ce=Ml.Full,panActivationKeyCode:ae="Space",multiSelectionKeyCode:ge=gd()?"Meta":"Control",zoomActivationKeyCode:pe=gd()?"Meta":"Control",snapToGrid:Ie=!1,snapGrid:Oe=C5,onlyRenderVisibleElements:qe=!1,selectNodesOnDrag:$e=!0,nodesDraggable:Ne,nodesConnectable:nt,nodesFocusable:me,nodeOrigin:te=I5,edgesFocusable:Ee,edgesUpdatable:ut,elementsSelectable:un,defaultViewport:In=k5,minZoom:Wt=.5,maxZoom:Pt=2,translateExtent:We=qp,preventScrolling:ke=!0,nodeExtent:Pe,defaultMarkerColor:ze="#b1b1b7",zoomOnScroll:Dt=!0,zoomOnPinch:ur=!0,panOnScroll:st=!1,panOnScrollSpeed:dt=.5,panOnScrollMode:Cn=ms.Free,zoomOnDoubleClick:kn=!0,panOnDrag:dn=!0,onPaneClick:hn,onPaneMouseEnter:Xt,onPaneMouseMove:$n,onPaneMouseLeave:ai,onPaneScroll:Fn,onPaneContextMenu:Un,children:li,onEdgeContextMenu:fn,onEdgeDoubleClick:Bn,onEdgeMouseEnter:Hn,onEdgeMouseMove:ci,onEdgeMouseLeave:qs,onEdgeUpdate:Cr,onEdgeUpdateStart:Ws,onEdgeUpdateEnd:ht,onReconnect:Ks,onReconnectStart:kr,onReconnectEnd:Ar,reconnectRadius:ga=10,edgeUpdaterRadius:ma=10,onNodesChange:qn,onEdgesChange:ya,noDragClassName:va="nodrag",noWheelClassName:dr="nowheel",noPanClassName:ui="nopan",fitView:is=!1,fitViewOptions:di,connectOnClick:Jt=!0,attributionPosition:Gs,proOptions:ss,defaultEdgeOptions:hi,elevateNodesOnSelect:fi=!0,elevateEdgesOnSelect:we=!1,disableKeyboardA11y:ue=!1,autoPanOnConnect:ft=!0,autoPanOnNodeDrag:Je=!0,connectionRadius:Lt=20,isValidConnection:pi,onError:hr,style:An,id:gi,nodeDragThreshold:Ch,..._c},xc)=>{const Qs=gi||"1";return W.createElement("div",{..._c,style:{...An,...A5},ref:xc,className:Et(["react-flow",i]),"data-testid":"rf__wrapper",id:gi},W.createElement(Mb,null,W.createElement(E5,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:I,onNodeMouseLeave:R,onNodeContextMenu:O,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:U,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:G,selectionKeyCode:Z,selectionOnDrag:ie,selectionMode:ce,deleteKeyCode:Y,multiSelectionKeyCode:ge,panActivationKeyCode:ae,zoomActivationKeyCode:pe,onlyRenderVisibleElements:qe,selectNodesOnDrag:$e,defaultViewport:In,translateExtent:We,minZoom:Wt,maxZoom:Pt,preventScrolling:ke,zoomOnScroll:Dt,zoomOnPinch:ur,zoomOnDoubleClick:kn,panOnScroll:st,panOnScrollSpeed:dt,panOnScrollMode:Cn,panOnDrag:dn,onPaneClick:hn,onPaneMouseEnter:Xt,onPaneMouseMove:$n,onPaneMouseLeave:ai,onPaneScroll:Fn,onPaneContextMenu:Un,onSelectionContextMenu:z,onSelectionStart:B,onSelectionEnd:$,onEdgeContextMenu:fn,onEdgeDoubleClick:Bn,onEdgeMouseEnter:Hn,onEdgeMouseMove:ci,onEdgeMouseLeave:qs,onReconnect:Ks??Cr,onReconnectStart:kr??Ws,onReconnectEnd:Ar??ht,reconnectRadius:ga??ma,defaultMarkerColor:ze,noDragClassName:va,noWheelClassName:dr,noPanClassName:ui,elevateEdgesOnSelect:we,rfId:Qs,disableKeyboardA11y:ue,nodeOrigin:te,nodeExtent:Pe}),W.createElement(_4,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:S,onConnectEnd:b,onClickConnectStart:N,onClickConnectEnd:y,nodesDraggable:Ne,nodesConnectable:nt,nodesFocusable:me,edgesFocusable:Ee,edgesUpdatable:ut,elementsSelectable:un,elevateNodesOnSelect:fi,minZoom:Wt,maxZoom:Pt,nodeExtent:Pe,onNodesChange:qn,onEdgesChange:ya,snapToGrid:Ie,snapGrid:Oe,connectionMode:V,translateExtent:We,connectOnClick:Jt,defaultEdgeOptions:hi,fitView:is,fitViewOptions:di,onNodesDelete:E,onEdgesDelete:k,onNodeDragStart:C,onNodeDrag:x,onNodeDragStop:w,onSelectionDrag:P,onSelectionDragStart:T,onSelectionDragStop:j,noPanClassName:ui,nodeOrigin:te,rfId:Qs,autoPanOnConnect:ft,autoPanOnNodeDrag:Je,onError:hr,connectionRadius:Lt,isValidConnection:pi,nodeDragThreshold:Ch}),W.createElement(v4,{onSelectionChange:A}),li,W.createElement(QP,{proOptions:ss,position:Gs}),W.createElement(T4,{rfId:Qs,disableKeyboardA11y:ue})))});jb.displayName="ReactFlow";const R5=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function N5({children:t}){const e=Me(R5);return e?Nl.createPortal(t,e):null}function $b(t){return e=>{const[n,r]=L.useState(e),i=L.useCallback(s=>r(o=>t(s,o)),[]);return[n,r,i]}}const P5=$b(Tb),D5=$b(j4),Fb=({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:u,borderRadius:d,shapeRendering:h,onClick:f,selected:m})=>{const{background:S,backgroundColor:b}=s||{},N=o||S||b;return W.createElement("rect",{className:Et(["react-flow__minimap-node",{selected:m},u]),x:e,y:n,rx:d,ry:d,width:r,height:i,fill:N,stroke:a,strokeWidth:l,shapeRendering:h,onClick:f?y=>f(y,t):void 0})};Fb.displayName="MiniMapNode";var L5=L.memo(Fb);const O5=t=>t.nodeOrigin,z5=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),vf=t=>t instanceof Function?t:()=>t;function V5({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:s=L5,onClick:o}){const a=Me(z5,xt),l=Me(O5),u=vf(e),d=vf(t),h=vf(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return W.createElement(W.Fragment,null,a.map(m=>{const{x:S,y:b}=bs(m,l).positionAbsolute;return W.createElement(s,{key:m.id,x:S,y:b,width:m.width,height:m.height,style:m.style,selected:m.selected,className:h(m),color:u(m),borderRadius:r,strokeColor:d(m),strokeWidth:i,shapeRendering:f,onClick:o,id:m.id})}))}var M5=L.memo(V5);const j5=200,$5=150,F5=t=>{const e=t.getNodes(),n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:e.length>0?JP(oc(e,t.nodeOrigin),n):n,rfId:t.rfId}},U5="react-flow__minimap-desc";function Ub({style:t,className:e,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o=2,nodeComponent:a,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:h="bottom-right",onClick:f,onNodeClick:m,pannable:S=!1,zoomable:b=!1,ariaLabel:N="React Flow mini map",inversePan:y=!1,zoomStep:v=10,offsetScale:I=5}){const R=ct(),O=L.useRef(null),{boundingRect:M,viewBB:C,rfId:x}=Me(F5,xt),w=(t==null?void 0:t.width)??j5,E=(t==null?void 0:t.height)??$5,k=M.width/w,A=M.height/E,T=Math.max(k,A),P=T*w,j=T*E,z=I*T,B=M.x-(P-M.width)/2-z,$=M.y-(j-M.height)/2-z,V=P+z*2,U=j+z*2,q=`${U5}-${x}`,F=L.useRef(0);F.current=T,L.useEffect(()=>{if(O.current){const Z=yn(O.current),ie=ge=>{const{transform:pe,d3Selection:Ie,d3Zoom:Oe}=R.getState();if(ge.sourceEvent.type!=="wheel"||!Ie||!Oe)return;const qe=-ge.sourceEvent.deltaY*(ge.sourceEvent.deltaMode===1?.05:ge.sourceEvent.deltaMode?1:.002)*v,$e=pe[2]*Math.pow(2,qe);Oe.scaleTo(Ie,$e)},ce=ge=>{const{transform:pe,d3Selection:Ie,d3Zoom:Oe,translateExtent:qe,width:$e,height:Ne}=R.getState();if(ge.sourceEvent.type!=="mousemove"||!Ie||!Oe)return;const nt=F.current*Math.max(1,pe[2])*(y?-1:1),me={x:pe[0]-ge.sourceEvent.movementX*nt,y:pe[1]-ge.sourceEvent.movementY*nt},te=[[0,0],[$e,Ne]],Ee=Hr.translate(me.x,me.y).scale(pe[2]),ut=Oe.constrain()(Ee,te,qe);Oe.transform(Ie,ut)},ae=qE().on("zoom",S?ce:null).on("zoom.wheel",b?ie:null);return Z.call(ae),()=>{Z.on("zoom",null)}}},[S,b,y,v]);const G=f?Z=>{const ie=Yn(Z);f(Z,{x:ie[0],y:ie[1]})}:void 0,Y=m?(Z,ie)=>{const ce=R.getState().nodeInternals.get(ie);m(Z,ce)}:void 0;return W.createElement(_m,{position:h,style:t,className:Et(["react-flow__minimap",e]),"data-testid":"rf__minimap"},W.createElement("svg",{width:w,height:E,viewBox:`${B} ${$} ${V} ${U}`,role:"img","aria-labelledby":q,ref:O,onClick:G},N&&W.createElement("title",{id:q},N),W.createElement(M5,{onClick:Y,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),W.createElement("path",{className:"react-flow__minimap-mask",d:`M${B-z},${$-z}h${V+z*2}v${U+z*2}h${-V-z*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fill:l,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}Ub.displayName="MiniMap";var B5=L.memo(Ub);function H5(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},W.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function q5(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},W.createElement("path",{d:"M0 0h32v4.2H0z"}))}function W5(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},W.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function K5(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function G5(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Wa=({children:t,className:e,...n})=>W.createElement("button",{type:"button",className:Et(["react-flow__controls-button",e]),...n},t);Wa.displayName="ControlButton";const Q5=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Bb=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const f=ct(),[m,S]=L.useState(!1),{isInteractive:b,minZoomReached:N,maxZoomReached:y}=Me(Q5,xt),{zoomIn:v,zoomOut:I,fitView:R}=Ir();if(L.useEffect(()=>{S(!0)},[]),!m)return null;const O=()=>{v(),s==null||s()},M=()=>{I(),o==null||o()},C=()=>{R(i),a==null||a()},x=()=>{f.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),l==null||l(!b)};return W.createElement(_m,{className:Et(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&W.createElement(W.Fragment,null,W.createElement(Wa,{onClick:O,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},W.createElement(H5,null)),W.createElement(Wa,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},W.createElement(q5,null))),n&&W.createElement(Wa,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},W.createElement(W5,null)),r&&W.createElement(Wa,{className:"react-flow__controls-interactive",onClick:x,title:"toggle interactivity","aria-label":"toggle interactivity"},b?W.createElement(G5,null):W.createElement(K5,null)),d)};Bb.displayName="Controls";var Y5=L.memo(Bb),rr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(rr||(rr={}));function X5({color:t,dimensions:e,lineWidth:n}){return W.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function J5({color:t,radius:e}){return W.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const Z5={[rr.Dots]:"#91919a",[rr.Lines]:"#eee",[rr.Cross]:"#e2e2e2"},eD={[rr.Dots]:1,[rr.Lines]:1,[rr.Cross]:6},tD=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Hb({id:t,variant:e=rr.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:l}){const u=L.useRef(null),{transform:d,patternId:h}=Me(tD,xt),f=o||Z5[e],m=r||eD[e],S=e===rr.Dots,b=e===rr.Cross,N=Array.isArray(n)?n:[n,n],y=[N[0]*d[2]||1,N[1]*d[2]||1],v=m*d[2],I=b?[v,v]:y,R=S?[v/s,v/s]:[I[0]/s,I[1]/s];return W.createElement("svg",{className:Et(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},W.createElement("pattern",{id:h+t,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R[0]},-${R[1]})`},S?W.createElement(J5,{color:f,radius:v/s}):W.createElement(X5,{dimensions:I,color:f,lineWidth:i})),W.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}Hb.displayName="Background";var nD=L.memo(Hb),Do;(function(t){t.Line="line",t.Handle="handle"})(Do||(Do={}));function rD({width:t,prevWidth:e,height:n,prevHeight:r,invertX:i,invertY:s}){const o=t-e,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}const qb={width:0,height:0,x:0,y:0},iD={...qb,pointerX:0,pointerY:0,aspectRatio:1};function sD({nodeId:t,position:e,variant:n=Do.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:f,onResizeStart:m,onResize:S,onResizeEnd:b}){const N=rb(),y=typeof t=="string"?t:N,v=ct(),I=L.useRef(null),R=L.useRef(iD),O=L.useRef(qb),M=Ab(),C=n===Do.Line?"right":"bottom-right",x=e??C;L.useEffect(()=>{if(!I.current||!y)return;const A=yn(I.current),T=x.includes("right")||x.includes("left"),P=x.includes("bottom")||x.includes("top"),j=x.includes("left"),z=x.includes("top"),B=NE().on("start",$=>{const V=v.getState().nodeInternals.get(y),{xSnapped:U,ySnapped:q}=M($);O.current={width:(V==null?void 0:V.width)??0,height:(V==null?void 0:V.height)??0,x:(V==null?void 0:V.position.x)??0,y:(V==null?void 0:V.position.y)??0},R.current={...O.current,pointerX:U,pointerY:q,aspectRatio:O.current.width/O.current.height},m==null||m($,{...O.current})}).on("drag",$=>{const{nodeInternals:V,triggerNodeChanges:U}=v.getState(),{xSnapped:q,ySnapped:F}=M($),G=V.get(y);if(G){const Y=[],{pointerX:Z,pointerY:ie,width:ce,height:ae,x:ge,y:pe,aspectRatio:Ie}=R.current,{x:Oe,y:qe,width:$e,height:Ne}=O.current,nt=Math.floor(T?q-Z:0),me=Math.floor(P?F-ie:0);let te=Qi(ce+(j?-nt:nt),a,u),Ee=Qi(ae+(z?-me:me),l,d);if(h){const We=te/Ee,ke=T&&P,Pe=T&&!P,ze=P&&!T;te=We<=Ie&&ke||ze?Ee*Ie:te,Ee=We>Ie&&ke||Pe?te/Ie:Ee,te>=u?(te=u,Ee=u/Ie):te<=a&&(te=a,Ee=a/Ie),Ee>=d?(Ee=d,te=d*Ie):Ee<=l&&(Ee=l,te=l*Ie)}const ut=te!==$e,un=Ee!==Ne;if(j||z){const We=j?ge-(te-ce):ge,ke=z?pe-(Ee-ae):pe,Pe=We!==Oe&&ut,ze=ke!==qe&&un;if(Pe||ze){const Dt={id:G.id,type:"position",position:{x:Pe?We:Oe,y:ze?ke:qe}};Y.push(Dt),O.current.x=Dt.position.x,O.current.y=Dt.position.y}}if(ut||un){const We={id:y,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:te,height:Ee}};Y.push(We),O.current.width=te,O.current.height=Ee}if(Y.length===0)return;const In=rD({width:O.current.width,prevWidth:$e,height:O.current.height,prevHeight:Ne,invertX:j,invertY:z}),Wt={...O.current,direction:In};if((f==null?void 0:f($,Wt))===!1)return;S==null||S($,Wt),U(Y)}}).on("end",$=>{const V={id:y,type:"dimensions",resizing:!1};b==null||b($,{...O.current}),v.getState().triggerNodeChanges([V])});return A.call(B),()=>{A.on(".drag",null)}},[y,x,a,l,u,d,h,M,m,S,b]);const w=x.split("-"),E=n===Do.Line?"borderColor":"backgroundColor",k=o?{...i,[E]:o}:i;return W.createElement("div",{className:Et(["react-flow__resize-control","nodrag",...w,n,r]),ref:I,style:k},s)}var gw=L.memo(sD);const oD=["top-left","top-right","bottom-left","bottom-right"],aD=["top","right","bottom","left"];function sa({nodeId:t,isVisible:e=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:f,onResizeStart:m,onResize:S,onResizeEnd:b}){return e?W.createElement(W.Fragment,null,aD.map(N=>W.createElement(gw,{key:N,className:i,style:s,nodeId:t,position:N,variant:Do.Line,color:o,minWidth:a,minHeight:l,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:h,shouldResize:f,onResize:S,onResizeEnd:b})),oD.map(N=>W.createElement(gw,{key:N,className:n,style:r,nodeId:t,position:N,color:o,minWidth:a,minHeight:l,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:h,shouldResize:f,onResize:S,onResizeEnd:b}))):null}/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>L.createElement("svg",{ref:l,...cD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Wb("lucide",i),...a},[...o.map(([u,d])=>L.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(t,e)=>{const n=L.forwardRef(({className:r,...i},s)=>L.createElement(uD,{ref:s,iconNode:e,className:Wb(`lucide-${lD(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=ne("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=ne("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=ne("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=ne("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=ne("BoxSelect",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=ne("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=ne("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=ne("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=ne("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=ne("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=ne("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=ne("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=ne("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=ne("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=ne("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=ne("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=ne("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=ne("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=ne("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ne("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=ne("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=ne("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=ne("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=ne("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=ne("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=ne("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=ne("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=ne("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=ne("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=ne("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=ne("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=ne("PinOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12",key:"13x2n8"}],["path",{d:"M15 9.34V6h1a2 2 0 0 0 0-4H7.89",key:"reo3ki"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=ne("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=ne("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=ne("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=ne("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=ne("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=ne("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=ne("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=ne("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=ne("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=ne("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=ne("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ZD=({connectionColor:t="#dc2626",setConnectionColor:e=()=>{},connectionLineType:n,setConnectionLineType:r,lastSaved:i,onSave:s,onLoad:o,onClear:a,onHelp:l,isDarkMode:u,toggleTheme:d,searchTerm:h,setSearchTerm:f,onExport:m,isOpen:S,onToggle:b,onOpenCaseManager:N,currentBoardName:y,onToggleZen:v,onNextMatch:I,onPrevMatch:R,onToggleBg:O,onLogout:M})=>{const C=L.useRef(null),[x,w]=L.useState(()=>{try{const T=localStorage.getItem("sidebar-sections");return T?JSON.parse(T):{evidence:!0,connection:!0,extras:!0,zones:!0}}catch{return{evidence:!0,connection:!0,extras:!0,zones:!0}}});L.useEffect(()=>{localStorage.setItem("sidebar-sections",JSON.stringify(x))},[x]);const E=T=>{w(P=>({...P,[T]:!P[T]}))},k=()=>{const T=Object.values(x).some(P=>P);w(Object.keys(x).reduce((P,j)=>({...P,[j]:!T}),{}))},A=(T,P,j)=>{T.dataTransfer.setData("application/reactflow",P),T.dataTransfer.setData("application/category",j),T.dataTransfer.effectAllowed="move"};return g.jsxs("div",{className:`absolute top-0 left-0 h-full z-50 transition-transform duration-300 ease-in-out ${S?"translate-x-0":"-translate-x-full"}`,children:[g.jsxs("aside",{className:`h-full w-80 border-r flex flex-col shadow-2xl backdrop-blur-xl transition-colors duration-500 ease-in-out ${u?"bg-zinc-900/95 border-zinc-800":"bg-white/90 border-gray-200"}`,children:[g.jsxs("div",{className:`p-3 border-b transition-colors duration-500 ${u?"border-zinc-800":"border-gray-200"}`,children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("div",{children:g.jsxs("h1",{className:"text-lg font-bold text-red-500 tracking-widest uppercase leading-tight",children:["Detective",g.jsx("br",{}),"Board"]})}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:k,className:`p-2 rounded-full ${u?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:Object.values(x).some(T=>T)?"Colapsar todo":"Expandir todo",children:Object.values(x).some(T=>T)?g.jsx(vD,{size:16}):g.jsx(yD,{size:16})}),g.jsx("button",{onClick:v,className:`p-2 rounded-full ${u?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Modo Zen (Pantalla Completa)",children:g.jsx(PD,{size:16})}),g.jsx("button",{onClick:O,className:`p-2 rounded-full ${u?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Cambiar Fondo (Corcho/Pizarra/Papel)",children:g.jsx(VD,{size:16})}),g.jsx("button",{onClick:d,className:`p-2 rounded-full ${u?"bg-zinc-800 text-yellow-400 hover:bg-zinc-700":"bg-gray-100 text-zinc-600 hover:bg-gray-200"}`,title:"Cambiar tema",children:u?g.jsx(GD,{size:16}):g.jsx(OD,{size:16})})]})]}),y&&g.jsxs("div",{className:"mt-2 px-2 py-1 bg-zinc-100/5 rounded border border-zinc-500/20",children:[g.jsx("p",{className:"text-xs text-zinc-500 font-mono uppercase mb-0",children:"Expediente:"}),g.jsx("p",{className:`text-xs font-bold font-mono truncate w-full ${u?"text-yellow-500":"text-yellow-700"}`,title:y,children:y})]})]}),g.jsx("div",{className:"px-3 pt-2 pb-1",children:g.jsxs("div",{className:`flex items-center px-2 py-1.5 rounded border transition-colors duration-500 ${u?"bg-zinc-950 border-zinc-800":"bg-white border-gray-300"}`,children:[g.jsx(e2,{size:12,className:"text-zinc-500 mr-2"}),g.jsx("input",{type:"text",name:"search",placeholder:"Buscar pistas...",value:h,onChange:T=>f(T.target.value),className:`bg-transparent w-full text-xs outline-none font-mono ${u?"text-zinc-300 placeholder-zinc-600":"text-zinc-700 placeholder-zinc-400"}`}),h&&g.jsxs("div",{className:"flex gap-1 ml-1 border-l border-zinc-700 pl-1",children:[g.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),R()},className:"p-0.5 hover:text-white text-zinc-500 transition-colors",title:"Anterior",children:g.jsx(fD,{size:12})}),g.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),I()},className:"p-0.5 hover:text-white text-zinc-500 transition-colors",title:"Siguiente",children:g.jsx(dD,{size:12})})]})]})}),g.jsxs("div",{className:"p-3 space-y-2 overflow-y-auto",children:[g.jsx(su,{title:"Evidencia",icon:ID,isDarkMode:u,isOpen:x.evidence,onToggle:()=>E("evidence"),children:g.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[g.jsx(yt,{onDragStart:A,type:"evidence",category:"person",icon:s2,label:"Sospechoso",color:"border-blue-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"evidence",category:"place",icon:Xb,label:"Lugar",color:"border-green-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"evidence",category:"clue",icon:Dm,label:"Pista",color:"border-yellow-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"evidence",category:"event",icon:Kb,label:"Evento",color:"border-red-500",isDarkMode:u,compact:!0})]})}),g.jsxs(su,{title:"Configuracin de Hilo",icon:Wp,isDarkMode:u,isOpen:x.connection,onToggle:()=>E("connection"),children:[g.jsx("div",{className:"flex items-center justify-center gap-3 mb-2 px-1 py-0.5",children:[{color:"#dc2626",label:"Rojo"},{color:"#3b82f6",label:"Azul"},{color:"#22c55e",label:"Verde"},{color:"#eab308",label:"Amarillo"},{color:"#a855f7",label:"Morado"}].map(T=>g.jsx("button",{onClick:()=>e(T.color),className:`w-5 h-5 rounded-full border-2 transition-all ${t===T.color?"border-white scale-100 ring-1 ring-zinc-500":"border-transparent hover:scale-100"}`,style:{backgroundColor:T.color},title:T.label},T.color))}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>r("straight"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="straight"?u?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":u?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Recta",children:g.jsx(Jb,{size:14})}),g.jsx("button",{onClick:()=>r("default"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="default"?u?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":u?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Curva",children:g.jsx(Wp,{size:14})}),g.jsx("button",{onClick:()=>r("step"),className:`flex-1 py-1.5 rounded border flex justify-center items-center transition-colors ${n==="step"?u?"bg-zinc-800 border-zinc-600 text-white":"bg-white border-gray-300 text-black shadow-sm":u?"border-transparent text-zinc-500 hover:bg-zinc-800/50":"border-transparent text-zinc-400 hover:bg-gray-100"}`,title:"Lnea Escalonada",children:g.jsx(Qb,{size:14})})]})]}),g.jsx(su,{title:"Extras",icon:RD,isDarkMode:u,isOpen:x.extras,onToggle:()=>E("extras"),children:g.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[g.jsx(yt,{onDragStart:A,type:"note",category:"note",icon:n2,label:"Nota",color:"border-yellow-400",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"text",category:"text",icon:i2,label:"Texto",color:"border-zinc-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"image",category:"image",icon:Lm,label:"Imagen",color:"border-purple-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"url",category:"url",icon:Om,label:"URL",color:"border-blue-500",isDarkMode:u,compact:!0})]})}),g.jsx(su,{title:"Zonas y Sellos",icon:mw,isDarkMode:u,isOpen:x.zones,onToggle:()=>E("zones"),children:g.jsxs("div",{className:"space-y-2",children:[g.jsx(yt,{onDragStart:A,type:"zone",category:"zone",icon:mw,label:"Zona de Grupo",color:"border-zinc-600",isDarkMode:u}),g.jsxs("div",{className:"grid grid-cols-3 gap-1.5 pt-1",children:[g.jsx(yt,{onDragStart:A,type:"stamp",category:"solved",icon:wD,label:"Resuelto",color:"border-green-600",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"stamp",category:"discarded",icon:_D,label:"Descartado",color:"border-red-600",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"stamp",category:"key",icon:KD,label:"Clave",color:"border-yellow-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"stamp",category:"question",icon:Kp,label:"?",color:"border-blue-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"stamp",category:"important",icon:r2,label:"!",color:"border-orange-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"stamp",category:"verify",icon:Yb,label:"Ojo",color:"border-purple-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"stamp",category:"danger",icon:t2,label:"Peligro",color:"border-red-600",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"stamp",category:"confidential",icon:zm,label:"Top",color:"border-zinc-500",isDarkMode:u,compact:!0}),g.jsx(yt,{onDragStart:A,type:"stamp",category:"custom",icon:MD,label:"Personalizado",color:"border-zinc-400",isDarkMode:u,compact:!0})]})]})})]}),g.jsxs("div",{className:`mt-auto p-3 border-t space-y-2 transition-colors duration-500 ${u?"border-zinc-800":"border-gray-200"}`,children:[g.jsxs("button",{onClick:N,title:"Abrir gestor de expedientes",className:`w-full py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 ${u?"bg-yellow-900/20 text-yellow-500 border-yellow-900/50 hover:bg-yellow-900/40":"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100"}`,children:[g.jsx(CD,{size:14})," Gestionar Casos"]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[g.jsxs("button",{onClick:s,className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${u?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Guardar (JSON)",children:[g.jsx(qD,{size:16,className:"mb-1"}),g.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Guardar"})]}),g.jsxs("button",{onClick:()=>C.current.click(),className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${u?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Cargar (JSON)",children:[g.jsx(YD,{size:16,className:"mb-1"}),g.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Cargar"})]}),g.jsxs("button",{onClick:m,className:`flex flex-col items-center justify-center p-2 border rounded transition-colors ${u?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,title:"Exportar (PNG)",children:[g.jsx(SD,{size:16,className:"mb-1"}),g.jsx("span",{className:"text-[9px] font-bold uppercase",children:"PNG"})]})]}),g.jsx("input",{type:"file",name:"file-upload",ref:C,onChange:o,className:"hidden",accept:".json"}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsxs("button",{onClick:a,title:"Borrar todo el contenido",className:`py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 ${u?"bg-red-900/20 text-red-500 border-red-900/50 hover:bg-red-900/40":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"}`,children:[g.jsx(Gp,{size:14})," Limpiar"]}),g.jsxs("button",{onClick:l,title:"Ver atajos de teclado",className:`py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 ${u?"bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white":"bg-white text-zinc-600 border-gray-200 hover:bg-gray-50 hover:text-black shadow-sm"}`,children:[g.jsx(Kp,{size:14})," Ayuda"]})]}),i&&g.jsxs("div",{className:`text-[10px] text-center mt-2 font-mono ${u?"text-zinc-600":"text-gray-400"}`,children:["Guardado: ",i.toLocaleTimeString()]}),g.jsxs("button",{onClick:M,className:`w-full py-2 border transition-colors text-[10px] uppercase font-bold rounded flex items-center justify-center gap-2 mt-2 ${u?"bg-red-950/50 text-red-500 border-red-900/30 hover:bg-red-900/40":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"}`,children:[g.jsx(ND,{size:14})," Cerrar Sesin"]})]})]}),g.jsx("button",{onClick:b,className:`absolute top-6 -right-8 p-1.5 rounded-r-md shadow-md border-y border-r cursor-pointer flex items-center justify-center transition-colors duration-500 ${u?"bg-zinc-900 border-zinc-800 text-zinc-400 hover:text-white":"bg-white border-gray-200 text-zinc-600 hover:text-black"}`,title:S?"Ocultar barra lateral":"Mostrar barra lateral",children:S?g.jsx(gD,{size:16}):g.jsx(mD,{size:16})})]})},su=({title:t,icon:e,isDarkMode:n,children:r,isOpen:i,onToggle:s})=>g.jsxs("div",{className:`p-2 rounded-lg border transition-all duration-200 ${n?"bg-zinc-950/50 border-zinc-800":"bg-white border-gray-200 shadow-sm"}`,children:[g.jsxs("button",{onClick:s,className:`w-full text-xs font-bold uppercase flex items-center justify-between gap-2 ${n?"text-zinc-500 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(e,{size:10})," ",t]}),g.jsx("div",{className:`transition-transform duration-300 ${i?"rotate-0":"-rotate-90"}`,children:g.jsx(pD,{size:12})})]}),g.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${i?"grid-rows-[1fr] opacity-100 mt-2":"grid-rows-[0fr] opacity-0 mt-0"}`,children:g.jsx("div",{className:"overflow-hidden",children:r})})]}),yt=({onDragStart:t,type:e,category:n,icon:r,label:i,color:s,isDarkMode:o,compact:a})=>g.jsxs("div",{className:`${a?"flex flex-col items-center justify-center p-2 gap-1 text-center":"flex items-center gap-3 p-3"} rounded cursor-grab border-l-4 ${s.replace("border-","border-l-")} transition-all ${a?"hover:scale-105":"hover:translate-x-2"} ${o?"bg-zinc-800/40 border-y border-r border-zinc-800 hover:bg-zinc-800":"bg-white border-y border-r border-gray-200 hover:bg-gray-50 shadow-sm"}`,onDragStart:l=>t(l,e,n),draggable:!0,title:i,children:[g.jsx(r,{size:a?16:18,className:s.replace("border-","text-")}),g.jsx("span",{className:`${a?"text-[10px]":"text-sm"} font-bold font-mono ${o?"text-zinc-300":"text-zinc-700"}`,children:i})]}),eL=({isOpen:t,onClose:e,node:n,onSave:r,onDelete:i,isDarkMode:s})=>{const[o,a]=L.useState(""),[l,u]=L.useState(""),[d,h]=L.useState(""),[f,m]=L.useState("clue"),[S,b]=L.useState(!1);if(L.useEffect(()=>{n&&(a(n.data.label||""),u(n.data.description||""),h(n.data.image||""),m(n.data.category||"clue"),b(!1))},[n]),!t)return null;if(S)return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm",children:g.jsxs("div",{className:`${s?"bg-zinc-900":"bg-white"} border border-red-900/50 p-6 rounded-lg w-96 shadow-2xl animate-in fade-in zoom-in duration-200 text-center`,children:[g.jsx("h2",{className:"text-xl font-bold text-red-500 font-mono tracking-wider mb-4",children:"ELIMINAR EVIDENCIA?"}),g.jsx("p",{className:`${s?"text-zinc-400":"text-gray-600"} text-sm font-mono mb-6`,children:"Esta accin es irreversible. Ests seguro?"}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsx("button",{onClick:()=>b(!1),className:`px-4 py-2 ${s?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:"Cancelar"}),g.jsx("button",{onClick:()=>i(n.id),className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Confirmar"})]})]})});const N=y=>{y.preventDefault(),r(n.id,{...n.data,label:o,description:l,image:d,category:f}),e()};return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm",children:g.jsxs("div",{className:`${s?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-96 shadow-2xl animate-in fade-in zoom-in duration-200`,children:[g.jsxs("div",{className:`flex justify-between items-center mb-4 border-b ${s?"border-zinc-800":"border-gray-200"} pb-2`,children:[g.jsx("h2",{className:"text-xl font-bold text-red-500 font-mono tracking-wider",children:"EDITAR EVIDENCIA"}),g.jsx("button",{onClick:e,className:`${s?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:g.jsx(rs,{size:20})})]}),g.jsxs("form",{onSubmit:N,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"evidence-category",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Categora"}),g.jsxs("select",{id:"evidence-category",name:"evidence-category",value:f,onChange:y=>m(y.target.value),className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all text-sm`,children:[g.jsx("option",{value:"person",children:"Sospechoso"}),g.jsx("option",{value:"place",children:"Lugar"}),g.jsx("option",{value:"clue",children:"Pista"}),g.jsx("option",{value:"event",children:"Evento"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"evidence-title",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Ttulo"}),g.jsx("input",{id:"evidence-title",type:"text",name:"evidence-title",value:o,onChange:y=>a(y.target.value),className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all`,autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"evidence-description",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Descripcin"}),g.jsx("textarea",{id:"evidence-description",name:"evidence-description",value:l,onChange:y=>u(y.target.value),rows:4,className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-300":"bg-gray-50 border-gray-300 text-gray-700"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono text-sm resize-none transition-all`})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"evidence-image-url",className:`block text-xs font-bold ${s?"text-zinc-500":"text-gray-500"} uppercase mb-1 font-mono`,children:"Imagen (URL o Local)"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{id:"evidence-image-url",type:"text",name:"evidence-image-url",value:d,onChange:y=>h(y.target.value),placeholder:"https://...",className:`w-full ${s?"bg-zinc-950 border-zinc-800 text-gray-400":"bg-gray-50 border-gray-300 text-gray-600"} border p-2 rounded focus:border-red-900 outline-none font-mono text-xs`}),g.jsx("div",{className:`text-[10px] ${s?"text-zinc-600":"text-gray-400"} text-center font-mono uppercase tracking-widest`,children:"- O -"}),g.jsxs("label",{className:`flex items-center justify-center w-full p-2 ${s?"bg-zinc-950 border-zinc-800 hover:border-zinc-600 hover:text-zinc-200":"bg-gray-50 border-gray-300 hover:border-gray-400 hover:text-gray-800"} border border-dashed rounded cursor-pointer transition-colors group`,children:[g.jsx("span",{className:`text-xs ${s?"text-zinc-500 group-hover:text-zinc-300":"text-gray-500 group-hover:text-gray-700"} font-mono uppercase`,children:"Subir archivo local"}),g.jsx("input",{type:"file",name:"evidence-image-file",className:"hidden",accept:"image/*",onChange:y=>{const v=y.target.files[0];if(v){const I=new FileReader;I.onload=R=>h(R.target.result),I.readAsDataURL(v)}}})]})]})]}),n.data.status&&g.jsx("div",{className:`flex justify-end pt-2 border-t ${s?"border-zinc-800":"border-gray-200"}`,children:g.jsxs("button",{type:"button",onClick:()=>{r(n.id,{...n.data,status:null}),e()},className:"text-[10px] flex items-center gap-1 text-orange-500 hover:text-orange-400 uppercase font-bold tracking-wider",children:[g.jsx(Pm,{size:12})," Quitar Sello"]})}),g.jsxs("div",{className:`flex justify-between items-center mt-6 pt-4 border-t ${s?"border-zinc-800":"border-gray-200"}`,children:[g.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-red-600 hover:text-red-500 text-xs font-bold uppercase tracking-wider transition-colors",children:"Eliminar"}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 ${s?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-800"} text-xs font-bold uppercase tracking-wider transition-colors`,children:"Cancelar"}),g.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Guardar"})]})]})]})]})})};let ou;const tL=new Uint8Array(16);function nL(){if(!ou&&(ou=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ou))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ou(tL)}const St=[];for(let t=0;t<256;++t)St.push((t+256).toString(16).slice(1));function rL(t,e=0){return St[t[e+0]]+St[t[e+1]]+St[t[e+2]]+St[t[e+3]]+"-"+St[t[e+4]]+St[t[e+5]]+"-"+St[t[e+6]]+St[t[e+7]]+"-"+St[t[e+8]]+St[t[e+9]]+"-"+St[t[e+10]]+St[t[e+11]]+St[t[e+12]]+St[t[e+13]]+St[t[e+14]]+St[t[e+15]]}const iL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ww={randomUUID:iL};function vn(t,e,n){if(ww.randomUUID&&!t)return ww.randomUUID();t=t||{};const r=t.random||(t.rng||nL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,rL(r)}function sL({top:t,left:e,right:n,bottom:r,clientX:i,clientY:s,onHide:o,takeSnapshot:a,setNodes:l}){const{screenToFlowPosition:u,setCenter:d,getZoom:h}=Ir(),f=S=>{S.stopPropagation();const{x:b,y:N}=u({x:i,y:s});d(b,N,{zoom:h(),duration:800}),o()},m=L.useCallback((S,b,N)=>{const y=u({x:i,y:s}),v={id:vn(),type:S,position:y,data:{label:N,category:b}};a(),l(I=>I.concat(v)),o()},[i,s,u,a,l,o]);return g.jsxs("div",{style:{top:t,left:e,right:n,bottom:r},className:"absolute z-50 bg-zinc-800 border border-zinc-700 shadow-xl rounded-md overflow-hidden min-w-[150px] flex flex-col animate-in fade-in zoom-in duration-100",children:[g.jsxs("button",{onClick:f,className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors border-b border-zinc-700",children:[g.jsx(bD,{size:14,className:"text-blue-400"})," Centrar Vista"]}),g.jsxs("button",{onClick:()=>m("note","note","Nota"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx(n2,{size:14,className:"text-yellow-500"})," Aadir Nota"]}),g.jsxs("button",{onClick:()=>m("text","text","Texto"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx(i2,{size:14,className:"text-zinc-400"})," Aadir Texto"]}),g.jsxs("button",{onClick:()=>m("image","image","Imagen"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx(Lm,{size:14,className:"text-purple-500"})," Aadir Imagen"]}),g.jsxs("button",{onClick:()=>m("url","url","Enlace"),className:"w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx(Om,{size:14,className:"text-blue-400"})," Aadir URL"]})]})}const oL=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmText:s="Confirmar",cancelText:o="Cancelar",isDanger:a=!1,isDarkMode:l})=>t?g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[300] backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:`${l?"bg-zinc-900":"bg-white"} border ${a?"border-red-900/50":l?"border-zinc-700":"border-gray-200"} p-6 rounded-lg w-96 shadow-2xl animate-in zoom-in duration-200 text-center`,children:[g.jsx("h2",{className:`text-xl font-bold ${a?"text-red-500":l?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-4`,children:r}),g.jsx("p",{className:`${l?"text-zinc-400":"text-gray-600"} text-sm font-mono mb-6`,children:i}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsx("button",{onClick:e,className:`px-4 py-2 ${l?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:o}),g.jsx("button",{onClick:()=>{n&&n(),e()},className:`px-6 py-2 ${a?"bg-red-900/80 hover:bg-red-800 text-red-100 border-red-900":"bg-blue-900/80 hover:bg-blue-800 text-blue-100 border-blue-900"} text-xs font-bold uppercase tracking-wider rounded shadow-lg border transition-all`,children:s})]})]})}):null,aL=({isOpen:t,onClose:e,isDarkMode:n})=>{if(!t)return null;const r=[{key:"Doble Clic (Nodo)",desc:"Editar contenido de la evidencia",icon:wf},{key:"Doble Clic (Hilo)",desc:"Aadir/Editar etiqueta de relacin",icon:wf},{key:"Clic (Hilo)",desc:"Cambiar estilo (Slido / Punteado)",icon:wf},{key:"Backspace",desc:"Eliminar elementos seleccionados",icon:Dr},{key:"Ctrl + D",desc:"Duplicar nodos seleccionados",icon:Dr},{key:"Ctrl + Z",desc:"Deshacer accin",icon:Dr},{key:"Ctrl + Y",desc:"Rehacer accin",icon:Dr},{key:"Ctrl + S",desc:"Guardar tablero manualmente",icon:Dr},{key:"Ctrl + V",desc:"Pegar imagen del portapapeles",icon:Dr},{key:"F3 / Shift + F3",desc:"Navegar resultados de bsqueda",icon:Dr},{key:"Shift + C",desc:"Conectar nodos seleccionados",icon:Dr},{key:"Ctrl + Shift + L",desc:"Bloquear/Desbloquear seleccin",icon:zm}];return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:`${n?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-[500px] shadow-2xl animate-in zoom-in duration-200 relative`,children:[g.jsx("button",{onClick:e,className:`absolute top-4 right-4 ${n?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:g.jsx(rs,{size:20})}),g.jsxs("h2",{className:`text-xl font-bold ${n?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-6 flex items-center gap-2`,children:[g.jsx(Dr,{className:"text-red-500"})," ATAJOS DE TECLADO"]}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:r.map((i,s)=>g.jsxs("div",{className:`flex items-center justify-between p-2 rounded border transition-colors ${n?"bg-zinc-950/50 border-zinc-800/50 hover:border-zinc-700":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(i.icon,{size:14,className:n?"text-zinc-500":"text-gray-400"}),g.jsx("span",{className:`${n?"text-zinc-300":"text-gray-700"} text-sm font-mono`,children:i.desc})]}),g.jsx("span",{className:"text-xs font-bold text-red-400 bg-red-900/10 px-2 py-1 rounded border border-red-900/20 font-mono",children:i.key})]},s))})]})})},lL=({isOpen:t,onClose:e,onConfirm:n,onDelete:r,title:i,initialValue:s="",initialColor:o="#dc2626",initialType:a,showTypeSelector:l=!1,colorLabel:u="Color",placeholder:d="Escribe una relacin...",isDarkMode:h})=>{const[f,m]=L.useState(s),[S,b]=L.useState(o),[N,y]=L.useState(a||"default");if(L.useEffect(()=>{t&&(m(s),b(o),a&&y(a))},[t,s,o,a]),!t)return null;const v=[{color:"#dc2626",label:"Rojo"},{color:"#3b82f6",label:"Azul"},{color:"#22c55e",label:"Verde"},{color:"#eab308",label:"Amarillo"},{color:"#a855f7",label:"Morado"}],I=R=>{R.preventDefault(),n(f,S,N),e()};return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:`${h?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border p-6 rounded-lg w-96 shadow-2xl animate-in zoom-in duration-200`,children:[g.jsx("h2",{className:`text-xl font-bold ${h?"text-zinc-100":"text-gray-800"} font-mono tracking-wider mb-4`,children:i}),g.jsxs("form",{onSubmit:I,children:[g.jsx("input",{type:"text",name:"input-value",value:f,onChange:R=>m(R.target.value),className:`w-full ${h?"bg-zinc-950 border-zinc-800 text-gray-200":"bg-gray-50 border-gray-300 text-gray-900"} border p-2 rounded focus:border-red-900 focus:ring-1 focus:ring-red-900 outline-none font-mono transition-all mb-4`,autoFocus:!0,placeholder:d}),l&&g.jsxs("div",{className:"mb-4",children:[g.jsx("span",{className:`block text-xs font-bold ${h?"text-zinc-500":"text-gray-500"} uppercase mb-2 font-mono`,children:"Tipo de Conexin"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>y("straight"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${N==="straight"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Recta",children:g.jsx(Jb,{size:16})}),g.jsx("button",{type:"button",onClick:()=>y("default"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${N==="default"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Curva",children:g.jsx(Wp,{size:16})}),g.jsx("button",{type:"button",onClick:()=>y("step"),className:`flex-1 py-2 rounded border flex justify-center items-center transition-colors ${N==="step"?h?"bg-zinc-800 border-zinc-500 text-white":"bg-white border-gray-400 text-black shadow-sm":"border-transparent text-zinc-500 hover:bg-zinc-800/50"}`,title:"Escalonada",children:g.jsx(Qb,{size:16})})]})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("span",{className:`block text-xs font-bold ${h?"text-zinc-500":"text-gray-500"} uppercase mb-2 font-mono`,children:u}),g.jsx("div",{className:"flex gap-3",children:v.map(R=>g.jsx("button",{type:"button",onClick:()=>b(R.color),className:`w-6 h-6 rounded-full border-2 transition-all ${S===R.color?(h?"border-white ring-zinc-400":"border-gray-800 ring-gray-400")+" scale-110 ring-1":"border-transparent hover:scale-110"}`,style:{backgroundColor:R.color},title:R.label},R.color))})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[r?g.jsx("button",{type:"button",onClick:r,className:"text-red-600 hover:text-red-500 text-xs font-bold uppercase tracking-wider transition-colors",children:"Eliminar"}):g.jsx("div",{}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 ${h?"text-zinc-400 hover:text-white border-zinc-700 hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 border-gray-300 hover:bg-gray-100"} text-xs font-bold uppercase tracking-wider transition-colors border rounded`,children:"Cancelar"}),g.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-900/80 hover:bg-red-800 text-red-100 text-xs font-bold uppercase tracking-wider rounded shadow-lg border border-red-900 transition-all",children:"Guardar"})]})]})]})]})})},cL=({isOpen:t,onClose:e,boards:n,currentBoardId:r,onSwitch:i,onCreate:s,onDelete:o,onRename:a,onClone:l,onReorder:u,trash:d,onRestore:h,onPermanentDelete:f,isDarkMode:m})=>{const[S,b]=L.useState(null),[N,y]=L.useState(""),[v,I]=L.useState(!1),[R,O]=L.useState(""),[M,C]=L.useState(null),[x,w]=L.useState(""),[E,k]=L.useState("manual"),[A,T]=L.useState(!1),P=L.useMemo(()=>{let G=(A?d:n).filter(Y=>Y.name.toLowerCase().includes(x.toLowerCase()));return E==="name"?G.sort((Y,Z)=>Y.name.localeCompare(Z.name)):E==="created"?G.sort((Y,Z)=>Z.createdAt-Y.createdAt):E==="modified"?G.sort((Y,Z)=>(Z.lastModified||0)-(Y.lastModified||0)):G},[n,d,x,E,A]),j=E==="manual"&&!x&&!A,z=(F,G)=>{F.dataTransfer.setData("boardIndex",G),F.dataTransfer.effectAllowed="move"},B=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move"},$=(F,G)=>{F.preventDefault();const Y=parseInt(F.dataTransfer.getData("boardIndex"));if(isNaN(Y)||Y===G)return;const Z=[...n],[ie]=Z.splice(Y,1);Z.splice(G,0,ie),u(Z)};if(!t)return null;const V=F=>{b(F.id),y(F.name)},U=()=>{N.trim()&&a(S,N),b(null)},q=()=>{R.trim()&&(s(R),O(""),I(!1))};return g.jsx("div",{className:"fixed inset-0 bg-black/90 z-[200] flex items-center justify-center backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:`${m?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} border w-[900px] h-[600px] rounded-lg shadow-2xl flex flex-col overflow-hidden`,children:[g.jsxs("div",{className:`p-6 border-b ${m?"border-zinc-800 bg-zinc-950":"border-gray-200 bg-gray-50"} flex justify-between items-center z-50 relative`,children:[g.jsxs("div",{children:[g.jsxs("h2",{className:`text-2xl font-bold ${m?"text-zinc-100":"text-gray-800"} font-mono tracking-widest flex items-center gap-3 uppercase`,children:[A?g.jsx(vw,{className:"text-red-500",size:28}):g.jsx(yw,{className:"text-yellow-600",size:28}),A?"PAPELERA DE RECICLAJE":"ARCHIVOS DE CASO"]}),g.jsx("p",{className:`${m?"text-zinc-500":"text-gray-500"} text-xs font-mono mt-1`,children:A?"Restaura casos eliminados o brralos definitivamente":"Selecciona un expediente para investigar"})]}),g.jsx("button",{onClick:e,className:`${m?"text-zinc-500 hover:text-white":"text-gray-400 hover:text-gray-700"} transition-colors`,children:g.jsx(rs,{size:24})})]}),g.jsxs("div",{className:`px-6 py-3 border-b flex gap-4 items-center justify-between ${m?"border-zinc-800 bg-zinc-900/50":"border-gray-200 bg-gray-50/50"}`,children:[g.jsxs("div",{className:`flex-1 flex items-center px-3 py-1.5 rounded border ${m?"bg-zinc-950 border-zinc-700":"bg-white border-gray-300"}`,children:[g.jsx(e2,{size:14,className:m?"text-zinc-500":"text-gray-400"}),g.jsx("input",{type:"text",name:"case-search",placeholder:"Buscar expediente...",value:x,onChange:F=>w(F.target.value),className:`ml-2 bg-transparent w-full text-xs outline-none font-mono ${m?"text-zinc-300 placeholder-zinc-600":"text-zinc-700 placeholder-zinc-400"}`})]}),g.jsxs("button",{onClick:()=>T(!A),className:`flex items-center gap-2 px-3 py-1.5 rounded border text-xs font-bold uppercase transition-colors ${A?m?"bg-red-900/30 border-red-800 text-red-400":"bg-red-50 border-red-200 text-red-600":m?"bg-zinc-900 border-zinc-700 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-600 hover:text-black"}`,children:[A?g.jsx(yw,{size:14}):g.jsx(vw,{size:14}),A?"Ver Archivos":"Papelera"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(hD,{size:14,className:m?"text-zinc-500":"text-gray-400"}),g.jsxs("select",{name:"sort-cases",value:E,onChange:F=>k(F.target.value),className:`text-xs font-mono p-1.5 rounded border outline-none cursor-pointer ${m?"bg-zinc-950 border-zinc-700 text-zinc-300":"bg-white border-gray-300 text-zinc-700"}`,children:[g.jsx("option",{value:"manual",children:"Manual (Arrastrar)"}),g.jsx("option",{value:"name",children:"Nombre (A-Z)"}),g.jsx("option",{value:"created",children:"Creado (Reciente)"}),g.jsx("option",{value:"modified",children:"Modificado (Reciente)"})]})]})]}),g.jsx("div",{className:`flex-1 p-8 overflow-y-auto overflow-x-hidden ${m?"bg-zinc-900/50":"bg-gray-100"}`,children:g.jsxs("div",{className:"flex flex-wrap justify-center items-start gap-y-12 pl-8 pb-12 pt-[2px]",children:[!x&&!A&&(v?g.jsx("div",{className:"relative w-56 h-40 -ml-12 first:ml-0 z-50 transition-all duration-300 shadow-2xl transform scale-105",children:g.jsxs("div",{className:`flex flex-col items-center justify-center h-full border-2 border-dashed border-yellow-600/50 bg-yellow-900/10 rounded-lg p-4 animate-in zoom-in duration-200 ${m?"bg-zinc-900":"bg-white"}`,children:[g.jsx("span",{className:"text-yellow-500 font-mono text-xs font-bold mb-2",children:"NOMBRE DEL CASO"}),g.jsx("input",{type:"text",name:"new-case-name",autoFocus:!0,value:R,onChange:F=>O(F.target.value),onKeyDown:F=>{F.key==="Enter"&&q(),F.key==="Escape"&&I(!1)},placeholder:"Ej: El Robo del Siglo",className:`${m?"bg-zinc-950 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"} border text-xs p-2 w-full rounded outline-none focus:border-yellow-600 font-mono text-center mb-2`}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>I(!1),className:`${m?"text-zinc-500 hover:text-white hover:bg-zinc-800":"text-gray-500 hover:text-gray-800 hover:bg-gray-200"} text-[10px] uppercase font-bold px-2 py-1 rounded`,children:"Cancelar"}),g.jsx("button",{onClick:q,className:"text-zinc-900 bg-yellow-600 hover:bg-yellow-500 text-[10px] uppercase font-bold px-3 py-1 rounded",children:"Crear"})]})]})}):g.jsx("button",{onClick:()=>{I(!0),O(`Caso #${n.length+1}`)},className:"relative w-56 h-40 -ml-12 first:ml-0 transition-all duration-300 group",style:{zIndex:M==="new"?50:0,transform:M==="new"?"translateY(-1rem) scale(1.05) rotate(0deg)":"rotate(-3deg)"},onMouseEnter:()=>C("new"),onMouseLeave:()=>C(null),children:g.jsxs("div",{className:`flex flex-col items-center justify-center h-full border-2 border-dashed rounded-lg shadow-lg ${m?"border-zinc-700 hover:border-zinc-500 bg-zinc-800/50":"border-gray-300 hover:border-gray-400 bg-white"}`,children:[g.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 transition-all group-hover:scale-110 ${m?"bg-zinc-800 group-hover:bg-zinc-700":"bg-gray-200 group-hover:bg-gray-300"}`,children:g.jsx(FD,{className:m?"text-zinc-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-800"})}),g.jsx("span",{className:`${m?"text-zinc-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-800"} font-mono text-sm font-bold`,children:"NUEVO CASO"})]})})),P.map((F,G)=>{const Y=M===F.id,Z=r===F.id,ie=F.isDeleting,ce=G%3===0?"2deg":G%3===1?"-1deg":"3deg";return g.jsx("div",{draggable:j,onDragStart:ae=>z(ae,G),onDragOver:B,onDrop:ae=>$(ae,G),className:"relative w-56 h-40 -ml-12 transition-all duration-300 ease-out cursor-pointer group",style:{zIndex:Y?50:G+1,transform:Y?"translateY(-1.5rem) scale(1.1) rotate(0deg)":`rotate(${ce})`,animation:ie?"delete-burn 0.5s ease-in-out forwards":"none",pointerEvents:ie?"none":"auto"},onMouseEnter:()=>C(F.id),onMouseLeave:()=>C(null),onClick:()=>{S!==F.id&&!A&&i(F.id)},children:g.jsxs("div",{className:`relative flex flex-col h-full border-2 rounded-lg overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.5)] transition-colors duration-300
                    ${Z?m?"border-yellow-500 bg-yellow-900/40":"border-yellow-500 bg-yellow-100":m?A?"border-zinc-700 bg-zinc-900/50":"border-yellow-900/40 bg-yellow-950/30 hover:border-yellow-700 hover:bg-yellow-900/20":A?"border-gray-300 bg-gray-100":"border-yellow-200 bg-yellow-50 hover:border-yellow-300 hover:bg-yellow-100"}
                `,children:[j&&Y&&g.jsx("div",{className:"absolute top-2 right-2 text-yellow-600/50",children:g.jsx(AD,{size:16})}),g.jsx("div",{className:`absolute top-0 left-0 w-24 h-6 rounded-br-lg border-b-2 border-r-2 shadow-sm transition-colors duration-300
                        ${Z?"bg-yellow-500 border-yellow-500":m?A?"bg-zinc-800 border-zinc-700":"bg-yellow-900/40 border-yellow-900/40 group-hover:bg-yellow-800 group-hover:border-yellow-700":A?"bg-gray-300 border-gray-300":"bg-yellow-200 border-yellow-200 group-hover:bg-yellow-300 group-hover:border-yellow-300"}
                    `}),g.jsxs("div",{className:"flex-1 p-4 pt-8 flex flex-col items-center justify-between text-center",children:[g.jsxs("div",{children:[g.jsx(Dm,{size:32,className:`mb-2 drop-shadow-md transition-colors duration-300 ${Z?m?"text-yellow-400":"text-yellow-600":m?"text-yellow-800/60 group-hover:text-yellow-600":"text-yellow-300 group-hover:text-yellow-500"}`}),S===F.id?g.jsxs("div",{className:"flex items-center gap-1 w-full",onClick:ae=>ae.stopPropagation(),children:[g.jsx("input",{type:"text",name:"edit-case-name",value:N,onChange:ae=>y(ae.target.value),className:`${m?"bg-zinc-950 border-zinc-600 text-white":"bg-white border-gray-300 text-gray-900"} border text-xs p-1 w-full rounded outline-none focus:border-yellow-600 font-mono`,autoFocus:!0,onKeyDown:ae=>ae.key==="Enter"&&U()}),g.jsx("button",{onClick:U,className:"text-green-500 hover:text-green-400",children:g.jsx(Gb,{size:14})})]}):g.jsx("h3",{className:`font-mono font-bold text-sm line-clamp-2 ${r===F.id?m?"text-yellow-100":"text-yellow-800":m?A?"text-zinc-500 line-through":"text-zinc-300":A?"text-gray-400 line-through":"text-gray-700"}`,onDoubleClick:ae=>{A||(ae.stopPropagation(),V(F))},children:F.name})]}),g.jsxs("div",{className:`text-[10px] ${m?"text-zinc-500":"text-gray-500"} font-mono w-full`,children:[F.lastModified&&g.jsxs("p",{children:["Modif: ",new Date(F.lastModified).toLocaleString([],{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),g.jsxs("p",{className:`${m?"text-zinc-600":"text-gray-400"}`,children:["Creado: ",new Date(F.createdAt).toLocaleDateString()]})]})]}),g.jsx("div",{className:`absolute bottom-2 right-2 flex gap-1 ${A?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity z-50`,onClick:ae=>ae.stopPropagation(),children:A?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:ae=>{ae.stopPropagation(),h(F.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-green-500 hover:text-green-400 hover:bg-zinc-950 border-zinc-700":"bg-white text-green-600 hover:text-green-700 hover:bg-gray-50 border-gray-200"}`,title:"Restaurar Caso",children:g.jsx(Zb,{size:12})}),g.jsx("button",{onClick:ae=>{ae.stopPropagation(),f(F.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-red-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-red-600 hover:bg-gray-50 border-gray-200"}`,title:"Eliminar Definitivamente",children:g.jsx(Gp,{size:12})})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),l(F.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-green-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-green-600 hover:bg-gray-50 border-gray-200"}`,title:"Clonar Caso",children:g.jsx(xD,{size:12})}),g.jsx("button",{onClick:ae=>{ae.stopPropagation(),V(F)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-blue-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-blue-600 hover:bg-gray-50 border-gray-200"}`,title:"Renombrar Caso",children:g.jsx($D,{size:12})}),n.length>1&&g.jsx("button",{onClick:ae=>{ae.stopPropagation(),o(F.id)},className:`p-1.5 rounded border ${m?"bg-zinc-900 text-zinc-500 hover:text-red-500 hover:bg-zinc-950 border-zinc-700":"bg-white text-gray-400 hover:text-red-600 hover:bg-gray-50 border-gray-200"}`,title:"Mover a Papelera",children:g.jsx(Gp,{size:12})})]})})]})},F.id)})]})}),g.jsx("div",{className:`p-4 border-t text-center z-50 relative ${m?"bg-zinc-950 border-zinc-800":"bg-gray-50 border-gray-200"}`,children:g.jsx("p",{className:`${m?"text-zinc-600":"text-gray-400"} text-[10px] font-mono`,children:"CONFIDENCIAL - SOLO PARA USO OFICIAL"})})]})})},uL=({isZenMode:t,setIsZenMode:e,undo:n,redo:r,isDarkMode:i})=>g.jsxs("div",{className:"absolute top-4 right-4 z-50 flex gap-2",children:[!t&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:n,className:`px-4 py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 shadow-lg ${i?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-zinc-700":"bg-white text-zinc-600 border-gray-300 hover:bg-gray-100"}`,title:"Deshacer (Ctrl+Z)",children:[g.jsx(QD,{size:14})," Deshacer"]}),g.jsxs("button",{onClick:r,className:`px-4 py-2 border transition-colors text-xs uppercase font-bold rounded flex items-center justify-center gap-2 shadow-lg ${i?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-zinc-700":"bg-white text-zinc-600 border-gray-300 hover:bg-gray-100"}`,title:"Rehacer (Ctrl+Y)",children:[g.jsx(UD,{size:14})," Rehacer"]})]}),t&&g.jsxs("button",{onClick:()=>e(!1),className:"px-4 py-2 bg-black/50 hover:bg-black/80 text-white border border-white/20 rounded backdrop-blur-sm flex items-center gap-2 transition-all animate-in fade-in",title:"Salir de Modo Zen (Esc)",children:[g.jsx(DD,{size:14})," Salir"]})]}),Vm=(t,e)=>{if(!t||!t.type.startsWith("image/"))return;const n=new FileReader;n.onload=r=>{const i=new Image;i.onload=()=>{let o=i.width,a=i.height;if(o>400||a>400){const h=o/a;o>a?(o=400,a=400/h):(a=400,o=400*h)}const l=document.createElement("canvas");l.width=o,l.height=a,l.getContext("2d").drawImage(i,0,0,o,a);const d=l.toDataURL("image/jpeg",.7);e(d,o,a)},i.src=r.target.result},n.readAsDataURL(t)},dL=({isInteractive:t,reactFlowInstance:e,takeSnapshot:n,setNodes:r})=>{L.useEffect(()=>{const i=s=>{if(!t||!e)return;const o=s.clipboardData.items;for(const a of o)if(a.type.indexOf("image")!==-1){const l=a.getAsFile();Vm(l,(u,d,h)=>{const f=e.screenToFlowPosition({x:window.innerWidth/2,y:window.innerHeight/2}),m={id:vn(),type:"image",position:f,data:{label:"Imagen Pegada",image:u},style:{width:d,height:h}};n(),r(S=>S.concat(m))})}};return window.addEventListener("paste",i),()=>window.removeEventListener("paste",i)},[e,t,n,r])};function hL(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const fL=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Bi(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let io=null;function o2(t={}){return io||(t.includeStyleProperties?(io=t.includeStyleProperties,io):(io=Bi(window.getComputedStyle(document.documentElement)),io))}function vd(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function pL(t){const e=vd(t,"border-left-width"),n=vd(t,"border-right-width");return t.clientWidth+e+n}function gL(t){const e=vd(t,"border-top-width"),n=vd(t,"border-bottom-width");return t.clientHeight+e+n}function a2(t,e={}){const n=e.width||pL(t),r=e.height||gL(t);return{width:n,height:r}}function mL(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const gn=16384;function yL(t){(t.width>gn||t.height>gn)&&(t.width>gn&&t.height>gn?t.width>t.height?(t.height*=gn/t.width,t.width=gn):(t.width*=gn/t.height,t.height=gn):t.width>gn?(t.height*=gn/t.width,t.width=gn):(t.width*=gn/t.height,t.height=gn))}function wd(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function vL(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function wL(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),vL(i)}const on=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||on(n,e)};function _L(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function xL(t,e){return o2(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function EL(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?_L(n):xL(n,r);return document.createTextNode(`${i}{${s}}`)}function _w(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=fL();try{e.className=`${e.className} ${o}`}catch{return}const a=document.createElement("style");a.appendChild(EL(o,n,i,r)),e.appendChild(a)}function bL(t,e,n){_w(t,e,":before",n),_w(t,e,":after",n)}const xw="application/font-woff",Ew="image/jpeg",SL={woff:xw,woff2:xw,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Ew,jpeg:Ew,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function TL(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Mm(t){const e=TL(t).toLowerCase();return SL[e]||""}function IL(t){return t.split(/,/)[1]}function Qp(t){return t.search(/^(data:)/)!==-1}function CL(t,e){return`data:${e};base64,${t}`}async function l2(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(n({res:r,result:a.result}))}catch(l){o(l)}},a.readAsDataURL(i)})}const _f={};function kL(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function jm(t,e,n){const r=kL(t,e,n.includeQueryParams);if(_f[r]!=null)return _f[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await l2(t,n.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),IL(a)));i=CL(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return _f[r]=i,i}async function AL(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):wd(e)}async function RL(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o==null||o.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return wd(a)}const n=t.poster,r=Mm(n),i=await jm(n,r,e);return wd(i)}async function NL(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await ah(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function PL(t,e){return on(t,HTMLCanvasElement)?AL(t):on(t,HTMLVideoElement)?RL(t,e):on(t,HTMLIFrameElement)?NL(t,e):t.cloneNode(c2(t))}const DL=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",c2=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function LL(t,e,n){var r,i;if(c2(e))return e;let s=[];return DL(t)&&t.assignedNodes?s=Bi(t.assignedNodes()):on(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=Bi(t.contentDocument.body.childNodes):s=Bi(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||on(t,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>ah(a,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function OL(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):o2(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),on(t,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function zL(t,e){on(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),on(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function VL(t,e){if(on(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function ML(t,e,n){return on(e,Element)&&(OL(t,e,n),bL(t,e,n),zL(t,e),VL(t,e)),e}async function jL(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const l=t.querySelector(a),u=document.querySelector(a);!l&&u&&!r[a]&&(r[a]=await ah(u,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let l=0;l<i.length;l++)a.appendChild(i[l]);t.appendChild(o)}return t}async function ah(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>PL(r,e)).then(r=>LL(t,r,e)).then(r=>ML(t,r,e)).then(r=>jL(r,e))}const u2=/url\((['"]?)([^'"]+?)\1\)/g,$L=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,FL=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function UL(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function BL(t){const e=[];return t.replace(u2,(n,r,i)=>(e.push(i),n)),e.filter(n=>!Qp(n))}async function HL(t,e,n,r,i){try{const s=n?hL(e,n):e,o=Mm(e);let a;return i||(a=await jm(s,o,r)),t.replace(UL(e),`$1${a}$3`)}catch{}return t}function qL(t,{preferredFontFormat:e}){return e?t.replace(FL,n=>{for(;;){const[r,,i]=$L.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function d2(t){return t.search(u2)!==-1}async function h2(t,e,n){if(!d2(t))return t;const r=qL(t,n);return BL(r).reduce((s,o)=>s.then(a=>HL(a,o,e,n)),Promise.resolve(r))}async function so(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await h2(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function WL(t,e){await so("background",t,e)||await so("background-image",t,e),await so("mask",t,e)||await so("-webkit-mask",t,e)||await so("mask-image",t,e)||await so("-webkit-mask-image",t,e)}async function KL(t,e){const n=on(t,HTMLImageElement);if(!(n&&!Qp(t.src))&&!(on(t,SVGImageElement)&&!Qp(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await jm(r,Mm(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(u){o(u)}}:o;const a=t;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function GL(t,e){const r=Bi(t.childNodes).map(i=>f2(i,e));await Promise.all(r).then(()=>t)}async function f2(t,e){on(t,Element)&&(await WL(t,e),await KL(t,e),await GL(t,e))}function QL(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const bw={};async function Sw(t){let e=bw[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},bw[t]=e,e}async function Tw(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),l2(a,e.fetchRequestInit,({result:l})=>(n=n.replace(o,`url(${l})`),[o,l]))});return Promise.all(s).then(()=>n)}function Iw(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=a.exec(r),l===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(l[0])}return e}async function YL(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{Bi(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const l=s.href,u=Sw(l).then(d=>Tw(d,e)).then(d=>Iw(d).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?a+=1:i.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:h,error:f})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(u)}})}catch(s){const o=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(Sw(i.href).then(a=>Tw(a,e)).then(a=>Iw(a).forEach(l=>{o.insertRule(l,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{Bi(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function XL(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>d2(e.style.getPropertyValue("src")))}async function JL(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Bi(t.ownerDocument.styleSheets),r=await YL(n,e);return XL(r)}function p2(t){return t.trim().replace(/["']/g,"")}function ZL(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(p2(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function eO(t,e){const n=await JL(t,e),r=ZL(t);return(await Promise.all(n.filter(s=>r.has(p2(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return h2(s.cssText,o,e)}))).join(`
`)}async function tO(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await eO(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function nO(t,e={}){const{width:n,height:r}=a2(t,e),i=await ah(t,e,!0);return await tO(i,e),await f2(i,e),QL(i,e),await wL(i,n,r)}async function rO(t,e={}){const{width:n,height:r}=a2(t,e),i=await nO(t,e),s=await wd(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=e.pixelRatio||mL(),u=e.canvasWidth||n,d=e.canvasHeight||r;return o.width=u*l,o.height=d*l,e.skipAutoScale||yL(o),o.style.width=`${u}`,o.style.height=`${d}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function Cw(t,e={}){return(await rO(t,e)).toDataURL()}const iO=({reactFlowWrapper:t,reactFlowInstance:e,boards:n,currentBoardId:r,bgType:i,isDarkMode:s,setNodes:o})=>{const[a,l]=L.useState(!1),u=L.useCallback(async()=>{if(t.current===null||!e||!o)return;l(!0),await new Promise(z=>setTimeout(z,100));const{x:d,y:h,zoom:f}=e.getViewport(),m=e.getNodes(),S=m.filter(z=>z.selected),b=S.map(z=>z.id);b.length>0&&(o(z=>z.map(B=>({...B,selected:!1}))),await new Promise(z=>setTimeout(z,50)));const N=S.length>0?S:m;if(N.length===0){l(!1),b.length>0&&o(z=>z.map(B=>({...B,selected:b.includes(B.id)})));return}const y=oc(N),v=100,I=y.width+v*2,R=y.height+v*2,O=-y.x+v,M=-y.y+v;e.setViewport({x:O,y:M,zoom:1}),await new Promise(z=>setTimeout(z,1e3)),document.fonts&&await document.fonts.ready;const x=t.current.querySelector(".react-flow");if(!x){l(!1),b.length>0&&o(z=>z.map(B=>({...B,selected:b.includes(B.id)})));return}const w=n.find(z=>z.id===r),k=(w?w.name:"Tablero sin nombre").toUpperCase(),A=Math.max(16,Math.min(72,I*.04)),T=A*.5;let P={};i==="cork"?P={backgroundColor:s?"#18181b":"#e5e5e5",backgroundImage:s?"radial-gradient(rgba(255,255,255,0.05) 1px, transparent 1px), radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px)":"radial-gradient(#999 1px, transparent 1px), radial-gradient(#999 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:"0 0, 20px 20px"}:i==="blackboard"?P={backgroundColor:s?"#27272a":"#ffffff",backgroundImage:s?"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)":"radial-gradient(#e5e7eb 2px, transparent 2px)",backgroundSize:s?"100px 100px":"30px 30px"}:P={backgroundColor:s?"#1e293b":"#f0f9ff",backgroundImage:s?"linear-gradient(#334155 1px, transparent 1px), linear-gradient(90deg, #334155 1px, transparent 1px)":"linear-gradient(#cbd5e1 1px, transparent 1px), linear-gradient(90deg, #cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"};const j={pixelRatio:2,skipAutoScale:!0,backgroundColor:P.backgroundColor,width:I,height:R,style:{width:`${I}px`,height:`${R}px`,overflow:"visible",fontFamily:"'Courier Prime', monospace",...P},imagePlaceholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",filter:z=>!(z.classList&&(z.classList.contains("react-flow__controls")||z.classList.contains("react-flow__minimap")||z.classList.contains("react-flow__attribution")))};try{let z;try{z=await Cw(x,{...j,useCORS:!0})}catch(ie){console.warn("Error exportando con CORS, reintentando sin CORS...",ie),await new Promise(ce=>setTimeout(ce,1e3)),z=await Cw(x,{...j,useCORS:!1})}const B=document.createElement("canvas"),$=j.pixelRatio||1;B.width=I*$,B.height=R*$;const V=B.getContext("2d"),U=new Image;await new Promise((ie,ce)=>{U.onload=ie,U.onerror=ce,U.src=z}),V.drawImage(U,0,0);const q=A*$;V.font=`bold ${q}px "Courier Prime", monospace`,V.fillStyle=s?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",V.shadowColor=s?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.2)",V.shadowBlur=3*$,V.shadowOffsetX=1*$,V.shadowOffsetY=1*$,V.textAlign="right",V.textBaseline="bottom";const F=T*$;V.fillText(k,B.width-F,B.height-F),z=B.toDataURL("image/png");const G=document.createElement("a"),Y=n.find(ie=>ie.id===r),Z=Y?Y.name.replace(/[^a-z0-9\u00C0-\u017F\s-_]/gi,""):"caso-detective";G.download=`${Z}.png`,G.href=z,G.click()}catch(z){console.error("Error al exportar",z),alert("Error al generar la imagen. Si utilizas imgenes externas (URL), es posible que tengan restricciones de seguridad (CORS).")}finally{e.setViewport({x:d,y:h,zoom:f}),b.length>0&&o(z=>z.map(B=>({...B,selected:b.includes(B.id)}))),l(!1)}},[t,s,e,n,r,i,o]);return{isExporting:a,onExport:u}},sO="default-case",xf=(t,e=[])=>{let n=localStorage.getItem(`board-${t}-nodes`),r=localStorage.getItem(`board-${t}-edges`),i=localStorage.getItem(`board-${t}-bg`);return!n&&t===sO&&(n=localStorage.getItem("detective-board-nodes"),r=localStorage.getItem("detective-board-edges")),{nodes:n?JSON.parse(n):e,edges:r?JSON.parse(r):[],bgType:i||"cork"}},au="default-case",oO=({nodes:t,edges:e,bgType:n,setNodes:r,setEdges:i,setBgType:s,reactFlowInstance:o,clearHistory:a,setCaseManagerOpen:l,setConfirmModal:u,lastSaved:d})=>{const[h,f]=L.useState(()=>{try{const w=localStorage.getItem("detective-boards-list");return w?JSON.parse(w):localStorage.getItem("detective-board-nodes")?[{id:au,name:"Caso #001: Principal",createdAt:Date.now(),lastModified:Date.now()}]:[{id:au,name:"Caso #001: Nuevo",createdAt:Date.now(),lastModified:Date.now()}]}catch{return[{id:au,name:"Caso #001: Nuevo",createdAt:Date.now(),lastModified:Date.now()}]}}),[m,S]=L.useState(()=>{try{const w=localStorage.getItem("detective-boards-trash");return w?JSON.parse(w):[]}catch{return[]}}),[b,N]=L.useState(()=>localStorage.getItem("detective-current-board-id")||au);L.useEffect(()=>{localStorage.setItem("detective-boards-list",JSON.stringify(h))},[h]),L.useEffect(()=>{localStorage.setItem("detective-boards-trash",JSON.stringify(m))},[m]),L.useEffect(()=>{localStorage.setItem("detective-current-board-id",b)},[b]),L.useEffect(()=>{d&&f(w=>w.map(E=>E.id===b?{...E,lastModified:d.getTime()}:E))},[d,b]),L.useEffect(()=>{const w=h.find(E=>E.id===b);w&&(document.title=`${w.name} | Detective Board`)},[b,h]);const y=L.useCallback(w=>{localStorage.setItem(`board-${b}-nodes`,JSON.stringify(t)),localStorage.setItem(`board-${b}-edges`,JSON.stringify(e)),localStorage.setItem(`board-${b}-bg`,n);const E=xf(w);r(E.nodes),i(E.edges),s(E.bgType),N(w),a(),l(!1),o&&setTimeout(()=>{o.fitView({duration:800,padding:.2})},100)},[b,t,e,n,r,i,s,a,o,l]),v=w=>{if(!w)return;const E=vn(),k={id:E,name:w,createdAt:Date.now(),lastModified:Date.now()};f(A=>[...A,k]),y(E)},I=w=>{h.length<=1||u({isOpen:!0,title:"MOVER A PAPELERA?",message:"El caso se mover a la papelera. Podrs restaurarlo si lo necesitas.",isDanger:!0,confirmText:"Mover",onConfirm:()=>{f(E=>E.map(k=>k.id===w?{...k,isDeleting:!0}:k)),setTimeout(()=>{const E=h.find(A=>A.id===w),k=h.filter(A=>A.id!==w);if(E){const{isDeleting:A,...T}=E;S(P=>[{...T,deletedAt:Date.now()},...P])}if(f(k),b===w){const A=k[0].id,T=xf(A);r(T.nodes),i(T.edges),s(T.bgType),N(A),a(),o&&setTimeout(()=>{o.fitView({duration:800,padding:.2})},100)}},500)}})},R=L.useCallback(w=>{const E=m.find(k=>k.id===w);E&&(S(k=>k.filter(A=>A.id!==w)),f(k=>[...k,{...E,isDeleting:!1}]))},[m]),O=L.useCallback(w=>{u({isOpen:!0,title:"ELIMINAR DEFINITIVAMENTE?",message:"Esta accin es irreversible. Los datos del caso se borrarn del disco para siempre.",isDanger:!0,confirmText:"Eliminar",onConfirm:()=>{S(E=>E.filter(k=>k.id!==w)),localStorage.removeItem(`board-${w}-nodes`),localStorage.removeItem(`board-${w}-edges`),localStorage.removeItem(`board-${w}-bg`)}})},[]),M=(w,E)=>{f(k=>k.map(A=>A.id===w?{...A,name:E}:A))},C=L.useCallback(w=>{f(w)},[]),x=L.useCallback(w=>{const E=h.find(k=>k.id===w);E&&u({isOpen:!0,title:"CLONAR CASO?",message:`Deseas crear una copia del expediente "${E.name}"?`,confirmText:"Clonar",onConfirm:()=>{let k,A,T;if(w===b)k=t,A=e,T=n;else{const z=xf(w);k=z.nodes,A=z.edges,T=z.bgType}const P=vn(),j={id:P,name:`${E.name} (Copia)`,createdAt:Date.now(),lastModified:Date.now()};localStorage.setItem(`board-${P}-nodes`,JSON.stringify(k)),localStorage.setItem(`board-${P}-edges`,JSON.stringify(A)),localStorage.setItem(`board-${P}-bg`,T),f(z=>{const B=z.findIndex(V=>V.id===w),$=[...z];return $.splice(B+1,0,j),$}),y(P)}})},[h,y,b,t,e,n,u]);return L.useEffect(()=>{h.length>0&&!h.find(w=>w.id===b)&&y(h[0].id)},[h,b,y]),{boards:h,setBoards:f,trash:m,currentBoardId:b,setCurrentBoardId:N,handleSwitchBoard:y,handleCreateBoard:v,handleDeleteBoard:I,handleRestoreBoard:R,handlePermanentDelete:O,handleRenameBoard:M,handleReorderBoards:C,handleCloneBoard:x}},aO=({onSave:t,undo:e,redo:n,duplicateSelected:r,navigateSearch:i,reactFlowInstance:s,edges:o,setEdges:a,takeSnapshot:l,connectionLineType:u,connectionColor:d})=>{L.useEffect(()=>{const h=f=>{if((f.ctrlKey||f.metaKey)&&f.key==="s"&&(f.preventDefault(),t()),(f.ctrlKey||f.metaKey)&&f.key==="z"&&(f.preventDefault(),f.shiftKey?n():e()),(f.ctrlKey||f.metaKey)&&f.key==="y"&&(f.preventDefault(),n()),(f.ctrlKey||f.metaKey)&&f.key==="d"&&(f.preventDefault(),r()),f.key==="F3"&&(f.preventDefault(),f.shiftKey?i("prev"):i("next")),f.shiftKey&&f.key.toLowerCase()==="c"){if(f.preventDefault(),!s)return;const m=s.getNodes().filter(S=>S.selected);if(m.length>=2){m.sort((b,N)=>b.position.x-N.position.x);const S=[];for(let b=0;b<m.length-1;b++){const N=m[b],y=m[b+1];o.some(I=>I.source===N.id&&I.target===y.id||I.source===y.id&&I.target===N.id)||S.push({id:vn(),source:N.id,target:y.id,type:u,style:{stroke:d,strokeWidth:2},className:"quick-draw"})}S.length>0&&(l(),a(b=>b.concat(S)))}}};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,e,n,r,i,o,u,d,s,a,l])},lO=({isInteractive:t,reactFlowInstance:e,setNodes:n,takeSnapshot:r,setPendingStampNodeId:i,setInputModalOpen:s,setEditingEdge:o,setEditingNode:a})=>{const l=L.useCallback(d=>{if(d.preventDefault(),!t){d.dataTransfer.dropEffect="none";return}d.dataTransfer.dropEffect="move"},[t]),u=L.useCallback(d=>{if(d.preventDefault(),!t)return;if(d.dataTransfer.files&&d.dataTransfer.files.length>0){const N=d.dataTransfer.files[0];Vm(N,(y,v,I)=>{const R=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),O={id:vn(),type:"image",position:R,data:{label:"Imagen",image:y},style:{width:v,height:I}};r(),n(M=>M.concat(O))});return}const h=d.dataTransfer.getData("text/uri-list")||d.dataTransfer.getData("text/plain");if(h&&(h.startsWith("data:image")||h.startsWith("http"))){const N=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:vn(),type:"image",position:N,data:{label:"Imagen Extrada",image:h},style:{width:300,height:300}};r(),n(v=>v.concat(y));return}const f=d.dataTransfer.getData("application/reactflow"),m=d.dataTransfer.getData("application/category");if(typeof f>"u"||!f)return;if(f==="stamp"){const N=d.dataTransfer.getData("application/category"),y=N==="custom",v=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),R=e.getIntersectingNodes({x:v.x,y:v.y,width:1,height:1}).slice().reverse().find(O=>O.type==="evidence"||O.type==="note"||O.type==="image");if(R){if(y){i(R.id),s(!0),o(null),a(null);return}r(),n(O=>O.map(M=>M.id===R.id?{...M,data:{...M.data,status:N}}:M))}return}if(f==="zone"){const N=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:vn(),type:"zone",position:N,data:{label:"ZONA SEGURA"},style:{width:300,height:300,backgroundColor:"rgba(113, 113, 122, 0.05)",borderColor:"#71717a"}};r(),n(v=>[y,...v]);return}if(f==="url"){const N=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),y={id:vn(),type:"url",position:N,data:{url:"",label:"Nuevo Enlace"},style:{width:300,height:250}};r(),n(v=>v.concat(y));return}const S=e.screenToFlowPosition({x:d.clientX,y:d.clientY}),b={id:vn(),type:f,position:S,data:{label:`Nuevo ${m}`,category:m,description:"Doble click para editar..."}};r(),n(N=>N.concat(b))},[e,n,t,r,i,s,o,a]);return{onDragOver:l,onDrop:u}},$m=({status:t})=>{if(typeof t=="object"&&t.type==="custom")return g.jsx("div",{className:"border-4 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif",borderColor:t.color,color:t.color,backgroundColor:`${t.color}30`},children:t.label});switch(t){case"solved":return g.jsx("div",{className:"border-4 border-green-600 text-green-600 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-green-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"RESUELTO"});case"discarded":return g.jsx("div",{className:"border-4 border-red-600 text-red-600 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-red-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"DESCARTADO"});case"key":return g.jsx("div",{className:"border-4 border-yellow-500 text-yellow-500 font-black text-xl px-2 py-1 rounded opacity-90 uppercase tracking-widest bg-yellow-950/30 backdrop-blur-sm shadow-lg stamp-animation",style:{fontFamily:"Stencil, sans-serif"},children:"CLAVE"});case"question":return g.jsx("div",{className:"border-4 border-blue-500 text-blue-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-blue-950/30",children:g.jsx(Kp,{size:40,strokeWidth:3})});case"important":return g.jsx("div",{className:"border-4 border-orange-500 text-orange-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-orange-950/30",children:g.jsx(r2,{size:40,strokeWidth:3})});case"verify":return g.jsx("div",{className:"border-4 border-purple-500 text-purple-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-purple-950/30",children:g.jsx(Yb,{size:40,strokeWidth:3})});case"danger":return g.jsx("div",{className:"border-4 border-red-600 text-red-600 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-red-950/30",children:g.jsx(t2,{size:40,strokeWidth:3})});case"confidential":return g.jsx("div",{className:"border-4 border-zinc-500 text-zinc-500 rounded-full p-2 opacity-90 backdrop-blur-sm shadow-lg stamp-animation bg-zinc-950/30",children:g.jsx(zm,{size:40,strokeWidth:3})});default:return null}},kw={person:{color:"border-blue-500",icon:s2,dark:{bg:"bg-gradient-to-br from-blue-900 to-blue-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-blue-50 to-blue-100",text:"text-blue-900/70",title:"text-blue-950",border:"border-black/10"}},place:{color:"border-green-500",icon:Xb,dark:{bg:"bg-gradient-to-br from-green-900 to-green-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-green-50 to-green-100",text:"text-green-900/70",title:"text-green-950",border:"border-black/10"}},clue:{color:"border-orange-500",icon:Dm,dark:{bg:"bg-gradient-to-br from-orange-900 to-orange-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-orange-50 to-orange-100",text:"text-orange-900/70",title:"text-orange-950",border:"border-black/10"}},event:{color:"border-red-500",icon:Kb,dark:{bg:"bg-gradient-to-br from-red-900 to-red-950",text:"text-gray-400",title:"text-gray-100",border:"border-white/10"},light:{bg:"bg-gradient-to-br from-red-50 to-red-100",text:"text-red-900/70",title:"text-red-950",border:"border-black/10"}}},cO=({id:t,data:e,selected:n,isDarkMode:r})=>{const i=kw[e.category]||kw.clue,s=r?i.dark:i.light,o=i.icon,{setNodes:a}=Ir(),l=!!e.locked,[u,d]=L.useState(!1),h=L.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]),f=m=>{m.stopPropagation(),a(S=>S.map(b=>{if(b.id===t){const N=!!b.data.locked;return{...b,draggable:!0,data:{...b.data,locked:!N}}}return b}))};return g.jsxs("div",{className:`
        relative h-full w-full shadow-[0_10px_20px_-5px_rgba(0,0,0,0.6)] rounded-sm border-l-4 transition-all duration-300 ease-out group
        ${i.color} ${s.bg}
        ${n?"ring-2 ring-white scale-105 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.9)] z-50":"hover:scale-105 hover:-translate-y-1 hover:shadow-[0_20px_40px_-5px_rgba(0,0,0,0.8)] hover:z-40"}
        ${l?"nodrag":""} ${e.isDeleting?"deleting-default":""}
      `,children:[g.jsx(sa,{color:"#ef4444",isVisible:n&&!l,minWidth:250,minHeight:150,handleStyle:{width:15,height:15}}),(n||l)&&g.jsx("button",{onClick:f,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${l?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:l?g.jsx(aa,{size:12}):g.jsx(oa,{size:12})}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(cn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(cn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&g.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${h}deg)`},children:g.jsx($m,{status:e.status},JSON.stringify(e.status))}),g.jsxs("div",{className:"p-3 flex flex-col gap-2 h-full w-full overflow-hidden",children:[g.jsxs("div",{className:`flex items-center justify-between border-b ${s.border} pb-2`,children:[g.jsx("span",{className:`text-xs uppercase tracking-widest ${s.text} font-bold`,children:e.category}),g.jsx(o,{size:16,className:s.text})]}),e.image&&g.jsx("div",{className:`nodrag w-full h-32 overflow-hidden rounded-sm border ${s.border} sepia-[.5] cursor-zoom-in hover:sepia-0 transition-all`,onClick:m=>{m.stopPropagation(),d(!0)},children:g.jsx("img",{src:e.image,alt:"evidence",className:"w-full h-full object-cover"})}),u&&Nl.createPortal(g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center p-8 cursor-zoom-out backdrop-blur-sm animate-in fade-in duration-200",onClick:m=>{m.stopPropagation(),d(!1)},children:g.jsx("img",{src:e.image,alt:"Evidence HD",className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm"})}),document.body),g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-bold ${s.title} leading-tight font-mono`,children:e.label}),g.jsx("p",{className:`text-xs ${s.text} mt-1 font-mono leading-relaxed`,children:e.description})]})]})]})},uO=L.memo(cO),Ef={yellow:{bg:"from-yellow-100 to-yellow-300",btn:"bg-yellow-500"},green:{bg:"from-green-100 to-green-300",btn:"bg-green-500"},blue:{bg:"from-blue-100 to-blue-300",btn:"bg-blue-500"},red:{bg:"from-red-100 to-red-300",btn:"bg-red-500"},purple:{bg:"from-purple-100 to-purple-300",btn:"bg-purple-500"}},dO=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=Ir(),o=!!e.locked,a=Ef[e.color]||Ef.yellow,l=L.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]),u=f=>{f.stopPropagation(),s(m=>m.map(S=>{if(S.id===t){const b=!!S.data.locked;return{...S,draggable:!0,data:{...S.data,locked:!b}}}return S}))},d=f=>{s(m=>m.map(S=>S.id===t?{...S,data:{...S.data,color:f}}:S))},h=()=>{s(f=>f.map(m=>m.id===t?{...m,data:{...m.data,status:null}}:m))};return g.jsxs(g.Fragment,{children:[g.jsx(sa,{color:"#eab308",isVisible:n&&!o,minWidth:150,minHeight:150,handleStyle:{width:15,height:15}}),n&&g.jsx("button",{onClick:()=>{i({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:g.jsx(rs,{size:12})}),(n||o)&&g.jsx("button",{onClick:u,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${o?"bg-red-900 border-red-700 text-red-200":"bg-yellow-500 border-yellow-700 text-white hover:bg-yellow-600"}`,children:o?g.jsx(aa,{size:12}):g.jsx(oa,{size:12})}),n&&!o&&g.jsxs("div",{className:`nodrag absolute -bottom-8 left-1/2 transform -translate-x-1/2 flex gap-1 p-1.5 rounded-full shadow-xl border z-50 backdrop-blur-sm ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[Object.entries(Ef).map(([f,m])=>g.jsx("button",{onClick:()=>d(f),className:`w-4 h-4 rounded-full ${m.btn} border border-white/20 hover:scale-125 transition-transform`},f)),e.status&&g.jsx("button",{onClick:h,className:`w-4 h-4 rounded-full flex items-center justify-center border border-white/20 hover:scale-125 transition-transform ml-1 ${r?"bg-zinc-700 text-zinc-400 hover:text-white":"bg-gray-200 text-gray-500 hover:text-black"}`,title:"Quitar Sello",children:g.jsx(Pm,{size:10})})]}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(cn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(cn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&g.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${l}deg)`},children:g.jsx($m,{status:e.status},JSON.stringify(e.status))}),g.jsxs("div",{className:`relative h-full w-full bg-gradient-to-br ${a.bg} shadow-[5px_5px_15px_rgba(0,0,0,0.5)] rotate-1 p-4 note-rough border-t border-l border-white/50 flex flex-col transition-all duration-300 ease-out hover:scale-105 hover:-translate-y-1 hover:shadow-[10px_15px_25px_rgba(0,0,0,0.6)] overflow-hidden ${o?"nodrag":""} ${e.isDeleting?"deleting-note":""}`,children:[g.jsx("div",{className:"absolute inset-0 paper-texture pointer-events-none opacity-50 mix-blend-multiply"}),g.jsx("textarea",{name:"note-content",className:"nodrag relative z-10 w-full h-full bg-transparent resize-none outline-none text-gray-800 placeholder-yellow-600/50 text-lg leading-relaxed",placeholder:"Escribe una nota...",defaultValue:e.label,onChange:f=>e.label=f.target.value,style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", sans-serif'}})]})]})},hO=L.memo(dO),fO=({isOpen:t,onClose:e,imageSrc:n,onCropComplete:r})=>{const[i,s]=L.useState(1),[o,a]=L.useState({x:0,y:0}),[l,u]=L.useState(!1),[d,h]=L.useState({x:0,y:0}),f=L.useRef(null),m=L.useRef(null);if(L.useEffect(()=>{t&&(s(1),a({x:0,y:0}))},[t,n]),!t||!n)return null;const S=v=>{u(!0),h({x:v.clientX-o.x,y:v.clientY-o.y})},b=v=>{l&&a({x:v.clientX-d.x,y:v.clientY-d.y})},N=()=>{u(!1)},y=()=>{const v=document.createElement("canvas"),I=v.getContext("2d"),R=m.current,O=f.current,M=R.clientWidth,C=R.clientHeight;v.width=M,v.height=C;const x=M/2,w=C/2;I.translate(x+o.x,w+o.y),I.scale(i,i),I.drawImage(O,-O.naturalWidth/2,-O.naturalHeight/2),r(v.toDataURL("image/jpeg",.9)),e()};return g.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center p-4 animate-in fade-in duration-200 select-none",onMouseUp:N,onMouseLeave:N,children:[g.jsxs("div",{className:"w-full max-w-lg flex justify-between items-center mb-4",children:[g.jsxs("h2",{className:"text-zinc-100 font-mono font-bold text-lg flex items-center gap-2",children:[g.jsx(zD,{size:18})," AJUSTAR RECORTE"]}),g.jsx("button",{onClick:e,className:"text-zinc-400 hover:text-white",children:g.jsx(rs,{})})]}),g.jsxs("div",{ref:m,className:"relative w-[400px] h-[400px] bg-zinc-900 overflow-hidden border-2 border-dashed border-zinc-500 cursor-move shadow-2xl rounded-sm",onMouseDown:S,onMouseMove:b,children:[g.jsx("img",{ref:f,src:n,alt:"Crop target",className:"absolute max-w-none origin-center pointer-events-none",style:{left:"50%",top:"50%",transform:`translate(-50%, -50%) translate(${o.x}px, ${o.y}px) scale(${i})`}}),g.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-30",children:[g.jsx("div",{className:"w-full h-1/3 border-b border-white/50 absolute top-0"}),g.jsx("div",{className:"w-full h-1/3 border-b border-white/50 absolute top-1/3"}),g.jsx("div",{className:"h-full w-1/3 border-r border-white/50 absolute left-0"}),g.jsx("div",{className:"h-full w-1/3 border-r border-white/50 absolute left-1/3"})]})]}),g.jsxs("div",{className:"mt-6 flex items-center gap-4 w-full max-w-md bg-zinc-900 p-4 rounded-lg border border-zinc-800",children:[g.jsx(JD,{size:20,className:"text-zinc-400"}),g.jsx("input",{type:"range",name:"crop-scale",min:"0.1",max:"3",step:"0.05",value:i,onChange:v=>s(parseFloat(v.target.value)),className:"w-full accent-red-600 h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer"}),g.jsx(XD,{size:20,className:"text-zinc-400"})]}),g.jsxs("div",{className:"mt-6 flex gap-4",children:[g.jsx("button",{onClick:e,className:"px-6 py-2 border border-zinc-600 text-zinc-300 hover:text-white rounded font-bold uppercase text-xs tracking-wider transition-colors",children:"Cancelar"}),g.jsxs("button",{onClick:y,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded font-bold uppercase text-xs tracking-wider shadow-lg flex items-center gap-2 transition-colors",children:[g.jsx(Gb,{size:16})," Aplicar"]})]})]})},pO=({id:t,data:e,selected:n,isDarkMode:r})=>{const[i,s]=L.useState(e.image),[o,a]=L.useState(!1),[l,u]=L.useState(!1),[d,h]=L.useState(!1),[f,m]=L.useState(e.filters||{brightness:100,contrast:100,grayscale:0,sepia:0}),{deleteElements:S,setNodes:b,getNode:N}=Ir(),y=!!e.locked,v=L.useMemo(()=>Math.floor(Math.random()*40)-20,[e.status]);L.useEffect(()=>{e.filters&&m(e.filters)},[e.filters]),L.useEffect(()=>{if(e.image&&e.image.startsWith("http")){const E=new Image;E.crossOrigin="Anonymous",E.src=e.image,E.onload=()=>{try{const k=document.createElement("canvas");k.width=E.width,k.height=E.height,k.getContext("2d").drawImage(E,0,0);const T=k.toDataURL("image/jpeg");T.length>100&&(s(T),b(P=>P.map(j=>j.id===t?{...j,data:{...j.data,image:T}}:j)))}catch{}}}},[]);const I=E=>{E.stopPropagation(),b(k=>k.map(A=>{if(A.id===t){const T=!!A.data.locked;return{...A,draggable:!0,data:{...A.data,locked:!T}}}return A}))},R=E=>{const k=E.target.files[0];k&&Vm(k,(A,T,P)=>{s(A),b(j=>j.map(z=>z.id===t?{...z,data:{...z.data,image:A},style:{...z.style,width:T,height:P}}:z))})},O=E=>{if(!i)return;const k=new Image;k.src=i,k.onload=()=>{var $,V;const A=document.createElement("canvas");A.width=k.height,A.height=k.width;const T=A.getContext("2d");T.translate(A.width/2,A.height/2),T.rotate(E==="right"?90*Math.PI/180:-90*Math.PI/180),T.drawImage(k,-k.width/2,-k.height/2);const P=A.toDataURL();s(P);const j=N(t),z=($=j==null?void 0:j.style)==null?void 0:$.width,B=(V=j==null?void 0:j.style)==null?void 0:V.height;b(U=>U.map(q=>q.id===t?{...q,data:{...q.data,image:P},style:{...q.style,width:B,height:z}}:q))}},M=()=>{u(!0)},C=E=>{s(E),b(k=>k.map(A=>A.id===t?{...A,data:{...A.data,image:E},style:{...A.style,width:300,height:300}}:A))},x=()=>{b(E=>E.map(k=>k.id===t?{...k,data:{...k.data,status:null}}:k))},w=(E,k)=>{const A={...f,[E]:k};m(A),b(T=>T.map(P=>P.id===t?{...P,data:{...P.data,filters:A}}:P))};return g.jsxs(g.Fragment,{children:[g.jsx(sa,{color:"#ef4444",isVisible:n&&!y,minWidth:100,minHeight:100,handleStyle:{width:15,height:15}}),n&&g.jsx("button",{onClick:()=>{S({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:g.jsx(rs,{size:12})}),(n||y)&&g.jsx("button",{onClick:I,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${y?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:y?g.jsx(aa,{size:12}):g.jsx(oa,{size:12})}),n&&!y&&i&&g.jsxs("div",{className:`nodrag absolute -bottom-9 left-1/2 transform -translate-x-1/2 flex gap-1 p-1.5 rounded-full shadow-xl border z-50 backdrop-blur-sm items-center ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[g.jsx("button",{onClick:()=>h(!d),className:`p-1.5 rounded-full transition-colors ${d?"bg-blue-600 text-white":r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Filtros",children:g.jsx(WD,{size:14})}),g.jsx("div",{className:`w-px h-4 mx-0.5 ${r?"bg-zinc-700":"bg-gray-300"}`}),g.jsx("button",{onClick:()=>O("left"),className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Rotar Izquierda",children:g.jsx(BD,{size:14})}),g.jsx("button",{onClick:M,className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Recortar",children:g.jsx(ED,{size:14})}),g.jsx("button",{onClick:()=>O("right"),className:`p-1.5 rounded-full transition-colors ${r?"text-zinc-400 hover:text-white hover:bg-zinc-700":"text-zinc-500 hover:text-black hover:bg-gray-200"}`,title:"Rotar Derecha",children:g.jsx(HD,{size:14})}),e.status&&g.jsx("button",{onClick:x,className:`p-1.5 text-red-500 hover:text-red-400 rounded-full transition-colors ${r?"hover:bg-zinc-700":"hover:bg-gray-200"}`,title:"Quitar Sello",children:g.jsx(Pm,{size:14})})]}),d&&n&&!y&&g.jsxs("div",{className:`nodrag absolute -bottom-44 left-1/2 transform -translate-x-1/2 p-3 rounded-lg border z-50 w-48 backdrop-blur-sm flex flex-col gap-2 shadow-2xl animate-in fade-in slide-in-from-bottom-2 ${r?"bg-zinc-900/95 border-zinc-700":"bg-white/95 border-gray-200"}`,children:[g.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[g.jsx("span",{children:"Brillo"})," ",g.jsxs("span",{children:[f.brightness,"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"200",value:f.brightness,onChange:E=>w("brightness",parseInt(E.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),g.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[g.jsx("span",{children:"Contraste"})," ",g.jsxs("span",{children:[f.contrast,"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"200",value:f.contrast,onChange:E=>w("contrast",parseInt(E.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),g.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[g.jsx("span",{children:"B/N"})," ",g.jsxs("span",{children:[f.grayscale,"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"100",value:f.grayscale,onChange:E=>w("grayscale",parseInt(E.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`}),g.jsxs("div",{className:`flex items-center justify-between text-[10px] font-mono ${r?"text-zinc-400":"text-zinc-600"}`,children:[g.jsx("span",{children:"Sepia"})," ",g.jsxs("span",{children:[f.sepia,"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"100",value:f.sepia,onChange:E=>w("sepia",parseInt(E.target.value)),className:`w-full h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r?"bg-zinc-700":"bg-gray-300"}`})]}),g.jsx("div",{className:"tape-visual"}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(cn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(cn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),e.status&&g.jsx("div",{className:"absolute -top-4 -right-4 z-50 pointer-events-none select-none",style:{transform:`rotate(${v}deg)`},children:g.jsx($m,{status:e.status},JSON.stringify(e.status))}),g.jsx("div",{className:`h-full w-full ${i?"bg-zinc-100 p-2 pb-10 rotate-1 hover:rotate-0":r?"bg-zinc-900/50 border-zinc-700 hover:border-zinc-500":"bg-gray-200/50 border-gray-400 hover:border-gray-500"} shadow-[0_10px_20px_-5px_rgba(0,0,0,0.7)] flex items-center justify-center overflow-hidden rounded-sm relative group transition-all duration-300 ease-out hover:scale-105 hover:-translate-y-1 hover:shadow-[0_25px_50px_-12px_rgba(0,0,0,0.9)] ${y?"nodrag":""} ${e.isDeleting?"deleting-image":""} border-2 border-dashed`,children:i?g.jsxs("div",{className:"w-full h-full cursor-zoom-in",onClick:E=>{E.stopPropagation(),a(!0)},children:[g.jsx("img",{src:i,alt:"evidence",className:"w-full h-full object-cover border border-zinc-200",style:{filter:`brightness(${f.brightness}%) contrast(${f.contrast}%) grayscale(${f.grayscale}%) sepia(${f.sepia}%)`}}),g.jsx("div",{className:"absolute bottom-0 left-0 w-full h-10 flex items-center justify-center px-2",children:g.jsx("input",{type:"text",name:"image-caption",className:"nodrag w-full bg-transparent text-center text-zinc-800 text-xs outline-none placeholder-zinc-400/50 border-none p-0",placeholder:"",defaultValue:e.caption,onChange:E=>e.caption=E.target.value,onClick:E=>E.stopPropagation(),style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", cursive'}})})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full p-2 gap-1",children:[g.jsxs("label",{className:`nodrag cursor-pointer flex flex-col items-center gap-1 transition-colors ${r?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,children:[g.jsx(Lm,{size:24}),g.jsx("span",{className:"text-[10px] font-mono uppercase text-center",children:"Subir Local"}),g.jsx("input",{type:"file",name:"upload-image",className:"hidden",accept:"image/*",onChange:R})]}),g.jsx("div",{className:`text-[10px] font-mono ${r?"text-zinc-600":"text-zinc-400"}`,children:"- O -"}),g.jsx("input",{type:"text",name:"image-url",placeholder:"Pegar URL...",className:`nodrag w-full border text-[10px] p-1 rounded outline-none focus:border-purple-500 font-mono text-center ${r?"bg-zinc-950 border-zinc-700 text-zinc-300":"bg-white border-gray-300 text-zinc-700"}`,onKeyDown:E=>{if(E.key==="Enter"){const k=E.currentTarget.value;s(k),e.image=k;const A=new Image;A.crossOrigin="Anonymous",A.onload=()=>{try{const T=document.createElement("canvas");T.width=A.width,T.height=A.height,T.getContext("2d").drawImage(A,0,0);const j=T.toDataURL("image/jpeg");s(j),b(z=>z.map(B=>B.id===t?{...B,data:{...B.data,image:j}}:B))}catch(T){console.warn("CORS blocked",T)}},A.src=k}}})]})}),o&&Nl.createPortal(g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center p-8 cursor-zoom-out backdrop-blur-sm animate-in fade-in duration-200",onClick:E=>{E.stopPropagation(),a(!1)},children:g.jsx("img",{src:i,alt:"Evidence HD",className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm",style:{filter:`brightness(${f.brightness}%) contrast(${f.contrast}%) grayscale(${f.grayscale}%) sepia(${f.sepia}%)`}})}),document.body),l&&Nl.createPortal(g.jsx(fO,{isOpen:l,onClose:()=>u(!1),imageSrc:i,onCropComplete:C}),document.body)]})},gO=L.memo(pO),mO=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=Ir(),o=!!e.locked,a=h=>{h.stopPropagation(),s(f=>f.map(m=>{if(m.id===t){const S=!!m.data.locked;return{...m,draggable:!0,data:{...m.data,locked:!S}}}return m}))},l=(h,f)=>{s(m=>m.map(S=>S.id===t?{...S,data:{...S.data,[h]:f}}:S))},u=["#e5e5e5","#18181b","#ef4444","#3b82f6","#22c55e","#eab308"],d=[{label:"S",val:"14px"},{label:"M",val:"24px"},{label:"L",val:"36px"},{label:"XL",val:"48px"}];return g.jsxs(g.Fragment,{children:[g.jsx(sa,{color:"#71717a",isVisible:n&&!o,minWidth:100,minHeight:30,handleStyle:{width:15,height:15}}),n&&g.jsx("button",{onClick:()=>{i({nodes:[{id:t}]})},className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:g.jsx(rs,{size:12})}),(n||o)&&g.jsx("button",{onClick:a,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${o?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:o?g.jsx(aa,{size:12}):g.jsx(oa,{size:12})}),n&&!o&&g.jsxs("div",{className:`nodrag absolute -bottom-10 left-1/2 transform -translate-x-1/2 flex flex-col gap-1 p-1.5 rounded-lg shadow-xl border z-50 backdrop-blur-sm items-center ${r?"bg-zinc-900/90 border-zinc-700":"bg-white/90 border-gray-200"}`,children:[g.jsx("div",{className:"flex gap-1",children:u.map(h=>g.jsx("button",{onClick:()=>l("color",h),className:"w-4 h-4 rounded-full border border-white/20 hover:scale-125 transition-transform",style:{backgroundColor:h}},h))}),g.jsx("div",{className:`flex gap-1 border-t pt-1 mt-0.5 ${r?"border-white/10":"border-black/10"}`,children:d.map(h=>g.jsx("button",{onClick:()=>l("fontSize",h.val),className:`text-[8px] px-1 font-mono border rounded ${r?"text-zinc-300 hover:text-white border-zinc-700 bg-zinc-800 hover:bg-zinc-700":"text-zinc-600 hover:text-black border-gray-300 bg-gray-100 hover:bg-gray-200"}`,children:h.label},h.label))})]}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(cn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(cn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),g.jsx("div",{className:`h-full w-full p-2 flex items-center justify-center overflow-hidden border border-transparent hover:border-zinc-700/50 rounded transition-colors ${o?"nodrag":""} ${e.isDeleting?"deleting-default":""}`,children:g.jsx("textarea",{name:"text-content",className:`nodrag w-full h-full bg-transparent resize-none outline-none font-bold text-center p-2 ${e.color?"":"text-node-content text-gray-200"}`,placeholder:"Escribe un ttulo...",defaultValue:e.label,onChange:h=>e.label=h.target.value,style:{fontFamily:'"Courier Prime", monospace',color:e.color,fontSize:e.fontSize||"24px"}})})]})},yO=L.memo(mO),vO=({id:t,data:e,selected:n,style:r,isDarkMode:i})=>{const{setNodes:s}=Ir(),o=(r==null?void 0:r.borderColor)||"#71717a",a=(r==null?void 0:r.backgroundColor)||(i?"rgba(113, 113, 122, 0.05)":"rgba(100, 116, 139, 0.05)"),l=!!e.locked,u=d=>{d.stopPropagation(),s(h=>h.map(f=>{if(f.id===t){const m=!!f.data.locked;return{...f,draggable:m,data:{...f.data,locked:!m}}}return f}))};return g.jsxs(g.Fragment,{children:[g.jsx(sa,{color:o,isVisible:n&&!l,minWidth:150,minHeight:150}),(n||l)&&g.jsx("button",{onClick:u,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${l?"bg-red-900 border-red-700 text-red-200":i?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:l?g.jsx(aa,{size:12}):g.jsx(oa,{size:12})}),g.jsx("div",{className:`h-full w-full border-2 border-dashed rounded-xl transition-colors ${l?"nodrag":""} ${e.isDeleting?"deleting-zone":""}`,style:{borderColor:o,backgroundColor:a},children:g.jsx("div",{className:`absolute -top-3 left-4 px-2 py-0.5 rounded text-[10px] font-mono uppercase tracking-widest select-none whitespace-nowrap shadow-sm ${i?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-white border border-gray-300 text-gray-600"}`,children:e.label})})]})},wO=L.memo(vO),_O=({id:t,data:e,selected:n,isDarkMode:r})=>{const{deleteElements:i,setNodes:s}=Ir(),[o,a]=L.useState(e.url||""),[l,u]=L.useState(!e.url),d=!!e.showIframe,[h,f]=L.useState(!1),[m,S]=L.useState(0),[b,N]=L.useState(null),[y,v]=L.useState(!0),[I,R]=L.useState(!1),O=!!e.locked,M=L.useMemo(()=>{if(!e.url)return"";try{const P=new URL(e.url);if(P.hostname.includes("youtube.com")||P.hostname.includes("youtu.be")){let z=null;if(P.hostname.includes("youtu.be"))z=P.pathname.slice(1);else if(P.searchParams.has("v"))z=P.searchParams.get("v");else if(P.pathname.startsWith("/embed/"))return e.url;if(z)return`https://www.youtube-nocookie.com/embed/${z}?rel=0&modestbranding=1&iv_load_policy=3&controls=1&playsinline=1&loop=1&playlist=${z}`}}catch{}return e.url},[e.url]),C=e.url?`https://s.wordpress.com/mshots/v1/${encodeURIComponent(e.url)}?w=400&v=${m}`:null,x=C?`https://wsrv.nl/?url=${encodeURIComponent(C)}`:null;L.useEffect(()=>{if(N(null),!x)return;(j=>{const z=new Image;z.crossOrigin="Anonymous",z.referrerPolicy="no-referrer",z.src=j,z.onload=()=>{try{const B=document.createElement("canvas");B.width=z.width,B.height=z.height,B.getContext("2d").drawImage(z,0,0);const V=B.toDataURL("image/jpeg");N(V),v(!1)}catch{v(!1),R(!0)}},z.onerror=()=>{v(!1),R(!0)}})(x)},[x]);const w=P=>{P.stopPropagation(),s(j=>j.map(z=>{if(z.id===t){const B=!!z.data.locked;return{...z,draggable:B,data:{...z.data,locked:!B}}}return z}))},E=()=>{let P=o;P&&!P.startsWith("http")&&(P="https://"+P),s(j=>j.map(z=>z.id===t?{...z,data:{...z.data,url:P,showIframe:!1}}:z)),u(!1),f(!1),R(!1),v(!0)},k=()=>{u(!0),f(!1),R(!1),v(!0)},A=P=>{P.stopPropagation(),S(j=>j+1),f(!1),R(!1),v(!0)},T=()=>{const P=!d;f(!1),s(j=>j.map(z=>z.id===t?{...z,data:{...z.data,showIframe:P}}:z))};return g.jsxs(g.Fragment,{children:[g.jsx(sa,{color:"#3b82f6",isVisible:n&&!O,minWidth:200,minHeight:100}),n&&g.jsx("button",{onClick:()=>i({nodes:[{id:t}]}),className:"nodrag absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 z-50 transition-transform hover:scale-110",children:g.jsx(rs,{size:12})}),(n||O)&&g.jsx("button",{onClick:w,className:`nodrag absolute -top-3 -left-3 z-50 p-1 rounded-full shadow-md border transition-all ${O?"bg-red-900 border-red-700 text-red-200":r?"bg-zinc-800 border-zinc-600 text-zinc-400 hover:text-white":"bg-white border-gray-300 text-gray-500 hover:text-black"}`,children:O?g.jsx(aa,{size:12}):g.jsx(oa,{size:12})}),g.jsxs("div",{className:"absolute -top-3 w-4 h-4 z-50",style:{left:"calc(50% - 8px)"},children:[g.jsx("div",{className:"w-full h-full rounded-full pin-3d pointer-events-none"}),g.jsx(cn,{type:"target",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}}),g.jsx(cn,{type:"source",position:oe.Top,style:{position:"absolute",top:"7px",left:"7px",width:"2px",height:"2px",opacity:0,background:"transparent",border:"none"}})]}),g.jsxs("div",{className:`relative w-full h-full rounded-lg overflow-hidden border-2 transition-all shadow-lg flex flex-col ${r?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"} ${O?"nodrag":""} ${e.isDeleting?"deleting-default":""}`,children:[g.jsxs("div",{className:`h-8 flex items-center px-2 gap-2 border-b ${r?"bg-zinc-800 border-zinc-700":"bg-gray-100 border-gray-200"}`,children:[g.jsx(kD,{size:14,className:"text-blue-500"}),g.jsx("span",{className:`text-[10px] font-mono truncate flex-1 ${r?"text-zinc-400":"text-gray-600"}`,children:e.url?new URL(e.url).hostname:"ENLACE WEB"}),!l&&g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:T,className:`text-zinc-500 transition-colors ${d?"text-blue-500":"hover:text-blue-500"}`,title:d?"Ver miniatura":"Ver interactivo",children:g.jsx(LD,{size:12})}),g.jsx("button",{onClick:A,className:"text-zinc-500 hover:text-green-500 transition-colors",title:"Actualizar miniatura",children:g.jsx(Zb,{size:12})}),g.jsx("button",{onClick:k,className:"text-zinc-500 hover:text-blue-500 transition-colors",children:g.jsx(jD,{size:12})})]})]}),g.jsx("div",{className:"flex-1 relative bg-black/5 group",children:l?g.jsxs("div",{className:"p-4 flex flex-col gap-2 h-full justify-center",children:[g.jsx("input",{type:"text",name:"url-input",value:o,onChange:P=>a(P.target.value),placeholder:"https://ejemplo.com",className:`nodrag w-full text-xs p-2 rounded border outline-none font-mono ${r?"bg-zinc-950 border-zinc-700 text-white":"bg-white border-gray-300 text-black"}`,onKeyDown:P=>P.key==="Enter"&&E()}),g.jsx("button",{onClick:E,className:"bg-blue-600 text-white text-xs py-1 rounded hover:bg-blue-500 font-bold uppercase",children:"Guardar"})]}):g.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[g.jsx("div",{className:"flex-1 relative overflow-hidden bg-zinc-200 dark:bg-zinc-800 min-h-0",children:d?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`absolute top-0 left-0 w-full py-1 px-2 flex flex-col gap-1 items-center justify-center z-20 ${r?"bg-zinc-950/80":"bg-white/80"} backdrop-blur-[2px]`,children:g.jsx("span",{className:`text-[9px] leading-tight text-center select-none ${r?"text-zinc-400":"text-zinc-600"}`,children:"Si no carga, el sitio bloquea la conexin."})}),g.jsx("iframe",{src:M,className:"w-full h-full border-none relative z-10 bg-white",title:"Embedded Content",loading:"lazy",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-presentation allow-modals allow-popups-to-escape-sandbox",onError:P=>{console.warn("Error loading iframe:",e.url),P.target.style.display="none"}},m)]}):g.jsxs(g.Fragment,{children:[y&&e.url&&g.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center z-20",children:g.jsx("div",{className:"w-6 h-6 border-2 border-zinc-400 border-t-transparent rounded-full animate-spin"})}),b&&!I&&g.jsx("img",{src:b,alt:"Preview",className:"w-full h-full object-cover opacity-90 hover:opacity-100 transition-opacity"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(!e.url||I)&&g.jsx(Om,{size:32,className:"text-zinc-400"})})]})}),g.jsxs("a",{href:e.url,target:"_blank",rel:"noopener",draggable:"false",onDragStart:P=>P.preventDefault(),className:`nodrag h-10 shrink-0 flex items-center justify-center gap-2 text-xs font-bold uppercase transition-colors z-10 relative ${r?"bg-zinc-800 hover:bg-zinc-700 text-blue-400":"bg-gray-200 hover:bg-gray-300 text-zinc-900"}`,children:[g.jsx(TD,{size:14})," Visitar Sitio"]})]})})]})]})},xO=L.memo(_O),lh=({id:t,sourceX:e,sourceY:n,targetX:r,targetY:i,sourcePosition:s,targetPosition:o,style:a={},markerEnd:l,label:u,type:d,className:h})=>{let f="",m=0,S=0;const b={sourceX:e,sourceY:n,targetX:r,targetY:i,sourcePosition:s,targetPosition:o};return d==="straight"?[f,m,S]=nb(b):d==="step"?[f,m,S]=jl({...b,borderRadius:0}):d==="smoothstep"?[f,m,S]=jl(b):[f,m,S]=Im(b),g.jsxs(g.Fragment,{children:[g.jsx(ia,{path:f,markerEnd:l,style:a,className:h}),u&&g.jsx(N5,{children:g.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${m}px,${S}px)`,pointerEvents:"all"},className:"nodrag nopan",children:g.jsx("div",{className:"custom-edge-label",children:u})})})]})},EO=t=>g.jsx(lh,{...t,type:"straight"}),bO=t=>g.jsx(lh,{...t,type:"step"}),SO=t=>g.jsx(lh,{...t,type:"smoothstep"}),TO=t=>g.jsx(lh,{...t,type:"default"}),g2=L.createContext(!0),oo=t=>e=>{const n=L.useContext(g2);return L.createElement(t,{...e,isDarkMode:n})},IO={evidence:oo(uO),note:oo(hO),image:oo(gO),text:oo(yO),zone:oo(wO),url:oo(xO)},CO={default:TO,straight:EO,step:bO,smoothstep:SO},kO=({connectionColor:t})=>{const e=L.useMemo(()=>({hideAttribution:!0}),[]),n=L.useMemo(()=>({stroke:t,strokeWidth:2}),[t]),r=L.useCallback(i=>{switch(i.type){case"evidence":switch(i.data.category){case"person":return"#3b82f6";case"place":return"#22c55e";case"clue":return"#f97316";case"event":return"#ef4444";default:return"#ef4444"}case"note":return"#eab308";case"image":return"#a855f7";case"text":return"#71717a";default:return"#ef4444"}},[]);return{nodeTypes:IO,edgeTypes:CO,proOptions:e,connectionLineStyle:n,nodeColor:r}},AO=(t,e,n,r)=>{const[i,s]=L.useState([]),[o,a]=L.useState([]),l=L.useCallback(()=>{s(f=>[...f,{nodes:t,edges:e}]),a([])},[t,e]),u=L.useCallback(()=>{if(i.length===0)return;const f=i[i.length-1],m=i.slice(0,i.length-1);a(S=>[{nodes:t,edges:e},...S]),s(m),n(f.nodes),r(f.edges)},[i,t,e,n,r]),d=L.useCallback(()=>{if(o.length===0)return;const f=o[0],m=o.slice(1);s(S=>[...S,{nodes:t,edges:e}]),a(m),n(f.nodes),r(f.edges)},[o,t,e,n,r]),h=L.useCallback(()=>{s([]),a([])},[]);return{takeSnapshot:l,undo:u,redo:d,clearHistory:h,canUndo:i.length>0,canRedo:o.length>0}},RO=({nodes:t,edges:e,setNodes:n,setEdges:r,onNodesChange:i,onEdgesChange:s})=>{const{takeSnapshot:o,undo:a,redo:l,clearHistory:u}=AO(t,e,n,r),d=L.useCallback(S=>{n(b=>{var y;const N=b.find(v=>v.id===S);return!N||(y=N.data)!=null&&y.isDeleting?b:(setTimeout(()=>{n(v=>{var R;const I=v.find(O=>O.id===S);return I&&((R=I.data)!=null&&R.isDeleting)?v.filter(O=>O.id!==S):v}),r(v=>v.filter(I=>I.source!==S&&I.target!==S))},500),b.map(v=>v.id===S?{...v,data:{...v.data,isDeleting:!0}}:v))})},[n,r]),h=L.useCallback(S=>{r(b=>{var y;const N=b.find(v=>v.id===S);return!N||(y=N.className)!=null&&y.includes("deleting-edge")?b:(setTimeout(()=>{r(v=>v.filter(I=>I.id!==S))},300),b.map(v=>v.id===S?{...v,className:`${v.className||""} deleting-edge`}:v))})},[r]),f=L.useCallback(S=>{const b=S.filter(y=>y.type!=="remove"),N=S.filter(y=>y.type==="remove");N.length>0&&(o(),N.forEach(y=>d(y.id))),b.length>0&&i(b)},[i,o,d]),m=L.useCallback(S=>{const b=S.filter(y=>y.type!=="remove"),N=S.filter(y=>y.type==="remove");N.length>0&&(o(),N.forEach(y=>h(y.id))),b.length>0&&s(b)},[s,o,h]);return{takeSnapshot:o,undo:a,redo:l,clearHistory:u,onNodesChangeWithHistory:f,onEdgesChangeWithHistory:m,animateAndRemoveNode:d,animateAndRemoveEdge:h}},NO=(t,e,n,r,i)=>{const[s,o]=L.useState(null),a=L.useRef(null),l=L.useCallback(u=>{if(u.button!==2||!n||u.target.closest(".react-flow__node")||u.target.closest(".react-flow__edge")||u.target.closest(".react-flow__controls")||u.target.closest(".react-flow__minimap"))return;u.preventDefault();const{left:d,top:h}=t.current.getBoundingClientRect(),f=u.clientX-d,m=u.clientY-h;a.current={startX:f,startY:m,x:f,y:m,width:0,height:0,isDragging:!1};const S=N=>{if(N.buttons===0){b(N);return}if(!a.current||!t.current)return;const y=t.current.getBoundingClientRect(),v=N.clientX-y.left,I=N.clientY-y.top,R=Math.min(a.current.startX,v),O=Math.min(a.current.startY,I),M=Math.abs(v-a.current.startX),C=Math.abs(I-a.current.startY);(M>5||C>5)&&(a.current={...a.current,x:R,y:O,width:M,height:C,isDragging:!0},o({...a.current}))},b=N=>{var I;window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",b);const y=(I=a.current)==null?void 0:I.isDragging,v=a.current;if(a.current=null,o(null),!y)r(N);else if(v&&e){const R=t.current.getBoundingClientRect(),O=e.screenToFlowPosition({x:R.left+v.x,y:R.top+v.y}),M=e.screenToFlowPosition({x:R.left+v.x+v.width,y:R.top+v.y+v.height}),C={x:Math.min(O.x,M.x),y:Math.min(O.y,M.y),width:Math.abs(M.x-O.x),height:Math.abs(M.y-O.y)},x=e.getNodes().filter(w=>{var P,j,z,B;const E=w.width??((P=w.measured)==null?void 0:P.width)??200,k=w.height??((j=w.measured)==null?void 0:j.height)??150,A=((z=w.positionAbsolute)==null?void 0:z.x)??w.position.x,T=((B=w.positionAbsolute)==null?void 0:B.y)??w.position.y;return C.x<A+E&&C.x+C.width>A&&C.y<T+k&&C.y+C.height>T});i(w=>w.map(E=>({...E,selected:x.some(k=>k.id===E.id)||N.shiftKey&&E.selected})))}};window.addEventListener("pointermove",S),window.addEventListener("pointerup",b),window.addEventListener("pointercancel",b)},[n,r,e,i,t]);return{selectionRect:s,handleRightPointerDown:l}},PO=({isInteractive:t,reactFlowInstance:e,reactFlowWrapper:n,setEdges:r,setNodes:i,connectionLineType:s,connectionColor:o,takeSnapshot:a,setEditingNode:l,setEditingEdge:u,setInputModalOpen:d,setEditModalOpen:h,setMenu:f})=>{const m=L.useCallback(x=>{a(),r(w=>ib({...x,type:s,style:{stroke:o,strokeWidth:2}},w))},[r,o,a,s]),S=L.useCallback((x,w)=>{x.preventDefault(),x.stopPropagation(),t&&(l(null),u(w),d(!0))},[t,l,u,d]),b=L.useCallback((x,w)=>{t&&(a(),r(E=>E.map(k=>{var A;if(k.id===w.id){const T=(A=k.style)==null?void 0:A.strokeDasharray;return{...k,style:{...k.style,strokeDasharray:T?void 0:"10,10"}}}return k})))},[r,t,a]),N=L.useCallback(()=>f(null),[f]),y=L.useCallback(x=>{if(x.preventDefault(),!t)return;const w=n.current.getBoundingClientRect();f({top:x.clientY<w.bottom-200?x.clientY-w.top:void 0,left:x.clientX<w.right-200?x.clientX-w.left:void 0,right:x.clientX>=w.right-200?w.width-(x.clientX-w.left):void 0,bottom:x.clientY>=w.bottom-200?w.height-(x.clientY-w.top):void 0,clientX:x.clientX,clientY:x.clientY})},[t,n,f]),{selectionRect:v,handleRightPointerDown:I}=NO(n,e,t,y,i),R=L.useCallback((x,w)=>{w.type==="evidence"?(l(w),h(!0)):w.type==="zone"&&(u(null),l(w),d(!0))},[l,h,u,d]),O=L.useCallback((x,w)=>{a(),w.type!=="zone"&&i(E=>{const k=E.findIndex(P=>P.id===w.id);if(k===E.length-1)return E;const A=[...E],[T]=A.splice(k,1);return A.push(T),A})},[a,i]),M=L.useCallback(()=>{n.current&&n.current.classList.add("is-moving")},[n]),C=L.useCallback(()=>{n.current&&n.current.classList.remove("is-moving")},[n]);return{onConnect:m,onEdgeContextMenu:S,onEdgeClick:b,onPaneClick:N,onPaneContextMenu:y,onNodeDoubleClick:R,onNodeDragStart:O,onMoveStart:M,onMoveEnd:C,selectionRect:v,handleRightPointerDown:I}},DO=({reactFlowInstance:t,boards:e,currentBoardId:n,bgType:r,setBoards:i,setNodes:s,setEdges:o,setBgType:a,handleSwitchBoard:l,clearHistory:u,takeSnapshot:d,setConfirmModal:h})=>{const f=L.useCallback(()=>{if(t){const N={...t.toObject(),bgType:r},y=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),v=URL.createObjectURL(y),I=document.createElement("a");I.href=v;const R=e.find(M=>M.id===n),O=R?R.name.replace(/[^a-z0-9\u00C0-\u017F\s-_]/gi,""):"caso-detective";I.download=`${O}.json`,I.click(),URL.revokeObjectURL(v)}},[t,e,n,r]),m=L.useCallback(b=>{const N=b.target.files[0];if(!N)return;const y=N.name.replace(/\.json$/i,""),v=new FileReader;v.onload=I=>{try{const R=JSON.parse(I.target.result);if(R&&(R.nodes||R.edges)){const O=R.nodes||[],M=R.edges||[],C=R.bgType||"cork",x=e.find(w=>w.name===y);if(x)h({isOpen:!0,title:"SOBRESCRIBIR CASO?",message:`Ya existe un caso llamado "${y}". Deseas sobrescribir sus datos con este archivo?`,confirmText:"Sobrescribir",cancelText:"Cancelar",isDanger:!0,onConfirm:()=>{localStorage.setItem(`board-${x.id}-nodes`,JSON.stringify(O)),localStorage.setItem(`board-${x.id}-edges`,JSON.stringify(M)),localStorage.setItem(`board-${x.id}-bg`,C),x.id===n?(s(O),o(M),a(C),u()):l(x.id)}});else{const w=vn(),E={id:w,name:y,createdAt:Date.now(),lastModified:Date.now()};localStorage.setItem(`board-${w}-nodes`,JSON.stringify(O)),localStorage.setItem(`board-${w}-edges`,JSON.stringify(M)),localStorage.setItem(`board-${w}-bg`,C),i(k=>[...k,E]),l(w)}}}catch(R){console.error("Error al cargar el caso",R),alert("El archivo no es vlido.")}},v.readAsText(N),b.target.value=""},[e,n,s,o,a,l,i,h,u]),S=L.useCallback(()=>{h({isOpen:!0,title:"LIMPIAR TABLERO?",message:"Ests seguro de que quieres eliminar todo el contenido del tablero? Esta accin no se puede deshacer.",onConfirm:()=>{d(),s([]),o([])},isDanger:!0})},[d,s,o,h]);return{onSave:f,onLoad:m,onClear:S}},LO=({searchTerm:t,setNodes:e,reactFlowInstance:n})=>(L.useEffect(()=>{if(e(i=>i.map(s=>{var u,d;if(!t)return{...s,style:{...s.style,opacity:1}};const o=((u=s.data.label)==null?void 0:u.toLowerCase())||"",a=((d=s.data.description)==null?void 0:d.toLowerCase())||"",l=o.includes(t.toLowerCase())||a.includes(t.toLowerCase());return{...s,style:{...s.style,opacity:l?1:.1}}})),t&&t.length>1&&n){const s=n.getNodes().find(o=>{var u,d;const a=((u=o.data.label)==null?void 0:u.toLowerCase())||"",l=((d=o.data.description)==null?void 0:d.toLowerCase())||"";return a.includes(t.toLowerCase())||l.includes(t.toLowerCase())});s&&n.setCenter(s.position.x+(s.width||0)/2,s.position.y+(s.height||0)/2,{zoom:1.5,duration:800})}},[t,e,n]),{navigateSearch:L.useCallback(i=>{if(!t||!n)return;const o=n.getNodes().filter(f=>{var b,N;const m=((b=f.data.label)==null?void 0:b.toLowerCase())||"",S=((N=f.data.description)==null?void 0:N.toLowerCase())||"";return m.includes(t.toLowerCase())||S.includes(t.toLowerCase())});if(o.length===0)return;const a=o.findIndex(f=>f.selected);let l=i==="next"?a+1:a-1;l>=o.length&&(l=0),l<0&&(l=o.length-1);const u=o[l];e(f=>f.map(m=>({...m,selected:m.id===u.id})));const d=u.width||150,h=u.height||50;n.setCenter(u.position.x+d/2,u.position.y+h/2,{zoom:1.5,duration:600})},[t,n,e])}),OO=t=>{const[e,n]=L.useState("#dc2626"),[r,i]=L.useState("straight"),[s,o]=L.useState(!0),[a,l]=L.useState(!0),[u,d]=L.useState(""),[h,f]=L.useState(!0),[m,S]=L.useState(!1),[b,N]=L.useState(t),y=L.useCallback(()=>{const v=["cork","blackboard","paper"];N(I=>v[(v.indexOf(I)+1)%v.length])},[]);return{connectionColor:e,setConnectionColor:n,connectionLineType:r,setConnectionLineType:i,isInteractive:s,setIsInteractive:o,isDarkMode:a,setIsDarkMode:l,searchTerm:u,setSearchTerm:d,isSidebarOpen:h,setIsSidebarOpen:f,isZenMode:m,setIsZenMode:S,bgType:b,setBgType:N,toggleBackground:y}},zO=({reactFlowInstance:t,setNodes:e,setEdges:n,takeSnapshot:r,animateAndRemoveNode:i,animateAndRemoveEdge:s,setEditModalOpen:o,setEditingNode:a,setEditingEdge:l,setInputModalOpen:u,setConnectionColor:d,setConnectionLineType:h,setPendingStampNodeId:f})=>{const m=L.useCallback((O,M)=>{r(),e(C=>C.map(x=>x.id===O?{...x,data:M}:x))},[e,r]),S=L.useCallback(O=>{r(),i(O),o(!1),a(null)},[i,r,o,a]),b=L.useCallback(()=>{if(!t)return;const O=t.getNodes().filter(M=>M.selected);if(O.length>0){r();const M=new Map,C=O.map(E=>{const k=vn();return M.set(E.id,k),{...E,id:k,position:{x:E.position.x+50,y:E.position.y+50},selected:!0,data:{...E.data}}}),w=t.getEdges().filter(E=>M.has(E.source)&&M.has(E.target)).map(E=>({...E,id:vn(),source:M.get(E.source),target:M.get(E.target),selected:!0}));e(E=>E.map(k=>({...k,selected:!1})).concat(C)),n(E=>E.map(k=>({...k,selected:!1})).concat(w))}},[t,e,n,r]),N=L.useCallback(O=>{d(O),n(M=>M.map(C=>C.selected?{...C,style:{...C.style,stroke:O}}:C))},[n,d]),y=L.useCallback(O=>{h(O),n(M=>M.map(C=>C.selected?{...C,type:O}:C))},[n,h]),v=L.useCallback((O,M,C,x)=>{x&&(r(),n(w=>w.map(E=>E.id===x.id?{...E,label:O,type:C||E.type,style:{...E.style,stroke:M},labelStyle:void 0,labelBgStyle:void 0}:E)),l(null))},[n,r,l]),I=L.useCallback((O,M)=>{O?(r(),s(O.id),l(null),u(!1)):M&&M.type==="zone"&&(S(M.id),u(!1))},[s,S,r,l,u]),R=L.useCallback((O,M,C,x,w,E)=>{x?v(O,M,C,x):w&&w.type==="zone"?(r(),e(k=>k.map(A=>A.id===w.id?{...A,data:{...A.data,label:O},style:{...A.style,borderColor:M,backgroundColor:`${M}10`}}:A)),a(null),u(!1)):E&&(r(),e(k=>k.map(A=>A.id===E?{...A,data:{...A.data,status:{type:"custom",label:O||"SELLO",color:M}}}:A)),f(null),u(!1))},[v,e,r,a,u,f]);return{handleSaveNode:m,handleDeleteNode:S,duplicateSelected:b,handleConnectionColorChange:N,handleConnectionLineTypeChange:y,handleEdgeLabelSave:v,handleEdgeDelete:I,handleInputModalConfirm:R}};var Aw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},y2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(m2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new MO;const f=s<<2|a>>4;if(r.push(f),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const S=u<<6&192|h;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jO=function(t){const e=m2(t);return y2.encodeByteArray(e,!0)},_d=function(t){return jO(t).replace(/\./g,"")},v2=function(t){try{return y2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=()=>$O().__FIREBASE_DEFAULTS__,UO=()=>{if(typeof process>"u"||typeof Aw>"u")return;const t=Aw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&v2(t[1]);return e&&JSON.parse(e)},ch=()=>{try{return FO()||UO()||BO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w2=t=>{var e,n;return(n=(e=ch())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HO=t=>{const e=w2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_2=()=>{var t;return(t=ch())===null||t===void 0?void 0:t.config},x2=t=>{var e;return(e=ch())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_d(JSON.stringify(n)),_d(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function GO(){var t;const e=(t=ch())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XO(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JO(){return!GO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b2(){try{return typeof indexedDB=="object"}catch{return!1}}function S2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function ZO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e3,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fs.prototype.create)}}class Fs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?t3(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new cr(i,a,r)}}function t3(t,e){return t.replace(n3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const n3=/\{\$([^}]+)}/g;function r3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Rw(s)&&Rw(o)){if(!Fl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Rw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ka(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ga(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function i3(t,e){const n=new s3(t,e);return n.subscribe.bind(n)}class s3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");o3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=bf),i.error===void 0&&(i.error=bf),i.complete===void 0&&(i.complete=bf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=1e3,l3=2,c3=4*60*60*1e3,u3=.5;function Nw(t,e=a3,n=l3){const r=e*Math.pow(n,t),i=Math.round(u3*r*(Math.random()-.5)*2);return Math.min(c3,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){return t&&t._delegate?t._delegate:t}class or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f3(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:h3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h3(t){return t===ds?void 0:t}function f3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new d3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const g3={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},m3=Se.INFO,y3={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},v3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=y3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uh{constructor(e){this.name=e,this._logLevel=m3,this._logHandler=v3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const w3=(t,e)=>e.some(n=>t instanceof n);let Pw,Dw;function _3(){return Pw||(Pw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x3(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T2=new WeakMap,Yp=new WeakMap,I2=new WeakMap,Sf=new WeakMap,Fm=new WeakMap;function E3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&T2.set(n,t)}).catch(()=>{}),Fm.set(e,t),e}function b3(t){if(Yp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Yp.set(t,e)}let Xp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||I2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S3(t){Xp=t(Xp)}function T3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Tf(this),e,...n);return I2.set(r,e.sort?e.sort():[e]),Hi(r)}:x3().includes(t)?function(...e){return t.apply(Tf(this),e),Hi(T2.get(this))}:function(...e){return Hi(t.apply(Tf(this),e))}}function I3(t){return typeof t=="function"?T3(t):(t instanceof IDBTransaction&&b3(t),w3(t,_3())?new Proxy(t,Xp):t)}function Hi(t){if(t instanceof IDBRequest)return E3(t);if(Sf.has(t))return Sf.get(t);const e=I3(t);return e!==t&&(Sf.set(t,e),Fm.set(e,t)),e}const Tf=t=>Fm.get(t);function C2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hi(o.result),l.oldVersion,l.newVersion,Hi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const C3=["get","getKey","getAll","getAllKeys","count"],k3=["put","add","delete","clear"],If=new Map;function Lw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(If.get(e))return If.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=k3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||C3.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return If.set(e,s),s}S3(t=>({...t,get:(e,n,r)=>Lw(e,n)||t.get(e,n,r),has:(e,n)=>!!Lw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(R3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function R3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jp="@firebase/app",Ow="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new uh("@firebase/app"),N3="@firebase/app-compat",P3="@firebase/analytics-compat",D3="@firebase/analytics",L3="@firebase/app-check-compat",O3="@firebase/app-check",z3="@firebase/auth",V3="@firebase/auth-compat",M3="@firebase/database",j3="@firebase/data-connect",$3="@firebase/database-compat",F3="@firebase/functions",U3="@firebase/functions-compat",B3="@firebase/installations",H3="@firebase/installations-compat",q3="@firebase/messaging",W3="@firebase/messaging-compat",K3="@firebase/performance",G3="@firebase/performance-compat",Q3="@firebase/remote-config",Y3="@firebase/remote-config-compat",X3="@firebase/storage",J3="@firebase/storage-compat",Z3="@firebase/firestore",ez="@firebase/vertexai-preview",tz="@firebase/firestore-compat",nz="firebase",rz="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="[DEFAULT]",iz={[Jp]:"fire-core",[N3]:"fire-core-compat",[D3]:"fire-analytics",[P3]:"fire-analytics-compat",[O3]:"fire-app-check",[L3]:"fire-app-check-compat",[z3]:"fire-auth",[V3]:"fire-auth-compat",[M3]:"fire-rtdb",[j3]:"fire-data-connect",[$3]:"fire-rtdb-compat",[F3]:"fire-fn",[U3]:"fire-fn-compat",[B3]:"fire-iid",[H3]:"fire-iid-compat",[q3]:"fire-fcm",[W3]:"fire-fcm-compat",[K3]:"fire-perf",[G3]:"fire-perf-compat",[Q3]:"fire-rc",[Y3]:"fire-rc-compat",[X3]:"fire-gcs",[J3]:"fire-gcs-compat",[Z3]:"fire-fst",[tz]:"fire-fst-compat",[ez]:"fire-vertex","fire-js":"fire-js",[nz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,sz=new Map,eg=new Map;function zw(t,e){try{t.container.addComponent(e)}catch(n){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function br(t){const e=t.name;if(eg.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;eg.set(e,t);for(const n of xd.values())zw(n,t);for(const n of sz.values())zw(n,t);return!0}function Us(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qi=new Fs("app","Firebase",oz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=rz;function k2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qi.create("bad-app-name",{appName:String(i)});if(n||(n=_2()),!n)throw qi.create("no-options");const s=xd.get(i);if(s){if(Fl(n,s.options)&&Fl(r,s.config))return s;throw qi.create("duplicate-app",{appName:i})}const o=new p3(i);for(const l of eg.values())o.addComponent(l);const a=new az(n,r,o);return xd.set(i,a),a}function Um(t=Zp){const e=xd.get(t);if(!e&&t===Zp&&_2())return k2();if(!e)throw qi.create("no-app",{appName:t});return e}function zn(t,e,n){var r;let i=(r=iz[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(a.join(" "));return}br(new or(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz="firebase-heartbeat-database",cz=1,Ul="firebase-heartbeat-store";let Cf=null;function A2(){return Cf||(Cf=C2(lz,cz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw qi.create("idb-open",{originalErrorMessage:t.message})})),Cf}async function uz(t){try{const n=(await A2()).transaction(Ul),r=await n.objectStore(Ul).get(R2(t));return await n.done,r}catch(e){if(e instanceof cr)Zr.warn(e.message);else{const n=qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(n.message)}}}async function Vw(t,e){try{const r=(await A2()).transaction(Ul,"readwrite");await r.objectStore(Ul).put(e,R2(t)),await r.done}catch(n){if(n instanceof cr)Zr.warn(n.message);else{const r=qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zr.warn(r.message)}}}function R2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=1024,hz=30*24*60*60*1e3;class fz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=hz}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mw(),{heartbeatsToSend:r,unsentEntries:i}=pz(this._heartbeatsCache.heartbeats),s=_d(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Zr.warn(n),""}}}function Mw(){return new Date().toISOString().substring(0,10)}function pz(t,e=dz){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),jw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b2()?S2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jw(t){return _d(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(t){br(new or("platform-logger",e=>new A3(e),"PRIVATE")),br(new or("heartbeat",e=>new fz(e),"PRIVATE")),zn(Jp,Ow,t),zn(Jp,Ow,"esm2017"),zn("fire-js","")}mz("");function Bm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function N2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yz=N2,P2=new Fs("auth","Firebase",N2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new uh("@firebase/auth");function vz(t,...e){Ed.logLevel<=Se.WARN&&Ed.warn(`Auth (${la}): ${t}`,...e)}function Ru(t,...e){Ed.logLevel<=Se.ERROR&&Ed.error(`Auth (${la}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw qm(t,...e)}function ir(t,...e){return qm(t,...e)}function Hm(t,e,n){const r=Object.assign(Object.assign({},yz()),{[e]:n});return new Fs("auth","Firebase",r).create(e,{appName:t.name})}function qr(t){return Hm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wz(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&jn(t,"argument-error"),Hm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return P2.create(t,...e)}function he(t,e,...n){if(!t)throw qm(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ru(e),new Error(e)}function ei(t,e){t||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _z(){return $w()==="http:"||$w()==="https:"}function $w(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_z()||E2()||"connection"in navigator)?navigator.onLine:!0}function Ez(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ei(n>e,"Short delay should be less than long delay!"),this.isMobile=KO()||YO()}get(){return xz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t,e){ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz=new lc(3e4,6e4);function ii(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function si(t,e,n,r,i={}){return L2(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ac(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return QO()||(u.referrerPolicy="no-referrer"),D2.fetch()(O2(t,t.config.apiHost,n,a),u)})}async function L2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},bz),e);try{const i=new Iz(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw lu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw lu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw lu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Hm(t,d,u);jn(t,d)}}catch(i){if(i instanceof cr)throw i;jn(t,"network-request-failed",{message:String(i)})}}async function cc(t,e,n,r,i={}){const s=await si(t,e,n,r,i);return"mfaPendingCredential"in s&&jn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function O2(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Wm(t.config,i):`${t.config.apiScheme}://${i}`}function Tz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Iz{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ir(this.auth,"network-request-failed")),Sz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ir(t,e,r);return i.customData._tokenResponse=n,i}function Fw(t){return t!==void 0&&t.enterprise!==void 0}class Cz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Tz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function kz(t,e){return si(t,"GET","/v2/recaptchaConfig",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Az(t,e){return si(t,"POST","/v1/accounts:delete",e)}async function z2(t,e){return si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Rz(t,e=!1){const n=qt(t),r=await n.getIdToken(e),i=Km(r);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ll(kf(i.auth_time)),issuedAtTime:ll(kf(i.iat)),expirationTime:ll(kf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function kf(t){return Number(t)*1e3}function Km(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ru("JWT malformed, contained fewer than 3 sections"),null;try{const i=v2(n);return i?JSON.parse(i):(Ru("Failed to decode base64 JWT payload"),null)}catch(i){return Ru("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Uw(t){const e=Km(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&Nz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Nz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Bl(t,z2(n,{idToken:r}));he(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?V2(s.providerUserInfo):[],a=Lz(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ng(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Dz(t){const e=qt(t);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Lz(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function V2(t){return t.map(e=>{var{providerId:n}=e,r=Bm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oz(t,e){const n=await L2(t,{},async()=>{const r=ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=O2(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",D2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zz(t,e){return si(t,"POST","/v2/accounts:revokeToken",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Uw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Oz(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Lo;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ng(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Rz(this,e)}reload(){return Dz(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(qr(this.auth));const e=await this.getIdToken();return await Bl(this,Az(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:R,isAnonymous:O,providerData:M,stsTokenManager:C}=n;he(I&&C,e,"internal-error");const x=Lo.fromJSON(this.name,C);he(typeof I=="string",e,"internal-error"),_i(h,e.name),_i(f,e.name),he(typeof R=="boolean",e,"internal-error"),he(typeof O=="boolean",e,"internal-error"),_i(m,e.name),_i(S,e.name),_i(b,e.name),_i(N,e.name),_i(y,e.name),_i(v,e.name);const w=new Fr({uid:I,auth:e,email:f,emailVerified:R,displayName:h,isAnonymous:O,photoURL:S,phoneNumber:m,tenantId:b,stsTokenManager:x,createdAt:y,lastLoginAt:v});return M&&Array.isArray(M)&&(w.providerData=M.map(E=>Object.assign({},E))),N&&(w._redirectEventId=N),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new Lo;i.updateFromServerResponse(n);const s=new Fr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?V2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Lo;a.updateFromIdToken(r);const l=new Fr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ng(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=new Map;function Ur(t){ei(t instanceof Function,"Expected a class definition");let e=Bw.get(t);return e?(ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}M2.type="NONE";const Hw=M2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t,e,n){return`firebase:${t}:${e}:${n}`}class Oo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Nu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oo(Ur(Hw),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ur(Hw);const o=Nu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=Fr._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Oo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Oo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(U2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(j2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H2(e))return"Blackberry";if(q2(e))return"Webos";if($2(e))return"Safari";if((e.includes("chrome/")||F2(e))&&!e.includes("edge/"))return"Chrome";if(B2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function j2(t=Ht()){return/firefox\//i.test(t)}function $2(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function F2(t=Ht()){return/crios\//i.test(t)}function U2(t=Ht()){return/iemobile/i.test(t)}function B2(t=Ht()){return/android/i.test(t)}function H2(t=Ht()){return/blackberry/i.test(t)}function q2(t=Ht()){return/webos/i.test(t)}function Gm(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Vz(t=Ht()){var e;return Gm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Mz(){return XO()&&document.documentMode===10}function W2(t=Ht()){return Gm(t)||B2(t)||q2(t)||H2(t)||/windows phone/i.test(t)||U2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t,e=[]){let n;switch(t){case"Browser":n=qw(Ht());break;case"Worker":n=`${qw(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${la}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $z(t,e={}){return si(t,"GET","/v2/passwordPolicy",ii(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=6;class Uz{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Fz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ww(this),this.idTokenSubscription=new Ww(this),this.beforeStateQueue=new jz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await z2(this,{idToken:e}),r=await Fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ez()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(qr(this));const n=e?qt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $z(this),n=new Uz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=K2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vz(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oi(t){return qt(t)}class Ww{constructor(e){this.auth=e,this.observer=null,this.addObserver=i3(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hz(t){dh=t}function G2(t){return dh.loadJS(t)}function qz(){return dh.recaptchaEnterpriseScript}function Wz(){return dh.gapiScript}function Kz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Gz="recaptcha-enterprise",Qz="NO_RECAPTCHA";class Yz{constructor(e){this.type=Gz,this.auth=oi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{kz(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Cz(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Fw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Qz)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Fw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=qz();l.length!==0&&(l+=a),G2(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Kw(t,e,n,r=!1){const i=new Yz(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Sd(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Kw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Kw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t,e){const n=Us(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Fl(s,e??{}))return i;jn(i,"already-initialized")}return n.initialize({options:e})}function Jz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Zz(t,e,n){const r=oi(t);he(r._canInitEmulator,r,"emulator-config-failed"),he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Q2(e),{host:o,port:a}=eV(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),tV()}function Q2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eV(t){const e=Q2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Gw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Gw(o)}}}function Gw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function nV(t,e){return si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(t,e){return cc(t,"POST","/v1/accounts:signInWithPassword",ii(t,e))}async function iV(t,e){return si(t,"POST","/v1/accounts:sendOobCode",ii(t,e))}async function sV(t,e){return iV(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(t,e){return cc(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}async function aV(t,e){return cc(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Qm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Hl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sd(e,n,"signInWithPassword",rV);case"emailLink":return oV(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sd(e,r,"signUpPassword",nV);case"emailLink":return aV(e,{idToken:n,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e){return cc(t,"POST","/v1/accounts:signInWithIdp",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="http://localhost";class Ps extends Qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Bm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ps(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zo(e,n)}buildRequest(){const e={requestUri:lV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ac(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uV(t){const e=Ka(Ga(t)).link,n=e?Ka(Ga(e)).deep_link_id:null,r=Ka(Ga(t)).deep_link_id;return(r?Ka(Ga(r)).link:null)||r||n||e||t}class Ym{constructor(e){var n,r,i,s,o,a;const l=Ka(Ga(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=cV((i=l.mode)!==null&&i!==void 0?i:null);he(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=uV(e);try{return new Ym(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,n){return Hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ym.parseLink(n);return he(r,"argument-error"),Hl._fromEmailAndCode(e,r.code,r.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Xm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends uc{constructor(){super("facebook.com")}static credential(e){return Ps._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ps._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zr.credential(n,r)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends uc{constructor(){super("github.com")}static credential(e){return Ps._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends uc{constructor(){super("twitter.com")}static credential(e,n){return Ps._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e){return cc(t,"POST","/v1/accounts:signUp",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Fr._fromIdTokenResponse(e,r,i),o=Qw(r);return new Ds({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Qw(r);return new Ds({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Qw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends cr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Td(e,n,r,i)}}function Y2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Td._fromErrorAndOperation(t,s,e,r):s})}async function hV(t,e,n=!1){const r=await Bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ds._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fV(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(qr(r));const i="reauthenticate";try{const s=await Bl(t,Y2(r,i,e,t),n);he(s.idToken,r,"internal-error");const o=Km(s.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(t.uid===a,r,"user-mismatch"),Ds._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e,n=!1){if(Zn(t.app))return Promise.reject(qr(t));const r="signIn",i=await Y2(t,r,e),s=await Ds._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function pV(t,e){return X2(oi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t){const e=oi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gV(t,e,n){const r=oi(t);await Sd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",sV)}async function mV(t,e,n){if(Zn(t.app))return Promise.reject(qr(t));const r=oi(t),o=await Sd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&J2(t),l}),a=await Ds._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function yV(t,e,n){return Zn(t.app)?Promise.reject(qr(t)):pV(qt(t),ca.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&J2(t),r})}function vV(t,e,n,r){return qt(t).onIdTokenChanged(e,n,r)}function wV(t,e,n){return qt(t).beforeAuthStateChanged(e,n)}function _V(t){return qt(t).signOut()}const Id="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Id,"1"),this.storage.removeItem(Id),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=1e3,EV=10;class eS extends Z2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Mz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,EV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eS.type="LOCAL";const bV=eS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS extends Z2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tS.type="SESSION";const nS=tS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new hh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await SV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Jm("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function IV(t){wr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function CV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AV(){return rS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="firebaseLocalStorageDb",RV=1,Cd="firebaseLocalStorage",sS="fbase_key";class dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fh(t,e){return t.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function NV(){const t=indexedDB.deleteDatabase(iS);return new dc(t).toPromise()}function rg(){const t=indexedDB.open(iS,RV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cd,{keyPath:sS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await NV(),e(await rg()))})})}async function Yw(t,e,n){const r=fh(t,!0).put({[sS]:e,value:n});return new dc(r).toPromise()}async function PV(t,e){const n=fh(t,!1).get(e),r=await new dc(n).toPromise();return r===void 0?null:r.value}function Xw(t,e){const n=fh(t,!0).delete(e);return new dc(n).toPromise()}const DV=800,LV=3;class oS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>LV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hh._getInstance(AV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CV(),!this.activeServiceWorker)return;this.sender=new TV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await Yw(e,Id,"1"),await Xw(e,Id),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>PV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=fh(i,!1).getAll();return new dc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oS.type="LOCAL";const OV=oS;new lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t,e){return e?Ur(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends Qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zV(t){return X2(t.auth,new Zm(t),t.bypassAuthState)}function VV(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),fV(n,new Zm(t),t.bypassAuthState)}async function MV(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),hV(n,new Zm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zV;case"linkViaPopup":case"linkViaRedirect":return MV;case"reauthViaPopup":case"reauthViaRedirect":return VV;default:jn(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=new lc(2e3,1e4);async function $V(t,e,n){if(Zn(t.app))return Promise.reject(ir(t,"operation-not-supported-in-this-environment"));const r=oi(t);wz(t,e,Xm);const i=aS(r,n);return new ys(r,"signInViaPopup",e,i).executeNotNull()}class ys extends lS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ys.currentPopupAction&&ys.currentPopupAction.cancel(),ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ei(this.filter.length===1,"Popup operations only handle one event");const e=Jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jV.get())};e()}}ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="pendingRedirect",Pu=new Map;class UV extends lS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pu.get(this.auth._key());if(!e){try{const r=await BV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pu.set(this.auth._key(),e)}return this.bypassAuthState||Pu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BV(t,e){const n=WV(e),r=qV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HV(t,e){Pu.set(t._key(),e)}function qV(t){return Ur(t._redirectPersistence)}function WV(t){return Nu(FV,t.config.apiKey,t.name)}async function KV(t,e,n=!1){if(Zn(t.app))return Promise.reject(qr(t));const r=oi(t),i=aS(r,e),o=await new UV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=10*60*1e3;class QV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ir(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jw(e))}saveEventToCache(e){this.cachedEventUids.add(Jw(e)),this.lastProcessedEventTime=Date.now()}}function Jw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,e={}){return si(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZV=/^https?/;async function eM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XV(t);for(const n of e)try{if(tM(n))return}catch{}jn(t,"unauthorized-domain")}function tM(t){const e=tg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZV.test(n))return!1;if(JV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=new lc(3e4,6e4);function Zw(){const t=wr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rM(t){return new Promise((e,n)=>{var r,i,s;function o(){Zw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zw(),n(ir(t,"network-request-failed"))},timeout:nM.get()})}if(!((i=(r=wr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=wr().gapi)===null||s===void 0)&&s.load)o();else{const a=Kz("iframefcb");return wr()[a]=()=>{gapi.load?o():n(ir(t,"network-request-failed"))},G2(`${Wz()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Du=null,e})}let Du=null;function iM(t){return Du=Du||rM(t),Du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new lc(5e3,15e3),oM="__/auth/iframe",aM="emulator/auth/iframe",lM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uM(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wm(e,aM):`https://${t.config.authDomain}/${oM}`,r={apiKey:e.apiKey,appName:t.name,v:la},i=cM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ac(r).slice(1)}`}async function dM(t){const e=await iM(t),n=wr().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:uM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ir(t,"network-request-failed"),a=wr().setTimeout(()=>{s(o)},sM.get());function l(){wr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fM=500,pM=600,gM="_blank",mM="http://localhost";class e_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yM(t,e,n,r=fM,i=pM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hM),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ht().toLowerCase();n&&(a=F2(u)?gM:n),j2(u)&&(e=e||mM,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,S])=>`${f}${m}=${S},`,"");if(Vz(u)&&a!=="_self")return vM(e||"",a),new e_(null);const h=window.open(e||"",a,d);he(h,t,"popup-blocked");try{h.focus()}catch{}return new e_(h)}function vM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="__/auth/handler",_M="emulator/auth/handler",xM=encodeURIComponent("fac");async function t_(t,e,n,r,i,s){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:la,eventId:i};if(e instanceof Xm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",r3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof uc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${xM}=${encodeURIComponent(l)}`:"";return`${EM(t)}?${ac(a).slice(1)}${u}`}function EM({config:t}){return t.emulator?Wm(t,_M):`https://${t.authDomain}/${wM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="webStorageSupport";class bM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nS,this._completeRedirectFn=KV,this._overrideRedirectResult=HV}async _openPopup(e,n,r,i){var s;ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await t_(e,n,r,tg(),i);return yM(e,o,Jm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await t_(e,n,r,tg(),i);return IV(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ei(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dM(e),r=new QV(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Af,{type:Af},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Af];o!==void 0&&n(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W2()||$2()||Gm()}}const SM=bM;var n_="@firebase/auth",r_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CM(t){br(new or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K2(t)},u=new Bz(r,i,s,l);return Jz(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),br(new or("auth-internal",e=>{const n=oi(e.getProvider("auth").getImmediate());return(r=>new TM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(n_,r_,IM(t)),zn(n_,r_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=5*60,AM=x2("authIdTokenMaxAge")||kM;let i_=null;const RM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AM)return;const i=n==null?void 0:n.token;i_!==i&&(i_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function NM(t=Um()){const e=Us(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Xz(t,{popupRedirectResolver:SM,persistence:[OV,bV,nS]}),r=x2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=RM(s.toString());wV(n,o,()=>o(n.currentUser)),vV(n,a=>o(a))}}const i=w2("auth");return i&&Zz(n,`http://${i}`),n}function PM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Hz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ir("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",PM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CM("Browser");var DM="firebase",LM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(DM,LM,"app");var s_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ss,uS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function w(){}w.prototype=x.prototype,C.D=x.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(E,k,A){for(var T=Array(arguments.length-2),P=2;P<arguments.length;P++)T[P-2]=arguments[P];return x.prototype[k].apply(E,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,x,w){w||(w=0);var E=Array(16);if(typeof x=="string")for(var k=0;16>k;++k)E[k]=x.charCodeAt(w++)|x.charCodeAt(w++)<<8|x.charCodeAt(w++)<<16|x.charCodeAt(w++)<<24;else for(k=0;16>k;++k)E[k]=x[w++]|x[w++]<<8|x[w++]<<16|x[w++]<<24;x=C.g[0],w=C.g[1],k=C.g[2];var A=C.g[3],T=x+(A^w&(k^A))+E[0]+3614090360&4294967295;x=w+(T<<7&4294967295|T>>>25),T=A+(k^x&(w^k))+E[1]+3905402710&4294967295,A=x+(T<<12&4294967295|T>>>20),T=k+(w^A&(x^w))+E[2]+606105819&4294967295,k=A+(T<<17&4294967295|T>>>15),T=w+(x^k&(A^x))+E[3]+3250441966&4294967295,w=k+(T<<22&4294967295|T>>>10),T=x+(A^w&(k^A))+E[4]+4118548399&4294967295,x=w+(T<<7&4294967295|T>>>25),T=A+(k^x&(w^k))+E[5]+1200080426&4294967295,A=x+(T<<12&4294967295|T>>>20),T=k+(w^A&(x^w))+E[6]+2821735955&4294967295,k=A+(T<<17&4294967295|T>>>15),T=w+(x^k&(A^x))+E[7]+4249261313&4294967295,w=k+(T<<22&4294967295|T>>>10),T=x+(A^w&(k^A))+E[8]+1770035416&4294967295,x=w+(T<<7&4294967295|T>>>25),T=A+(k^x&(w^k))+E[9]+2336552879&4294967295,A=x+(T<<12&4294967295|T>>>20),T=k+(w^A&(x^w))+E[10]+4294925233&4294967295,k=A+(T<<17&4294967295|T>>>15),T=w+(x^k&(A^x))+E[11]+2304563134&4294967295,w=k+(T<<22&4294967295|T>>>10),T=x+(A^w&(k^A))+E[12]+1804603682&4294967295,x=w+(T<<7&4294967295|T>>>25),T=A+(k^x&(w^k))+E[13]+4254626195&4294967295,A=x+(T<<12&4294967295|T>>>20),T=k+(w^A&(x^w))+E[14]+2792965006&4294967295,k=A+(T<<17&4294967295|T>>>15),T=w+(x^k&(A^x))+E[15]+1236535329&4294967295,w=k+(T<<22&4294967295|T>>>10),T=x+(k^A&(w^k))+E[1]+4129170786&4294967295,x=w+(T<<5&4294967295|T>>>27),T=A+(w^k&(x^w))+E[6]+3225465664&4294967295,A=x+(T<<9&4294967295|T>>>23),T=k+(x^w&(A^x))+E[11]+643717713&4294967295,k=A+(T<<14&4294967295|T>>>18),T=w+(A^x&(k^A))+E[0]+3921069994&4294967295,w=k+(T<<20&4294967295|T>>>12),T=x+(k^A&(w^k))+E[5]+3593408605&4294967295,x=w+(T<<5&4294967295|T>>>27),T=A+(w^k&(x^w))+E[10]+38016083&4294967295,A=x+(T<<9&4294967295|T>>>23),T=k+(x^w&(A^x))+E[15]+3634488961&4294967295,k=A+(T<<14&4294967295|T>>>18),T=w+(A^x&(k^A))+E[4]+3889429448&4294967295,w=k+(T<<20&4294967295|T>>>12),T=x+(k^A&(w^k))+E[9]+568446438&4294967295,x=w+(T<<5&4294967295|T>>>27),T=A+(w^k&(x^w))+E[14]+3275163606&4294967295,A=x+(T<<9&4294967295|T>>>23),T=k+(x^w&(A^x))+E[3]+4107603335&4294967295,k=A+(T<<14&4294967295|T>>>18),T=w+(A^x&(k^A))+E[8]+1163531501&4294967295,w=k+(T<<20&4294967295|T>>>12),T=x+(k^A&(w^k))+E[13]+2850285829&4294967295,x=w+(T<<5&4294967295|T>>>27),T=A+(w^k&(x^w))+E[2]+4243563512&4294967295,A=x+(T<<9&4294967295|T>>>23),T=k+(x^w&(A^x))+E[7]+1735328473&4294967295,k=A+(T<<14&4294967295|T>>>18),T=w+(A^x&(k^A))+E[12]+2368359562&4294967295,w=k+(T<<20&4294967295|T>>>12),T=x+(w^k^A)+E[5]+4294588738&4294967295,x=w+(T<<4&4294967295|T>>>28),T=A+(x^w^k)+E[8]+2272392833&4294967295,A=x+(T<<11&4294967295|T>>>21),T=k+(A^x^w)+E[11]+1839030562&4294967295,k=A+(T<<16&4294967295|T>>>16),T=w+(k^A^x)+E[14]+4259657740&4294967295,w=k+(T<<23&4294967295|T>>>9),T=x+(w^k^A)+E[1]+2763975236&4294967295,x=w+(T<<4&4294967295|T>>>28),T=A+(x^w^k)+E[4]+1272893353&4294967295,A=x+(T<<11&4294967295|T>>>21),T=k+(A^x^w)+E[7]+4139469664&4294967295,k=A+(T<<16&4294967295|T>>>16),T=w+(k^A^x)+E[10]+3200236656&4294967295,w=k+(T<<23&4294967295|T>>>9),T=x+(w^k^A)+E[13]+681279174&4294967295,x=w+(T<<4&4294967295|T>>>28),T=A+(x^w^k)+E[0]+3936430074&4294967295,A=x+(T<<11&4294967295|T>>>21),T=k+(A^x^w)+E[3]+3572445317&4294967295,k=A+(T<<16&4294967295|T>>>16),T=w+(k^A^x)+E[6]+76029189&4294967295,w=k+(T<<23&4294967295|T>>>9),T=x+(w^k^A)+E[9]+3654602809&4294967295,x=w+(T<<4&4294967295|T>>>28),T=A+(x^w^k)+E[12]+3873151461&4294967295,A=x+(T<<11&4294967295|T>>>21),T=k+(A^x^w)+E[15]+530742520&4294967295,k=A+(T<<16&4294967295|T>>>16),T=w+(k^A^x)+E[2]+3299628645&4294967295,w=k+(T<<23&4294967295|T>>>9),T=x+(k^(w|~A))+E[0]+4096336452&4294967295,x=w+(T<<6&4294967295|T>>>26),T=A+(w^(x|~k))+E[7]+1126891415&4294967295,A=x+(T<<10&4294967295|T>>>22),T=k+(x^(A|~w))+E[14]+2878612391&4294967295,k=A+(T<<15&4294967295|T>>>17),T=w+(A^(k|~x))+E[5]+4237533241&4294967295,w=k+(T<<21&4294967295|T>>>11),T=x+(k^(w|~A))+E[12]+1700485571&4294967295,x=w+(T<<6&4294967295|T>>>26),T=A+(w^(x|~k))+E[3]+2399980690&4294967295,A=x+(T<<10&4294967295|T>>>22),T=k+(x^(A|~w))+E[10]+4293915773&4294967295,k=A+(T<<15&4294967295|T>>>17),T=w+(A^(k|~x))+E[1]+2240044497&4294967295,w=k+(T<<21&4294967295|T>>>11),T=x+(k^(w|~A))+E[8]+1873313359&4294967295,x=w+(T<<6&4294967295|T>>>26),T=A+(w^(x|~k))+E[15]+4264355552&4294967295,A=x+(T<<10&4294967295|T>>>22),T=k+(x^(A|~w))+E[6]+2734768916&4294967295,k=A+(T<<15&4294967295|T>>>17),T=w+(A^(k|~x))+E[13]+1309151649&4294967295,w=k+(T<<21&4294967295|T>>>11),T=x+(k^(w|~A))+E[4]+4149444226&4294967295,x=w+(T<<6&4294967295|T>>>26),T=A+(w^(x|~k))+E[11]+3174756917&4294967295,A=x+(T<<10&4294967295|T>>>22),T=k+(x^(A|~w))+E[2]+718787259&4294967295,k=A+(T<<15&4294967295|T>>>17),T=w+(A^(k|~x))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(k+(T<<21&4294967295|T>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var w=x-this.blockSize,E=this.B,k=this.h,A=0;A<x;){if(k==0)for(;A<=w;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<x;)if(E[k++]=C.charCodeAt(A++),k==this.blockSize){i(this,E),k=0;break}}else for(;A<x;)if(E[k++]=C[A++],k==this.blockSize){i(this,E),k=0;break}}this.h=k,this.o+=x},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var w=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=w&255,w/=256;for(this.u(C),C=Array(16),x=w=0;4>x;++x)for(var E=0;32>E;E+=8)C[w++]=this.g[x]>>>E&255;return C};function s(C,x){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=x(C)}function o(C,x){this.h=x;for(var w=[],E=!0,k=C.length-1;0<=k;k--){var A=C[k]|0;E&&A==x||(w[k]=A,E=!1)}this.g=w}var a={};function l(C){return-128<=C&&128>C?s(C,function(x){return new o([x|0],0>x?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return N(u(-C));for(var x=[],w=1,E=0;C>=w;E++)x[E]=C/w|0,w*=4294967296;return new o(x,0)}function d(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return N(d(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(x,8)),E=h,k=0;k<C.length;k+=8){var A=Math.min(8,C.length-k),T=parseInt(C.substring(k,k+A),x);8>A?(A=u(Math.pow(x,A)),E=E.j(A).add(u(T))):(E=E.j(w),E=E.add(u(T)))}return E}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-N(this).m();for(var C=0,x=1,w=0;w<this.g.length;w++){var E=this.i(w);C+=(0<=E?E:4294967296+E)*x,x*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(b(this))return"-"+N(this).toString(C);for(var x=u(Math.pow(C,6)),w=this,E="";;){var k=R(w,x).g;w=y(w,k.j(x));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=k,S(w))return A+E;for(;6>A.length;)A="0"+A;E=A+E}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function b(C){return C.h==-1}t.l=function(C){return C=y(this,C),b(C)?-1:S(C)?0:1};function N(C){for(var x=C.g.length,w=[],E=0;E<x;E++)w[E]=~C.g[E];return new o(w,~C.h).add(f)}t.abs=function(){return b(this)?N(this):this},t.add=function(C){for(var x=Math.max(this.g.length,C.g.length),w=[],E=0,k=0;k<=x;k++){var A=E+(this.i(k)&65535)+(C.i(k)&65535),T=(A>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);E=T>>>16,A&=65535,T&=65535,w[k]=T<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function y(C,x){return C.add(N(x))}t.j=function(C){if(S(this)||S(C))return h;if(b(this))return b(C)?N(this).j(N(C)):N(N(this).j(C));if(b(C))return N(this.j(N(C)));if(0>this.l(m)&&0>C.l(m))return u(this.m()*C.m());for(var x=this.g.length+C.g.length,w=[],E=0;E<2*x;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var k=0;k<C.g.length;k++){var A=this.i(E)>>>16,T=this.i(E)&65535,P=C.i(k)>>>16,j=C.i(k)&65535;w[2*E+2*k]+=T*j,v(w,2*E+2*k),w[2*E+2*k+1]+=A*j,v(w,2*E+2*k+1),w[2*E+2*k+1]+=T*P,v(w,2*E+2*k+1),w[2*E+2*k+2]+=A*P,v(w,2*E+2*k+2)}for(E=0;E<x;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=x;E<2*x;E++)w[E]=0;return new o(w,0)};function v(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function I(C,x){this.g=C,this.h=x}function R(C,x){if(S(x))throw Error("division by zero");if(S(C))return new I(h,h);if(b(C))return x=R(N(C),x),new I(N(x.g),N(x.h));if(b(x))return x=R(C,N(x)),new I(N(x.g),x.h);if(30<C.g.length){if(b(C)||b(x))throw Error("slowDivide_ only works with positive integers.");for(var w=f,E=x;0>=E.l(C);)w=O(w),E=O(E);var k=M(w,1),A=M(E,1);for(E=M(E,2),w=M(w,2);!S(E);){var T=A.add(E);0>=T.l(C)&&(k=k.add(w),A=T),E=M(E,1),w=M(w,1)}return x=y(C,k.j(x)),new I(k,x)}for(k=h;0<=C.l(x);){for(w=Math.max(1,Math.floor(C.m()/x.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),A=u(w),T=A.j(x);b(T)||0<T.l(C);)w-=E,A=u(w),T=A.j(x);S(A)&&(A=f),k=k.add(A),C=y(C,T)}return new I(k,C)}t.A=function(C){return R(this,C).h},t.and=function(C){for(var x=Math.max(this.g.length,C.g.length),w=[],E=0;E<x;E++)w[E]=this.i(E)&C.i(E);return new o(w,this.h&C.h)},t.or=function(C){for(var x=Math.max(this.g.length,C.g.length),w=[],E=0;E<x;E++)w[E]=this.i(E)|C.i(E);return new o(w,this.h|C.h)},t.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),w=[],E=0;E<x;E++)w[E]=this.i(E)^C.i(E);return new o(w,this.h^C.h)};function O(C){for(var x=C.g.length+1,w=[],E=0;E<x;E++)w[E]=C.i(E)<<1|C.i(E-1)>>>31;return new o(w,C.h)}function M(C,x){var w=x>>5;x%=32;for(var E=C.g.length-w,k=[],A=0;A<E;A++)k[A]=0<x?C.i(A+w)>>>x|C.i(A+w+1)<<32-x:C.i(A+w);return new o(k,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ss=o}).apply(typeof s_<"u"?s_:typeof self<"u"?self:typeof window<"u"?window:{});var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dS,Qa,hS,Lu,ig,fS,pS,gS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof cu=="object"&&cu];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var _=r;c=c.split(".");for(var D=0;D<c.length-1;D++){var H=c[D];if(!(H in _))break e;_=_[H]}c=c[c.length-1],D=_[c],p=p(D),p!=D&&p!=null&&e(_,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var _=0,D=!1,H={next:function(){if(!D&&_<c.length){var K=_++;return{value:p(K,c[K]),done:!1}}return D=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(c){return c||function(){return s(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function d(c,p,_){return c.call.apply(c.bind,arguments)}function h(c,p,_){if(!c)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,D),c.apply(p,H)}}return function(){return c.apply(p,arguments)}}function f(c,p,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var D=_.slice();return D.push.apply(D,arguments),c.apply(this,D)}}function S(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(D,H,K){for(var ee=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ee[Ve-2]=arguments[Ve];return p.prototype[H].apply(D,ee)}}function b(c){const p=c.length;if(0<p){const _=Array(p);for(let D=0;D<p;D++)_[D]=c[D];return _}return[]}function N(c,p){for(let _=1;_<arguments.length;_++){const D=arguments[_];if(l(D)){const H=c.length||0,K=D.length||0;c.length=H+K;for(let ee=0;ee<K;ee++)c[H+ee]=D[ee]}else c.push(D)}}class y{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(c){return/^[\s\xa0]*$/.test(c)}function I(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var O=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function M(c,p,_){for(const D in c)p.call(_,c[D],D,c)}function C(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function x(c){const p={};for(const _ in c)p[_]=c[_];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,p){let _,D;for(let H=1;H<arguments.length;H++){D=arguments[H];for(_ in D)c[_]=D[_];for(let K=0;K<w.length;K++)_=w[K],Object.prototype.hasOwnProperty.call(D,_)&&(c[_]=D[_])}}function k(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function A(c){a.setTimeout(()=>{throw c},0)}function T(){var c=V;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class P{constructor(){this.h=this.g=null}add(p,_){const D=j.get();D.set(p,_),this.h?this.h.next=D:this.g=D,this.h=D}}var j=new y(()=>new z,c=>c.reset());class z{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let B,$=!1,V=new P,U=()=>{const c=a.Promise.resolve(void 0);B=()=>{c.then(q)}};var q=()=>{for(var c;c=T();){try{c.h.call(c.g)}catch(_){A(_)}var p=j;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}$=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return c}();function Z(c,p){if(G.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,D=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(O){e:{try{R(p.nodeName);var H=!0;break e}catch{}H=!1}H||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ie[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Z.aa.h.call(this)}}S(Z,G);var ie={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),ae=0;function ge(c,p,_,D,H){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!D,this.ha=H,this.key=++ae,this.da=this.fa=!1}function pe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ie(c){this.src=c,this.g={},this.h=0}Ie.prototype.add=function(c,p,_,D,H){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ee=qe(c,p,D,H);return-1<ee?(p=c[ee],_||(p.fa=!1)):(p=new ge(p,this.src,K,!!D,H),p.fa=_,c.push(p)),p};function Oe(c,p){var _=p.type;if(_ in c.g){var D=c.g[_],H=Array.prototype.indexOf.call(D,p,void 0),K;(K=0<=H)&&Array.prototype.splice.call(D,H,1),K&&(pe(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function qe(c,p,_,D){for(var H=0;H<c.length;++H){var K=c[H];if(!K.da&&K.listener==p&&K.capture==!!_&&K.ha==D)return H}return-1}var $e="closure_lm_"+(1e6*Math.random()|0),Ne={};function nt(c,p,_,D,H){if(Array.isArray(p)){for(var K=0;K<p.length;K++)nt(c,p[K],_,D,H);return null}return _=We(_),c&&c[ce]?c.K(p,_,u(D)?!!D.capture:!1,H):me(c,p,_,!1,D,H)}function me(c,p,_,D,H,K){if(!p)throw Error("Invalid event type");var ee=u(H)?!!H.capture:!!H,Ve=Wt(c);if(Ve||(c[$e]=Ve=new Ie(c)),_=Ve.add(p,_,D,ee,K),_.proxy)return _;if(D=te(),_.proxy=D,D.src=c,D.listener=_,c.addEventListener)Y||(H=ee),H===void 0&&(H=!1),c.addEventListener(p.toString(),D,H);else if(c.attachEvent)c.attachEvent(un(p.toString()),D);else if(c.addListener&&c.removeListener)c.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return _}function te(){function c(_){return p.call(c.src,c.listener,_)}const p=In;return c}function Ee(c,p,_,D,H){if(Array.isArray(p))for(var K=0;K<p.length;K++)Ee(c,p[K],_,D,H);else D=u(D)?!!D.capture:!!D,_=We(_),c&&c[ce]?(c=c.i,p=String(p).toString(),p in c.g&&(K=c.g[p],_=qe(K,_,D,H),-1<_&&(pe(K[_]),Array.prototype.splice.call(K,_,1),K.length==0&&(delete c.g[p],c.h--)))):c&&(c=Wt(c))&&(p=c.g[p.toString()],c=-1,p&&(c=qe(p,_,D,H)),(_=-1<c?p[c]:null)&&ut(_))}function ut(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[ce])Oe(p.i,c);else{var _=c.type,D=c.proxy;p.removeEventListener?p.removeEventListener(_,D,c.capture):p.detachEvent?p.detachEvent(un(_),D):p.addListener&&p.removeListener&&p.removeListener(D),(_=Wt(p))?(Oe(_,c),_.h==0&&(_.src=null,p[$e]=null)):pe(c)}}}function un(c){return c in Ne?Ne[c]:Ne[c]="on"+c}function In(c,p){if(c.da)c=!0;else{p=new Z(p,this);var _=c.listener,D=c.ha||c.src;c.fa&&ut(c),c=_.call(D,p)}return c}function Wt(c){return c=c[$e],c instanceof Ie?c:null}var Pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function We(c){return typeof c=="function"?c:(c[Pt]||(c[Pt]=function(p){return c.handleEvent(p)}),c[Pt])}function ke(){F.call(this),this.i=new Ie(this),this.M=this,this.F=null}S(ke,F),ke.prototype[ce]=!0,ke.prototype.removeEventListener=function(c,p,_,D){Ee(this,c,p,_,D)};function Pe(c,p){var _,D=c.F;if(D)for(_=[];D;D=D.F)_.push(D);if(c=c.M,D=p.type||p,typeof p=="string")p=new G(p,c);else if(p instanceof G)p.target=p.target||c;else{var H=p;p=new G(D,c),E(p,H)}if(H=!0,_)for(var K=_.length-1;0<=K;K--){var ee=p.g=_[K];H=ze(ee,D,!0,p)&&H}if(ee=p.g=c,H=ze(ee,D,!0,p)&&H,H=ze(ee,D,!1,p)&&H,_)for(K=0;K<_.length;K++)ee=p.g=_[K],H=ze(ee,D,!1,p)&&H}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],D=0;D<_.length;D++)pe(_[D]);delete c.g[p],c.h--}}this.F=null},ke.prototype.K=function(c,p,_,D){return this.i.add(String(c),p,!1,_,D)},ke.prototype.L=function(c,p,_,D){return this.i.add(String(c),p,!0,_,D)};function ze(c,p,_,D){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var H=!0,K=0;K<p.length;++K){var ee=p[K];if(ee&&!ee.da&&ee.capture==_){var Ve=ee.listener,bt=ee.ha||ee.src;ee.fa&&Oe(c.i,ee),H=Ve.call(bt,D)!==!1&&H}}return H&&!D.defaultPrevented}function Dt(c,p,_){if(typeof c=="function")_&&(c=f(c,_));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function ur(c){c.g=Dt(()=>{c.g=null,c.i&&(c.i=!1,ur(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class st extends F{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ur(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dt(c){F.call(this),this.h=c,this.g={}}S(dt,F);var Cn=[];function kn(c){M(c.g,function(p,_){this.g.hasOwnProperty(_)&&ut(p)},c),c.g={}}dt.prototype.N=function(){dt.aa.N.call(this),kn(this)},dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dn=a.JSON.stringify,hn=a.JSON.parse,Xt=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function $n(){}$n.prototype.h=null;function ai(c){return c.h||(c.h=c.i())}function Fn(){}var Un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function li(){G.call(this,"d")}S(li,G);function fn(){G.call(this,"c")}S(fn,G);var Bn={},Hn=null;function ci(){return Hn=Hn||new ke}Bn.La="serverreachability";function qs(c){G.call(this,Bn.La,c)}S(qs,G);function Cr(c){const p=ci();Pe(p,new qs(p))}Bn.STAT_EVENT="statevent";function Ws(c,p){G.call(this,Bn.STAT_EVENT,c),this.stat=p}S(Ws,G);function ht(c){const p=ci();Pe(p,new Ws(p,c))}Bn.Ma="timingevent";function Ks(c,p){G.call(this,Bn.Ma,c),this.size=p}S(Ks,G);function kr(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function Ar(){this.g=!0}Ar.prototype.xa=function(){this.g=!1};function ga(c,p,_,D,H,K){c.info(function(){if(c.g)if(K)for(var ee="",Ve=K.split("&"),bt=0;bt<Ve.length;bt++){var Ae=Ve[bt].split("=");if(1<Ae.length){var Ot=Ae[0];Ae=Ae[1];var zt=Ot.split("_");ee=2<=zt.length&&zt[1]=="type"?ee+(Ot+"="+Ae+"&"):ee+(Ot+"=redacted&")}}else ee=null;else ee=K;return"XMLHTTP REQ ("+D+") [attempt "+H+"]: "+p+`
`+_+`
`+ee})}function ma(c,p,_,D,H,K,ee){c.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+H+"]: "+p+`
`+_+`
`+K+" "+ee})}function qn(c,p,_,D){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+va(c,_)+(D?" "+D:"")})}function ya(c,p){c.info(function(){return"TIMEOUT: "+p})}Ar.prototype.info=function(){};function va(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var D=_[c];if(!(2>D.length)){var H=D[1];if(Array.isArray(H)&&!(1>H.length)){var K=H[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ee=1;ee<H.length;ee++)H[ee]=""}}}}return dn(_)}catch{return p}}var dr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ui={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},is;function di(){}S(di,$n),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},is=new di;function Jt(c,p,_,D){this.j=c,this.i=p,this.l=_,this.R=D||1,this.U=new dt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gs}function Gs(){this.i=null,this.g="",this.h=!1}var ss={},hi={};function fi(c,p,_){c.L=1,c.v=Sc(Rr(p)),c.m=_,c.P=!0,we(c,null)}function we(c,p){c.F=Date.now(),Je(c),c.A=Rr(c.v);var _=c.A,D=c.R;Array.isArray(D)||(D=[String(D)]),Q0(_.i,"t",D),c.C=0,_=c.j.J,c.h=new Gs,c.g=fy(c.j,_?p:null,!c.m),0<c.O&&(c.M=new st(f(c.Y,c,c.g),c.O)),p=c.U,_=c.g,D=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(Cn[0]=H.toString()),H=Cn);for(var K=0;K<H.length;K++){var ee=nt(_,H[K],D||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Cr(),ga(c.i,c.u,c.A,c.l,c.R,c.m)}Jt.prototype.ca=function(c){c=c.target;const p=this.M;p&&Nr(c)==3?p.j():this.Y(c)},Jt.prototype.Y=function(c){try{if(c==this.g)e:{const zt=Nr(this.g);var p=this.g.Ba();const Js=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||ny(this.g)))){this.J||zt!=4||p==7||(p==8||0>=Js?Cr(3):Cr(2)),pi(this);var _=this.g.Z();this.X=_;t:if(ue(this)){var D=ny(this.g);c="";var H=D.length,K=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),hr(this);var ee="";break t}this.h.i=new a.TextDecoder}for(p=0;p<H;p++)this.h.h=!0,c+=this.h.i.decode(D[p],{stream:!(K&&p==H-1)});D.length=0,this.h.g+=c,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=_==200,ma(this.i,this.u,this.A,this.l,this.R,zt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,bt=this.g;if((Ve=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ve)){var Ae=Ve;break t}}Ae=null}if(_=Ae)qn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gi(this,_);else{this.o=!1,this.s=3,ht(12),An(this),hr(this);break e}}if(this.P){_=!0;let Wn;for(;!this.J&&this.C<ee.length;)if(Wn=ft(this,ee),Wn==hi){zt==4&&(this.s=4,ht(14),_=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==ss){this.s=4,ht(15),qn(this.i,this.l,ee,"[Invalid Chunk]"),_=!1;break}else qn(this.i,this.l,Wn,null),gi(this,Wn);if(ue(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||ee.length!=0||this.h.h||(this.s=1,ht(16),_=!1),this.o=this.o&&_,!_)qn(this.i,this.l,ee,"[Invalid Chunked Response]"),An(this),hr(this);else if(0<ee.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Dh(Ot),Ot.M=!0,ht(11))}}else qn(this.i,this.l,ee,null),gi(this,ee);zt==4&&An(this),this.o&&!this.J&&(zt==4?cy(this.j,this):(this.o=!1,Je(this)))}else vI(this.g),_==400&&0<ee.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),An(this),hr(this)}}}catch{}finally{}};function ue(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ft(c,p){var _=c.C,D=p.indexOf(`
`,_);return D==-1?hi:(_=Number(p.substring(_,D)),isNaN(_)?ss:(D+=1,D+_>p.length?hi:(p=p.slice(D,D+_),c.C=D+_,p)))}Jt.prototype.cancel=function(){this.J=!0,An(this)};function Je(c){c.S=Date.now()+c.I,Lt(c,c.I)}function Lt(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=kr(f(c.ba,c),p)}function pi(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Jt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ya(this.i,this.A),this.L!=2&&(Cr(),ht(17)),An(this),this.s=2,hr(this)):Lt(this,this.S-c)};function hr(c){c.j.G==0||c.J||cy(c.j,c)}function An(c){pi(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,kn(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function gi(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||kh(_.h,c))){if(!c.K&&kh(_.h,c)&&_.G==3){try{var D=_.Da.g.parse(p)}catch{D=null}if(Array.isArray(D)&&D.length==3){var H=D;if(H[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Rc(_),kc(_);else break e;Ph(_),ht(18)}}else _.za=H[1],0<_.za-_.T&&37500>H[2]&&_.F&&_.v==0&&!_.C&&(_.C=kr(f(_.Za,_),6e3));if(1>=Qs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else as(_,11)}else if((c.K||_.g==c)&&Rc(_),!v(p))for(H=_.Da.g.parse(p),p=0;p<H.length;p++){let Ae=H[p];if(_.T=Ae[0],Ae=Ae[1],_.G==2)if(Ae[0]=="c"){_.K=Ae[1],_.ia=Ae[2];const Ot=Ae[3];Ot!=null&&(_.la=Ot,_.j.info("VER="+_.la));const zt=Ae[4];zt!=null&&(_.Aa=zt,_.j.info("SVER="+_.Aa));const Js=Ae[5];Js!=null&&typeof Js=="number"&&0<Js&&(D=1.5*Js,_.L=D,_.j.info("backChannelRequestTimeoutMs_="+D)),D=_;const Wn=c.g;if(Wn){const Pc=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pc){var K=D.h;K.g||Pc.indexOf("spdy")==-1&&Pc.indexOf("quic")==-1&&Pc.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ah(K,K.h),K.h=null))}if(D.D){const Lh=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lh&&(D.ya=Lh,Fe(D.I,D.D,Lh))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),D=_;var ee=c;if(D.qa=hy(D,D.J?D.ia:null,D.W),ee.K){F0(D.h,ee);var Ve=ee,bt=D.L;bt&&(Ve.I=bt),Ve.B&&(pi(Ve),Je(Ve)),D.g=ee}else ay(D);0<_.i.length&&Ac(_)}else Ae[0]!="stop"&&Ae[0]!="close"||as(_,7);else _.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?as(_,7):Nh(_):Ae[0]!="noop"&&_.l&&_.l.ta(Ae),_.v=0)}}Cr(4)}catch{}}var Ch=class{constructor(c,p){this.g=c,this.map=p}};function _c(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Qs(c){return c.h?1:c.g?c.g.size:0}function kh(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Ah(c,p){c.g?c.g.add(p):c.h=p}function F0(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}_c.prototype.cancel=function(){if(this.i=U0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function U0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return b(c.i)}function rI(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],_=c.length,D=0;D<_;D++)p.push(c[D]);return p}p=[],_=0;for(D in c)p[_++]=c[D];return p}function iI(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const D in c)p[_++]=D;return p}}}function B0(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=iI(c),D=rI(c),H=D.length,K=0;K<H;K++)p.call(void 0,D[K],_&&_[K],c)}var H0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sI(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var D=c[_].indexOf("="),H=null;if(0<=D){var K=c[_].substring(0,D);H=c[_].substring(D+1)}else K=c[_];p(K,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function os(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof os){this.h=c.h,Ec(this,c.j),this.o=c.o,this.g=c.g,bc(this,c.s),this.l=c.l;var p=c.i,_=new xa;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),q0(this,_),this.m=c.m}else c&&(p=String(c).match(H0))?(this.h=!1,Ec(this,p[1]||"",!0),this.o=wa(p[2]||""),this.g=wa(p[3]||"",!0),bc(this,p[4]),this.l=wa(p[5]||"",!0),q0(this,p[6]||"",!0),this.m=wa(p[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}os.prototype.toString=function(){var c=[],p=this.j;p&&c.push(_a(p,W0,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(_a(p,W0,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(_a(_,_.charAt(0)=="/"?lI:aI,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",_a(_,uI)),c.join("")};function Rr(c){return new os(c)}function Ec(c,p,_){c.j=_?wa(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function bc(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function q0(c,p,_){p instanceof xa?(c.i=p,dI(c.i,c.h)):(_||(p=_a(p,cI)),c.i=new xa(p,c.h))}function Fe(c,p,_){c.i.set(p,_)}function Sc(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function wa(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _a(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,oI),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function oI(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var W0=/[#\/\?@]/g,aI=/[#\?:]/g,lI=/[#\?]/g,cI=/[#\?@]/g,uI=/#/g;function xa(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function mi(c){c.g||(c.g=new Map,c.h=0,c.i&&sI(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=xa.prototype,t.add=function(c,p){mi(this),this.i=null,c=Ys(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function K0(c,p){mi(c),p=Ys(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function G0(c,p){return mi(c),p=Ys(c,p),c.g.has(p)}t.forEach=function(c,p){mi(this),this.g.forEach(function(_,D){_.forEach(function(H){c.call(p,H,D,this)},this)},this)},t.na=function(){mi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let D=0;D<p.length;D++){const H=c[D];for(let K=0;K<H.length;K++)_.push(p[D])}return _},t.V=function(c){mi(this);let p=[];if(typeof c=="string")G0(this,c)&&(p=p.concat(this.g.get(Ys(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},t.set=function(c,p){return mi(this),this.i=null,c=Ys(this,c),G0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Q0(c,p,_){K0(c,p),0<_.length&&(c.i=null,c.g.set(Ys(c,p),b(_)),c.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var D=p[_];const K=encodeURIComponent(String(D)),ee=this.V(D);for(D=0;D<ee.length;D++){var H=K;ee[D]!==""&&(H+="="+encodeURIComponent(String(ee[D]))),c.push(H)}}return this.i=c.join("&")};function Ys(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function dI(c,p){p&&!c.j&&(mi(c),c.i=null,c.g.forEach(function(_,D){var H=D.toLowerCase();D!=H&&(K0(this,D),Q0(this,H,_))},c)),c.j=p}function hI(c,p){const _=new Ar;if(a.Image){const D=new Image;D.onload=m(yi,_,"TestLoadImage: loaded",!0,p,D),D.onerror=m(yi,_,"TestLoadImage: error",!1,p,D),D.onabort=m(yi,_,"TestLoadImage: abort",!1,p,D),D.ontimeout=m(yi,_,"TestLoadImage: timeout",!1,p,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=c}else p(!1)}function fI(c,p){const _=new Ar,D=new AbortController,H=setTimeout(()=>{D.abort(),yi(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:D.signal}).then(K=>{clearTimeout(H),K.ok?yi(_,"TestPingServer: ok",!0,p):yi(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(H),yi(_,"TestPingServer: error",!1,p)})}function yi(c,p,_,D,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),D(_)}catch{}}function pI(){this.g=new Xt}function gI(c,p,_){const D=_||"";try{B0(c,function(H,K){let ee=H;u(H)&&(ee=dn(H)),p.push(D+K+"="+encodeURIComponent(ee))})}catch(H){throw p.push(D+"type="+encodeURIComponent("_badmap")),H}}function Tc(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Tc,$n),Tc.prototype.g=function(){return new Ic(this.l,this.j)},Tc.prototype.i=function(c){return function(){return c}}({});function Ic(c,p){ke.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ic,ke),t=Ic.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,ba(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ba(this)),this.g&&(this.readyState=3,ba(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Y0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Y0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ea(this):ba(this),this.readyState==3&&Y0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ea(this))},t.Qa=function(c){this.g&&(this.response=c,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ba(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function ba(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function X0(c){let p="";return M(c,function(_,D){p+=D,p+=":",p+=_,p+=`\r
`}),p}function Rh(c,p,_){e:{for(D in _){var D=!1;break e}D=!0}D||(_=X0(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Fe(c,p,_))}function Ze(c){ke.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ze,ke);var mI=/^https?$/i,yI=["POST","PUT"];t=Ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,_,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():is.g(),this.v=this.o?ai(this.o):ai(is),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(K){J0(this,K);return}if(c=_||"",_=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var H in D)_.set(H,D[H]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const K of D.keys())_.set(K,D.get(K));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yI,p,void 0))||D||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ee]of _)this.g.setRequestHeader(K,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ty(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){J0(this,K)}};function J0(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Z0(c),Cc(c)}function Z0(c){c.A||(c.A=!0,Pe(c,"complete"),Pe(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Pe(this,"complete"),Pe(this,"abort"),Cc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cc(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ey(this):this.bb())},t.bb=function(){ey(this)};function ey(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Nr(c)!=4||c.Z()!=2)){if(c.u&&Nr(c)==4)Dt(c.Ea,0,c);else if(Pe(c,"readystatechange"),Nr(c)==4){c.h=!1;try{const ee=c.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var D;if(D=ee===0){var H=String(c.D).match(H0)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),D=!mI.test(H?H.toLowerCase():"")}_=D}if(_)Pe(c,"complete"),Pe(c,"success");else{c.m=6;try{var K=2<Nr(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Z0(c)}}finally{Cc(c)}}}}function Cc(c,p){if(c.g){ty(c);const _=c.g,D=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Pe(c,"ready");try{_.onreadystatechange=D}catch{}}}function ty(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Nr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),hn(p)}};function ny(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function vI(c){const p={};c=(c.g&&2<=Nr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<c.length;D++){if(v(c[D]))continue;var _=k(c[D]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=p[H]||[];p[H]=K,K.push(_)}C(p,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function ry(c){this.Aa=0,this.i=[],this.j=new Ar,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sa("baseRetryDelayMs",5e3,c),this.cb=Sa("retryDelaySeedMs",1e4,c),this.Wa=Sa("forwardChannelMaxRetries",2,c),this.wa=Sa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new _c(c&&c.concurrentRequestLimit),this.Da=new pI,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ry.prototype,t.la=8,t.G=1,t.connect=function(c,p,_,D){ht(0),this.W=c,this.H=p||{},_&&D!==void 0&&(this.H.OSID=_,this.H.OAID=D),this.F=this.X,this.I=hy(this,null,this.W),Ac(this)};function Nh(c){if(iy(c),c.G==3){var p=c.U++,_=Rr(c.I);if(Fe(_,"SID",c.K),Fe(_,"RID",p),Fe(_,"TYPE","terminate"),Ta(c,_),p=new Jt(c,c.j,p),p.L=2,p.v=Sc(Rr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=p.v,_=!0),_||(p.g=fy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Je(p)}dy(c)}function kc(c){c.g&&(Dh(c),c.g.cancel(),c.g=null)}function iy(c){kc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Rc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ac(c){if(!xc(c.h)&&!c.s){c.s=!0;var p=c.Ga;B||U(),$||(B(),$=!0),V.add(p,c),c.B=0}}function wI(c,p){return Qs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=kr(f(c.Ga,c,p),uy(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new Jt(this,this.j,c);let K=this.o;if(this.S&&(K?(K=x(K),E(K,this.S)):K=this.S),this.m!==null||this.O||(H.H=K,K=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var D=this.i[_];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(p+=D,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=oy(this,H,p),_=Rr(this.I),Fe(_,"RID",c),Fe(_,"CVER",22),this.D&&Fe(_,"X-HTTP-Session-Id",this.D),Ta(this,_),K&&(this.O?p="headers="+encodeURIComponent(String(X0(K)))+"&"+p:this.m&&Rh(_,this.m,K)),Ah(this.h,H),this.Ua&&Fe(_,"TYPE","init"),this.P?(Fe(_,"$req",p),Fe(_,"SID","null"),H.T=!0,fi(H,_,null)):fi(H,_,p),this.G=2}}else this.G==3&&(c?sy(this,c):this.i.length==0||xc(this.h)||sy(this))};function sy(c,p){var _;p?_=p.l:_=c.U++;const D=Rr(c.I);Fe(D,"SID",c.K),Fe(D,"RID",_),Fe(D,"AID",c.T),Ta(c,D),c.m&&c.o&&Rh(D,c.m,c.o),_=new Jt(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=oy(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ah(c.h,_),fi(_,D,p)}function Ta(c,p){c.H&&M(c.H,function(_,D){Fe(p,D,_)}),c.l&&B0({},function(_,D){Fe(p,D,_)})}function oy(c,p,_){_=Math.min(c.i.length,_);var D=c.l?f(c.l.Na,c.l,c):null;e:{var H=c.i;let K=-1;for(;;){const ee=["count="+_];K==-1?0<_?(K=H[0].g,ee.push("ofs="+K)):K=0:ee.push("ofs="+K);let Ve=!0;for(let bt=0;bt<_;bt++){let Ae=H[bt].g;const Ot=H[bt].map;if(Ae-=K,0>Ae)K=Math.max(0,H[bt].g-100),Ve=!1;else try{gI(Ot,ee,"req"+Ae+"_")}catch{D&&D(Ot)}}if(Ve){D=ee.join("&");break e}}}return c=c.i.splice(0,_),p.D=c,D}function ay(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;B||U(),$||(B(),$=!0),V.add(p,c),c.v=0}}function Ph(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=kr(f(c.Fa,c),uy(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ly(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=kr(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),kc(this),ly(this))};function Dh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ly(c){c.g=new Jt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Rr(c.qa);Fe(p,"RID","rpc"),Fe(p,"SID",c.K),Fe(p,"AID",c.T),Fe(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(p,"TO",c.ja),Fe(p,"TYPE","xmlhttp"),Ta(c,p),c.m&&c.o&&Rh(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Sc(Rr(p)),_.m=null,_.P=!0,we(_,c)}t.Za=function(){this.C!=null&&(this.C=null,kc(this),Ph(this),ht(19))};function Rc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function cy(c,p){var _=null;if(c.g==p){Rc(c),Dh(c),c.g=null;var D=2}else if(kh(c.h,p))_=p.D,F0(c.h,p),D=1;else return;if(c.G!=0){if(p.o)if(D==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var H=c.B;D=ci(),Pe(D,new Ks(D,_)),Ac(c)}else ay(c);else if(H=p.s,H==3||H==0&&0<p.X||!(D==1&&wI(c,p)||D==2&&Ph(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),H){case 1:as(c,5);break;case 4:as(c,10);break;case 3:as(c,6);break;default:as(c,2)}}}function uy(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function as(c,p){if(c.j.info("Error code "+p),p==2){var _=f(c.fb,c),D=c.Xa;const H=!D;D=new os(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ec(D,"https"),Sc(D),H?hI(D.toString(),_):fI(D.toString(),_)}else ht(2);c.G=0,c.l&&c.l.sa(p),dy(c),iy(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function dy(c){if(c.G=0,c.ka=[],c.l){const p=U0(c.h);(p.length!=0||c.i.length!=0)&&(N(c.ka,p),N(c.ka,c.i),c.h.i.length=0,b(c.i),c.i.length=0),c.l.ra()}}function hy(c,p,_){var D=_ instanceof os?Rr(_):new os(_);if(D.g!="")p&&(D.g=p+"."+D.g),bc(D,D.s);else{var H=a.location;D=H.protocol,p=p?p+"."+H.hostname:H.hostname,H=+H.port;var K=new os(null);D&&Ec(K,D),p&&(K.g=p),H&&bc(K,H),_&&(K.l=_),D=K}return _=c.D,p=c.ya,_&&p&&Fe(D,_,p),Fe(D,"VER",c.la),Ta(c,D),D}function fy(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ze(new Tc({eb:_})):new Ze(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function py(){}t=py.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nc(){}Nc.prototype.g=function(c,p){return new pn(c,p)};function pn(c,p){ke.call(this),this.g=new ry(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!v(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Xs(this)}S(pn,ke),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Nh(this.g)},pn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=dn(c),c=_);p.i.push(new Ch(p.Ya++,c)),p.G==3&&Ac(p)},pn.prototype.N=function(){this.g.l=null,delete this.j,Nh(this.g),delete this.g,pn.aa.N.call(this)};function gy(c){li.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const _ in p){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}S(gy,li);function my(){fn.call(this),this.status=1}S(my,fn);function Xs(c){this.g=c}S(Xs,py),Xs.prototype.ua=function(){Pe(this.g,"a")},Xs.prototype.ta=function(c){Pe(this.g,new gy(c))},Xs.prototype.sa=function(c){Pe(this.g,new my)},Xs.prototype.ra=function(){Pe(this.g,"b")},Nc.prototype.createWebChannel=Nc.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,gS=function(){return new Nc},pS=function(){return ci()},fS=Bn,ig={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dr.NO_ERROR=0,dr.TIMEOUT=8,dr.HTTP_ERROR=6,Lu=dr,ui.COMPLETE="complete",hS=ui,Fn.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",ke.prototype.listen=ke.prototype.K,Qa=Fn,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,dS=Ze}).apply(typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{});const o_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new uh("@firebase/firestore");function ja(){return Ls.logLevel}function le(t,...e){if(Ls.logLevel<=Se.DEBUG){const n=e.map(e0);Ls.debug(`Firestore (${ua}): ${t}`,...n)}}function ti(t,...e){if(Ls.logLevel<=Se.ERROR){const n=e.map(e0);Ls.error(`Firestore (${ua}): ${t}`,...n)}}function Go(t,...e){if(Ls.logLevel<=Se.WARN){const n=e.map(e0);Ls.warn(`Firestore (${ua}): ${t}`,...n)}}function e0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: `+t;throw ti(e),new Error(e)}function Le(t,e){t||fe()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class zM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VM{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new mS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new $t(e)}}class MM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new MM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $M{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Le(this.o===void 0);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new $M(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=UM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function Qo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new mt(0,0))}static max(){return new ye(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ql.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ql?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends ql{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const BM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends ql{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return BM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Be.fromString(e))}static fromName(e){return new de(Be.fromString(e).popFirst(5))}static empty(){return new de(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Be(e.slice()))}}function HM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new Yi(i,de.empty(),e)}function qM(t){return new Yi(t.readTime,t.key,-1)}class Yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yi(ye.min(),de.empty(),-1)}static max(){return new Yi(ye.max(),de.empty(),-1)}}function WM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==KM)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(i=>i?X.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new X((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new X((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function QM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}t0.oe=-1;function ph(t){return t==null}function kd(t){return t===0&&1/t==-1/0}function YM(t){return typeof t=="number"&&Number.isInteger(t)&&!kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??It.RED,this.left=i??It.EMPTY,this.right=s??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new It(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return It.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new l_(this.data.getIterator())}getIteratorFrom(e){return new l_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class l_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new er([])}unionWith(e){let n=new At(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wS("Invalid base64 string: "+s):s}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const XM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(t){if(Le(!!t),typeof t=="string"){let e=0;const n=XM.exec(t);if(Le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function r0(t){const e=t.mapValue.fields.__previous_value__;return n0(e)?r0(e):e}function Wl(t){const e=Xi(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Kl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du={mapValue:{}};function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?n0(t)?4:ej(t)?9007199254740991:ZM(t)?10:11:fe()}function Sr(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wl(t).isEqual(Wl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xi(i.timestampValue),a=Xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Os(i.bytesValue).isEqual(Os(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return rt(i.geoPointValue.latitude)===rt(s.geoPointValue.latitude)&&rt(i.geoPointValue.longitude)===rt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return rt(i.integerValue)===rt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=rt(i.doubleValue),a=rt(s.doubleValue);return o===a?kd(o)===kd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qo(t.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(a_(o)!==a_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Sr(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function Gl(t,e){return(t.values||[]).find(n=>Sr(n,e))!==void 0}function Yo(t,e){if(t===e)return 0;const n=zs(t),r=zs(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=rt(s.integerValue||s.doubleValue),l=rt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return c_(t.timestampValue,e.timestampValue);case 4:return c_(Wl(t),Wl(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Os(s),l=Os(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Re(a[u],l[u]);if(d!==0)return d}return Re(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Re(rt(s.latitude),rt(o.latitude));return a!==0?a:Re(rt(s.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return u_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const h=s.fields||{},f=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,S=(l=f.value)===null||l===void 0?void 0:l.arrayValue,b=Re(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:u_(m,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===du.mapValue&&o===du.mapValue)return 0;if(s===du.mapValue)return 1;if(o===du.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Re(l[h],d[h]);if(f!==0)return f;const m=Yo(a[l[h]],u[d[h]]);if(m!==0)return m}return Re(l.length,d.length)}(t.mapValue,e.mapValue);default:throw fe()}}function c_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Xi(t),r=Xi(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function u_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Yo(n[i],r[i]);if(s)return s}return Re(n.length,r.length)}function Xo(t){return sg(t)}function sg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=sg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${sg(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function d_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function og(t){return!!t&&"integerValue"in t}function i0(t){return!!t&&"arrayValue"in t}function h_(t){return!!t&&"nullValue"in t}function f_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ou(t){return!!t&&"mapValue"in t}function ZM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function cl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ej(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cl(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=cl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ou(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){da(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pn(cl(this.value))}}function _S(t){const e=[];return da(t.fields,(n,r)=>{const i=new Ct([n]);if(Ou(r)){const s=_S(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,ye.min(),ye.min(),ye.min(),Pn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,ye.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,ye.min(),ye.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,ye.min(),ye.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.position=e,this.inclusive=n}}function p_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=Yo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function g_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n="asc"){this.field=e,this.dir=n}}function tj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{}class lt extends xS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rj(e,n,r):n==="array-contains"?new oj(e,r):n==="in"?new aj(e,r):n==="not-in"?new lj(e,r):n==="array-contains-any"?new cj(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ij(e,r):new sj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yo(n,this.value)):n!==null&&zs(this.value)===zs(n)&&this.matchesComparison(Yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends xS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ar(e,n)}matches(e){return ES(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ES(t){return t.op==="and"}function bS(t){return nj(t)&&ES(t)}function nj(t){for(const e of t.filters)if(e instanceof ar)return!1;return!0}function ag(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Xo(t.value);if(bS(t))return t.filters.map(e=>ag(e)).join(",");{const e=t.filters.map(n=>ag(n)).join(",");return`${t.op}(${e})`}}function SS(t,e){return t instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&Sr(r.value,i.value)}(t,e):t instanceof ar?function(r,i){return i instanceof ar&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&SS(o,i.filters[a]),!0):!1}(t,e):void fe()}function TS(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Xo(n.value)}`}(t):t instanceof ar?function(n){return n.op.toString()+" {"+n.getFilters().map(TS).join(" ,")+"}"}(t):"Filter"}class rj extends lt{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class ij extends lt{constructor(e,n){super(e,"in",n),this.keys=IS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sj extends lt{constructor(e,n){super(e,"not-in",n),this.keys=IS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class oj extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return i0(n)&&Gl(n.arrayValue,this.value)}}class aj extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gl(this.value.arrayValue,n)}}class lj extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gl(this.value.arrayValue,n)}}class cj extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!i0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function m_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new uj(t,e,n,r,i,s,o)}function s0(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ag(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xo(r)).join(",")),e.ue=n}return e.ue}function o0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g_(t.startAt,e.startAt)&&g_(t.endAt,e.endAt)}function lg(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dj(t,e,n,r,i,s,o,a){return new pc(t,e,n,r,i,s,o,a)}function a0(t){return new pc(t)}function y_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CS(t){return t.collectionGroup!==null}function ul(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new At(Ct.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Rd(s,r))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new Rd(Ct.keyField(),r))}return e.ce}function _r(t){const e=ve(t);return e.le||(e.le=hj(e,ul(t))),e.le}function hj(t,e){if(t.limitType==="F")return m_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Rd(i.field,s)});const n=t.endAt?new Ad(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ad(t.startAt.position,t.startAt.inclusive):null;return m_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cg(t,e){const n=t.filters.concat([e]);return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ug(t,e,n){return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gh(t,e){return o0(_r(t),_r(e))&&t.limitType===e.limitType}function kS(t){return`${s0(_r(t))}|lt:${t.limitType}`}function ao(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TS(i)).join(", ")}]`),ph(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xo(i)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function mh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ul(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=p_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ul(r),i)||r.endAt&&!function(o,a,l){const u=p_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ul(r),i))}(t,e)}function fj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AS(t){return(e,n)=>{let r=!1;for(const i of ul(t)){const s=pj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function pj(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Yo(l,u):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return vS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new Xe(de.comparator);function ni(){return gj}const RS=new Xe(de.comparator);function Ya(...t){let e=RS;for(const n of t)e=e.insert(n.key,n);return e}function NS(t){let e=RS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vs(){return dl()}function PS(){return dl()}function dl(){return new ha(t=>t.toString(),(t,e)=>t.isEqual(e))}const mj=new Xe(de.comparator),yj=new At(de.comparator);function be(...t){let e=yj;for(const n of t)e=e.add(n);return e}const vj=new At(Re);function wj(){return vj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function DS(t){return{integerValue:""+t}}function _j(t,e){return YM(e)?DS(e):l0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this._=void 0}}function xj(t,e,n){return t instanceof Ql?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&n0(s)&&(s=r0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Yl?OS(t,e):t instanceof Xl?zS(t,e):function(i,s){const o=LS(i,s),a=v_(o)+v_(i.Pe);return og(o)&&og(i.Pe)?DS(a):l0(i.serializer,a)}(t,e)}function Ej(t,e,n){return t instanceof Yl?OS(t,e):t instanceof Xl?zS(t,e):n}function LS(t,e){return t instanceof Nd?function(r){return og(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ql extends yh{}class Yl extends yh{constructor(e){super(),this.elements=e}}function OS(t,e){const n=VS(e);for(const r of t.elements)n.some(i=>Sr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Xl extends yh{constructor(e){super(),this.elements=e}}function zS(t,e){let n=VS(e);for(const r of t.elements)n=n.filter(i=>!Sr(i,r));return{arrayValue:{values:n}}}class Nd extends yh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function v_(t){return rt(t.integerValue||t.doubleValue)}function VS(t){return i0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n){this.field=e,this.transform=n}}function Sj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Yl&&i instanceof Yl||r instanceof Xl&&i instanceof Xl?Qo(r.elements,i.elements,Sr):r instanceof Nd&&i instanceof Nd?Sr(r.Pe,i.Pe):r instanceof Ql&&i instanceof Ql}(t.transform,e.transform)}class Tj{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vh{}function MS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new c0(t.key,xr.none()):new gc(t.key,t.data,xr.none());{const n=t.data,r=Pn.empty();let i=new At(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Bs(t.key,r,new er(i.toArray()),xr.none())}}function Ij(t,e,n){t instanceof gc?function(i,s,o){const a=i.value.clone(),l=__(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bs?function(i,s,o){if(!zu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=__(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(jS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function hl(t,e,n,r){return t instanceof gc?function(s,o,a,l){if(!zu(s.precondition,o))return a;const u=s.value.clone(),d=x_(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bs?function(s,o,a,l){if(!zu(s.precondition,o))return a;const u=x_(s.fieldTransforms,l,o),d=o.data;return d.setAll(jS(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return zu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Cj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=LS(r.transform,i||null);s!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,s))}return n||null}function w_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qo(r,i,(s,o)=>Sj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gc extends vh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bs extends vh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function jS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function __(t,e,n){const r=new Map;Le(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ej(o,a,n[i]))}return r}function x_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,xj(s,o,e))}return r}class c0 extends vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kj extends vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ij(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=MS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,(n,r)=>w_(n,r))&&Qo(this.baseMutations,e.baseMutations,(n,r)=>w_(n,r))}}class u0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Le(e.mutations.length===r.length);let i=function(){return mj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new u0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Te;function Pj(t){switch(t){default:return fe();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function $S(t){if(t===void 0)return ti("GRPC error has no .code"),Q.UNKNOWN;switch(t){case ot.OK:return Q.OK;case ot.CANCELLED:return Q.CANCELLED;case ot.UNKNOWN:return Q.UNKNOWN;case ot.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ot.INTERNAL:return Q.INTERNAL;case ot.UNAVAILABLE:return Q.UNAVAILABLE;case ot.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ot.NOT_FOUND:return Q.NOT_FOUND;case ot.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ot.ABORTED:return Q.ABORTED;case ot.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ot.DATA_LOSS:return Q.DATA_LOSS;default:return fe()}}(Te=ot||(ot={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=new Ss([4294967295,4294967295],0);function E_(t){const e=Dj().encode(t),n=new uS;return n.update(e),new Uint8Array(n.digest())}function b_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ss([n,r],0),new Ss([i,s],0)]}class d0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xa(`Invalid padding: ${n}`);if(r<0)throw new Xa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ss.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ss.fromNumber(r)));return i.compare(Lj)===1&&(i=new Ss([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=E_(e),[r,i]=b_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new d0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=E_(e),[r,i]=b_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wh(ye.min(),i,new Xe(Re),ni(),be())}}class mc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mc(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class FS{constructor(e,n){this.targetId=e,this.me=n}}class US{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class S_{constructor(){this.fe=0,this.ge=I_(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),n=be(),r=be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new mc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=I_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Oj{constructor(e){this.Le=e,this.Be=new Map,this.ke=ni(),this.qe=T_(),this.Qe=new Xe(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(lg(s))if(r===0){const o=new de(s.path);this.Ue(n,o,Ut.newNoDocument(o,ye.min()))}else Le(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Os(r).toUint8Array()}catch(l){if(l instanceof wS)return Go("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new d0(o,i,s)}catch(l){return Go(l instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&lg(a.target)){const l=new de(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ut.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new wh(e,n,this.Qe,this.ke,r);return this.ke=ni(),this.qe=T_(),this.Qe=new Xe(Re),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new S_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new At(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new S_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function T_(){return new Xe(de.comparator)}function I_(){return new Xe(de.comparator)}const zj={asc:"ASCENDING",desc:"DESCENDING"},Vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mj={and:"AND",or:"OR"};class jj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dg(t,e){return t.useProto3Json||ph(e)?e:{value:e}}function Pd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $j(t,e){return Pd(t,e.toTimestamp())}function Er(t){return Le(!!t),ye.fromTimestamp(function(n){const r=Xi(n);return new mt(r.seconds,r.nanos)}(t))}function h0(t,e){return hg(t,e).canonicalString()}function hg(t,e){const n=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HS(t){const e=Be.fromString(t);return Le(QS(e)),e}function fg(t,e){return h0(t.databaseId,e.path)}function Rf(t,e){const n=HS(e);if(n.get(1)!==t.databaseId.projectId)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(WS(n))}function qS(t,e){return h0(t.databaseId,e)}function Fj(t){const e=HS(t);return e.length===4?Be.emptyPath():WS(e)}function pg(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WS(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function C_(t,e,n){return{name:fg(t,e),fields:n.value.mapValue.fields}}function Uj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Le(d===void 0||typeof d=="string"),Nt.fromBase64String(d||"")):(Le(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Nt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?Q.UNKNOWN:$S(u.code);return new se(d,u.message||"")}(o);n=new US(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Rf(t,r.document.name),s=Er(r.document.updateTime),o=r.document.createTime?Er(r.document.createTime):ye.min(),a=new Pn({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Vu(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Rf(t,r.document),s=r.readTime?Er(r.readTime):ye.min(),o=Ut.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Vu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Rf(t,r.document),s=r.removedTargetIds||[];n=new Vu([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Nj(i,s),a=r.targetId;n=new FS(a,o)}}return n}function Bj(t,e){let n;if(e instanceof gc)n={update:C_(t,e.key,e.value)};else if(e instanceof c0)n={delete:fg(t,e.key)};else if(e instanceof Bs)n={update:C_(t,e.key,e.data),updateMask:Jj(e.fieldMask)};else{if(!(e instanceof kj))return fe();n={verify:fg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ql)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$j(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function Hj(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Er(i.updateTime):Er(s);return o.isEqual(ye.min())&&(o=Er(s)),new Tj(o,i.transformResults||[])}(n,e))):[]}function qj(t,e){return{documents:[qS(t,e.path)]}}function Wj(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qS(t,i);const s=function(u){if(u.length!==0)return GS(ar.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:lo(f.field),direction:Qj(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=dg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Kj(t){let e=Fj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Le(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=KS(h);return f instanceof ar&&bS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(S){return new Rd(co(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,ph(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Ad(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new Ad(m,f)}(n.endAt)),dj(e,i,o,s,a,"F",l,u)}function Gj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=co(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=co(n.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=co(n.unaryFilter.field);return lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=co(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(co(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ar.create(n.compositeFilter.filters.map(r=>KS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function Qj(t){return zj[t]}function Yj(t){return Vj[t]}function Xj(t){return Mj[t]}function lo(t){return{fieldPath:t.canonicalString()}}function co(t){return Ct.fromServerFormat(t.fieldPath)}function GS(t){return t instanceof lt?function(n){if(n.op==="=="){if(f_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NAN"}};if(h_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NAN"}};if(h_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(n.field),op:Yj(n.op),value:n.value}}}(t):t instanceof ar?function(n){const r=n.getFilters().map(i=>GS(i));return r.length===1?r[0]:{compositeFilter:{op:Xj(n.op),filters:r}}}(t):fe()}function Jj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,r,i,s=ye.min(),o=ye.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.ct=e}}function e9(t){const e=Kj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ug(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(){this.un=new n9}addToCollectionParentIndex(e,n){return this.un.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Yi.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class n9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new At(Be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new At(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Jo(0)}static kn(){return new Jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(){this.changes=new ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hl(r.mutation,i,er.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const i=vs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ya();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ni();const o=dl(),a=function(){return dl()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Bs)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),hl(d.mutation,u,d.mutation.getFieldMask(),mt.now())):o.set(u.key,er.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new i9(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=dl();let i=new Xe((o,a)=>o-a),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||er.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||be()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=PS();d.forEach(f=>{if(!s.has(f)){const m=MS(n.get(f),r.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return X.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):X.resolve(vs());let a=-1,l=s;return o.next(u=>X.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?X.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,be())).next(d=>({batchId:a,changes:NS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=Ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ya();return this.indexManager.getCollectionParents(e,s).next(a=>X.forEach(a,l=>{const u=function(h,f){return new pc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ut.newInvalidDocument(d)))});let a=Ya();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&hl(d.mutation,u,er.empty(),mt.now()),mh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return X.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Er(i.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:e9(i.bundledQuery),readTime:Er(i.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(){this.overlays=new Xe(de.comparator),this.Ir=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vs();return X.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const i=vs(),s=n.length+1,o=new de(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return X.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xe((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=vs(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=vs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return X.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Rj(n,r));let s=this.Ir.get(n);s===void 0&&(s=be(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.Tr=new At(vt.Er),this.dr=new At(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new vt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new vt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new de(new Be([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new Be([])),r=new vt(n,e),i=new vt(n,e+1);let s=be();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new At(vt.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Aj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return X.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),X.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Re);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),X.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const o=new vt(new de(s),0);let a=new At(Re);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),X.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return X.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new vt(n,0),i=this.br.firstAfterOrEqual(r);return X.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e){this.Mr=e,this.docs=function(){return new Xe(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=ni();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ni();const o=n.path,a=new de(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||WM(qM(d),r)<=0||(i.has(d.key)||mh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return X.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new d9(this)}getSize(e){return X.resolve(this.size)}}class d9 extends r9{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e){this.persistence=e,this.Nr=new ha(n=>s0(n),o0),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new f0,this.targetCount=0,this.kr=Jo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),X.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Jo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Kn(n),X.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),X.waitFor(s).next(()=>i)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),X.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,n){this.qr={},this.overlays={},this.Qr=new t0(0),this.Kr=!1,this.Kr=!0,this.$r=new l9,this.referenceDelegate=e(this),this.Ur=new h9(this),this.indexManager=new t9,this.remoteDocumentCache=function(i){return new u9(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Zj(n),this.Gr=new o9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new c9(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const i=new p9(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return X.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class p9 extends GM{constructor(e){super(),this.currentSequenceNumber=e}}class p0{constructor(e){this.persistence=e,this.Jr=new f0,this.Yr=null}static Zr(e){return new p0(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),X.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,r=>{const i=de.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ye.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return X.or([()=>X.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=be(),i=be();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new g0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return JO()?8:QM(Ht())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new g9;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ja()<=Se.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(ja()<=Se.DEBUG&&le("QueryEngine","Query:",ao(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ja()<=Se.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):X.resolve())}Yi(e,n){if(y_(n))return X.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ug(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=be(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,ug(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return y_(n)||i.isEqual(ye.min())?X.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?X.resolve(null):(ja()<=Se.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ao(n)),this.rs(e,o,n,HM(i,-1)).next(a=>a))})}ts(e,n){let r=new At(AS(e));return n.forEach((i,s)=>{mh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ja()<=Se.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",ao(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Xe(Re),this._s=new ha(s=>s0(s),o0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s9(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function v9(t,e,n,r){return new y9(t,e,n,r)}async function YS(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=be();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function w9(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,f=h.keys();let m=X.resolve();return f.forEach(S=>{m=m.next(()=>d.getEntry(l,S)).next(b=>{const N=u.docVersions.get(S);Le(N!==null),b.version.compareTo(N)<0&&(h.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),d.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=be();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XS(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _9(t,e){const n=ve(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Nt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(b,N,y){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,m,d)&&a.push(n.Ur.updateTargetData(s,m))});let l=ni(),u=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(x9(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(ye.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return X.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function x9(t,e,n){let r=be(),i=be();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ni();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ye.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function E9(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function b9(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,X.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Di(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function gg(t,e,n){const r=ve(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!fc(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function k_(t,e,n){const r=ve(t);let i=ye.min(),s=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=ve(l),f=h._s.get(d);return f!==void 0?X.resolve(h.os.get(f)):h.Ur.getTargetData(u,d)}(r,o,_r(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ye.min(),n?s:be())).next(a=>(S9(r,fj(e),a),{documents:a,Ts:s})))}function S9(t,e,n){let r=t.us.get(e)||ye.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class A_{constructor(){this.activeTargetIds=wj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T9{constructor(){this.so=new A_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new A_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu=null;function Nf(){return hu===null?hu=function(){return 268435456+Math.round(2147483648*Math.random())}():hu++,"0x"+hu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class A9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Nf(),l=this.xo(n,r.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(d=>(le("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Go("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=C9[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Nf();return new Promise((o,a)=>{const l=new dS;l.setWithCredentials(!0),l.listenOnce(hS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Lu.NO_ERROR:const d=l.getResponseJson();le(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Lu.TIMEOUT:le(jt,`RPC '${e}' ${s} timed out`),a(new se(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Lu.HTTP_ERROR:const h=l.getStatus();if(le(jt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const S=function(N){const y=N.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(y)>=0?y:Q.UNKNOWN}(m.status);a(new se(S,m.message))}else a(new se(Q.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new se(Q.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{le(jt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);le(jt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Nf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gS(),a=pS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");le(jt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,m=!1;const S=new k9({Io:N=>{m?le(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(f||(le(jt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),le(jt,`RPC '${e}' stream ${i} sending:`,N),h.send(N))},To:()=>h.close()}),b=(N,y,v)=>{N.listen(y,I=>{try{v(I)}catch(R){setTimeout(()=>{throw R},0)}})};return b(h,Qa.EventType.OPEN,()=>{m||(le(jt,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),b(h,Qa.EventType.CLOSE,()=>{m||(m=!0,le(jt,`RPC '${e}' stream ${i} transport closed`),S.So())}),b(h,Qa.EventType.ERROR,N=>{m||(m=!0,Go(jt,`RPC '${e}' stream ${i} transport errored:`,N),S.So(new se(Q.UNAVAILABLE,"The operation could not be completed")))}),b(h,Qa.EventType.MESSAGE,N=>{var y;if(!m){const v=N.data[0];Le(!!v);const I=v,R=I.error||((y=I[0])===null||y===void 0?void 0:y.error);if(R){le(jt,`RPC '${e}' stream ${i} received error:`,R);const O=R.status;let M=function(w){const E=ot[w];if(E!==void 0)return $S(E)}(O),C=R.message;M===void 0&&(M=Q.INTERNAL,C="Unknown error status: "+O+" with message "+R.message),m=!0,S.So(new se(M,C)),h.close()}else le(jt,`RPC '${e}' stream ${i} received:`,v),S.bo(v)}}),b(a,fS.STAT_EVENT,N=>{N.stat===ig.PROXY?le(jt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ig.NOPROXY&&le(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t){return new jj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new JS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new se(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R9 extends ZS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Uj(this.serializer,e),r=function(s){if(!("targetChange"in s))return ye.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?Er(o.readTime):ye.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=pg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=lg(l)?{documents:qj(s,l)}:{query:Wj(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BS(s,o.resumeToken);const u=dg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ye.min())>0){a.readTime=Pd(s,o.snapshotVersion.toTimestamp());const u=dg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Gj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=pg(this.serializer),n.removeTarget=e,this.a_(n)}}class N9 extends ZS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Hj(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=pg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,hg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(Q.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,hg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(Q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class D9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ti(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Hs(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ve(l);u.L_.add(4),await yc(u),u.q_.set("Unknown"),u.L_.delete(4),await xh(u)}(this))})}),this.q_=new D9(r,i)}}async function xh(t){if(Hs(t))for(const e of t.B_)await e(!0)}async function yc(t){for(const e of t.B_)await e(!1)}function eT(t,e){const n=ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),w0(n)?v0(n):fa(n).r_()&&y0(n,e))}function m0(t,e){const n=ve(t),r=fa(n);n.N_.delete(e),r.r_()&&tT(n,e),n.N_.size===0&&(r.r_()?r.o_():Hs(n)&&n.q_.set("Unknown"))}function y0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fa(t).A_(e)}function tT(t,e){t.Q_.xe(e),fa(t).R_(e)}function v0(t){t.Q_=new Oj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),fa(t).start(),t.q_.v_()}function w0(t){return Hs(t)&&!fa(t).n_()&&t.N_.size>0}function Hs(t){return ve(t).L_.size===0}function nT(t){t.Q_=void 0}async function O9(t){t.q_.set("Online")}async function z9(t){t.N_.forEach((e,n)=>{y0(t,e)})}async function V9(t,e){nT(t),w0(t)?(t.q_.M_(e),v0(t)):t.q_.set("Unknown")}async function M9(t,e,n){if(t.q_.set("Online"),e instanceof US&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dd(t,r)}else if(e instanceof Vu?t.Q_.Ke(e):e instanceof FS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ye.min()))try{const r=await XS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Nt.EMPTY_BYTE_STRING,d.snapshotVersion)),tT(s,l);const h=new Di(d.target,l,u,d.sequenceNumber);y0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){le("RemoteStore","Failed to raise snapshot:",r),await Dd(t,r)}}async function Dd(t,e,n){if(!fc(e))throw e;t.L_.add(1),await yc(t),t.q_.set("Offline"),n||(n=()=>XS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xh(t)})}function rT(t,e){return e().catch(n=>Dd(t,n,e))}async function Eh(t){const e=ve(t),n=Ji(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;j9(e);)try{const i=await E9(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,$9(e,i)}catch(i){await Dd(e,i)}iT(e)&&sT(e)}function j9(t){return Hs(t)&&t.O_.length<10}function $9(t,e){t.O_.push(e);const n=Ji(t);n.r_()&&n.V_&&n.m_(e.mutations)}function iT(t){return Hs(t)&&!Ji(t).n_()&&t.O_.length>0}function sT(t){Ji(t).start()}async function F9(t){Ji(t).p_()}async function U9(t){const e=Ji(t);for(const n of t.O_)e.m_(n.mutations)}async function B9(t,e,n){const r=t.O_.shift(),i=u0.from(r,e,n);await rT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Eh(t)}async function H9(t,e){e&&Ji(t).V_&&await async function(r,i){if(function(o){return Pj(o)&&o!==Q.ABORTED}(i.code)){const s=r.O_.shift();Ji(r).s_(),await rT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Eh(r)}}(t,e),iT(t)&&sT(t)}async function N_(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const r=Hs(n);n.L_.add(3),await yc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xh(n)}async function q9(t,e){const n=ve(t);e?(n.L_.delete(2),await xh(n)):e||(n.L_.add(2),await yc(n),n.q_.set("Unknown"))}function fa(t){return t.K_||(t.K_=function(n,r,i){const s=ve(n);return s.w_(),new R9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:O9.bind(null,t),Ro:z9.bind(null,t),mo:V9.bind(null,t),d_:M9.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),w0(t)?v0(t):t.q_.set("Unknown")):(await t.K_.stop(),nT(t))})),t.K_}function Ji(t){return t.U_||(t.U_=function(n,r,i){const s=ve(n);return s.w_(),new N9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:F9.bind(null,t),mo:H9.bind(null,t),f_:U9.bind(null,t),g_:B9.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Eh(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new _0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x0(t,e){if(ti("AsyncQueue",`${e}: ${t}`),fc(t))return new se(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=Ya(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Vo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.W_=new Xe(de.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zo(e,n,Vo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class K9{constructor(){this.queries=D_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ve(n),s=i.queries;i.queries=D_(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new se(Q.ABORTED,"Firestore shutting down"))}}function D_(){return new ha(t=>kS(t),gh)}async function oT(t,e){const n=ve(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new W9,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=x0(o,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&E0(n)}async function aT(t,e){const n=ve(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function G9(t,e){const n=ve(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&E0(n)}function Q9(t,e,n){const r=ve(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function E0(t){t.Y_.forEach(e=>{e.next()})}var mg,L_;(L_=mg||(mg={})).ea="default",L_.Cache="cache";class lT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.key=e}}class uT{constructor(e){this.key=e}}class Y9{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=AS(e),this.Ra=new Vo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new P_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),m=mh(this.query,h)?h:null,S=!!f&&this.mutatedKeys.has(f.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let N=!1;f&&m?f.data.isEqual(m.data)?S!==b&&(r.track({type:3,doc:m}),N=!0):this.ga(f,m)||(r.track({type:2,doc:m}),N=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),N=!0):f&&!m&&(r.track({type:1,doc:f}),N=!0,(l||u)&&(a=!0)),N&&(m?(o=o.add(m),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(m,S){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return b(m)-b(S)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Zo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new P_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new cT(r))}),n}ba(e){this.Ta=e.Ts,this.da=be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Zo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class X9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class J9{constructor(e){this.key=e,this.va=!1}}class Z9{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ha(a=>kS(a),gh),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(de.comparator),this.Na=new Map,this.La=new f0,this.Ba={},this.ka=new Map,this.qa=Jo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function e6(t,e,n=!0){const r=mT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await dT(r,e,n,!0),i}async function t6(t,e){const n=mT(t);await dT(n,e,!0,!1)}async function dT(t,e,n,r){const i=await b9(t.localStore,_r(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await n6(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&eT(t.remoteStore,i),a}async function n6(t,e,n,r,i){t.Ka=(h,f,m)=>async function(b,N,y,v){let I=N.view.ma(y);I.ns&&(I=await k_(b.localStore,N.query,!1).then(({documents:C})=>N.view.ma(C,I)));const R=v&&v.targetChanges.get(N.targetId),O=v&&v.targetMismatches.get(N.targetId)!=null,M=N.view.applyChanges(I,b.isPrimaryClient,R,O);return z_(b,N.targetId,M.wa),M.snapshot}(t,h,f,m);const s=await k_(t.localStore,e,!0),o=new Y9(e,s.Ts),a=o.ma(s.documents),l=mc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);z_(t,n,u.wa);const d=new X9(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function r6(t,e,n){const r=ve(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!gh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&m0(r.remoteStore,i.targetId),yg(r,i.targetId)}).catch(hc)):(yg(r,i.targetId),await gg(r.localStore,i.targetId,!0))}async function i6(t,e){const n=ve(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),m0(n.remoteStore,r.targetId))}async function s6(t,e,n){const r=h6(t);try{const i=await function(o,a){const l=ve(o),u=mt.now(),d=a.reduce((m,S)=>m.add(S.key),be());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let S=ni(),b=be();return l.cs.getEntries(m,d).next(N=>{S=N,S.forEach((y,v)=>{v.isValidDocument()||(b=b.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,S)).next(N=>{h=N;const y=[];for(const v of a){const I=Cj(v,h.get(v.key).overlayedDocument);I!=null&&y.push(new Bs(v.key,I,_S(I.value.mapValue),xr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,y,a)}).next(N=>{f=N;const y=N.applyToLocalDocumentSet(h,b);return l.documentOverlayCache.saveOverlays(m,N.batchId,y)})}).then(()=>({batchId:f.batchId,changes:NS(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Xe(Re)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await vc(r,i.changes),await Eh(r.remoteStore)}catch(i){const s=x0(i,"Failed to persist write");n.reject(s)}}async function hT(t,e){const n=ve(t);try{const r=await _9(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Le(o.va):i.removedDocuments.size>0&&(Le(o.va),o.va=!1))}),await vc(n,r,e)}catch(r){await hc(r)}}function O_(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ve(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(u=!0)}),u&&E0(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function o6(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Xe(de.comparator);o=o.insert(s,Ut.newNoDocument(s,ye.min()));const a=be().add(s),l=new wh(ye.min(),new Map,new Xe(Re),o,a);await hT(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),b0(r)}else await gg(r.localStore,e,!1).then(()=>yg(r,e,n)).catch(hc)}async function a6(t,e){const n=ve(t),r=e.batch.batchId;try{const i=await w9(n.localStore,e);pT(n,r,null),fT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vc(n,i)}catch(i){await hc(i)}}async function l6(t,e,n){const r=ve(t);try{const i=await function(o,a){const l=ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Le(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);pT(r,e,n),fT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vc(r,i)}catch(i){await hc(i)}}function fT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function pT(t,e,n){const r=ve(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function yg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||gT(t,r)})}function gT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(m0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),b0(t))}function z_(t,e,n){for(const r of n)r instanceof cT?(t.La.addReference(r.key,e),c6(t,r)):r instanceof uT?(le("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||gT(t,r.key)):fe()}function c6(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(r),b0(t))}function b0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(Be.fromString(e)),r=t.qa.next();t.Na.set(r,new J9(n)),t.Oa=t.Oa.insert(n,r),eT(t.remoteStore,new Di(_r(a0(n.path)),r,"TargetPurposeLimboResolution",t0.oe))}}async function vc(t,e,n){const r=ve(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=g0.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const d=ve(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>X.forEach(u,f=>X.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>X.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!fc(h))throw h;le("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),S=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(S);d.os=d.os.insert(f,b)}}}(r.localStore,s))}async function u6(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const r=await YS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new se(Q.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vc(n,r.hs)}}function d6(t,e){const n=ve(t),r=n.Na.get(e);if(r&&r.va)return be().add(r.key);{let i=be();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function mT(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o6.bind(null,e),e.Ca.d_=G9.bind(null,e.eventManager),e.Ca.$a=Q9.bind(null,e.eventManager),e}function h6(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l6.bind(null,e),e}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return v9(this.persistence,new m9,e.initialUser,this.serializer)}Ga(e){return new f9(p0.Zr,this.serializer)}Wa(e){return new T9}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class vg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u6.bind(null,this.syncEngine),await q9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K9}()}createDatastore(e){const n=_h(e.databaseInfo.databaseId),r=function(s){return new A9(s)}(e.databaseInfo);return function(s,o,a,l){return new P9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new L9(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>O_(this.syncEngine,n,0),function(){return R_.D()?new R_:new I9}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new Z9(i,s,o,a,l,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ve(i);le("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await yc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vg.provider={build:()=>new vg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$t.UNAUTHENTICATED,this.clientId=yS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{le("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(le("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=x0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Df(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await YS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function V_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await p6(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>N_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>N_(e.remoteStore,i)),t._onlineComponents=e}async function p6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await Df(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Go("Error using user provided cache. Falling back to memory cache: "+n),await Df(t,new Ld)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await Df(t,new Ld);return t._offlineComponents}async function vT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await V_(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await V_(t,new vg))),t._onlineComponents}function g6(t){return vT(t).then(e=>e.syncEngine)}async function wT(t){const e=await vT(t),n=e.eventManager;return n.onListen=e6.bind(null,e.syncEngine),n.onUnlisten=r6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=i6.bind(null,e.syncEngine),n}function m6(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new yT({next:f=>{d.Za(),o.enqueueAndForget(()=>aT(s,h));const m=f.docs.has(a);!m&&f.fromCache?u.reject(new se(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?u.reject(new se(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new lT(a0(a.path),d,{includeMetadataChanges:!0,_a:!0});return oT(s,h)}(await wT(t),t.asyncQueue,e,n,r)),r.promise}function y6(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new yT({next:f=>{d.Za(),o.enqueueAndForget(()=>aT(s,h)),f.fromCache&&l.source==="server"?u.reject(new se(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new lT(a,d,{includeMetadataChanges:!0,_a:!0});return oT(s,h)}(await wT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e,n){if(!n)throw new se(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v6(t,e,n,r){if(e===!0&&r===!0)throw new se(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function j_(t){if(!de.isDocumentKey(t))throw new se(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $_(t){if(de.isDocumentKey(t))throw new se(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function Zi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bh(t);throw new se(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OM;switch(r.type){case"firstParty":return new jM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=M_.get(n);r&&(le("ComponentProvider","Removing Datastore"),M_.delete(n),r.terminate())}(this),Promise.resolve()}}function w6(t,e,n,r={}){var i;const s=(t=Zi(t,Sh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=$t.MOCK_USER;else{a=WO(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new se(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $t(u)}t._authCredentials=new zM(new mS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pa(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Wi extends pa{constructor(e,n,r){super(e,n,a0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new de(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function _6(t,e,...n){if(t=qt(t),xT("collection","path",e),t instanceof Sh){const r=Be.fromString(e,...n);return $_(r),new Wi(t,null,r)}{if(!(t instanceof an||t instanceof Wi))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return $_(r),new Wi(t.firestore,null,r)}}function Lf(t,e,...n){if(t=qt(t),arguments.length===1&&(e=yS.newId()),xT("doc","path",e),t instanceof Sh){const r=Be.fromString(e,...n);return j_(r),new an(t,null,new de(r))}{if(!(t instanceof an||t instanceof Wi))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return j_(r),new an(t.firestore,t instanceof Wi?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new JS(this,"async_queue_retry"),this.Vu=()=>{const r=Pf();r&&le("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Wr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fc(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ti("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=_0.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class wc extends Sh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new U_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U_(e),this._firestoreClient=void 0,await e}}}function x6(t,e){const n=typeof t=="object"?t:Um(),r=typeof t=="string"?t:"(default)",i=Us(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=HO("firestore");s&&w6(i,...s)}return i}function S0(t){if(t._terminated)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E6(t),t._firestoreClient}function E6(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new JM(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_T(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new f6(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(Nt.fromBase64String(e))}catch(n){throw new se(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ea(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=/^__.*__$/;class S6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new gc(e,this.data,n,this.fieldTransforms)}}function ET(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class A0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new A0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Od(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ET(this.Cu)&&b6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class T6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_h(e)}Qu(e,n,r,i=!1){return new A0({Cu:e,methodName:n,qu:r,path:Ct.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bT(t){const e=t._freezeSettings(),n=_h(t._databaseId);return new T6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function I6(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);IT("Data must be an object, but it was:",o,r);const a=ST(r,o);let l,u;if(s.merge)l=new er(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=k6(e,h,n);if(!o.contains(f))throw new se(Q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);R6(d,f)||d.push(f)}l=new er(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new S6(new Pn(a),l,u)}class R0 extends I0{_toFieldTransform(e){return new bj(e.path,new Ql)}isEqual(e){return e instanceof R0}}function C6(t,e,n,r=!1){return N0(n,t.Qu(r?4:3,e))}function N0(t,e){if(TT(t=qt(t)))return IT("Unsupported field value:",e,t),ST(t,e);if(t instanceof I0)return function(r,i){if(!ET(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=N0(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _j(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=mt.fromDate(r);return{timestampValue:Pd(i.serializer,s)}}if(r instanceof mt){const s=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pd(i.serializer,s)}}if(r instanceof C0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ea)return{bytesValue:BS(i.serializer,r._byteString)};if(r instanceof an){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:h0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof k0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return l0(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${bh(r)}`)}(t,e)}function ST(t,e){const n={};return vS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,(r,i)=>{const s=N0(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof C0||t instanceof ea||t instanceof an||t instanceof I0||t instanceof k0)}function IT(t,e,n){if(!TT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=bh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function k6(t,e,n){if((e=qt(e))instanceof T0)return e._internalPath;if(typeof e=="string")return CT(t,e);throw Od("Field path arguments must be of type string or ",t,!1,void 0,n)}const A6=new RegExp("[~\\*/\\[\\]]");function CT(t,e,n){if(e.search(A6)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new T0(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Od(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new se(Q.INVALID_ARGUMENT,a+t+l)}function R6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(AT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N6 extends kT{data(){return super.data()}}function AT(t,e){return typeof e=="string"?CT(t,e):e instanceof T0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P0{}class D6 extends P0{}function L6(t,e,...n){let r=[];e instanceof P0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof L0).length,a=s.filter(l=>l instanceof D0).length;if(o>1||o>0&&a>0)throw new se(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class D0 extends D6{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new D0(e,n,r)}_apply(e){const n=this._parse(e);return RT(e._query,n),new pa(e.firestore,e.converter,cg(e._query,n))}_parse(e){const n=bT(e.firestore);return function(s,o,a,l,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new se(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){H_(h,d);const m=[];for(const S of h)m.push(B_(l,s,S));f={arrayValue:{values:m}}}else f=B_(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||H_(h,d),f=C6(a,o,h,d==="in"||d==="not-in");return lt.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class L0 extends P0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new L0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ar.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)RT(o,l),o=cg(o,l)}(e._query,n),new pa(e.firestore,e.converter,cg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function B_(t,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new se(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CS(e)&&n.indexOf("/")!==-1)throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!de.isDocumentKey(r))throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return d_(t,new de(r))}if(n instanceof an)return d_(t,n._key);throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bh(n)}.`)}function H_(t,e){if(!Array.isArray(t)||t.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RT(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class O6{convertValue(e,n="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return da(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>rt(o.doubleValue));return new k0(s)}convertGeoPoint(e){return new C0(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=r0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const n=Xi(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Le(QS(r));const i=new Kl(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(n)||ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class NT extends kT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(AT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Mu extends NT{data(e={}){return super.data(e)}}class V6{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ja(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Mu(this._firestore,this._userDataWriter,r.key,r,new Ja(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Mu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ja(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Mu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ja(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:M6(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function M6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){t=Zi(t,an);const e=Zi(t.firestore,wc);return m6(S0(e),t._key).then(n=>B6(e,t,n))}class PT extends O6{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function $6(t){t=Zi(t,pa);const e=Zi(t.firestore,wc),n=S0(e),r=new PT(e);return P6(t._query),y6(n,t._query).then(i=>new V6(e,r,t,i))}function F6(t,e,n){t=Zi(t,an);const r=Zi(t.firestore,wc),i=z6(t.converter,e,n);return DT(r,[I6(bT(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xr.none())])}function U6(t){return DT(Zi(t.firestore,wc),[new c0(t._key,xr.none())])}function DT(t,e){return function(r,i){const s=new Wr;return r.asyncQueue.enqueueAndForget(async()=>s6(await g6(r),i,s)),s.promise}(S0(t),e)}function B6(t,e,n){const r=n.docs.get(e._key),i=new PT(t);return new NT(t,i,e._key,r,new Ja(n.hasPendingWrites,n.fromCache),e.converter)}function H6(){return new R0("serverTimestamp")}(function(e,n=!0){(function(i){ua=i})(la),br(new or("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wc(new VM(r.getProvider("auth-internal")),new FM(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zn(o_,"4.7.3",e),zn(o_,"4.7.3","esm2017")})();const LT="@firebase/installations",O0="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=1e4,zT=`w:${O0}`,VT="FIS_v2",q6="https://firebaseinstallations.googleapis.com/v1",W6=60*60*1e3,K6="installations",G6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vs=new Fs(K6,G6,Q6);function MT(t){return t instanceof cr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT({projectId:t}){return`${q6}/projects/${t}/installations`}function $T(t){return{token:t.token,requestStatus:2,expiresIn:X6(t.expiresIn),creationTime:Date.now()}}async function FT(t,e){const r=(await e.json()).error;return Vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function UT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Y6(t,{refreshToken:e}){const n=UT(t);return n.append("Authorization",J6(e)),n}async function BT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function X6(t){return Number(t.replace("s","000"))}function J6(t){return`${VT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=jT(t),i=UT(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:VT,appId:t.appId,sdkVersion:zT},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await BT(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:$T(u.authToken)}}else throw await FT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=/^[cdef][\w-]{21}$/,wg="";function n$(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=r$(t);return t$.test(n)?n:wg}catch{return wg}}function r$(t){return e$(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new Map;function WT(t,e){const n=Th(t);KT(n,e),i$(n,e)}function KT(t,e){const n=qT.get(t);if(n)for(const r of n)r(e)}function i$(t,e){const n=s$();n&&n.postMessage({key:t,fid:e}),o$()}let ws=null;function s$(){return!ws&&"BroadcastChannel"in self&&(ws=new BroadcastChannel("[Firebase] FID Change"),ws.onmessage=t=>{KT(t.data.key,t.data.fid)}),ws}function o$(){qT.size===0&&ws&&(ws.close(),ws=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$="firebase-installations-database",l$=1,Ms="firebase-installations-store";let Of=null;function z0(){return Of||(Of=C2(a$,l$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ms)}}})),Of}async function zd(t,e){const n=Th(t),i=(await z0()).transaction(Ms,"readwrite"),s=i.objectStore(Ms),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&WT(t,e.fid),e}async function GT(t){const e=Th(t),r=(await z0()).transaction(Ms,"readwrite");await r.objectStore(Ms).delete(e),await r.done}async function Ih(t,e){const n=Th(t),i=(await z0()).transaction(Ms,"readwrite"),s=i.objectStore(Ms),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&WT(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V0(t){let e;const n=await Ih(t.appConfig,r=>{const i=c$(r),s=u$(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===wg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function c$(t){const e=t||{fid:n$(),registrationStatus:0};return QT(e)}function u$(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Vs.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=d$(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:h$(t)}:{installationEntry:e}}async function d$(t,e){try{const n=await Z6(t,e);return zd(t.appConfig,n)}catch(n){throw MT(n)&&n.customData.serverCode===409?await GT(t.appConfig):await zd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function h$(t){let e=await q_(t.appConfig);for(;e.registrationStatus===1;)await HT(100),e=await q_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await V0(t);return r||n}return e}function q_(t){return Ih(t,e=>{if(!e)throw Vs.create("installation-not-found");return QT(e)})}function QT(t){return f$(t)?{fid:t.fid,registrationStatus:0}:t}function f$(t){return t.registrationStatus===1&&t.registrationTime+OT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p$({appConfig:t,heartbeatServiceProvider:e},n){const r=g$(t,n),i=Y6(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:zT,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await BT(()=>fetch(r,a));if(l.ok){const u=await l.json();return $T(u)}else throw await FT("Generate Auth Token",l)}function g$(t,{fid:e}){return`${jT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M0(t,e=!1){let n;const r=await Ih(t.appConfig,s=>{if(!YT(s))throw Vs.create("not-registered");const o=s.authToken;if(!e&&v$(o))return s;if(o.requestStatus===1)return n=m$(t,e),s;{if(!navigator.onLine)throw Vs.create("app-offline");const a=_$(s);return n=y$(t,a),a}});return n?await n:r.authToken}async function m$(t,e){let n=await W_(t.appConfig);for(;n.authToken.requestStatus===1;)await HT(100),n=await W_(t.appConfig);const r=n.authToken;return r.requestStatus===0?M0(t,e):r}function W_(t){return Ih(t,e=>{if(!YT(e))throw Vs.create("not-registered");const n=e.authToken;return x$(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function y$(t,e){try{const n=await p$(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await zd(t.appConfig,r),n}catch(n){if(MT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await GT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await zd(t.appConfig,r)}throw n}}function YT(t){return t!==void 0&&t.registrationStatus===2}function v$(t){return t.requestStatus===2&&!w$(t)}function w$(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+W6}function _$(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function x$(t){return t.requestStatus===1&&t.requestTime+OT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E$(t){const e=t,{installationEntry:n,registrationPromise:r}=await V0(e);return r?r.catch(console.error):M0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b$(t,e=!1){const n=t;return await S$(n),(await M0(n,e)).token}async function S$(t){const{registrationPromise:e}=await V0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t){if(!t||!t.options)throw zf("App Configuration");if(!t.name)throw zf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw zf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zf(t){return Vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="installations",I$="installations-internal",C$=t=>{const e=t.getProvider("app").getImmediate(),n=T$(e),r=Us(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},k$=t=>{const e=t.getProvider("app").getImmediate(),n=Us(e,XT).getImmediate();return{getId:()=>E$(n),getToken:i=>b$(n,i)}};function A$(){br(new or(XT,C$,"PUBLIC")),br(new or(I$,k$,"PRIVATE"))}A$();zn(LT,O0);zn(LT,O0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="analytics",R$="firebase_id",N$="origin",P$=60*1e3,D$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",j0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln=new uh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xn=new Fs("analytics","Analytics",L$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$(t){if(!t.startsWith(j0)){const e=xn.create("invalid-gtag-resource",{gtagURL:t});return ln.warn(e.message),""}return t}function JT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function z$(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function V$(t,e){const n=z$("firebase-js-sdk-policy",{createScriptURL:O$}),r=document.createElement("script"),i=`${j0}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function M$(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function j$(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await JT(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){ln.error(a)}t("config",i,s)}async function $$(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await JT(n);for(const l of o){const u=a.find(h=>h.measurementId===l),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){ln.error(s)}}function F$(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await $$(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await j$(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){ln.error(a)}}return i}function U$(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=F$(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function B$(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(j0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$=30,q$=1e3;class W${constructor(e={},n=q$){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ZT=new W$;function K$(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function G$(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:K$(r)},s=D$.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw xn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Q$(t,e=ZT,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw xn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw xn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new J$;return setTimeout(async()=>{a.abort()},P$),eI({appId:r,apiKey:i,measurementId:s},o,a,e)}async function eI(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ZT){var s;const{appId:o,measurementId:a}=t;try{await Y$(r,e)}catch(l){if(a)return ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await G$(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!X$(u)){if(i.deleteThrottleMetadata(o),a)return ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Nw(n,i.intervalMillis,H$):Nw(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,h),ln.debug(`Calling attemptFetch again in ${d} millis`),eI(t,h,r,i)}}function Y$(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function X$(t){if(!(t instanceof cr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class J${constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Z$(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(){if(b2())try{await S2()}catch(t){return ln.warn(xn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ln.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function tF(t,e,n,r,i,s,o){var a;const l=Q$(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&ln.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>ln.error(m)),e.push(l);const u=eF().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,u]);B$(s)||V$(s,d.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[N$]="firebase",f.update=!0,h!=null&&(f[R$]=h),i("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.app=e}_delete(){return delete fl[this.app.options.appId],Promise.resolve()}}let fl={},K_=[];const G_={};let Vf="dataLayer",rF="gtag",Q_,tI,Y_=!1;function iF(){const t=[];if(E2()&&t.push("This is a browser extension environment."),ZO()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=xn.create("invalid-analytics-context",{errorInfo:e});ln.warn(n.message)}}function sF(t,e,n){iF();const r=t.options.appId;if(!r)throw xn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xn.create("no-api-key");if(fl[r]!=null)throw xn.create("already-exists",{id:r});if(!Y_){M$(Vf);const{wrappedGtag:s,gtagCore:o}=U$(fl,K_,G_,Vf,rF);tI=s,Q_=o,Y_=!0}return fl[r]=tF(t,K_,G_,e,Q_,Vf,n),new nF(t)}function oF(t=Um()){t=qt(t);const e=Us(t,Vd);return e.isInitialized()?e.getImmediate():aF(t)}function aF(t,e={}){const n=Us(t,Vd);if(n.isInitialized()){const i=n.getImmediate();if(Fl(e,n.getOptions()))return i;throw xn.create("already-initialized")}return n.initialize({options:e})}function lF(t,e,n,r){t=qt(t),Z$(tI,fl[t.app.options.appId],e,n,r).catch(i=>ln.error(i))}const X_="@firebase/analytics",J_="0.10.8";function cF(){br(new or(Vd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return sF(r,i,n)},"PUBLIC")),br(new or("analytics-internal",t,"PRIVATE")),zn(X_,J_),zn(X_,J_,"esm2017");function t(e){try{const n=e.getProvider(Vd).getImmediate();return{logEvent:(r,i,s)=>lF(n,r,i,s)}}catch(n){throw xn.create("interop-component-reg-failed",{reason:n})}}}cF();const uF={apiKey:"AIzaSyBRvglSh40aRJFOA9SNxoyBhNjslW_7p8k",authDomain:"detective-board-b108b.firebaseapp.com",projectId:"detective-board-b108b",storageBucket:"detective-board-b108b.firebasestorage.app",messagingSenderId:"140107009046",appId:"1:140107009046:web:49e3c650ea0e90a5f2b937",measurementId:"G-TBJ91VEM4Y"},$0=k2(uF);oF($0);const Jl=NM($0),fu=x6($0),dF=new zr,hF=L.createContext();function nI(){return L.useContext(hF)}const fF=({onSwitchToSignUp:t,onForgotPassword:e})=>{const[n,r]=L.useState(""),[i,s]=L.useState(""),[o,a]=L.useState(""),l=async d=>{d.preventDefault(),a("");try{await yV(Jl,n,i)}catch{a("Error al iniciar sesin. Verifica tus credenciales.")}},u=async()=>{a("");try{await $V(Jl,dF)}catch{a("Error al iniciar sesin con Google.")}};return g.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[g.jsxs("form",{onSubmit:l,className:"bg-zinc-800 shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center font-mono",children:"INICIAR SESIN"}),o&&g.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:o}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-zinc-400 text-sm font-bold mb-2",htmlFor:"login-email",children:"Correo"}),g.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 bg-zinc-700 border-zinc-600 text-white leading-tight focus:outline-none focus:shadow-outline focus:border-red-500",id:"login-email",type:"email",value:n,onChange:d=>r(d.target.value),required:!0})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{className:"block text-zinc-400 text-sm font-bold mb-2",htmlFor:"login-password",children:"Contrasea"}),g.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 bg-zinc-700 border-zinc-600 text-white mb-3 leading-tight focus:outline-none focus:shadow-outline focus:border-red-500",id:"login-password",type:"password",value:i,onChange:d=>s(d.target.value),required:!0})]}),g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase",type:"submit",children:"Entrar"}),g.jsx("button",{onClick:u,type:"button",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase",children:"Entrar con Google"})]}),g.jsx("div",{className:"text-center mt-6",children:g.jsx("a",{onClick:e,className:"inline-block align-baseline font-bold text-sm text-blue-400 hover:text-blue-300 cursor-pointer",children:"Olvidaste tu contrasea?"})})]}),g.jsxs("p",{className:"text-center text-zinc-500 text-xs",children:["No tienes cuenta?"," ",g.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Regstrate aqu."})]})]})},pF=({onSwitchToLogin:t})=>{const[e,n]=L.useState(""),[r,i]=L.useState(""),[s,o]=L.useState(""),[a,l]=L.useState(""),u=async d=>{if(d.preventDefault(),r!==s)return l("Las contraseas no coinciden.");l("");try{await mV(Jl,e,r)}catch(h){l(h.code==="auth/email-already-in-use"?"Este correo ya est en uso.":"Error al crear la cuenta.")}};return g.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[g.jsxs("form",{onSubmit:u,className:"bg-zinc-800 shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center font-mono",children:"CREAR CUENTA"}),a&&g.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:a}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-zinc-400 text-sm font-bold mb-2",htmlFor:"signup-email",children:"Correo"}),g.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 bg-zinc-700 border-zinc-600 text-white leading-tight focus:outline-none focus:shadow-outline focus:border-red-500",id:"signup-email",type:"email",value:e,onChange:d=>n(d.target.value),required:!0})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-zinc-400 text-sm font-bold mb-2",htmlFor:"signup-password",children:"Contrasea"}),g.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 bg-zinc-700 border-zinc-600 text-white leading-tight focus:outline-none focus:shadow-outline focus:border-red-500",id:"signup-password",type:"password",value:r,onChange:d=>i(d.target.value),required:!0})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{className:"block text-zinc-400 text-sm font-bold mb-2",htmlFor:"signup-confirm-password",children:"Confirmar Contrasea"}),g.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 bg-zinc-700 border-zinc-600 text-white mb-3 leading-tight focus:outline-none focus:shadow-outline focus:border-red-500",id:"signup-confirm-password",type:"password",value:s,onChange:d=>o(d.target.value),required:!0})]}),g.jsx("div",{className:"flex flex-col gap-4",children:g.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase",type:"submit",children:"Registrarse"})})]}),g.jsxs("p",{className:"text-center text-zinc-500 text-xs",children:["Ya tienes una cuenta?"," ",g.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Inicia sesin."})]})]})},gF=({onSwitchToLogin:t})=>{const[e,n]=L.useState(""),[r,i]=L.useState(""),[s,o]=L.useState(""),a=async l=>{l.preventDefault(),o(""),i("");try{await gV(Jl,e),i("Revisa tu correo! Se ha enviado un enlace para restablecer tu contrasea.")}catch{o("Error al enviar el correo. Verifica que la direccin sea correcta.")}};return g.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[g.jsxs("form",{onSubmit:a,className:"bg-zinc-800 shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center font-mono",children:"RECUPERAR CONTRASEA"}),s&&g.jsx("p",{className:"bg-red-900/50 text-red-300 text-xs p-3 rounded mb-4",children:s}),r&&g.jsx("p",{className:"bg-green-900/50 text-green-300 text-xs p-3 rounded mb-4",children:r}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-zinc-400 text-sm font-bold mb-2",htmlFor:"reset-email",children:"Correo Electrnico"}),g.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 bg-zinc-700 border-zinc-600 text-white leading-tight focus:outline-none focus:shadow-outline focus:border-red-500",id:"reset-email",type:"email",value:e,onChange:l=>n(l.target.value),required:!0})]}),g.jsx("div",{className:"flex flex-col gap-4",children:g.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline uppercase",type:"submit",children:"Enviar Enlace"})})]}),g.jsx("p",{className:"text-center text-zinc-500 text-xs",children:g.jsx("a",{onClick:t,className:"text-red-400 hover:text-red-300 font-bold cursor-pointer",children:"Volver a Iniciar Sesin"})})]})},mF=()=>{const[t,e]=L.useState("login"),n=()=>{switch(t){case"signup":return g.jsx(pF,{onSwitchToLogin:()=>e("login")});case"forgot":return g.jsx(gF,{onSwitchToLogin:()=>e("login")});case"login":default:return g.jsx(fF,{onSwitchToSignUp:()=>e("signup"),onForgotPassword:()=>e("forgot")})}};return g.jsxs("div",{className:"w-screen h-screen bg-zinc-900 flex flex-col items-center justify-center p-4",children:[g.jsx("h1",{className:"text-5xl font-black text-zinc-500 font-mono mb-4 tracking-[0.2em] uppercase",children:"DETECTIVE BOARD"}),n()]})},yF=()=>{const{currentUser:t}=nI(),e=L.useCallback(async(s,o)=>{if(!(!t||!s))try{const a=Lf(fu,"users",t.uid,"boards",s),l=JSON.parse(JSON.stringify(o));await F6(a,{...l,updatedAt:H6(),ownerId:t.uid},{merge:!0})}catch(a){console.error("Error al guardar en Firestore:",a)}},[t]),n=L.useCallback(async s=>{if(!t||!s)return null;try{const o=Lf(fu,"users",t.uid,"boards",s),a=await j6(o);return a.exists()?a.data():null}catch(o){return console.error("Error al cargar de Firestore:",o),null}},[t]),r=L.useCallback(async()=>{if(!t)return[];try{const s=_6(fu,"users",t.uid,"boards"),o=L6(s);return(await $6(o)).docs.map(l=>({id:l.id,...l.data()}))}catch(s){return console.error("Error al obtener tableros:",s),[]}},[t]),i=L.useCallback(async s=>{t&&await U6(Lf(fu,"users",t.uid,"boards",s))},[t]);return{saveBoard:e,loadBoard:n,getBoards:r,deleteBoard:i}},vF=()=>{var ss,hi,fi;const t=L.useRef(null);L.useEffect(()=>{document.title="Detective Board";const we="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%23dc2626%22%20stroke-width%3D%222.5%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Ccircle%20cx%3D%2211%22%20cy%3D%2211%22%20r%3D%228%22%3E%3C%2Fcircle%3E%3Cline%20x1%3D%2221%22%20y1%3D%2221%22%20x2%3D%2216.65%22%20y2%3D%2216.65%22%3E%3C%2Fline%3E%3C%2Fsvg%3E";let ue=document.querySelector("link[rel~='icon']");ue||(ue=document.createElement("link"),ue.rel="icon",document.head.appendChild(ue)),ue.href=we},[]);const[e,n]=L.useState(!1),[r,i,s]=P5([]),[o,a,l]=D5([]),[u,d]=L.useState(null),[h,f]=L.useState(!1),[m,S]=L.useState(null),[b,N]=L.useState(null),[y,v]=L.useState(null),[I,R]=L.useState({isOpen:!1,title:"",message:"",onConfirm:null,isDanger:!1}),[O,M]=L.useState(!1),[C,x]=L.useState(!1),[w,E]=L.useState(null),[k,A]=L.useState(null),{saveBoard:T,loadBoard:P}=yF(),{connectionColor:j,setConnectionColor:z,connectionLineType:B,setConnectionLineType:$,isInteractive:V,setIsInteractive:U,isDarkMode:q,setIsDarkMode:F,searchTerm:G,setSearchTerm:Y,isSidebarOpen:Z,setIsSidebarOpen:ie,isZenMode:ce,setIsZenMode:ae,bgType:ge,setBgType:pe,toggleBackground:Ie}=OO("cork"),{nodeTypes:Oe,edgeTypes:qe,proOptions:$e,connectionLineStyle:Ne,nodeColor:nt}=kO({connectionColor:j}),{takeSnapshot:me,undo:te,redo:Ee,clearHistory:ut,onNodesChangeWithHistory:un,onEdgesChangeWithHistory:In,animateAndRemoveNode:Wt,animateAndRemoveEdge:Pt}=RO({nodes:r,edges:o,setNodes:i,setEdges:a,onNodesChange:s,onEdgesChange:l}),{boards:We,setBoards:ke,trash:Pe,currentBoardId:ze,handleSwitchBoard:Dt,handleCreateBoard:ur,handleDeleteBoard:st,handleRestoreBoard:dt,handlePermanentDelete:Cn,handleRenameBoard:kn,handleReorderBoards:dn,handleCloneBoard:hn}=oO({nodes:r,edges:o,bgType:ge,setNodes:i,setEdges:a,setBgType:pe,reactFlowInstance:u,clearHistory:ut,setCaseManagerOpen:n,setConfirmModal:R,lastSaved:b});L.useEffect(()=>{(async()=>{if(ze){const ue=await P(ze);ue&&(i(ue.nodes||[]),a(ue.edges||[]),ue.bgType&&pe(ue.bgType))}})()},[ze,P,i,a,pe]),L.useEffect(()=>{const we=setTimeout(()=>{var ue;ze&&(r.length>0||o.length>0)&&(T(ze,{nodes:r,edges:o,bgType:ge,name:((ue=We.find(ft=>ft.id===ze))==null?void 0:ue.name)||"Caso Sin Nombre"}),N(new Date))},2e3);return()=>clearTimeout(we)},[r,o,ge,ze,T,We]),L.useEffect(()=>{const we=ue=>{ue.preventDefault(),ue.returnValue=""};return window.addEventListener("beforeunload",we),()=>window.removeEventListener("beforeunload",we)},[]),dL({isInteractive:V,reactFlowInstance:u,takeSnapshot:me,setNodes:i});const{onConnect:Xt,onEdgeContextMenu:$n,onEdgeClick:ai,onPaneClick:Fn,onNodeDoubleClick:Un,onNodeDragStart:li,onMoveStart:fn,onMoveEnd:Bn,selectionRect:Hn,handleRightPointerDown:ci}=PO({isInteractive:V,reactFlowInstance:u,reactFlowWrapper:t,setEdges:a,setNodes:i,connectionLineType:B,connectionColor:j,takeSnapshot:me,setEditingNode:S,setEditingEdge:E,setInputModalOpen:x,setEditModalOpen:f,setMenu:v});L.useEffect(()=>{const we=ue=>{ue.key==="Escape"&&ce&&ae(!1)};return window.addEventListener("keydown",we),()=>window.removeEventListener("keydown",we)},[ce]);const{handleSaveNode:qs,handleDeleteNode:Cr,duplicateSelected:Ws,handleConnectionColorChange:ht,handleConnectionLineTypeChange:Ks,handleEdgeDelete:kr,handleInputModalConfirm:Ar}=zO({reactFlowInstance:u,setNodes:i,setEdges:a,takeSnapshot:me,animateAndRemoveNode:Wt,animateAndRemoveEdge:Pt,setEditModalOpen:f,setEditingNode:S,setEditingEdge:E,setInputModalOpen:x,setConnectionColor:z,setConnectionLineType:$,setPendingStampNodeId:A}),{onDragOver:ga,onDrop:ma}=lO({isInteractive:V,reactFlowInstance:u,setNodes:i,takeSnapshot:me,setPendingStampNodeId:A,setInputModalOpen:x,setEditingEdge:E,setEditingNode:S}),{onSave:qn,onLoad:ya,onClear:va}=DO({reactFlowInstance:u,boards:We,currentBoardId:ze,bgType:ge,setBoards:ke,setNodes:i,setEdges:a,setBgType:pe,handleSwitchBoard:Dt,clearHistory:ut,takeSnapshot:me,setConfirmModal:R}),{navigateSearch:dr}=LO({searchTerm:G,setNodes:i,reactFlowInstance:u}),ui=W.useCallback(()=>{me(),i(we=>{const ue=we.filter(Je=>Je.selected);if(ue.length===0)return we;const ft=ue.some(Je=>!Je.data.locked);return we.map(Je=>Je.selected?{...Je,data:{...Je.data,locked:ft},draggable:!ft}:Je)})},[i,me]);L.useEffect(()=>{const we=ue=>{["INPUT","TEXTAREA","SELECT"].includes(ue.target.tagName)||ue.target.isContentEditable||(ue.ctrlKey||ue.metaKey)&&ue.shiftKey&&ue.key.toLowerCase()==="l"&&(ue.preventDefault(),ui())};return window.addEventListener("keydown",we),()=>window.removeEventListener("keydown",we)},[ui]),L.useEffect(()=>{const we=r.filter(ue=>ue.selected).map(ue=>ue.id);a(ue=>{let ft=!1;const Je=ue.map(Lt=>{var An;const pi=we.includes(Lt.source)||we.includes(Lt.target),hr=(An=Lt.className)==null?void 0:An.includes("animated-flow");if(pi&&!hr){ft=!0;const gi=(Lt.className||"").replace("quick-draw","").trim();return{...Lt,className:`${gi} animated-flow`.trim()}}else if(!pi&&hr)return ft=!0,{...Lt,className:(Lt.className||"").replace("animated-flow","").trim()};return Lt});return ft?Je:ue})},[r,a]),L.useEffect(()=>{if(o.some(ue=>{var ft;return(ft=ue.className)==null?void 0:ft.includes("quick-draw")})){const ue=setTimeout(()=>{a(ft=>ft.map(Je=>{var Lt;return(Lt=Je.className)!=null&&Lt.includes("quick-draw")?{...Je,className:Je.className.replace("quick-draw","").trim()}:Je}))},1e3);return()=>clearTimeout(ue)}},[o,a]);const{isExporting:is,onExport:di}=iO({reactFlowWrapper:t,reactFlowInstance:u,boards:We,currentBoardId:ze,bgType:ge,isDarkMode:q,setNodes:i});aO({onSave:qn,undo:te,redo:Ee,duplicateSelected:Ws,navigateSearch:dr,reactFlowInstance:u,edges:o,setEdges:a,takeSnapshot:me,connectionLineType:B,connectionColor:j});const Jt=We.find(we=>we.id===ze),Gs=async()=>{try{await _V(Jl)}catch(we){console.error("Error al cerrar sesin",we)}};return g.jsx("div",{className:`flex h-screen w-screen transition-colors duration-500 ease-in-out ${q?"bg-[#1a1a1a]":"bg-gray-50 light-mode"}`,children:g.jsx(g2.Provider,{value:q,children:g.jsxs(Nm,{children:[!ce&&g.jsx(ZD,{connectionColor:j,setConnectionColor:ht,connectionLineType:B,setConnectionLineType:Ks,lastSaved:b,onSave:qn,onLoad:ya,onClear:va,onHelp:()=>M(!0),isDarkMode:q,toggleTheme:()=>F(!q),searchTerm:G,setSearchTerm:Y,onExport:di,isOpen:Z,onToggle:()=>ie(!Z),onOpenCaseManager:()=>n(!0),currentBoardName:Jt==null?void 0:Jt.name,onToggleZen:()=>ae(!0),onNextMatch:()=>dr("next"),onPrevMatch:()=>dr("prev"),onToggleBg:Ie,onLogout:Gs}),g.jsxs("div",{className:"flex-grow h-full relative overflow-hidden",ref:t,style:{"--connection-color":j},onPointerDown:ci,onContextMenu:we=>we.preventDefault(),children:[g.jsx(uL,{isZenMode:ce,setIsZenMode:ae,undo:te,redo:Ee,isDarkMode:q}),g.jsxs(jb,{nodes:r,edges:o,onNodesChange:un,onEdgesChange:In,onConnect:Xt,onInit:d,onDrop:ma,onDragOver:ga,onNodeDoubleClick:Un,onEdgeClick:ai,onEdgeContextMenu:$n,onPaneClick:Fn,nodeTypes:Oe,edgeTypes:qe,fitView:!0,className:`${ge==="cork"?"cork-pattern":ge==="blackboard"?"blackboard-pattern":"graph-paper-pattern"} ${V?"":"board-locked"} ${q?"":"light-mode"}`,connectionLineType:B,connectionLineStyle:Ne,nodesDraggable:V,proOptions:$e,elevateNodesOnSelect:!1,nodesConnectable:V,elementsSelectable:V,panOnDrag:V,zoomOnScroll:V,zoomOnPinch:V,panOnScroll:V,zoomOnDoubleClick:V,onNodeDragStart:li,onMoveStart:fn,onMoveEnd:Bn,connectionRadius:30,children:[!ce&&g.jsx(Y5,{showInteractive:!0,onInteractiveChange:U,fitViewOptions:{duration:800,padding:.2},style:{left:Z?"340px":"10px",transition:"left 0.2s ease-in-out"}}),!ce&&g.jsx(B5,{nodeColor:nt,maskColor:q?"rgba(0, 0, 0, 0.6)":"rgba(0, 0, 0, 0.1)",className:q?"bg-zinc-900 border border-zinc-800":"bg-white border border-gray-200 shadow-md"}),g.jsx(nD,{gap:20,size:1,color:q?"#444":"#aaa",variant:"dots",className:"opacity-20"}),y&&g.jsx(sL,{onClick:Fn,...y,onHide:()=>v(null),takeSnapshot:me,setNodes:i}),r.length===0&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10 select-none",children:g.jsxs("div",{className:`text-center ${q?"opacity-10":"opacity-20"}`,children:[g.jsx("h1",{className:"text-5xl md:text-7xl font-black text-zinc-500 font-mono mb-4 tracking-[0.2em] uppercase",children:"CONFIDENCIAL"}),g.jsx("p",{className:"text-sm text-zinc-500 font-mono uppercase tracking-widest",children:"Arrastra evidencia o haz doble clic"})]})}),g.jsx("svg",{style:{position:"absolute",top:0,left:0,width:0,height:0,pointerEvents:"none"},children:g.jsx("defs",{children:g.jsxs("filter",{id:"yarn-texture",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[g.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.8",numOctaves:"3",result:"noise"}),g.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"1.5"})]})})})]}),g.jsx("div",{className:"absolute inset-0 pointer-events-none z-[5] bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.6)_100%)]"}),is&&g.jsxs("div",{className:"absolute inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center backdrop-blur-sm animate-in fade-in duration-200 cursor-wait",children:[g.jsx("div",{className:"w-16 h-16 border-4 border-red-600 border-t-transparent rounded-full animate-spin mb-4"}),g.jsx("h2",{className:"text-xl font-bold text-white font-mono tracking-widest animate-pulse",children:"REVELANDO EVIDENCIA..."}),g.jsx("p",{className:"text-zinc-400 text-xs font-mono mt-2",children:"Procesando fotografa del tablero completo."})]}),Hn&&Hn.isDragging&&g.jsx("div",{className:"absolute z-50 pointer-events-none",style:{left:`${Hn.x}px`,top:`${Hn.y}px`,width:`${Hn.width}px`,height:`${Hn.height}px`,border:"2px dashed #3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)"}})]}),g.jsx(eL,{isOpen:h,onClose:()=>f(!1),node:m,onSave:qs,onDelete:Cr,isDarkMode:q}),g.jsx(oL,{isOpen:I.isOpen,onClose:()=>R(we=>({...we,isOpen:!1})),onConfirm:I.onConfirm,title:I.title,message:I.message,isDanger:I.isDanger,confirmText:I.confirmText,cancelText:I.cancelText,isDarkMode:q}),g.jsx(aL,{isOpen:O,onClose:()=>M(!1),isDarkMode:q}),g.jsx(lL,{isOpen:C,onClose:()=>{x(!1),E(null),S(null),A(null)},onConfirm:(we,ue,ft)=>Ar(we,ue,ft,w,m,k),onDelete:()=>{k?(me(),i(we=>we.map(ue=>ue.id===k?{...ue,data:{...ue.data,status:null}}:ue)),x(!1),A(null)):kr(w,m)},title:w?"EDITAR CONEXIN":k?"CREAR SELLO":"EDITAR ZONA",initialValue:w?w.label||"":k?"":((ss=m==null?void 0:m.data)==null?void 0:ss.label)||"",initialColor:w?((hi=w.style)==null?void 0:hi.stroke)||"#dc2626":k?"#dc2626":((fi=m==null?void 0:m.style)==null?void 0:fi.borderColor)||"#71717a",initialType:w==null?void 0:w.type,showTypeSelector:!!w,colorLabel:w?"Color del Hilo":k?"Color del Sello":"Color de Zona",placeholder:k?"Texto del sello (ej: CONFIRMADO)":"Escribe una etiqueta...",isDarkMode:q}),g.jsx(cL,{isOpen:e,onClose:()=>n(!1),boards:We,currentBoardId:ze,onSwitch:Dt,onCreate:ur,onDelete:st,onRename:kn,onClone:hn,onReorder:dn,trash:Pe,onRestore:dt,onPermanentDelete:Cn,isDarkMode:q})]})})})},wF=()=>{const{currentUser:t}=nI();return t?g.jsx(vF,{}):g.jsx(mF,{})};Mf.createRoot(document.getElementById("root")).render(g.jsx(W.StrictMode,{children:g.jsx(wF,{})}));
